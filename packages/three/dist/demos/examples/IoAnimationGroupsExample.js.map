{"version":3,"file":"IoAnimationGroupsExample.js","sourceRoot":"","sources":["../../../src/demos/examples/IoAnimationGroupsExample.ts"],"names":[],"mappings":"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","sourcesContent":["import {\n  AnimationClip,\n  AnimationMixer,\n  AnimationObjectGroup,\n  BoxGeometry,\n  ColorKeyframeTrack,\n  InterpolateDiscrete,\n  Mesh,\n  MeshBasicMaterial,\n  NumberKeyframeTrack,\n  Quaternion,\n  QuaternionKeyframeTrack,\n  Vector3\n} from 'three/webgpu'\nimport { Register, ReactiveProperty } from '@io-gui/core'\nimport { ThreeApplet, IoThreeExample, ThreeAppletProps } from '@io-gui/three'\n\n@Register\nexport class AnimationGroupsExample extends ThreeApplet {\n\n  public mixer: AnimationMixer\n\n  constructor(args: ThreeAppletProps) {\n    super(args)\n\n    // all objects of this animation group share a common animation state\n    const animationGroup = new AnimationObjectGroup()\n\n    const geometry = new BoxGeometry( 5, 5, 5 )\n    const material = new MeshBasicMaterial( { transparent: true } )\n\n    for ( let i = 0; i < 5; i ++ ) {\n      for ( let j = 0; j < 5; j ++ ) {\n        const mesh = new Mesh( geometry, material )\n        mesh.position.x = 32 - ( 16 * i )\n        mesh.position.y = 0\n        mesh.position.z = 32 - ( 16 * j )\n        this.scene.add( mesh )\n        animationGroup.add( mesh )\n      }\n    }\n\n    // create some keyframe tracks\n    const xAxis = new Vector3( 1, 0, 0 )\n    const qInitial = new Quaternion().setFromAxisAngle( xAxis, 0 )\n    const qFinal = new Quaternion().setFromAxisAngle( xAxis, Math.PI )\n    const quaternionKF = new QuaternionKeyframeTrack(\n      '.quaternion',\n      [ 0, 1, 2 ],\n      [ qInitial.x, qInitial.y, qInitial.z, qInitial.w, qFinal.x, qFinal.y, qFinal.z, qFinal.w, qInitial.x, qInitial.y, qInitial.z, qInitial.w ]\n    )\n\n    const colorKF = new ColorKeyframeTrack( '.material.color', [ 0, 1, 2 ], [ 1, 0, 0, 0, 1, 0, 0, 0, 1 ], InterpolateDiscrete )\n    const opacityKF = new NumberKeyframeTrack( '.material.opacity', [ 0, 1, 2 ], [ 1, 0, 1 ] )\n\n    // create clip\n    const clip = new AnimationClip( 'default', 3, [ quaternionKF, colorKF, opacityKF ] )\n\n    // apply the animation group to the mixer as the root object\n    this.mixer = new AnimationMixer( animationGroup )\n\n    const clipAction = this.mixer.clipAction( clip )\n    clipAction.play()\n  }\n\n  onAnimate(delta: number) {\n    this.mixer.update(delta)\n  }\n}\n\n@Register\nexport class IoAnimationGroupsExample extends IoThreeExample {\n\n  @ReactiveProperty({type: AnimationGroupsExample, init: {playing: true}})\n  declare applet: AnimationGroupsExample\n\n}\n\nexport const ioAnimationGroupsExample = IoAnimationGroupsExample.vConstructor\n"]}