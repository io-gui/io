{"version":3,"file":"IoAnimationKeyframesExample.js","sourceRoot":"","sources":["../../../src/demos/examples/IoAnimationKeyframesExample.ts"],"names":[],"mappings":"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","sourcesContent":["import {\n  AnimationMixer,\n  Color,\n  Object3D,\n  PerspectiveCamera,\n  PMREMGenerator,\n  WebGPURenderer\n} from 'three/webgpu'\nimport { RoomEnvironment } from 'three/addons/environments/RoomEnvironment.js'\nimport { GLTFLoader } from 'three/addons/loaders/GLTFLoader.js'\nimport { DRACOLoader } from 'three/addons/loaders/DRACOLoader.js'\nimport { Register, ReactiveProperty } from '@io-gui/core'\nimport { ThreeApplet, IoThreeExample, ThreeAppletProps   } from '@io-gui/three'\n\n@Register\nexport class AnimationKeyframesExample extends ThreeApplet {\n\n  public mixer: AnimationMixer = new AnimationMixer(new Object3D())\n\n  constructor(args: ThreeAppletProps) {\n    super(args)\n    this.scene.background = new Color( 0xbfe3dd )\n  }\n\n  async onRendererInitialized(renderer: WebGPURenderer) {\n    super.onRendererInitialized(renderer)\n\n    const pmremGenerator = new PMREMGenerator( renderer )\n    this.scene.environment = pmremGenerator.fromScene( new RoomEnvironment(), 0.04 ).texture\n\n    const dracoLoader = new DRACOLoader()\n    dracoLoader.setDecoderPath( 'https://www.gstatic.com/draco/versioned/decoders/1.5.7/' )\n\n    const loader = new GLTFLoader()\n    loader.setDRACOLoader( dracoLoader )\n\n    try {\n      const gltf = await loader.loadAsync( 'https://threejs.org/examples/models/gltf/LittlestTokyo.glb' )\n      const model = gltf.scene\n      model.position.set( 1, 1, 0 )\n      model.scale.set( 0.01, 0.01, 0.01 )\n      this.scene.add( model )\n\n      this.mixer = new AnimationMixer( model )\n      this.mixer.clipAction( gltf.animations[ 0 ] ).play()\n\n      const train = gltf.scene.getObjectByName('Object675')!\n      const perspectiveCamera = new PerspectiveCamera( 125, 1, 0.1, 1000 )\n      perspectiveCamera.position.set(140, 0, 30)\n      perspectiveCamera.rotation.set(Math.PI / 2, -Math.PI / 2, 0)\n      train.add(perspectiveCamera)\n\n      this.dispatchMutation()\n      this.dispatch('frame-object', {object: this.scene}, true)\n    } catch ( e ) {\n      console.error( e )\n    }\n  }\n\n  onAnimate(delta: number) {\n    if ( this.mixer ) {\n      this.mixer.update( delta )\n      debug: {\n        this.dispatchMutation(this.mixer)\n      }\n    }\n  }\n}\n\n@Register\nexport class IoAnimationKeyframesExample extends IoThreeExample {\n\n  @ReactiveProperty({type: AnimationKeyframesExample, init: {playing: true}})\n  declare applet: AnimationKeyframesExample\n\n}\n\nexport const ioAnimationKeyframesExample = IoAnimationKeyframesExample.vConstructor\n"]}