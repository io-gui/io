{"version":3,"file":"IoGeometryColorsExample.js","sourceRoot":"","sources":["../../../src/demos/examples/IoGeometryColorsExample.ts"],"names":[],"mappings":"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","sourcesContent":["import {\n  BufferAttribute,\n  CanvasTexture,\n  Color,\n  DirectionalLight,\n  IcosahedronGeometry,\n  Mesh,\n  MeshBasicMaterial,\n  MeshPhongMaterial,\n  PlaneGeometry,\n  SRGBColorSpace\n} from 'three/webgpu'\nimport { Register, ReactiveProperty } from '@io-gui/core'\nimport { ThreeApplet, IoThreeViewport } from '@io-gui/three'\n\n@Register\nexport class GeometryColorsExample extends ThreeApplet {\n\n  constructor() {\n    super()\n\n    this.scene.background = new Color( 0xffffff )\n\n    const light = new DirectionalLight( 0xffffff, 3 )\n    light.position.set( 0, 0, 1 )\n    this.scene.add( light )\n\n    // shadow\n\n    const canvas = document.createElement( 'canvas' )\n    canvas.width = 128\n    canvas.height = 128\n\n    const context = canvas.getContext( '2d' )!\n    const gradient = context.createRadialGradient( canvas.width / 2, canvas.height / 2, 0, canvas.width / 2, canvas.height / 2, canvas.width / 2 )\n    gradient.addColorStop( 0.1, 'rgba(210,210,210,1)' )\n    gradient.addColorStop( 1, 'rgba(255,255,255,1)' )\n\n    context.fillStyle = gradient\n    context.fillRect( 0, 0, canvas.width, canvas.height )\n\n    const shadowTexture = new CanvasTexture( canvas )\n\n    const shadowMaterial = new MeshBasicMaterial( { map: shadowTexture } )\n    const shadowGeo = new PlaneGeometry( 300, 300, 1, 1 )\n\n    let shadowMesh\n\n    shadowMesh = new Mesh( shadowGeo, shadowMaterial )\n    shadowMesh.position.y = -250\n    shadowMesh.rotation.x = -Math.PI / 2\n    this.scene.add( shadowMesh )\n\n    shadowMesh = new Mesh( shadowGeo, shadowMaterial )\n    shadowMesh.position.y = -250\n    shadowMesh.position.x = -400\n    shadowMesh.rotation.x = -Math.PI / 2\n    this.scene.add( shadowMesh )\n\n    shadowMesh = new Mesh( shadowGeo, shadowMaterial )\n    shadowMesh.position.y = -250\n    shadowMesh.position.x = 400\n    shadowMesh.rotation.x = -Math.PI / 2\n    this.scene.add( shadowMesh )\n\n    const radius = 200\n\n    const geometry1 = new IcosahedronGeometry( radius, 1 )\n\n    const count = geometry1.attributes.position.count\n    // Note: Original uses Float16Array if available, but WebGPU requires stride to be multiple of 4 bytes\n    // Float16 Ã— 3 = 6 bytes which is invalid, so we always use Float32Array for WebGPU compatibility\n    geometry1.setAttribute( 'color', new BufferAttribute( new Float32Array( count * 3 ), 3 ) )\n\n    const geometry2 = geometry1.clone()\n    const geometry3 = geometry1.clone()\n\n    const color = new Color()\n    const positions1 = geometry1.attributes.position\n    const positions2 = geometry2.attributes.position\n    const positions3 = geometry3.attributes.position\n    const colors1 = geometry1.attributes.color\n    const colors2 = geometry2.attributes.color\n    const colors3 = geometry3.attributes.color\n\n    for ( let i = 0; i < count; i++ ) {\n\n      color.setHSL( ( positions1.getY( i ) / radius + 1 ) / 2, 1.0, 0.5, SRGBColorSpace )\n      colors1.setXYZ( i, color.r, color.g, color.b )\n\n      color.setHSL( 0, ( positions2.getY( i ) / radius + 1 ) / 2, 0.5, SRGBColorSpace )\n      colors2.setXYZ( i, color.r, color.g, color.b )\n\n      color.setRGB( 1, 0.8 - ( positions3.getY( i ) / radius + 1 ) / 2, 0, SRGBColorSpace )\n      colors3.setXYZ( i, color.r, color.g, color.b )\n\n    }\n\n    const material = new MeshPhongMaterial( {\n      color: 0xffffff,\n      flatShading: true,\n      vertexColors: true,\n      shininess: 0\n    } )\n\n    const wireframeMaterial = new MeshBasicMaterial( { color: 0x000000, wireframe: true, transparent: true } )\n\n    let mesh = new Mesh( geometry1, material )\n    let wireframe = new Mesh( geometry1, wireframeMaterial )\n    mesh.add( wireframe )\n    mesh.position.x = -400\n    mesh.rotation.x = -1.87\n    this.scene.add( mesh )\n\n    mesh = new Mesh( geometry2, material )\n    wireframe = new Mesh( geometry2, wireframeMaterial )\n    mesh.add( wireframe )\n    mesh.position.x = 400\n    this.scene.add( mesh )\n\n    mesh = new Mesh( geometry3, material )\n    wireframe = new Mesh( geometry3, wireframeMaterial )\n    mesh.add( wireframe )\n    this.scene.add( mesh )\n  }\n}\n\n@Register\nexport class IoGeometryColorsExample extends IoThreeViewport {\n\n  @ReactiveProperty({type: GeometryColorsExample, init: null})\n  declare applet: GeometryColorsExample\n\n}\n\nexport const ioGeometryColorsExample = IoGeometryColorsExample.vConstructor\n"]}