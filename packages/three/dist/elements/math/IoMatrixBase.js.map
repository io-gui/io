{"version":3,"file":"IoMatrixBase.js","sourceRoot":"","sources":["../../../src/elements/math/IoMatrixBase.ts"],"names":[],"mappings":";;;;;;AAAA,OAAO,EAAE,QAAQ,EAAE,SAAS,EAAE,QAAQ,EAAE,gBAAgB,EAA6C,MAAM,cAAc,CAAA;AACzH,OAAO,EAAE,QAAQ,EAAE,MAAM,gBAAgB,CAAA;AAMzC;;IAEI;AAEG,IAAM,YAAY,GAAlB,MAAM,YAAa,SAAQ,SAAS;IACzC,MAAM,KAAK,KAAK;QACd,OAAO,SAAS,CAAA;;;;;;;;;;;;;;;;;;;;KAoBf,CAAA;IACH,CAAC;IAWD,YAAY,IAAuB;QACjC,KAAK,CAAC,IAAI,CAAC,CAAA;IACb,CAAC;IAED,mBAAmB,CAAC,KAAkB;QACpC,MAAM,IAAI,GAAG,KAAK,CAAC,YAAY,EAAE,CAAC,CAAC,CAAgB,CAAA;QACnD,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,EAAS,CAAC,GAAG,KAAK,CAAC,MAAM,CAAC,KAAK,CAAA;QAC/C,IAAI,CAAE,IAAI,CAAC,KAAiC,CAAC,OAAO,EAAE,CAAC;YACrD,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,KAAK,CAAC,CAAA;QACnC,CAAC;QACD,iDAAiD;QACjD,IAAI,CAAC,QAAQ,CAAC,aAAa,EAAE,EAAC,QAAQ,EAAE,IAAI,CAAC,EAAE,EAAE,KAAK,EAAE,IAAI,CAAC,KAAK,EAAC,EAAE,KAAK,CAAC,CAAA;IAC7E,CAAC;IAED,YAAY;QACV,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,CAAA;QACpB,IAAI,CAAC,IAAI,GAAG,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,IAAI,EAAE,CAAC,CAAA;IACzD,CAAC;IAED,YAAY;QACV,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,CAAA;IAC7B,CAAC;IACD,OAAO;QACL,MAAM,SAAS,GAA8B,EAAE,CAAA;QAC/C,KAAK,MAAM,CAAC,IAAI,IAAI,CAAC,IAAI,EAAE,CAAC;YAC1B,IAAI,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,KAAK,SAAS,EAAE,CAAC;gBAChC,SAAS,CAAC,IAAI,CAAC,QAAQ,CAAC;oBACtB,EAAE,EAAE,MAAM,CAAC,CAAC,CAAC;oBACb,KAAK,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC;oBACpB,IAAI,EAAE,OAAO;oBACb,QAAQ,EAAE,IAAI,CAAC,QAAQ;oBACvB,cAAc,EAAE,IAAI,CAAC,mBAAmB;iBACzC,CAAC,CAAC,CAAA;YACL,CAAC;QACH,CAAC;QACD,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,CAAA;IACxB,CAAC;CACF,CAAA;AA7CS;IADP,gBAAgB,CAAC,EAAC,IAAI,EAAE,KAAK,EAAC,CAAC;2CACJ;AAGpB;IADP,gBAAgB,CAAC,EAAC,KAAK,EAAE,KAAK,EAAE,IAAI,EAAE,OAAO,EAAC,CAAC;8CACvB;AAGjB;IADP,QAAQ,CAAC,EAAC,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE,IAAI,EAAC,CAAC;0CACd;AAhCX,YAAY;IADxB,QAAQ;GACI,YAAY,CAuExB","sourcesContent":["import { Register, IoElement, Property, ReactiveProperty, IoElementProps, VDOMElement, ReactiveNode } from '@io-gui/core'\nimport { ioNumber } from '@io-gui/inputs'\n\nexport type IoMatrixBaseProps = IoElementProps & {\n  value?: number[]\n  disabled?: boolean\n}\n/**\n * Input element for vector arrays and objects.\n **/\n@Register\nexport class IoMatrixBase extends IoElement {\n  static get Style() {\n    return /* css */`\n      :host {\n        display: grid;\n        align-self: stretch;\n        justify-self: stretch;\n        grid-gap: var(--io_spacing);\n        max-width: 100%;\n        overflow: hidden;\n        flex: 1 1 auto;\n      }\n      :host > io-number {\n        flex: 1 1 auto;\n      }\n      :host > *:not(:last-child) {\n        margin-right: 0;\n      }\n      :host > io-boolicon {\n        flex-shrink: 0;\n        padding: var(--io_spacing);\n      }\n    `\n  }\n\n  @ReactiveProperty({type: Array})\n  declare value: Array<number>\n\n  @ReactiveProperty({value: false, type: Boolean})\n  declare disabled: boolean\n\n  @Property({type: Array, init: null})\n  declare keys: number[]\n\n  constructor(args: IoMatrixBaseProps) {\n    super(args)\n  }\n\n  _onNumberValueInput(event: CustomEvent) {\n    const item = event.composedPath()[0] as HTMLElement\n    this.value[item.id as any] = event.detail.value\n    if (!(this.value as unknown as ReactiveNode)._isNode) {\n      this.dispatchMutation(this.value)\n    }\n    // TODO: Rewise and normalize 'value-input' event\n    this.dispatch('value-input', {property: item.id, value: this.value}, false)\n  }\n\n  valueChanged() {\n    this.keys.length = 0\n    this.keys = Array.from(Array(this.value.length).keys())\n  }\n\n  valueMutated() {\n    this.debounce(this.changed)\n  }\n  changed() {\n    const vChildren: Array<VDOMElement | null> = []\n    for (const k of this.keys) {\n      if (this.value[k] !== undefined) {\n        vChildren.push(ioNumber({\n          id: String(k),\n          value: this.value[k],\n          step: 0.00001,\n          disabled: this.disabled,\n          '@value-input': this._onNumberValueInput,\n        }))\n      }\n    }\n    this.render(vChildren)\n  }\n}"]}