{"version":3,"file":"animation_keyframes.js","sourceRoot":"","sources":["../../src/examples/animation_keyframes.ts"],"names":[],"mappings":";;;;;;AAAA,OAAO,EACL,cAAc,EACd,KAAK,EACL,cAAc,EAEf,MAAM,cAAc,CAAA;AACrB,OAAO,EAAE,eAAe,EAAE,MAAM,8CAA8C,CAAA;AAC9E,OAAO,EAAE,UAAU,EAAE,MAAM,oCAAoC,CAAA;AAC/D,OAAO,EAAE,WAAW,EAAE,MAAM,qCAAqC,CAAA;AACjE,OAAO,EAAE,QAAQ,EAAE,MAAM,cAAc,CAAA;AACvC,OAAO,EAAE,UAAU,EAAE,MAAM,eAAe,CAAA;AAGnC,IAAM,yBAAyB,GAA/B,MAAM,yBAA0B,SAAQ,UAAU;IAEhD,KAAK,GAA0B,IAAI,CAAA;IAE1C;QACE,KAAK,EAAE,CAAA;QACP,IAAI,CAAC,KAAK,CAAC,UAAU,GAAG,IAAI,KAAK,CAAE,QAAQ,CAAE,CAAA;IAC/C,CAAC;IAED,KAAK,CAAC,qBAAqB,CAAC,QAAwB;QAClD,KAAK,CAAC,qBAAqB,CAAC,QAAQ,CAAC,CAAA;QAErC,MAAM,cAAc,GAAG,IAAI,cAAc,CAAE,QAAQ,CAAE,CAAA;QACrD,IAAI,CAAC,KAAK,CAAC,WAAW,GAAG,cAAc,CAAC,SAAS,CAAE,IAAI,eAAe,EAAE,EAAE,IAAI,CAAE,CAAC,OAAO,CAAA;QAExF,MAAM,WAAW,GAAG,IAAI,WAAW,EAAE,CAAA;QACrC,WAAW,CAAC,cAAc,CAAE,yDAAyD,CAAE,CAAA;QAEvF,MAAM,MAAM,GAAG,IAAI,UAAU,EAAE,CAAA;QAC/B,MAAM,CAAC,cAAc,CAAE,WAAW,CAAE,CAAA;QAEpC,IAAI,CAAC;YACH,MAAM,IAAI,GAAG,MAAM,MAAM,CAAC,SAAS,CAAE,4DAA4D,CAAE,CAAA;YACnG,MAAM,KAAK,GAAG,IAAI,CAAC,KAAK,CAAA;YACxB,KAAK,CAAC,QAAQ,CAAC,GAAG,CAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAE,CAAA;YAC7B,KAAK,CAAC,KAAK,CAAC,GAAG,CAAE,IAAI,EAAE,IAAI,EAAE,IAAI,CAAE,CAAA;YACnC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAE,KAAK,CAAE,CAAA;YAEvB,IAAI,CAAC,KAAK,GAAG,IAAI,cAAc,CAAE,KAAK,CAAE,CAAA;YACxC,IAAI,CAAC,KAAK,CAAC,UAAU,CAAE,IAAI,CAAC,UAAU,CAAE,CAAC,CAAE,CAAE,CAAC,IAAI,EAAE,CAAA;YAEpD,IAAI,CAAC,gBAAgB,EAAE,CAAA;YACvB,IAAI,CAAC,QAAQ,CAAC,aAAa,EAAE,EAAC,KAAK,EAAE,IAAI,CAAC,KAAK,EAAC,EAAE,IAAI,CAAC,CAAA;QACzD,CAAC;QAAC,OAAQ,CAAC,EAAG,CAAC;YACb,OAAO,CAAC,KAAK,CAAE,CAAC,CAAE,CAAA;QACpB,CAAC;IACH,CAAC;IAED,SAAS,CAAC,KAAa;QACrB,IAAK,IAAI,CAAC,KAAK,EAAG,CAAC;YACjB,IAAI,CAAC,KAAK,CAAC,MAAM,CAAE,KAAK,CAAE,CAAA;QAC5B,CAAC;IACH,CAAC;CACF,CAAA;AA3CY,yBAAyB;IADrC,QAAQ;GACI,yBAAyB,CA2CrC","sourcesContent":["import {\n  AnimationMixer,\n  Color,\n  PMREMGenerator,\n  WebGPURenderer\n} from 'three/webgpu'\nimport { RoomEnvironment } from 'three/addons/environments/RoomEnvironment.js'\nimport { GLTFLoader } from 'three/addons/loaders/GLTFLoader.js'\nimport { DRACOLoader } from 'three/addons/loaders/DRACOLoader.js'\nimport { Register } from '@io-gui/core'\nimport { ThreeState } from '@io-gui/three'\n\n@Register\nexport class AnimationKeyframesExample extends ThreeState {\n\n  public mixer: AnimationMixer | null = null\n\n  constructor() {\n    super()\n    this.scene.background = new Color( 0xbfe3dd )\n  }\n\n  async onRendererInitialized(renderer: WebGPURenderer) {\n    super.onRendererInitialized(renderer)\n\n    const pmremGenerator = new PMREMGenerator( renderer )\n    this.scene.environment = pmremGenerator.fromScene( new RoomEnvironment(), 0.04 ).texture\n\n    const dracoLoader = new DRACOLoader()\n    dracoLoader.setDecoderPath( 'https://www.gstatic.com/draco/versioned/decoders/1.5.7/' )\n\n    const loader = new GLTFLoader()\n    loader.setDRACOLoader( dracoLoader )\n\n    try {\n      const gltf = await loader.loadAsync( 'https://threejs.org/examples/models/gltf/LittlestTokyo.glb' )\n      const model = gltf.scene\n      model.position.set( 1, 1, 0 )\n      model.scale.set( 0.01, 0.01, 0.01 )\n      this.scene.add( model )\n\n      this.mixer = new AnimationMixer( model )\n      this.mixer.clipAction( gltf.animations[ 0 ] ).play()\n\n      this.dispatchMutation()\n      this.dispatch('scene-ready', {scene: this.scene}, true)\n    } catch ( e ) {\n      console.error( e )\n    }\n  }\n\n  onAnimate(delta: number) {\n    if ( this.mixer ) {\n      this.mixer.update( delta )\n    }\n  }\n}\n\n"]}