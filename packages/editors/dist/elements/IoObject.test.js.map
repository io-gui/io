{"version":3,"file":"IoObject.test.js","sourceRoot":"","sources":["../../src/elements/IoObject.test.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,QAAQ,EAAE,EAAE,EAAE,MAAM,EAAE,MAAM,QAAQ,CAAA;AAC7C,OAAO,EAAE,SAAS,EAAE,MAAM,cAAc,CAAA;AACxC,OAAO,EAAE,QAAQ,EAAE,MAAM,gBAAgB,CAAA;AACzC,OAAO,EAAE,QAAQ,EAAE,MAAM,iBAAiB,CAAA;AAC1C,OAAO,EAAE,QAAQ,EAAE,MAAM,iBAAiB,CAAA;AAE1C,MAAM,SAAS,GAAG;IAChB,QAAQ,EAAE,GAAG;IACb,QAAQ,EAAE,OAAO;IACjB,SAAS,EAAE,IAAI;IACf,MAAM,EAAE,IAAI;IACZ,QAAQ,EAAE,EAAC,MAAM,EAAE,MAAM,EAAC;IAC1B,OAAO,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;CACnB,CAAA;AAED,MAAM,OAAO,GAAG,IAAI,QAAQ,EAAE,CAAA;AAC9B,OAAO,CAAC,KAAK,CAAC,OAAO,GAAG,MAAM,CAAA;AAC9B,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,OAAsB,CAAC,CAAA;AAEjD,SAAS,KAAK;IACZ,OAAO,CAAC,KAAK,GAAG,EAAE,CAAA;IAClB,OAAO,CAAC,OAAO,GAAG,IAAI,CAAA;IACtB,OAAO,CAAC,QAAQ,GAAG,KAAK,CAAA;IACxB,OAAO,CAAC,KAAK,GAAG,EAAE,CAAA;IAClB,OAAO,CAAC,MAAM,GAAG,EAAE,CAAA;IACnB,OAAO,CAAC,UAAU,GAAG,EAAE,CAAA;AACzB,CAAC;AAED,QAAQ,CAAC,UAAU,EAAE,GAAG,EAAE;IACxB,EAAE,CAAC,oBAAoB,EAAE,GAAG,EAAE;QAC5B,MAAM,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,EAAE,CAAC,CAAA;QAC9B,MAAM,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAA;QAClC,MAAM,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,CAAA;QACpC,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,CAAA;QACrD,sEAAsE;QACtE,kEAAkE;IACpE,CAAC,CAAC,CAAA;IACF,EAAE,CAAC,gBAAgB,EAAE,KAAK,IAAI,EAAE;QAC9B,OAAO,CAAC,KAAK,GAAG,SAAS,CAAA;QACzB,MAAM,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,YAAY,CAAC,CAAA;QACxD,MAAM,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,CAAA;QAC3C,OAAO,CAAC,QAAQ,GAAG,IAAI,CAAA;QACvB,MAAM,SAAS,EAAE,CAAA;QACjB,MAAM,UAAU,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAA;QACtC,MAAM,CAAC,UAAU,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,oBAAoB,CAAC,CAAA;QACvD,MAAM,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,CAAA;QAC5D,MAAM,IAAI,GAAG,UAAU,CAAC,QAAQ,CAAA;QAChC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,CAAA;QACrC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAA;QAClD,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAA;QACtD,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,CAAA;QACvD,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,CAAA;QAEnD,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,CAAA;QACrC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAA;QAClD,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAA;QACtD,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,CAAA;QACvD,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,CAAA;QAErD,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,CAAA;QACrC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAA;QAClD,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,CAAA;QACvD,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,CAAA;QACvD,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC,IAAI,CAAC,EAAE,CAAC,CAAA;QAEhD,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,CAAA;QACrC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAA;QAClD,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAA;QACpD,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,CAAA;QACtD,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAA;QAEpD,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,CAAA;QACrC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,CAAA;QACvD,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAA;QAC9D,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,CAAA;QAE3C,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,CAAA;QACrC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,CAAA;QACvD,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC,IAAI,CAAC,cAAc,CAAC,CAAA;QAC5D,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,CAAA;QAC3C,KAAK,EAAE,CAAA;IACT,CAAC,CAAC,CAAA;IACF,EAAE,CAAC,oCAAoC,EAAE,KAAK,IAAI,EAAE;QAClD,OAAO,CAAC,KAAK,GAAG,SAAS,CAAA;QACzB,OAAO,CAAC,OAAO,GAAG,KAAK,CAAA;QACvB,OAAO,CAAC,QAAQ,GAAG,IAAI,CAAA;QACvB,MAAM,SAAS,EAAE,CAAA;QACjB,MAAM,UAAU,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAA;QACtC,MAAM,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,CAAA;QACtE,MAAM,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,CAAA;QACtE,MAAM,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,CAAA;QACtE,MAAM,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,CAAA;QACrE,MAAM,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,CAAA;QACtE,MAAM,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,CAAA;QACtE,KAAK,EAAE,CAAA;IACT,CAAC,CAAC,CAAA;IACF,EAAE,CAAC,4CAA4C,EAAE,GAAG,EAAE;QACpD,OAAO,CAAC,KAAK,GAAG,SAAS,CAAA;QACzB,MAAM,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAA;QACtD,OAAO,CAAC,KAAK,GAAG,MAAM,CAAA;QACtB,MAAM,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAA;QACpD,KAAK,EAAE,CAAA;QACP,MAAM,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAA;IACxD,CAAC,CAAC,CAAA;IACF,EAAE,CAAC,sCAAsC,EAAE,KAAK,IAAI,EAAE;QACpD,OAAO,CAAC,KAAK,GAAG,SAAS,CAAA;QACzB,OAAO,CAAC,UAAU,GAAG,CAAC,QAAQ,EAAE,SAAS,CAAC,CAAA;QAC1C,OAAO,CAAC,QAAQ,GAAG,IAAI,CAAA;QACvB,MAAM,SAAS,EAAE,CAAA;QACjB,MAAM,UAAU,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAA;QACtC,MAAM,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,CAAA;QAC5D,MAAM,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,CAAA;QAC1D,MAAM,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,CAAA;QAC9C,KAAK,EAAE,CAAA;IACT,CAAC,CAAC,CAAA;IACF,EAAE,CAAC,kCAAkC,EAAE,KAAK,IAAI,EAAE;QAChD,OAAO,CAAC,KAAK,GAAG,SAAS,CAAA;QACzB,OAAO,CAAC,MAAM,GAAG;YACf,CAAC,QAAQ,EAAE,QAAQ,CAAC,EAAC,IAAI,EAAE,CAAC,EAAC,CAAC,CAAC;YAC/B,CAAC,SAAS,EAAE,QAAQ,EAAE,CAAC;SACxB,CAAA;QACD,OAAO,CAAC,QAAQ,GAAG,IAAI,CAAA;QACvB,MAAM,SAAS,EAAE,CAAA;QACjB,MAAM,UAAU,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAA;QACtC,MAAM,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,CAAA;QACtE,MAAM,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,CAAA;QACtE,KAAK,EAAE,CAAA;IACT,CAAC,CAAC,CAAA;AACJ,CAAC,CAAC,CAAA","sourcesContent":["import { describe, it, expect } from 'vitest'\nimport { nextQueue } from '@io-gui/core'\nimport { ioString } from '@io-gui/inputs'\nimport { ioSlider } from '@io-gui/sliders'\nimport { IoObject } from '@io-gui/editors'\n\nconst testValue = {\n  'number': 0.5,\n  'string': 'hello',\n  'boolean': true,\n  'null': null,\n  'object': {'prop': 'prop'},\n  'array': [1, 2, 3]\n}\n\nconst element = new IoObject()\nelement.style.display = 'none'\ndocument.body.appendChild(element as HTMLElement)\n\nfunction reset() {\n  element.label = ''\n  element.labeled = true\n  element.expanded = false\n  element.value = {}\n  element.config = []\n  element.properties = []\n}\n\ndescribe('IoObject', () => {\n  it('has default values', () => {\n    expect(element.label).toBe('')\n    expect(element.labeled).toBe(true)\n    expect(element.expanded).toBe(false)\n    expect(JSON.stringify(element.value)).toBe(undefined)\n    // expect(JSON.stringify(element.properties)).toBe(JSON.stringify([]))\n    // expect(JSON.stringify(element.config)).toBe(JSON.stringify({}))\n  })\n  it('matches values', async () => {\n    element.value = testValue\n    expect(element.children[0].localName).toBe('io-boolean')\n    expect(element.children[1]).toBe(undefined)\n    element.expanded = true\n    await nextQueue()\n    const properties = element.children[1]\n    expect(properties.localName).toBe('io-property-editor')\n    expect(properties.children[0].textContent).toBe('number0.5')\n    const rows = properties.children\n    expect(rows[0].localName).toBe('div')\n    expect(rows[0].children[0].localName).toBe('span')\n    expect(rows[0].children[0].textContent).toBe('number')\n    expect(rows[0].children[1].localName).toBe('io-number')\n    expect(rows[0].children[1].textContent).toBe('0.5')\n\n    expect(rows[1].localName).toBe('div')\n    expect(rows[1].children[0].localName).toBe('span')\n    expect(rows[1].children[0].textContent).toBe('string')\n    expect(rows[1].children[1].localName).toBe('io-string')\n    expect(rows[1].children[1].textContent).toBe('hello')\n\n    expect(rows[2].localName).toBe('div')\n    expect(rows[2].children[0].localName).toBe('span')\n    expect(rows[2].children[0].textContent).toBe('boolean')\n    expect(rows[2].children[1].localName).toBe('io-switch')\n    expect(rows[2].children[1].textContent).toBe('')\n\n    expect(rows[3].localName).toBe('div')\n    expect(rows[3].children[0].localName).toBe('span')\n    expect(rows[3].children[0].textContent).toBe('null')\n    expect(rows[3].children[1].localName).toBe('io-field')\n    expect(rows[3].children[1].textContent).toBe('null')\n\n    expect(rows[4].localName).toBe('div')\n    expect(rows[4].children[0].localName).toBe('io-object')\n    expect(rows[4].children[0].textContent).toBe('object: Object')\n    expect(rows[4].children[1]).toBe(undefined)\n\n    expect(rows[5].localName).toBe('div')\n    expect(rows[5].children[0].localName).toBe('io-object')\n    expect(rows[5].children[0].textContent).toBe('array: Array')\n    expect(rows[5].children[1]).toBe(undefined)\n    reset()\n  })\n  it('matches value with labels disabled', async () => {\n    element.value = testValue\n    element.labeled = false\n    element.expanded = true\n    await nextQueue()\n    const properties = element.children[1]\n    expect(properties.children[0].children[0].localName).toBe('io-number')\n    expect(properties.children[1].children[0].localName).toBe('io-string')\n    expect(properties.children[2].children[0].localName).toBe('io-switch')\n    expect(properties.children[3].children[0].localName).toBe('io-field')\n    expect(properties.children[4].children[0].localName).toBe('io-object')\n    expect(properties.children[5].children[0].localName).toBe('io-object')\n    reset()\n  })\n  it('matches value with labels disabled (label)', () => {\n    element.value = testValue\n    expect(element.children[0].textContent).toBe('Object')\n    element.label = 'test'\n    expect(element.children[0].textContent).toBe('test')\n    reset()\n    expect(element.children[0].textContent).toBe('Object')\n  })\n  it('matches value with custom properties', async () => {\n    element.value = testValue\n    element.properties = ['number', 'boolean']\n    element.expanded = true\n    await nextQueue()\n    const properties = element.children[1]\n    expect(properties.children[0].textContent).toBe('number0.5')\n    expect(properties.children[1].textContent).toBe('boolean')\n    expect(properties.children[2]).toBe(undefined)\n    reset()\n  })\n  it('matches value with custom config', async () => {\n    element.value = testValue\n    element.config = [\n      ['number', ioSlider({step: 1})],\n      ['boolean', ioString()],\n    ]\n    element.expanded = true\n    await nextQueue()\n    const properties = element.children[1]\n    expect(properties.children[0].children[1].localName).toBe('io-slider')\n    expect(properties.children[1].children[1].localName).toBe('io-string')\n    reset()\n  })\n})\n"]}