{"version":3,"file":"index.js","sources":["../src/utils/EditorGroups.ts","../src/utils/EditorWidgets.ts","../src/elements/IoPropertyEditor.ts","../src/elements/IoObject.ts","../src/utils/EditorConfig.ts","../src/elements/IoPropertyLink.ts","../src/elements/IoBreadcrumbs.ts","../src/elements/IoContextEditorSingleton.ts","../src/elements/IoInspector.ts"],"sourcesContent":["import { AnyConstructor, ReactiveNode, IoElement } from '@io-gui/core'\n\nexport const SKIPPED_PROPERTIES = [\n  '$',\n  'ELEMENT_NODE','ATTRIBUTE_NODE','TEXT_NODE','CDATA_SECTION_NODE','ENTITY_REFERENCE_NODE','ENTITY_NODE',\n  'PROCESSING_INSTRUCTION_NODE','COMMENT_NODE','DOCUMENT_NODE','DOCUMENT_TYPE_NODE','DOCUMENT_FRAGMENT_NODE',\n  'NOTATION_NODE','DOCUMENT_POSITION_DISCONNECTED','DOCUMENT_POSITION_PRECEDING','DOCUMENT_POSITION_FOLLOWING',\n  'DOCUMENT_POSITION_CONTAINS','DOCUMENT_POSITION_CONTAINED_BY','DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC',  // Event Handlers\n  'onbeforecopy','onbeforecut','onbeforepaste','onsearch','onfullscreenchange',\n  'onfullscreenerror','onwebkitfullscreenchange','onwebkitfullscreenerror','namespaceURI',\n  'onbeforexrselect','onabort','onbeforeinput','onbeforematch','onbeforetoggle','onblur','oncancel','oncanplay',\n  'oncanplaythrough','onchange','onclick','onclose','oncontentvisibilityautostatechange','oncontextlost','oncontextmenu',\n  'oncontextrestored','oncuechange','ondblclick','ondrag','ondragend','ondragenter','ondragleave','ondragover','ondragstart',\n  'ondrop','ondurationchange','onemptied','onended','onerror','onfocus','onformdata','oninput','oninvalid','onkeydown',\n  'onkeypress','onkeyup','onload','onloadeddata','onloadedmetadata','onloadstart','onmousedown','onmouseenter','onmouseleave',\n  'onmousemove','onmouseout','onmouseover','onmouseup','onmousewheel','onpause','onplay','onplaying','onprogress',\n  'onratechange','onreset','onresize','onscroll','onsecuritypolicyviolation','onseeked','onseeking','onselect','onslotchange',\n  'onstalled','onsubmit','onsuspend','ontimeupdate','ontoggle','onvolumechange','onwaiting','onwebkitanimationend',\n  'onwebkitanimationiteration','onwebkitanimationstart','onwebkittransitionend','onwheel','onauxclick','ongotpointercapture',\n  'onlostpointercapture','onpointerdown','onpointermove','onpointerrawupdate','onpointerup','onpointercancel','onpointerover',\n  'onpointerout','onpointerenter','onpointerleave','onselectstart','onselectionchange','onanimationend','onanimationiteration',\n  'onanimationstart','ontransitionrun','ontransitionstart','ontransitionend','ontransitioncancel','oncopy','oncut','onpaste',\n  'oncommand','onscrollend','onscrollsnapchange','onscrollsnapchangin','onscrollsnapchanging','onafterprint','onbeforeprint',\n  'onbeforeunload','onhashchange','onlanguagechange','onmessage','onmessageerror','onoffline','ononline','onpagehide','onpageshow',\n  'onpopstate','onrejectionhandled','onstorage','onunhandledrejection','onunload','onenterpictureinpicture','onreadystatechange',\n  'onpointerlockchange','onpointerlockerror','onfreeze','onprerenderingchange','onresume','onvisibilitychange',\n  'onleavepictureinpicture',\n]\n\nexport function getAllPropertyNames(obj: object): string[] {\n  const allProps: string[] = []\n  let curr = obj\n  do {\n    const props = Object.getOwnPropertyNames(curr)\n    props.forEach((prop) => {\n      if (allProps.indexOf(prop) === -1 && !SKIPPED_PROPERTIES.includes(prop)) {\n        allProps.push(prop)\n      }\n    })\n    if (curr.constructor === window.Node) break\n    //@ts-ignore no-cond-assign\n  } while ((curr = Object.getPrototypeOf(curr)))\n  return allProps\n}\n\ntype PropertyIdentifier = string | RegExp\nexport type PropertyGroups = Record<string, Array<PropertyIdentifier>>\nexport type PropertyGroupsRecord = Record<string, Array<string>>\nexport type EditorGroups = Map<AnyConstructor, PropertyGroups>\n\nconst editorGroupsSingleton: EditorGroups = new Map<AnyConstructor, PropertyGroups>([\n  [Object, {\n    Hidden: [\n      'constructor','hasOwnProperty','isPrototypeOf','propertyIsEnumerable','toString','valueOf','toLocaleString',\n      new RegExp(/^__/),\n    ],\n    Advanced: [new RegExp(/^_(?!_)/)],\n  }],\n  [Array, {\n    Hidden: [\n      'length', 'constructor', 'at', 'concat', 'copyWithin', 'fill', 'find', 'findIndex', 'findLast', 'findLastIndex', 'lastIndexOf', 'pop', 'push', 'reverse', 'shift', 'unshift', 'slice', 'sort', 'splice', 'includes', 'indexOf', 'join', 'keys', 'entries', 'values', 'forEach', 'filter', 'flat', 'flatMap', 'map', 'every', 'some', 'reduce', 'reduceRight', 'toReversed', 'toSorted', 'toSpliced', 'with', 'toLocaleString', 'toString',\n    ],\n  }],\n  [Node, {\n    Main: [\n      'textContent',\n    ],\n    Input: [\n      'lang','translate','dir','inert','accessKey','draggable','writingSuggestions','spellcheck','autocapitalize','editContext',\n      'contentEditable','enterKeyHint','inputMode','virtualKeyboardPolicy',\n    ],\n    Hierarchy: [\n      'isConnected','ownerDocument','parentNode','parentElement','childNodes','firstChild','lastChild','previousSibling',\n      'nextSibling',\n      'children','firstElementChild','lastElementChild','childElementCount','previousElementSibling',\n      'nextElementSibling','elementTiming',\n    ],\n    Layout: [\n      'scrollTop','scrollLeft','scrollWidth','scrollHeight','clientTop','clientLeft','clientWidth','clientHeight','currentCSSZoom',\n      'offsetParent','offsetTop','offsetLeft','offsetWidth','offsetHeight'\n    ],\n    Aria: [\n      'role','ariaAtomic','ariaAutoComplete','ariaBusy','ariaBrailleLabel','ariaBrailleRoleDescription','ariaChecked','ariaColCount',\n      'ariaColIndex','ariaColSpan','ariaCurrent','ariaDescription','ariaDisabled','ariaExpanded','ariaHasPopup','ariaHidden',\n      'ariaInvalid','ariaKeyShortcuts','ariaLabel','ariaLevel','ariaLive','ariaModal','ariaMultiLine','ariaMultiSelectable',\n      'ariaOrientation','ariaPlaceholder','ariaPosInSet','ariaPressed','ariaReadOnly','ariaRelevant','ariaRequired',\n      'ariaRoleDescription','ariaRowCount','ariaRowIndex','ariaRowSpan','ariaSelected','ariaSetSize','ariaSort','ariaValueMax',\n      'ariaValueMin','ariaValueNow','ariaValueText','ariaColIndexText','ariaRowIndexText','ariaActiveDescendantElement',\n      'ariaControlsElements','ariaDescribedByElements','ariaDetailsElements','ariaErrorMessageElements','ariaFlowToElements',\n      'ariaLabelledByElements',\n    ],\n    Hidden: [],\n  }],\n  [ReactiveNode, {\n    Hidden: [\n      'reactivity',\n      '_changeQueue', '_reactiveProperties', '_bindings', '_eventDispatcher', '_parents',\n      '_protochain', '_disposed', '_isNode', '_isIoElement',\n    ],\n  }],\n  [IoElement, {\n    Hidden: [\n      'reactivity',\n      '_changeQueue', '_reactiveProperties', '_bindings', '_eventDispatcher', '_parents',\n      '_protochain', '_disposed', '_isNode', '_isIoElement',\n    ],\n  }],\n])\n\nexport function getEditorGroups(object: object, propertyGroups: PropertyGroups): PropertyGroupsRecord {\n  debug: if (!object || !(object instanceof Object)) {\n    console.warn('`getEditorGroups` should be used with an Object instance')\n    return {}\n  }\n\n  const aggregatedGroups: PropertyGroups = {\n    Main: [],\n  }\n\n  function aggregateGroups(editorGroups: EditorGroups) {\n    for (const [constructorKey, groups] of editorGroups) {\n      if (object instanceof constructorKey) {\n\n        // Reorder keys to match the order in the latest config.\n        const configKeys = Object.keys(groups)\n        const existingKeys = Object.keys(aggregatedGroups)\n\n        // TODO: Test thoroughly.\n        if (configKeys.length > 0 && existingKeys.length > 0) {\n          const reorderedGroups: PropertyGroups = {}\n\n          for (const key of configKeys) {\n            reorderedGroups[key] = aggregatedGroups[key] || []\n          }\n\n          for (const key of existingKeys) {\n            if (!(key in reorderedGroups)) {\n              reorderedGroups[key] = aggregatedGroups[key]\n            }\n          }\n\n          for (const key of existingKeys) {\n            if (configKeys.includes(key)) {\n              delete aggregatedGroups[key]\n            }\n          }\n          Object.assign(aggregatedGroups, reorderedGroups)\n        }\n\n        for (const g in groups) {\n          aggregatedGroups[g] = aggregatedGroups[g] || []\n          for (const identifier of groups[g]) {\n            if (!(identifier instanceof RegExp)) {\n              for (const ag in aggregatedGroups) {\n                const idx = aggregatedGroups[ag].indexOf(identifier)\n                if (idx !== -1) {\n                  aggregatedGroups[ag].splice(idx, 1)\n                }\n              }\n            }\n          }\n          aggregatedGroups[g].push(...groups[g])\n        }\n\n        const advanced = aggregatedGroups['Advanced'] || []\n        delete aggregatedGroups['Advanced']\n        aggregatedGroups['Advanced'] = advanced\n      }\n    }\n  }\n\n  aggregateGroups(editorGroupsSingleton)\n  aggregateGroups(new Map([[Object, propertyGroups]]))\n\n  const allGroupedNonRegexPropertyNames: string[] = []\n  for (const g of Object.keys(aggregatedGroups)) {\n    for (const identifier of aggregatedGroups[g]) {\n      if (!(identifier instanceof RegExp)) {\n        allGroupedNonRegexPropertyNames.push(identifier)\n      }\n    }\n  }\n\n  const groupsRecord: PropertyGroupsRecord = {\n    Main: [],\n  }\n\n  const allPropertyNames = getAllPropertyNames(object)\n  const includedProperties = new Set<string>()\n\n  // First pass: add explicit (non-regex) identifiers in the order they are defined in groups\n  for (const g of Object.keys(aggregatedGroups)) {\n    groupsRecord[g] = groupsRecord[g] || []\n    for (const identifier of aggregatedGroups[g]) {\n      if (!(identifier instanceof RegExp) && allPropertyNames.includes(identifier)) {\n        groupsRecord[g].push(identifier)\n        includedProperties.add(identifier)\n      }\n    }\n  }\n\n  // Second pass: match regex patterns against remaining properties\n  for (const key of allPropertyNames) {\n    if (includedProperties.has(key)) continue\n\n    const isFunction = typeof object[key as keyof typeof object] === 'function'\n    let included = false\n\n    for (const g of Object.keys(aggregatedGroups)) {\n      for (const identifier of aggregatedGroups[g]) {\n        if (identifier instanceof RegExp && !allGroupedNonRegexPropertyNames.includes(key) && identifier.test(key) && !isFunction) {\n          groupsRecord[g].push(key)\n          includedProperties.add(key)\n          included = true\n          break\n        }\n      }\n      if (included) break\n    }\n\n    // Functions are not included in groups unless they are explicitly added to a non-Advanced group.\n    if (!included && !isFunction && !groupsRecord['Advanced']?.includes(key)) {\n      groupsRecord.Main.push(key)\n    }\n  }\n\n  for (const g of Object.keys(groupsRecord)) {\n    groupsRecord[g] = [...new Set(groupsRecord[g])]\n  }\n\n  // Debug if properties belong to multiple groups.\n  // TODO: Test thoroughly.\n  debug: {\n    for (const g of Object.keys(groupsRecord)) {\n      for (const g2 of Object.keys(groupsRecord)) {\n        if (g !== g2) {\n          for (const key of groupsRecord[g]) {\n            if (groupsRecord[g2].includes(key)) {\n              console.warn(`Property \"${key}\" belongs to multiple groups: \"${g}\" and \"${g2}\". Removing from \"${g}\".`)\n            }\n          }\n        }\n      }\n    }\n  }\n\n  return groupsRecord\n}\n\nexport function registerEditorGroups(constructor: AnyConstructor, groups: PropertyGroups) {\n  const existingGroups = editorGroupsSingleton.get(constructor) || {}\n  for (const group in groups) {\n    existingGroups[group] = existingGroups[group] || []\n    existingGroups[group].push(...groups[group])\n  }\n  editorGroupsSingleton.set(constructor, existingGroups)\n}\n","import { AnyConstructor, VDOMElement } from '@io-gui/core'\n\nexport type EditorWidgets = Map<AnyConstructor, VDOMElement>\n\nconst editorWidgetsSingleton: EditorWidgets = new Map<AnyConstructor, VDOMElement>([\n  // TODO: remove outerHTML debug view\n  // [HTMLElement, {tag: 'io-property-editor', props: {properties: ['outerHTML'], config: [['outerHTML', div()]]]\n  // ]), labeled: false}}],\n])\n\nexport function getEditorWidget(object: object): VDOMElement | null {\n  debug: if (!object || !(object instanceof Object)) {\n    console.warn('`getEditorGroups` should be used with an Object instance')\n    return null\n  }\n\n  function getWidget(editorWidgets: EditorWidgets) {\n    let matchedWidget = null\n    for (const [constructorKey, widgetCandidate] of editorWidgets) {\n      if (object instanceof constructorKey) {\n        matchedWidget = widgetCandidate\n      }\n    }\n    return matchedWidget\n  }\n\n  return getWidget(editorWidgetsSingleton)\n}\n\nexport function registerEditorWidget(constructor: AnyConstructor, widget: VDOMElement) {\n  editorWidgetsSingleton.set(constructor, widget)\n}\n","import { IoElement, ReactiveProperty, Register, IoElementProps, ReactiveNode, span, div, HTML_ELEMENTS, VDOMElement } from '@io-gui/core'\nimport { IoField } from '@io-gui/inputs'\nimport { PropertyConfig, PropertyConfigRecord, getEditorConfig } from '../utils/EditorConfig.js'\nimport { PropertyGroups, getEditorGroups, PropertyGroupsRecord, getAllPropertyNames } from '../utils/EditorGroups.js'\nimport { getEditorWidget } from '../utils/EditorWidgets.js'\nimport { ioObject } from './IoObject.js'\n\nexport type IoPropertyEditorProps = IoElementProps & {\n  value?: Record<string, any> | any[]\n  properties?: string[] | null\n  label?: string\n  labeled?: boolean\n  labelWidth?: string\n  config?: PropertyConfig[]\n  groups?: PropertyGroups\n  widget?: VDOMElement\n}\n\n/**\n * Object editor. It displays a set of labeled property editors for the `value` object. Labels can be omitted by setting `labeled` property to false.\n **/\n@Register\nexport class IoPropertyEditor extends IoElement {\n  static get Style() {\n    return /* css */`\n    :host {\n      display: flex;\n      flex-direction: column;\n      color: var(--io_colorInput);\n      background-color: var(--io_bgColor);\n      border-radius: calc(var(--io_borderRadius) + var(--io_spacing));\n      font-size: var(--io_fontSize);\n      overflow: hidden;\n    }\n    :host > .row {\n      display: flex;\n      flex-direction: row;\n      flex: 1 1 auto;\n      margin: var(--io_spacing);\n      padding: var(--io_spacing) 0;\n      border-radius: var(--io_borderRadius);\n      margin-bottom: 0;\n      background-color: var(--io_bgColorLight);\n    }\n    :host io-property-editor {\n      margin-top: calc(var(--io_spacing) * -1) !important;\n    }\n    :host io-property-editor > .row {\n      /* margin: 0 !important; */\n      padding: 0 !important;\n    }\n    :host > .row:last-of-type {\n      margin-bottom: var(--io_spacing);\n    }\n    :host > .row > span {\n      flex: 0 0 auto;\n      padding: var(--io_borderWidth); /* TODO: verify correctness */\n      margin: var(--io_spacing);\n      margin-left: var(--io_spacing2);\n      line-height: var(--io_lineHeight);\n      height: var(--io_lineHeight);\n      text-wrap: nowrap;\n      overflow: hidden;\n      text-overflow: ellipsis;\n    }\n    :host > .row > span:after {\n      display: inline-block;\n      margin-left: var(--io_spacing);\n      opacity: 0.5;\n      content: ':';\n    }\n\n    :host > .row > :not(span) {\n      flex-grow: 1;\n    }\n    :host io-object {\n      margin-right: var(--io_spacing);\n    }\n    `\n  }\n\n  // @ReactiveProperty('debounced')\n  // declare reactivity: ReactivityType\n\n  @ReactiveProperty()\n  declare value: object | Array<unknown>\n\n  @ReactiveProperty({type: Array, init: null})\n  declare properties: string[]\n\n  @ReactiveProperty({type: String, value: ''})\n  declare label: string\n\n  @ReactiveProperty(true)\n  declare labeled: boolean\n\n  @ReactiveProperty('80px')\n  declare labelWidth: string\n\n  @ReactiveProperty({type: Array, init: null})\n  declare config: PropertyConfig[]\n\n  @ReactiveProperty({type: Object, init: null})\n  declare groups: PropertyGroups\n\n  @ReactiveProperty({type: Object})\n  declare widget: VDOMElement | undefined\n\n  private _config: PropertyConfigRecord | null = null\n  private _groups: PropertyGroupsRecord | null = null\n  private _widget: VDOMElement | null = null\n\n  private _propertyEditors: Record<string, IoField> = {}\n\n  _onValueInput(event: CustomEvent) {\n    event.stopImmediatePropagation()\n    const id = (event.target as HTMLElement).id\n    if (id !== undefined) {\n      (this.value as Record<string, any>)[id] = event.detail.value\n      if (!(this.value as unknown as ReactiveNode)._isNode) {\n        this.dispatchMutation(this.value)\n      }\n    } else {\n      debug: console.warn('IoPropertyEditor: \"value-input\" recieved from an input without a property id')\n    }\n  }\n\n  configChanged() {\n    this.debounce(this.configureDebounced)\n  }\n  groupsChanged() {\n    this.debounce(this.configureDebounced)\n  }\n  widgetChanged() {\n    this.debounce(this.configureDebounced)\n  }\n  valueChanged() {\n    debug: {\n      if ((this.value !== null && typeof this.value !== 'object') && !Array.isArray(this.value)) {\n        console.warn('IoPropertyEditor: value is not an object or array', this, this.value)\n      }\n    }\n    this.debounce(this.configureDebounced)\n  }\n  configureDebounced() {\n    this._propertyEditors = {}\n    if (!this.value || typeof this.value !== 'object') {\n      this._config = null\n      this._groups = null\n      this._widget = null\n      this.render([])\n      return\n    } else {\n      this._config = getEditorConfig(this.value, this.config)\n      this._groups = getEditorGroups(this.value, this.groups)\n      this._widget = this.widget !== undefined ? this.widget : getEditorWidget(this.value)\n\n      const config = this._config\n      const groups = this._groups\n      const widget = this._widget\n\n      if (!config || !groups) return\n\n      const properties = []\n      const vChildren = []\n\n      if (widget) {\n        const widgetWithValue = {\n          tag: widget.tag,\n          // widget: null prevents recursive widget lookup in nested io-property-editors\n          props: Object.assign({value: this.value, widget: null}, widget.props),\n          children: widget.children\n        }\n        vChildren.push(widgetWithValue)\n      }\n      if (this.properties.length) {\n        properties.push(...this.properties)\n      } else {\n        properties.push(...groups.Main)\n      }\n\n      const allProps = getAllPropertyNames(this.value)\n\n      for (let i = 0; i < properties.length; i++) {\n        if (allProps.includes(properties[i])) {\n          const id = properties[i] as keyof typeof this.value\n          const value = this.value[id]\n          const tag = config[id]!.tag\n          const props = config[id]!.props as (IoElementProps | undefined) || {}\n\n          const finalProps: any = {id: id, value: value, '@value-input': this._onValueInput}\n\n          Object.assign(finalProps, props)\n\n          let children: string | undefined = undefined\n          if (HTML_ELEMENTS.includes(tag) && typeof value === 'string') {\n            children = value\n          }\n\n          if (tag === 'io-object' || tag === 'io-property-editor') {\n            finalProps.config = finalProps.config || this.config\n            finalProps.groups = finalProps.groups || this.groups\n          }\n          if (tag === 'io-object') {\n            finalProps.persistentExpand = true\n          }\n          // NOTE: Functions dont have labels. They are displayed as labeled buttons.\n          const isFunction = typeof value === 'function'\n          if (isFunction) {\n            finalProps.action = (value as any).bind(this.value)\n            finalProps.label = finalProps.label || id\n          }\n\n          const isIoObject = tag === 'io-object'\n          if (isIoObject) {\n            finalProps.label = id + ': ' + (finalProps.label || (value as object)?.constructor?.name || String(value))\n          }\n\n          // TODO: Document and reconsider this\n          const label = finalProps.label || id\n          const tooltip = label\n          const hideLabel = finalProps.label === '_hidden_'\n\n          if (finalProps.class) {\n            finalProps.class += ' io-property-editor-field'\n          } else {\n            finalProps.class = 'io-property-editor-field'\n          }\n\n          vChildren.push(div({class: 'row'}, [\n            (this.labeled && !hideLabel && !isFunction && !isIoObject) ? span({style: {width: this.labelWidth}, title: tooltip}, label) : null,\n            {tag: tag, props: finalProps, children: children},\n          ]))\n        } else {\n          debug: console.warn(`IoPropertyEditor: property \"${properties[i]}\" not found in value`)\n        }\n      }\n\n      if (!this.properties.length) {\n        for (const group in groups) {\n\n          if (group !== 'Main' && group !== 'Hidden' && groups[group].length) {\n            vChildren.push(\n              ioObject({\n                label: group,\n                labelWidth: this.labelWidth,\n                persistentExpand: true,\n                value: this.value,\n                properties: groups[group],\n                config: this.config,\n              }),\n            )\n          }\n        }\n      }\n\n      this.render(vChildren)\n\n      for ( const child of Object.values(this.$) ) {\n        if (child.classList.contains('io-property-editor-field')) {\n          this._propertyEditors[child.id] = child as IoField\n        }\n      }\n    }\n  }\n  valueMutated() {\n    this.throttle(this.changedThrottled)\n  }\n  changed() {\n    this.throttle(this.changedThrottled)\n  }\n  changedThrottled() {\n    if (!this.value || typeof this.value !== 'object') return\n    for (const id in this._propertyEditors) {\n      if (!(id in this.value)) continue\n      const value = this.value[id as keyof typeof this.value]\n      const editor = this._propertyEditors[id]\n      editor.value = value\n    }\n  }\n  dispose() {\n    super.dispose()\n    this._propertyEditors = {}\n  }\n}\nexport const ioPropertyEditor = function(arg0?: IoPropertyEditorProps) {\n  return IoPropertyEditor.vConstructor(arg0)\n}","import { Register, IoElement, ReactiveProperty, IoElementProps, WithBinding, VDOMElement, Property, Storage as $ } from '@io-gui/core'\nimport { ioBoolean } from '@io-gui/inputs'\nimport { ioPropertyEditor } from './IoPropertyEditor.js'\nimport { PropertyConfig } from '../utils/EditorConfig.js'\nimport { PropertyGroups } from '../utils/EditorGroups.js'\n\nexport type IoObjectProps = IoElementProps & {\n  value?: Record<string, any> | any[]\n  properties?: string[]\n  labeled?: boolean\n  label?: string\n  labelWidth?: string\n  expanded?: WithBinding<boolean>\n  persistentExpand?: boolean\n  config?: PropertyConfig[]\n  groups?: PropertyGroups\n  widget?: VDOMElement\n}\n\n/**\n * Object property editor. It displays a set of labeled property editors for the `value` object inside io-collapsible element. It can be configured to use custom property editors and display only specified properties.\n **/\n@Register\nexport class IoObject extends IoElement {\n  static get Style() {\n    return /* css */`\n    :host {\n      display: flex;\n      max-width: 100%;\n      flex-direction: column;\n      color: var(--io_colorInput);\n      background-color: var(--io_bgColor);\n      border-radius: calc(var(--io_borderRadius) + var(--io_spacing));\n    }\n    :host > io-boolean {\n      padding: var(--io_spacing) var(--io_spacing2);\n      align-self: stretch;\n    }\n    :host > io-boolean:before {\n      display: inline-block;\n      width: 0.75em;\n      content: \"‚ñ∏\"\n    }\n    :host > io-boolean[value]:before {\n      content: \"‚ñæ\";\n    }\n    :host > io-property-editor {\n      /* margin: var(--io_spacing); */\n      margin: calc(var(--io_spacing) * 2);\n      margin-top: calc(var(--io_spacing) * 2) !important;\n      margin-left: calc(var(--io_spacing) * 4);\n      border: var(--io_border);\n      border-color: var(--io_borderColorInset);\n    }\n    `\n  }\n\n  @ReactiveProperty()\n  declare value: Record<string, unknown> | Array<unknown>\n\n  @ReactiveProperty({type: Array, init: null})\n  declare properties: string[] | null\n\n  @ReactiveProperty({type: String, value: ''})\n  declare label: string\n\n  @ReactiveProperty(true)\n  declare labeled: boolean\n\n  @ReactiveProperty('80px')\n  declare labelWidth: string\n\n  @ReactiveProperty({value: false, reflect: true})\n  declare expanded: boolean\n\n  @ReactiveProperty({value: false})\n  declare persistentExpand: boolean\n\n  @ReactiveProperty({type: Array, init: null})\n  declare config: PropertyConfig[]\n\n  @ReactiveProperty({type: Object, init: null})\n  declare groups: PropertyGroups\n\n  @ReactiveProperty({type: Object})\n  declare widget: VDOMElement | undefined\n\n  @Property('region')\n  declare role: string\n\n  valueChanged() {\n    if (!this.value) return\n\n    debug: {\n      if (typeof this.value !== 'object' && !Array.isArray(this.value)) {\n        console.warn('IoObject: value is not an object or array', this, this.value)\n      }\n    }\n\n    let uuid = genIdentifier(this.value)\n    let storage: 'local' | 'none' = 'local'\n    if (!uuid) {\n      uuid = getTempIdentifier(this.value)\n      storage = 'none'\n    }\n\n    // TODO: Test\n    const expandedBinding = $({value: false, storage: storage, key: uuid + '-' + this.label})\n    const bindingTargets = expandedBinding.targets\n    const targetIsThis = bindingTargets.has(this)\n\n    if (bindingTargets.size < 1) {\n      if (!targetIsThis) {\n        const targetP = this._reactiveProperties.get('expanded')!\n        if (targetP.binding && targetP.binding !== expandedBinding) {\n          targetP.binding.removeTarget(this, 'expanded')\n        }\n        expandedBinding.addTarget(this, 'expanded')\n      }\n    }\n  }\n\n  changed() {\n    const label = this.label || this.value.constructor.name\n\n    const propCount = Object.keys(this.value).length\n\n    const vChildren: VDOMElement[] = []\n    vChildren.push(ioBoolean({\n      appearance: 'neutral',\n      true: label,\n      false: label,\n      value: this.bind('expanded'),\n      disabled: propCount === 0 ? true : false\n    }))\n    if (this.expanded && propCount > 0) {\n      vChildren.push(ioPropertyEditor({\n        value: this.value,\n        properties: this.properties,\n        config: this.config,\n        groups: this.groups,\n        widget: this.widget,\n        labeled: this.labeled,\n        labelWidth: this.labelWidth,\n      }))\n    }\n    this.render(vChildren)\n    this.setAttribute('aria-expanded', String(this.expanded))\n  }\n}\nexport const ioObject = function(arg0?: IoObjectProps) {\n  return IoObject.vConstructor(arg0)\n}\n\nfunction genIdentifier(object: any) {\n  const id = object.guid || object.uuid || object.id || object.name || object.label\n  if (id) {\n    return 'io-object-collapse-state-' + object.constructor.name + '-' + id\n  }\n}\n\nconst tempIdentifiers = new WeakMap<object, string>()\n\nfunction getTempIdentifier(object: any) {\n  if (!tempIdentifiers.has(object)) {\n    const randomuuid = Math.random().toString(36).substring(2, 15) + Math.random().toString(36).substring(2, 15)\n    tempIdentifiers.set(object, randomuuid)\n  }\n  return tempIdentifiers.get(object)!\n}","import { IoElement, IoGl, Theme, Color, AnyConstructor, VDOMElement, ReactiveNode } from '@io-gui/core'\nimport { ioString, ioNumber, ioSwitch, ioField, ioButton } from '@io-gui/inputs'\nimport { MenuOption, ioOptionSelect } from '@io-gui/menus'\nimport { ioNumberSlider } from '@io-gui/sliders'\nimport { ioColorRgba } from '@io-gui/colors'\nimport { ioObject } from '../elements/IoObject.js'\nimport { getAllPropertyNames } from './EditorGroups.js'\n\ntype PropertyIdentifier = AnyConstructor | string | RegExp | null | undefined\nexport type PropertyConfig = [PropertyIdentifier, VDOMElement]\nexport type PropertyConfigMap = Map<PropertyIdentifier, VDOMElement>\nexport type PropertyConfigRecord = Record<string, VDOMElement>\nexport type EditorConfig = Map<AnyConstructor, PropertyConfig[]>\n\nfunction makeSelect(options: any[]) {\n  for (let i = 0; i < options.length; i++) {\n    if (options[i] === null) {\n      options[i] = {value: null, id: 'Null'}\n    }\n  }\n  const option = new MenuOption({options: options})\n  return ioOptionSelect({option})\n}\n\nclass ConfigCache<K1 extends object, K2 extends object, V> {\n  private map = new WeakMap<K1, WeakMap<K2, V>>()\n\n  set(key1: K1, key2: K2, value: V): this {\n    let inner = this.map.get(key1)\n    if (!inner) {\n      inner = new WeakMap<K2, V>()\n      this.map.set(key1, inner)\n    }\n    inner.set(key2, value)\n    return this\n  }\n\n  get(key1: K1, key2: K2): V | undefined {\n    return this.map.get(key1)?.get(key2)\n  }\n\n  has(key1: K1, key2: K2): boolean {\n    return this.map.get(key1)?.has(key2) ?? false\n  }\n\n  delete(key1: K1, key2: K2): boolean {\n    return this.map.get(key1)?.delete(key2) ?? false\n  }\n}\n\nconst configCache = new ConfigCache<object, object, PropertyConfigRecord>()\n\n// TODO: Make sure multiple editors dont share the same menu options.\n// TODO: Consider using function to return new view each time editor is configured at runtime.\n\nconst editorConfigSingleton: EditorConfig = new Map<AnyConstructor, PropertyConfig[]>([\n  [Object, [\n    [String, ioString()],\n    [Number, ioNumber({step: 0.01})],\n    [Boolean, ioSwitch()],\n    [Object, ioObject()],\n    [null, ioField({disabled: true})],\n    [undefined, ioField({disabled: true})],\n    [Function, ioButton()],\n  ]],\n  [Array, [\n    [Number, ioNumber({step: 0.01})],\n  ]],\n  [window.Node, [\n    ['tabIndex', ioOptionSelect({option: new MenuOption({options: [{value: '', id: 'None'}, '-1', '0', '1', '2', '3']})})],\n    ['innerHTML', ioString({disabled: true, style: {maxWidth: '10em'}})],//TODO\n    ['outerHTML', ioString({disabled: true, style: {maxWidth: '10em'}})],//TODO\n    ['autocapitalize', ioOptionSelect({option: new MenuOption({options: ['off', 'sentences', 'words', 'characters', {value: '', id: 'None'}]})})],\n    ['writingSuggestions', ioOptionSelect({option: new MenuOption({options: ['true', 'false']})})],\n    ['dir', ioOptionSelect({option: new MenuOption({options: ['ltr','rtl','auto',{value:'', id: 'None'}]})})],\n    ['virtualKeyboardPolicy', ioOptionSelect({option: new MenuOption({options: ['manual','auto',{value:'', id: 'None'}]})})],\n    ['enterKeyHint', ioOptionSelect({option: new MenuOption({options: ['enter','done','go','next','previous','search','send',{value:'', id: 'None'}]})})],\n    ['contentEditable', ioOptionSelect({option: new MenuOption({options: ['true','false','plaintext-only','inherit']})})],\n    ['inputMode', ioOptionSelect({option: new MenuOption({options: ['decimal','email','numeric','tel','search','url','text',{value:'', id: 'None'}]})})],\n    ['lang', ioOptionSelect({option: new MenuOption({options: [\n      {value: '', id: 'None'},\n      'ab','aa','af','ak','sq','am','ar','an','hy','as','av','ae','ay','az','bm','ba','eu','be','bn','bh','bi','bs','br','bg','my','ca','ch','ce',\n      'ny','zh','zh-ans','zh-ant','cv','kw','co','cr','hr','cs','da','dv','nl','dz','en','eo','et','ee','fo','fj','fi','fr','ff','gl','gd',\n      'ka','de','el','kl','gn','gu','ht','ha','he','hz','hi','ho','hu','is','io','ig','id in','ia','ie','iu','ik','ga','it','ja','jv','kn',\n      'kr','ks','kk','km','ki','rw','rn','ky','kv','kg','ko','ku','kj','lo','la','lv','li','ln','lt','lu','lg','lb','gv','mk','mg','ms','ml','mt',\n      'mi','mr','mh','mo','mn','na','nv','ng','nd','ne','no','nb','nn','oc','oj','cu','or','om','os','pi','ps','fa','pl','pt','pa','qu','rm',\n      'ro','ru','se','sm','sg','sa','sr','sh','st','tn','sn','ii','sd','si','ss','sk','sl','so','nr','es','su','sw','sv','tl','ty','tg','ta',\n      'tt','te','th','bo','ti','to','ts','tr','tk','tw','ug','uk','ur','uz','ve','vi','vo','wa','cy','wo','fy','xh','yi','ji','yo','za','zu'\n    ]})})],\n    ['role', ioOptionSelect({option: new MenuOption({options: [\n      'alert','alertdialog','application','article','banner','button','cell','checkbox','columnheader','combobox','complementary',\n      'contentinfo','definition','dialog','directory','document','feed','figure','form','grid','gridcell','group','heading','img',\n      'link','list','listbox','listitem','log','main','marquee','math','menu','menubar','menuitem','menuitemcheckbox','menuitemradio',\n      'navigation','none','note','option','presentation','progressbar','radio','radiogroup','region','row','rowgroup','rowheader',\n      'scrollbar','search','searchbox','separator','slider','spinbutton','status','switch','tab','table','tablist','tabpanel','term',\n      'textbox','timer','toolbar','tooltip','tree','treegrid','treeitem',\n    ]})})],\n    ['ariaAtomic', makeSelect(['true','false',null])],\n    ['ariaAutoComplete', ioOptionSelect({option: new MenuOption({options: ['inline','list','both','none']})})],\n    ['ariaBusy', makeSelect(['true','false',null])],\n    ['ariaBrailleLabel', ioString()],\n    ['ariaBrailleRoleDescription', ioString()],\n    ['ariaChecked', makeSelect(['true','false','mixed',null])],\n    ['ariaColCount', makeSelect([...[...Array(32)].map((_, i) => i + 1),null])],\n    ['ariaColIndex', makeSelect([...[...Array(32)].map((_, i) => i + 1),null])],\n    ['ariaColSpan', makeSelect([...[...Array(32)].map((_, i) => i + 1),null])],\n    ['ariaCurrent', makeSelect(['true','false','page','step','location','date','time',null])],\n    ['ariaDescription', ioString()],\n    ['ariaDisabled', makeSelect(['true','false',null])],\n    ['ariaExpanded', makeSelect(['true','false',null])],\n    ['ariaHasPopup', makeSelect(['true','false','menu','listbox','tree','grid','dialog',null])],\n    ['ariaHidden', makeSelect(['true','false',null])],\n    ['ariaInvalid', makeSelect(['true','false','grammar','spelling',null])],\n    ['ariaKeyShortcuts', ioString()],\n    ['ariaLabel', ioString()],\n    ['ariaLevel', makeSelect([...[...Array(32)].map((_, i) => i + 1),null])],\n    ['ariaLive', ioOptionSelect({option: new MenuOption({options: ['assertive','polite','off']})})],\n    ['ariaModal', makeSelect(['true','false',null])],\n    ['ariaMultiLine', makeSelect(['true','false',null])],\n    ['ariaMultiSelectable', makeSelect(['true','false',null])],\n    ['ariaOrientation', ioOptionSelect({option: new MenuOption({options: ['horizontal','vertical','undefined']})})],\n    ['ariaPlaceholder', ioString()],\n    ['ariaPosInSet', makeSelect([...[...Array(32)].map((_, i) => i + 1),null])],\n    ['ariaPressed', makeSelect(['true','false','mixed',null])],\n    ['ariaReadOnly', makeSelect(['true','false',null])],\n    ['ariaRequired', makeSelect(['true','false',null])],\n    ['ariaRelevant', ioOptionSelect({option: new MenuOption({options: ['additions','all','removals','text']})})],\n    ['ariaRoleDescription', ioString()],\n    ['ariaRowCount', makeSelect([...[...Array(32)].map((_, i) => i + 1),null])],\n    ['ariaRowIndex', makeSelect([...[...Array(32)].map((_, i) => i + 1),null])],\n    ['ariaRowSpan', makeSelect([...[...Array(32)].map((_, i) => i + 1),null])],\n    ['ariaSelected', makeSelect(['true','false',null])],\n    ['ariaSetSize', makeSelect([...[...Array(32)].map((_, i) => i + 1),null])],\n    ['ariaSort', ioOptionSelect({option: new MenuOption({options: ['none','ascending','descending','other']})})],\n    ['ariaValueMax', makeSelect([...[...Array(32)].map((_, i) => i + 1),null])],\n    ['ariaValueMin', makeSelect([...[...Array(32)].map((_, i) => i + 1),null])],\n    ['ariaValueNow', makeSelect([...[...Array(32)].map((_, i) => i + 1),null])],\n    ['ariaValueText', ioString()],\n    ['ariaColIndexText', ioString()],\n    ['ariaRowIndexText', ioString()],\n  ]],\n  [Element, [\n  ]],\n  [HTMLElement, [\n  ]],\n  [ReactiveNode, [\n    ['reactivity', ioOptionSelect({option: new MenuOption({options: ['none', 'debounced', 'immediate']})})],\n  ]],\n  [IoElement, [\n    ['reactivity', ioOptionSelect({option: new MenuOption({options: ['none', 'debounced', 'immediate']})})],\n  ]],\n  [IoGl, [\n    ['size', ioObject()],\n    ['color', ioObject()],\n  ]],\n  [Theme, [\n    [Number, ioNumberSlider({step: 1, min: 0, max: 20})],\n    ['themeID', ioOptionSelect({option: new MenuOption({options: ['light','dark']})})],\n    ['spacing2', ioField({disabled: true})],\n    ['spacing3', ioField({disabled: true})],\n    ['spacing5', ioField({disabled: true})],\n    ['spacing8', ioField({disabled: true})],\n    ['fieldHeight', ioField({disabled: true})],\n    [Color, ioColorRgba()],\n  ]]\n])\n\neditorConfigSingleton.forEach((propertyTypes, constructor) => {\n  const descriptors = Object.getOwnPropertyDescriptors(constructor.prototype)\n  for (const [key, descriptor] of Object.entries(descriptors)) {\n    const isWritable = descriptor.writable !== false\n    const hasGetter = descriptor.get !== undefined\n    const hasSetter = descriptor.set !== undefined\n    if ((hasGetter && !hasSetter) || !isWritable) {\n      const hasType = propertyTypes.find(propertyType => propertyType[0] === key)\n      if (hasType) {\n        debug: {\n          console.warn(constructor, `.${key} has getter but no setter or is not writable. Invalidating editor config.`)\n        }\n        (hasType as any).length = 0\n        hasType.push(key, ioField({disabled: true}))\n      } else {\n        propertyTypes.push([key, ioField({disabled: true})])\n      }\n    }\n  }\n})\n\nexport function getEditorConfig(object: object, propertyConfigs: PropertyConfig[]): PropertyConfigRecord {\n  debug: if (!object || !(object instanceof Object)) {\n    console.warn('`getObjectConfig` should be used with an Object instance')\n    return {}\n  }\n\n  const cachedConfig = configCache.get(object, propertyConfigs)\n  if (cachedConfig) {\n    // TODO: Test cached configs!\n    return cachedConfig\n  }\n\n  const aggregatedConfig: PropertyConfigMap = new Map()\n  for (const [constructorKey, propertyTypes] of editorConfigSingleton) {\n    if (object instanceof constructorKey) {\n      for (const [PropertyIdentifier, config] of propertyTypes) {\n        aggregatedConfig.set(PropertyIdentifier, config)\n      }\n    }\n  }\n\n  for (const [PropertyIdentifier, config] of propertyConfigs) {\n    aggregatedConfig.set(PropertyIdentifier, config)\n  }\n\n  const configRecord: PropertyConfigRecord = {}\n\n  for (const key of getAllPropertyNames(object)) {\n    const value = (object as any)[key]\n    for (const [PropertyIdentifier, elementCandidate] of aggregatedConfig) {\n      let element: VDOMElement | undefined\n      if (typeof PropertyIdentifier === 'function' && value instanceof PropertyIdentifier) {\n        element = elementCandidate\n      } else if (typeof PropertyIdentifier === 'function' && value?.constructor === PropertyIdentifier) {\n        element = elementCandidate\n      } else if (typeof PropertyIdentifier === 'string' && key === PropertyIdentifier) {\n        // ignore io-field elements assigned to read-only object properties\n        // TODO: Consider adding a flag to the element to indicate if it should be ignored.\n        if (!(typeof value === 'object' && value !== null && elementCandidate.tag === 'io-field')) {\n          element = elementCandidate\n        }\n      } else if (PropertyIdentifier instanceof RegExp && PropertyIdentifier.test(key)) {\n        element = elementCandidate\n      } else if (PropertyIdentifier === null && value === null) {\n        element = elementCandidate\n      } else if (PropertyIdentifier === undefined && value === undefined) {\n        element = elementCandidate\n      }\n      if (element) {\n        // TODO: Test and document this.\n        element = {...element}\n        if (element.props) {\n          element.props = {...element.props}\n        }\n        configRecord[key] = element\n      }\n    }\n\n    const vElement = configRecord[key]\n\n    debug: {\n      if (vElement.children) {\n        console.warn('EditorConfig: configured element should not have children', vElement)\n      }\n    }\n\n    const props = vElement.props\n    if (props) {\n      for (const [key, value] of Object.entries(props)) {\n        // TODO: Generalize for other objects that should be cloned / unique.\n        if (value instanceof MenuOption) {\n          props[key] = new MenuOption({}).fromJSON(value.toJSON())\n        }\n      }\n    }\n  }\n\n  debug: for (const key of getAllPropertyNames(object)) {\n    if (key === 'textNode') continue\n    const value = (object as any)[key]\n    if (!configRecord[key]) console.warn('No config found for', key, value)\n  }\n\n  configCache.set(object, propertyConfigs, configRecord)\n\n  return configRecord\n}\n\nexport function registerEditorConfig(constructor: AnyConstructor, propertyTypes: PropertyConfig[]) {\n  const existingConfigs = editorConfigSingleton.get(constructor) || []\n  for (const [PropertyIdentifier, elementCandidate] of propertyTypes) {\n    const existingConfig = existingConfigs.find(config => config[0] === PropertyIdentifier)\n    if (existingConfig) {\n      existingConfig[1] = elementCandidate\n    } else {\n      existingConfigs.push([PropertyIdentifier, elementCandidate])\n    }\n  }\n  editorConfigSingleton.set(constructor, existingConfigs)\n}\n","import { ReactiveProperty, Register, span } from '@io-gui/core'\nimport { IoButton, IoButtonProps } from '@io-gui/inputs'\n\nexport type IoPropertyLinkProps = IoButtonProps & {\n  value?: object\n  showName?: boolean\n}\n\n@Register\nexport class IoPropertyLink extends IoButton {\n  static get Style() {\n    return /* css */`\n    :host {\n      display: flex;\n    }\n    :host > span {\n      color: var(--io_colorBlue);\n      flex: 0 1 auto;\n      overflow: hidden;\n      text-overflow: ellipsis;\n    }\n    :host:hover > span {\n      text-decoration: underline;\n    }\n    `\n  }\n\n  @ReactiveProperty()\n  declare value: object\n\n  @ReactiveProperty({value: false, type: Boolean})\n  declare showName: boolean\n\n  @ReactiveProperty({value: 'neutral', type: String, reflect: true})\n  declare appearance: 'inset' | 'outset' | 'neutral'\n\n  valueMutated() {\n    this.changed()\n  }\n\n  changed() {\n    let label = ''\n    if (this.value instanceof Array) {\n      label = `${this.value.constructor.name} (${this.value.length})`\n    } else {\n      label = `${this.value.constructor.name}`\n    }\n    if (this.showName) {\n      const name = (this.value as any).name || (this.value as any).title || (this.value as any).id\n      if (name) {\n        label += ` \"${name}\"`\n      }\n    }\n    this.render([span(label)])\n  }\n}\n\nexport const ioPropertyLink = function(arg0?: IoPropertyLinkProps) {\n  return IoPropertyLink.vConstructor(arg0)\n}","import { Register, IoElement, ReactiveProperty, IoElementProps, WithBinding, div, Property } from '@io-gui/core'\nimport { ioButton, ioString } from '@io-gui/inputs'\nimport { ioPropertyLink } from './IoPropertyLink.js'\n\nexport type IoBreadcrumbsProps = IoElementProps & {\n  value?: object\n  selected?: WithBinding<object>\n  search?: WithBinding<string>\n}\n\n/**\n * Breadcrumbs select element.\n * When breadcrumb item is clicked or activated by space/enter key, it sets the value to corresponding option value.\n * Optionally, it can trim the `options` array to selected option index.\n **/\n@Register\nexport class IoBreadcrumbs extends IoElement {\n  static get Style() {\n    return /* css */`\n    :host {\n      display: flex;\n    }\n    :host > div {\n      display: flex;\n      flex-direction: row;\n      align-items: center;\n      flex: 1 1 auto;\n      border: var(--io_border);\n      border-color: var(--io_borderColorInset);\n      border-radius: var(--io_borderRadius);\n      background-color: var(--io_bgColorInput);\n      overflow: hidden;\n    }\n    :host > io-button {\n      padding-left: var(--io_spacing);\n      padding-right: var(--io_spacing);\n      margin: var(--io_borderWidth);\n      flex: 0 0 auto;\n    }\n    :host:not([search]) > io-button.clear-button {\n      display: none;\n    }\n    :host > div > io-property-link:last-of-type {\n      flex-shrink: 0;\n    }\n    :host > div > io-property-link:last-of-type > span {\n      flex-shrink: 0;\n      text-overflow: clip;\n    }\n    :host > div > io-property-link:not(:first-of-type):before {\n      content: '>';\n      padding-right: calc(var(--io_fontSize) / 2);\n      color: var(--io_colorStrong);\n      opacity: 0.5;\n    }\n    :host > .search-input {\n      flex: 0 0 auto;\n      overflow: hidden;\n      min-width: calc(var(--io_fieldHeight) + var(--io_borderWidth) * 2);\n      height: calc(var(--io_fieldHeight) + var(--io_borderWidth) * 2);\n      margin-left: var(--io_spacing);\n    }\n    :host > .search-input:empty::before {\n      content: 'üîç';\n      font-size: 0.9em;\n    }\n    `\n  }\n  @ReactiveProperty({type: Object, init: null})\n  declare value: object\n\n  @ReactiveProperty({type: Object, init: null})\n  declare selected: object\n\n  @ReactiveProperty({type: String, reflect: true})\n  declare search: string\n\n  @Property(Array)\n  declare _crumbs: Array<object>\n\n  valueChanged() {\n    this._crumbs.length = 0\n    this._crumbs.push(this.value)\n  }\n  selectedChanged() {\n    const index = this._crumbs.indexOf(this.selected)\n    if (index !== -1) {\n      this._crumbs.length = index + 1\n    } else {\n      this._crumbs.push(this.selected)\n    }\n  }\n  onClearSearch() {\n    this.search = ''\n  }\n  changed() {\n    const vChildren = []\n    if (this._crumbs.length > 1) {\n      vChildren.push(ioButton({\n        icon: 'io:arrow_left',\n        class: 'back-button',\n        value: this._crumbs[this._crumbs.length - 2],\n      }))\n    }\n    const crumbs = div()\n    crumbs.children = []\n    for (let i = Math.max(0, this._crumbs.length - 2); i < this._crumbs.length; i++) {\n      crumbs.children.push(ioPropertyLink({\n        value: this._crumbs[i],\n        showName: i === this._crumbs.length - 1,\n      }))\n    }\n    vChildren.push(\n      crumbs,\n      ioButton({icon: 'io:close', class: 'clear-button', action: this.onClearSearch}),\n      ioString({id: 'search', class: 'search-input', value: this.bind('search'), live: true}),\n    )\n    this.render(vChildren)\n  }\n}\nexport const ioBreadcrumbs = function(arg0?: IoBreadcrumbsProps) {\n  return IoBreadcrumbs.vConstructor(arg0)\n}","import { IoOverlaySingleton, NudgeDirection, nudge, ReactiveProperty, Register } from '@io-gui/core'\nimport { IoPropertyEditor, IoPropertyEditorProps } from './IoPropertyEditor.js'\n\ntype IoContextEditorExpandProps = IoPropertyEditorProps & {\n  source: HTMLElement\n  direction: NudgeDirection\n  value: any\n  onClose?: () => void\n}\n\n@Register\nclass IoContextEditor extends IoPropertyEditor {\n  static get Style() {\n    return /* css */`\n      :host {\n        z-index: 2;\n      }\n      :host:not([expanded]) {\n      visibility: hidden;\n    }\n    `\n  }\n\n  @ReactiveProperty({type: Boolean, value: false, reflect: true})\n  declare expanded: boolean\n\n  declare onClose: null | (() => void)\n\n  static get Listeners() {\n    return {\n      'keydown': 'onKeydown',\n      'io-focus-to': 'onIoFocusTo',\n    }\n  }\n  onKeydown(event: KeyboardEvent) {\n    if (event.key === 'Escape' || event.key === 'Enter') {\n      event.preventDefault()\n      this.expanded = false\n    }\n  }\n  onIoFocusTo(event: CustomEvent) {\n    const source = event.detail.source\n    const cmd = event.detail.command\n    const siblings = Array.from(this.querySelectorAll('[tabindex=\"0\"]')) as HTMLElement[]\n    const index = [...siblings].indexOf(source)\n\n    let cmdOverride = ''\n    if ((this as any).horizontal) {\n      if (cmd === 'ArrowRight') cmdOverride = 'next'\n      if (cmd === 'ArrowLeft') cmdOverride = 'prev'\n    } else {\n      if (cmd === 'ArrowDown') cmdOverride = 'next'\n      if (cmd === 'ArrowUp') cmdOverride = 'prev'\n    }\n\n    if (cmdOverride) {\n      if (cmdOverride === 'next') {\n        siblings[(index + 1) % siblings.length].focus()\n      } else if (cmdOverride === 'prev') {\n        siblings[(index - 1 + siblings.length) % siblings.length].focus()\n      } else if (cmdOverride === 'out') {\n        if ((this as any).$parent) (this as any).$parent.focus()\n      }\n      event.stopPropagation()\n    }\n  }\n  expand(props: IoContextEditorExpandProps) {\n    this.setProperties({\n      value: props.value,\n      properties: props.properties || [],\n      labeled: props.labeled || true,\n      labelWidth: props.labelWidth || '80px',\n      config: props.config || [],\n      groups: props.groups || {},\n      widget: props.widget || undefined,\n      expanded: true,\n    })\n    this.onClose = props.onClose || null\n    // TODO: nudge: 'none' should open at cursor position like context menu\n    nudge(this, props.source, props.direction)\n    this.debounce(this.onExpand, undefined, 2)\n  }\n  onExpand() {\n    // TODO: keyboard focus navigation\n    // TODO: Restore in-overlay focus after ioOptionSelect collapse\n    ;(this.querySelector('[tabindex=\"0\"]:not([inert])') as HTMLElement)?.focus()\n  }\n  expandedChanged() {\n    if (!this.expanded) {\n      this.setProperties({\n        value: {},\n        properties: [],\n        labeled: true,\n        config: [],\n        groups: {},\n        widget: undefined,\n      })\n      if (this.onClose) {\n        this.onClose()\n        this.onClose = null\n      }\n    }\n  }\n}\n\nexport const IoContextEditorSingleton = new IoContextEditor()\n\nsetTimeout(() => {\n  IoOverlaySingleton.appendChild(IoContextEditorSingleton as HTMLElement)\n}, 100)\n","import { Register, IoElement, ReactiveProperty, IoElementProps, WithBinding, span, VDOMElement } from '@io-gui/core'\nimport { ioBreadcrumbs } from './IoBreadcrumbs.js'\nimport { ioPropertyEditor } from './IoPropertyEditor.js'\nimport { PropertyConfig } from '../utils/EditorConfig.js'\nimport { getAllPropertyNames, PropertyGroups } from '../utils/EditorGroups.js'\nimport { ioPropertyLink } from './IoPropertyLink.js'\n\nexport type IoInspectorProps = IoElementProps & {\n  value?: Record<string, any> | any[]\n  selected?: WithBinding<Record<string, any> | any[]>\n  search?: WithBinding<string>\n  config?: PropertyConfig[]\n  groups?: PropertyGroups\n  widget?: VDOMElement\n}\n\nfunction isNestedObject(value: object, selected: object): boolean {\n  if (value === selected) return true\n  if (value instanceof Array) {\n    return value.some(v => isNestedObject(v, selected))\n  }\n  if (value instanceof Object) {\n    return Object.keys(value).some(k => isNestedObject(value[k as keyof typeof value], selected))\n  }\n  return false\n}\n\n/**\n * Object property editor. It displays a set of labeled property editors for the `value` object inside multiple `io-collapsible` elements. It can be configured to use custom property editors and display only specified properties. Properties of type `Object` are displayed as clickable links which can also be navigated in the `io-breadcrumbs` element.\n **/\n@Register\nexport class IoInspector extends IoElement {\n  static get Style() {\n    return /* css */`\n    :host {\n      display: flex;\n      flex-direction: column;\n      align-items: stretch;\n      flex: 0 1 calc(var(--io_lineHeight) * 17.5);\n      padding: var(--io_spacing);\n      background-color: var(--io_bgColor);\n      border-radius: calc(var(--io_borderRadius) + var(--io_spacing));\n    }\n    :host > io-breadcrumbs {\n      margin: 0 var(--io_spacing);\n    }\n    :host > span {\n      padding: var(--io_spacing) var(--io_spacing3);\n      color: var(--io_colorStrong);\n    }\n    :host io-property-editor > .row > span {\n      min-width: 6em;\n      text-align: right;\n    }\n    `\n  }\n  @ReactiveProperty({type: Object, init: null})\n  declare value: object | Array<any>\n\n  @ReactiveProperty({type: Object, init: null})\n  declare selected: object | Array<any>\n\n  @ReactiveProperty({type: String})\n  declare search: string\n\n  @ReactiveProperty({type: Array, init: null})\n  declare config: PropertyConfig[]\n\n  @ReactiveProperty({type: Object, init: null})\n  declare groups: PropertyGroups\n\n  @ReactiveProperty({type: Object})\n  declare widget: VDOMElement\n\n  static get Listeners() {\n    return {\n      'io-button-clicked': 'onLinkClicked',\n    }\n  }\n  onLinkClicked(event: CustomEvent) {\n    event.stopPropagation()\n    const value = event.detail.value\n    const item = event.composedPath()[0] as any\n    if (value && typeof value === 'object') {\n      if (item.localName === 'io-property-link' || item.className === 'back-button') {\n        this.setProperty('selected', value)\n      }\n    }\n  }\n  valueChanged() {\n    this.selected = this.value\n  }\n  valueMutated() {\n    // TODO: Improve this check to update selected to new object if it replaced the previously selected.\n    if (!isNestedObject(this.value, this.selected)) {\n      this.selected = this.value\n    }\n    this.changed()\n  }\n  selectedMutated() {\n    this.changed()\n  }\n  selectedChanged() {\n    this.search = ''\n  }\n  changed() {\n    this.debounce(this.changedDebounced)\n  }\n  changedDebounced() {\n    const vChildren = [\n      ioBreadcrumbs({value: this.value, selected: this.bind('selected'), search: this.bind('search')}),\n    ]\n\n    const config = [...this.config]\n\n    config.push([Object, ioPropertyLink({showName: true})])\n\n    const properties = []\n    if (this.search) {\n      for (const key of getAllPropertyNames(this.selected)) {\n        if (key.toLowerCase().includes(this.search.toLowerCase())) {\n          properties.push(key)\n        }\n      }\n    }\n\n    if (this.search && properties.length === 0) {\n      vChildren.push(\n        span(`No results found for \"${this.search}\"`),\n      )\n    } else {\n      vChildren.push(\n        ioPropertyEditor({\n          value: this.selected,\n          config: config,\n          groups: this.groups,\n          widget: this.widget,\n          properties: properties,\n        }),\n      )\n    }\n\n    this.render(vChildren)\n  }\n  dispose() {\n    super.dispose()\n    window.removeEventListener('io-object-mutation', this.onPropertyMutated as unknown as EventListener)\n  }\n}\nexport const ioInspector = function(arg0?: IoInspectorProps) {\n  return IoInspector.vConstructor(arg0)\n}\n\n\n"],"names":["SKIPPED_PROPERTIES","getAllPropertyNames","obj","allProps","curr","Object","getOwnPropertyNames","forEach","prop","indexOf","includes","push","constructor","window","Node","getPrototypeOf","editorGroupsSingleton","Map","Hidden","RegExp","Advanced","Array","Main","Input","Hierarchy","Layout","Aria","ReactiveNode","IoElement","getEditorGroups","object","propertyGroups","console","warn","aggregatedGroups","aggregateGroups","editorGroups","constructorKey","groups","configKeys","keys","existingKeys","length","reorderedGroups","key","assign","g","identifier","ag","idx","splice","advanced","allGroupedNonRegexPropertyNames","groupsRecord","allPropertyNames","includedProperties","Set","add","has","isFunction","included","test","g2","registerEditorGroups","existingGroups","get","group","set","editorWidgetsSingleton","getEditorWidget","getWidget","editorWidgets","matchedWidget","widgetCandidate","registerEditorWidget","widget","IoPropertyEditor","Style","_config","_groups","_widget","_propertyEditors","_onValueInput","event","stopImmediatePropagation","id","target","this","value","detail","_isNode","dispatchMutation","configChanged","debounce","configureDebounced","groupsChanged","widgetChanged","valueChanged","isArray","render","getEditorConfig","config","properties","vChildren","widgetWithValue","tag","props","children","i","finalProps","HTML_ELEMENTS","persistentExpand","action","bind","label","isIoObject","name","String","tooltip","hideLabel","class","div","labeled","span","style","width","labelWidth","title","ioObject","child","values","$","classList","contains","valueMutated","throttle","changedThrottled","changed","dispose","super","__decorateClass","ReactiveProperty","prototype","type","init","Register","ioPropertyEditor","arg0","vConstructor","IoObject","uuid","genIdentifier","guid","storage","getTempIdentifier","tempIdentifiers","randomuuid","Math","random","toString","substring","expandedBinding","bindingTargets","targets","targetIsThis","size","targetP","_reactiveProperties","binding","removeTarget","addTarget","propCount","ioBoolean","appearance","true","false","disabled","expanded","setAttribute","reflect","Property","WeakMap","makeSelect","options","option","MenuOption","ioOptionSelect","configCache","ConfigCache","map","key1","key2","inner","delete","editorConfigSingleton","ioString","Number","ioNumber","step","Boolean","ioSwitch","ioField","Function","ioButton","maxWidth","_","Element","HTMLElement","IoGl","Theme","ioNumberSlider","min","max","Color","ioColorRgba","propertyConfigs","cachedConfig","aggregatedConfig","propertyTypes","PropertyIdentifier","configRecord","elementCandidate","element","vElement","entries","fromJSON","toJSON","registerEditorConfig","existingConfigs","existingConfig","find","descriptors","getOwnPropertyDescriptors","descriptor","isWritable","writable","hasGetter","hasSetter","hasType","propertyType","IoPropertyLink","IoButton","showName","ioPropertyLink","IoBreadcrumbs","_crumbs","selectedChanged","index","selected","onClearSearch","search","icon","crumbs","live","ioBreadcrumbs","IoContextEditor","Listeners","keydown","onKeydown","preventDefault","onIoFocusTo","source","cmd","command","siblings","from","querySelectorAll","cmdOverride","horizontal","focus","$parent","stopPropagation","expand","setProperties","onClose","nudge","direction","onExpand","querySelector","expandedChanged","IoContextEditorSingleton","setTimeout","IoOverlaySingleton","appendChild","isNestedObject","some","v","k","IoInspector","onLinkClicked","item","composedPath","localName","className","setProperty","selectedMutated","changedDebounced","toLowerCase","removeEventListener","onPropertyMutated","ioInspector"],"mappings":"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"}