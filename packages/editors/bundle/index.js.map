{"version":3,"file":"index.js","sources":["../src/elements/IoVectorArray.ts","../src/utils/EditorGroups.ts","../src/utils/EditorWidgets.ts","../src/elements/IoPropertyEditor.ts","../src/elements/IoObject.ts","../src/utils/EditorConfig.ts","../src/elements/IoPropertyLink.ts","../src/elements/IoBreadcrumbs.ts","../src/elements/IoContextEditorSingleton.ts","../src/elements/IoInspector.ts","../src/elements/IoVector.ts","../src/elements/IoMatrix.ts"],"sourcesContent":["import { Register, IoElement, ReactiveProperty, IoElementProps, WithBinding, VDOMElement, Node } from '@io-gui/core'\nimport { ioNumber, ioBoolean } from '@io-gui/inputs'\n\nexport type IoVectorArrayProps = IoElementProps & {\n  value?: number[]\n  conversion?: number\n  step?: number\n  min?: number\n  max?: number\n  linkable?: boolean\n  linked?: WithBinding<boolean>\n  ladder?: boolean\n}\n/**\n * Input element for vector arrays and objects.\n **/\n@Register\nexport class IoVectorArray extends IoElement {\n  static get Style() {\n    return /* css */`\n      :host {\n        display: flex;\n        flex: 1 1 auto;\n      }\n      :host > io-number {\n        flex: 1 1 auto;\n      }\n      :host > *:not(:last-child) {\n        margin-right: var(--io_spacing);\n      }\n      :host > io-boolicon {\n        flex-shrink: 0;\n        padding: var(--io_spacing);\n      }\n    `\n  }\n\n  @ReactiveProperty({type: Array, init: null})\n  declare value: number[]\n\n  @ReactiveProperty(1)\n  declare conversion: number\n\n  @ReactiveProperty(0.001)\n  declare step: number\n\n  @ReactiveProperty(-Infinity)\n  declare min: number\n\n  @ReactiveProperty(Infinity)\n  declare max: number\n\n  @ReactiveProperty(false)\n  declare linkable: boolean\n\n  @ReactiveProperty(false)\n  declare linked: boolean\n\n  @ReactiveProperty(true)\n  declare ladder: boolean\n\n  @ReactiveProperty({type: Array, init: null})\n  declare keys: number[]\n\n  private _ratios: any = {}\n\n  _onNumberPointerDown(event: PointerEvent) {\n    const item = event.composedPath()[0] as HTMLElement\n    const id = item.id as keyof typeof this.value\n    this._ratios = {}\n    if (this.linked && this.value[id] !== 0) {\n      const value = this.value as any\n      for (const k of this.keys as [keyof typeof value]) this._ratios[k] = value[k] / value[id]\n    }\n  }\n\n  _onNumberValueInput(event: CustomEvent) {\n    const item = event.composedPath()[0] as HTMLElement\n    const index = Number(item.id);\n    (this.value as any)[index] = event.detail.value\n    if (this.linked) {\n      for (const k of this.keys) {\n        const value = this.value as any\n        if (k !== index && this._ratios[k]) (value as any)[k] = value[index] * this._ratios[k]\n      }\n    }\n    if (!(this.value as unknown as Node)._isNode) {\n      this.dispatchMutation(this.value)\n    }\n    this.dispatch('value-input', {property: 'value', value: this.value}, false)\n  }\n\n  valueChanged() {\n    this.keys.length = 0\n    this.keys = Array.from(Array(this.value.length).keys())\n    debug: if (this.keys.find(k => [0, 1, 2, 3].indexOf(k) === -1)) {\n      console.warn('IoVectorArray: Unrecognized vector type!')\n    }\n  }\n  valueMutated() {\n    this.debounce(this.changed)\n  }\n  changed() {\n    const vChildren: Array<VDOMElement | null> = []\n    for (const k of this.keys) {\n      if (this.value[k] !== undefined) {\n        vChildren.push(ioNumber({\n          id: String(k), // Consider removing global id collisions\n          value: this.value[k],\n          conversion: this.conversion,\n          step: this.step,\n          min: this.min,\n          max: this.max,\n          ladder: this.ladder,\n          '@pointerdown': this._onNumberPointerDown,\n          '@value-input': this._onNumberValueInput,\n        }))\n      }\n    }\n    vChildren.push(this.linkable ? ioBoolean({value: this.bind('linked') as any, true: 'io:link', false: 'io:unlink'}) : null)\n    this.render(vChildren)\n  }\n}\nexport const ioVectorArray = function(arg0?: IoVectorArrayProps) {\n  return IoVectorArray.vConstructor(arg0)\n}","import { AnyConstructor } from '@io-gui/core'\n\nexport const SKIPPED_PROPERTIES = [\n  '$',\n  'ELEMENT_NODE','ATTRIBUTE_NODE','TEXT_NODE','CDATA_SECTION_NODE','ENTITY_REFERENCE_NODE','ENTITY_NODE',\n  'PROCESSING_INSTRUCTION_NODE','COMMENT_NODE','DOCUMENT_NODE','DOCUMENT_TYPE_NODE','DOCUMENT_FRAGMENT_NODE',\n  'NOTATION_NODE','DOCUMENT_POSITION_DISCONNECTED','DOCUMENT_POSITION_PRECEDING','DOCUMENT_POSITION_FOLLOWING',\n  'DOCUMENT_POSITION_CONTAINS','DOCUMENT_POSITION_CONTAINED_BY','DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC',  // Event Handlers\n  'onbeforecopy','onbeforecut','onbeforepaste','onsearch','onfullscreenchange',\n  'onfullscreenerror','onwebkitfullscreenchange','onwebkitfullscreenerror','namespaceURI',\n  'onbeforexrselect','onabort','onbeforeinput','onbeforematch','onbeforetoggle','onblur','oncancel','oncanplay',\n  'oncanplaythrough','onchange','onclick','onclose','oncontentvisibilityautostatechange','oncontextlost','oncontextmenu',\n  'oncontextrestored','oncuechange','ondblclick','ondrag','ondragend','ondragenter','ondragleave','ondragover','ondragstart',\n  'ondrop','ondurationchange','onemptied','onended','onerror','onfocus','onformdata','oninput','oninvalid','onkeydown',\n  'onkeypress','onkeyup','onload','onloadeddata','onloadedmetadata','onloadstart','onmousedown','onmouseenter','onmouseleave',\n  'onmousemove','onmouseout','onmouseover','onmouseup','onmousewheel','onpause','onplay','onplaying','onprogress',\n  'onratechange','onreset','onresize','onscroll','onsecuritypolicyviolation','onseeked','onseeking','onselect','onslotchange',\n  'onstalled','onsubmit','onsuspend','ontimeupdate','ontoggle','onvolumechange','onwaiting','onwebkitanimationend',\n  'onwebkitanimationiteration','onwebkitanimationstart','onwebkittransitionend','onwheel','onauxclick','ongotpointercapture',\n  'onlostpointercapture','onpointerdown','onpointermove','onpointerrawupdate','onpointerup','onpointercancel','onpointerover',\n  'onpointerout','onpointerenter','onpointerleave','onselectstart','onselectionchange','onanimationend','onanimationiteration',\n  'onanimationstart','ontransitionrun','ontransitionstart','ontransitionend','ontransitioncancel','oncopy','oncut','onpaste',\n  'oncommand','onscrollend','onscrollsnapchange','onscrollsnapchangin','onscrollsnapchanging','onafterprint','onbeforeprint',\n  'onbeforeunload','onhashchange','onlanguagechange','onmessage','onmessageerror','onoffline','ononline','onpagehide','onpageshow',\n  'onpopstate','onrejectionhandled','onstorage','onunhandledrejection','onunload','onenterpictureinpicture','onreadystatechange',\n  'onpointerlockchange','onpointerlockerror','onfreeze','onprerenderingchange','onresume','onvisibilitychange',\n  'onleavepictureinpicture',\n]\n\nexport function getAllPropertyNames(obj: object): string[] {\n  const allProps: string[] = []\n  let curr = obj\n  do {\n    const props = Object.getOwnPropertyNames(curr)\n    props.forEach((prop) => {\n      if (allProps.indexOf(prop) === -1 && typeof (obj as any)[prop] !== 'function' && !SKIPPED_PROPERTIES.includes(prop)) {\n        allProps.push(prop)\n      }\n    })\n    if (curr.constructor === Node) break\n    //@ts-ignore no-cond-assign\n  } while ((curr = Object.getPrototypeOf(curr)))\n  return allProps\n}\n\ntype PropertyIdentifier = string | RegExp\nexport type PropertyGroups = Record<string, Array<PropertyIdentifier>>\nexport type PropertyGroupsRecord = Record<string, Array<string>>\nexport type EditorGroups = Map<AnyConstructor, PropertyGroups>\n\nconst editorGroupsSingleton: EditorGroups = new Map<AnyConstructor, PropertyGroups>([\n  [Object, {\n    Hidden: [new RegExp(/^_/)],\n  }],\n  [Node, {\n    Main: [\n      'textContent',\n    ],\n    Input: [\n      'lang','translate','dir','inert','accessKey','draggable','writingSuggestions','spellcheck','autocapitalize','editContext',\n      'contentEditable','enterKeyHint','inputMode','virtualKeyboardPolicy',\n    ],\n    Hierarchy: [\n      'isConnected','ownerDocument','parentNode','parentElement','childNodes','firstChild','lastChild','previousSibling',\n      'nextSibling',\n      'children','firstElementChild','lastElementChild','childElementCount','previousElementSibling',\n      'nextElementSibling','elementTiming',\n    ],\n    Layout: [\n      'scrollTop','scrollLeft','scrollWidth','scrollHeight','clientTop','clientLeft','clientWidth','clientHeight','currentCSSZoom',\n      'offsetParent','offsetTop','offsetLeft','offsetWidth','offsetHeight'\n    ],\n    Aria: [\n      'role','ariaAtomic','ariaAutoComplete','ariaBusy','ariaBrailleLabel','ariaBrailleRoleDescription','ariaChecked','ariaColCount',\n      'ariaColIndex','ariaColSpan','ariaCurrent','ariaDescription','ariaDisabled','ariaExpanded','ariaHasPopup','ariaHidden',\n      'ariaInvalid','ariaKeyShortcuts','ariaLabel','ariaLevel','ariaLive','ariaModal','ariaMultiLine','ariaMultiSelectable',\n      'ariaOrientation','ariaPlaceholder','ariaPosInSet','ariaPressed','ariaReadOnly','ariaRelevant','ariaRequired',\n      'ariaRoleDescription','ariaRowCount','ariaRowIndex','ariaRowSpan','ariaSelected','ariaSetSize','ariaSort','ariaValueMax',\n      'ariaValueMin','ariaValueNow','ariaValueText','ariaColIndexText','ariaRowIndexText','ariaActiveDescendantElement',\n      'ariaControlsElements','ariaDescribedByElements','ariaDetailsElements','ariaErrorMessageElements','ariaFlowToElements',\n      'ariaLabelledByElements',\n    ],\n\n    Hidden: [],\n  }],\n])\n\nexport function getEditorGroups(object: object, editorGroups: EditorGroups = new Map()): PropertyGroupsRecord {\n  debug: if (!object || !(object instanceof Object)) {\n    console.warn('`getEditorGroups` should be used with an Object instance')\n    return {}\n  }\n\n  const aggregatedGroups: PropertyGroups = {\n    Main: [],\n  }\n\n  function aggregateGroups(editorGroups: EditorGroups) {\n    for (const [constructorKey, groups] of editorGroups) {\n      if (object instanceof constructorKey) {\n        for (const g in groups) {\n          aggregatedGroups[g] = aggregatedGroups[g] || []\n          aggregatedGroups[g].push(...groups[g])\n          // Remove duplicate identifiers that exist in other groups.\n          for (const ag in aggregatedGroups) {\n            if (ag !== g) {\n              for (const identifier of groups[g]) {\n                if (aggregatedGroups[ag].includes(identifier)) {\n                  aggregatedGroups[ag].splice(aggregatedGroups[ag].indexOf(identifier), 1)\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n\n  aggregateGroups(editorGroupsSingleton)\n  aggregateGroups(editorGroups)\n\n  const groupsRecord: PropertyGroupsRecord = {\n    Main: [],\n  }\n\n\n  for (const key of getAllPropertyNames(object)) {\n    let included = false\n    for (const g of Object.keys(aggregatedGroups)) {\n      groupsRecord[g] = groupsRecord[g] || []\n      for (const identifier of aggregatedGroups[g]) {\n        if (identifier === key) {\n          groupsRecord[g].push(key)\n          included = true\n          continue\n        } else if (identifier instanceof RegExp && identifier.test(key)) {\n          groupsRecord[g].push(key)\n          included = true\n        }\n      }\n    }\n    if (!included) {\n      groupsRecord.Main.push(key)\n    }\n  }\n  // TODO: make sure no property belongs to multiple groups.\n  return groupsRecord\n}\n\nexport function registerEditorGroups(constructor: AnyConstructor, groups: PropertyGroups) {\n  const existingGroups = editorGroupsSingleton.get(constructor) || {}\n  for (const group in groups) {\n    existingGroups[group] = existingGroups[group] || []\n    existingGroups[group].push(...groups[group])\n    // Remove duplicate identifiers that exist in other groups.\n    for (const g in existingGroups) {\n      if (g !== group) {\n        for (const identifier of groups[group]) {\n          if (existingGroups[g].includes(identifier)) {\n            existingGroups[g].splice(existingGroups[g].indexOf(identifier), 1)\n          }\n        }\n      }\n    }\n  }\n  editorGroupsSingleton.set(constructor, existingGroups)\n}\n","import { AnyConstructor, VDOMElement } from '@io-gui/core'\n\nexport type EditorWidgets = Map<AnyConstructor, VDOMElement>\n\nconst editorWidgetsSingleton: EditorWidgets = new Map<AnyConstructor, VDOMElement>([\n  // TODO: remove outerHTML debug view\n  // [HTMLElement, {tag: 'io-property-editor', props: {properties: ['outerHTML'], config: new Map([\n  //   [HTMLElement, [['outerHTML', div()]]]\n  // ]), labeled: false}}],\n])\n\nexport function getEditorWidget(object: object, editorWidgets: EditorWidgets = new Map()): VDOMElement | null {\n  debug: if (!object || !(object instanceof Object)) {\n    console.warn('`getEditorGroups` should be used with an Object instance')\n    return null\n  }\n\n  function getWidget(editorWidgets: EditorWidgets) {\n    let matchedWidget = null\n    for (const [constructorKey, widgetCandidate] of editorWidgets) {\n      if (object instanceof constructorKey) {\n        matchedWidget = widgetCandidate\n      }\n    }\n    return matchedWidget\n  }\n\n  let widget = getWidget(editorWidgetsSingleton)\n  widget = getWidget(editorWidgets) || widget\n\n  return widget\n}\n\nexport function registerEditorWidget(constructor: AnyConstructor, widget: VDOMElement) {\n  editorWidgetsSingleton.set(constructor, widget)\n}\n","import { IoElement, ReactiveProperty, Register, IoElementProps, Node, span, div, Storage as $, HTML_ELEMENTS } from '@io-gui/core'\nimport { EditorConfig, getEditorConfig } from '../utils/EditorConfig.js'\nimport { EditorGroups, getEditorGroups, getAllPropertyNames } from '../utils/EditorGroups.js'\nimport { EditorWidgets, getEditorWidget } from '../utils/EditorWidgets.js'\nimport { ioObject } from './IoObject.js'\n\nexport type IoPropertyEditorProps = IoElementProps & {\n  value?: Record<string, any> | any[]\n  properties?: string[] | null\n  labeled?: boolean\n  orientation?: 'vertical' | 'horizontal'\n  config?: EditorConfig\n  groups?: EditorGroups\n  widgets?: EditorWidgets\n}\n\n/**\n * Object editor. It displays a set of labeled property editors for the `value` object. Labels can be omitted by setting `labeled` property to false.\n **/\n@Register\nexport class IoPropertyEditor extends IoElement {\n  static get Style() {\n    return /* css */`\n    :host {\n      display: flex;\n      flex-direction: column;\n      color: var(--io_colorInput);\n      background-color: var(--io_bgColor);\n      border-radius: calc(var(--io_borderRadius) + var(--io_spacing));\n      font-size: var(--io_fontSize);\n    }\n    :host[orientation=\"horizontal\"] {\n      flex-direction: row;\n    }\n    :host > .row {\n      display: flex;\n      flex-direction: row;\n      margin: var(--io_spacing);\n      padding: var(--io_spacing) 0;\n      border-radius: var(--io_borderRadius);\n      margin-bottom: 0;\n      background-color: var(--io_bgColorLight);\n    }\n    :host[orientation=\"horizontal\"] > .row {\n      flex-direction: column;\n    }\n    :host > .row:last-of-type {\n      margin-bottom: var(--io_spacing);\n    }\n    :host > .row > span {\n      padding: var(--io_borderWidth); /* TODO: verify correctness */\n      margin: var(--io_spacing);\n      margin-left: var(--io_spacing2);\n      line-height: var(--io_lineHeight);\n      height: var(--io_lineHeight);\n      text-wrap: nowrap;\n      overflow: hidden;\n      text-overflow: ellipsis;\n    }\n    :host > .row > span:after {\n      display: inline-block;\n      margin-left: var(--io_spacing);\n      opacity: 0.5;\n      content: ':';\n    }\n    :host io-object {\n      margin-right: var(--io_spacing);\n    }\n    `\n  }\n\n  // @ReactiveProperty('debounced')\n  // declare reactivity: ReactivityType\n\n  @ReactiveProperty()\n  declare value: Object | Array<any>\n\n  @ReactiveProperty({type: Array, init: null})\n  declare properties: string[]\n\n  @ReactiveProperty(true)\n  declare labeled: boolean\n\n  @ReactiveProperty({type: String, value: 'vertical', reflect: true})\n  declare orientation: 'vertical' | 'horizontal'\n\n  @ReactiveProperty({type: Map, init: null})\n  declare config: EditorConfig\n\n  @ReactiveProperty({type: Map, init: null})\n  declare groups: EditorGroups\n\n  @ReactiveProperty({type: Map, init: null})\n  declare widgets: EditorWidgets\n\n  init() {\n    this.changeThrottled = this.changeThrottled.bind(this)\n    this._observedObjectProperties.push('value')\n    window.addEventListener('io-object-mutation', this.onPropertyMutated as unknown as EventListener)\n  }\n\n  _onValueInput(event: CustomEvent) {\n    event.stopImmediatePropagation()\n    const id = (event.target as HTMLElement).id as keyof typeof this.value\n    if (id !== undefined) {\n      this.value[id] = event.detail.value\n      if (!(this.value as Node)._isNode) {\n        this.dispatchMutation(this.value)\n      }\n    } else {\n      debug: console.warn('IoPropertyEditor: \"value-input\" recieved from an input without a property id')\n    }\n  }\n  valueMutated() {\n    this.changeThrottled()\n  }\n  changeThrottled() {\n    this.throttle(this.changeThrottled)\n  }\n  changed() {\n    const config = getEditorConfig(this.value, this.config)\n    const groups = getEditorGroups(this.value, this.groups)\n    const widget = getEditorWidget(this.value, this.widgets)\n\n    const properties = []\n    const vChildren = []\n\n    if (this.properties.length) {\n      properties.push(...this.properties)\n    } else {\n      if (widget) {\n        const widgetWithValue = {\n          tag: widget.tag,\n          props: Object.assign({value: this.value}, widget.props),\n          children: widget.children\n        }\n        vChildren.push(widgetWithValue)\n      }\n      properties.push(...groups.Main)\n    }\n\n    const allProps = getAllPropertyNames(this.value)\n\n    for (let i = 0; i < properties.length; i++) {\n      if (allProps.includes(properties[i])) {\n        const id = properties[i] as keyof typeof this.value\n        const value = this.value[id]\n        const tag = config[id]!.tag\n        const props = config[id]!.props as (IoElementProps | undefined) || {}\n        const finalProps: any = {id: id, value: value, '@value-input': this._onValueInput}\n        Object.assign(finalProps, props)\n\n        let children: string | undefined = undefined\n        if (HTML_ELEMENTS.includes(tag) && typeof value === 'string') {\n          children = value\n        }\n\n        if (tag === 'io-object' || tag === 'io-property-editor') {\n          finalProps.config = finalProps.config || this.config\n          finalProps.groups = finalProps.groups || this.groups\n        }\n        vChildren.push(div({class: 'row'}, [\n          this.labeled ? span(id) : null,\n          {tag: tag, props: finalProps, children: children},\n        ]))\n      } else {\n        debug: console.warn(`IoPropertyEditor: property \"${properties[i]}\" not found in value`)\n      }\n    }\n\n    const uuid = genIdentifier(this.value)\n\n    if (!this.properties.length) {\n      for (const group in groups) {\n        if (group !== 'Main' && group !== 'Hidden' && groups[group].length) {\n          vChildren.push(\n            ioObject({\n              label: group,\n              expanded: $({value: false, storage: 'local', key: uuid + '-' + group}),\n              value: this.value,\n              properties: groups[group],\n              config: this.config,\n            }),\n          )\n        }\n      }\n    }\n\n    this.render(vChildren)\n  }\n  dispose() {\n    super.dispose()\n    window.removeEventListener('io-object-mutation', this.onPropertyMutated as unknown as EventListener)\n  }\n}\nexport const ioPropertyEditor = function(arg0?: IoPropertyEditorProps) {\n  return IoPropertyEditor.vConstructor(arg0)\n}\n\n// TODO: consider using WeakMap instead of UUID.\nfunction genIdentifier(object: any) {\n  let UUID = 'io-object-collapse-state-' + object.constructor.name\n  UUID += '-' + (object.guid || object.uuid || object.id || '')\n  const props = JSON.stringify(Object.keys(object))\n  let hash: any = 0\n  for (let i = 0; i < props.length; i++) {\n    hash = ((hash << 5) - hash) + props.charCodeAt(i)\n    hash |= 0\n  }\n  hash = (-hash).toString(16)\n  UUID += '-' + hash\n  return UUID\n}","import { Register, IoElement, ReactiveProperty, IoElementProps, WithBinding, VDOMElement, Property } from '@io-gui/core'\nimport { ioBoolean } from '@io-gui/inputs'\nimport { ioPropertyEditor } from './IoPropertyEditor.js'\nimport { EditorConfig } from '../utils/EditorConfig.js'\nimport { EditorGroups } from '../utils/EditorGroups.js'\nimport { EditorWidgets } from '../utils/EditorWidgets.js'\n\nexport type IoObjectProps = IoElementProps & {\n  value?: Record<string, any> | any[]\n  properties?: string[]\n  labeled?: boolean\n  label?: string\n  expanded?: WithBinding<boolean>\n  config?: EditorConfig\n  groups?: EditorGroups\n  widgets?: EditorWidgets\n}\n\n/**\n * Object property editor. It displays a set of labeled property editors for the `value` object inside io-collapsible element. It can be configured to use custom property editors and display only specified properties.\n **/\n@Register\nexport class IoObject extends IoElement {\n  static get Style() {\n    return /* css */`\n    :host {\n      display: flex;\n      flex-direction: column;\n      color: var(--io_colorInput);\n      background-color: var(--io_bgColor);\n      border-radius: calc(var(--io_borderRadius) + var(--io_spacing));\n    }\n    :host > io-boolean {\n      padding: var(--io_spacing) var(--io_spacing2);\n      align-self: stretch;\n    }\n    :host > io-boolean:before {\n      display: inline-block;\n      width: 0.75em;\n      content: \"‚ñ∏\"\n    }\n    :host > io-boolean[value]:before {\n      content: \"‚ñæ\";\n    }\n    :host > io-property-editor {\n      margin: var(--io_spacing);\n      border: var(--io_border);\n      border-color: var(--io_borderColorInset);\n    }\n    `\n  }\n\n  @ReactiveProperty({type: Object})\n  declare value: Record<string, any> | any[]\n\n  @ReactiveProperty({type: Array, init: null})\n  declare properties: string[] | null\n\n  @ReactiveProperty(true)\n  declare labeled: boolean\n\n  @ReactiveProperty('')\n  declare label: string\n\n  @ReactiveProperty({value: false, reflect: true})\n  declare expanded: boolean\n\n  @ReactiveProperty({type: Map, init: null})\n  declare config: EditorConfig\n\n  @ReactiveProperty({type: Map, init: null})\n  declare groups: EditorGroups\n\n  @ReactiveProperty({type: Map, init: null})\n  declare widgets: EditorWidgets\n\n  @Property('region')\n  declare role: string\n\n  changed() {\n    const label = this.label || this.value.constructor.name\n    const vChildren: VDOMElement[] = []\n    vChildren.push(ioBoolean({\n      appearance: 'neutral',\n      true: label,\n      false: label,\n      value: this.bind('expanded')}\n    ))\n    if (this.expanded) {\n      vChildren.push(ioPropertyEditor({\n        value: this.value,\n        properties: this.properties,\n        config: this.config,\n        groups: this.groups,\n        widgets: this.widgets,\n        labeled: this.labeled,\n      }))\n    }\n    this.render(vChildren)\n    this.setAttribute('aria-expanded', String(this.expanded))\n  }\n}\nexport const ioObject = function(arg0?: IoObjectProps) {\n  return IoObject.vConstructor(arg0)\n}","import { IoElement, IoGl, Theme, Color, AnyConstructor, VDOMElement, Node, } from '@io-gui/core'\nimport { ioString, ioNumber, ioSwitch, ioField } from '@io-gui/inputs'\nimport { MenuOption, ioOptionSelect } from '@io-gui/menus'\nimport { ioNumberSlider } from '@io-gui/sliders'\nimport { ioColorRgba } from '@io-gui/colors'\nimport { ioVectorArray } from '../elements/IoVectorArray.js'\nimport { ioObject } from '../elements/IoObject.js'\nimport { getAllPropertyNames } from './EditorGroups.js'\n\ntype PropertyIdentifier = AnyConstructor | string | RegExp | null | undefined\nexport type PropertyConfig = [PropertyIdentifier, VDOMElement]\nexport type PropertyConfigMap = Map<PropertyIdentifier, VDOMElement>\nexport type PropertyConfigRecord = Record<string, VDOMElement>\nexport type EditorConfig = Map<AnyConstructor, PropertyConfig[]>\n\nfunction makeSelect(options: any[]) {\n  for (let i = 0; i < options.length; i++) {\n    if (options[i] === null) {\n      options[i] = {value: null, id: 'Null'}\n    }\n  }\n  const option = new MenuOption({options: options})\n  return ioOptionSelect({option})\n}\n\n// TODO: Make sure multiple editors dont share the same menu options.\n// TODO: Consider using function to return new view each time editor is configured at runtime.\n\nconst editorConfigSingleton: EditorConfig = new Map<AnyConstructor, PropertyConfig[]>([\n  [Object, [\n    [String, ioString()],\n    [Number, ioNumber({step: 0.01})],\n    [Boolean, ioSwitch()],\n    [Object, ioObject()],\n    [null, ioField({disabled: true})],\n    [undefined, ioField({disabled: true})],\n  ]],\n  [Array, [\n    [Number, ioNumber({step: 0.01})],\n  ]],\n  [window.Node, [\n    ['tabIndex', ioOptionSelect({option: new MenuOption({options: [{value: '', id: 'None'}, '-1', '0', '1', '2', '3']})})],\n    ['innerHTML', ioString({disabled: true, style: {maxWidth: '10em'}})],//TODO\n    ['outerHTML', ioString({disabled: true, style: {maxWidth: '10em'}})],//TODO\n    ['autocapitalize', ioOptionSelect({option: new MenuOption({options: ['off', 'sentences', 'words', 'characters', {value: '', id: 'None'}]})})],\n    ['writingSuggestions', ioOptionSelect({option: new MenuOption({options: ['true', 'false']})})],\n    ['dir', ioOptionSelect({option: new MenuOption({options: ['ltr','rtl','auto',{value:'', id: 'None'}]})})],\n    ['virtualKeyboardPolicy', ioOptionSelect({option: new MenuOption({options: ['manual','auto',{value:'', id: 'None'}]})})],\n    ['enterKeyHint', ioOptionSelect({option: new MenuOption({options: ['enter','done','go','next','previous','search','send',{value:'', id: 'None'}]})})],\n    ['contentEditable', ioOptionSelect({option: new MenuOption({options: ['true','false','plaintext-only','inherit']})})],\n    ['inputMode', ioOptionSelect({option: new MenuOption({options: ['decimal','email','numeric','tel','search','url','text',{value:'', id: 'None'}]})})],\n    ['lang', ioOptionSelect({option: new MenuOption({options: [\n      {value: '', id: 'None'},\n      'ab','aa','af','ak','sq','am','ar','an','hy','as','av','ae','ay','az','bm','ba','eu','be','bn','bh','bi','bs','br','bg','my','ca','ch','ce',\n      'ny','zh','zh-ans','zh-ant','cv','kw','co','cr','hr','cs','da','dv','nl','dz','en','eo','et','ee','fo','fj','fi','fr','ff','gl','gd',\n      'ka','de','el','kl','gn','gu','ht','ha','he','hz','hi','ho','hu','is','io','ig','id in','ia','ie','iu','ik','ga','it','ja','jv','kn',\n      'kr','ks','kk','km','ki','rw','rn','ky','kv','kg','ko','ku','kj','lo','la','lv','li','ln','lt','lu','lg','lb','gv','mk','mg','ms','ml','mt',\n      'mi','mr','mh','mo','mn','na','nv','ng','nd','ne','no','nb','nn','oc','oj','cu','or','om','os','pi','ps','fa','pl','pt','pa','qu','rm',\n      'ro','ru','se','sm','sg','sa','sr','sh','st','tn','sn','ii','sd','si','ss','sk','sl','so','nr','es','su','sw','sv','tl','ty','tg','ta',\n      'tt','te','th','bo','ti','to','ts','tr','tk','tw','ug','uk','ur','uz','ve','vi','vo','wa','cy','wo','fy','xh','yi','ji','yo','za','zu'\n    ]})})],\n    ['role', ioOptionSelect({option: new MenuOption({options: [\n      'alert','alertdialog','application','article','banner','button','cell','checkbox','columnheader','combobox','complementary',\n      'contentinfo','definition','dialog','directory','document','feed','figure','form','grid','gridcell','group','heading','img',\n      'link','list','listbox','listitem','log','main','marquee','math','menu','menubar','menuitem','menuitemcheckbox','menuitemradio',\n      'navigation','none','note','option','presentation','progressbar','radio','radiogroup','region','row','rowgroup','rowheader',\n      'scrollbar','search','searchbox','separator','slider','spinbutton','status','switch','tab','table','tablist','tabpanel','term',\n      'textbox','timer','toolbar','tooltip','tree','treegrid','treeitem',\n    ]})})],\n    ['ariaAtomic', makeSelect(['true','false',null])],\n    ['ariaAutoComplete', ioOptionSelect({option: new MenuOption({options: ['inline','list','both','none']})})],\n    ['ariaBusy', makeSelect(['true','false',null])],\n    ['ariaBrailleLabel', ioString()],\n    ['ariaBrailleRoleDescription', ioString()],\n    ['ariaChecked', makeSelect(['true','false','mixed',null])],\n    ['ariaColCount', makeSelect([...[...Array(32)].map((_, i) => i + 1),null])],\n    ['ariaColIndex', makeSelect([...[...Array(32)].map((_, i) => i + 1),null])],\n    ['ariaColSpan', makeSelect([...[...Array(32)].map((_, i) => i + 1),null])],\n    ['ariaCurrent', makeSelect(['true','false','page','step','location','date','time',null])],\n    ['ariaDescription', ioString()],\n    ['ariaDisabled', makeSelect(['true','false',null])],\n    ['ariaExpanded', makeSelect(['true','false',null])],\n    ['ariaHasPopup', makeSelect(['true','false','menu','listbox','tree','grid','dialog',null])],\n    ['ariaHidden', makeSelect(['true','false',null])],\n    ['ariaInvalid', makeSelect(['true','false','grammar','spelling',null])],\n    ['ariaKeyShortcuts', ioString()],\n    ['ariaLabel', ioString()],\n    ['ariaLevel', makeSelect([...[...Array(32)].map((_, i) => i + 1),null])],\n    ['ariaLive', ioOptionSelect({option: new MenuOption({options: ['assertive','polite','off']})})],\n    ['ariaModal', makeSelect(['true','false',null])],\n    ['ariaMultiLine', makeSelect(['true','false',null])],\n    ['ariaMultiSelectable', makeSelect(['true','false',null])],\n    ['ariaOrientation', ioOptionSelect({option: new MenuOption({options: ['horizontal','vertical','undefined']})})],\n    ['ariaPlaceholder', ioString()],\n    ['ariaPosInSet', makeSelect([...[...Array(32)].map((_, i) => i + 1),null])],\n    ['ariaPressed', makeSelect(['true','false','mixed',null])],\n    ['ariaReadOnly', makeSelect(['true','false',null])],\n    ['ariaRequired', makeSelect(['true','false',null])],\n    ['ariaRelevant', ioOptionSelect({option: new MenuOption({options: ['additions','all','removals','text']})})],\n    ['ariaRoleDescription', ioString()],\n    ['ariaRowCount', makeSelect([...[...Array(32)].map((_, i) => i + 1),null])],\n    ['ariaRowIndex', makeSelect([...[...Array(32)].map((_, i) => i + 1),null])],\n    ['ariaRowSpan', makeSelect([...[...Array(32)].map((_, i) => i + 1),null])],\n    ['ariaSelected', makeSelect(['true','false',null])],\n    ['ariaSetSize', makeSelect([...[...Array(32)].map((_, i) => i + 1),null])],\n    ['ariaSort', ioOptionSelect({option: new MenuOption({options: ['none','ascending','descending','other']})})],\n    ['ariaValueMax', makeSelect([...[...Array(32)].map((_, i) => i + 1),null])],\n    ['ariaValueMin', makeSelect([...[...Array(32)].map((_, i) => i + 1),null])],\n    ['ariaValueNow', makeSelect([...[...Array(32)].map((_, i) => i + 1),null])],\n    ['ariaValueText', ioString()],\n    ['ariaColIndexText', ioString()],\n    ['ariaRowIndexText', ioString()],\n  ]],\n  [Element, [\n  ]],\n  [HTMLElement, [\n  ]],\n  [Node, [\n    ['reactivity', ioOptionSelect({option: new MenuOption({options: ['none', 'debounced', 'immediate']})})],\n  ]],\n  [IoElement, [\n    ['reactivity', ioOptionSelect({option: new MenuOption({options: ['none', 'debounced', 'immediate']})})],\n  ]],\n  [IoGl, [\n    ['size', ioVectorArray({step: 1})],\n    ['color', ioVectorArray({step: 1})],\n  ]],\n  [Theme, [\n    [Number, ioNumberSlider({step: 1, min: 0, max: 20})],\n    ['themeID', ioOptionSelect({option: new MenuOption({options: ['light','dark']})})],\n    ['spacing2', ioField({disabled: true})],\n    ['spacing3', ioField({disabled: true})],\n    ['spacing5', ioField({disabled: true})],\n    ['spacing8', ioField({disabled: true})],\n    ['fieldHeight', ioField({disabled: true})],\n    [Color, ioColorRgba()],\n  ]]\n])\n\neditorConfigSingleton.forEach((propertyTypes, constructor) => {\n  const descriptors = Object.getOwnPropertyDescriptors(constructor.prototype)\n  for (const [key, descriptor] of Object.entries(descriptors)) {\n    const isWritable = descriptor.writable !== false\n    const hasGetter = descriptor.get !== undefined\n    const hasSetter = descriptor.set !== undefined\n    if ((hasGetter && !hasSetter) || !isWritable) {\n      const hasType = propertyTypes.find(propertyType => propertyType[0] === key)\n      if (hasType) {\n        debug: {\n          console.warn(constructor, `.${key} has getter but no setter or is not writable. Invalidating editor config.`)\n        }\n        (hasType as any).length = 0\n        hasType.push(key, ioField({disabled: true}))\n      } else {\n        propertyTypes.push([key, ioField({disabled: true})])\n      }\n    }\n  }\n})\n\nexport function getEditorConfig(object: object, editorConfig: EditorConfig = new Map()): PropertyConfigRecord {\n  debug: if (!object || !(object instanceof Object)) {\n    console.warn('`getObjectConfig` should be used with an Object instance')\n    return {}\n  }\n\n  const aggregatedConfig: PropertyConfigMap = new Map()\n  for (const [constructorKey, propertyTypes] of editorConfigSingleton) {\n    if (object instanceof constructorKey) {\n      for (const [PropertyIdentifier, config] of propertyTypes) {\n        aggregatedConfig.set(PropertyIdentifier, config)\n      }\n    }\n  }\n\n  for (const [constructorKey, propertyTypes] of editorConfig) {\n    if (object instanceof constructorKey) {\n      for (const [PropertyIdentifier, config] of propertyTypes) {\n        aggregatedConfig.set(PropertyIdentifier, config)\n      }\n    }\n  }\n\n  const configRecord: PropertyConfigRecord = {}\n  for (const key of getAllPropertyNames(object)) {\n    const value = (object as any)[key]\n    for (const [PropertyIdentifier, elementCandidate] of aggregatedConfig) {\n      let element: VDOMElement | undefined\n      if (typeof PropertyIdentifier === 'function' && value instanceof PropertyIdentifier) {\n        element = elementCandidate\n      } else if (typeof PropertyIdentifier === 'function' && value?.constructor === PropertyIdentifier) {\n        element = elementCandidate\n      } else if (typeof PropertyIdentifier === 'string' && key === PropertyIdentifier) {\n        // ignore io-field elements assigned to read-only object properties\n        if (!(typeof value === 'object' && value !== null && elementCandidate.tag === 'io-field')) {\n          element = elementCandidate\n        }\n      } else if (PropertyIdentifier instanceof RegExp && PropertyIdentifier.test(key)) {\n        element = elementCandidate\n      } else if (PropertyIdentifier === null && value === null) {\n        element = elementCandidate\n      } else if (PropertyIdentifier === undefined && value === undefined) {\n        element = elementCandidate\n      }\n      if (element) {\n        // element = {...element};\n        // if (element.props) {\n        //   element.props = {...element.props};\n        // }\n        // console.log(key, element);\n        configRecord[key] = element\n      }\n    }\n  }\n\n  debug: for (const key of getAllPropertyNames(object)) {\n    if (key === 'textNode') continue\n    const value = (object as any)[key]\n    if (!configRecord[key]) console.warn('No config found for', key, value)\n  }\n\n  return configRecord\n}\n\nexport function registerEditorConfig(constructor: AnyConstructor, propertyTypes: PropertyConfig[]) {\n  const existingConfigs = editorConfigSingleton.get(constructor) || []\n  for (const [PropertyIdentifier, elementCandidate] of propertyTypes) {\n    const existingConfig = existingConfigs.find(config => config[0] === PropertyIdentifier)\n    if (existingConfig) {\n      existingConfig[1] = elementCandidate\n    } else {\n      existingConfigs.push([PropertyIdentifier, elementCandidate])\n    }\n  }\n  editorConfigSingleton.set(constructor, existingConfigs)\n}\n","import { ReactiveProperty, Register, span } from '@io-gui/core'\nimport { IoButton, IoButtonProps } from '@io-gui/inputs'\n\nexport type IoPropertyLinkProps = IoButtonProps & {\n  value?: Object\n  showName?: boolean\n}\n\n@Register\nexport class IoPropertyLink extends IoButton {\n  static get Style() {\n    return /* css */`\n    :host {\n      display: flex;\n    }\n    :host > span {\n      color: var(--io_colorBlue);\n      flex: 0 1 auto;\n      overflow: hidden;\n      text-overflow: ellipsis;\n    }\n    :host:hover > span {\n      text-decoration: underline;\n    }\n    `\n  }\n\n  @ReactiveProperty()\n  declare value: Object\n\n  @ReactiveProperty({value: false, type: Boolean})\n  declare showName: boolean\n\n  @ReactiveProperty({value: 'neutral', type: String, reflect: true})\n  declare appearance: 'inset' | 'outset' | 'neutral'\n\n  valueMutated() {\n    this.changed()\n  }\n\n  changed() {\n    let label = ''\n    if (this.value instanceof Array) {\n      label = `${this.value.constructor.name} (${this.value.length})`\n    } else {\n      label = `${this.value.constructor.name}`\n    }\n    if (this.showName) {\n      const name = (this.value as any).name || (this.value as any).title || (this.value as any).id\n      if (name) {\n        label += ` \"${name}\"`\n      }\n    }\n    this.render([span(label)])\n  }\n}\n\nexport const ioPropertyLink = function(arg0?: IoPropertyLinkProps) {\n  return IoPropertyLink.vConstructor(arg0)\n}","import { Register, IoElement, ReactiveProperty, IoElementProps, WithBinding, div, Property } from '@io-gui/core'\nimport { ioButton, ioString } from '@io-gui/inputs'\nimport { ioPropertyLink } from './IoPropertyLink.js'\n\nexport type IoBreadcrumbsProps = IoElementProps & {\n  value?: Object\n  selected?: WithBinding<Object>\n  search?: WithBinding<string>\n}\n\n/**\n * Breadcrumbs select element.\n * When breadcrumb item is clicked or activated by space/enter key, it sets the value to corresponding option value.\n * Optionally, it can trim the `options` array to selected option index.\n **/\n@Register\nexport class IoBreadcrumbs extends IoElement {\n  static get Style() {\n    return /* css */`\n    :host {\n      display: flex;\n    }\n    :host > div {\n      display: flex;\n      flex-direction: row;\n      align-items: center;\n      flex: 1 1 auto;\n      border: var(--io_border);\n      border-color: var(--io_borderColorInset);\n      border-radius: var(--io_borderRadius);\n      background-color: var(--io_bgColorInput);\n      overflow: hidden;\n    }\n    :host > io-button {\n      padding-left: var(--io_spacing);\n      padding-right: var(--io_spacing);\n      margin: var(--io_borderWidth);\n      flex: 0 0 auto;\n    }\n    :host:not([search]) > io-button.clear-button {\n      display: none;\n    }\n    :host > div > io-property-link:last-of-type {\n      flex-shrink: 0;\n    }\n    :host > div > io-property-link:last-of-type > span {\n      flex-shrink: 0;\n      text-overflow: clip;\n    }\n    :host > div > io-property-link:not(:first-of-type):before {\n      content: '>';\n      padding-right: calc(var(--io_fontSize) / 2);\n      color: var(--io_colorStrong);\n      opacity: 0.5;\n    }\n    :host > .search-input {\n      flex: 0 0 auto;\n      overflow: hidden;\n      min-width: calc(var(--io_fieldHeight) + var(--io_borderWidth) * 2);\n      height: calc(var(--io_fieldHeight) + var(--io_borderWidth) * 2);\n      margin-left: var(--io_spacing);\n    }\n    :host > .search-input:empty::before {\n      content: 'üîç';\n      font-size: 0.9em;\n    }\n    `\n  }\n  @ReactiveProperty({type: Object, init: null})\n  declare value: Object\n\n  @ReactiveProperty({type: Object, init: null})\n  declare selected: Object\n\n  @ReactiveProperty({type: String, reflect: true})\n  declare search: string\n\n  @Property(Array)\n  declare _crumbs: Array<Object>\n\n  valueChanged() {\n    this._crumbs.length = 0\n    this._crumbs.push(this.value)\n  }\n  selectedChanged() {\n    const index = this._crumbs.indexOf(this.selected)\n    if (index !== -1) {\n      this._crumbs.length = index + 1\n    } else {\n      this._crumbs.push(this.selected)\n    }\n  }\n  onClearSearch() {\n    this.search = ''\n  }\n  changed() {\n    const vChildren = []\n    if (this._crumbs.length > 1) {\n      vChildren.push(ioButton({\n        icon: 'io:arrow_left',\n        class: 'back-button',\n        value: this._crumbs[this._crumbs.length - 2],\n      }))\n    }\n    const crumbs = div()\n    crumbs.children = []\n    for (let i = Math.max(0, this._crumbs.length - 2); i < this._crumbs.length; i++) {\n      crumbs.children.push(ioPropertyLink({\n        value: this._crumbs[i],\n        showName: i === this._crumbs.length - 1,\n      }))\n    }\n    vChildren.push(\n      crumbs,\n      ioButton({icon: 'io:close', class: 'clear-button', action: this.onClearSearch}),\n      ioString({id: 'search', class: 'search-input', value: this.bind('search'), live: true}),\n    )\n    this.render(vChildren)\n  }\n}\nexport const ioBreadcrumbs = function(arg0?: IoBreadcrumbsProps) {\n  return IoBreadcrumbs.vConstructor(arg0)\n}","import { IoOverlaySingleton, NudgeDirection, nudge, ReactiveProperty, Register } from '@io-gui/core'\nimport { IoPropertyEditor } from './IoPropertyEditor.js'\nimport { EditorGroups } from '../utils/EditorGroups.js'\nimport { EditorWidgets } from '../utils/EditorWidgets.js'\nimport { EditorConfig } from '../utils/EditorConfig.js'\n\ninterface IoContextEditorExpandProps {\n  source: HTMLElement\n  direction: NudgeDirection\n  value: any\n  properties?: string[]\n  labeled?: boolean\n  orientation?: 'vertical' | 'horizontal'\n  config?: EditorConfig\n  groups?: EditorGroups\n  widgets?: EditorWidgets\n  onClose?: () => void\n}\n\n@Register\nclass IoContextEditor extends IoPropertyEditor {\n  static get Style() {\n    return /* css */`\n      :host {\n        z-index: 2;\n      }\n      :host:not([expanded]) {\n      visibility: hidden;\n    }\n    `\n  }\n\n  @ReactiveProperty({type: Boolean, value: false, reflect: true})\n  declare expanded: boolean\n\n  declare onClose: null | (() => void)\n\n  static get Listeners() {\n    return {\n      'keydown': 'onKeydown',\n      'io-focus-to': 'onIoFocusTo',\n    }\n  }\n  onKeydown(event: KeyboardEvent) {\n    if (event.key === 'Escape' || event.key === 'Enter') {\n      event.preventDefault()\n      this.expanded = false\n    }\n  }\n  onIoFocusTo(event: CustomEvent) {\n    const source = event.detail.source\n    const cmd = event.detail.command\n    const siblings = Array.from(this.querySelectorAll('[tabindex=\"0\"]')) as HTMLElement[]\n    const index = [...siblings].indexOf(source)\n\n    let cmdOverride = ''\n    if ((this as any).horizontal) {\n      if (cmd === 'ArrowRight') cmdOverride = 'next'\n      if (cmd === 'ArrowLeft') cmdOverride = 'prev'\n    } else {\n      if (cmd === 'ArrowDown') cmdOverride = 'next'\n      if (cmd === 'ArrowUp') cmdOverride = 'prev'\n    }\n\n    if (cmdOverride) {\n      if (cmdOverride === 'next') {\n        siblings[(index + 1) % siblings.length].focus()\n      } else if (cmdOverride === 'prev') {\n        siblings[(index - 1 + siblings.length) % siblings.length].focus()\n      } else if (cmdOverride === 'out') {\n        if ((this as any).$parent) (this as any).$parent.focus()\n      }\n      event.stopPropagation()\n    }\n  }\n  expand(props: IoContextEditorExpandProps) {\n    this.setProperties({\n      value: props.value,\n      properties: props.properties || [],\n      labeled: props.labeled || true,\n      orientation: props.orientation || 'vertical',\n      config: props.config || new Map(),\n      groups: props.groups || new Map(),\n      widgets: props.widgets || new Map(),\n      expanded: true,\n    })\n    this.onClose = props.onClose || null\n    // TODO: nudge: 'none' should open at cursor position like context menu\n    nudge(this, props.source, props.direction)\n    this.debounce(this.onExpand)\n  }\n  onExpand() {\n    (this.querySelector('[tabindex=\"0\"]:not([inert])') as HTMLElement)?.focus()\n    // TODO: keyboard focus navigation\n  }\n  expandedChanged() {\n    if (!this.expanded) {\n      this.setProperties({\n        value: {},\n        properties: [],\n        labeled: true,\n        orientation: 'vertical',\n        config: new Map(),\n        groups: new Map(),\n        widgets: new Map(),\n      })\n      if (this.onClose) {\n        this.onClose()\n        this.onClose = null\n      }\n    }\n  }\n}\n\nexport const IoContextEditorSingleton = new IoContextEditor()\n\nsetTimeout(() => {\n  IoOverlaySingleton.appendChild(IoContextEditorSingleton as HTMLElement)\n}, 100)\n","import { Register, IoElement, ReactiveProperty, IoElementProps, WithBinding, span } from '@io-gui/core'\nimport { ioBreadcrumbs } from './IoBreadcrumbs.js'\nimport { ioPropertyEditor } from './IoPropertyEditor.js'\nimport { EditorConfig } from '../utils/EditorConfig.js'\nimport { EditorGroups, getAllPropertyNames } from '../utils/EditorGroups.js'\nimport { EditorWidgets } from '../utils/EditorWidgets.js'\nimport { ioPropertyLink } from './IoPropertyLink.js'\n\nexport type IoInspectorProps = IoElementProps & {\n  value?: Record<string, any> | any[]\n  selected?: WithBinding<Record<string, any> | any[]>\n  search?: WithBinding<string>\n  config?: EditorConfig\n  groups?: EditorGroups\n  widgets?: EditorWidgets\n}\n\nfunction isNestedObject(value: Object, selected: Object): boolean {\n  if (value === selected) return true\n  if (value instanceof Array) {\n    return value.some(v => isNestedObject(v, selected))\n  }\n  if (value instanceof Object) {\n    return Object.keys(value).some(k => isNestedObject(value[k as keyof typeof value], selected))\n  }\n  return false\n}\n\n/**\n * Object property editor. It displays a set of labeled property editors for the `value` object inside multiple `io-collapsible` elements. It can be configured to use custom property editors and display only specified properties. Properties of type `Object` are displayed as clickable links which can also be navigated in the `io-breadcrumbs` element.\n **/\n@Register\nexport class IoInspector extends IoElement {\n  static get Style() {\n    return /* css */`\n    :host {\n      display: flex;\n      flex-direction: column;\n      align-items: stretch;\n      flex: 0 1 calc(var(--io_lineHeight) * 17.5);\n      padding: var(--io_spacing);\n      background-color: var(--io_bgColor);\n      border-radius: calc(var(--io_borderRadius) + var(--io_spacing));\n    }\n    :host > io-breadcrumbs {\n      margin: 0 var(--io_spacing);\n      z-index: 1;\n    }\n    :host > span {\n      padding: var(--io_spacing) var(--io_spacing3);\n      color: var(--io_colorStrong);\n    }\n    :host io-property-editor > .row > span {\n      min-width: 6em;\n      text-align: right;\n    }\n    `\n  }\n  @ReactiveProperty()\n  declare value: Object | Array<any>\n\n  @ReactiveProperty()\n  declare selected: Object | Array<any>\n\n  @ReactiveProperty({type: String})\n  declare search: string\n\n  @ReactiveProperty({type: Map, init: null})\n  declare config: EditorConfig\n\n  @ReactiveProperty({type: Map, init: null})\n  declare groups: EditorGroups\n\n  @ReactiveProperty({type: Map, init: null})\n  declare widgets: EditorWidgets\n\n  static get Listeners() {\n    return {\n      'io-button-clicked': 'onLinkClicked',\n    }\n  }\n  init() {\n    this.changeThrottled = this.changeThrottled.bind(this)\n    this._observedObjectProperties.push('value', 'selected')\n    window.addEventListener('io-object-mutation', this.onPropertyMutated as unknown as EventListener)\n  }\n  onLinkClicked(event: CustomEvent) {\n    event.stopPropagation()\n    const value = event.detail.value\n    const item = event.composedPath()[0] as any\n    if (value && typeof value === 'object') {\n      if (item.localName === 'io-property-link' || item.className === 'back-button') {\n        this.setProperty('selected', value)\n      }\n    }\n  }\n  valueChanged() {\n    this.selected = this.value\n  }\n  valueMutated() {\n    // TODO: Improve this check to update selected to new object if it replaced the previously selected.\n    if (!isNestedObject(this.value, this.selected)) {\n      this.selected = this.value\n    }\n    this.changed()\n  }\n  selectedMutated() {\n    this.changed()\n  }\n  selectedChanged() {\n    this.search = ''\n  }\n  changed() {\n    this.throttle(this.changeThrottled, undefined, 1)\n  }\n  changeThrottled() {\n    const vChildren = [\n      ioBreadcrumbs({value: this.value, selected: this.bind('selected'), search: this.bind('search')}),\n    ]\n\n    const config = new Map(this.config)\n\n    if (!config.has(Object)) config.set(Object, [])\n    config.get(Object)!.push([Object, ioPropertyLink({showName: true})])\n\n    const properties = []\n    if (this.search) {\n      for (const key of getAllPropertyNames(this.selected)) {\n        if (key.toLowerCase().includes(this.search.toLowerCase())) {\n          properties.push(key)\n        }\n      }\n    }\n\n    if (this.search && properties.length === 0) {\n      vChildren.push(\n        span(`No results found for \"${this.search}\"`),\n      )\n    } else {\n      vChildren.push(\n        ioPropertyEditor({\n          value: this.selected,\n          config: config,\n          groups: this.groups,\n          widgets: this.widgets,\n          properties: properties,\n        }),\n      )\n    }\n\n    this.render(vChildren)\n  }\n  dispose() {\n    super.dispose()\n    window.removeEventListener('io-object-mutation', this.onPropertyMutated as unknown as EventListener)\n  }\n}\nexport const ioInspector = function(arg0?: IoInspectorProps) {\n  return IoInspector.vConstructor(arg0)\n}\n\n\n","import { Register, IoElement, ReactiveProperty, IoElementProps, WithBinding, VDOMElement, Node } from '@io-gui/core'\nimport { ioNumber, ioBoolean } from '@io-gui/inputs'\n\nexport type IoVectorProps = IoElementProps & {\n  value?: {\n    x?: number\n    y?: number\n    z?: number\n    w?: number\n    r?: number\n    g?: number\n    b?: number\n    a?: number\n    u?: number\n    v?: number\n  }\n  conversion?: number\n  step?: number\n  min?: number\n  max?: number\n  linkable?: boolean\n  linked?: WithBinding<boolean>\n  ladder?: boolean\n}\n/**\n * Input element for vector arrays and objects.\n **/\n@Register\nexport class IoVector extends IoElement {\n  static get Style() {\n    return /* css */`\n      :host {\n        display: flex;\n        flex: 1 1 auto;\n      }\n      :host > io-number {\n        flex: 1 1 auto;\n      }\n      :host > *:not(:last-child) {\n        margin-right: var(--io_spacing);\n      }\n      :host > io-boolicon {\n        flex-shrink: 0;\n        padding: var(--io_spacing);\n      }\n    `\n  }\n\n  @ReactiveProperty({type: Object})\n  declare value: {\n    x?: number\n    y?: number\n    z?: number\n    w?: number\n    r?: number\n    g?: number\n    b?: number\n    a?: number\n    u?: number\n    v?: number\n  }\n\n  @ReactiveProperty(1)\n  declare conversion: number\n\n  @ReactiveProperty(0.001)\n  declare step: number\n\n  @ReactiveProperty(-Infinity)\n  declare min: number\n\n  @ReactiveProperty(Infinity)\n  declare max: number\n\n  @ReactiveProperty(false)\n  declare linkable: boolean\n\n  @ReactiveProperty(false)\n  declare linked: boolean\n\n  @ReactiveProperty(true)\n  declare ladder: boolean\n\n  @ReactiveProperty({type: Array, init: null})\n  declare keys: string[]\n\n  private _ratios: any = {}\n\n  _onNumberPointerDown(event: PointerEvent) {\n    const item = event.composedPath()[0] as HTMLElement\n    const id = item.id as keyof typeof this.value\n    this._ratios = {}\n    if (this.linked && this.value[id] !== 0) {\n      const value = this.value as any\n      for (const k of this.keys) this._ratios[k] = value[k] / value[id]\n    }\n  }\n\n  _onNumberValueInput(event: CustomEvent) {\n    const item = event.composedPath()[0] as HTMLElement\n    const id = item.id as keyof typeof this.value;\n    (this.value as any)[id] = event.detail.value\n    if (this.linked) {\n      for (const k of this.keys) {\n        const value = this.value as any\n        if (k !== id && this._ratios[k]) (value as any)[k] = value[id] * this._ratios[k]\n      }\n    }\n    if (!(this.value as unknown as Node)._isNode) {\n      this.dispatchMutation(this.value)\n    }\n    this.dispatch('value-input', {property: 'value', value: this.value}, false)\n  }\n\n  valueChanged() {\n    this.keys.length = 0\n    this.keys.push(...Object.keys(this.value).filter(key => typeof (this.value as any)[key] === 'number') as Array<keyof typeof this.value>)\n    debug: if (this.keys.find(k => ['0', '1', '2', '3', 'x', 'y', 'z', 'w', 'r', 'g', 'b', 'a', 'u', 'v'].indexOf(k) === -1)) {\n      console.warn('IoVector: Unrecognized vector type!')\n    }\n  }\n  valueMutated() {\n    this.debounce(this.changed)\n  }\n  changed() {\n    const vChildren: Array<VDOMElement | null> = []\n    for (const k of this.keys as [keyof typeof this.value]) {\n      if (this.value[k] !== undefined) {\n        vChildren.push(ioNumber({\n          id: k,\n          value: this.value[k],\n          conversion: this.conversion,\n          step: this.step,\n          min: this.min,\n          max: this.max,\n          ladder: this.ladder,\n          '@pointerdown': this._onNumberPointerDown,\n          '@value-input': this._onNumberValueInput,\n        }))\n      }\n    }\n    vChildren.push(this.linkable ? ioBoolean({value: this.bind('linked') as any, true: 'io:link', false: 'io:unlink'}) : null)\n    this.render(vChildren)\n  }\n}\nexport const ioVector = function(arg0?: IoVectorProps) {\n  return IoVector.vConstructor(arg0)\n}","import { Register, ReactiveProperty, Node } from '@io-gui/core'\nimport { IoVectorArray, IoVectorArrayProps } from './IoVectorArray.js'\n\nexport type IoMatrixProps = IoVectorArrayProps & {\n  columns?: number\n}\n\n/**\n * Input element for vector arrays dispalayed as 2D matrices. Array `value` can have 4, 9, and 16 elements for 2x2, 3x3 and 4x4 matrices.\n **/\n@Register\nexport class IoMatrix extends IoVectorArray {\n  static get Style() {\n    return /* css */`\n      :host {\n        display: grid;\n        align-self: stretch;\n        justify-self: stretch;\n        grid-gap: var(--io_spacing);\n      }\n      :host > *:not(:last-child) {\n        margin-right: 0;\n      }\n      :host[columns=\"4\"] {\n        grid-template-columns: repeat(4, 1fr);\n      }\n      :host[columns=\"3\"] {\n        grid-template-columns: repeat(3, 1fr);\n      }\n      :host[columns=\"2\"] {\n        grid-template-columns: repeat(2, 1fr);\n      }\n    `\n  }\n\n  @ReactiveProperty({type: Array, init: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]})\n  declare value: number[]\n\n  @ReactiveProperty({value: 4, reflect: true})\n  declare columns: number\n\n  _onNumberValueInput(event: CustomEvent) {\n    const item = event.composedPath()[0] as HTMLElement\n    this.value[item.id as any] = event.detail.value\n    if (!(this.value as unknown as Node)._isNode) {\n      this.dispatchMutation(this.value)\n    }\n    this.dispatch('value-input', {property: 'value', value: this.value}, false)\n  }\n\n  valueChanged() {\n    if (this.value.length === 4) {\n      this.setProperties({\n        keys: [0, 1, 2, 3],\n        columns: 2\n      })\n    }\n    if (this.value.length === 9) {\n      this.setProperties({\n        keys: [0, 1, 2, 3, 4, 5, 6, 7, 8],\n        columns: 3\n      })\n    }\n    if (this.value.length === 16) {\n      this.setProperties({\n        keys: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15],\n        columns: 4\n      })\n    }\n    debug: {\n      if ([4, 9, 16].indexOf(this.value.length) === -1) {\n        console.warn('IoMatrix: Unrecognized matrix type!')\n      }\n      if (this.value.find(v => typeof v !== 'number')) {\n        console.warn('IoMatrix: Unrecognized matrix type!')\n      }\n      if (this.keys.find(k => [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15].indexOf(k) === -1)) {\n        console.warn('IoMatrix: Unrecognized matrix type!')\n      }\n    }\n  }\n}\nexport const ioMatrix = function(arg0?: IoMatrixProps) {\n  return IoMatrix.vConstructor(arg0)\n}"],"names":["IoVectorArray","IoElement","event","id","value","k","item","index","vChildren","ioNumber","ioBoolean","__decorateClass","ReactiveProperty","Register","ioVectorArray","arg0","SKIPPED_PROPERTIES","getAllPropertyNames","obj","allProps","curr","prop","editorGroupsSingleton","getEditorGroups","object","editorGroups","aggregatedGroups","aggregateGroups","constructorKey","groups","g","ag","identifier","groupsRecord","key","included","registerEditorGroups","constructor","existingGroups","group","editorWidgetsSingleton","getEditorWidget","editorWidgets","getWidget","matchedWidget","widgetCandidate","widget","registerEditorWidget","IoPropertyEditor","config","getEditorConfig","properties","widgetWithValue","i","tag","props","finalProps","children","HTML_ELEMENTS","div","span","uuid","genIdentifier","ioObject","$","ioPropertyEditor","UUID","hash","IoObject","label","Property","makeSelect","options","option","MenuOption","ioOptionSelect","editorConfigSingleton","ioString","ioSwitch","ioField","_","Node","IoGl","Theme","ioNumberSlider","Color","ioColorRgba","propertyTypes","descriptors","descriptor","isWritable","hasGetter","hasSetter","hasType","propertyType","editorConfig","aggregatedConfig","PropertyIdentifier","configRecord","elementCandidate","element","registerEditorConfig","existingConfigs","existingConfig","IoPropertyLink","IoButton","name","ioPropertyLink","IoBreadcrumbs","ioButton","crumbs","ioBreadcrumbs","IoContextEditor","source","cmd","siblings","cmdOverride","nudge","IoContextEditorSingleton","IoOverlaySingleton","isNestedObject","selected","v","IoInspector","ioInspector","IoVector","ioVector","IoMatrix","ioMatrix"],"mappings":"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"}