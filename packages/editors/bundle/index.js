import{ReactiveProperty as e,IoElement as t,Register as n,HTML_ELEMENTS as o,div as i,span as r,Storage as a,Property as s,Node as l,IoGl as c,Theme as p,Color as u,IoOverlaySingleton as d,nudge as h}from"@io-gui/core";import{ioNumber as g,ioBoolean as f,ioString as v,ioSwitch as b,ioField as y,IoButton as m,ioButton as w}from"@io-gui/inputs";import{ioOptionSelect as x,MenuOption as _}from"@io-gui/menus";import{ioNumberSlider as O}from"@io-gui/sliders";import{ioColorRgba as k}from"@io-gui/colors";var N=Object.defineProperty,C=Object.getOwnPropertyDescriptor,E=(e,t,n,o)=>{for(var i,r=o>1?void 0:o?C(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(r=(o?i(t,n,r):i(r))||r);return o&&r&&N(t,n,r),r};let M=class extends t{static get Style(){return"\n      :host {\n        display: flex;\n        flex: 1 1 auto;\n      }\n      :host > io-number {\n        flex: 1 1 auto;\n      }\n      :host > *:not(:last-child) {\n        margin-right: var(--io_spacing);\n      }\n      :host > io-boolicon {\n        flex-shrink: 0;\n        padding: var(--io_spacing);\n      }\n    "}_ratios={};_onNumberPointerDown(e){const t=e.composedPath()[0].id;if(this._ratios={},this.linked&&0!==this.value[t]){const e=this.value;for(const n of this.keys)this._ratios[n]=e[n]/e[t]}}_onNumberValueInput(e){const t=e.composedPath()[0],n=Number(t.id);if(this.value[n]=e.detail.value,this.linked)for(const o of this.keys){const e=this.value;o!==n&&this._ratios[o]&&(e[o]=e[n]*this._ratios[o])}this.value._isNode||this.dispatchMutation(this.value),this.dispatch("value-input",{property:"value",value:this.value},!1)}valueChanged(){this.keys.length=0,this.keys=Array.from(Array(this.value.length).keys()),this.keys.find(e=>-1===[0,1,2,3].indexOf(e))&&console.warn("IoVectorArray: Unrecognized vector type!")}valueMutated(){this.debounce(this.changed)}changed(){const e=[];for(const t of this.keys)void 0!==this.value[t]&&e.push(g({id:String(t),value:this.value[t],conversion:this.conversion,step:this.step,min:this.min,max:this.max,ladder:this.ladder,"@pointerdown":this._onNumberPointerDown,"@value-input":this._onNumberValueInput}));e.push(this.linkable?f({value:this.bind("linked"),true:"io:link",false:"io:unlink"}):null),this.render(e)}};E([e({type:Array,init:null})],M.prototype,"value",2),E([e(1)],M.prototype,"conversion",2),E([e(.001)],M.prototype,"step",2),E([e(-1/0)],M.prototype,"min",2),E([e(1/0)],M.prototype,"max",2),E([e(!1)],M.prototype,"linkable",2),E([e(!1)],M.prototype,"linked",2),E([e(!0)],M.prototype,"ladder",2),E([e({type:Array,init:null})],M.prototype,"keys",2),M=E([n],M);const P=function(e){return M.vConstructor(e)},I=["$","ELEMENT_NODE","ATTRIBUTE_NODE","TEXT_NODE","CDATA_SECTION_NODE","ENTITY_REFERENCE_NODE","ENTITY_NODE","PROCESSING_INSTRUCTION_NODE","COMMENT_NODE","DOCUMENT_NODE","DOCUMENT_TYPE_NODE","DOCUMENT_FRAGMENT_NODE","NOTATION_NODE","DOCUMENT_POSITION_DISCONNECTED","DOCUMENT_POSITION_PRECEDING","DOCUMENT_POSITION_FOLLOWING","DOCUMENT_POSITION_CONTAINS","DOCUMENT_POSITION_CONTAINED_BY","DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC","onbeforecopy","onbeforecut","onbeforepaste","onsearch","onfullscreenchange","onfullscreenerror","onwebkitfullscreenchange","onwebkitfullscreenerror","namespaceURI","onbeforexrselect","onabort","onbeforeinput","onbeforematch","onbeforetoggle","onblur","oncancel","oncanplay","oncanplaythrough","onchange","onclick","onclose","oncontentvisibilityautostatechange","oncontextlost","oncontextmenu","oncontextrestored","oncuechange","ondblclick","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","ondurationchange","onemptied","onended","onerror","onfocus","onformdata","oninput","oninvalid","onkeydown","onkeypress","onkeyup","onload","onloadeddata","onloadedmetadata","onloadstart","onmousedown","onmouseenter","onmouseleave","onmousemove","onmouseout","onmouseover","onmouseup","onmousewheel","onpause","onplay","onplaying","onprogress","onratechange","onreset","onresize","onscroll","onsecuritypolicyviolation","onseeked","onseeking","onselect","onslotchange","onstalled","onsubmit","onsuspend","ontimeupdate","ontoggle","onvolumechange","onwaiting","onwebkitanimationend","onwebkitanimationiteration","onwebkitanimationstart","onwebkittransitionend","onwheel","onauxclick","ongotpointercapture","onlostpointercapture","onpointerdown","onpointermove","onpointerrawupdate","onpointerup","onpointercancel","onpointerover","onpointerout","onpointerenter","onpointerleave","onselectstart","onselectionchange","onanimationend","onanimationiteration","onanimationstart","ontransitionrun","ontransitionstart","ontransitionend","ontransitioncancel","oncopy","oncut","onpaste","oncommand","onscrollend","onscrollsnapchange","onscrollsnapchangin","onscrollsnapchanging","onafterprint","onbeforeprint","onbeforeunload","onhashchange","onlanguagechange","onmessage","onmessageerror","onoffline","ononline","onpagehide","onpageshow","onpopstate","onrejectionhandled","onstorage","onunhandledrejection","onunload","onenterpictureinpicture","onreadystatechange","onpointerlockchange","onpointerlockerror","onfreeze","onprerenderingchange","onresume","onvisibilitychange","onleavepictureinpicture"];function j(e){const t=[];let n=e;do{if(Object.getOwnPropertyNames(n).forEach(n=>{-1!==t.indexOf(n)||"function"==typeof e[n]||I.includes(n)||t.push(n)}),n.constructor===Node)break}while(n=Object.getPrototypeOf(n));return t}const T=/* @__PURE__ */new Map([[Object,{Hidden:[new RegExp(/^_/)]}],[Node,{Main:["textContent"],Input:["lang","translate","dir","inert","accessKey","draggable","writingSuggestions","spellcheck","autocapitalize","editContext","contentEditable","enterKeyHint","inputMode","virtualKeyboardPolicy"],Hierarchy:["isConnected","ownerDocument","parentNode","parentElement","childNodes","firstChild","lastChild","previousSibling","nextSibling","children","firstElementChild","lastElementChild","childElementCount","previousElementSibling","nextElementSibling","elementTiming"],Layout:["scrollTop","scrollLeft","scrollWidth","scrollHeight","clientTop","clientLeft","clientWidth","clientHeight","currentCSSZoom","offsetParent","offsetTop","offsetLeft","offsetWidth","offsetHeight"],Aria:["role","ariaAtomic","ariaAutoComplete","ariaBusy","ariaBrailleLabel","ariaBrailleRoleDescription","ariaChecked","ariaColCount","ariaColIndex","ariaColSpan","ariaCurrent","ariaDescription","ariaDisabled","ariaExpanded","ariaHasPopup","ariaHidden","ariaInvalid","ariaKeyShortcuts","ariaLabel","ariaLevel","ariaLive","ariaModal","ariaMultiLine","ariaMultiSelectable","ariaOrientation","ariaPlaceholder","ariaPosInSet","ariaPressed","ariaReadOnly","ariaRelevant","ariaRequired","ariaRoleDescription","ariaRowCount","ariaRowIndex","ariaRowSpan","ariaSelected","ariaSetSize","ariaSort","ariaValueMax","ariaValueMin","ariaValueNow","ariaValueText","ariaColIndexText","ariaRowIndexText","ariaActiveDescendantElement","ariaControlsElements","ariaDescribedByElements","ariaDetailsElements","ariaErrorMessageElements","ariaFlowToElements","ariaLabelledByElements"],Hidden:[]}]]);function S(e,t=/* @__PURE__ */new Map){if(!(e&&e instanceof Object))return console.warn("`getEditorGroups` should be used with an Object instance"),{};const n={Main:[]};function o(t){for(const[o,i]of t)if(e instanceof o)for(const e in i){n[e]=n[e]||[],n[e].push(...i[e]);for(const t in n)if(t!==e)for(const o of i[e])n[t].includes(o)&&n[t].splice(n[t].indexOf(o),1)}}o(T),o(t);const i={Main:[]};for(const r of j(e)){let e=!1;for(const t of Object.keys(n)){i[t]=i[t]||[];for(const o of n[t])o!==r?o instanceof RegExp&&o.test(r)&&(i[t].push(r),e=!0):(i[t].push(r),e=!0)}e||i.Main.push(r)}return i}function D(e,t){const n=T.get(e)||{};for(const o in t){n[o]=n[o]||[],n[o].push(...t[o]);for(const e in n)if(e!==o)for(const i of t[o])n[e].includes(i)&&n[e].splice(n[e].indexOf(i),1)}T.set(e,n)}const A=/* @__PURE__ */new Map([]);function R(e,t=/* @__PURE__ */new Map){if(!(e&&e instanceof Object))return console.warn("`getEditorGroups` should be used with an Object instance"),null;function n(t){let n=null;for(const[o,i]of t)e instanceof o&&(n=i);return n}let o=n(A);return o=n(t)||o,o}function L(e,t){A.set(e,t)}var z=Object.defineProperty,H=Object.getOwnPropertyDescriptor,U=(e,t,n,o)=>{for(var i,r=o>1?void 0:o?H(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(r=(o?i(t,n,r):i(r))||r);return o&&r&&z(t,n,r),r};let V=class extends t{static get Style(){return'\n    :host {\n      display: flex;\n      flex-direction: column;\n      color: var(--io_colorInput);\n      background-color: var(--io_bgColor);\n      border-radius: calc(var(--io_borderRadius) + var(--io_spacing));\n      font-size: var(--io_fontSize);\n    }\n    :host[orientation="horizontal"] {\n      flex-direction: row;\n    }\n    :host > .row {\n      display: flex;\n      flex-direction: row;\n      margin: var(--io_spacing);\n      padding: var(--io_spacing) 0;\n      border-radius: var(--io_borderRadius);\n      margin-bottom: 0;\n      background-color: var(--io_bgColorLight);\n    }\n    :host[orientation="horizontal"] > .row {\n      flex-direction: column;\n    }\n    :host > .row:last-of-type {\n      margin-bottom: var(--io_spacing);\n    }\n    :host > .row > span {\n      padding: var(--io_borderWidth); /* TODO: verify correctness */\n      margin: var(--io_spacing);\n      margin-left: var(--io_spacing2);\n      line-height: var(--io_lineHeight);\n      height: var(--io_lineHeight);\n      text-wrap: nowrap;\n      overflow: hidden;\n      text-overflow: ellipsis;\n    }\n    :host > .row > span:after {\n      display: inline-block;\n      margin-left: var(--io_spacing);\n      opacity: 0.5;\n      content: \':\';\n    }\n    :host io-object {\n      margin-right: var(--io_spacing);\n    }\n    '}init(){this.changeThrottled=this.changeThrottled.bind(this),this._observedObjectProperties.push("value"),window.addEventListener("io-object-mutation",this.onPropertyMutated)}_onValueInput(e){e.stopImmediatePropagation();const t=e.target.id;void 0!==t?(this.value[t]=e.detail.value,this.value._isNode||this.dispatchMutation(this.value)):console.warn('IoPropertyEditor: "value-input" recieved from an input without a property id')}valueMutated(){this.changeThrottled()}changeThrottled(){this.throttle(this.changeThrottled)}changed(){const e=J(this.value,this.config),t=S(this.value,this.groups),n=R(this.value,this.widgets),s=[],l=[];if(this.properties.length)s.push(...this.properties);else{if(n){const e={tag:n.tag,props:Object.assign({value:this.value},n.props),children:n.children};l.push(e)}s.push(...t.Main)}const c=j(this.value);for(let a=0;a<s.length;a++)if(c.includes(s[a])){const t=s[a],n=this.value[t],c=e[t].tag,p=e[t].props||{},u={id:t,value:n,"@value-input":this._onValueInput};let d;Object.assign(u,p),o.includes(c)&&"string"==typeof n&&(d=n),"io-object"!==c&&"io-property-editor"!==c||(u.config=u.config||this.config,u.groups=u.groups||this.groups),l.push(i({class:"row"},[this.labeled?r(t):null,{tag:c,props:u,children:d}]))}else console.warn(`IoPropertyEditor: property "${s[a]}" not found in value`);const p=function(e){let t="io-object-collapse-state-"+e.constructor.name;t+="-"+(e.guid||e.uuid||e.id||"");const n=JSON.stringify(Object.keys(e));let o=0;for(let i=0;i<n.length;i++)o=(o<<5)-o+n.charCodeAt(i),o|=0;return o=(-o).toString(16),t+="-"+o,t}(this.value);if(!this.properties.length)for(const o in t)"Main"!==o&&"Hidden"!==o&&t[o].length&&l.push(F({label:o,expanded:a({value:!1,storage:"local",key:p+"-"+o}),value:this.value,properties:t[o],config:this.config}));this.render(l)}dispose(){super.dispose(),window.removeEventListener("io-object-mutation",this.onPropertyMutated)}};U([e()],V.prototype,"value",2),U([e({type:Array,init:null})],V.prototype,"properties",2),U([e(!0)],V.prototype,"labeled",2),U([e({type:String,value:"vertical",reflect:!0})],V.prototype,"orientation",2),U([e({type:Map,init:null})],V.prototype,"config",2),U([e({type:Map,init:null})],V.prototype,"groups",2),U([e({type:Map,init:null})],V.prototype,"widgets",2),V=U([n],V);const B=function(e){return V.vConstructor(e)};var W=Object.defineProperty,$=Object.getOwnPropertyDescriptor,K=(e,t,n,o)=>{for(var i,r=o>1?void 0:o?$(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(r=(o?i(t,n,r):i(r))||r);return o&&r&&W(t,n,r),r};let q=class extends t{static get Style(){return'\n    :host {\n      display: flex;\n      flex-direction: column;\n      color: var(--io_colorInput);\n      background-color: var(--io_bgColor);\n      border-radius: calc(var(--io_borderRadius) + var(--io_spacing));\n    }\n    :host > io-boolean {\n      padding: var(--io_spacing) var(--io_spacing2);\n      align-self: stretch;\n    }\n    :host > io-boolean:before {\n      display: inline-block;\n      width: 0.75em;\n      content: "â–¸"\n    }\n    :host > io-boolean[value]:before {\n      content: "â–¾";\n    }\n    :host > io-property-editor {\n      margin: var(--io_spacing);\n      border: var(--io_border);\n      border-color: var(--io_borderColorInset);\n    }\n    '}changed(){const e=this.label||this.value.constructor.name,t=[];t.push(f({appearance:"neutral",true:e,false:e,value:this.bind("expanded")})),this.expanded&&t.push(B({value:this.value,properties:this.properties,config:this.config,groups:this.groups,widgets:this.widgets,labeled:this.labeled})),this.render(t),this.setAttribute("aria-expanded",String(this.expanded))}};K([e({type:Object})],q.prototype,"value",2),K([e({type:Array,init:null})],q.prototype,"properties",2),K([e(!0)],q.prototype,"labeled",2),K([e("")],q.prototype,"label",2),K([e({value:!1,reflect:!0})],q.prototype,"expanded",2),K([e({type:Map,init:null})],q.prototype,"config",2),K([e({type:Map,init:null})],q.prototype,"groups",2),K([e({type:Map,init:null})],q.prototype,"widgets",2),K([s("region")],q.prototype,"role",2),q=K([n],q);const F=function(e){return q.vConstructor(e)};function G(e){for(let n=0;n<e.length;n++)null===e[n]&&(e[n]={value:null,id:"Null"});const t=new _({options:e});return x({option:t})}const Y=/* @__PURE__ */new Map([[Object,[[String,v()],[Number,g({step:.01})],[Boolean,b()],[Object,F()],[null,y({disabled:!0})],[void 0,y({disabled:!0})]]],[Array,[[Number,g({step:.01})]]],[window.Node,[["tabIndex",x({option:new _({options:[{value:"",id:"None"},"-1","0","1","2","3"]})})],["innerHTML",v({disabled:!0,style:{maxWidth:"10em"}})],["outerHTML",v({disabled:!0,style:{maxWidth:"10em"}})],["autocapitalize",x({option:new _({options:["off","sentences","words","characters",{value:"",id:"None"}]})})],["writingSuggestions",x({option:new _({options:["true","false"]})})],["dir",x({option:new _({options:["ltr","rtl","auto",{value:"",id:"None"}]})})],["virtualKeyboardPolicy",x({option:new _({options:["manual","auto",{value:"",id:"None"}]})})],["enterKeyHint",x({option:new _({options:["enter","done","go","next","previous","search","send",{value:"",id:"None"}]})})],["contentEditable",x({option:new _({options:["true","false","plaintext-only","inherit"]})})],["inputMode",x({option:new _({options:["decimal","email","numeric","tel","search","url","text",{value:"",id:"None"}]})})],["lang",x({option:new _({options:[{value:"",id:"None"},"ab","aa","af","ak","sq","am","ar","an","hy","as","av","ae","ay","az","bm","ba","eu","be","bn","bh","bi","bs","br","bg","my","ca","ch","ce","ny","zh","zh-ans","zh-ant","cv","kw","co","cr","hr","cs","da","dv","nl","dz","en","eo","et","ee","fo","fj","fi","fr","ff","gl","gd","ka","de","el","kl","gn","gu","ht","ha","he","hz","hi","ho","hu","is","io","ig","id in","ia","ie","iu","ik","ga","it","ja","jv","kn","kr","ks","kk","km","ki","rw","rn","ky","kv","kg","ko","ku","kj","lo","la","lv","li","ln","lt","lu","lg","lb","gv","mk","mg","ms","ml","mt","mi","mr","mh","mo","mn","na","nv","ng","nd","ne","no","nb","nn","oc","oj","cu","or","om","os","pi","ps","fa","pl","pt","pa","qu","rm","ro","ru","se","sm","sg","sa","sr","sh","st","tn","sn","ii","sd","si","ss","sk","sl","so","nr","es","su","sw","sv","tl","ty","tg","ta","tt","te","th","bo","ti","to","ts","tr","tk","tw","ug","uk","ur","uz","ve","vi","vo","wa","cy","wo","fy","xh","yi","ji","yo","za","zu"]})})],["role",x({option:new _({options:["alert","alertdialog","application","article","banner","button","cell","checkbox","columnheader","combobox","complementary","contentinfo","definition","dialog","directory","document","feed","figure","form","grid","gridcell","group","heading","img","link","list","listbox","listitem","log","main","marquee","math","menu","menubar","menuitem","menuitemcheckbox","menuitemradio","navigation","none","note","option","presentation","progressbar","radio","radiogroup","region","row","rowgroup","rowheader","scrollbar","search","searchbox","separator","slider","spinbutton","status","switch","tab","table","tablist","tabpanel","term","textbox","timer","toolbar","tooltip","tree","treegrid","treeitem"]})})],["ariaAtomic",G(["true","false",null])],["ariaAutoComplete",x({option:new _({options:["inline","list","both","none"]})})],["ariaBusy",G(["true","false",null])],["ariaBrailleLabel",v()],["ariaBrailleRoleDescription",v()],["ariaChecked",G(["true","false","mixed",null])],["ariaColCount",G([...[...Array(32)].map((e,t)=>t+1),null])],["ariaColIndex",G([...[...Array(32)].map((e,t)=>t+1),null])],["ariaColSpan",G([...[...Array(32)].map((e,t)=>t+1),null])],["ariaCurrent",G(["true","false","page","step","location","date","time",null])],["ariaDescription",v()],["ariaDisabled",G(["true","false",null])],["ariaExpanded",G(["true","false",null])],["ariaHasPopup",G(["true","false","menu","listbox","tree","grid","dialog",null])],["ariaHidden",G(["true","false",null])],["ariaInvalid",G(["true","false","grammar","spelling",null])],["ariaKeyShortcuts",v()],["ariaLabel",v()],["ariaLevel",G([...[...Array(32)].map((e,t)=>t+1),null])],["ariaLive",x({option:new _({options:["assertive","polite","off"]})})],["ariaModal",G(["true","false",null])],["ariaMultiLine",G(["true","false",null])],["ariaMultiSelectable",G(["true","false",null])],["ariaOrientation",x({option:new _({options:["horizontal","vertical","undefined"]})})],["ariaPlaceholder",v()],["ariaPosInSet",G([...[...Array(32)].map((e,t)=>t+1),null])],["ariaPressed",G(["true","false","mixed",null])],["ariaReadOnly",G(["true","false",null])],["ariaRequired",G(["true","false",null])],["ariaRelevant",x({option:new _({options:["additions","all","removals","text"]})})],["ariaRoleDescription",v()],["ariaRowCount",G([...[...Array(32)].map((e,t)=>t+1),null])],["ariaRowIndex",G([...[...Array(32)].map((e,t)=>t+1),null])],["ariaRowSpan",G([...[...Array(32)].map((e,t)=>t+1),null])],["ariaSelected",G(["true","false",null])],["ariaSetSize",G([...[...Array(32)].map((e,t)=>t+1),null])],["ariaSort",x({option:new _({options:["none","ascending","descending","other"]})})],["ariaValueMax",G([...[...Array(32)].map((e,t)=>t+1),null])],["ariaValueMin",G([...[...Array(32)].map((e,t)=>t+1),null])],["ariaValueNow",G([...[...Array(32)].map((e,t)=>t+1),null])],["ariaValueText",v()],["ariaColIndexText",v()],["ariaRowIndexText",v()]]],[Element,[]],[HTMLElement,[]],[l,[["reactivity",x({option:new _({options:["none","debounced","immediate"]})})]]],[t,[["reactivity",x({option:new _({options:["none","debounced","immediate"]})})]]],[c,[["size",P({step:1})],["color",P({step:1})]]],[p,[[Number,O({step:1,min:0,max:20})],["themeID",x({option:new _({options:["light","dark"]})})],["spacing2",y({disabled:!0})],["spacing3",y({disabled:!0})],["spacing5",y({disabled:!0})],["spacing8",y({disabled:!0})],["fieldHeight",y({disabled:!0})],[u,k()]]]]);function J(e,t=/* @__PURE__ */new Map){if(!(e&&e instanceof Object))return console.warn("`getObjectConfig` should be used with an Object instance"),{};const n=/* @__PURE__ */new Map;for(const[i,r]of Y)if(e instanceof i)for(const[e,t]of r)n.set(e,t);for(const[i,r]of t)if(e instanceof i)for(const[e,t]of r)n.set(e,t);const o={};for(const i of j(e)){const t=e[i];for(const[e,r]of n){let n;"function"==typeof e&&t instanceof e||"function"==typeof e&&t?.constructor===e?n=r:"string"==typeof e&&i===e?"object"==typeof t&&null!==t&&"io-field"===r.tag||(n=r):(e instanceof RegExp&&e.test(i)||null===e&&null===t||void 0===e&&void 0===t)&&(n=r),n&&(o[i]=n)}}for(const i of j(e)){if("textNode"===i)continue;const t=e[i];o[i]||console.warn("No config found for",i,t)}return o}function X(e,t){const n=Y.get(e)||[];for(const[o,i]of t){const e=n.find(e=>e[0]===o);e?e[1]=i:n.push([o,i])}Y.set(e,n)}Y.forEach((e,t)=>{const n=Object.getOwnPropertyDescriptors(t.prototype);for(const[o,i]of Object.entries(n)){const n=!1!==i.writable,r=void 0!==i.get,a=void 0!==i.set;if(r&&!a||!n){const n=e.find(e=>e[0]===o);n?(console.warn(t,`.${o} has getter but no setter or is not writable. Invalidating editor config.`),n.length=0,n.push(o,y({disabled:!0}))):e.push([o,y({disabled:!0})])}}});var Z=Object.defineProperty,Q=Object.getOwnPropertyDescriptor,ee=(e,t,n,o)=>{for(var i,r=o>1?void 0:o?Q(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(r=(o?i(t,n,r):i(r))||r);return o&&r&&Z(t,n,r),r};let te=class extends m{static get Style(){return"\n    :host {\n      display: flex;\n    }\n    :host > span {\n      color: var(--io_colorBlue);\n      flex: 0 1 auto;\n      overflow: hidden;\n      text-overflow: ellipsis;\n    }\n    :host:hover > span {\n      text-decoration: underline;\n    }\n    "}valueMutated(){this.changed()}changed(){let e="";if(e=this.value instanceof Array?`${this.value.constructor.name} (${this.value.length})`:`${this.value.constructor.name}`,this.showName){const t=this.value.name||this.value.title||this.value.id;t&&(e+=` "${t}"`)}this.render([r(e)])}};ee([e()],te.prototype,"value",2),ee([e({value:!1,type:Boolean})],te.prototype,"showName",2),ee([e({value:"neutral",type:String,reflect:!0})],te.prototype,"appearance",2),te=ee([n],te);const ne=function(e){return te.vConstructor(e)};var oe=Object.defineProperty,ie=Object.getOwnPropertyDescriptor,re=(e,t,n,o)=>{for(var i,r=o>1?void 0:o?ie(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(r=(o?i(t,n,r):i(r))||r);return o&&r&&oe(t,n,r),r};let ae=class extends t{static get Style(){return"\n    :host {\n      display: flex;\n    }\n    :host > div {\n      display: flex;\n      flex-direction: row;\n      align-items: center;\n      flex: 1 1 auto;\n      border: var(--io_border);\n      border-color: var(--io_borderColorInset);\n      border-radius: var(--io_borderRadius);\n      background-color: var(--io_bgColorInput);\n      overflow: hidden;\n    }\n    :host > io-button {\n      padding-left: var(--io_spacing);\n      padding-right: var(--io_spacing);\n      margin: var(--io_borderWidth);\n      flex: 0 0 auto;\n    }\n    :host:not([search]) > io-button.clear-button {\n      display: none;\n    }\n    :host > div > io-property-link:last-of-type {\n      flex-shrink: 0;\n    }\n    :host > div > io-property-link:last-of-type > span {\n      flex-shrink: 0;\n      text-overflow: clip;\n    }\n    :host > div > io-property-link:not(:first-of-type):before {\n      content: '>';\n      padding-right: calc(var(--io_fontSize) / 2);\n      color: var(--io_colorStrong);\n      opacity: 0.5;\n    }\n    :host > .search-input {\n      flex: 0 0 auto;\n      overflow: hidden;\n      min-width: calc(var(--io_fieldHeight) + var(--io_borderWidth) * 2);\n      height: calc(var(--io_fieldHeight) + var(--io_borderWidth) * 2);\n      margin-left: var(--io_spacing);\n    }\n    :host > .search-input:empty::before {\n      content: 'ðŸ”';\n      font-size: 0.9em;\n    }\n    "}valueChanged(){this._crumbs.length=0,this._crumbs.push(this.value)}selectedChanged(){const e=this._crumbs.indexOf(this.selected);-1!==e?this._crumbs.length=e+1:this._crumbs.push(this.selected)}onClearSearch(){this.search=""}changed(){const e=[];this._crumbs.length>1&&e.push(w({icon:"io:arrow_left",class:"back-button",value:this._crumbs[this._crumbs.length-2]}));const t=i();t.children=[];for(let n=Math.max(0,this._crumbs.length-2);n<this._crumbs.length;n++)t.children.push(ne({value:this._crumbs[n],showName:n===this._crumbs.length-1}));e.push(t,w({icon:"io:close",class:"clear-button",action:this.onClearSearch}),v({id:"search",class:"search-input",value:this.bind("search"),live:!0})),this.render(e)}};re([e({type:Object,init:null})],ae.prototype,"value",2),re([e({type:Object,init:null})],ae.prototype,"selected",2),re([e({type:String,reflect:!0})],ae.prototype,"search",2),re([s(Array)],ae.prototype,"_crumbs",2),ae=re([n],ae);const se=function(e){return ae.vConstructor(e)};var le=Object.defineProperty,ce=Object.getOwnPropertyDescriptor,pe=(e,t,n,o)=>{for(var i,r=o>1?void 0:o?ce(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(r=(o?i(t,n,r):i(r))||r);return o&&r&&le(t,n,r),r};let ue=class extends V{static get Style(){return"\n      :host {\n        z-index: 2;\n      }\n      :host:not([expanded]) {\n      visibility: hidden;\n    }\n    "}static get Listeners(){return{keydown:"onKeydown","io-focus-to":"onIoFocusTo"}}onKeydown(e){"Escape"!==e.key&&"Enter"!==e.key||(e.preventDefault(),this.expanded=!1)}onIoFocusTo(e){const t=e.detail.source,n=e.detail.command,o=Array.from(this.querySelectorAll('[tabindex="0"]')),i=[...o].indexOf(t);let r="";this.horizontal?("ArrowRight"===n&&(r="next"),"ArrowLeft"===n&&(r="prev")):("ArrowDown"===n&&(r="next"),"ArrowUp"===n&&(r="prev")),r&&("next"===r?o[(i+1)%o.length].focus():"prev"===r?o[(i-1+o.length)%o.length].focus():"out"===r&&this.$parent&&this.$parent.focus(),e.stopPropagation())}expand(e){this.setProperties({value:e.value,properties:e.properties||[],labeled:e.labeled||!0,orientation:e.orientation||"vertical",config:e.config||/* @__PURE__ */new Map,groups:e.groups||/* @__PURE__ */new Map,widgets:e.widgets||/* @__PURE__ */new Map,expanded:!0}),this.onClose=e.onClose||null,h(this,e.source,e.direction),this.debounce(this.onExpand)}onExpand(){this.querySelector('[tabindex="0"]:not([inert])')?.focus()}expandedChanged(){this.expanded||(this.setProperties({value:{},properties:[],labeled:!0,orientation:"vertical",config:/* @__PURE__ */new Map,groups:/* @__PURE__ */new Map,widgets:/* @__PURE__ */new Map}),this.onClose&&(this.onClose(),this.onClose=null))}};pe([e({type:Boolean,value:!1,reflect:!0})],ue.prototype,"expanded",2),ue=pe([n],ue);const de=new ue;setTimeout(()=>{d.appendChild(de)},100);var he=Object.defineProperty,ge=Object.getOwnPropertyDescriptor,fe=(e,t,n,o)=>{for(var i,r=o>1?void 0:o?ge(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(r=(o?i(t,n,r):i(r))||r);return o&&r&&he(t,n,r),r};function ve(e,t){return e===t||(e instanceof Array?e.some(e=>ve(e,t)):e instanceof Object&&Object.keys(e).some(n=>ve(e[n],t)))}let be=class extends t{static get Style(){return"\n    :host {\n      display: flex;\n      flex-direction: column;\n      align-items: stretch;\n      flex: 0 1 calc(var(--io_lineHeight) * 17.5);\n      padding: var(--io_spacing);\n      background-color: var(--io_bgColor);\n      border-radius: calc(var(--io_borderRadius) + var(--io_spacing));\n    }\n    :host > io-breadcrumbs {\n      margin: 0 var(--io_spacing);\n      z-index: 1;\n    }\n    :host > span {\n      padding: var(--io_spacing) var(--io_spacing3);\n      color: var(--io_colorStrong);\n    }\n    :host io-property-editor > .row > span {\n      min-width: 6em;\n      text-align: right;\n    }\n    "}static get Listeners(){return{"io-button-clicked":"onLinkClicked"}}init(){this.changeThrottled=this.changeThrottled.bind(this),this._observedObjectProperties.push("value","selected"),window.addEventListener("io-object-mutation",this.onPropertyMutated)}onLinkClicked(e){e.stopPropagation();const t=e.detail.value,n=e.composedPath()[0];t&&"object"==typeof t&&("io-property-link"!==n.localName&&"back-button"!==n.className||this.setProperty("selected",t))}valueChanged(){this.selected=this.value}valueMutated(){ve(this.value,this.selected)||(this.selected=this.value),this.changed()}selectedMutated(){this.changed()}selectedChanged(){this.search=""}changed(){this.throttle(this.changeThrottled,void 0,1)}changeThrottled(){const e=[se({value:this.value,selected:this.bind("selected"),search:this.bind("search")})],t=new Map(this.config);t.has(Object)||t.set(Object,[]),t.get(Object).push([Object,ne({showName:!0})]);const n=[];if(this.search)for(const o of j(this.selected))o.toLowerCase().includes(this.search.toLowerCase())&&n.push(o);this.search&&0===n.length?e.push(r(`No results found for "${this.search}"`)):e.push(B({value:this.selected,config:t,groups:this.groups,widgets:this.widgets,properties:n})),this.render(e)}dispose(){super.dispose(),window.removeEventListener("io-object-mutation",this.onPropertyMutated)}};fe([e()],be.prototype,"value",2),fe([e()],be.prototype,"selected",2),fe([e({type:String})],be.prototype,"search",2),fe([e({type:Map,init:null})],be.prototype,"config",2),fe([e({type:Map,init:null})],be.prototype,"groups",2),fe([e({type:Map,init:null})],be.prototype,"widgets",2),be=fe([n],be);const ye=function(e){return be.vConstructor(e)};var me=Object.defineProperty,we=Object.getOwnPropertyDescriptor,xe=(e,t,n,o)=>{for(var i,r=o>1?void 0:o?we(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(r=(o?i(t,n,r):i(r))||r);return o&&r&&me(t,n,r),r};let _e=class extends t{static get Style(){return"\n      :host {\n        display: flex;\n        flex: 1 1 auto;\n      }\n      :host > io-number {\n        flex: 1 1 auto;\n      }\n      :host > *:not(:last-child) {\n        margin-right: var(--io_spacing);\n      }\n      :host > io-boolicon {\n        flex-shrink: 0;\n        padding: var(--io_spacing);\n      }\n    "}_ratios={};_onNumberPointerDown(e){const t=e.composedPath()[0].id;if(this._ratios={},this.linked&&0!==this.value[t]){const e=this.value;for(const n of this.keys)this._ratios[n]=e[n]/e[t]}}_onNumberValueInput(e){const t=e.composedPath()[0].id;if(this.value[t]=e.detail.value,this.linked)for(const n of this.keys){const e=this.value;n!==t&&this._ratios[n]&&(e[n]=e[t]*this._ratios[n])}this.value._isNode||this.dispatchMutation(this.value),this.dispatch("value-input",{property:"value",value:this.value},!1)}valueChanged(){this.keys.length=0,this.keys.push(...Object.keys(this.value).filter(e=>"number"==typeof this.value[e])),this.keys.find(e=>-1===["0","1","2","3","x","y","z","w","r","g","b","a","u","v"].indexOf(e))&&console.warn("IoVector: Unrecognized vector type!")}valueMutated(){this.debounce(this.changed)}changed(){const e=[];for(const t of this.keys)void 0!==this.value[t]&&e.push(g({id:t,value:this.value[t],conversion:this.conversion,step:this.step,min:this.min,max:this.max,ladder:this.ladder,"@pointerdown":this._onNumberPointerDown,"@value-input":this._onNumberValueInput}));e.push(this.linkable?f({value:this.bind("linked"),true:"io:link",false:"io:unlink"}):null),this.render(e)}};xe([e({type:Object})],_e.prototype,"value",2),xe([e(1)],_e.prototype,"conversion",2),xe([e(.001)],_e.prototype,"step",2),xe([e(-1/0)],_e.prototype,"min",2),xe([e(1/0)],_e.prototype,"max",2),xe([e(!1)],_e.prototype,"linkable",2),xe([e(!1)],_e.prototype,"linked",2),xe([e(!0)],_e.prototype,"ladder",2),xe([e({type:Array,init:null})],_e.prototype,"keys",2),_e=xe([n],_e);const Oe=function(e){return _e.vConstructor(e)};var ke=Object.defineProperty,Ne=Object.getOwnPropertyDescriptor,Ce=(e,t,n,o)=>{for(var i,r=o>1?void 0:o?Ne(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(r=(o?i(t,n,r):i(r))||r);return o&&r&&ke(t,n,r),r};let Ee=class extends M{static get Style(){return'\n      :host {\n        display: grid;\n        align-self: stretch;\n        justify-self: stretch;\n        grid-gap: var(--io_spacing);\n      }\n      :host > *:not(:last-child) {\n        margin-right: 0;\n      }\n      :host[columns="4"] {\n        grid-template-columns: repeat(4, 1fr);\n      }\n      :host[columns="3"] {\n        grid-template-columns: repeat(3, 1fr);\n      }\n      :host[columns="2"] {\n        grid-template-columns: repeat(2, 1fr);\n      }\n    '}_onNumberValueInput(e){const t=e.composedPath()[0];this.value[t.id]=e.detail.value,this.value._isNode||this.dispatchMutation(this.value),this.dispatch("value-input",{property:"value",value:this.value},!1)}valueChanged(){4===this.value.length&&this.setProperties({keys:[0,1,2,3],columns:2}),9===this.value.length&&this.setProperties({keys:[0,1,2,3,4,5,6,7,8],columns:3}),16===this.value.length&&this.setProperties({keys:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15],columns:4}),-1===[4,9,16].indexOf(this.value.length)&&console.warn("IoMatrix: Unrecognized matrix type!"),this.value.find(e=>"number"!=typeof e)&&console.warn("IoMatrix: Unrecognized matrix type!"),this.keys.find(e=>-1===[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15].indexOf(e))&&console.warn("IoMatrix: Unrecognized matrix type!")}};Ce([e({type:Array,init:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]})],Ee.prototype,"value",2),Ce([e({value:4,reflect:!0})],Ee.prototype,"columns",2),Ee=Ce([n],Ee);const Me=function(e){return Ee.vConstructor(e)};export{ae as IoBreadcrumbs,de as IoContextEditorSingleton,be as IoInspector,Ee as IoMatrix,q as IoObject,V as IoPropertyEditor,_e as IoVector,M as IoVectorArray,I as SKIPPED_PROPERTIES,j as getAllPropertyNames,J as getEditorConfig,S as getEditorGroups,R as getEditorWidget,se as ioBreadcrumbs,ye as ioInspector,Me as ioMatrix,F as ioObject,B as ioPropertyEditor,Oe as ioVector,P as ioVectorArray,X as registerEditorConfig,D as registerEditorGroups,L as registerEditorWidget};
//# sourceMappingURL=index.js.map
