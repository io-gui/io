{"version":3,"file":"IoField.js","sourceRoot":"","sources":["../../src/elements/IoField.ts"],"names":[],"mappings":"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","sourcesContent":["import { Register, ReactiveProperty, IoElement, IoElementProps, span, Property, WithBinding, ListenerDefinitions, ListenerDefinition } from '@io-gui/core'\nimport { ioIcon } from '@io-gui/icons'\n\nexport type IoFieldProps = IoElementProps & {\n  value?: WithBinding<any>\n  icon?: string\n  label?: string\n  selected?: boolean\n  disabled?: boolean\n  appearance?: 'neutral' | 'inset' | 'outset'\n  pattern?: string\n}\n\n@Register\nexport class IoField extends IoElement {\n  static get Style() {\n    return /* css */`\n      :host {\n        cursor: pointer;\n        height: var(--io_fieldHeight);\n        min-height: var(--io_fieldHeight);\n        line-height: var(--io_lineHeight);\n        border: var(--io_border);\n        border-color: transparent;\n        border-radius: var(--io_borderRadius);\n        padding: var(--io_spacing) calc(var(--io_spacing3) + var(--io_borderWidth));\n        color: var(--io_color);\n        overflow: hidden;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n        font-size: var(--io_fontSize);\n        text-size-adjust: 100%;\n        @apply --unselectable;\n      }\n      :host:focus {\n        text-overflow: inherit;\n        @apply --io_focus;\n      }\n      :host[hidden] {\n        display: none;\n      }\n      :host[disabled] {\n        opacity: 0.5;\n      }\n      :host[pressed] {\n        border-color: var(--io_borderColorInset) !important;\n        box-shadow: var(--io_shadowInset) !important;\n      }\n      :host span {\n        height: var(--io_lineHeight);\n        vertical-align: top;\n      }\n      :host[appearance=neutral] {\n        color: var(--io_color);\n        background-color: transparent;\n      }\n      :host[appearance=inset] {\n        color: var(--io_colorInput);\n        background-color: var(--io_bgColorInput);\n        border-color: var(--io_borderColorInset);\n        padding-top: calc(var(--io_spacing) + 0.05em);\n        padding-bottom: calc(var(--io_spacing) - 0.05em);\n        box-shadow: var(--io_shadowInset);\n      }\n      :host[appearance=outset] {\n        border-color: var(--io_borderColorOutset);\n        background-image: var(--io_gradientOutset);\n        box-shadow: var(--io_shadowOutset);\n      }\n      :host.red,\n      :host[invalid] {\n        color: var(--io_colorWhite);\n        background-color: var(--io_bgColorRed);\n        border-color: var(--io_borderColorRed);\n      }\n      :host.green {\n        color: var(--io_colorWhite);\n        background-color: var(--io_bgColorGreen);\n        border-color: var(--io_borderColorGreen);\n      }\n      :host.blue,\n      :host[selected] {\n        color: var(--io_colorWhite);\n        background-color: var(--io_bgColorBlue);\n        border-color: var(--io_borderColorBlue);\n      }\n    `\n  }\n\n  @ReactiveProperty({value: ''})\n  declare value: any\n\n  @ReactiveProperty({type: String, value: ''})\n  declare icon: string\n\n  @ReactiveProperty({type: String, value: '', reflect: true})\n  declare label: string\n\n  @ReactiveProperty({value: false, type: Boolean, reflect: true})\n  declare selected: boolean\n\n  @ReactiveProperty({value: false, type: Boolean, reflect: true})\n  declare invalid: boolean\n\n  // TODO: remove\n  @ReactiveProperty({value: false, type: Boolean, reflect: true})\n  declare disabled: boolean\n\n  @ReactiveProperty({value: false, type: Boolean, reflect: true})\n  declare pressed: boolean\n\n  @ReactiveProperty({value: 'neutral', reflect: true})\n  declare appearance: 'neutral' | 'inset' | 'outset'\n\n  @ReactiveProperty({value: '', type: String, reflect: true})\n  declare pattern: string\n\n  @Property(false)\n  declare spellcheck: boolean\n\n  @Property(0)\n  declare tabIndex: number\n\n  static get Listeners(): ListenerDefinitions { // TODO: fix listener types\n    return {\n      'focus': 'onFocus',\n      'pointerdown': 'onPointerdown',\n      'touchstart': ['onTouchstart', {passive: false}] as ListenerDefinition,\n      'click': 'onClick',\n    }\n  }\n\n  constructor(args: IoFieldProps = {}) { super(args) }\n\n  onFocus(event: FocusEvent) {\n    this.addEventListener('blur', this.onBlur)\n    this.addEventListener('keydown', this.onKeydown)\n    this.addEventListener('keyup', this.onKeyup)\n  }\n  onBlur(event: FocusEvent) {\n    this.removeEventListener('blur', this.onBlur)\n    this.removeEventListener('keydown', this.onKeydown)\n    this.removeEventListener('keyup', this.onKeyup)\n  }\n  onPointerdown(event: PointerEvent) {\n    event.stopPropagation()\n    this.setPointerCapture(event.pointerId)\n    this.addEventListener('pointermove', this.onPointermove)\n    this.addEventListener('pointerleave', this.onPointerleave)\n    this.addEventListener('pointerup', this.onPointerup)\n    this.addEventListener('pointercancel', this.onPointercancel)\n    this.pressed = true\n  }\n  onPointermove(event: PointerEvent) {\n    event.stopPropagation()\n  }\n  onPointercancel(event: PointerEvent) {\n    event.stopPropagation()\n    this.releasePointerCapture(event.pointerId)\n    this.removeEventListener('pointermove', this.onPointermove)\n    this.removeEventListener('pointerleave', this.onPointerleave)\n    this.removeEventListener('pointerup', this.onPointerup)\n    this.removeEventListener('pointercancel', this.onPointercancel)\n    this.pressed = false\n  }\n  onPointerleave(event: PointerEvent) {\n    event.stopPropagation()\n    this.removeEventListener('pointermove', this.onPointermove)\n    this.removeEventListener('pointerleave', this.onPointerleave)\n    this.removeEventListener('pointerup', this.onPointerup)\n    this.removeEventListener('pointercancel', this.onPointercancel)\n    this.pressed = false\n  }\n  onPointerup(event: PointerEvent) {\n    event.stopPropagation()\n    this.releasePointerCapture(event.pointerId)\n    this.removeEventListener('pointermove', this.onPointermove)\n    this.removeEventListener('pointerleave', this.onPointerleave)\n    this.removeEventListener('pointerup', this.onPointerup)\n    this.removeEventListener('pointercancel', this.onPointercancel)\n    this.pressed = false\n  }\n  onTouchstart(event: TouchEvent) {\n    event.stopPropagation()\n    this.addEventListener('touchmove', this.onTouchmove, {passive: false})\n    this.addEventListener('touchend', this.onTouchend)\n    this.focus()\n  }\n  onTouchmove(event: TouchEvent) {\n    event.stopPropagation()\n  }\n  onTouchend(event: TouchEvent) {\n    event.stopPropagation()\n    this.removeEventListener('touchmove', this.onTouchmove)\n    this.removeEventListener('touchend', this.onTouchend)\n  }\n  inputValue(value: any) {\n    if (this.value !== value || typeof this.value === 'object') {\n      const oldValue = this.value\n      this.setProperty('value', value)\n      this.dispatch('value-input', {value: value, oldValue: oldValue}, false)\n    }\n  }\n  onClick(event?: MouseEvent) {\n  }\n  onKeydown(event: KeyboardEvent) {\n    switch (event.key) {\n      case 'Enter':\n      case ' ':\n        event.preventDefault()\n        this.onClick()\n        break\n      default:\n        if (['ArrowLeft', 'ArrowRight', 'ArrowUp', 'ArrowDown', 'Tab', 'Home', 'End', 'PageUp', 'PageDown'].includes(event.key)) {\n          event.preventDefault()\n          this.dispatch('io-focus-to', {source: this, command: event.key}, true)\n        }\n    }\n  }\n  onKeyup(event: KeyboardEvent) {}\n\n  getCaretPosition() {\n    let position = 0\n    const selection = window.getSelection()\n    if (selection && selection.rangeCount) {\n      const range = selection.getRangeAt(0)\n      const selected = range.toString().length\n      const preCaretRange = range.cloneRange()\n      preCaretRange.selectNodeContents(this as unknown as Node)\n      preCaretRange.setEnd(range.endContainer, range.endOffset)\n      position = preCaretRange.toString().length - selected\n    }\n    return position\n  }\n  setCaretPosition(position: number = 0){\n    const selection = window.getSelection()\n    // this.normalize(); // TODO: use normalize() instead?\n    this._flattenTextNode(this)\n    const textNode = this._textNode\n    if (selection) {\n      const range = document.createRange()\n      range.setStart(textNode, Math.max(0, Math.min(position, textNode.length)))\n      range.collapse(true)\n      selection.removeAllRanges()\n      selection.addRange(range)\n    }\n  }\n  selectAll() {\n    const selection = window.getSelection()\n    this._flattenTextNode(this)\n    const textNode = this._textNode\n    if (selection && textNode) {\n      const range = document.createRange()\n      range.selectNodeContents(textNode)\n      selection.removeAllRanges()\n      selection.addRange(range)\n    }\n  }\n  labelChanged() {\n    if (this.label) {\n      this.setAttribute('aria-label', this.label)\n    } else {\n      this.removeAttribute('aria-label')\n    }\n  }\n  selectedChanged() {\n    if (this.selected) {\n      this.setAttribute('aria-selected', 'true')\n    } else {\n      this.removeAttribute('aria-selected')\n    }\n  }\n  invalidChanged() {\n    if (this.invalid) {\n      this.setAttribute('aria-invalid', 'true')\n    } else {\n      this.removeAttribute('aria-invalid')\n    }\n  }\n  disabledChanged() {\n    this.inert = this.disabled\n    if (this.disabled) {\n      this.setAttribute('aria-disabled', 'true')\n    } else {\n      this.removeAttribute('aria-disabled')\n    }\n  }\n  changed() {\n    this.render([\n      this.icon ? ioIcon({value: this.icon}) : null,\n      this.label ? span(this.label) : null,\n      this.value !== undefined ? span(String(this.value)) : null,\n    ])\n  }\n\n}\n\nexport const ioField = function(arg0: IoFieldProps) {\n  return IoField.vConstructor(arg0)\n}"]}