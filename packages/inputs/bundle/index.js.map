{"version":3,"file":"index.js","sources":["../src/elements/IoField.ts","../src/elements/IoBoolean.ts","../src/elements/IoButton.ts","../src/elements/IoNumberLadderStep.ts","../src/elements/IoNumberLadderSingleton.ts","../src/elements/IoNumber.ts","../src/elements/IoString.ts","../src/elements/IoSwitch.ts"],"sourcesContent":["import { Register, ReactiveProperty, IoElement, IoElementProps, span, Property, WithBinding, ListenerDefinitions, ListenerDefinition } from '@io-gui/core'\nimport { ioIcon } from '@io-gui/icons'\n\nexport type IoFieldProps = IoElementProps & {\n  value?: WithBinding<any>\n  icon?: string\n  label?: string\n  selected?: boolean\n  disabled?: boolean\n  appearance?: 'neutral' | 'inset' | 'outset'\n  pattern?: string\n}\n\n@Register\nexport class IoField extends IoElement {\n  static get Style() {\n    return /* css */`\n      :host {\n        cursor: pointer;\n        height: var(--io_fieldHeight);\n        min-height: var(--io_fieldHeight);\n        line-height: var(--io_lineHeight);\n        border: var(--io_border);\n        border-color: transparent;\n        border-radius: var(--io_borderRadius);\n        padding: var(--io_spacing) calc(var(--io_spacing3) + var(--io_borderWidth));\n        color: var(--io_color);\n        overflow: hidden;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n        font-size: var(--io_fontSize);\n        text-size-adjust: 100%;\n        @apply --unselectable;\n      }\n      :host:focus {\n        text-overflow: inherit;\n        @apply --io_focus;\n      }\n      :host[hidden] {\n        display: none;\n      }\n      :host[disabled] {\n        opacity: 0.5;\n      }\n      :host[pressed] {\n        border-color: var(--io_borderColorInset) !important;\n        box-shadow: var(--io_shadowInset) !important;\n      }\n      :host span {\n        height: var(--io_lineHeight);\n        vertical-align: top;\n      }\n      :host[appearance=neutral] {\n        color: var(--io_color);\n        background-color: transparent;\n      }\n      :host[appearance=inset] {\n        color: var(--io_colorInput);\n        background-color: var(--io_bgColorInput);\n        border-color: var(--io_borderColorInset);\n        padding-top: calc(var(--io_spacing) + 0.05em);\n        padding-bottom: calc(var(--io_spacing) - 0.05em);\n        box-shadow: var(--io_shadowInset);\n      }\n      :host[appearance=outset] {\n        border-color: var(--io_borderColorOutset);\n        background-image: var(--io_gradientOutset);\n        box-shadow: var(--io_shadowOutset);\n      }\n      :host.red,\n      :host[invalid] {\n        color: var(--io_colorWhite);\n        background-color: var(--io_bgColorRed);\n        border-color: var(--io_borderColorRed);\n      }\n      :host.green {\n        color: var(--io_colorWhite);\n        background-color: var(--io_bgColorGreen);\n        border-color: var(--io_borderColorGreen);\n      }\n      :host.blue,\n      :host[selected] {\n        color: var(--io_colorWhite);\n        background-color: var(--io_bgColorBlue);\n        border-color: var(--io_borderColorBlue);\n      }\n    `\n  }\n\n  @ReactiveProperty({value: ''})\n  declare value: any\n\n  @ReactiveProperty({type: String, value: ''})\n  declare icon: string\n\n  @ReactiveProperty({type: String, value: '', reflect: true})\n  declare label: string\n\n  @ReactiveProperty({value: false, type: Boolean, reflect: true})\n  declare selected: boolean\n\n  @ReactiveProperty({value: false, type: Boolean, reflect: true})\n  declare invalid: boolean\n\n  // TODO: remove\n  @ReactiveProperty({value: false, type: Boolean, reflect: true})\n  declare disabled: boolean\n\n  @ReactiveProperty({value: false, type: Boolean, reflect: true})\n  declare pressed: boolean\n\n  @ReactiveProperty({value: 'neutral', reflect: true})\n  declare appearance: 'neutral' | 'inset' | 'outset'\n\n  @ReactiveProperty({value: '', type: String, reflect: true})\n  declare pattern: string\n\n  @Property(false)\n  declare spellcheck: boolean\n\n  @Property(0)\n  declare tabIndex: number\n\n  static get Listeners(): ListenerDefinitions { // TODO: fix listener types\n    return {\n      'focus': 'onFocus',\n      'pointerdown': 'onPointerdown',\n      'touchstart': ['onTouchstart', {passive: false}] as ListenerDefinition,\n      'click': 'onClick',\n    }\n  }\n\n  constructor(args: IoFieldProps = {}) { super(args) }\n\n  onFocus(event: FocusEvent) {\n    this.addEventListener('blur', this.onBlur)\n    this.addEventListener('keydown', this.onKeydown)\n    this.addEventListener('keyup', this.onKeyup)\n  }\n  onBlur(event: FocusEvent) {\n    this.removeEventListener('blur', this.onBlur)\n    this.removeEventListener('keydown', this.onKeydown)\n    this.removeEventListener('keyup', this.onKeyup)\n  }\n  onPointerdown(event: PointerEvent) {\n    event.stopPropagation()\n    this.setPointerCapture(event.pointerId)\n    this.addEventListener('pointermove', this.onPointermove)\n    this.addEventListener('pointerleave', this.onPointerleave)\n    this.addEventListener('pointerup', this.onPointerup)\n    this.addEventListener('pointercancel', this.onPointercancel)\n    this.pressed = true\n  }\n  onPointermove(event: PointerEvent) {\n    event.stopPropagation()\n  }\n  onPointercancel(event: PointerEvent) {\n    event.stopPropagation()\n    this.releasePointerCapture(event.pointerId)\n    this.removeEventListener('pointermove', this.onPointermove)\n    this.removeEventListener('pointerleave', this.onPointerleave)\n    this.removeEventListener('pointerup', this.onPointerup)\n    this.removeEventListener('pointercancel', this.onPointercancel)\n    this.pressed = false\n  }\n  onPointerleave(event: PointerEvent) {\n    event.stopPropagation()\n    this.removeEventListener('pointermove', this.onPointermove)\n    this.removeEventListener('pointerleave', this.onPointerleave)\n    this.removeEventListener('pointerup', this.onPointerup)\n    this.removeEventListener('pointercancel', this.onPointercancel)\n    this.pressed = false\n  }\n  onPointerup(event: PointerEvent) {\n    event.stopPropagation()\n    this.releasePointerCapture(event.pointerId)\n    this.removeEventListener('pointermove', this.onPointermove)\n    this.removeEventListener('pointerleave', this.onPointerleave)\n    this.removeEventListener('pointerup', this.onPointerup)\n    this.removeEventListener('pointercancel', this.onPointercancel)\n    this.pressed = false\n  }\n  onTouchstart(event: TouchEvent) {\n    event.stopPropagation()\n    this.addEventListener('touchmove', this.onTouchmove, {passive: false})\n    this.addEventListener('touchend', this.onTouchend)\n    this.focus()\n  }\n  onTouchmove(event: TouchEvent) {\n    event.stopPropagation()\n  }\n  onTouchend(event: TouchEvent) {\n    event.stopPropagation()\n    this.removeEventListener('touchmove', this.onTouchmove)\n    this.removeEventListener('touchend', this.onTouchend)\n  }\n  inputValue(value: any) {\n    if (this.value !== value || typeof this.value === 'object') {\n      const oldValue = this.value\n      this.setProperty('value', value)\n      this.dispatch('value-input', {value: value, oldValue: oldValue}, false)\n    }\n  }\n  onClick(event?: MouseEvent) {\n  }\n  onKeydown(event: KeyboardEvent) {\n    switch (event.key) {\n      case 'Enter':\n      case ' ':\n        event.preventDefault()\n        this.onClick()\n        break\n      default:\n        if (['ArrowLeft', 'ArrowRight', 'ArrowUp', 'ArrowDown', 'Tab', 'Home', 'End', 'PageUp', 'PageDown'].includes(event.key)) {\n          event.preventDefault()\n          this.dispatch('io-focus-to', {source: this, command: event.key}, true)\n        }\n    }\n  }\n  onKeyup(event: KeyboardEvent) {}\n\n  getCaretPosition() {\n    let position = 0\n    const selection = window.getSelection()\n    if (selection && selection.rangeCount) {\n      const range = selection.getRangeAt(0)\n      const selected = range.toString().length\n      const preCaretRange = range.cloneRange()\n      preCaretRange.selectNodeContents(this as unknown as Node)\n      preCaretRange.setEnd(range.endContainer, range.endOffset)\n      position = preCaretRange.toString().length - selected\n    }\n    return position\n  }\n  setCaretPosition(position: number = 0){\n    const selection = window.getSelection()\n    // this.normalize(); // TODO: use normalize() instead?\n    this._flattenTextNode(this)\n    const textNode = this._textNode\n    if (selection) {\n      const range = document.createRange()\n      range.setStart(textNode, Math.max(0, Math.min(position, textNode.length)))\n      range.collapse(true)\n      selection.removeAllRanges()\n      selection.addRange(range)\n    }\n  }\n  selectAll() {\n    const selection = window.getSelection()\n    this._flattenTextNode(this)\n    const textNode = this._textNode\n    if (selection && textNode) {\n      const range = document.createRange()\n      range.selectNodeContents(textNode)\n      selection.removeAllRanges()\n      selection.addRange(range)\n    }\n  }\n  labelChanged() {\n    if (this.label) {\n      this.setAttribute('aria-label', this.label)\n    } else {\n      this.removeAttribute('aria-label')\n    }\n  }\n  selectedChanged() {\n    if (this.selected) {\n      this.setAttribute('aria-selected', 'true')\n    } else {\n      this.removeAttribute('aria-selected')\n    }\n  }\n  invalidChanged() {\n    if (this.invalid) {\n      this.setAttribute('aria-invalid', 'true')\n    } else {\n      this.removeAttribute('aria-invalid')\n    }\n  }\n  disabledChanged() {\n    this.inert = this.disabled\n    if (this.disabled) {\n      this.setAttribute('aria-disabled', 'true')\n    } else {\n      this.removeAttribute('aria-disabled')\n    }\n  }\n  changed() {\n    this.render([\n      this.icon ? ioIcon({value: this.icon}) : null,\n      this.label ? span(this.label) : null,\n      this.value !== undefined ? span(String(this.value)) : null,\n    ])\n  }\n\n}\n\nexport const ioField = function(arg0: IoFieldProps) {\n  return IoField.vConstructor(arg0)\n}","import { Register, ReactiveProperty, span, WithBinding, Property } from '@io-gui/core'\nimport { ioIcon } from '@io-gui/icons'\nimport { IoField, IoFieldProps } from './IoField.js'\n\nexport type IoBooleanProps = IoFieldProps & {\n  value?: WithBinding<boolean>\n  true?: string\n  false?: string\n}\n\n/**\n * Input element for `Boolean` data type displayed as text.\n * It can be configured to display custom `true` or `false` strings.\n **/\n@Register\nexport class IoBoolean extends IoField {\n\n  static get Style() {\n    return /* css */`\n      :host {\n        padding: var(--io_spacing);\n      }\n    `\n  }\n\n  @ReactiveProperty({value: false, type: Boolean, reflect: true})\n  declare value: boolean\n\n  @ReactiveProperty({value: 'true', type: String})\n  declare true: string\n\n  @ReactiveProperty({value: 'false', type: String})\n  declare false: string\n\n  @Property('checkbox')\n  declare role: string\n\n  constructor(args: IoBooleanProps = {}) { super(args) }\n\n  onClick() {\n    this.toggle()\n    this.dispatch('io-boolean-clicked', {value: this.value}, true)\n  }\n  toggle() {\n    this.inputValue(!this.value)\n  }\n  ready() {\n    this.valueChanged()\n    this.changed()\n  }\n  valueChanged() {\n    this.invalid = typeof this.value !== 'boolean'\n    this.setAttribute('aria-checked', String(!!this.value))\n  }\n  changed() {\n    const value = this.value ? this.true : this.false\n    this.render([\n      this.icon ? ioIcon({value: this.icon}) : null,\n      this.label ? span(this.label + ':') : null,\n      value ? value.includes('io:') ? ioIcon({value: value}) : span(value) : null\n    ])\n  }\n}\nexport const ioBoolean = function(arg0?: IoBooleanProps) {\n  return IoBoolean.vConstructor(arg0)\n}\n","import { Register, ReactiveProperty, span, Property } from '@io-gui/core'\nimport { ioIcon } from '@io-gui/icons'\nimport { IoField, IoFieldProps } from './IoField.js'\n\nexport type IoButtonProps = IoFieldProps & {\n  action?: (value: any) => void\n}\n\n/**\n * Button element.\n * When clicked or activated by space/enter key, it calls the `action` property function with optional `value` argument.\n **/\n@Register\nexport class IoButton extends IoField {\n  static get Style() {\n    return /* css */`\n      :host {\n        text-align: center;\n        color: var(--io_colorStrong);\n      }\n      :host > io-icon {\n        margin-right: var(--io_spacing);\n      }\n      :host > span {\n        vertical-align: top;\n      }\n    `\n  }\n  @ReactiveProperty({value: undefined})\n  declare value: any\n\n  @ReactiveProperty()\n  declare action?: (value: any) => void\n\n  @ReactiveProperty({value: 'outset', type: String, reflect: true})\n  declare appearance: 'inset' | 'outset' | 'neutral'\n\n  @Property('button')\n  declare role: string\n\n  constructor(args: IoButtonProps = {}) { super(args) }\n\n  onPointerdown(event: PointerEvent) {\n    event.preventDefault()\n    super.onPointerdown(event)\n  }\n  onKeydown(event: KeyboardEvent) {\n    super.onKeydown(event)\n    if (event.key === 'Enter' || event.key === ' ') {\n      this.pressed = true\n    }\n  }\n  onKeyup(event: KeyboardEvent) {\n    super.onKeyup(event)\n    this.pressed = false\n  }\n  onClick(event: MouseEvent) {\n    if (typeof this.action === 'function') this.action(this.value)\n    this.dispatch('io-button-clicked', {value: this.value}, true)\n  }\n  ready() {\n    this.changed()\n  }\n  changed() {\n    this.setAttribute('aria-pressed', String(this.pressed))\n    this.render([\n      this.icon ? ioIcon({value: this.icon}) : null,\n      this.label ? span(this.label) : null\n    ])\n  }\n}\nexport const ioButton = function(arg0?: IoButtonProps) {\n  return IoButton.vConstructor(arg0)\n}","import { Register, ReactiveProperty, span, Property } from '@io-gui/core'\nimport { IoField, IoFieldProps } from './IoField.js'\n\nexport type IoNumberLadderStepProps = IoFieldProps & {\n  value: number\n  label: string\n}\n\n//TODO: Dont extend IoField.\n@Register\nexport class IoNumberLadderStep extends IoField {\n  static get Style() {\n    return /* css */`\n      :host {\n        pointer-events: all;\n        display: inline-block;\n        cursor: ew-resize;\n        text-align: center;\n        background-color: var(--io_bgColorStrong) !important;\n        color: var(--io_color);\n        align-self: stretch;\n        touch-action: none;\n        width: 6em;\n      }\n      :host:focus {\n        background-color: var(--io_bgColor) !important;\n      }\n      /* TODO: use icons */\n      :host:before {\n        float: left;\n        content: '<';\n        opacity: 0.25;\n      }\n      :host:after {\n        float: right;\n        content: '>';\n        opacity: 0.25;\n      }\n    `\n  }\n\n  @ReactiveProperty({value: 1, type: Number})\n  declare value: number\n\n  @ReactiveProperty({value: '', type: String})\n  declare label: string\n\n  @Property('spinbutton')\n  declare role: string\n\n  declare private startX: number\n\n  constructor(args: IoNumberLadderStepProps) { super(args) }\n\n  onKeydown(event: KeyboardEvent) {\n    // TODO: fix ladder focus handling. Wrap around.\n    let stepMove = 0\n    switch (event.key) {\n      case 'Enter':\n      case 'Escape':\n      case ' ':\n        this.dispatch('ladder-step-collapse', {}, true)\n        break\n      case 'ArrowLeft':\n      case 'Backspace':\n        event.preventDefault()\n        stepMove = this.value * -1\n        break\n      case 'ArrowUp':\n        event.preventDefault()\n        this.dispatch('io-focus-to', {source: this, command: event.key}, true)\n        break\n      case 'ArrowRight':\n        event.preventDefault()\n        stepMove = this.value * 1\n        break\n      case 'ArrowDown':\n        event.preventDefault()\n        this.dispatch('io-focus-to', {source: this, command: event.key}, true)\n        break\n    }\n    if (stepMove !== 0) {\n      this.dispatch('ladder-step-change', {step: Number(stepMove.toFixed(5)), round: event.shiftKey}, true)\n    }\n  }\n  onPointerdown(event: PointerEvent) {\n    this.setPointerCapture(event.pointerId)\n    this.addEventListener('pointermove', this.onPointermove)\n    this.addEventListener('pointerup', this.onPointerup)\n    this.startX = event.clientX\n  }\n  onPointermove(event: PointerEvent) {\n    const deltaX = event.clientX - this.startX\n    if (Math.abs(deltaX) > 5) {\n      const expMove = Math.pow(deltaX / 5, 2) * deltaX < 0 ? -1: 1\n      const roundMove = deltaX > 0 ? Math.floor(expMove) : Math.ceil(expMove)\n      const stepMove = this.value * roundMove\n      this.startX = event.clientX\n      this.dispatch('ladder-step-change', {step: Number(stepMove.toFixed(5)), round: event.shiftKey}, true)\n    }\n  }\n  onPointerup(event: PointerEvent) {\n    this.releasePointerCapture(event.pointerId)\n    this.removeEventListener('pointermove', this.onPointermove)\n    this.removeEventListener('pointerup', this.onPointerup)\n    this.dispatch('ladder-step-collapse', {}, true)\n  }\n  ready() {\n    this.changed()\n  }\n  changed() {\n    this.render([span(this.label)])\n    this.setAttribute('aria-label', this.label)\n    this.setAttribute('aria-valuestep', this.label)\n  }\n}\nexport const ioNumberLadderStep = function(arg0?: IoNumberLadderStepProps) {\n  return IoNumberLadderStep.vConstructor(arg0)\n}","import { Register, ReactiveProperty, IoElement, IoElementProps, IoOverlaySingleton, ThemeSingleton, span, WithBinding, Property } from '@io-gui/core'\nimport { IoNumber } from './IoNumber.js'\nimport { ioNumberLadderStep } from './IoNumberLadderStep.js'\n\nexport type IoNumberLadderProps = IoElementProps & {\n  src?: IoNumber\n  expanded?: WithBinding<boolean>\n}\n\n/**\n * Interactive number ladder.\n * When dragged horizontally, it changes the value in step increments.\n * Dragging speed affects the rate of change exponentially.\n * Up/down arrow keys change the step focus while left/right change the value in step increments.\n * Escape key collapses the ladder and restores the focus to previously focused element.\n * If shift key is pressed, value is rounded to the nearest step incement.\n **/\n@Register\nclass IoNumberLadder extends IoElement {\n  static get Style() {\n    return /* css */`\n      :host {\n        display: flex;\n        flex-direction: column;\n        position: absolute;\n        pointer-events: none;\n        box-shadow: unset;\n        @apply --unselectable;\n      }\n      :host:not([expanded]) {\n        visibility: hidden;\n      }\n      :host > io-number-ladder-step {\n        box-shadow: var(--io_shadow);\n      }\n      :host > .io-up1,\n      :host > .io-up2,\n      :host > .io-up3,\n      :host > .io-up4 {\n        margin-bottom: var(--io_borderWidth);\n        box-shadow: 0px -2px 6px var(--io_shadowColor), 0 -1px 3px var(--io_shadowColor);\n      }\n      :host > .io-down1,\n      :host > .io-down2,\n      :host > .io-down3,\n      :host > .io-down4 {\n        margin-top: var(--io_borderWidth);\n        box-shadow: 0px 2px 6px var(--io_shadowColor), 0 1px 3px var(--io_shadowColor);\n      }\n      :host > .io-up1,\n      :host > .io-down1{\n        z-index: 4;\n      }\n      :host > .io-up2,\n      :host > .io-down2 {\n        z-index: 3;\n      }\n      :host > .io-up3,\n      :host > .io-down3 {\n        z-index: 2;\n      }\n      :host > .io-up4,\n      :host > .io-down4 {\n        z-index: 1;\n      }\n      :host > io-number-ladder-step:focus {\n        background-color: var(--io_bgColorStrong);\n        border-color: var(--io_colorBlue);\n      }\n      :host > .io-number-ladder-empty {\n        height: var(--io_fieldHeight);\n      }\n      :host > .io-number-ladder-center {\n        height: calc(1.5 * var(--io_fieldHeight));\n      }\n    `\n  }\n  // TODO: rename\n  @ReactiveProperty({value: undefined, type: IoElement, init: null})\n  declare src?: IoNumber\n\n  @ReactiveProperty({value: false, type: Boolean, reflect: true})\n  declare expanded: boolean\n\n  @Property('listbox')\n  declare role: string\n\n  static get Listeners() {\n    return {\n      'ladder-step-change': '_onLadderStepChange',\n      'ladder-step-collapse': 'onLadderStepCollapse',\n      'io-focus-to': 'onIoFocusTo',\n    }\n  }\n  get value() {\n    return this.src ? this.src.value : 0\n  }\n  get min() {\n    return this.src ? this.src.min : -Infinity\n  }\n  get max() {\n    return this.src ? this.src.max : Infinity\n  }\n  get step() {\n    return this.src ? this.src.step : 0.0001\n  }\n  get conversion() {\n    return this.src ? this.src.conversion : 1\n  }\n\n  constructor(args: IoNumberLadderProps = {}) { super(args) }\n\n  onIoFocusTo(event: CustomEvent) {\n    const source = event.detail.source\n    const command = event.detail.command\n    if (this.src) {\n      if ((command === 'ArrowDown' && source === this.querySelector('.io-up1')) ||\n          (command === 'ArrowUp' && source === this.querySelector('.io-down1'))) {\n        event.stopPropagation()\n        this.src.focus()\n        this.src.setCaretPosition(this.src.textNode!.length)\n      }\n    }\n  }\n  _onLadderStepChange(event: CustomEvent) {\n    const src = this.src\n    if (src) {\n      const step = event.detail.step\n      const value = event.detail.round ? (Math.round(this.value / step) * step) : this.value\n      let newValue = Math.min(this.max, Math.max(this.min, value + step))\n      newValue = Number(newValue.toFixed(5))\n      src.inputValue(newValue)\n    }\n  }\n  onLadderStepCollapse() {\n    this.setProperty('expanded', false)\n  }\n  expandedChanged() {\n    if (this.expanded) {\n      if (this.src) {\n        const rect = this.src.getBoundingClientRect()\n        const selfRect = this.getBoundingClientRect()\n        // NOTE: layerRect fix for Safari zoom.\n        const layerRect = IoOverlaySingleton.getBoundingClientRect()\n        this.style.top = rect.bottom - layerRect.top + 'px'\n        this.style.left = rect.left - layerRect.left + 'px'\n        this.style.marginTop = - (selfRect.height / 2 + ThemeSingleton.lineHeight / 2 + ThemeSingleton.spacing) + 'px'\n      }\n    } else {\n      setTimeout(() => {\n        this.src?.setCaretPosition(this.src.textNode!.length)\n      })\n      this.removeAttribute('style')\n    }\n    this.dispatch('expanded', {value: this.expanded}, true)\n  }\n  changed() {\n    const range = this.max - this.min\n    const hiddenItem = span({class: 'io-number-ladder-empty'})\n\n    // TODO: unhack\n    let step = this.step / 10000\n    while (step < .1) step = step * 10\n\n    const upStep4 = 10000 * step\n    const upStep3 = 1000 * step\n    const upStep2 = 100 * step\n    const upStep1 = 10 * step\n    const downStep1 = 1 * step\n    const downStep2 = .1 * step\n    const downStep3 = .01 * step\n    const downStep4 = .001 * step\n\n    const upLabel4 = Number((upStep4 * this.conversion).toFixed(6))\n    const upLabel3 = Number((upStep3 * this.conversion).toFixed(6))\n    const upLabel2 = Number((upStep2 * this.conversion).toFixed(6))\n    const upLabel1 = Number((upStep1 * this.conversion).toFixed(6))\n    const downLabel1 = Number((downStep1 * this.conversion).toFixed(6))\n    const downLabel2 = Number((downStep2 * this.conversion).toFixed(6))\n    const downLabel3 = Number((downStep3 * this.conversion).toFixed(6))\n    const downLabel4 = Number((downStep4 * this.conversion).toFixed(6))\n\n    this.render([\n      (range >= upStep4) ? ioNumberLadderStep({class: 'io-up4', value: upStep4, label: String(upLabel4)}) : hiddenItem,\n      (range >= upStep3) ? ioNumberLadderStep({class: 'io-up3', value: upStep3, label: String(upLabel3)}) : hiddenItem,\n      (range >= upStep2) ? ioNumberLadderStep({class: 'io-up2', value: upStep2, label: String(upLabel2)}) : hiddenItem,\n      (range >= upStep1) ? ioNumberLadderStep({class: 'io-up1', value: upStep1, label: String(upLabel1)}) : hiddenItem,\n      span({class: 'io-number-ladder-center'}),\n      (this.step <= downStep1) ? ioNumberLadderStep({class: 'io-down1', value: downStep1, label: String(downLabel1)}) : hiddenItem,\n      (this.step <= downStep2) ? ioNumberLadderStep({class: 'io-down2', value: downStep2, label: String(downLabel2)}) : hiddenItem,\n      (this.step <= downStep3) ? ioNumberLadderStep({class: 'io-down3', value: downStep3, label: String(downLabel3)}) : hiddenItem,\n      (this.step <= downStep4) ? ioNumberLadderStep({class: 'io-down4', value: downStep4, label: String(downLabel4)}) : hiddenItem,\n    ])\n\n    this.setAttribute('aria-valuemin', this.min)\n    this.setAttribute('aria-valuemax', this.max)\n    this.setAttribute('aria-valuenow', this.value)\n    this.setAttribute('aria-valuestep', this.step)\n    this.setAttribute('aria-invalid', (typeof this.value !== 'number' || isNaN(this.value))  ? 'true' : false)\n\n    const steps = this.querySelectorAll('io-number-ladder-step')\n    for (let i = steps.length; i--;) {\n      steps[i].setAttribute('aria-valuemin', String(this.min))\n      steps[i].setAttribute('aria-valuemax', String(this.max))\n      steps[i].setAttribute('aria-valuenow', String(this.value));\n      (steps[i] as any).changed()\n    }\n  }\n}\n\nexport const IoNumberLadderSingleton = new IoNumberLadder()\nsetTimeout(() => {\n  IoOverlaySingleton.appendChild(IoNumberLadderSingleton as HTMLElement)\n}, 100)\n","import { Register, ReactiveProperty, WithBinding, Property } from '@io-gui/core'\nimport { IoNumberLadderSingleton } from './IoNumberLadderSingleton.js'\nimport { IoField, IoFieldProps } from './IoField.js'\n\nexport type IoNumberProps = IoFieldProps & {\n  value?: WithBinding<number>\n  live?: boolean\n  conversion?: number\n  step?: number\n  min?: number\n  max?: number\n  ladder?: boolean\n}\n\n/**\n * Input element for `Number` data type.\n * It clamps the `value` to `min` / `max` and rounds it to the nearest `step` increment.\n * If `ladder` property is enabled, it displays an interactive float ladder element when clicked/taped.\n * Alternatively, ladder can be expanded by middle click or ctrl key regardless of ladder property.\n **/\n@Register\nexport class IoNumber extends IoField {\n  static get Style() {\n    return /* css */`\n      :host {\n        cursor: text;\n        user-select: text;\n        -webkit-user-select: text;\n        -webkit-touch-callout: default;\n        font-family: monospace;\n      }\n      :host[placeholder]:empty:before {\n        content: attr(placeholder);\n        visibility: visible;\n        color: var(--io_colorInput);\n        padding: 0 calc(var(--io_spacing) + var(--io_borderWidth));\n        opacity: 0.5;\n      }\n    `\n  }\n\n  @ReactiveProperty({value: 0, type: Number})\n  declare value: number\n\n  @ReactiveProperty({value: false, type: Boolean})\n  declare live: boolean\n\n  @ReactiveProperty({value: 1, type: Number})\n  declare conversion: number\n\n  @ReactiveProperty({value: 0.0001, type: Number})\n  declare step: number\n\n  @ReactiveProperty({value: -Infinity, type: Number})\n  declare min: number\n\n  @ReactiveProperty({value: Infinity, type: Number})\n  declare max: number\n\n  @ReactiveProperty({value: false, type: Boolean})\n  declare ladder: boolean\n\n  @ReactiveProperty({value: 'inset', type: String, reflect: true})\n  declare appearance: 'neutral' | 'inset' | 'outset'\n\n  @Property('true')\n  declare contentEditable: string\n\n  @ReactiveProperty({value: 'pattern=\"-?[0-9]*?[0-9]*\"', type: String, reflect: true})\n  declare pattern: string\n\n  // TODO: 'decimal' mode on iOS does not display minus and decimal point\n  @Property('text')\n  declare inputMode: string\n\n  @Property('textbox')\n  declare role: string\n\n  constructor(args: IoNumberProps = {}) { super(args) }\n\n  get textNode() {\n    this._flattenTextNode(this)\n    return this._textNode.nodeValue\n  }\n  set textNode(value) {\n    this._flattenTextNode(this)\n    this._textNode.nodeValue = String(value)\n  }\n\n  onBlur(event: FocusEvent) {\n    super.onBlur(event)\n    this._setFromTextNode()\n    this.scrollTop = 0\n    this.scrollLeft = 0\n    // TODO: unhack race condition\n    setTimeout(() => {\n      if ((document.activeElement as Element).parentElement !== IoNumberLadderSingleton as unknown as Element) {\n        IoNumberLadderSingleton.expanded = false\n      }\n    })\n  }\n  onPointerdown(event: PointerEvent) {\n    if (event.pointerType === 'touch') event.preventDefault()\n    this.addEventListener('pointermove', this.onPointermove)\n    this.addEventListener('pointerup', this.onPointerup)\n    if (document.activeElement === this as unknown as Element && event.button === 0) return\n  }\n  onPointerup(event: PointerEvent) {\n    this.removeEventListener('pointermove', this.onPointermove)\n    this.removeEventListener('pointerup', this.onPointerup)\n    if (this.ladder || event.button === 1) {\n      if (event.pointerType === 'touch') {\n        event.preventDefault();\n        (document.activeElement as HTMLElement).blur()\n      } else {\n        if (document.activeElement !== this as unknown as Element) {\n          this.focus()\n          this.setCaretPosition(this.textNode!.length)\n        }\n      }\n      this.expandLadder()\n    } else {\n      if (document.activeElement !== this as unknown as Element) {\n        this.focus()\n        this.setCaretPosition(this.textNode!.length)\n      }\n    }\n  }\n  expandLadder() {\n    IoNumberLadderSingleton.src = this\n    IoNumberLadderSingleton.expanded = true\n  }\n  collapseLadder() {\n    IoNumberLadderSingleton.expanded = false\n  }\n  onKeydown(event: KeyboardEvent) {\n    const range = (window.getSelection() as Selection).getRangeAt(0)\n    const rangeStart = range.startOffset\n    const rangeEnd = range.endOffset\n    const length = this.childNodes[0] ? (this.childNodes[0] as Text).length : 0\n    const rangeInside = range.startContainer === range.endContainer && (range.startContainer === this.childNodes[0] || range.startContainer === this as unknown as Node)\n\n    switch (event.key) {\n      case 'Escape':\n      case 'Enter':\n      case ' ':\n        event.preventDefault()\n        this._setFromTextNode()\n        // Only blur if on mobile\n        if (isMobileDevice()) {\n          (this as unknown as HTMLElement).blur()\n        }\n        break\n      case 'Home':\n        event.preventDefault()\n        this.textNode = String(this.min)\n        this._setFromTextNode()\n        break\n      case 'End':\n        event.preventDefault()\n        this.textNode = String(this.max)\n        this._setFromTextNode()\n        break\n      case 'ArrowLeft':\n        if (event.ctrlKey || (rangeInside && rangeStart === rangeEnd && rangeStart === 0)) {\n          event.preventDefault()\n          this.dispatch('io-focus-to', {source: this, command: event.key}, true)\n        }\n        // TODO: shift step\n        break\n      case 'ArrowUp':\n        if (IoNumberLadderSingleton.expanded) {\n          event.preventDefault()\n          const upStep = IoNumberLadderSingleton.querySelector('.io-up1') as HTMLElement\n          if (upStep) upStep.focus()\n        } else if (event.ctrlKey || (rangeInside && rangeStart === rangeEnd && rangeStart === 0)) {\n          event.preventDefault()\n          this.dispatch('io-focus-to', {source: this, command: event.key}, true)\n        }\n        break\n      case 'ArrowRight':\n        if (event.ctrlKey || (rangeInside && rangeStart === rangeEnd && rangeStart === length)) {\n          event.preventDefault()\n          this.dispatch('io-focus-to', {source: this, command: event.key}, true)\n        }\n        // TODO: shift step\n        break\n      case 'ArrowDown':\n        if (IoNumberLadderSingleton.expanded) {\n          event.preventDefault()\n          const downStep = IoNumberLadderSingleton.querySelector('.io-down1') as HTMLElement\n          if (downStep) downStep.focus()\n        } else if (event.ctrlKey || (rangeInside && rangeStart === rangeEnd && rangeStart === length)) {\n          event.preventDefault()\n          this.dispatch('io-focus-to', {source: this, command: event.key}, true)\n        }\n        break\n    }\n  }\n  onKeyup(event: KeyboardEvent) {\n    // TODO: move to onkeydown?\n    if (event.key === 'Control' || event.key === 'Shift') {\n      IoNumberLadderSingleton.expanded ? this.collapseLadder() : this.expandLadder()\n    } else if (event.key === 'Escape' || event.key === 'Enter' || event.key === ' ') {\n      this.collapseLadder()\n    }\n\n    if (this.live) {\n      const carretPosition = this.getCaretPosition()\n      this._setFromTextNode()\n      this.setCaretPosition(carretPosition)\n    }\n  }\n  _setFromTextNode() {\n    // Normalize comma to period for decimal separator\n    const valueText = this.textNode!.trim().replace(',', '.')\n    let valueNumber = Number(valueText) / this.conversion\n    valueNumber = Math.min(this.max, Math.max(this.min, valueNumber))\n    valueNumber = Math.round(valueNumber / this.step) * this.step\n    const d = Math.max(0, Math.min(100, -Math.floor(Math.log(this.step) / Math.LN10)))\n    valueNumber = Number(valueNumber.toFixed(d))\n    if (!isNaN(valueNumber)) {\n      this._reactiveProperties.get('invalid')!.value = false\n      this.removeAttribute('invalid')\n      this.removeAttribute('aria-invalid')\n      this.inputValue(valueNumber)\n    } else {\n      this._reactiveProperties.get('invalid')!.value = true\n      this.setAttribute('invalid', 'true')\n      this.setAttribute('aria-invalid', 'true')\n    }\n  }\n  ready() {\n    this.disabledChanged()\n    this.changed()\n  }\n  changed() {\n    this.setAttribute('aria-valuenow', this.value)\n    this.setAttribute('aria-valuemin', this.min)\n    this.setAttribute('aria-valuemax', this.max)\n    this.setAttribute('aria-valuestep', this.step)\n    if (typeof this.value !== 'number' || isNaN(this.value)) {\n      this.setAttribute('invalid', 'true')\n      this.setAttribute('aria-invalid', 'true')\n    } else {\n      this.removeAttribute('invalid')\n      this.removeAttribute('aria-invalid')\n    }\n    let value = this.value\n    let valueText\n    if (typeof value === 'number' && !isNaN(value)) {\n      value *= this.conversion\n      let d = -Math.floor(Math.log(this.step * this.conversion) / Math.LN10)\n      d = Math.max(0, Math.min(100, d))\n      value = Number(value.toFixed(d))\n      valueText = String(value)\n    } else {\n      valueText = 'NaN'\n    }\n    this.setAttribute('value', valueText)\n    this.setAttribute('positive', this.value >= 0)\n    this.textNode = valueText\n  }\n}\n\nfunction isMobileDevice(): boolean {\n  return /Mobi|Android|iPhone|iPad|iPod|Opera Mini|IEMobile|Mobile/i.test(navigator.userAgent)\n    || ('ontouchstart' in window && !window.matchMedia('(pointer: fine)').matches)\n}\n\nexport const ioNumber = function(arg0?: IoNumberProps) {\n  return IoNumber.vConstructor(arg0)\n}","import { Register, ReactiveProperty, Property, WithBinding } from '@io-gui/core'\nimport { IoField, IoFieldProps } from './IoField.js'\n\nexport type IoStringProps = IoFieldProps & {\n  value?: WithBinding<string>\n  live?: boolean\n  placeholder?: string\n  appearance?: 'neutral' | 'inset' | 'outset'\n}\n\n/**\n * Input element for `String` data type.\n **/\n@Register\nexport class IoString extends IoField {\n  static get Style() {\n    return /* css */`\n      :host {\n        cursor: text;\n        user-select: text;\n        -webkit-user-select: text;\n        -webkit-touch-callout: default;\n      }\n      :host[placeholder]:empty:before {\n        content: attr(placeholder);\n        visibility: visible;\n        color: var(--io_colorInput);\n        padding: 0 calc(var(--io_spacing) + var(--io_borderWidth));\n        opacity: 0.5;\n      }\n    `\n  }\n  @ReactiveProperty({value: '', type: String})\n  declare value: string\n\n  @ReactiveProperty({value: false, type: Boolean})\n  declare live: boolean\n\n  @ReactiveProperty({value: '', type: String, reflect: true})\n  declare placeholder: string\n\n  @ReactiveProperty({value: 'inset', reflect: true})\n  declare appearance: 'neutral' | 'inset' | 'outset'\n\n  @Property('true')\n  declare contentEditable: string\n\n  @Property('textbox')\n  declare role: string\n\n  constructor(args: IoStringProps = {}) { super(args) }\n\n  get textNode() {\n    this._flattenTextNode(this)\n    return this._textNode.nodeValue\n  }\n  set textNode(value) {\n    this._flattenTextNode(this)\n    this._textNode.nodeValue = String(value)\n  }\n\n  _setFromTextNode() {\n    const textNode = this.textNode\n    if (typeof this.value === 'string' && textNode !== String(this.value)) {\n      this.inputValue(textNode)\n    }\n  }\n  // TODO: reconsider this feature\n  _setObjectFromTextNodeJSON() {\n    const textNode = this.textNode!\n    try {\n      const value = JSON.parse(textNode.replace(/[\\t\\n\\r ]+/g, ' '))\n      this.inputValue(value)\n    } catch (error) {\n      console.warn('IoString: Cannot parse value', textNode)\n      console.error(error)\n      this._setFromTextNode()\n    }\n  }\n  onBlur(event: FocusEvent) {\n    super.onBlur(event)\n    this._setFromTextNode()\n    this.scrollTop = 0\n    this.scrollLeft = 0\n  }\n  onPointerup(event: PointerEvent) {\n    super.onPointerup(event)\n    if (document.activeElement !== this as unknown as Element) {\n      this.focus()\n      this.setCaretPosition(this.textNode!.length)\n    }\n  }\n  onKeydown(event: KeyboardEvent) {\n    const range = (window.getSelection() as Selection).getRangeAt(0)\n    const rangeStart = range.startOffset\n    const rangeEnd = range.endOffset\n    const length = this.childNodes[0] ? (this.childNodes[0] as Text).length : 0\n    const rangeInside = range.startContainer === range.endContainer && (range.startContainer === this.childNodes[0] || range.startContainer === this as unknown as Node)\n\n    switch (event.key) {\n      case 'Enter':\n        event.preventDefault()\n        if (event.shiftKey) {\n          // TODO: reconsider this feature\n          this._setObjectFromTextNodeJSON()\n        } else {\n          this._setFromTextNode()\n        }\n        break\n      case 'ArrowLeft':\n        if (event.ctrlKey || (rangeInside && rangeStart === rangeEnd && rangeStart === 0)) {\n          event.preventDefault()\n          this.dispatch('io-focus-to', {source: this, command: 'ArrowLeft'}, true)\n        }\n        break\n      case 'ArrowUp':\n        if (event.ctrlKey || (rangeInside && rangeStart === rangeEnd && rangeStart === 0)) {\n          event.preventDefault()\n          this.dispatch('io-focus-to', {source: this, command: 'ArrowUp'}, true)\n        }\n        break\n      case 'ArrowRight':\n        if (event.ctrlKey || (rangeInside && rangeStart === rangeEnd && rangeStart === length)) {\n          event.preventDefault()\n          this.dispatch('io-focus-to', {source: this, command: 'ArrowRight'}, true)\n        }\n        break\n      case 'ArrowDown':\n        if (event.ctrlKey || (rangeInside && rangeStart === rangeEnd && rangeStart === length)) {\n          event.preventDefault()\n          this.dispatch('io-focus-to', {source: this, command: 'ArrowDown'}, true)\n        }\n        break\n      default:\n        if (['Tab', 'Home', 'End', 'PageUp', 'PageDown'].includes(event.key)) {\n          event.preventDefault()\n          this.dispatch('io-focus-to', {source: this, command: event.key}, true)\n        }\n    }\n  }\n  onKeyup(event: KeyboardEvent) {\n    super.onKeyup(event)\n    if (this.live) {\n      const carretPosition = this.getCaretPosition()\n      this._setFromTextNode()\n      this.setCaretPosition(carretPosition)\n    }\n  }\n  ready() {\n    this.disabledChanged()\n  }\n  valueChanged() {\n    this.invalid = (typeof this.value !== 'string' && this.value !== null && this.value !== undefined)\n  }\n  changed() {\n    this.textNode = String(this.value || '')\n  }\n}\nexport const ioString = function(arg0?: IoStringProps) {\n  return IoString.vConstructor(arg0)\n}\n","import { span, Register } from '@io-gui/core'\nimport { ioIcon } from '@io-gui/icons'\nimport { IoBoolean } from './IoBoolean.js'\n\n/**\n * Input element for `Boolean` data type displayed as switch.\n **/\n@Register\nexport class IoSwitch extends IoBoolean {\n  static get Style() {\n    return /* css */`\n      :host {\n        display: flex;\n        position: relative;\n        overflow: visible;\n        padding: var(--io_spacing) var(--io_spacing);\n      }\n      :host:focus {\n        outline: 0 !important;\n        border-color: transparent !important;\n        z-index: 1;\n      }\n      :host:focus > span:before {\n        @apply --io_focus;\n      }\n      :host[pressed] {\n        border-color: transparent !important;\n        box-shadow: none !important;\n      }\n      :host > span {\n        position: relative;\n        width: calc(1.5 * var(--io_fieldHeight));\n      }\n      :host > span:before {\n        content: '';\n        box-sizing: border-box;\n        position: absolute;\n        visibility: visible;\n        left: 0;\n        width: 100%;\n        height: var(--io_lineHeight);\n        border-radius: var(--io_lineHeight);\n        border: var(--io_border);\n        border-color: var(--io_borderColorInset);\n        background-color: var(--io_bgColorInput);\n        box-shadow: var(--io_shadowInset);\n        transition: background-color 0.4s;\n      }\n      :host > span:after {\n        content: '';\n        box-sizing: border-box;\n        position: absolute;\n        visibility: visible;\n        top: var(--io_borderWidth);\n        left: var(--io_borderWidth);\n        height: calc(var(--io_lineHeight) - calc(2 * var(--io_borderWidth)));\n        width: calc(var(--io_lineHeight) - calc(2 * var(--io_borderWidth)));\n        background-color: var(--io_bgColorLight);\n        box-shadow: var(--io_shadowOutset);\n        border: var(--io_border);\n        border-color: var(--io_borderColorOutset);\n        border-radius: var(--io_lineHeight);\n        transition-timing-function: ease-in-out;\n        transition: left 0.25s;\n        z-index: 2;\n      }\n      :host[value] > span:after {\n        background-color: var(--io_bgColorBlue);\n        left: calc(100% - calc(var(--io_lineHeight) - var(--io_borderWidth)));\n      }\n    `\n  }\n  changed() {\n    this.render([\n      this.icon ? ioIcon({value: this.icon}) : null,\n      span()\n    ])\n  }\n}\nexport const ioSwitch = function(arg0?: any) {\n  return IoSwitch.vConstructor(arg0)\n}"],"names":["IoField","IoElement","Style","Listeners","focus","pointerdown","touchstart","passive","click","constructor","args","super","onFocus","event","this","addEventListener","onBlur","onKeydown","onKeyup","removeEventListener","onPointerdown","stopPropagation","setPointerCapture","pointerId","onPointermove","onPointerleave","onPointerup","onPointercancel","pressed","releasePointerCapture","onTouchstart","onTouchmove","onTouchend","inputValue","value","oldValue","setProperty","dispatch","onClick","key","preventDefault","includes","source","command","getCaretPosition","position","selection","window","getSelection","rangeCount","range","getRangeAt","selected","toString","length","preCaretRange","cloneRange","selectNodeContents","setEnd","endContainer","endOffset","setCaretPosition","_flattenTextNode","textNode","_textNode","document","createRange","setStart","Math","max","min","collapse","removeAllRanges","addRange","selectAll","labelChanged","label","setAttribute","removeAttribute","selectedChanged","invalidChanged","invalid","disabledChanged","inert","disabled","changed","render","icon","ioIcon","span","String","__decorateClass","ReactiveProperty","prototype","type","reflect","Boolean","Property","Register","ioField","arg0","vConstructor","IoBoolean","toggle","ready","valueChanged","true","false","ioBoolean","IoButton","action","ioButton","IoNumberLadderStep","stepMove","step","Number","toFixed","round","shiftKey","startX","clientX","deltaX","abs","expMove","pow","roundMove","floor","ceil","ioNumberLadderStep","IoNumberLadder","src","Infinity","conversion","onIoFocusTo","detail","querySelector","_onLadderStepChange","newValue","onLadderStepCollapse","expandedChanged","expanded","rect","getBoundingClientRect","selfRect","layerRect","IoOverlaySingleton","style","top","bottom","left","marginTop","height","ThemeSingleton","lineHeight","spacing","setTimeout","hiddenItem","class","upStep4","upStep3","upStep2","upStep1","downStep1","downStep2","downStep3","downStep4","upLabel4","upLabel3","upLabel2","upLabel1","downLabel1","downLabel2","downLabel3","downLabel4","isNaN","steps","querySelectorAll","i","init","IoNumberLadderSingleton","appendChild","IoNumber","nodeValue","_setFromTextNode","scrollTop","scrollLeft","activeElement","parentElement","pointerType","button","ladder","blur","expandLadder","collapseLadder","rangeStart","startOffset","rangeEnd","childNodes","rangeInside","startContainer","test","navigator","userAgent","matchMedia","matches","ctrlKey","upStep","downStep","live","carretPosition","valueText","trim","replace","valueNumber","d","log","LN10","_reactiveProperties","get","ioNumber","IoString","_setObjectFromTextNodeJSON","JSON","parse","error","console","warn","ioString","IoSwitch","ioSwitch"],"mappings":"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"}