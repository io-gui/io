{"version":3,"file":"io-matrix.js","sourceRoot":"","sources":["../src/io-matrix.ts"],"names":[],"mappings":"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","sourcesContent":["import { Register, Property } from 'io-gui';\nimport { IoVector } from './io-vector.js';\n/**\n * Input element for vector arrays dispalayed as 2D matrices. Array `value` can have 4, 9, and 16 elements for 2x2, 3x3 and 4x4 matrices.\n *\n * <io-element-demo element=\"io-matrix\" properties='{\"value\": [1, 0, 0, 1]}'></io-element-demo>\n *\n * <io-element-demo element=\"io-matrix\" properties='{\"value\": [1, 0, 0, 0, 1, 0, 0, 0, 1]}'></io-element-demo>\n *\n * <io-element-demo element=\"io-matrix\" properties='{\"value\": [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1]}'></io-element-demo>\n **/\n@Register\nexport class IoMatrix extends IoVector {\n  static get Style() {\n    return /* css */`\n      :host {\n        display: grid;\n        align-self: stretch;\n        justify-self: stretch;\n        grid-gap: var(--io_spacing);\n      }\n      :host > *:not(:last-child) {\n        margin-right: 0;\n      }\n      :host[columns=\"4\"] {\n        grid-template-columns: repeat(4, 1fr);\n      }\n      :host[columns=\"3\"] {\n        grid-template-columns: repeat(3, 1fr);\n      }\n      :host[columns=\"2\"] {\n        grid-template-columns: repeat(2, 1fr);\n      }\n    `;\n  }\n\n  @Property({type: Array, init: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]})\n  declare value: number[];\n\n  @Property({value: 4, reflect: true})\n  declare columns: number;\n\n  _onNumberValueInput(event: CustomEvent) {\n    const item = event.composedPath()[0] as HTMLElement;\n    const id = item.id as any;\n    const value = event.detail.value;\n    const oldValue = event.detail.oldValue;\n    this.value[id] = value;\n    const detail = {object: this.value, property: id, value: value, oldValue: oldValue};\n    this.dispatchEvent('object-mutated', detail, false, window);\n  }\n\n  valueChanged() {\n    if (this.value.length === 4) {\n      this.setProperties({\n        keys: ['0', '1', '2', '3'],\n        columns: 2\n      });\n    }\n    if (this.value.length === 9) {\n      this.setProperties({\n        keys: ['0', '1', '2', '3', '4', '5', '6', '7', '8'],\n        columns: 3\n      });\n    }\n    if (this.value.length === 16) {\n      this.setProperties({\n        keys: ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9', '10', '11', '12', '13', '14', '15'],\n        columns: 4\n      });\n    }\n    debug: {\n      if ([4, 9, 16].indexOf(this.value.length) === -1) {\n        console.warn('IoMatrix: Unrecognized matrix type!');\n      }\n      if (this.value.find(v => typeof v !== 'number')) {\n        console.warn('IoMatrix: Unrecognized matrix type!');\n      }\n      if (this.keys.find(k => ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9', '10', '11', '12', '13', '14', '15'].indexOf(k) === -1)) {\n        console.warn('IoMatrix: Unrecognized matrix type!');\n      }\n    }\n  }\n}\n"]}