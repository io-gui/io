import{ReactiveProperty as e,Register as t,IoElement as o,HTML_ELEMENTS as n,div as i,span as r,Storage as a,Property as s,Node as l,IoGl as c,Theme as p,Color as d,IoOverlaySingleton as u,nudge as h}from"io-gui";import{ioNumber as g,ioBoolean as f,ioString as v,ioSwitch as m,ioField as y,IoButton as b,ioButton as w}from"io-inputs";import{ioOptionSelect as k,MenuOption as _}from"io-menus";import{ioNumberSlider as x}from"io-sliders";import{ioColorRgba as O}from"io-colors";var __decorate$8=function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};let C=class IoVectorArray extends o{static get Style(){return"\n      :host {\n        display: flex;\n        flex: 1 1 auto;\n      }\n      :host > io-number {\n        flex: 1 1 auto;\n      }\n      :host > *:not(:last-child) {\n        margin-right: var(--io_spacing);\n      }\n      :host > io-boolicon {\n        flex-shrink: 0;\n        padding: var(--io_spacing);\n      }\n    "}_ratios={};_onNumberPointerDown(e){const t=e.composedPath()[0].id;if(this._ratios={},this.linked&&0!==this.value[t]){const e=this.value;for(const o of this.keys)this._ratios[o]=e[o]/e[t]}}_onNumberValueInput(e){const t=e.composedPath()[0],o=Number(t.id);if(this.value[o]=e.detail.value,this.linked)for(const e of this.keys){const t=this.value;e!==o&&this._ratios[e]&&(t[e]=t[o]*this._ratios[e])}this.value._isNode||this.dispatchMutation(this.value),this.dispatch("value-input",{property:"value",value:this.value},!1)}valueChanged(){this.keys.length=0,this.keys=Array.from(Array(this.value.length).keys())}valueMutated(){this.debounce(this.changed)}changed(){const e=[];for(const t of this.keys)void 0!==this.value[t]&&e.push(g({id:String(t),value:this.value[t],conversion:this.conversion,step:this.step,min:this.min,max:this.max,ladder:this.ladder,"@pointerdown":this._onNumberPointerDown,"@value-input":this._onNumberValueInput}));e.push(this.linkable?f({value:this.bind("linked"),true:"io:link",false:"io:unlink"}):null),this.render(e)}};__decorate$8([e({type:Array,init:null})],C.prototype,"value",void 0),__decorate$8([e(1)],C.prototype,"conversion",void 0),__decorate$8([e(.001)],C.prototype,"step",void 0),__decorate$8([e(-Infinity)],C.prototype,"min",void 0),__decorate$8([e(Infinity)],C.prototype,"max",void 0),__decorate$8([e(!1)],C.prototype,"linkable",void 0),__decorate$8([e(!1)],C.prototype,"linked",void 0),__decorate$8([e(!0)],C.prototype,"ladder",void 0),__decorate$8([e({type:Array,init:null})],C.prototype,"keys",void 0),C=__decorate$8([t],C);const ioVectorArray=function(e){return C.vConstructor(e)},N=["$","ELEMENT_NODE","ATTRIBUTE_NODE","TEXT_NODE","CDATA_SECTION_NODE","ENTITY_REFERENCE_NODE","ENTITY_NODE","PROCESSING_INSTRUCTION_NODE","COMMENT_NODE","DOCUMENT_NODE","DOCUMENT_TYPE_NODE","DOCUMENT_FRAGMENT_NODE","NOTATION_NODE","DOCUMENT_POSITION_DISCONNECTED","DOCUMENT_POSITION_PRECEDING","DOCUMENT_POSITION_FOLLOWING","DOCUMENT_POSITION_CONTAINS","DOCUMENT_POSITION_CONTAINED_BY","DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC","onbeforecopy","onbeforecut","onbeforepaste","onsearch","onfullscreenchange","onfullscreenerror","onwebkitfullscreenchange","onwebkitfullscreenerror","namespaceURI","onbeforexrselect","onabort","onbeforeinput","onbeforematch","onbeforetoggle","onblur","oncancel","oncanplay","oncanplaythrough","onchange","onclick","onclose","oncontentvisibilityautostatechange","oncontextlost","oncontextmenu","oncontextrestored","oncuechange","ondblclick","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","ondurationchange","onemptied","onended","onerror","onfocus","onformdata","oninput","oninvalid","onkeydown","onkeypress","onkeyup","onload","onloadeddata","onloadedmetadata","onloadstart","onmousedown","onmouseenter","onmouseleave","onmousemove","onmouseout","onmouseover","onmouseup","onmousewheel","onpause","onplay","onplaying","onprogress","onratechange","onreset","onresize","onscroll","onsecuritypolicyviolation","onseeked","onseeking","onselect","onslotchange","onstalled","onsubmit","onsuspend","ontimeupdate","ontoggle","onvolumechange","onwaiting","onwebkitanimationend","onwebkitanimationiteration","onwebkitanimationstart","onwebkittransitionend","onwheel","onauxclick","ongotpointercapture","onlostpointercapture","onpointerdown","onpointermove","onpointerrawupdate","onpointerup","onpointercancel","onpointerover","onpointerout","onpointerenter","onpointerleave","onselectstart","onselectionchange","onanimationend","onanimationiteration","onanimationstart","ontransitionrun","ontransitionstart","ontransitionend","ontransitioncancel","oncopy","oncut","onpaste","oncommand","onscrollend","onscrollsnapchange","onscrollsnapchangin","onscrollsnapchanging","onafterprint","onbeforeprint","onbeforeunload","onhashchange","onlanguagechange","onmessage","onmessageerror","onoffline","ononline","onpagehide","onpageshow","onpopstate","onrejectionhandled","onstorage","onunhandledrejection","onunload","onenterpictureinpicture","onreadystatechange","onpointerlockchange","onpointerlockerror","onfreeze","onprerenderingchange","onresume","onvisibilitychange","onleavepictureinpicture"];function getAllPropertyNames(e){const t=[];let o=e;do{if(Object.getOwnPropertyNames(o).forEach(o=>{-1!==t.indexOf(o)||"function"==typeof e[o]||N.includes(o)||t.push(o)}),o.constructor===Node)break}while(o=Object.getPrototypeOf(o));return t}const S=new Map([[Object,{Hidden:[new RegExp(/^_/)]}],[Node,{Main:["textContent"],Input:["lang","translate","dir","inert","accessKey","draggable","writingSuggestions","spellcheck","autocapitalize","editContext","contentEditable","enterKeyHint","inputMode","virtualKeyboardPolicy"],Hierarchy:["isConnected","ownerDocument","parentNode","parentElement","childNodes","firstChild","lastChild","previousSibling","nextSibling","children","firstElementChild","lastElementChild","childElementCount","previousElementSibling","nextElementSibling","elementTiming"],Layout:["scrollTop","scrollLeft","scrollWidth","scrollHeight","clientTop","clientLeft","clientWidth","clientHeight","currentCSSZoom","offsetParent","offsetTop","offsetLeft","offsetWidth","offsetHeight"],Aria:["role","ariaAtomic","ariaAutoComplete","ariaBusy","ariaBrailleLabel","ariaBrailleRoleDescription","ariaChecked","ariaColCount","ariaColIndex","ariaColSpan","ariaCurrent","ariaDescription","ariaDisabled","ariaExpanded","ariaHasPopup","ariaHidden","ariaInvalid","ariaKeyShortcuts","ariaLabel","ariaLevel","ariaLive","ariaModal","ariaMultiLine","ariaMultiSelectable","ariaOrientation","ariaPlaceholder","ariaPosInSet","ariaPressed","ariaReadOnly","ariaRelevant","ariaRequired","ariaRoleDescription","ariaRowCount","ariaRowIndex","ariaRowSpan","ariaSelected","ariaSetSize","ariaSort","ariaValueMax","ariaValueMin","ariaValueNow","ariaValueText","ariaColIndexText","ariaRowIndexText","ariaActiveDescendantElement","ariaControlsElements","ariaDescribedByElements","ariaDetailsElements","ariaErrorMessageElements","ariaFlowToElements","ariaLabelledByElements"],Hidden:[]}]]);function getEditorGroups(e,t=new Map){const o={Main:[]};function aggregateGroups(t){for(const[n,i]of t)if(e instanceof n)for(const e in i){o[e]=o[e]||[],o[e].push(...i[e]);for(const t in o)if(t!==e)for(const n of i[e])o[t].includes(n)&&o[t].splice(o[t].indexOf(n),1)}}aggregateGroups(S),aggregateGroups(t);const n={Main:[]};for(const t of getAllPropertyNames(e)){let e=!1;for(const i of Object.keys(o)){n[i]=n[i]||[];for(const r of o[i])r!==t?r instanceof RegExp&&r.test(t)&&(n[i].push(t),e=!0):(n[i].push(t),e=!0)}e||n.Main.push(t)}return n}function registerEditorGroups(e,t){const o=S.get(e)||{};for(const e in t){o[e]=o[e]||[],o[e].push(...t[e]);for(const n in o)if(n!==e)for(const i of t[e])o[n].includes(i)&&o[n].splice(o[n].indexOf(i),1)}S.set(e,o)}const E=new Map([]);function getEditorWidget(e,t=new Map){function getWidget(t){let o=null;for(const[n,i]of t)e instanceof n&&(o=i);return o}let o=getWidget(E);return o=getWidget(t)||o,o}function registerEditorWidget(e,t){E.set(e,t)}var __decorate$7=function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};let I=class IoPropertyEditor extends o{static get Style(){return'\n    :host {\n      display: flex;\n      flex-direction: column;\n      color: var(--io_colorInput);\n      background-color: var(--io_bgColor);\n      border-radius: calc(var(--io_borderRadius) + var(--io_spacing));\n      font-size: var(--io_fontSize);\n    }\n    :host[orientation="horizontal"] {\n      flex-direction: row;\n    }\n    :host > .row {\n      display: flex;\n      flex-direction: row;\n      margin: var(--io_spacing);\n      padding: var(--io_spacing) 0;\n      border-radius: var(--io_borderRadius);\n      margin-bottom: 0;\n      background-color: var(--io_bgColorLight);\n    }\n    :host[orientation="horizontal"] > .row {\n      flex-direction: column;\n    }\n    :host > .row:last-of-type {\n      margin-bottom: var(--io_spacing);\n    }\n    :host > .row > span {\n      padding: var(--io_borderWidth); /* TODO: verify correctness */\n      margin: var(--io_spacing);\n      margin-left: var(--io_spacing2);\n      line-height: var(--io_lineHeight);\n      height: var(--io_lineHeight);\n      text-wrap: nowrap;\n      overflow: hidden;\n      text-overflow: ellipsis;\n    }\n    :host > .row > span:after {\n      display: inline-block;\n      margin-left: var(--io_spacing);\n      opacity: 0.5;\n      content: \':\';\n    }\n    :host io-object {\n      margin-right: var(--io_spacing);\n    }\n    '}_onValueInput(e){e.stopImmediatePropagation();const t=e.target.id;void 0!==t&&(this.value[t]=e.detail.value,this.value._isNode||this.dispatchMutation(this.value))}valueMutated(){this.debounce(this.changed)}changed(){const e=getEditorConfig(this.value,this.config),t=getEditorGroups(this.value,this.groups),o=getEditorWidget(this.value,this.widgets),s=[],l=[];if(this.properties.length)s.push(...this.properties);else{if(o){const e={tag:o.tag,props:Object.assign({value:this.value},o.props),children:o.children};l.push(e)}s.push(...t.Main)}const c=getAllPropertyNames(this.value);for(let t=0;t<s.length;t++)if(c.includes(s[t])){const o=s[t],a=this.value[o],c=e[o].tag,p=e[o].props||{},d={id:o,value:a,"@value-input":this._onValueInput};let u;Object.assign(d,p),n.includes(c)&&"string"==typeof a&&(u=a),"io-object"!==c&&"io-property-editor"!==c||(d.config=d.config||this.config,d.groups=d.groups||this.groups),l.push(i({class:"row"},[this.labeled?r(o):null,{tag:c,props:d,children:u}]))}const p=function genIdentifier(e){let t="io-object-collapse-state-"+e.constructor.name;t+="-"+(e.guid||e.uuid||e.id||"");const o=JSON.stringify(Object.keys(e));let n=0;for(let e=0;e<o.length;e++)n=(n<<5)-n+o.charCodeAt(e),n|=0;return n=(-n).toString(16),t+="-"+n,t}(this.value);if(!this.properties.length)for(const e in t)"Main"!==e&&"Hidden"!==e&&t[e].length&&l.push(ioObject({label:e,expanded:a({value:!1,storage:"local",key:p+"-"+e}),value:this.value,properties:t[e],config:this.config}));this.render(l)}};__decorate$7([e("debounced")],I.prototype,"reactivity",void 0),__decorate$7([e({type:Object,init:null})],I.prototype,"value",void 0),__decorate$7([e({type:Array,init:null})],I.prototype,"properties",void 0),__decorate$7([e(!0)],I.prototype,"labeled",void 0),__decorate$7([e({type:String,value:"vertical",reflect:!0})],I.prototype,"orientation",void 0),__decorate$7([e({type:Map,init:null})],I.prototype,"config",void 0),__decorate$7([e({type:Map,init:null})],I.prototype,"groups",void 0),__decorate$7([e({type:Map,init:null})],I.prototype,"widgets",void 0),I=__decorate$7([t],I);const ioPropertyEditor=function(e){return I.vConstructor(e)};var __decorate$6=function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};let M=class IoObject extends o{static get Style(){return'\n    :host {\n      display: flex;\n      flex-direction: column;\n      color: var(--io_colorInput);\n      background-color: var(--io_bgColor);\n      border-radius: calc(var(--io_borderRadius) + var(--io_spacing));\n    }\n    :host > io-boolean {\n      padding: var(--io_spacing) var(--io_spacing2);\n      align-self: stretch;\n    }\n    :host > io-boolean:before {\n      display: inline-block;\n      width: 0.75em;\n      content: "▸"\n    }\n    :host > io-boolean[value]:before {\n      content: "▾";\n    }\n    :host > io-property-editor {\n      margin: var(--io_spacing);\n      border: var(--io_border);\n      border-color: var(--io_borderColorInset);\n    }\n    '}changed(){const e=this.label||this.value.constructor.name,t=[];t.push(f({appearance:"neutral",true:e,false:e,value:this.bind("expanded")})),this.expanded&&t.push(ioPropertyEditor({value:this.value,properties:this.properties,config:this.config,groups:this.groups,widgets:this.widgets,labeled:this.labeled})),this.render(t),this.setAttribute("aria-expanded",String(this.expanded))}};__decorate$6([e()],M.prototype,"value",void 0),__decorate$6([e({type:Array,init:null})],M.prototype,"properties",void 0),__decorate$6([e(!0)],M.prototype,"labeled",void 0),__decorate$6([e("")],M.prototype,"label",void 0),__decorate$6([e({value:!1,reflect:!0})],M.prototype,"expanded",void 0),__decorate$6([e({type:Map,init:null})],M.prototype,"config",void 0),__decorate$6([e({type:Map,init:null})],M.prototype,"groups",void 0),__decorate$6([e({type:Map,init:null})],M.prototype,"widgets",void 0),__decorate$6([s("region")],M.prototype,"role",void 0),M=__decorate$6([t],M);const ioObject=function(e){return M.vConstructor(e)};function makeSelect(e){for(let t=0;t<e.length;t++)null===e[t]&&(e[t]={value:null,id:"Null"});const t=new _({options:e});return k({option:t})}const P=new Map([[Object,[[String,v()],[Number,g({step:.01})],[Boolean,m()],[Object,ioObject()],[null,y({disabled:!0})],[void 0,y({disabled:!0})]]],[Array,[[Number,g({step:.01})]]],[window.Node,[["tabIndex",k({option:new _({options:[{value:"",id:"None"},"-1","0","1","2","3"]})})],["innerHTML",v({disabled:!0,style:{maxWidth:"10em"}})],["outerHTML",v({disabled:!0,style:{maxWidth:"10em"}})],["autocapitalize",k({option:new _({options:["off","sentences","words","characters",{value:"",id:"None"}]})})],["writingSuggestions",k({option:new _({options:["true","false"]})})],["dir",k({option:new _({options:["ltr","rtl","auto",{value:"",id:"None"}]})})],["virtualKeyboardPolicy",k({option:new _({options:["manual","auto",{value:"",id:"None"}]})})],["enterKeyHint",k({option:new _({options:["enter","done","go","next","previous","search","send",{value:"",id:"None"}]})})],["contentEditable",k({option:new _({options:["true","false","plaintext-only","inherit"]})})],["inputMode",k({option:new _({options:["decimal","email","numeric","tel","search","url","text",{value:"",id:"None"}]})})],["lang",k({option:new _({options:[{value:"",id:"None"},"ab","aa","af","ak","sq","am","ar","an","hy","as","av","ae","ay","az","bm","ba","eu","be","bn","bh","bi","bs","br","bg","my","ca","ch","ce","ny","zh","zh-ans","zh-ant","cv","kw","co","cr","hr","cs","da","dv","nl","dz","en","eo","et","ee","fo","fj","fi","fr","ff","gl","gd","ka","de","el","kl","gn","gu","ht","ha","he","hz","hi","ho","hu","is","io","ig","id in","ia","ie","iu","ik","ga","it","ja","jv","kn","kr","ks","kk","km","ki","rw","rn","ky","kv","kg","ko","ku","kj","lo","la","lv","li","ln","lt","lu","lg","lb","gv","mk","mg","ms","ml","mt","mi","mr","mh","mo","mn","na","nv","ng","nd","ne","no","nb","nn","oc","oj","cu","or","om","os","pi","ps","fa","pl","pt","pa","qu","rm","ro","ru","se","sm","sg","sa","sr","sh","st","tn","sn","ii","sd","si","ss","sk","sl","so","nr","es","su","sw","sv","tl","ty","tg","ta","tt","te","th","bo","ti","to","ts","tr","tk","tw","ug","uk","ur","uz","ve","vi","vo","wa","cy","wo","fy","xh","yi","ji","yo","za","zu"]})})],["role",k({option:new _({options:["alert","alertdialog","application","article","banner","button","cell","checkbox","columnheader","combobox","complementary","contentinfo","definition","dialog","directory","document","feed","figure","form","grid","gridcell","group","heading","img","link","list","listbox","listitem","log","main","marquee","math","menu","menubar","menuitem","menuitemcheckbox","menuitemradio","navigation","none","note","option","presentation","progressbar","radio","radiogroup","region","row","rowgroup","rowheader","scrollbar","search","searchbox","separator","slider","spinbutton","status","switch","tab","table","tablist","tabpanel","term","textbox","timer","toolbar","tooltip","tree","treegrid","treeitem"]})})],["ariaAtomic",makeSelect(["true","false",null])],["ariaAutoComplete",k({option:new _({options:["inline","list","both","none"]})})],["ariaBusy",makeSelect(["true","false",null])],["ariaBrailleLabel",v()],["ariaBrailleRoleDescription",v()],["ariaChecked",makeSelect(["true","false","mixed",null])],["ariaColCount",makeSelect([...[...Array(32)].map((e,t)=>t+1),null])],["ariaColIndex",makeSelect([...[...Array(32)].map((e,t)=>t+1),null])],["ariaColSpan",makeSelect([...[...Array(32)].map((e,t)=>t+1),null])],["ariaCurrent",makeSelect(["true","false","page","step","location","date","time",null])],["ariaDescription",v()],["ariaDisabled",makeSelect(["true","false",null])],["ariaExpanded",makeSelect(["true","false",null])],["ariaHasPopup",makeSelect(["true","false","menu","listbox","tree","grid","dialog",null])],["ariaHidden",makeSelect(["true","false",null])],["ariaInvalid",makeSelect(["true","false","grammar","spelling",null])],["ariaKeyShortcuts",v()],["ariaLabel",v()],["ariaLevel",makeSelect([...[...Array(32)].map((e,t)=>t+1),null])],["ariaLive",k({option:new _({options:["assertive","polite","off"]})})],["ariaModal",makeSelect(["true","false",null])],["ariaMultiLine",makeSelect(["true","false",null])],["ariaMultiSelectable",makeSelect(["true","false",null])],["ariaOrientation",k({option:new _({options:["horizontal","vertical","undefined"]})})],["ariaPlaceholder",v()],["ariaPosInSet",makeSelect([...[...Array(32)].map((e,t)=>t+1),null])],["ariaPressed",makeSelect(["true","false","mixed",null])],["ariaReadOnly",makeSelect(["true","false",null])],["ariaRequired",makeSelect(["true","false",null])],["ariaRelevant",k({option:new _({options:["additions","all","removals","text"]})})],["ariaRoleDescription",v()],["ariaRowCount",makeSelect([...[...Array(32)].map((e,t)=>t+1),null])],["ariaRowIndex",makeSelect([...[...Array(32)].map((e,t)=>t+1),null])],["ariaRowSpan",makeSelect([...[...Array(32)].map((e,t)=>t+1),null])],["ariaSelected",makeSelect(["true","false",null])],["ariaSetSize",makeSelect([...[...Array(32)].map((e,t)=>t+1),null])],["ariaSort",k({option:new _({options:["none","ascending","descending","other"]})})],["ariaValueMax",makeSelect([...[...Array(32)].map((e,t)=>t+1),null])],["ariaValueMin",makeSelect([...[...Array(32)].map((e,t)=>t+1),null])],["ariaValueNow",makeSelect([...[...Array(32)].map((e,t)=>t+1),null])],["ariaValueText",v()],["ariaColIndexText",v()],["ariaRowIndexText",v()]]],[Element,[]],[HTMLElement,[]],[l,[["reactivity",k({option:new _({options:["none","debounced","immediate"]})})]]],[o,[["reactivity",k({option:new _({options:["none","debounced","immediate"]})})]]],[c,[["size",ioVectorArray({step:1})],["color",ioVectorArray({step:1})]]],[p,[[Number,x({step:1,min:0,max:20})],["themeID",k({option:new _({options:["light","dark"]})})],["spacing2",y({disabled:!0})],["spacing3",y({disabled:!0})],["spacing5",y({disabled:!0})],["spacing8",y({disabled:!0})],["fieldHeight",y({disabled:!0})],[d,O()]]]]);function getEditorConfig(e,t=new Map){const o=new Map;for(const[t,n]of P)if(e instanceof t)for(const[e,t]of n)o.set(e,t);for(const[n,i]of t)if(e instanceof n)for(const[e,t]of i)o.set(e,t);const n={};for(const t of getAllPropertyNames(e)){const i=e[t];for(const[e,r]of o){let o;"function"==typeof e&&i instanceof e||"function"==typeof e&&i?.constructor===e?o=r:"string"==typeof e&&t===e?"object"==typeof i&&null!==i&&"io-field"===r.tag||(o=r):(e instanceof RegExp&&e.test(t)||null===e&&null===i||void 0===e&&void 0===i)&&(o=r),o&&(n[t]=o)}}return n}function registerEditorConfig(e,t){const o=P.get(e)||[];for(const[e,n]of t){const t=o.find(t=>t[0]===e);t?t[1]=n:o.push([e,n])}P.set(e,o)}P.forEach((e,t)=>{const o=Object.getOwnPropertyDescriptors(t.prototype);for(const[t,n]of Object.entries(o)){const o=!1!==n.writable,i=void 0!==n.get,r=void 0!==n.set;if(i&&!r||!o){const o=e.find(e=>e[0]===t);o?(o.length=0,o.push(t,y({disabled:!0}))):e.push([t,y({disabled:!0})])}}});var __decorate$5=function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};let T=class IoPropertyLink extends b{static get Style(){return"\n    :host {\n      display: flex;\n    }\n    :host > span {\n      color: var(--io_colorBlue);\n      flex: 0 1 auto;\n      overflow: hidden;\n      text-overflow: ellipsis;\n    }\n    :host:hover > span {\n      text-decoration: underline;\n    }\n    "}valueMutated(){this.changed()}changed(){let e="";if(e=this.value instanceof Array?`${this.value.constructor.name} (${this.value.length})`:`${this.value.constructor.name}`,this.showName){const t=this.value.name;t&&(e+=` "${t}"`)}this.render([r(e)])}};__decorate$5([e()],T.prototype,"value",void 0),__decorate$5([e({value:!1,type:Boolean})],T.prototype,"showName",void 0),__decorate$5([e({value:"neutral",type:String,reflect:!0})],T.prototype,"appearance",void 0),T=__decorate$5([t],T);const ioPropertyLink=function(e){return T.vConstructor(e)};var __decorate$4=function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};let j=class IoBreadcrumbs extends o{static get Style(){return"\n    :host {\n      display: flex;\n    }\n    :host > div {\n      display: flex;\n      flex-direction: row;\n      align-items: center;\n      flex: 1 1 auto;\n      border: var(--io_border);\n      border-color: var(--io_borderColorInset);\n      border-radius: var(--io_borderRadius);\n      background-color: var(--io_bgColorInput);\n      overflow: hidden;\n    }\n    :host > io-button {\n      padding-left: var(--io_spacing);\n      padding-right: var(--io_spacing);\n      margin: var(--io_borderWidth);\n      flex: 0 0 auto;\n    }\n    :host:not([search]) > io-button.clear-button {\n      display: none;\n    }\n    :host > div > io-property-link:last-of-type {\n      flex-shrink: 0;\n    }\n    :host > div > io-property-link:last-of-type > span {\n      flex-shrink: 0;\n      text-overflow: clip;\n    }\n    :host > div > io-property-link:not(:first-of-type):before {\n      content: '>';\n      padding-right: calc(var(--io_fontSize) / 2);\n      color: var(--io_colorStrong);\n      opacity: 0.5;\n    }\n    :host > .search-input {\n      flex: 0 0 auto;\n      overflow: hidden;\n      min-width: calc(var(--io_fieldHeight) + var(--io_borderWidth) * 2);\n      height: calc(var(--io_fieldHeight) + var(--io_borderWidth) * 2);\n      margin-left: var(--io_spacing);\n    }\n    :host > .search-input:empty::before {\n      content: '🔍';\n      font-size: 0.9em;\n    }\n    "}valueChanged(){this._crumbs.length=0,this._crumbs.push(this.value)}selectedChanged(){const e=this._crumbs.indexOf(this.selected);-1!==e?this._crumbs.length=e+1:this._crumbs.push(this.selected)}onClearSearch(){this.search=""}changed(){const e=[];this._crumbs.length>1&&e.push(w({icon:"io:arrow_left",class:"back-button",value:this._crumbs[this._crumbs.length-2]}));const t=i();t.children=[];for(let e=Math.max(0,this._crumbs.length-2);e<this._crumbs.length;e++)t.children.push(ioPropertyLink({value:this._crumbs[e],showName:e===this._crumbs.length-1}));e.push(t,w({icon:"io:close",class:"clear-button",action:this.onClearSearch}),v({id:"search",class:"search-input",value:this.bind("search"),live:!0})),this.render(e)}};__decorate$4([e({type:Object,init:null})],j.prototype,"value",void 0),__decorate$4([e({type:Object,init:null})],j.prototype,"selected",void 0),__decorate$4([e({type:String,reflect:!0})],j.prototype,"search",void 0),__decorate$4([s(Array)],j.prototype,"_crumbs",void 0),j=__decorate$4([t],j);const ioBreadcrumbs=function(e){return j.vConstructor(e)};var __decorate$3=function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};let R=class IoContextEditor extends I{static get Style(){return"\n      :host {\n        z-index: 2;\n      }\n      :host:not([expanded]) {\n      visibility: hidden;\n    }\n    "}static get Listeners(){return{keydown:"onKeydown","io-focus-to":"onIoFocusTo"}}onKeydown(e){"Escape"!==e.key&&"Enter"!==e.key||(e.preventDefault(),this.expanded=!1)}onIoFocusTo(e){const t=e.detail.source,o=e.detail.command,n=Array.from(this.querySelectorAll('[tabindex="0"]')),i=[...n].indexOf(t);let r="";this.horizontal?("ArrowRight"===o&&(r="next"),"ArrowLeft"===o&&(r="prev")):("ArrowDown"===o&&(r="next"),"ArrowUp"===o&&(r="prev")),r&&("next"===r?n[(i+1)%n.length].focus():"prev"===r?n[(i-1+n.length)%n.length].focus():"out"===r&&this.$parent&&this.$parent.focus(),e.stopPropagation())}expand(e){this.setProperties({value:e.value,properties:e.properties||[],labeled:e.labeled||!0,orientation:e.orientation||"vertical",config:e.config||new Map,groups:e.groups||new Map,widgets:e.widgets||new Map,expanded:!0}),this.onClose=e.onClose||null,h(this,e.source,e.direction),this.debounce(this.onExpand)}onExpand(){this.querySelector('[tabindex="0"]:not([inert])')?.focus()}expandedChanged(){this.expanded||(this.setProperties({value:{},properties:[],labeled:!0,orientation:"vertical",config:new Map,groups:new Map,widgets:new Map}),this.onClose&&(this.onClose(),this.onClose=null))}};__decorate$3([e({type:Boolean,value:!1,reflect:!0})],R.prototype,"expanded",void 0),R=__decorate$3([t],R);const D=new R;setTimeout(()=>{u.appendChild(D)},100);var __decorate$2=function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};let A=class IoInspector extends o{static get Style(){return"\n    :host {\n      display: flex;\n      flex-direction: column;\n      align-items: stretch;\n      flex: 0 1 calc(var(--io_lineHeight) * 17.5);\n      padding: var(--io_spacing);\n      background-color: var(--io_bgColor);\n      border-radius: calc(var(--io_borderRadius) + var(--io_spacing));\n    }\n    :host > io-breadcrumbs {\n      margin: 0 var(--io_spacing);\n      z-index: 1;\n    }\n    :host > span {\n      padding: var(--io_spacing) var(--io_spacing3);\n      color: var(--io_colorStrong);\n    }\n    :host io-property-editor > .row > span {\n      min-width: 6em;\n      text-align: right;\n    }\n    "}static get Listeners(){return{"io-button-clicked":"onLinkClicked"}}onLinkClicked(e){e.stopPropagation();const t=e.detail.value,o=e.composedPath()[0];t&&"object"==typeof t&&("io-property-link"!==o.localName&&"back-button"!==o.className||this.setProperty("selected",t))}valueChanged(){this.selected=this.value}selectedChanged(){this.search=""}selectedMutated(){clearTimeout(this._cfgTimeout),this._cfgTimeout=setTimeout(()=>{this._onChange()},100)}changed(){this._onChangedThrottled()}_onChangedThrottled(){this.throttle(this._onChange)}_onChange(){const e=[ioBreadcrumbs({value:this.value,selected:this.bind("selected"),search:this.bind("search")})],t=new Map(this.config);t.has(Object)||t.set(Object,[]),t.get(Object).push([Object,ioPropertyLink({showName:!0})]);const o=[];if(this.search)for(const[e]of getAllPropertyNames(this.selected))e.toLowerCase().includes(this.search.toLowerCase())&&o.push(e);this.search&&0===o.length?e.push(r(`No results found for "${this.search}"`)):e.push(ioPropertyEditor({value:this.selected,config:t,groups:this.groups,widgets:this.widgets,properties:o})),this.render(e)}};__decorate$2([e()],A.prototype,"value",void 0),__decorate$2([e()],A.prototype,"selected",void 0),__decorate$2([e("")],A.prototype,"search",void 0),__decorate$2([e({type:Map,init:null})],A.prototype,"config",void 0),__decorate$2([e({type:Map,init:null})],A.prototype,"groups",void 0),__decorate$2([e({type:Map,init:null})],A.prototype,"widgets",void 0),A=__decorate$2([t],A);const ioInspector=function(e){return A.vConstructor(e)};var __decorate$1=function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};let L=class IoVector extends o{static get Style(){return"\n      :host {\n        display: flex;\n        flex: 1 1 auto;\n      }\n      :host > io-number {\n        flex: 1 1 auto;\n      }\n      :host > *:not(:last-child) {\n        margin-right: var(--io_spacing);\n      }\n      :host > io-boolicon {\n        flex-shrink: 0;\n        padding: var(--io_spacing);\n      }\n    "}_ratios={};_onNumberPointerDown(e){const t=e.composedPath()[0].id;if(this._ratios={},this.linked&&0!==this.value[t]){const e=this.value;for(const o of this.keys)this._ratios[o]=e[o]/e[t]}}_onNumberValueInput(e){const t=e.composedPath()[0].id;if(this.value[t]=e.detail.value,this.linked)for(const e of this.keys){const o=this.value;e!==t&&this._ratios[e]&&(o[e]=o[t]*this._ratios[e])}this.value._isNode||this.dispatchMutation(this.value),this.dispatch("value-input",{property:"value",value:this.value},!1)}valueChanged(){this.keys.length=0,this.keys.push(...Object.keys(this.value).filter(e=>"number"==typeof this.value[e]))}valueMutated(){this.debounce(this.changed)}changed(){const e=[];for(const t of this.keys)void 0!==this.value[t]&&e.push(g({id:t,value:this.value[t],conversion:this.conversion,step:this.step,min:this.min,max:this.max,ladder:this.ladder,"@pointerdown":this._onNumberPointerDown,"@value-input":this._onNumberValueInput}));e.push(this.linkable?f({value:this.bind("linked"),true:"io:link",false:"io:unlink"}):null),this.render(e)}};__decorate$1([e({type:Object})],L.prototype,"value",void 0),__decorate$1([e(1)],L.prototype,"conversion",void 0),__decorate$1([e(.001)],L.prototype,"step",void 0),__decorate$1([e(-Infinity)],L.prototype,"min",void 0),__decorate$1([e(Infinity)],L.prototype,"max",void 0),__decorate$1([e(!1)],L.prototype,"linkable",void 0),__decorate$1([e(!1)],L.prototype,"linked",void 0),__decorate$1([e(!0)],L.prototype,"ladder",void 0),__decorate$1([e({type:Array,init:null})],L.prototype,"keys",void 0),L=__decorate$1([t],L);const ioVector=function(e){return L.vConstructor(e)};var __decorate=function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};let z=class IoMatrix extends C{static get Style(){return'\n      :host {\n        display: grid;\n        align-self: stretch;\n        justify-self: stretch;\n        grid-gap: var(--io_spacing);\n      }\n      :host > *:not(:last-child) {\n        margin-right: 0;\n      }\n      :host[columns="4"] {\n        grid-template-columns: repeat(4, 1fr);\n      }\n      :host[columns="3"] {\n        grid-template-columns: repeat(3, 1fr);\n      }\n      :host[columns="2"] {\n        grid-template-columns: repeat(2, 1fr);\n      }\n    '}_onNumberValueInput(e){const t=e.composedPath()[0];this.value[t.id]=e.detail.value,this.value._isNode||this.dispatchMutation(this.value),this.dispatch("value-input",{property:"value",value:this.value},!1)}valueChanged(){4===this.value.length&&this.setProperties({keys:[0,1,2,3],columns:2}),9===this.value.length&&this.setProperties({keys:[0,1,2,3,4,5,6,7,8],columns:3}),16===this.value.length&&this.setProperties({keys:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15],columns:4})}};__decorate([e({type:Array,init:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]})],z.prototype,"value",void 0),__decorate([e({value:4,reflect:!0})],z.prototype,"columns",void 0),z=__decorate([t],z);const ioMatrix=function(e){return z.vConstructor(e)};export{j as IoBreadcrumbs,D as IoContextEditorSingleton,A as IoInspector,z as IoMatrix,M as IoObject,I as IoPropertyEditor,L as IoVector,C as IoVectorArray,N as SKIPPED_PROPERTIES,getAllPropertyNames,getEditorConfig,getEditorGroups,getEditorWidget,ioBreadcrumbs,ioInspector,ioMatrix,ioObject,ioPropertyEditor,ioVector,ioVectorArray,registerEditorConfig,registerEditorGroups,registerEditorWidget};
