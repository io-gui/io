import{ReactiveProperty,IoElement,Register,glsl,IoOverlaySingleton,div,Property,nudge}from"@io-gui/core";import{IoSlider2d,IoSlider}from"@io-gui/sliders";import{ioNumber}from"@io-gui/inputs";const rgb2hsl=function(rgb){const r=rgb[0]/255,g=rgb[1]/255,b=rgb[2]/255,min=Math.min(r,g,b),max=Math.max(r,g,b),delta=max-min;let s,h=0;max===min?h=0:r===max?h=(g-b)/delta:g===max?h=2+(b-r)/delta:b===max&&(h=4+(r-g)/delta),h=Math.min(60*h,360),h<0&&(h+=360);const l=(min+max)/2;return s=max===min?0:l<=.5?delta/(max+min):delta/(2-max-min),[h,100*s,100*l]},rgb2hsv=function(rgb){let rdif,gdif,bdif,s,h=0;const r=rgb[0]/255,g=rgb[1]/255,b=rgb[2]/255,v=Math.max(r,g,b),diff=v-Math.min(r,g,b),diffc=function(c){return(v-c)/6/diff+.5};return 0===diff?(h=0,s=0):(s=diff/v,rdif=diffc(r),gdif=diffc(g),bdif=diffc(b),r===v?h=bdif-gdif:g===v?h=1/3+rdif-bdif:b===v&&(h=2/3+gdif-rdif),h<0?h+=1:h>1&&(h-=1)),[360*h,100*s,100*v]},hsl2rgb=function(hsl){const h=hsl[0]/360,s=hsl[1]/100,l=hsl[2]/100;let t2,t3,val;if(0===s)return val=255*l,[val,val,val];t2=l<.5?l*(1+s):l+s-l*s;const t1=2*l-t2,rgb=[0,0,0];for(let i=0;i<3;i++)t3=h+1/3*-(i-1),t3<0&&t3++,t3>1&&t3--,val=6*t3<1?t1+6*(t2-t1)*t3:2*t3<1?t2:3*t3<2?t1+(t2-t1)*(2/3-t3)*6:t1,rgb[i]=255*val;return rgb},hsv2rgb=function(hsv){const h=hsv[0]/60,s=hsv[1]/100;let v=hsv[2]/100;const hi=Math.floor(h)%6,f=h-Math.floor(h),p=255*v*(1-s),q=255*v*(1-s*f),t=255*v*(1-s*(1-f));switch(v*=255,hi){case 0:return[v,t,p];case 1:return[q,v,p];case 2:return[p,v,t];case 3:return[p,q,v];case 4:return[t,p,v];default:return[v,p,q]}};var __defProp$3=Object.defineProperty,__getOwnPropDesc$5=Object.getOwnPropertyDescriptor,__decorateClass$5=(decorators,target,key,kind)=>{for(var decorator,result=kind>1?void 0:kind?__getOwnPropDesc$5(target,key):target,i=decorators.length-1;i>=0;i--)(decorator=decorators[i])&&(result=(kind?decorator(target,key,result):decorator(result))||result);return kind&&result&&__defProp$3(target,key,result),result};let IoColorBase=class extends IoElement{ready(){this.valueChanged(),this.changed()}valueMutated(){this.valueChanged(),this.changed()}rgbFromHsv(){const rgb=hsv2rgb([360*this.hsv[0],100*this.hsv[1],100*this.hsv[2]]);this.rgba[0]=rgb[0]/255,this.rgba[1]=rgb[1]/255,this.rgba[2]=rgb[2]/255}rgbFromHsl(){const rgb=hsl2rgb([360*this.hsl[0],100*this.hsl[1],100*this.hsl[2]]);this.rgba[0]=rgb[0]/255,this.rgba[1]=rgb[1]/255,this.rgba[2]=rgb[2]/255}valueFromRgb(){this.value.r=this.rgba[0],this.value.g=this.rgba[1],this.value.b=this.rgba[2]}valueChanged(){{const c=Object.keys(this.value);-1!==c.indexOf("r")&&-1!==c.indexOf("g")&&-1!==c.indexOf("b")||console.warn("IoColor: Incorrect value type!")}const rgb=[255*this.value.r,255*this.value.g,255*this.value.b],hsv=rgb2hsv(rgb),hsl=rgb2hsl(rgb);0!==hsv[0]&&360!==hsv[0]||(hsv[0]=360*this.hsv[0]),0!==hsl[0]&&360!==hsl[0]||(hsl[0]=360*this.hsl[0]),0===hsv[1]&&(hsv[0]=360*this.hsv[0]),0===hsl[1]&&(hsl[0]=360*this.hsl[0]),0===hsv[2]&&(hsv[1]=100*this.hsv[1]),0!==hsl[2]&&100!==hsl[2]||(hsl[0]=360*this.hsl[0],hsl[1]=100*this.hsl[1]),this.rgba[0]=rgb[0]/255,this.rgba[1]=rgb[1]/255,this.rgba[2]=rgb[2]/255,this.rgba[3]=this.value.a??1,this.hsv[0]=hsv[0]/360,this.hsv[1]=hsv[1]/100,this.hsv[2]=hsv[2]/100,this.hsl[0]=hsl[0]/360,this.hsl[1]=hsl[1]/100,this.hsl[2]=hsl[2]/100,this.setProperties({rgba:this.rgba,hsv:this.hsv,hsl:this.hsl})}};__decorateClass$5([ReactiveProperty("throttled")],IoColorBase.prototype,"reactivity",2),__decorateClass$5([ReactiveProperty({type:Object,init:{r:1,g:1,b:1,a:1}})],IoColorBase.prototype,"value",2),__decorateClass$5([ReactiveProperty({type:Array,init:[1,1,1,1]})],IoColorBase.prototype,"rgba",2),__decorateClass$5([ReactiveProperty({type:Array,init:[1,1,1]})],IoColorBase.prototype,"hsv",2),__decorateClass$5([ReactiveProperty({type:Array,init:[1,1,1]})],IoColorBase.prototype,"hsl",2),IoColorBase=__decorateClass$5([Register],IoColorBase);var __defProp$2=Object.defineProperty,__getOwnPropDesc$4=Object.getOwnPropertyDescriptor,__decorateClass$4=(decorators,target,key,kind)=>{for(var decorator,result=kind>1?void 0:kind?__getOwnPropDesc$4(target,key):target,i=decorators.length-1;i>=0;i--)(decorator=decorators[i])&&(result=(kind?decorator(target,key,result):decorator(result))||result);return kind&&result&&__defProp$2(target,key,result),result};let IoColorSlider=class extends IoColorBase{static get Style(){return"\n      :host {\n        display: flex;\n      }\n    "}_onValueInput(event){const v=event.detail.value,oldValue=JSON.stringify(this.value);switch(this.channel){case"r":this.value.r=v;break;case"g":this.value.g=v;break;case"b":this.value.b=v;break;case"a":this.value.a=v;break;case"h":this.hsv[0]=v,this.rgbFromHsv(),this.valueFromRgb();break;case"s":this.hsv[1]=v,this.rgbFromHsv(),this.valueFromRgb();break;case"v":this.hsv[2]=v,this.rgbFromHsv(),this.valueFromRgb();break;case"l":this.hsl[2]=v,this.rgbFromHsl(),this.valueFromRgb();break;case"hs":this.hsv[0]=v[0],this.hsv[1]=v[1],this.rgbFromHsv(),this.valueFromRgb();break;case"sv":this.hsv[1]=v[0],this.hsv[2]=v[1],this.rgbFromHsv(),this.valueFromRgb();break;case"sl":this.hsl[1]=v[0],this.hsl[2]=v[1],this.rgbFromHsl(),this.valueFromRgb()}oldValue!==JSON.stringify(this.value)&&(this.value._isNode||this.dispatchMutation(this.value),this.dispatch("value-input",{property:"value",value:this.value},!1))}changed(){const c=this.channel;-1===["r","g","b","a","h","s","v","l","hs","sv","sl"].indexOf(c)&&console.warn("IoColorSlider: Incorrect channel value!",c);let slider=null;switch(c){case"r":slider=ioColorSliderR();break;case"g":slider=ioColorSliderG();break;case"b":slider=ioColorSliderB();break;case"a":slider=ioColorSliderA();break;case"h":slider=ioColorSliderH();break;case"s":slider=ioColorSliderS();break;case"v":slider=ioColorSliderV();break;case"l":slider=ioColorSliderL();break;case"hs":slider=ioColorSliderHs();break;case"sv":slider=ioColorSliderSv();break;case"sl":slider=ioColorSliderSl()}let value=0,color=[0,0,0,0],min=0,max=1,step=this.step;switch(this.channel){case"r":value=this.value.r,color=[...this.rgba];break;case"g":value=this.value.g,color=[...this.rgba];break;case"b":value=this.value.b,color=[...this.rgba];break;case"a":value=this.value.a||0,color=[...this.rgba];break;case"h":value=this.hsv[0],color=[...this.hsv,1];break;case"s":value=this.hsv[1],color=[...this.hsv,1];break;case"v":value=this.hsv[2],color=[...this.hsv,1];break;case"l":value=this.hsl[2],color=[...this.hsl,1];break;case"hs":value=[this.hsv[0],this.hsv[1]],color=[...this.hsv,1],min=[min,min],max=[max,max],step=[step,step];break;case"sv":value=[this.hsv[1],this.hsv[2]],color=[...this.hsv,1],min=[min,min],max=[max,max],step=[step,step];break;case"sl":value=[this.hsl[1],this.hsl[2]],color=[...this.hsl,1],min=[min,min],max=[max,max],step=[step,step]}slider.props={id:c,value:value,min:min,max:max,step:step,vertical:this.vertical,color:color,"@value-input":this._onValueInput},this.render([slider])}};__decorateClass$4([ReactiveProperty({type:Array,init:[0,0,0,0]})],IoColorSlider.prototype,"color",2),__decorateClass$4([ReactiveProperty({type:Number,value:.01})],IoColorSlider.prototype,"step",2),__decorateClass$4([ReactiveProperty("a")],IoColorSlider.prototype,"channel",2),__decorateClass$4([ReactiveProperty({value:!1,reflect:!0})],IoColorSlider.prototype,"vertical",2),IoColorSlider=__decorateClass$4([Register],IoColorSlider);const ioColorSlider=function(arg0){return IoColorSlider.vConstructor(arg0)};class IoColorSliderBase extends IoSlider{static get GlUtils(){return`\n      // Note: Implement in subclass!\n      // TODO: Allow GlUtils to rewrite inherited functions!\n      // vec3 getStartColor(vec2 uv) {}\n      // vec3 getEndColor(vec2 uv) {}\n      ${glsl.hue2rgb}\n      ${glsl.hsv2rgb}\n      ${glsl.hsl2rgb}\n\n      vec3 paintHorizontalLine(vec3 dstCol, vec2 p, vec3 color) {\n        float lineShape = lineHorizontal(p, io_borderWidth * 2.0);\n        return compose(dstCol, vec4(color, lineShape));\n      }\n    `}static get Frag(){return"\n    varying vec2 vUv;\n\n    void main(void) {\n      // Dimensions\n      vec2 size = uVertical == 1 ? uSize.yx : uSize;\n      vec2 uv = uVertical == 1 ? vUv.yx : vUv;\n      vec2 position = size * vec2(uv.x, uv.y - 0.5);\n      float valueInRange = (uValue - uMin) / (uMax - uMin);\n\n      // Colors\n      vec3 finalCol = io_bgColorInput.rgb;\n      vec3 startCol = getStartColor(uv);\n      vec3 gridCol = io_bgColorLight.rgb;\n      vec3 endCol = getEndColor(uv);\n      vec3 sliderCol = mix(startCol, endCol, uv.x);\n\n      vec2 linePos = translate(size * uv, 0.0, size.y / 2.);\n      finalCol = paintHorizontalLine(finalCol, linePos, sliderCol);\n\n      // Grid\n      float gridSize = size.x / abs((uMax - uMin) / uStep);\n      float gridOffset = mod(uStep - uMin, uStep) / (uMax - uMin) * size.x;\n      float gridShape = paintDerivativeGrid2D(translate(position, gridOffset, 0.0), vec2(gridSize, 0.0), io_borderWidth);\n      if (size.x * uStep < 4.0) gridShape = 0.0;\n      finalCol = compose(finalCol, vec4(sliderCol, gridShape * 0.25));\n\n      // Slider\n      float sliderShape = rectangle(position, vec2(size.x * valueInRange, size.y));\n      finalCol = compose(finalCol, vec4(sliderCol, sliderShape));\n      finalCol = compose(finalCol, vec4(io_bgColorInput.rgb, gridShape * sliderShape * 0.125));\n\n      gl_FragColor = vec4(finalCol, 1.0);\n    }"}valueMutated(){}}__decorateClass$4([ReactiveProperty({type:Array,init:[0,0,0,0]})],IoColorSliderBase.prototype,"color",2);class IoColorSlider2dBase extends IoSlider2d{static get GlUtils(){return`\n      // Note: Implement in subclass!\n      // TODO: Allow GlUtils to rewrite inherited functions!\n      // vec3 getColor(vec2 uv) {}\n      ${glsl.hue2rgb}\n      ${glsl.hsv2rgb}\n      ${glsl.hsl2rgb}\n    `}static get Frag(){return"\n    varying vec2 vUv;\n\n    void main(void) {\n      // Dimensions\n      vec2 size = uVertical == 1 ? uSize.yx : uSize;\n      vec2 uv = uVertical == 1 ? vUv.yx : vUv;\n      vec2 position = size * (uv - vec2(0.5));\n\n      // Colors\n      vec3 finalCol = color_field(uv);\n      vec3 gridCol = io_bgColorLight.rgb;\n      vec3 sliderCol = color_field(uValue);\n\n      // Grid\n      vec2 gridSize = size / abs((uMax - uMin) / uStep);\n      vec2 gridOffset = (uMax + uMin) / (uMax - uMin) * size / 2.;\n      vec2 gridPosition = translate(position, -gridOffset);\n      float gridShape = paintDerivativeGrid2D(gridPosition, gridSize, io_borderWidth);\n      if (min(size.x * uStep.x, size.y * uStep.y) < 2.0) gridShape = 0.0;\n      finalCol = compose(finalCol, vec4(gridCol, gridShape * 0.5));\n\n      vec2 knobPos = uValue / (uMax - uMin) * size;\n      finalCol = paintKnob(finalCol, gridPosition, knobPos, sliderCol);\n\n      gl_FragColor = vec4(finalCol, 1.0);\n    }"}valueMutated(){}}__decorateClass$4([ReactiveProperty({type:Array,init:[0,0,0,0]})],IoColorSlider2dBase.prototype,"color",2);let IoColorSliderR=class extends IoColorSliderBase{static get GlUtils(){return"\n      vec3 getStartColor(vec2 uv) {\n        return vec3(uv.x, uColor[1], uColor[2]);\n      }\n      vec3 getEndColor(vec2 uv) {\n        return vec3(uv.x, uColor[1], uColor[2]);\n      }\n    "}};IoColorSliderR=__decorateClass$4([Register],IoColorSliderR);const ioColorSliderR=function(arg0){return IoColorSliderR.vConstructor(arg0)};let IoColorSliderG=class extends IoColorSliderBase{static get GlUtils(){return"\n      vec3 getStartColor(vec2 uv) {\n        return vec3(uColor[0], uv.x, uColor[2]);\n      }\n      vec3 getEndColor(vec2 uv) {\n        return vec3(uColor[0], uv.x, uColor[2]);\n      }\n    "}};IoColorSliderG=__decorateClass$4([Register],IoColorSliderG);const ioColorSliderG=function(arg0){return IoColorSliderG.vConstructor(arg0)};let IoColorSliderB=class extends IoColorSliderBase{static get GlUtils(){return"\n      vec3 getStartColor(vec2 uv) {\n        return vec3(uColor[0], uColor[1], uv.x);\n      }\n      vec3 getEndColor(vec2 uv) {\n        return vec3(uColor[0], uColor[1], uv.x);\n      }\n    "}};IoColorSliderB=__decorateClass$4([Register],IoColorSliderB);const ioColorSliderB=function(arg0){return IoColorSliderB.vConstructor(arg0)};let IoColorSliderA=class extends IoColorSliderBase{static get GlUtils(){return"\n      vec3 getStartColor(vec2 uv) {\n        vec2 size = uVertical == 1 ? uSize.yx : uSize;\n        vec2 position = size * (uv - vec2(0.0, 0.5));\n        return mix(vec3(0.5), vec3(1.0), checkerX(position, io_fieldHeight / 4.0));\n      }\n      vec3 getEndColor(vec2 uv) {\n        vec2 size = uVertical == 1 ? uSize.yx : uSize;\n        vec2 position = size * (uv - vec2(0.0, 0.5));\n        vec3 chkCol = mix(vec3(0.5), vec3(1.0), checkerX(position, io_fieldHeight / 4.0));\n        return mix(chkCol, uColor.rgb, 1.0);\n      }\n    "}};IoColorSliderA=__decorateClass$4([Register],IoColorSliderA);const ioColorSliderA=function(arg0){return IoColorSliderA.vConstructor(arg0)};let IoColorSliderH=class extends IoColorSliderBase{static get GlUtils(){return"\n      vec3 getStartColor(vec2 uv) {\n        return hsv2rgb(vec3(uv.x, uColor[1], uColor[2]));\n      }\n      vec3 getEndColor(vec2 uv) {\n        return hsv2rgb(vec3(uv.x, uColor[1], uColor[2]));\n      }\n    "}};IoColorSliderH=__decorateClass$4([Register],IoColorSliderH);const ioColorSliderH=function(arg0){return IoColorSliderH.vConstructor(arg0)};let IoColorSliderS=class extends IoColorSliderBase{static get GlUtils(){return"\n      vec3 getStartColor(vec2 uv) {\n        return hsv2rgb(vec3(uColor[0], uv.x, uColor[2]));\n      }\n      vec3 getEndColor(vec2 uv) {\n        return hsv2rgb(vec3(uColor[0], uv.x, uColor[2]));\n      }\n    "}};IoColorSliderS=__decorateClass$4([Register],IoColorSliderS);const ioColorSliderS=function(arg0){return IoColorSliderS.vConstructor(arg0)};let IoColorSliderV=class extends IoColorSliderBase{static get GlUtils(){return"\n      vec3 getStartColor(vec2 uv) {\n        return hsv2rgb(vec3(uColor[0], uColor[1], uv.x));\n      }\n      vec3 getEndColor(vec2 uv) {\n        return hsv2rgb(vec3(uColor[0], uColor[1], uv.x));\n      }\n    "}};IoColorSliderV=__decorateClass$4([Register],IoColorSliderV);const ioColorSliderV=function(arg0){return IoColorSliderV.vConstructor(arg0)};let IoColorSliderL=class extends IoColorSliderBase{static get GlUtils(){return"\n      vec3 getStartColor(vec2 uv) {\n        return hsl2rgb(vec3(uColor[0], uColor[1], uv.x));\n      }\n      vec3 getEndColor(vec2 uv) {\n        return hsl2rgb(vec3(uColor[0], uColor[1], uv.x));\n      }\n    "}};IoColorSliderL=__decorateClass$4([Register],IoColorSliderL);const ioColorSliderL=function(arg0){return IoColorSliderL.vConstructor(arg0)};let IoColorSliderHs=class extends IoColorSlider2dBase{static get GlUtils(){return"\n      vec3 color_field(vec2 uv) {\n        return hsv2rgb(vec3(uv, uColor[2]));\n      }\n    "}};IoColorSliderHs=__decorateClass$4([Register],IoColorSliderHs);const ioColorSliderHs=function(arg0){return IoColorSliderHs.vConstructor(arg0)};let IoColorSliderSv=class extends IoColorSlider2dBase{static get GlUtils(){return"\n      vec3 color_field(vec2 uv) {\n        return hsv2rgb(vec3(uColor[0], uv));\n      }\n    "}};IoColorSliderSv=__decorateClass$4([Register],IoColorSliderSv);const ioColorSliderSv=function(arg0){return IoColorSliderSv.vConstructor(arg0)};let IoColorSliderSl=class extends IoColorSlider2dBase{static get GlUtils(){return"\n      vec3 color_field(vec2 uv) {\n        return hsl2rgb(vec3(uColor[0], uv));\n      }\n    "}};IoColorSliderSl=__decorateClass$4([Register],IoColorSliderSl);const ioColorSliderSl=function(arg0){return IoColorSliderSl.vConstructor(arg0)};var __defProp$1=Object.defineProperty,__getOwnPropDesc$3=Object.getOwnPropertyDescriptor,__decorateClass$3=(decorators,target,key,kind)=>{for(var decorator,result=kind>1?void 0:kind?__getOwnPropDesc$3(target,key):target,i=decorators.length-1;i>=0;i--)(decorator=decorators[i])&&(result=(kind?decorator(target,key,result):decorator(result))||result);return kind&&result&&__defProp$1(target,key,result),result};let IoColorPanel=class extends IoColorBase{static get Style(){return"\n    :host {\n      display: flex;\n      flex-direction: row;\n      border: var(--io_border);\n      border-color: var(--io_borderColorOutset);\n      background-color: var(--io_bgColorLight);\n      padding: var(--io_spacing2);\n      border-radius: calc(var(--io_borderRadius) + var(--io_spacing2));\n    }\n    :host:not([expanded]) {\n      display: none;\n    }\n    :host > *:not(:last-child) {\n      margin: 0 var(--io_spacing2) 0 0;\n    }\n    "}static get Listeners(){return{keydown:"onKeydown","io-focus-to":"onIoFocusTo"}}onKeydown(event){"Escape"!==event.key&&"Enter"!==event.key&&" "!==event.key||(event.preventDefault(),this.expanded=!1)}onIoFocusTo(event){const source=event.detail.source,command=event.detail.command,sliders=Array.from(this.querySelectorAll("[tabindex]")),index=Array.from(sliders).indexOf(source);"ArrowDown"===command||"ArrowLeft"===command&&0===index?(sliders[sliders.length-1].focus(),event.stopPropagation()):("ArrowUp"===command||"ArrowRight"===command&&index===sliders.length-1)&&(sliders[0].focus(),event.stopPropagation())}onValueInput(){this.dispatch("value-input",{property:"value",value:this.value},!0)}changed(){this.render([ioColorSlider({value:this.value,channel:"sv","@value-input":this.onValueInput}),ioColorSlider({value:this.value,channel:"h",vertical:!0,"@value-input":this.onValueInput}),void 0!==this.value.a?ioColorSlider({value:this.value,channel:"a","@value-input":this.onValueInput,vertical:!0}):null])}};__decorateClass$3([ReactiveProperty({value:!1,reflect:!0})],IoColorPanel.prototype,"expanded",2),IoColorPanel=__decorateClass$3([Register],IoColorPanel);const IoColorPanelSingleton=new IoColorPanel;setTimeout(()=>{IoOverlaySingleton.appendChild(IoColorPanelSingleton)},100);var __getOwnPropDesc$2=Object.getOwnPropertyDescriptor;let IoColorSwatch=class extends IoColorBase{static get Style(){return"\n      :host {\n        display: inline-block;\n        min-width: var(--io_fieldHeight);\n        height: var(--io_fieldHeight);\n        background-color: white;\n        background-image: linear-gradient(45deg, #808080 25%, transparent 25%), linear-gradient(-45deg, #808080 25%, transparent 25%), linear-gradient(45deg, transparent 75%, #808080 75%), linear-gradient(-45deg, transparent 75%, #808080 75%);\n        background-size: 12px 12px;\n        background-position: 0 0, 0 6px, 6px -6px, -6px 0px;\n        overflow: visible;\n      }\n      :host > div { \n        width: 100%;\n        height: 100%;\n      }\n    "}valueChanged(){super.valueChanged(),this.render([div({style:{"background-color":`rgba(${255*this.rgba[0]},${255*this.rgba[1]}, ${255*this.rgba[2]}, ${this.rgba[3]})`}})])}};IoColorSwatch=((decorators,target,key,kind)=>{for(var decorator,result=kind>1?void 0:kind?__getOwnPropDesc$2(target,key):target,i=decorators.length-1;i>=0;i--)(decorator=decorators[i])&&(result=decorator(result)||result);return result})([Register],IoColorSwatch);const ioColorSwatch=function(arg0){return IoColorSwatch.vConstructor(arg0)};var __defProp=Object.defineProperty,__getOwnPropDesc$1=Object.getOwnPropertyDescriptor,__decorateClass$1=(decorators,target,key,kind)=>{for(var decorator,result=kind>1?void 0:kind?__getOwnPropDesc$1(target,key):target,i=decorators.length-1;i>=0;i--)(decorator=decorators[i])&&(result=(kind?decorator(target,key,result):decorator(result))||result);return kind&&result&&__defProp(target,key,result),result};let IoColorPicker=class extends IoElement{static get Style(){return"\n      :host {\n        position: relative;\n        height: var(--io_fieldHeight);\n        border: var(--io_border);\n        border-color: var(--io_borderColorInset);\n        border-radius: var(--io_borderRadius);\n        overflow: hidden;\n      }\n      :host:focus {\n        @apply --io_focus;\n      }\n      :host > io-color-swatch {\n        width: 100%;\n        height: 100%;\n      }\n    "}static get Listeners(){return{click:"onClick",keydown:"onKeydown"}}get expanded(){return IoColorPanelSingleton.expanded&&IoColorPanelSingleton.value===this.value}ready(){this.valueChanged()}onClick(){this.expanded||this.expand()}onKeydown(event){switch(event.key){case"Enter":case" ":event.preventDefault(),this.expanded||this.expand();break;default:["ArrowLeft","ArrowRight","ArrowUp","ArrowDown","Home","End","PageUp","PageDown"].includes(event.key)&&(event.preventDefault(),this.dispatch("io-focus-to",{source:this,command:event.key},!0))}}onValueSet(){this.dispatch("value-input",{property:"value",value:this.value},!0)}onPanelCollapse(){this.expanded||(IoColorPanelSingleton.removeEventListener("value-input",this.onValueSet),IoColorPanelSingleton.removeEventListener("expanded-changed",this.onPanelCollapse))}expand(){IoColorPanelSingleton.value=this.value,IoColorPanelSingleton.expanded=!0,IoColorPanelSingleton.addEventListener("value-input",this.onValueSet),IoColorPanelSingleton.addEventListener("expanded-changed",this.onPanelCollapse),nudge(IoColorPanelSingleton,this,"right"),IoColorPanelSingleton.firstChild?.firstChild?.focus()}collapse(){IoColorPanelSingleton.expanded=!1,IoColorPanelSingleton.value={r:1,g:1,b:1,a:1}}valueChanged(){this.render([ioColorSwatch({value:this.value})])}};__decorateClass$1([ReactiveProperty({value:{r:1,g:1,b:1,a:1}})],IoColorPicker.prototype,"value",2),__decorateClass$1([Property(0)],IoColorPicker.prototype,"tabIndex",2),IoColorPicker=__decorateClass$1([Register],IoColorPicker);const ioColorPicker=function(arg0){return IoColorPicker.vConstructor(arg0)};var __getOwnPropDesc=Object.getOwnPropertyDescriptor;let IoColorRgba=class extends IoColorBase{static get Style(){return"\n      :host {\n        display: flex;\n        flex: 0 1 auto;\n        overflow: auto;\n      }\n      :host > io-number {\n        flex: 1 0 0;\n        overflow: hidden;\n      }\n      :host > io-number#r {\n        border-bottom-color: var(--io_bgColorRed);\n      }\n      :host > io-number#g {\n        border-bottom-color: var(--io_bgColorGreen);\n      }\n      :host > io-number#b {\n        border-bottom-color: var(--io_bgColorBlue);\n      }\n      :host > io-number#a {\n        border-bottom-color: var(--io_color);\n      }\n      :host > io-color-picker {\n        flex-shrink: 0;\n      }\n      :host > *:not(:last-child) {\n        margin-right: var(--io_spacing);\n      }\n    "}_onNumberValueInput(event){event.stopPropagation();const item=event.composedPath()[0];["r","g","b"].includes(item.id)&&(this.value[item.id]=event.detail.value),this.dispatch("value-input",{property:"value",value:this.value},!1)}changed(){this.render([ioNumber({id:"r",value:this.value.r,min:0,max:1,step:.001,ladder:!0,"@value-input":this._onNumberValueInput}),ioNumber({id:"g",value:this.value.g,min:0,max:1,step:.001,ladder:!0,"@value-input":this._onNumberValueInput}),ioNumber({id:"b",value:this.value.b,min:0,max:1,step:.001,ladder:!0,"@value-input":this._onNumberValueInput}),void 0!==this.value.a?ioNumber({id:"a",value:this.value.a,min:0,max:1,step:1e-4,ladder:!0,"@value-input":this._onNumberValueInput}):null,ioColorPicker({id:"swatch",value:this.value,"@value-input":this._onNumberValueInput})])}};IoColorRgba=((decorators,target,key,kind)=>{for(var decorator,result=kind>1?void 0:kind?__getOwnPropDesc(target,key):target,i=decorators.length-1;i>=0;i--)(decorator=decorators[i])&&(result=decorator(result)||result);return result})([Register],IoColorRgba);const ioColorRgba=function(arg0){return IoColorRgba.vConstructor(arg0)};export{IoColorBase,IoColorPanelSingleton,IoColorPicker,IoColorRgba,IoColorSlider,IoColorSliderA,IoColorSliderB,IoColorSliderG,IoColorSliderH,IoColorSliderHs,IoColorSliderL,IoColorSliderR,IoColorSliderS,IoColorSliderSl,IoColorSliderSv,IoColorSliderV,IoColorSwatch,hsl2rgb,hsv2rgb,ioColorPicker,ioColorRgba,ioColorSlider,ioColorSliderA,ioColorSliderB,ioColorSliderG,ioColorSliderH,ioColorSliderHs,ioColorSliderL,ioColorSliderR,ioColorSliderS,ioColorSliderSl,ioColorSliderSv,ioColorSliderV,ioColorSwatch,rgb2hsl,rgb2hsv};
//# sourceMappingURL=index.js.map
