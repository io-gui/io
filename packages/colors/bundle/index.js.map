{"version":3,"file":"index.js","sources":["../src/lib/color.convert.ts","../src/elements/IoColorBase.ts","../src/elements/IoColorSliders.ts","../src/elements/IoColorPanelSingleton.ts","../src/elements/IoColorSwatch.ts","../src/elements/IoColorPicker.ts","../src/elements/IoColorRgba.ts"],"sourcesContent":["/**@License\n * Copyright (c) 2011-2016 Heather Arthur <fayearthur@gmail.com>\n *\n * Permission is hereby granted, free of charge, to any person obtaining\n * a copy of this software and associated documentation files (the\n * \"Software\"), to deal in the Software without restriction, including\n * without limitation the rights to use, copy, modify, merge, publish,\n * distribute, sublicense, and/or sell copies of the Software, and to\n * permit persons to whom the Software is furnished to do so, subject to\n * the following conditions:\n *\n * The above copyright notice and this permission notice shall be\n * included in all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE\n * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\n/* MIT license */\n\nexport const rgb2hsl = function (rgb: number[]) {\n  const r = rgb[0] / 255\n  const g = rgb[1] / 255\n  const b = rgb[2] / 255\n  const min = Math.min(r, g, b)\n  const max = Math.max(r, g, b)\n  const delta = max - min\n  let h = 0\n  let s\n\n  if (max === min) {\n    h = 0\n  } else if (r === max) {\n    h = (g - b) / delta\n  } else if (g === max) {\n    h = 2 + (b - r) / delta\n  } else if (b === max) {\n    h = 4 + (r - g) / delta\n  }\n\n  h = Math.min(h * 60, 360)\n\n  if (h < 0) {\n    h += 360\n  }\n\n  const l = (min + max) / 2\n\n  if (max === min) {\n    s = 0\n  } else if (l <= 0.5) {\n    s = delta / (max + min)\n  } else {\n    s = delta / (2 - max - min)\n  }\n\n  return [h, s * 100, l * 100]\n}\n\nexport const rgb2hsv = function (rgb: number[]) {\n  let rdif\n  let gdif\n  let bdif\n  let h = 0\n  let s\n\n  const r = rgb[0] / 255\n  const g = rgb[1] / 255\n  const b = rgb[2] / 255\n  const v = Math.max(r, g, b)\n  const diff = v - Math.min(r, g, b)\n  const diffc = function (c: number) {\n    return (v - c) / 6 / diff + 1 / 2\n  }\n\n  if (diff === 0) {\n    h = 0\n    s = 0\n  } else {\n    s = diff / v\n    rdif = diffc(r)\n    gdif = diffc(g)\n    bdif = diffc(b)\n\n    if (r === v) {\n      h = bdif - gdif\n    } else if (g === v) {\n      h = (1 / 3) + rdif - bdif\n    } else if (b === v) {\n      h = (2 / 3) + gdif - rdif\n    }\n\n    if (h < 0) {\n      h += 1\n    } else if (h > 1) {\n      h -= 1\n    }\n  }\n\n  return [\n    h * 360,\n    s * 100,\n    v * 100\n  ]\n}\n\nexport const hsl2rgb = function (hsl: number[]) {\n  const h = hsl[0] / 360\n  const s = hsl[1] / 100\n  const l = hsl[2] / 100\n  let t2\n  let t3\n  let val\n\n  if (s === 0) {\n    val = l * 255\n    return [val, val, val]\n  }\n\n  if (l < 0.5) {\n    t2 = l * (1 + s)\n  } else {\n    t2 = l + s - l * s\n  }\n\n  const t1 = 2 * l - t2\n\n  const rgb = [0, 0, 0]\n  for (let i = 0; i < 3; i++) {\n    t3 = h + 1 / 3 * -(i - 1)\n    if (t3 < 0) {\n      t3++\n    }\n\n    if (t3 > 1) {\n      t3--\n    }\n\n    if (6 * t3 < 1) {\n      val = t1 + (t2 - t1) * 6 * t3\n    } else if (2 * t3 < 1) {\n      val = t2\n    } else if (3 * t3 < 2) {\n      val = t1 + (t2 - t1) * (2 / 3 - t3) * 6\n    } else {\n      val = t1\n    }\n\n    rgb[i] = val * 255\n  }\n\n  return rgb\n}\n\nexport const hsv2rgb = function (hsv: number[]) {\n  const h = hsv[0] / 60\n  const s = hsv[1] / 100\n  let v = hsv[2] / 100\n  const hi = Math.floor(h) % 6\n\n  const f = h - Math.floor(h)\n  const p = 255 * v * (1 - s)\n  const q = 255 * v * (1 - (s * f))\n  const t = 255 * v * (1 - (s * (1 - f)))\n  v *= 255\n\n  switch (hi) {\n    case 0:\n      return [v, t, p]\n    case 1:\n      return [q, v, p]\n    case 2:\n      return [p, v, t]\n    case 3:\n      return [p, q, v]\n    case 4:\n      return [t, p, v]\n    case 5:\n    default:\n      return [v, p, q]\n  }\n}\n","import { IoElement, IoElementProps, ReactiveProperty, Register, WithBinding, ReactivityType } from '@io-gui/core'\nimport { hsl2rgb, rgb2hsl, rgb2hsv, hsv2rgb } from '../lib/color.convert.js'\n\nexport type IoColorBaseProps = IoElementProps & {\n  value?: WithBinding<{ r: number; g: number; b: number; a?: number }>\n}\n\n@Register\nexport class IoColorBase extends IoElement {\n\n  @ReactiveProperty('throttled')\n  declare reactivity: ReactivityType\n\n  @ReactiveProperty({type: Object, init: {r: 1, g: 1, b: 1, a: 1}})\n  declare value: {r: number; g: number; b: number; a?: number}\n\n  @ReactiveProperty({type: Array, init: [1, 1, 1, 1]})\n  declare rgba: [number, number, number, number]\n\n  @ReactiveProperty({type: Array, init: [1, 1, 1]})\n  declare hsv: [number, number, number]\n\n  @ReactiveProperty({type: Array, init: [1, 1, 1]})\n  declare hsl: [number, number, number]\n\n  ready() {\n    // this.throttle(this.valueChanged);\n    this.valueChanged()\n    this.changed()\n  }\n  valueMutated() {\n    // this.throttle(this.valueChanged);\n    this.valueChanged()\n    this.changed()\n  }\n  rgbFromHsv() {\n    const rgb = hsv2rgb([\n      this.hsv[0] * 360,\n      this.hsv[1] * 100,\n      this.hsv[2] * 100,\n    ])\n    this.rgba[0] = rgb[0] / 255\n    this.rgba[1] = rgb[1] / 255\n    this.rgba[2] = rgb[2] / 255\n  }\n  rgbFromHsl() {\n    const rgb = hsl2rgb([\n      this.hsl[0] * 360,\n      this.hsl[1] * 100,\n      this.hsl[2] * 100,\n    ])\n    this.rgba[0] = rgb[0] / 255\n    this.rgba[1] = rgb[1] / 255\n    this.rgba[2] = rgb[2] / 255\n  }\n  valueFromRgb() {\n    this.value.r = this.rgba[0]\n    this.value.g = this.rgba[1]\n    this.value.b = this.rgba[2]\n  }\n  valueChanged() {\n    debug: {\n      const c = Object.keys(this.value)\n      if (c.indexOf('r') === -1 || c.indexOf('g') === -1 || c.indexOf('b') === -1) {\n        console.warn('IoColor: Incorrect value type!')\n      }\n    }\n\n    const rgb = [this.value.r * 255, this.value.g * 255, this.value.b * 255]\n    const hsv = rgb2hsv(rgb)\n    const hsl = rgb2hsl(rgb)\n\n    // Prevent color conversion from flippping hue 360.\n    if (hsv[0] === 0 || hsv[0] === 360) hsv[0] = this.hsv[0] * 360\n    if (hsl[0] === 0 || hsl[0] === 360) hsl[0] = this.hsl[0] * 360\n\n    // Prevent saturation 0 from collapsing hue to 0.\n    if (hsv[1] === 0) hsv[0] = this.hsv[0] * 360\n    if (hsl[1] === 0) hsl[0] = this.hsl[0] * 360\n\n    // Prevent lightness/value 0 from collapsing hue/saturation to 0.\n    if (hsv[2] === 0) hsv[1] = this.hsv[1] * 100\n    if (hsl[2] === 0 || hsl[2] === 100) {\n      hsl[0] = this.hsl[0] * 360\n      hsl[1] = this.hsl[1] * 100\n    }\n\n    this.rgba[0] = rgb[0] / 255\n    this.rgba[1] = rgb[1] / 255\n    this.rgba[2] = rgb[2] / 255\n    this.rgba[3] = this.value.a ?? 1\n    this.hsv[0] = hsv[0] / 360\n    this.hsv[1] = hsv[1] / 100\n    this.hsv[2] = hsv[2] / 100\n    this.hsl[0] = hsl[0] / 360\n    this.hsl[1] = hsl[1] / 100\n    this.hsl[2] = hsl[2] / 100\n\n    this.setProperties({\n      rgba: this.rgba,\n      hsv: this.hsv,\n      hsl: this.hsl,\n    })\n  }\n}\n","import { Register, ReactiveProperty, glsl, WithBinding, Node } from '@io-gui/core'\nimport { IoSlider, IoSlider2d } from '@io-gui/sliders'\nimport { IoColorBase, IoColorBaseProps } from './IoColorBase.js'\n\nexport type IoColorSliderProps = IoColorBaseProps & {\n  color?: WithBinding<[number, number, number, number]>\n  step?: number\n  channel?: 'r' | 'g' | 'b' | 'a' | 'h' | 's' | 'v' | 'l' | 'hs' | 'sv' | 'sl'\n  vertical?: boolean\n}\n\n/**\n * A generic color slider element.\n * It is a wrapper for channel-specific sliders which are added as a child of this element depending on the `channel` property.\n * For example, setting `channel: 'h'` will instantiate a slider for \"hue\" color channel and hook up necessary conversions, bindings and event callbacks.\n **/\n@Register\nexport class IoColorSlider extends IoColorBase {\n  static get Style() {\n    return /* css */`\n      :host {\n        display: flex;\n      }\n    `\n  }\n\n  // Is this needed? Perhgaps value can be used in glsl?\n  @ReactiveProperty({type: Array, init: [0, 0, 0, 0]})\n  declare color: [number, number, number, number]\n\n  @ReactiveProperty({type: Number, value: 0.01})\n  declare step: number\n\n  @ReactiveProperty('a')\n  declare channel: 'r' | 'g' | 'b' | 'a' | 'h' | 's' | 'v' | 'l' | 'hs' | 'sv' | 'sl'\n\n  @ReactiveProperty({value: false, reflect: true})\n  declare vertical: boolean\n\n  _onValueInput(event: CustomEvent) {\n    const v = event.detail.value\n    const oldValue = JSON.stringify(this.value)\n    switch (this.channel) {\n      case 'r':\n        this.value.r = v\n        break\n        case 'g':\n        this.value.g = v\n        break\n        case 'b':\n        this.value.b = v\n        break\n        case 'a':\n        this.value.a = v\n        break\n      case 'h':\n        this.hsv[0] = v\n        this.rgbFromHsv()\n        this.valueFromRgb()\n        break\n      case 's':\n        this.hsv[1] = v\n        this.rgbFromHsv()\n        this.valueFromRgb()\n        break\n      case 'v':\n        this.hsv[2] = v\n        this.rgbFromHsv()\n        this.valueFromRgb()\n        break\n      case 'l':\n        this.hsl[2] = v\n        this.rgbFromHsl()\n        this.valueFromRgb()\n        break\n      case 'hs':\n        this.hsv[0] = v[0]\n        this.hsv[1] = v[1]\n        this.rgbFromHsv()\n        this.valueFromRgb()\n        break\n      case 'sv':\n        this.hsv[1] = v[0]\n        this.hsv[2] = v[1]\n        this.rgbFromHsv()\n        this.valueFromRgb()\n        break\n      case 'sl':\n        this.hsl[1] = v[0]\n        this.hsl[2] = v[1]\n        this.rgbFromHsl()\n        this.valueFromRgb()\n        break\n    }\n    if (oldValue === JSON.stringify(this.value)) return\n\n    if (!(this.value as unknown as Node)._isNode) {\n      this.dispatchMutation(this.value)\n    }\n    this.dispatch('value-input', {property: 'value', value: this.value}, false)\n  }\n\n  changed() {\n    const c = this.channel\n\n    debug: if (['r', 'g', 'b', 'a', 'h', 's', 'v', 'l', 'hs', 'sv', 'sl'].indexOf(c) === -1) {\n      console.warn('IoColorSlider: Incorrect channel value!', c)\n    }\n\n    let slider = null\n    switch (c) {\n      case 'r': slider = ioColorSliderR(); break\n      case 'g': slider = ioColorSliderG(); break\n      case 'b': slider = ioColorSliderB(); break\n      case 'a': slider = ioColorSliderA(); break\n      case 'h': slider = ioColorSliderH(); break\n      case 's': slider = ioColorSliderS(); break\n      case 'v': slider = ioColorSliderV(); break\n      case 'l': slider = ioColorSliderL(); break\n      case 'hs': slider = ioColorSliderHs(); break\n      case 'sv': slider = ioColorSliderSv(); break\n      case 'sl': slider = ioColorSliderSl(); break\n    }\n    let value: number | [number, number] = 0\n    let color: [number, number, number, number] = [0, 0, 0, 0]\n    let min: number | [number, number] = 0\n    let max: number | [number, number] = 1\n    let step: number | [number, number] = this.step\n\n    switch (this.channel) {\n      case 'r':\n        value = this.value.r\n        color = [...this.rgba]\n        break\n      case 'g':\n        value = this.value.g\n        color = [...this.rgba]\n        break\n      case 'b':\n        value = this.value.b\n        color = [...this.rgba]\n        break\n      case 'a':\n        value = this.value.a || 0\n        color = [...this.rgba]\n        break\n      case 'h':\n        value = this.hsv[0]\n        color = [...this.hsv, 1]\n        break\n      case 's':\n        value = this.hsv[1]\n        color = [...this.hsv, 1]\n        break\n      case 'v':\n        value = this.hsv[2]\n        color = [...this.hsv, 1]\n        break\n      case 'l':\n        value = this.hsl[2]\n        color = [...this.hsl, 1]\n        break\n      case 'hs':\n        value = [this.hsv[0], this.hsv[1]]\n        color = [...this.hsv, 1]\n        min = [min, min]\n        max = [max, max]\n        step = [step, step]\n        break\n      case 'sv':\n        value = [this.hsv[1], this.hsv[2]]\n        color = [...this.hsv, 1]\n        min = [min, min]\n        max = [max, max]\n        step = [step, step]\n        break\n      case 'sl':\n        value = [this.hsl[1], this.hsl[2]]\n        color = [...this.hsl, 1]\n        min = [min, min]\n        max = [max, max]\n        step = [step, step]\n        break\n    }\n\n    // TODO: values are always new objects which causes double rendering when interacting with the slider.\n    // This causes change() to be called so does valueMutated() from the slider itself.\n    // TODO: Fix!\n    slider.props = {id: c, value: value, min: min, max: max, step: step, vertical: this.vertical, color: color, '@value-input': this._onValueInput}\n\n    this.render([\n      slider,\n    ])\n  }\n}\nexport const ioColorSlider = function(arg0?: IoColorSliderProps) {\n  return IoColorSlider.vConstructor(arg0)\n}\n/**\n * A base class for 1D color slider.\n * It as an incomplete implementation of a color slider desiged to be fully implemented in channel-specific subclasses.\n **/\nclass IoColorSliderBase extends IoSlider {\n  @ReactiveProperty({type: Array, init: [0, 0, 0, 0]})\n  declare color: [number, number, number, number]\n\n  static get GlUtils() {\n    return /* glsl */`\n      // Note: Implement in subclass!\n      // TODO: Allow GlUtils to rewrite inherited functions!\n      // vec3 getStartColor(vec2 uv) {}\n      // vec3 getEndColor(vec2 uv) {}\n      ${glsl.hue2rgb}\n      ${glsl.hsv2rgb}\n      ${glsl.hsl2rgb}\n\n      vec3 paintHorizontalLine(vec3 dstCol, vec2 p, vec3 color) {\n        float lineShape = lineHorizontal(p, io_borderWidth * 2.0);\n        return compose(dstCol, vec4(color, lineShape));\n      }\n    `\n  }\n  static get Frag() {\n    return /* glsl */`\n    varying vec2 vUv;\n\n    void main(void) {\n      // Dimensions\n      vec2 size = uVertical == 1 ? uSize.yx : uSize;\n      vec2 uv = uVertical == 1 ? vUv.yx : vUv;\n      vec2 position = size * vec2(uv.x, uv.y - 0.5);\n      float valueInRange = (uValue - uMin) / (uMax - uMin);\n\n      // Colors\n      vec3 finalCol = io_bgColorInput.rgb;\n      vec3 startCol = getStartColor(uv);\n      vec3 gridCol = io_bgColorLight.rgb;\n      vec3 endCol = getEndColor(uv);\n      vec3 sliderCol = mix(startCol, endCol, uv.x);\n\n      vec2 linePos = translate(size * uv, 0.0, size.y / 2.);\n      finalCol = paintHorizontalLine(finalCol, linePos, sliderCol);\n\n      // Grid\n      float gridSize = size.x / abs((uMax - uMin) / uStep);\n      float gridOffset = mod(uStep - uMin, uStep) / (uMax - uMin) * size.x;\n      float gridShape = paintDerivativeGrid2D(translate(position, gridOffset, 0.0), vec2(gridSize, 0.0), io_borderWidth);\n      if (size.x * uStep < 4.0) gridShape = 0.0;\n      finalCol = compose(finalCol, vec4(sliderCol, gridShape * 0.25));\n\n      // Slider\n      float sliderShape = rectangle(position, vec2(size.x * valueInRange, size.y));\n      finalCol = compose(finalCol, vec4(sliderCol, sliderShape));\n      finalCol = compose(finalCol, vec4(io_bgColorInput.rgb, gridShape * sliderShape * 0.125));\n\n      gl_FragColor = vec4(finalCol, 1.0);\n    }`\n  }\n  // TODO: temp fix\n  valueMutated() {}\n}\n\n/**\n * A base class for 2D color slider.\n * It as an incomplete implementation of a color slider desiged to be fully implemented in channel-specific subclasses.\n **/\nclass IoColorSlider2dBase extends IoSlider2d {\n  @ReactiveProperty({type: Array, init: [0, 0, 0, 0]})\n  declare color: [number, number, number, number]\n\n  static get GlUtils() {\n    return /* glsl */`\n      // Note: Implement in subclass!\n      // TODO: Allow GlUtils to rewrite inherited functions!\n      // vec3 getColor(vec2 uv) {}\n      ${glsl.hue2rgb}\n      ${glsl.hsv2rgb}\n      ${glsl.hsl2rgb}\n    `\n  }\n  static get Frag() {\n    return /* glsl */`\n    varying vec2 vUv;\n\n    void main(void) {\n      // Dimensions\n      vec2 size = uVertical == 1 ? uSize.yx : uSize;\n      vec2 uv = uVertical == 1 ? vUv.yx : vUv;\n      vec2 position = size * (uv - vec2(0.5));\n\n      // Colors\n      vec3 finalCol = color_field(uv);\n      vec3 gridCol = io_bgColorLight.rgb;\n      vec3 sliderCol = color_field(uValue);\n\n      // Grid\n      vec2 gridSize = size / abs((uMax - uMin) / uStep);\n      vec2 gridOffset = (uMax + uMin) / (uMax - uMin) * size / 2.;\n      vec2 gridPosition = translate(position, -gridOffset);\n      float gridShape = paintDerivativeGrid2D(gridPosition, gridSize, io_borderWidth);\n      if (min(size.x * uStep.x, size.y * uStep.y) < 2.0) gridShape = 0.0;\n      finalCol = compose(finalCol, vec4(gridCol, gridShape * 0.5));\n\n      vec2 knobPos = uValue / (uMax - uMin) * size;\n      finalCol = paintKnob(finalCol, gridPosition, knobPos, sliderCol);\n\n      gl_FragColor = vec4(finalCol, 1.0);\n    }`\n  }\n  // TODO: temp fix\n  valueMutated() {}\n}\n\n/**\n * A 1D slider for \"red\" color channel.\n **/\n@Register\nexport class IoColorSliderR extends IoColorSliderBase {\n  static get GlUtils() {\n    return /* glsl */`\n      vec3 getStartColor(vec2 uv) {\n        return vec3(uv.x, uColor[1], uColor[2]);\n      }\n      vec3 getEndColor(vec2 uv) {\n        return vec3(uv.x, uColor[1], uColor[2]);\n      }\n    `\n  }\n}\nexport const ioColorSliderR = function(arg0?: IoColorSliderProps) {\n  return IoColorSliderR.vConstructor(arg0)\n}\n\n/**\n * A 1D slider for \"green\" color channel.\n **/\n@Register\nexport class IoColorSliderG extends IoColorSliderBase {\n  static get GlUtils() {\n    return /* glsl */`\n      vec3 getStartColor(vec2 uv) {\n        return vec3(uColor[0], uv.x, uColor[2]);\n      }\n      vec3 getEndColor(vec2 uv) {\n        return vec3(uColor[0], uv.x, uColor[2]);\n      }\n    `\n  }\n}\nexport const ioColorSliderG = function(arg0?: IoColorSliderProps) {\n  return IoColorSliderG.vConstructor(arg0)\n}\n\n/**\n * A 1D slider for \"blue\" color channel.\n **/\n@Register\nexport class IoColorSliderB extends IoColorSliderBase {\n  static get GlUtils() {\n    return /* glsl */`\n      vec3 getStartColor(vec2 uv) {\n        return vec3(uColor[0], uColor[1], uv.x);\n      }\n      vec3 getEndColor(vec2 uv) {\n        return vec3(uColor[0], uColor[1], uv.x);\n      }\n    `\n  }\n}\nexport const ioColorSliderB = function(arg0?: IoColorSliderProps) {\n  return IoColorSliderB.vConstructor(arg0)\n}\n/**\n * A 1D slider for \"alpha\" color channel.\n **/\n@Register\nexport class IoColorSliderA extends IoColorSliderBase {\n  static get GlUtils() {\n    return /* glsl */`\n      vec3 getStartColor(vec2 uv) {\n        vec2 size = uVertical == 1 ? uSize.yx : uSize;\n        vec2 position = size * (uv - vec2(0.0, 0.5));\n        return mix(vec3(0.5), vec3(1.0), checkerX(position, io_fieldHeight / 4.0));\n      }\n      vec3 getEndColor(vec2 uv) {\n        vec2 size = uVertical == 1 ? uSize.yx : uSize;\n        vec2 position = size * (uv - vec2(0.0, 0.5));\n        vec3 chkCol = mix(vec3(0.5), vec3(1.0), checkerX(position, io_fieldHeight / 4.0));\n        return mix(chkCol, uColor.rgb, 1.0);\n      }\n    `\n  }\n}\nexport const ioColorSliderA = function(arg0?: IoColorSliderProps) {\n  return IoColorSliderA.vConstructor(arg0)\n}\n\n/**\n * A 1D slider for \"hue\" color channel.\n **/\n@Register\nexport class IoColorSliderH extends IoColorSliderBase {\n  static get GlUtils() {\n    return /* glsl */`\n      vec3 getStartColor(vec2 uv) {\n        return hsv2rgb(vec3(uv.x, uColor[1], uColor[2]));\n      }\n      vec3 getEndColor(vec2 uv) {\n        return hsv2rgb(vec3(uv.x, uColor[1], uColor[2]));\n      }\n    `\n  }\n}\nexport const ioColorSliderH = function(arg0?: IoColorSliderProps) {\n  return IoColorSliderH.vConstructor(arg0)\n}\n/**\n * A 1D slider for \"saturation\" color channel.\n **/\n@Register\nexport class IoColorSliderS extends IoColorSliderBase {\n  static get GlUtils() {\n    return /* glsl */`\n      vec3 getStartColor(vec2 uv) {\n        return hsv2rgb(vec3(uColor[0], uv.x, uColor[2]));\n      }\n      vec3 getEndColor(vec2 uv) {\n        return hsv2rgb(vec3(uColor[0], uv.x, uColor[2]));\n      }\n    `\n  }\n}\nexport const ioColorSliderS = function(arg0?: IoColorSliderProps) {\n  return IoColorSliderS.vConstructor(arg0)\n}\n\n/**\n * A 1D slider for \"value\" color channel.\n **/\n@Register\nexport class IoColorSliderV extends IoColorSliderBase {\n  static get GlUtils() {\n    return /* glsl */`\n      vec3 getStartColor(vec2 uv) {\n        return hsv2rgb(vec3(uColor[0], uColor[1], uv.x));\n      }\n      vec3 getEndColor(vec2 uv) {\n        return hsv2rgb(vec3(uColor[0], uColor[1], uv.x));\n      }\n    `\n  }\n}\nexport const ioColorSliderV = function(arg0?: IoColorSliderProps) {\n  return IoColorSliderV.vConstructor(arg0)\n}\n\n/**\n * A 1D slider for \"level\" color channel.\n **/\n@Register\nexport class IoColorSliderL extends IoColorSliderBase {\n  static get GlUtils() {\n    return /* glsl */`\n      vec3 getStartColor(vec2 uv) {\n        return hsl2rgb(vec3(uColor[0], uColor[1], uv.x));\n      }\n      vec3 getEndColor(vec2 uv) {\n        return hsl2rgb(vec3(uColor[0], uColor[1], uv.x));\n      }\n    `\n  }\n}\nexport const ioColorSliderL = function(arg0?: IoColorSliderProps) {\n  return IoColorSliderL.vConstructor(arg0)\n}\n\n/**\n * A 2D slider gor \"hue\" and \"saturation\" color channels.\n **/\n@Register\nexport class IoColorSliderHs extends IoColorSlider2dBase {\n  static get GlUtils() {\n    return /* glsl */`\n      vec3 color_field(vec2 uv) {\n        return hsv2rgb(vec3(uv, uColor[2]));\n      }\n    `\n  }\n}\nexport const ioColorSliderHs = function(arg0?: IoColorSliderProps) {\n  return IoColorSliderHs.vConstructor(arg0)\n}\n\n/**\n * A 2D slider gor \"saturation\" and \"value\" color channels.\n **/\n@Register\nexport class IoColorSliderSv extends IoColorSlider2dBase {\n  static get GlUtils() {\n    return /* glsl */`\n      vec3 color_field(vec2 uv) {\n        return hsv2rgb(vec3(uColor[0], uv));\n      }\n    `\n  }\n}\nexport const ioColorSliderSv = function(arg0?: IoColorSliderProps) {\n  return IoColorSliderSv.vConstructor(arg0)\n}\n\n/**\n * A 2D slider gor \"saturation\" and \"level\" color channels.\n **/\n@Register\nexport class IoColorSliderSl extends IoColorSlider2dBase {\n  static get GlUtils() {\n    return /* glsl */`\n      vec3 color_field(vec2 uv) {\n        return hsl2rgb(vec3(uColor[0], uv));\n      }\n    `\n  }\n}\nexport const ioColorSliderSl = function(arg0?: IoColorSliderProps) {\n  return IoColorSliderSl.vConstructor(arg0)\n}\n","import { Register, ReactiveProperty, IoOverlaySingleton } from '@io-gui/core'\nimport { IoColorBase } from './IoColorBase.js'\nimport { ioColorSlider } from './IoColorSliders.js'\n\n/**\n * Input element for color displayed as a set of sliders.\n * This element has a singleton instance `IoColorPanelSingleton` used by `IoColorPicker` and other elements.\n **/\n@Register\nclass IoColorPanel extends IoColorBase {\n  static get Style() {\n    return /* css */`\n    :host {\n      display: flex;\n      flex-direction: row;\n      border: var(--io_border);\n      border-color: var(--io_borderColorOutset);\n      background-color: var(--io_bgColorLight);\n      padding: var(--io_spacing2);\n      border-radius: calc(var(--io_borderRadius) + var(--io_spacing2));\n    }\n    :host:not([expanded]) {\n      display: none;\n    }\n    :host > *:not(:last-child) {\n      margin: 0 var(--io_spacing2) 0 0;\n    }\n    `\n  }\n\n  @ReactiveProperty({value: false, reflect: true})\n  declare expanded: boolean\n\n  static get Listeners() {\n    return {\n      'keydown': 'onKeydown',\n      'io-focus-to': 'onIoFocusTo',\n    }\n  }\n\n  onKeydown(event: KeyboardEvent) {\n    if (event.key === 'Escape' || event.key === 'Enter' || event.key === ' ') {\n      event.preventDefault()\n      this.expanded = false\n    }\n  }\n  onIoFocusTo(event: CustomEvent) {\n    const source = event.detail.source\n    const command = event.detail.command\n    const sliders = Array.from(this.querySelectorAll('[tabindex]')) as HTMLElement[]\n    const index = Array.from(sliders).indexOf(source)\n    if (command === 'ArrowDown' || (command === 'ArrowLeft' && index === 0)) {\n      sliders[sliders.length - 1].focus()\n      event.stopPropagation()\n    } else if (command === 'ArrowUp' || (command === 'ArrowRight' && index === sliders.length - 1)) {\n      sliders[0].focus()\n      event.stopPropagation()\n    }\n  }\n  onValueInput() {\n    this.dispatch('value-input', {property: 'value', value: this.value}, true)\n  }\n  changed() {\n    this.render([\n      ioColorSlider({value: this.value, channel: 'sv', '@value-input': this.onValueInput}),\n      ioColorSlider({value: this.value, channel: 'h', vertical: true, '@value-input': this.onValueInput}),\n      this.value.a !== undefined ? ioColorSlider({value: this.value, channel: 'a', '@value-input': this.onValueInput, vertical: true}) : null,\n    ])\n  }\n}\n\nexport const IoColorPanelSingleton = new IoColorPanel()\nsetTimeout(() => {\n  IoOverlaySingleton.appendChild(IoColorPanelSingleton as HTMLElement)\n}, 100)\n","import { Register, div } from '@io-gui/core'\nimport { IoColorBase, IoColorBaseProps } from './IoColorBase.js'\n\n/**\n * Element displaying colored square.\n *\n * <io-element-demo element=\"io-color-swatch\"\n * properties='{\"value\": [1, 0.5, 0, 1]}'\n * config='{\"value\": [\"io-property-editor\"]}\n * '></io-element-demo>\n **/\n@Register\nexport class IoColorSwatch extends IoColorBase {\n  static get Style() {\n    return /* css */`\n      :host {\n        display: inline-block;\n        min-width: var(--io_fieldHeight);\n        height: var(--io_fieldHeight);\n        background-color: white;\n        background-image: linear-gradient(45deg, #808080 25%, transparent 25%), linear-gradient(-45deg, #808080 25%, transparent 25%), linear-gradient(45deg, transparent 75%, #808080 75%), linear-gradient(-45deg, transparent 75%, #808080 75%);\n        background-size: 12px 12px;\n        background-position: 0 0, 0 6px, 6px -6px, -6px 0px;\n        overflow: visible;\n      }\n      :host > div { \n        width: 100%;\n        height: 100%;\n      }\n    `\n  }\n  valueChanged() {\n    super.valueChanged()\n    this.render([\n      div({style: {'background-color': `rgba(${this.rgba[0] * 255 },${this.rgba[1] * 255}, ${this.rgba[2] * 255}, ${this.rgba[3]})`}})\n    ])\n  }\n}\nexport const ioColorSwatch = function(arg0?: IoColorBaseProps) {\n  return IoColorSwatch.vConstructor(arg0)\n}","import { Register, ReactiveProperty, IoElement, IoElementProps, Property, WithBinding, nudge } from '@io-gui/core'\nimport { IoColorPanelSingleton as Panel } from './IoColorPanelSingleton.js'\nimport { ioColorSwatch } from './IoColorSwatch.js'\n\n// TODO: focus picker on expand.\n// TODO: collapse picker on blur.\n// TODO: fix focus keybord navigation.\n\nexport type IoColorPickerProps = IoElementProps &{\n  value: WithBinding<{ r: number; g: number; b: number; a?: number }>\n}\n\n@Register\nexport class IoColorPicker extends IoElement {\n  static get Style() {\n    return /* css */`\n      :host {\n        position: relative;\n        height: var(--io_fieldHeight);\n        border: var(--io_border);\n        border-color: var(--io_borderColorInset);\n        border-radius: var(--io_borderRadius);\n        overflow: hidden;\n      }\n      :host:focus {\n        @apply --io_focus;\n      }\n      :host > io-color-swatch {\n        width: 100%;\n        height: 100%;\n      }\n    `\n  }\n\n  @ReactiveProperty({value: {r: 1, g: 1, b: 1, a: 1}})\n  declare value: {r: number; g: number; b: number; a?: number}\n\n  static get Listeners(): any {\n    return {\n      'click': 'onClick',\n      'keydown': 'onKeydown',\n    }\n  }\n\n  @Property(0)\n  declare tabIndex: number\n\n  get expanded() {\n    return Panel.expanded && Panel.value === this.value\n  }\n\n  ready() {\n    this.valueChanged()\n  }\n\n  onClick() {\n    if (!this.expanded) this.expand()\n  }\n\n  onKeydown(event: KeyboardEvent) {\n    switch (event.key) {\n      case 'Enter':\n      case ' ':\n        event.preventDefault()\n        if (!this.expanded) this.expand()\n        break\n      default:\n        if (['ArrowLeft', 'ArrowRight', 'ArrowUp', 'ArrowDown', 'Home', 'End', 'PageUp', 'PageDown'].includes(event.key)) {\n          event.preventDefault()\n          this.dispatch('io-focus-to', {source: this, command: event.key}, true)\n        }\n    }\n  }\n  onValueSet() {\n    this.dispatch('value-input', {property: 'value', value: this.value}, true)\n  }\n  onPanelCollapse() {\n    // TODO: Reconsider this.\n    if (!this.expanded) {\n      Panel.removeEventListener('value-input', this.onValueSet)\n      Panel.removeEventListener('expanded-changed', this.onPanelCollapse)\n    }\n  }\n  expand() {\n    Panel.value = this.value\n    Panel.expanded = true\n    Panel.addEventListener('value-input', this.onValueSet)\n    Panel.addEventListener('expanded-changed', this.onPanelCollapse)\n    nudge(Panel, this, 'right');\n    (Panel.firstChild?.firstChild as HTMLElement)?.focus()\n  }\n  collapse() {\n    Panel.expanded = false\n    Panel.value = {r: 1, g: 1, b: 1, a: 1}\n  }\n  valueChanged() {\n    this.render([\n      ioColorSwatch({value: this.value})\n    ])\n  }\n}\nexport const ioColorPicker = function(arg0: IoColorPickerProps) {\n  return IoColorPicker.vConstructor(arg0)\n}\n","import { Register } from '@io-gui/core'\nimport { ioNumber } from '@io-gui/inputs'\nimport { IoColorBase, IoColorBaseProps } from './IoColorBase.js'\nimport { ioColorPicker } from './IoColorPicker.js'\n\n/**\n * Input element for color displayed as vector and an interactive picker.\n **/\n@Register\nexport class IoColorRgba extends IoColorBase {\n  static get Style() {\n    return /* css */`\n      :host {\n        display: flex;\n        flex: 0 1 auto;\n      }\n      :host > io-number {\n        flex: 1 0 0;\n      }\n      :host > io-number#r {\n        border-bottom-color: var(--io_bgColorRed);\n      }\n      :host > io-number#g {\n        border-bottom-color: var(--io_bgColorGreen);\n      }\n      :host > io-number#b {\n        border-bottom-color: var(--io_bgColorBlue);\n      }\n      :host > io-number#a {\n        border-bottom-color: var(--io_color);\n      }\n      :host > io-color-picker {\n        flex-shrink: 0;\n      }\n      :host > *:not(:last-child) {\n        margin-right: var(--io_spacing);\n      }\n    `\n  }\n\n  _onNumberValueInput(event: CustomEvent) {\n    event.stopPropagation()\n    const item = event.composedPath()[0] as HTMLElement\n    if (['r', 'g', 'b'].includes(item.id)) {\n      this.value[item.id as keyof typeof this.value] = event.detail.value\n    }\n    this.dispatch('value-input', {property: 'value', value: this.value}, false)\n  }\n\n  changed() {\n    this.render([\n      // Consider removing global id collisions.\n      ioNumber({id: 'r', value: this.value.r, min: 0, max: 1, step: 0.001, ladder: true, '@value-input': this._onNumberValueInput}),\n      ioNumber({id: 'g', value: this.value.g, min: 0, max: 1, step: 0.001, ladder: true, '@value-input': this._onNumberValueInput}),\n      ioNumber({id: 'b', value: this.value.b, min: 0, max: 1, step: 0.001, ladder: true, '@value-input': this._onNumberValueInput}),\n      this.value.a !== undefined\n        ? ioNumber({id: 'a', value: this.value.a, min: 0, max: 1, step: 0.0001, ladder: true, '@value-input': this._onNumberValueInput})\n        : null,\n      ioColorPicker({id: 'swatch', value: this.value, '@value-input': this._onNumberValueInput}),\n    ])\n  }\n}\nexport const ioColorRgba = function(arg0?: IoColorBaseProps) {\n  return IoColorRgba.vConstructor(arg0)\n}\n"],"names":["rgb2hsl","rgb","r","g","b","min","max","delta","h","s","l","rgb2hsv","rdif","gdif","bdif","diff","diffc","c","hsl2rgb","hsl","t2","t3","val","t1","i","hsv2rgb","hsv","v","hi","f","p","q","t","IoColorBase","IoElement","__decorateClass","ReactiveProperty","Register","IoColorSlider","event","oldValue","slider","ioColorSliderR","ioColorSliderG","ioColorSliderB","ioColorSliderA","ioColorSliderH","ioColorSliderS","ioColorSliderV","ioColorSliderL","ioColorSliderHs","ioColorSliderSv","ioColorSliderSl","value","color","step","ioColorSlider","arg0","IoColorSliderBase","IoSlider","glsl","IoColorSlider2dBase","IoSlider2d","IoColorSliderR","IoColorSliderG","IoColorSliderB","IoColorSliderA","IoColorSliderH","IoColorSliderS","IoColorSliderV","IoColorSliderL","IoColorSliderHs","IoColorSliderSv","IoColorSliderSl","IoColorPanel","source","command","sliders","index","IoColorPanelSingleton","IoOverlaySingleton","IoColorSwatch","div","ioColorSwatch","IoColorPicker","Panel","nudge","Property","ioColorPicker","IoColorRgba","item","ioNumber","ioColorRgba"],"mappings":"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"}