{"version":3,"file":"IoTabDropMarker.js","sourceRoot":"","sources":["../../src/elements/IoTabDropMarker.ts"],"names":[],"mappings":"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","sourcesContent":["import { Register, ReactiveProperty, IoElement, IoElementProps, ThemeSingleton } from 'io-core';\nimport { IoTab } from './IoTab.js';\nimport { SplitDirection } from '../nodes/Split.js';\nimport { IoPanel } from './IoPanel.js';\n\n@Register\nclass IoTabDropMarker extends IoElement {\n  static get Style() {\n    return /* css */`\n      :host {\n        position: fixed;\n        height: calc(var(--io_fieldHeight) - var(--io_borderWidth) - var(--io_borderRadius));\n        width: var(--io_spacing);\n        background-color: var(--io_bgColorBlue);\n        margin-bottom: var(--io_borderWidth);\n        z-index: 100000;\n        display: none;\n      }\n      :host:not([dropindex=\"-1\"]) {\n        display: block;\n      }\n      :host:not([splitdirection=\"none\"]) {\n        display: block;\n        opacity: 0.25;\n      }\n    `;\n  }\n\n  @ReactiveProperty(null)\n  declare dropTarget: IoPanel | null;\n\n  @ReactiveProperty({type: String, value: 'none', reflect: true})\n  declare splitDirection: SplitDirection;\n\n  @ReactiveProperty({type: Number, value: -1, reflect: true})\n  declare dropIndex: number;\n\n  constructor(args: IoElementProps = {}) { super(args); }\n\n  changed() {\n    if (this.dropTarget && this.dropIndex !== -1) {\n      const tabs = this.dropTarget.querySelectorAll('io-tab');\n      this.style.width = '';\n      this.style.height = '';\n      if (tabs.length === 0) {\n        const rect = this.dropTarget.getBoundingClientRect();\n        this.style.top = `${rect.top + ThemeSingleton.borderRadius}px`;\n        this.style.left = `${rect.left}px`;\n      } else if (this.dropIndex > tabs.length - 1) {\n        const tab = tabs[tabs.length - 1] as IoTab;\n        const rect = tab.getBoundingClientRect();\n        this.style.top = `${rect.top + ThemeSingleton.borderRadius}px`;\n        this.style.left = `${rect.left + rect.width}px`;\n      } else {\n        const tab = tabs[this.dropIndex] as IoTab;\n        const rect = tab.getBoundingClientRect();\n        this.style.top = `${rect.top + ThemeSingleton.borderRadius}px`;\n        this.style.left = `${rect.left - ThemeSingleton.spacing}px`;\n      }\n    } else if (this.dropTarget && this.splitDirection !== 'none') {\n      const rect = this.dropTarget.getBoundingClientRect();\n      if (this.splitDirection === 'top') {\n        this.style.top = `${rect.top}px`;\n        this.style.left = `${rect.left}px`;\n        this.style.width = `${rect.width}px`;\n        this.style.height = `${rect.height / 2}px`;\n      } else if (this.splitDirection === 'bottom') {\n        this.style.top = `${rect.top + rect.height / 2}px`;\n        this.style.left = `${rect.left}px`;\n        this.style.width = `${rect.width}px`;\n        this.style.height = `${rect.height / 2}px`;\n      } else if (this.splitDirection === 'left') {\n        this.style.top = `${rect.top}px`;\n        this.style.left = `${rect.left}px`;\n        this.style.width = `${rect.width / 2}px`;\n        this.style.height = `${rect.height}px`;\n      } else if (this.splitDirection === 'right') {\n        this.style.top = `${rect.top}px`;\n        this.style.left = `${rect.left + rect.width / 2}px`;\n        this.style.width = `${rect.width / 2}px`;\n        this.style.height = `${rect.height}px`;\n      } else if (this.splitDirection === 'center') {\n        this.style.top = `${rect.top}px`;\n        this.style.left = `${rect.left}px`;\n        this.style.width = `${rect.width}px`;\n        this.style.height = `${rect.height}px`;\n      }\n    }\n  }\n}\n\nexport const tabDropMarkerSingleton = new IoTabDropMarker();\nsetTimeout(() => {\n  document.body.appendChild(tabDropMarkerSingleton as HTMLElement);\n}, 100);\n"]}