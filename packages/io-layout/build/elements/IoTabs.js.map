{"version":3,"file":"IoTabs.js","sourceRoot":"","sources":["../../src/elements/IoTabs.ts"],"names":[],"mappings":";;;;;;AAAA,OAAO,EAAE,QAAQ,EAAE,SAAS,EAAkB,gBAAgB,EAAE,QAAQ,EAAE,SAAS,EAAE,MAAM,SAAS,CAAC;AACrG,OAAO,EAAE,UAAU,EAAE,UAAU,EAAE,MAAM,UAAU,CAAC;AAClD,OAAO,EAAE,KAAK,EAAE,MAAM,YAAY,CAAC;AACnC,OAAO,EAAE,eAAe,EAAE,MAAM,sBAAsB,CAAC;AAShD,IAAM,MAAM,GAAZ,MAAM,MAAO,SAAQ,SAAS;IACnC,MAAM,KAAK,KAAK;QACd,OAAO,SAAS,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;KAuCf,CAAC;IACJ,CAAC;IAWD,YAAY,IAAiB,IAAI,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;IAE/C,WAAW;QACT,IAAI,CAAC,OAAO,EAAE,CAAC;QAEf,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC,CAAC;QACnB,IAAI,CAAC,SAAS,EAAE,CAAC;IACnB,CAAC;IAED,SAAS;QACP,MAAM,IAAI,GAAG,IAAI,CAAC,qBAAqB,EAAE,CAAC;QAC1C,MAAM,WAAW,GAAG,IAAI,CAAC,aAAa,CAAC,UAAU,CAAE,CAAC,qBAAqB,EAAE,CAAC;QAE5E,IAAI,IAAI,CAAC,QAAQ,KAAK,CAAC,CAAC,EAAE,CAAC;YACzB,IAAI,WAAW,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,EAAE,CAAC;gBACnC,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC;YAC7B,CAAC;QACH,CAAC;aAAM,IAAI,IAAI,CAAC,KAAK,GAAG,CAAC,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC,EAAE,CAAC;YAC7C,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC,CAAC;QACrB,CAAC;IACH,CAAC;IAED,OAAO;QACL,IAAI,CAAC,MAAM,CAAC;YACV,eAAe,CAAC,EAAC,IAAI,EAAE,IAAI,CAAC,IAAI,EAAC,CAAC;YAClC,GAAG,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE,CAAC,KAAK,CAAC,EAAC,GAAG,EAAE,GAAG,EAAC,CAAC,CAAC;YAC1C,UAAU,CAAC;gBACT,KAAK,EAAE,SAAS;gBAChB,IAAI,EAAE,kBAAkB;gBACxB,SAAS,EAAE,MAAM;gBACjB,MAAM,EAAE,IAAI,CAAC,aAAa;aAC3B,CAAC;SACH,CAAC,CAAC;IACL,CAAC;CACF,CAAA;AA1CS;IADP,gBAAgB,CAAC,EAAC,IAAI,EAAE,SAAS,EAAE,IAAI,EAAE,MAAM,EAAC,CAAC;oCACrB;AAGrB;IADP,gBAAgB,CAAC,EAAC,IAAI,EAAE,MAAM,EAAE,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,IAAI,EAAC,CAAC;wCAClC;AAGjB;IADP,QAAQ,CAAC,EAAC,IAAI,EAAE,UAAU,EAAC,CAAC;6CACK;AAnDvB,MAAM;IADlB,QAAQ;GACI,MAAM,CAuFlB;;AAED,MAAM,CAAC,MAAM,MAAM,GAAG,UAAS,IAAiB;IAC9C,OAAO,MAAM,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC;AACnC,CAAC,CAAC","sourcesContent":["import { Register, IoElement, IoElementProps, ReactiveProperty, Property, NodeArray } from 'io-core';\nimport { MenuOption, ioMenuItem } from 'io-menus';\nimport { ioTab } from './IoTab.js';\nimport { ioTabsHamburger } from './IoTabsHamburger.js';\nimport { Tab } from '../nodes/Tab.js';\n\nexport type IoTabsProps = IoElementProps & {\n  tabs: NodeArray<Tab>,\n  addMenuOption: MenuOption,\n};\n\n@Register\nexport class IoTabs extends IoElement {\n  static get Style() {\n    return /* css */`\n      :host {\n        display: flex;\n        background-color: var(--io_bgColorStrong);\n        padding-top: var(--io_spacing);\n        padding-left: var(--io_spacing);\n        padding-right: var(--io_spacing);\n      }\n      :host io-tab {\n        transition: opacity 2s cubic-bezier(0.4, 0, 0.2, 1);\n      }\n      :host:not([overflow=\"-1\"]) io-tab {\n        /* TODO: make niceer animations */\n        pointer-events: none;\n        opacity: 0;\n      }\n      :host[overflow=\"-1\"] io-tabs-hamburger {\n        /* TODO: make niceer animations */\n        display: none;\n      }\n      :host > io-tabs-hamburger {\n        margin-bottom: var(--io_spacing);\n        /* transition: opacity 1s cubic-bezier(0.4, 0, 0.2, 1); */\n      }\n      :host > io-menu-item {\n        margin-left: auto;\n        flex-shrink: 0;\n        opacity: 0.125;\n        transition: transform 0.2s cubic-bezier(0.4, 0, 0.2, 1), opacity linear 0.2s;\n      }\n      :host > io-menu-item:focus,\n      :host > io-menu-item:hover {\n        opacity: 1;\n      }\n      :host > io-menu-item > .label,\n      :host > io-menu-item > .icon,\n      :host > io-menu-item > .hasmore {\n        display: none;\n      }\n    `;\n  }\n\n  @ReactiveProperty({type: NodeArray, init: 'this'})\n  declare tabs: NodeArray<Tab>;\n\n  @ReactiveProperty({type: Number, value: -1, reflect: true})\n  declare overflow: number;\n\n  @Property({type: MenuOption})\n  declare addMenuOption: MenuOption;\n\n  constructor(args: IoTabsProps) { super(args); }\n\n  tabsMutated() {\n    this.changed();\n\n    this.overflow = -1;\n    this.onResized();\n  }\n\n  onResized() {\n    const rect = this.getBoundingClientRect();\n    const addMenuRect = this.querySelector('.add-tab')!.getBoundingClientRect();\n\n    if (this.overflow === -1) {\n      if (addMenuRect.right > rect.right) {\n        this.overflow = rect.width;\n      }\n    } else if (rect.width > (this.overflow + 32)) {\n      this.overflow = -1;\n    }\n  }\n\n  changed() {\n    this.render([\n      ioTabsHamburger({tabs: this.tabs}),\n      ...this.tabs.map(tab => ioTab({tab: tab})),\n      ioMenuItem({\n        class: 'add-tab',\n        icon: 'io:box_fill_plus',\n        direction: 'down',\n        option: this.addMenuOption,\n      }),\n    ]);\n  }\n}\n\nexport const ioTabs = function(arg0: IoTabsProps) {\n  return IoTabs.vConstructor(arg0);\n};"]}