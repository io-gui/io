import{ReactiveProperty as t,Property as e,Register as o,IoElement as n,ThemeSingleton as i,span as r,nudge as s,Node as l}from"io-gui";import{MenuItem as a,MenuOptions as d,ioMenuItem as c}from"io-menus";import{ioSelector as p}from"io-navigation";import{IoField as h}from"io-inputs";import{IoContextEditorSingleton as f}from"io-editors";import{ioIcon as u}from"io-icons";var __decorate$a=function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};let g=class IoDivider extends n{static vConstructor;static get Style(){return"\n      :host {\n        position: relative;\n        flex: 0 0 var(--io_spacing3);\n        background-color: var(--io_colorLight);\n        border-style: solid;\n        border-width: 0 var(--io_borderWidth);\n        border-color: var(--io_color);\n        cursor: col-resize;\n      }\n      :host[pressed] {\n        border-color: var(--io_borderColorBlue);\n        background-color: var(--io_bgColorBlue);\n      }\n      :host[pressed]:before,\n      :host[pressed]:after {\n        background-color: var(--io_colorWhite);\n      }\n      :host:before,\n      :host:after {\n        content: '';\n        position: absolute;\n        top: 50%;\n        left: 50%;\n        z-index: 1;\n        opacity: 0;\n      }\n      :host:before {\n        width: var(--io_fieldHeight);\n        height: var(--io_spacing);\n        background-color: var(--io_color);\n        transform: translate(-50%, -50%) rotate(90deg);\n        border-radius: var(--io_spacing);\n        opacity: 0.5;\n      }\n      :host[orientation='vertical']:before {\n        transform: translate(-50%, -50%);\n      }\n      :host:after {\n        width: var(--io_fieldHeight);\n        height: var(--io_fieldHeight);\n        background-color: var(--io_color);\n        transform: translate(-50%, -50%) rotate(45deg);\n        border-radius: 25%;\n      }\n      :host[orientation='vertical'] {\n        cursor: row-resize;\n        border-width: var(--io_borderWidth) 0;\n      }\n      :host:hover {\n        border-style: dashed;\n      }\n      :host:hover:before {\n        opacity: 1;\n      }\n    "}static get Listeners(){return{pointerdown:"onPointerdown"}}constructor(t={}){super(t)}onPointerdown(t){t.preventDefault(),t.stopPropagation(),this.addEventListener("pointermove",this.onPointermove),this.addEventListener("pointerleave",this.onPointerleave),this.addEventListener("pointerup",this.onPointerup),this.setPointerCapture(t.pointerId),this.pressed=!0}onPointermove(t){t.preventDefault(),this.dispatch("io-divider-move",{index:this.index,clientX:t.clientX,clientY:t.clientY},!0)}onPointerleave(t){t.preventDefault(),this.removeEventListener("pointermove",this.onPointermove),this.removeEventListener("pointerleave",this.onPointerleave),this.removeEventListener("pointerup",this.onPointerup),this.pressed=!1}onPointerup(t){t.preventDefault(),this.removeEventListener("pointermove",this.onPointermove),this.removeEventListener("pointerleave",this.onPointerleave),this.removeEventListener("pointerup",this.onPointerup),this.releasePointerCapture(t.pointerId),this.pressed=!1,this.dispatch("io-divider-move-end",{index:this.index,clientX:t.clientX,clientY:t.clientY},!0)}};__decorate$a([t({value:!1,type:Boolean,reflect:!0})],g.prototype,"pressed",void 0),__decorate$a([t({value:"horizontal",type:String,reflect:!0})],g.prototype,"orientation",void 0),__decorate$a([e(Number)],g.prototype,"index",void 0),g=__decorate$a([o],g);const v=g.vConstructor;var __decorate$9=function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};let b=class IoTabDropMarker extends n{static vConstructor;static get Style(){return'\n      :host {\n        position: fixed;\n        height: calc(var(--io_fieldHeight) - var(--io_borderWidth) - var(--io_borderRadius));\n        width: var(--io_spacing);\n        background-color: var(--io_bgColorBlue);\n        margin-bottom: var(--io_borderWidth);\n        z-index: 100000;\n      }\n      :host[dropindex="-1"] {\n        display: none;\n      }\n    '}constructor(t={}){super(t)}changed(){if(this.dropTarget&&-1!==this.dropIndex){const t=this.dropTarget.querySelectorAll("io-tab");if(0===t.length){const t=this.dropTarget.getBoundingClientRect();this.style.top=`${t.top+i.borderRadius}px`,this.style.left=`${t.left}px`}else if(this.dropIndex>t.length-1){const e=t[t.length-1].getBoundingClientRect();this.style.top=`${e.top+i.borderRadius}px`,this.style.left=`${e.left+e.width}px`}else{const e=t[this.dropIndex].getBoundingClientRect();this.style.top=`${e.top+i.borderRadius}px`,this.style.left=e.left-i.spacing+"px"}}}};__decorate$9([t(null)],b.prototype,"dropTarget",void 0),__decorate$9([t({type:Number,value:-1,reflect:!0})],b.prototype,"dropIndex",void 0),b=__decorate$9([o],b);const m=new b;document.body.appendChild(m);var __decorate$8=function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};let y=class IoTabDragIcon extends h{static vConstructor;static get Style(){return"\n      :host {\n        display: none;\n        position: fixed;\n        top: 0;\n        left: 0;\n        transform: translate(-50%, -50%);\n        z-index: 100000;\n        pointer-events: none;\n        border-color: var(--io_borderColorLight);\n        background-color: var(--io_bgColorLight) !important;\n        user-select: none;\n        opacity: 0.75;\n      }\n      :host[dragging] {\n        display: flex;\n      }\n      :host > * {\n        display: inline-block;\n        white-space: nowrap;\n        padding: 0 var(--io_spacing);\n      }\n      :host > .label {}\n    "}constructor(t={}){super(t)}changed(){this.dropTarget&&-1!==this.dropIndex?(m.dropTarget=this.dropTarget,m.dropIndex=this.dropIndex):(m.dropTarget=null,m.dropIndex=-1),this.render([u({value:this.item.icon||" "}),r({class:"label"},this.item.label||"")])}};__decorate$8([t({type:Boolean,reflect:!0})],y.prototype,"dragging",void 0),__decorate$8([t({type:a,init:null})],y.prototype,"item",void 0),__decorate$8([t(null)],y.prototype,"dropSource",void 0),__decorate$8([t(null)],y.prototype,"dropTarget",void 0),__decorate$8([t({type:Number,value:-1})],y.prototype,"dropIndex",void 0),__decorate$8([e(-1)],y.prototype,"tabIndex",void 0),y=__decorate$8([o],y);const x=new y;document.body.appendChild(x);var __decorate$7=function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};let P=class IoTab extends h{static vConstructor;static get Style(){return"\n      :host {\n        display: flex;\n        position: relative;\n        height: inherit;\n        min-height: inherit;\n        margin: 0;\n        margin-right: var(--io_spacing);\n        background-color: var(--io_bgColor) !important;\n        border-bottom-left-radius: 0;\n        border-bottom-right-radius: 0;\n        border-color: var(--io_borderColorLight);\n        user-select: none;\n        padding-right: var(--io_lineHeight);\n      }\n      :host[pressed] {\n        border-color: unset !important;\n        box-shadow: unset !important;\n      }\n      :host[selected] {\n        color: var(--io_colorStrong);\n        background-color: var(--io_bgColorLight) !important;\n        border-color: var(--io_borderColorStrong);\n        border-bottom-color: var(--io_bgColorLight);\n        z-index: 1;\n      }\n      :host[selected]:focus {\n        color: var(--io_colorWhite);\n      }\n      :host > .marker {\n        position: absolute;\n        top: 0;\n        left: 0;\n        height: 100%;\n        background-color: var(--io_bgColorBlue);\n        border-bottom-right-radius: var(--io_borderRadius);\n      }\n      :host > span {\n        padding: 0 var(--io_spacing);\n      }\n      :host > * {\n        pointer-events: none;\n        display: inline-block;\n        white-space: nowrap;\n      }\n      :host:not(:hover) > .io-close-icon {\n        opacity: 0;\n        transform: scale(0.2);\n        transition: transform 0.2s cubic-bezier(0.4, 0, 0.2, 1), opacity linear 0.2s;\n      }\n      :host:hover > .io-close-icon {\n        opacity: 1;\n        transform: scale(0.4);\n        transition: transform 0.2s cubic-bezier(0.4, 0, 0.2, 1), opacity linear 0.2s;\n      }\n      :host > .io-close-icon {\n        position: absolute;\n        right: var(--io_spacing);\n        top: var(--io_spacing);\n        pointer-events: inherit;\n        background: linear-gradient(to right, transparent 0%, var(--io_bgColor) 25%);\n      }\n      :host[selected] > .io-close-icon {\n        background: linear-gradient(to right, transparent 0%, var(--io_bgColorLight) 25%);\n      }\n      :host > .io-close-icon:hover {\n        transform: scale(0.5);\n        fill: var(--io_colorStrong);\n        stroke: var(--io_colorStrong);\n      }\n    "}static get Listeners(){return{click:"preventDefault",contextmenu:"preventDefault"}}constructor(t={}){super(t)}preventDefault(t){t.stopPropagation(),t.preventDefault()}onPointerdown(t){if(t.preventDefault(),t.stopPropagation(),2===t.button)return f.expand({value:this.item,properties:["id","label","icon"],orientation:"horizontal"}),void setTimeout((()=>{s(f,this,"down")}));super.onPointerdown(t),this.focus(),this.setPointerCapture(t.pointerId)}onPointermove(t){t.preventDefault(),x.setProperties({item:this.item,dragging:!0,dropSource:this.parentElement,dropTarget:null,dropIndex:-1}),x.style.top=t.clientY+"px",x.style.left=t.clientX+"px";const e=t.clientX,o=t.clientY,n=i.spacing,r=document.querySelectorAll("io-tabs");for(let t=0;t<r.length;t++){const i=r[t],s=i.getBoundingClientRect();if(o>=s.top&&o<=s.bottom&&e>=s.left&&e<=s.right){const t=i.querySelectorAll("io-tab");if(0===t.length){x.dropTarget=i,x.dropIndex=0;break}for(let r=0;r<t.length;r++){const l=t[r].getBoundingClientRect(),a=r===t.length-1;if(o>=l.top-n&&o<=l.bottom+n&&e>=l.left-n&&(e<=l.right+n||a&&e<=s.right)){const t="left"===(e<l.left+l.width/2?"left":"right")?r:r+1;x.dropTarget=i,x.dropIndex=t}}}}}onPointerup(t){if(t.preventDefault(),super.onPointerup(t),this.releasePointerCapture(t.pointerId),x.dragging){const t=x.dropSource,e=x.dropTarget,o=x.dropIndex;if(e&&-1!==o){if(e.parentElement.addTab(this.item,o),t&&t!==e){t.parentElement.removeTab(this.item)}}x.setProperties({item:new a({}),dragging:!1,dropSource:null,dropTarget:null,dropIndex:-1})}else this.onClick()}onClick(){this.item.selected=!0}onCloseClick(){this.dispatch("io-edit-tab-item",{item:this.item,key:"Backspace"},!0)}onKeydown(t){t.shiftKey&&["Backspace","ArrowLeft","ArrowRight","ArrowUp","ArrowDown","Home","End"].includes(t.key)?(t.preventDefault(),this.dispatch("io-edit-tab-item",{item:this.item,key:t.key},!0)):super.onKeydown(t)}itemChanged(){this.setProperties({selected:this.item.bind("selected"),disabled:this.item.bind("disabled")})}itemMutated(){this.changed()}changed(){this.hidden=this.item.hidden,this.render([this.item.selected?r({class:"marker"}):null,u({value:this.item.icon||" "}),r({class:"label"},this.item.label),u({value:"io:close",size:"small",class:"io-close-icon","@click":this.onCloseClick,"@pointerdown":this.preventDefault})])}};__decorate$7([t({type:a})],P.prototype,"item",void 0),P=__decorate$7([o],P);const w=P.vConstructor;var __decorate$6=function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};let C=class IoTabs extends n{static vConstructor;static get Style(){return"\n      :host {\n        position: relative;\n        display: flex;\n        background-color: var(--io_bgColorStrong);\n        padding-top: var(--io_spacing);\n        padding-left: var(--io_spacing);\n        padding-right: var(--io_spacing);\n      }\n      :host > io-menu-item {\n        min-width: fit-content;\n        margin-left: auto;\n        /* margin-top: var(--io_spacing); */\n        padding: 0;\n        opacity: 0.125;\n        transition: transform 0.2s cubic-bezier(0.4, 0, 0.2, 1), opacity linear 0.2s;\n      }\n      :host > io-menu-item:focus,\n      :host > io-menu-item:hover {\n        opacity: 1;\n      }\n      :host > io-menu-item > .label,\n      :host > io-menu-item > .icon,\n      :host > io-menu-item > .hasmore {\n        display: none;\n      }\n    "}optionsMutated(){this.changed()}changed(){this.render([...this.options.items.map((t=>w({item:t}))),c({icon:"io:box_fill_plus",direction:"down",item:this.addMenuItem})])}};__decorate$6([t({type:d,init:null})],C.prototype,"options",void 0),__decorate$6([e(a)],C.prototype,"addMenuItem",void 0),C=__decorate$6([o],C);const I=C.vConstructor;var __decorate$5=function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};let _=class Tab extends l{constructor(t){t.label||(t.label=t.id),super(t)}toJSON(){return{id:this.id,label:this.label,icon:this.icon}}fromJSON(t){return this.id=t.id,t.label?this.label=t.label:this.label=t.id,t.icon&&(this.icon=t.icon),this}};__decorate$5([t({type:String,value:""})],_.prototype,"id",void 0),__decorate$5([t({type:String,value:""})],_.prototype,"label",void 0),__decorate$5([t({type:String,value:""})],_.prototype,"icon",void 0),_=__decorate$5([o],_);var __decorate$4=function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};let R=class IoPanel extends n{static vConstructor;static get Style(){return"\n      :host {\n        display: flex;\n        overflow: hidden;\n        flex-direction: column;\n        flex: 1 1 auto;\n        background-color: var(--io_bgColorLight);\n      }\n      :host > io-selector {\n        margin-top: calc(-1 * var(--io_borderWidth));\n        border-top: var(--io_border);\n        border-top-color: var(--io_borderColorStrong);\n      }\n    "}init(){this.selectTabByIndex=this.selectTabByIndex.bind(this)}static get Listeners(){return{"io-edit-tab-item":"onEditTabItem"}}onEditTabItem(t){t.stopPropagation();const e=t.detail.item,o=t.detail.key,n=this.options.items.indexOf(e);if(-1!==n)switch(o){case"Backspace":this.removeTab(e),this.selectTabByIndex(Math.min(n,this.options.items.length-1));break;case"ArrowLeft":this.options.moveItem(n,n-1),this.selectTabByIndex(n-1);break;case"ArrowRight":this.options.moveItem(n,n+1),this.selectTabByIndex(n+1)}}selectTabByIndex(t){if(t<0)return this.options.selected="",void(this.panel.selected="");this.options.items[t].selected=!0;const e=Array.from(this.querySelectorAll("io-tab"));e[t]&&e[t].focus()}onMenuItemClicked(t){t.stopPropagation();const e=t.detail.item;this.addTab(e)}addTab(t,e){if(!t.id)return;e=e??this.options.items.length,this.options.addItem({id:t.id,label:t.label,icon:t.icon,mode:"select"},e);const o=this.options.findItemById(t.id),n=this.options.items.indexOf(o);this.selectTabByIndex(n)}removeTab(t){this.options.removeItemById(t.id),0===this.options.items.length&&this.dispatch("io-panel-remove",{panel:this.panel},!0)}optionsMutated(){this.panel.selected=this.options.selected,this.panel.tabs.length=0,this.options.items.forEach((t=>{this.panel.tabs.push(new _({id:t.id,label:t.label,icon:t.icon}))})),this.dispatch("io-panel-data-changed",{},!0)}panelChanged(){this.options?.dispose(),this.options=new d({items:this.panel.tabs,selected:this.panel.selected})}changed(){this.render([I({options:this.options,addMenuItem:this.addMenuItem,"@io-menu-item-clicked":this.onMenuItemClicked}),p({options:this.options,elements:this.elements})])}};__decorate$4([t({type:Object,init:null})],R.prototype,"panel",void 0),__decorate$4([t(Array)],R.prototype,"elements",void 0),__decorate$4([t({type:d,init:null})],R.prototype,"options",void 0),__decorate$4([e(a)],R.prototype,"addMenuItem",void 0),R=__decorate$4([o],R);const O=R.vConstructor;var __decorate$3=function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};let S=class Panel extends l{constructor(t){if(t.tabs)for(let e=0;e<t.tabs.length;e++)t.tabs[e]instanceof _||(t.tabs[e]=new _(t.tabs[e]));super(t)}toJSON(){return{tabs:this.tabs.map((t=>t.toJSON())),selected:this.selected,flex:this.flex}}fromJSON(t){return t.tabs&&(this.tabs=t.tabs.map((t=>t instanceof _?t:new _(t)))),t.selected&&(this.selected=t.selected),t.flex&&(this.flex=t.flex),this}};__decorate$3([t({type:Array,value:[]})],S.prototype,"tabs",void 0),__decorate$3([t({type:String,value:""})],S.prototype,"selected",void 0),__decorate$3([t({type:String,value:""})],S.prototype,"flex",void 0),S=__decorate$3([o],S);var j,__decorate$2=function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};let D=j=class Split extends l{constructor(t){if(t.children)for(let e=0;e<t.children.length;e++)t.children[e]instanceof j||t.children[e]instanceof S||(t.children[e].tabs?t.children[e]=new S(t.children[e]):t.children[e]=new j(t.children[e]));super(t)}remove(t){this.children=this.children.filter((e=>e!==t)),2===this.children.length&&(this.children[1].flex="1 1 100%"),this.dispatch("object-mutated",{object:this})}convertToPanel(t){const e=t.children[0],o=this.children.indexOf(t);e.flex="1 1 100%",this.children.splice(o,1,e),this.dispatch("object-mutated",{object:this})}toJSON(){return{orientation:this.orientation,children:this.children.map((t=>t.toJSON())),flex:this.flex}}fromJSON(t){return t.orientation&&(this.orientation=t.orientation),t.children&&(this.children=t.children.map((t=>t instanceof j||t instanceof S?t:t.tabs?new S(t):new j(t)))),t.flex&&(this.flex=t.flex),this}};__decorate$2([t({type:String,value:"horizontal"})],D.prototype,"orientation",void 0),__decorate$2([t({type:Array,value:[]})],D.prototype,"children",void 0),__decorate$2([t({type:String,value:""})],D.prototype,"flex",void 0),D=j=__decorate$2([o],D);var __decorate$1=function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};let k=class IoSplit extends n{static vConstructor;static get Style(){return"\n      :host {\n        display: flex;\n        overflow: hidden;\n        flex-direction: row;\n      }\n      :host[orientation='vertical'] {\n        flex-direction: column;\n      }\n    "}static get Listeners(){return{"io-divider-move":"onDividerMove","io-divider-move-end":"onDividerMoveEnd","io-panel-remove":"onPanelRemove","io-split-remove":"onSplitRemove","io-split-convert-to-panel":"onSplitConvertToPanel"}}constructor(t={}){super(t)}onDividerMove(t){t.stopPropagation();const e=t.detail.index,o=this.getBoundingClientRect(),n=this.split.orientation,r=i.spacing3,s=("horizontal"===n?o.width:o.height)-r*(this.children.length-1)/2,l="horizontal"===n?4*i.fieldHeight:i.fieldHeight,a=[],d=[],c=[];for(let e=0;e<this.children.length;e+=2){const i=this.children[e],s=i.getBoundingClientRect(),l="horizontal"===n?s.width:s.height;let p=t.detail.clientX-s.left-r/2,h=t.detail.clientY-s.top-r/2;e===this.children.length-1&&(p=o.width-(t.detail.clientX-o.left)-r/2,h=o.height-(t.detail.clientY-o.top)-r/2);let f="horizontal"===n?p:h;a.push(i),d.push(l),c.push(f)}let p=0,h=0,f=0,u=0,g=0;for(let t=0;t<a.length;t++){let o=e;o===a.length-2&&(o=a.length-1),a[t].style.flex.endsWith("%")?(f+=d[t],t<o?u++:t>o&&g++):t<o?p+=d[t]:t>o&&(h+=d[t])}if(0===e){const t=s-l*g-h,o=Math.max(l,Math.min(t,c[0]));a[e].style.flex=`0 0 ${o}px`;for(let t=0;t<a.length;t++)a[t].style.flex.endsWith("%")&&t!==e&&(a[t].style.flex=`1 1 ${Math.max(l,d[t])/f*100}%`)}else if(e===a.length-2){const t=s-l*u-p,o=Math.max(l,Math.min(t,c[e+1]));a[e+1].style.flex=`0 0 ${o}px`;for(let t=0;t<a.length;t++)a[t].style.flex.endsWith("%")&&t!==e+1&&(a[t].style.flex=`1 1 ${Math.max(l,d[t])/f*100}%`)}else{const t=d[e]+d[e+1]-l,o=Math.max(l,Math.min(t,c[e])),n=d[e+1]-(o-d[e]);for(let t=0;t<a.length;t++)a[t].style.flex.endsWith("%")&&(a[t].style.flex=t===e?`1 1 ${o/f*100}%`:t===e+1?`1 1 ${n/f*100}%`:`1 1 ${Math.max(l,d[t])/f*100}%`)}}onDividerMoveEnd(t){t.stopPropagation();let e=0;for(let t=0;t<this.children.length;t+=2){const o=this.children[t];this.split.children[e].flex=o.style.flex,e++}this.dispatch("io-split-data-changed",{},!0)}onPanelRemove(t){t.detail.panel!==this.split&&(t.stopPropagation(),this.split.remove(t.detail.panel),0===this.split.children.length?this.dispatch("io-split-remove",{split:this.split},!0):1===this.split.children.length?this.dispatch("io-split-convert-to-panel",{split:this.split},!0):this.dispatch("io-split-data-changed",{},!0))}onSplitRemove(t){t.detail.split!==this.split&&(t.stopPropagation(),this.split.remove(t.detail.split),this.dispatch("io-split-data-changed",{},!0))}onSplitConvertToPanel(t){t.detail.split!==this.split&&(t.stopPropagation(),this.split.convertToPanel(t.detail.split),this.dispatch("io-split-data-changed",{},!0))}splitMutated(){this.changed()}changed(){this.setAttribute("orientation",this.split.orientation),this.style.flex=this.split.flex;const t=[];for(let e=0;e<this.split.children.length;e++){const o=this.split.children[e];o instanceof D?t.push(T({split:o,style:{flex:o.flex},elements:this.elements,addMenuItem:this.addMenuItem})):o instanceof S&&t.push(O({panel:o,style:{flex:o.flex},elements:this.elements,addMenuItem:this.addMenuItem})),e<this.split.children.length-1&&t.push(v({orientation:this.split.orientation,index:e}))}this.render(t)}};__decorate$1([t({type:Object,init:null})],k.prototype,"split",void 0),__decorate$1([t(Array)],k.prototype,"elements",void 0),__decorate$1([e(a)],k.prototype,"addMenuItem",void 0),k=__decorate$1([o],k);const T=k.vConstructor;var __decorate=function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};let M=class IoLayout extends n{static vConstructor;static get Style(){return"\n      :host {\n        position: relative;\n        display: flex;\n        flex: 1 1 100%;\n        max-width: 100%;\n        max-height: 100%;\n      }\n      :host > io-split {\n        max-width: 100%;\n        max-height: 100%;\n      }\n    "}static get Listeners(){return{"io-split-data-changed":"onSplitDataChanged","io-panel-data-changed":"onPanelDataChanged"}}onSplitDataChanged(t){t.stopPropagation(),this.debounce(this.onDataChangedDebounced,void 0,2)}onPanelDataChanged(t){t.stopPropagation(),this.debounce(this.onDataChangedDebounced,void 0,2)}onDataChangedDebounced(){this.dispatch("object-mutated",{object:this.split},!1,window)}changed(){this.render([T({split:this.split,elements:this.elements,addMenuItem:this.addMenuItem})])}};__decorate([t({type:Object,init:null})],M.prototype,"split",void 0),__decorate([t(Array)],M.prototype,"elements",void 0),__decorate([e(a)],M.prototype,"addMenuItem",void 0),M=__decorate([o],M);const B=M.vConstructor;export{g as IoDivider,M as IoLayout,R as IoPanel,k as IoSplit,P as IoTab,C as IoTabs,S as Panel,D as Split,_ as Tab,v as ioDivider,B as ioLayout,O as ioPanel,T as ioSplit,w as ioTab,I as ioTabs,x as tabDragIconSingleton,m as tabDropMarkerSingleton};
