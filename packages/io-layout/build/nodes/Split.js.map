{"version":3,"file":"Split.js","sourceRoot":"","sources":["../../src/nodes/Split.ts"],"names":[],"mappings":";;;;;;;AAAA,OAAO,EAAE,IAAI,EAAE,SAAS,EAAE,gBAAgB,EAAE,QAAQ,EAAE,MAAM,SAAS,CAAC;AACtE,OAAO,EAAE,KAAK,EAAc,MAAM,YAAY,CAAC;AAYxC,IAAM,KAAK,aAAX,MAAM,KAAM,SAAQ,IAAI;IAW7B,YAAY,IAAgB;QAC1B,IAAI,GAAG,EAAE,GAAG,IAAI,EAAE,CAAC;QACnB,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;YAC9C,MAAM,UAAU,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAe,CAAC;YAClD,MAAM,UAAU,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAe,CAAC;YAClD,IAAI,UAAU,CAAC,IAAI,EAAE,CAAC;gBACpB,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,GAAG,IAAI,KAAK,CAAC,UAAU,CAAC,CAAC;YAC3C,CAAC;iBAAM,IAAI,UAAU,CAAC,QAAQ,EAAE,CAAC;gBAC/B,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,GAAG,IAAI,OAAK,CAAC,UAAU,CAAC,CAAC;YAC3C,CAAC;QACH,CAAC;QACD,KAAK,CAAC,IAAI,CAAC,CAAC;IACd,CAAC;IACD,eAAe;QACb,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,0BAA0B,CAAC,CAAC;IACjD,CAAC;IACD,0BAA0B;QACxB,IAAI,CAAC,gBAAgB,EAAE,CAAC;IAC1B,CAAC;IACD,MAAM;QACJ,OAAO;YACL,QAAQ,EAAE,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,KAAoB,EAA2B,EAAE,CAAC,KAAK,CAAC,MAAM,EAAE,CAAC;YAC9F,WAAW,EAAE,IAAI,CAAC,WAAW;YAC7B,IAAI,EAAE,IAAI,CAAC,IAAI;SAChB,CAAC;IACJ,CAAC;IACD,QAAQ,CAAC,IAAgB;QACvB,IAAI,CAAC,aAAa,CAAC;YACjB,QAAQ,EAAE,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,KAA8B,EAAE,EAAE;gBAC7D,MAAM,UAAU,GAAG,KAAmB,CAAC;gBACvC,MAAM,UAAU,GAAG,KAAmB,CAAC;gBACvC,IAAI,UAAU,CAAC,IAAI,EAAE,CAAC;oBACpB,OAAO,IAAI,KAAK,CAAC,UAAU,CAAC,CAAC;gBAC/B,CAAC;qBAAM,IAAI,UAAU,CAAC,QAAQ,EAAE,CAAC;oBAC/B,OAAO,IAAI,OAAK,CAAC,UAAU,CAAC,CAAC;gBAC/B,CAAC;YACH,CAAC,CAAC;YACF,WAAW,EAAE,IAAI,CAAC,WAAW,IAAI,YAAY;YAC7C,IAAI,EAAE,IAAI,CAAC,IAAI,IAAI,UAAU;SAC9B,CAAC,CAAC;QACH,OAAO,IAAI,CAAC;IACd,CAAC;IACD,OAAO;QACL,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,oBAAoB;QAC9C,KAAK,CAAC,OAAO,EAAE,CAAC;IAClB,CAAC;CACF,CAAA;AAtDS;IADP,gBAAgB,CAAC,EAAC,IAAI,EAAE,SAAS,EAAE,IAAI,EAAE,MAAM,EAAC,CAAC;uCACP;AAGnC;IADP,gBAAgB,CAAC,EAAC,IAAI,EAAE,MAAM,EAAE,KAAK,EAAE,YAAY,EAAC,CAAC;0CAChB;AAG9B;IADP,gBAAgB,CAAC,EAAC,IAAI,EAAE,MAAM,EAAE,KAAK,EAAE,UAAU,EAAC,CAAC;mCAC/B;AATV,KAAK;IADjB,QAAQ;GACI,KAAK,CAyDjB","sourcesContent":["import { Node, NodeArray, ReactiveProperty, Register } from 'io-core';\nimport { Panel, PanelProps } from './Panel.js';\n\nexport type SplitOrientation = 'horizontal' | 'vertical';\nexport type SplitDirection = 'none' | 'left' | 'right' | 'top' | 'bottom' | 'center';\n\nexport type SplitProps = {\n  children: Array<SplitProps | PanelProps>,\n  orientation?: SplitOrientation,\n  flex?: string,\n};\n\n@Register\nexport class Split extends Node {\n\n  @ReactiveProperty({type: NodeArray, init: 'this'})\n  declare children: NodeArray<Split | Panel>;\n\n  @ReactiveProperty({type: String, value: 'horizontal'})\n  declare orientation: SplitOrientation;\n\n  @ReactiveProperty({type: String, value: '1 1 100%'})\n  declare flex: string;\n\n  constructor(args: SplitProps) {\n    args = { ...args };\n    for (let i = 0; i < args.children.length; i++) {\n      const panelChild = args.children[i] as PanelProps;\n      const splitChild = args.children[i] as SplitProps;\n      if (panelChild.tabs) {\n        args.children[i] = new Panel(panelChild);\n      } else if (splitChild.children) {\n        args.children[i] = new Split(splitChild);\n      }\n    }\n    super(args);\n  }\n  childrenMutated() {\n    this.debounce(this.onChildrenMutatedDebounced);\n  }\n  onChildrenMutatedDebounced() {\n    this.dispatchMutation();\n  }\n  toJSON(): SplitProps {\n    return {\n      children: this.children.map((child: Split | Panel): SplitProps | PanelProps => child.toJSON()),\n      orientation: this.orientation,\n      flex: this.flex,\n    };\n  }\n  fromJSON(json: SplitProps) {\n    this.setProperties({\n      children: json.children.map((child: SplitProps | PanelProps) => {\n        const panelChild = child as PanelProps;\n        const splitChild = child as SplitProps;\n        if (panelChild.tabs) {\n          return new Panel(panelChild);\n        } else if (splitChild.children) {\n          return new Split(splitChild);\n        }\n      }),\n      orientation: json.orientation ?? 'horizontal',\n      flex: json.flex ?? '1 1 100%',\n    });\n    return this;\n  }\n  dispose() {\n    this.children.length = 0; // TODO: test magic!\n    super.dispose();\n  }\n}"]}