import{Property as e,Register as t,IoElement as o,div as i,span as n,applyNativeElementProps as r,disposeElementDeep as s,Autobind as l}from"io-gui";import{ioBoolean as a}from"io-inputs";import{ioIcon as c}from"io-icons";import{MenuOptions as d,ioMenuItem as h,MenuItem as p,ioMenuOptions as f,ioMenuTree as u}from"io-menus";import{ioMarkdown as v}from"io-markdown";var __decorate$7=function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};let g=class IoCollapsible extends o{static get Style(){return'\n    :host {\n      display: flex;\n      flex-direction: column;\n      flex-shrink: 0;\n      align-self: stretch;\n      box-sizing: content-box;\n      align-items: stretch;\n      align-self: stretch;\n      border: var(--io_border);\n      border-radius: calc(var(--io_borderRadius) - var(--io_spacing));\n      border-color: var(--io_borderColorOutset);\n      min-height: var(--io_fieldHeight);\n      background-color: var(--io_bgColorDimmed);\n    }\n    :host > io-boolean {\n      flex: 0 0 auto;\n      padding-left: 0;\n      margin: var(--io_spacing) var(--io_spacing2);\n      border-radius: 0;\n      background-color: transparent;\n    }\n    :host > io-boolean:before {\n      text-align: center;\n      width: var(--io_lineHeight);\n      content: "▸"\n    }\n    :host > io-boolean[value]:before {\n      content: "▾"\n    }\n    :host > div.io-collapsible-content {\n      position: relative;\n      display: flex;\n      align-items: flex-start;\n      flex-direction: column;\n      overflow: auto;\n      background-color: var(--io_bgColorStrong);\n    }\n    :host[direction=row] > div.io-collapsible-content {\n      flex-direction: row;\n    }\n    :host > div.io-collapsible-content:not(:empty) {\n      margin: var(--io_spacing);\n      margin-top: 0;\n      padding: var(--io_spacing);\n      border-radius: var(--io_borderRadius);\n    }\n    '}changed(){this.template([this.icon?c({value:this.icon}):null,a({true:this.label,false:this.label,value:this.bind("expanded")}),i({class:"io-collapsible-content"},this.expanded?this.elements:[])])}static vDOM};__decorate$7([e(Array)],g.prototype,"elements",void 0),__decorate$7([e("")],g.prototype,"label",void 0),__decorate$7([e({value:"column",reflect:!0})],g.prototype,"direction",void 0),__decorate$7([e("")],g.prototype,"icon",void 0),__decorate$7([e({value:!1,reflect:!0})],g.prototype,"expanded",void 0),__decorate$7([e("region")],g.prototype,"role",void 0),g=__decorate$7([t],g);const m=g.vDOM;var __decorate$6=function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};const b=document.createElement("div"),y={};let _=class IoSelector extends o{static get Style(){return"\n      :host {\n        display: flex;\n        flex-direction: column;\n        position: relative;\n        overflow-y: auto !important;\n        flex: 1 1 auto;\n        justify-content: stretch;\n      }\n      @keyframes io-loading-spinner {\n        to {\n          transform: rotate(360deg);\n        }\n      }\n      :host[loading]:after {\n        content: '';\n        box-sizing: border-box;\n        position: absolute;\n        top: 50%;\n        left: 50%;\n        width: var(--io_fieldHeight2);\n        height: var(--io_fieldHeight2);\n        margin-top: calc(-1 * var(--io_fieldHeight));\n        margin-left: calc(-1 * var(--io_fieldHeight));\n        border-radius: 50%;\n        border: var(--io_border);\n        border-color: var(--io_borderColorDark);\n        border-top-color: var(--io_colorBlue);\n        animation: io-loading-spinner .6s linear infinite;\n      }\n    "}_selected;init(){this.optionsMutated()}optionsMutated(){const e="first"===this.select?this.options.first:this.options.last;e!==this._selected&&(this._selected=e,this.renderSelected()),this.debounce(this.onLoadPrecache,void 0,this.precacheDelay)}importModule(e){const t=new URL(e,String(window.location)).pathname;return new Promise((o=>{!e||y[t]?o(t):import(t).then((()=>{y[t]=!0,o(t)}))}))}renderSelected(){const e=this._selected;if("string"==typeof e)if(e){if(this.childNodes[0]?.id!==e){let t=this.elements.find((t=>t[1].id===e));if(!t){const o=`Could not find element with id: ${e}!`;console.warn(`IoSelector: ${o}!`),t=n(o)}let o={};t&&"object"==typeof t[1]&&!Array.isArray(t[1])&&(o=t[1]);const i=!0===o.cache,s=!1===o.cache,l=o.import;delete o.import;const a=!s&&(this.cache||i);if(a&&this._caches[e]){const t=this._caches[e];this._caches[e].parentElement!==this&&(this.firstChild&&this.removeChild(this.firstChild),this.appendChild(t),t.removeAttribute("className"),t._isIoElement?t.applyProperties(o):r(t,o),this.loading=!1)}else l?(this.loading=!0,this.importModule(l).then((()=>{this.loading&&(this.template([t],this,a),this._caches[e]=this.childNodes[0]),this.loading=!1}))):(this.template([t],this,a),this._caches[e]=this.childNodes[0],this.loading=!1)}}else this.template([])}onLoadPrecache(){if(this.precache)for(let e=0;e<this.elements.length;e++){const t=this.elements[e];let o={};if(t&&"object"==typeof t[1]&&!Array.isArray(t[1])&&(o=t[1]),!o.import&&o.id&&void 0===this._caches[o.id])return this.template([t],b,!0),this._caches[o.id]=b.childNodes[0],b.removeChild(b.childNodes[0]),void this.debounce(this.onLoadPrecache,void 0,this.precacheDelay)}}dispose(){for(const e in this._caches)s(this._caches[e]);super.dispose()}static vDOM};__decorate$6([e({type:d})],_.prototype,"options",void 0),__decorate$6([e("first")],_.prototype,"select",void 0),__decorate$6([e(Array)],_.prototype,"elements",void 0),__decorate$6([e({value:!1})],_.prototype,"cache",void 0),__decorate$6([e({value:!1})],_.prototype,"precache",void 0),__decorate$6([e({value:1e3})],_.prototype,"precacheDelay",void 0),__decorate$6([e({value:!1,reflect:!0})],_.prototype,"loading",void 0),__decorate$6([e({type:Object})],_.prototype,"_caches",void 0),_=__decorate$6([t],_);const x=_.vDOM;var __decorate$5=function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};let O=class IoScroller extends o{static get Style(){return"\n      :host {\n        display: flex;\n        flex-direction: column;\n        flex: 1 1 auto;\n        position: relative;\n        overflow-y: auto;\n        max-width: 100%;\n        max-height: 100%;\n        scrollbar-gutter: stable;\n      }\n      :host > * {\n        overflow: unset;\n      }\n    "}init(){this._observer=new MutationObserver(this._onDomMutated),this._observer.observe(this,{attributes:!1,childList:!0,subtree:!0})}connectedCallback(){super.connectedCallback(),this.optionsMutated()}_onDomMutated(){this.throttle(this._scrollToSelected)}optionsMutated(){this.throttle(this._scrollToSelected)}_scrollToSelected(){if(this.scrollHeight<=this.clientHeight)return;const e=this.options.scroll;if(e&&"string"==typeof e){const t=this.querySelector("#"+e);t?this.scrollTo({top:t.offsetTop,behavior:"auto"}):this.scrollTo(0,0)}}dispose(){super.dispose(),this._observer.disconnect()}static vDOM};__decorate$5([e({type:d})],O.prototype,"options",void 0),__decorate$5([l],O.prototype,"_scrollToSelected",null),O=__decorate$5([t],O);const w=O.vDOM;var __decorate$4=function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};class IoNavigatorBase extends o{static get Style(){return"\n      :host {\n        display: flex;\n        flex-direction: column;\n        overflow-y: auto !important;\n        flex: 1 1 auto;\n      }\n      :host[menu=left],\n      :host[menu=right] {\n        flex-direction: row;\n      }\n      :host > io-menu-tree,\n      :host > io-menu-options {\n        align-self: stretch;\n        border-radius: 0;\n        /* border-color: var(--io_borderColorLight); */\n      }\n      :host[collapsed] > io-menu-options {\n        /* min-height: calc(var(--io_fieldHeight) + 1em); */\n        /* padding: calc(var(--io_spacing) + 0.5em) !important; */\n      }\n      :host[collapsed] > io-menu-options > io-menu-item.hamburger {\n        /* top: 0; */\n        /* padding: calc(var(--io_spacing) + 0.5em); */\n        /* padding-right: calc(var(--io_spacing2) + 0.5em); */\n        /* min-height: calc(var(--io_fieldHeight) + 1em); */\n        /* background-color: transparent; */\n      }\n      :host > io-menu-options {\n        z-index: 1;\n        flex: 0 0 auto;\n        border: none;\n        min-height: var(--io_fieldHeight) !important;\n      }\n      :host > io-menu-tree {\n        z-index: 1;\n        flex: 0 0 auto;\n        min-width: 10em;\n        overflow-y: auto;\n        padding: var(--io_borderWidth) 0;\n      }\n      :host[menu=left] > io-menu-tree {\n        border-width: 0 var(--io_borderWidth) 0 0;\n      }\n      :host[menu=left] > io-menu-tree {\n        border-width: 0 var(--io_borderWidth) 0 0;\n      }\n      :host > io-menu-item.hamburger {\n        flex: 0 0 auto;\n        border-radius: 0;\n        padding: calc(var(--io_spacing) + 0.5em);\n        height: 100%;\n        background-color: var(--io_bgColorDimmed);\n        border-color: transparent !important;\n      }\n      :host > io-menu-item.hamburger > .hasmore {\n        display: none;\n      }\n      :host[menu=top] > io-menu-options {\n        /* padding: 0 var(--io_spacing); */\n        /* border-width: 0 0 var(--io_borderWidth) 0; */\n      }\n      :host[menu=bottom] > io-menu-options {\n        /* padding: 0 var(--io_spacing); */\n        /* border-width: var(--io_borderWidth) 0 0 0; */\n      }\n      :host > io-menu-options > io-menu-item {\n        /* border-radius: 0; */\n      }\n    "}init(){this.throttle(this._computeCollapsed),this.changed()}onResized(){this.throttle(this._computeCollapsed)}_computeCollapsed(){this.collapsed=this.offsetWidth<this.collapseWidth}getSlotted(){return null}changed(){const e={options:this.options,slotted:this.slotted,depth:this.depth},t=h({depth:this.depth,role:"navigation",class:"hamburger",direction:"left"===this.menu?"right":"left",item:new p({label:"",icon:"menu:hamburger",options:this.options})});"top"===this.menu?this.template([f({horizontal:!0,noPartialCollapse:this.collapsed,...e}),this.getSlotted()]):"left"===this.menu?this.template([this.collapsed?t:u({...e}),this.getSlotted()]):"bottom"===this.menu?this.template([this.getSlotted(),f({horizontal:!0,noPartialCollapse:this.collapsed,direction:"up",...e})]):"right"===this.menu&&this.template([this.getSlotted(),this.collapsed?t:u({...e})])}static vDOM}__decorate$4([e(Array)],IoNavigatorBase.prototype,"slotted",void 0),__decorate$4([e(Array)],IoNavigatorBase.prototype,"elements",void 0),__decorate$4([e({type:d})],IoNavigatorBase.prototype,"options",void 0),__decorate$4([e({value:"left",reflect:!0})],IoNavigatorBase.prototype,"menu",void 0),__decorate$4([e(Infinity)],IoNavigatorBase.prototype,"depth",void 0),__decorate$4([e({value:!1,reflect:!0})],IoNavigatorBase.prototype,"collapsed",void 0),__decorate$4([e(580)],IoNavigatorBase.prototype,"collapseWidth",void 0),__decorate$4([l],IoNavigatorBase.prototype,"_computeCollapsed",null);const D=IoNavigatorBase.vDOM;var __decorate$3=function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};let j=class IoNavigatorSelector extends IoNavigatorBase{getSlotted(){return x({options:this.options,cache:this.cache,precache:this.precache,select:this.select,elements:this.elements})}static vDOM};__decorate$3([e("first")],j.prototype,"select",void 0),__decorate$3([e(!1)],j.prototype,"cache",void 0),__decorate$3([e(!1)],j.prototype,"precache",void 0),j=__decorate$3([t],j);const R=j.vDOM;var __decorate$2=function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};let S=class IoNavigatorCombined extends j{static get Style(){return"\n      :host > io-scroller > io-selector {\n        overflow: unset !important;\n      }\n    "}getSlotted(){return w({options:this.options},[x({options:this.options,cache:this.cache,precache:this.precache,select:this.select,elements:this.elements})])}};S=__decorate$2([t],S);const I=S.vDOM;var __decorate$1=function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};let M=class IoNavigatorMdView extends IoNavigatorBase{getSlotted(){const e=this.options.last;return w({options:this.options},[v({src:e,strip:this.strip,sanitize:this.sanitize})])}static vDOM};__decorate$1([e({type:Array})],M.prototype,"strip",void 0),__decorate$1([e(!0)],M.prototype,"sanitize",void 0),M=__decorate$1([t],M);const N=M.vDOM;var __decorate=function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};let P=class IoNavigatorScroller extends IoNavigatorBase{getSlotted(){return w({options:this.options},this.elements)}};P=__decorate([t],P);const C=P.vDOM;export{g as IoCollapsible,IoNavigatorBase,S as IoNavigatorCombined,M as IoNavigatorMdView,P as IoNavigatorScroller,j as IoNavigatorSelector,O as IoScroller,_ as IoSelector,m as ioCollapsible,D as ioNavigatorBase,I as ioNavigatorCombined,N as ioNavigatorMdView,C as ioNavigatorScroller,R as ioNavigatorSelector,w as ioScroller,x as ioSelector};
