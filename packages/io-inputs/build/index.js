import{Property as e,Register as t,IoElement as o,ioLabel as n,IoOverlaySingleton as i,IoThemeSingleton as r,span as s}from"io-gui";import{ioIcon as a}from"io-icons";var __decorate$8=function(e,t,o,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,o,s):i(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};let l=class IoField extends o{static get Style(){return"\n      --ioField: {\n        display: flex;\n\n        cursor: pointer;\n        user-select: none;\n        -webkit-touch-callout: none;\n\n        overflow: hidden;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n\n        height: var(--io_fieldHeight);\n        line-height: var(--io_lineHeight);\n\n        font-size: var(--io_fontSize);\n        border: var(--io_border);\n        border-radius: var(--io_borderRadius);\n        border-color: transparent;\n        color: var(--io_colorField);\n        background-color: var(--io_bgColorField);\n        padding-top: var(--io_spacing);\n        padding-bottom: var(--io_spacing);\n        padding-left: var(--io_spacing);\n        padding-right: var(--io_spacing);\n        transition: background-color 0.25s;\n      }\n      :host {\n        @apply --ioField;\n      }\n      :host[appearance=neutral] {\n        color: var(--io_color);\n        background-color: transparent;\n      }\n      :host[appearance=inset] {\n        border-color: var(--io_borderColorInset);\n        padding-top: calc(var(--io_spacing) + 0.05em);\n        padding-bottom: calc(var(--io_spacing) - 0.05em);\n      }\n      :host[appearance=outset] {\n        border-color: var(--io_borderColorOutset);\n        background-image: var(--io_gradientOutset);\n      }\n      :host.red,\n      :host[invalid] {\n        color: var(--io_colorWhite);\n        background-color: var(--io_bgColorRed);\n        border-color: var(--io_colorRed);\n      }\n      :host.green {\n        color: var(--io_colorWhite);\n        background-color: var(--io_bgColorGreen);\n        border-color: var(--io_colorGreen);\n      }\n\n      :host.blue,\n      :host[selected] {\n        color: var(--io_colorWhite);\n        background-color: var(--io_bgColorBlue);\n        border-color: var(--io_colorBlue);\n      }\n      :host:focus {\n        text-overflow: inherit;\n      }\n      :host[placeholder]:empty:before {\n        content: attr(placeholder);\n        visibility: visible;\n        color: var(--io_colorField);\n        padding: 0 calc(var(--io_spacing) + var(--io_borderWidth));\n        opacity: 0.5;\n      }\n      :host[appearance=inset] io-icon {\n        margin-top: -0.05em;\n        margin-bottom: 0.05em;\n      }\n    "}static get Listeners(){return{"focus-to":"_onFocusTo",focus:"_onFocus",pointerdown:"_onPointerdown",click:"_onClick"}}_onFocus(e){this.addEventListener("blur",this._onBlur),this.addEventListener("keydown",this._onKeydown),this.addEventListener("keyup",this._onKeyup)}_onBlur(e){this.removeEventListener("blur",this._onBlur),this.removeEventListener("keydown",this._onKeydown),this.removeEventListener("keyup",this._onKeyup)}_onPointerdown(e){this.addEventListener("pointermove",this._onPointermove),this.addEventListener("pointerleave",this._onPointerleave),this.addEventListener("pointerup",this._onPointerup)}_onPointermove(e){}_onPointerleave(e){this.removeEventListener("pointermove",this._onPointermove),this.removeEventListener("pointerleave",this._onPointerleave),this.removeEventListener("pointerup",this._onPointerup)}_onPointerup(e){this.removeEventListener("pointermove",this._onPointermove),this.removeEventListener("pointerleave",this._onPointerleave),this.removeEventListener("pointerup",this._onPointerup),this.focus()}_onClick(){this.dispatchEvent("io-field-clicked",{value:this.value},!0)}_onKeydown(e){"Enter"===e.key||" "===e.key?(e.preventDefault(),this._onClick()):"ArrowLeft"===e.key?(e.preventDefault(),this.focusTo("left")):"ArrowUp"===e.key?(e.preventDefault(),this.focusTo("up")):"ArrowRight"===e.key?(e.preventDefault(),this.focusTo("right")):"ArrowDown"===e.key&&(e.preventDefault(),this.focusTo("down"))}_onKeyup(e){}_onFocusTo(e){const t=e.composedPath()[0],o=e.detail.dir,n=e.detail.rect;if(n.center={x:n.x+n.width/2,y:n.y+n.height/2},t!==this){let i=t,r=Infinity,s=Infinity;const a=this.querySelectorAll('[tabindex="0"]:not([disabled])');for(let e=a.length;e--;){if(!a[e].offsetParent)continue;if("visible"!==window.getComputedStyle(a[e]).visibility)continue;const t=a[e].getBoundingClientRect();switch(t.center={x:t.x+t.width/2,y:t.y+t.height/2},o){case"right":if(t.left>=n.right-1){const o=Math.abs(t.left-n.right),l=Math.abs(t.center.y-n.center.y);o<r||l<s/3?(i=a[e],r=o,s=l):o===r&&l<s&&(i=a[e],s=l)}break;case"left":if(t.right<=n.left+1){const o=Math.abs(t.right-n.left),l=Math.abs(t.center.y-n.center.y);o<r||l<s/3?(i=a[e],r=o,s=l):o===r&&l<s&&(i=a[e],s=l)}break;case"down":if(t.top>=n.bottom-1){const o=Math.abs(t.center.x-n.center.x),l=Math.abs(t.top-n.bottom);l<s||o<r/3?(i=a[e],r=o,s=l):l===s&&o<r&&(i=a[e],r=o)}break;case"up":if(t.bottom<=n.top+1){const o=Math.abs(t.center.x-n.center.x),l=Math.abs(t.bottom-n.top);l<s||o<r/3?(i=a[e],r=o,s=l):l===s&&o<r&&(i=a[e],r=o)}}}i!==t&&(i.focus(),e.stopPropagation())}}focusTo(e){const t=this.getBoundingClientRect();this.dispatchEvent("focus-to",{dir:e,rect:t},!0)}getCaretPosition(){let e=0;const t=window.getSelection();if(t&&t.rangeCount){const o=t.getRangeAt(0),n=o.toString().length,i=o.cloneRange();i.selectNodeContents(this),i.setEnd(o.endContainer,o.endOffset),e=i.toString().length-n}return e}setCaretPosition(e){if(!e)return;const t=window.getSelection();if(t){const o=document.createRange();o.setStart(this.firstChild,e),o.collapse(!0),t.removeAllRanges(),t.addRange(o)}}changed(){let e="";this.label?e=this.label:this.value&&"object"==typeof this.value?e=`${this.value.constructor.name}`+(this.value instanceof Array?`(${this.value.length})`:""):void 0!==this.value&&(e=String(this.value)),this.template([this.icon?a({icon:this.icon,stroke:this.stroke}):null,n({label:e})])}};__decorate$8([e("0")],l.prototype,"tabindex",void 0),__decorate$8([e(void 0)],l.prototype,"value",void 0),__decorate$8([e({value:"",reflect:!0})],l.prototype,"icon",void 0),__decorate$8([e({value:"flush",reflect:!0})],l.prototype,"appearance",void 0),__decorate$8([e({value:!1,type:Boolean,reflect:!0})],l.prototype,"stroke",void 0),__decorate$8([e({value:!1,type:Boolean,reflect:!0})],l.prototype,"selected",void 0),__decorate$8([e({value:!1,type:Boolean,reflect:!0})],l.prototype,"invalid",void 0),__decorate$8([e({value:"",type:String,reflect:!0})],l.prototype,"placeholder",void 0),l=__decorate$8([t],l);const c=l.vDOM;var __decorate$7=function(e,t,o,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,o,s):i(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};let h=class IoBoolean extends l{static get Style(){return"\n      :host {\n        background-color: transparent;\n        padding: var(--io_spacing) var(--io_spacing);\n      }\n    "}_onClick(){this.toggle(),this.dispatchEvent("io-boolean-clicked",{value:this.value},!0)}toggle(){this.inputValue(!this.value)}init(){this.changed()}changed(){this.setAttribute("value",Boolean(this.value)),this.setAttribute("aria-checked",String(!!this.value)),this.setAttribute("aria-invalid","boolean"!=typeof this.value&&"true");const e=this.value?this.true:this.false;this.template([this.icon?a({icon:this.icon,stroke:this.stroke}):null,e?n({label:e}):null])}};__decorate$7([e({value:!1,type:Boolean,reflect:!0})],h.prototype,"value",void 0),__decorate$7([e({value:"true",type:String})],h.prototype,"true",void 0),__decorate$7([e({value:"false",type:String})],h.prototype,"false",void 0),__decorate$7([e({value:"switch",type:String})],h.prototype,"role",void 0),h=__decorate$7([t],h);const d=h.vDOM;var __decorate$6=function(e,t,o,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,o,s):i(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};let p=class IoBoolicon extends h{changed(){this.setAttribute("value",Boolean(this.value)),this.setAttribute("aria-checked",String(!!this.value)),this.setAttribute("aria-invalid","boolean"!=typeof this.value&&"true");const e=this.value?this.true:this.false;this.template([this.icon?a({icon:this.icon,stroke:this.stroke}):null,e?n({label:e}):null])}};p=__decorate$6([t],p);const u=p.vDOM;var __decorate$5=function(e,t,o,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,o,s):i(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};let v=class IoButton extends l{static get Style(){return"\n      :host {\n        text-align: center;\n        padding-left: calc(2 * var(--io_spacing));\n        padding-right: calc(2 * var(--io_spacing));\n        color: var(--io_colorStrong);\n      }\n      :host[pressed] {\n        border-color: var(--io_borderColorInset);\n      }\n    "}_onPointerdown(e){super._onPointerdown(e),this.pressed=!0}_onPointerleave(e){super._onPointerleave(e),this.pressed=!1}_onPointerup(e){super._onPointerup(e),this.pressed=!1}_onKeydown(e){super._onKeydown(e),"Enter"!==e.key&&" "!==e.key||(this.pressed=!0)}_onKeyup(e){super._onKeyup(e),this.pressed=!1}_onClick(){"function"==typeof this.action&&this.action(this.value),this.dispatchEvent("io-button-clicked",{value:this.value},!0)}init(){this.changed()}changed(){this.setAttribute("aria-pressed",String(this.pressed)),this.template([this.icon?a({icon:this.icon}):null,this.label?n({label:this.label}):null])}};__decorate$5([e(void 0)],v.prototype,"action",void 0),__decorate$5([e(void 0)],v.prototype,"value",void 0),__decorate$5([e({value:"outset",type:String,reflect:!0})],v.prototype,"appearance",void 0),__decorate$5([e({value:!1,type:Boolean,reflect:!0})],v.prototype,"pressed",void 0),__decorate$5([e("button")],v.prototype,"role",void 0),v=__decorate$5([t],v);const f=v.vDOM;var __decorate$4=function(e,t,o,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,o,s):i(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};let g=class IoNumberLadderStep extends l{static get Style(){return"\n      :host {\n        pointer-events: all;\n        display: inline-block;\n        cursor: ew-resize;\n        text-align: center;\n        background-color: var(--io_bgColorStrong);\n        color: var(--io_color);\n        align-self: stretch;\n        touch-action: none;\n        width: 6em;\n      }\n      :host:before {\n        float: left;\n        content: '<';\n        opacity: 0.25;\n      }\n      :host:after {\n        float: right;\n        content: '>';\n        opacity: 0.25;\n      }\n    "}_onKeydown(e){let t=0;"Escape"===e.key||" "===e.key?this.dispatchEvent("ladder-step-collapse",{},!0):"ArrowLeft"===e.key||"Backspace"===e.key?(e.preventDefault(),t=-1*this.value):"ArrowUp"===e.key?(e.preventDefault(),this.focusTo("up")):"ArrowRight"===e.key||"Enter"===e.key?(e.preventDefault(),t=1*this.value):"ArrowDown"===e.key&&(e.preventDefault(),this.focusTo("down")),0!==t&&this.dispatchEvent("ladder-step-change",{step:Number(t.toFixed(5)),round:e.shiftKey},!0)}_onPointerdown(e){this.setPointerCapture(e.pointerId),this.addEventListener("pointermove",this._onPointermove),this.addEventListener("pointerup",this._onPointerup),this._startX=e.clientX}_onPointermove(e){const t=e.clientX-this._startX;if(Math.abs(t)>5){const o=Math.pow(t/5,2)*t<0?-1:1,n=t>0?Math.floor(o):Math.ceil(o),i=this.value*n;this._startX=e.clientX,this.dispatchEvent("ladder-step-change",{step:Number(i.toFixed(5)),round:e.shiftKey},!0)}}_onPointerup(e){this.releasePointerCapture(e.pointerId),this.removeEventListener("pointermove",this._onPointermove),this.removeEventListener("pointerup",this._onPointerup),this.dispatchEvent("ladder-step-collapse",{},!0)}init(){this.changed()}changed(){super.changed(),this.setAttribute("aria-valuestep",this.value)}};__decorate$4([e({value:1,type:Number})],g.prototype,"value",void 0),__decorate$4([e({value:"number",type:String,reflect:!0})],g.prototype,"type",void 0),__decorate$4([e({value:"spinbutton",type:String})],g.prototype,"role",void 0),g=__decorate$4([t],g);const b=g.vDOM;var __decorate$3=function(e,t,o,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,o,s):i(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};let y=null;window.addEventListener("focusin",(()=>{y=document.activeElement}),{capture:!1}),window.addEventListener("blur",(()=>{setTimeout((()=>{document.activeElement===document.body&&(y=null)}))}),{capture:!0});let m=class IoNumberLadder extends o{static get Style(){return"\n      :host {\n        display: flex;\n        flex-direction: column;\n        position: absolute;\n        pointer-events: none;\n        user-select: none;\n        -webkit-tap-highlight-color: transparent;\n        -webkit-user-select: none;\n        -webkit-touch-callout: none;\n      }\n      :host:not([expanded]) {\n        visibility: hidden;\n      }\n      :host:not([expanded]) > io-number-ladder-step {\n        opacity: 0.5;\n      }\n      :host > io-number-ladder-step:nth-child(-n+5) {\n        box-shadow: 0 -1px 4px rgba(0,0,0,0.2);\n      }\n      :host > io-number-ladder-step:nth-child(n+6) {\n        box-shadow: 0 1px 4px rgba(0,0,0,0.2);\n      }\n      :host > .io-up1,\n      :host > .io-down1{\n        z-index: 4;\n        transition: opacity 0.1s, transform 0.1s;\n      }\n      :host > .io-up2,\n      :host > .io-down2 {\n        z-index: 3;\n        opacity: 0.8;\n        transition: opacity 0.2s, transform 0.2s;\n      }\n      :host:not([expanded]) > .io-up4 {\n        transform: translateY(calc(3 * var(--io_fieldHeight)));\n      }\n      :host:not([expanded]) > .io-up3 {\n        transform: translateY(calc(2 * var(--io_fieldHeight)));\n      }\n      :host:not([expanded]) > .io-up2 {\n        transform: translateY(calc(1 * var(--io_fieldHeight)));\n      }\n      :host:not([expanded]) > .io-down2 {\n        transform: translateY(calc(-1 * var(--io_fieldHeight)));\n      }\n      :host:not([expanded]) > .io-down3 {\n        transform: translateY(calc(-2 * var(--io_fieldHeight)));\n      }\n      :host:not([expanded]) > .io-down4 {\n        transform: translateY(calc(-3 * var(--io_fieldHeight)));\n      }\n      :host > .io-up3,\n      :host > .io-down3 {\n        z-index: 2;\n        opacity: 0.6;\n        transition: opacity 0.4s, transform 0.4s;\n      }\n      :host > .io-up4,\n      :host > .io-down4 {\n        z-index: 1;\n        opacity: 0.4;\n        transition: opacity 0.8s, transform 0.8s;\n      }\n      :host > io-number-ladder-step:hover,\n      :host > io-number-ladder-step:focus {\n        background-color: var(--io_bgColorStrong);\n        border-color: var(--io_colorBlue);\n        transition: opacity 0.2s;\n        opacity: 1;\n      }\n      :host > .io-number-ladder-empty {\n        height: var(--io_fieldHeight);\n      }\n      :host > .io-number-ladder-center {\n        height: calc(1.5 * var(--io_fieldHeight));\n      }\n    "}static get Listeners(){return{"ladder-step-change":"_onLadderStepChange","ladder-step-collapse":"_onLadderStepCollapse",focusin:"_onFocusIn"}}get value(){return this.src?this.src.value:0}get min(){return this.src?this.src.min:-Infinity}get max(){return this.src?this.src.max:Infinity}get step(){return this.src?this.src.step:1e-4}get conversion(){return this.src?this.src.conversion:1}_onFocusIn(e){e.stopPropagation()}_onFocusTo(e){e.stopPropagation();const t=e.composedPath()[0],o=this.src,n=e.detail.dir;if(o&&(t===this.querySelector(".io-up1")&&"down"===n||t===this.querySelector(".io-down1")&&"up"===n))return o.focus(),void(o.selectionStart=o.selectionEnd=o.textNode.length);super._onFocusTo(e)}_onLadderStepChange(e){const t=this.src;if(t){const o=e.detail.step,n=e.detail.round?Math.round(this.value/o)*o:this.value;let i=Math.min(this.max,Math.max(this.min,n+o));i=Number(i.toFixed(5)),t.inputValue(i)}}_onLadderStepCollapse(){this.setProperty("expanded",!1)}expandedChanged(){const e=this.src;if(this.expanded)if(e){const t=e.getBoundingClientRect(),o=this.getBoundingClientRect(),n=i.getBoundingClientRect();this.style.top=t.bottom-n.top+"px",this.style.left=t.left-n.left+"px",this.style.marginTop=-(o.height/2+r.lineHeight/2+r.spacing)+"px"}else this.removeAttribute("style");else e&&"touch"!==e._pointerType?e.focus():y&&y.focus();this.dispatchEvent("expanded",{value:this.expanded},!0)}changed(){const e=this.max-this.min,t=s({class:"io-number-ladder-empty"});let o=this.step/1e4;for(;o<.1;)o*=10;const n=1e4*o,i=1e3*o,r=100*o,a=10*o,l=1*o,c=.1*o,h=.01*o,d=.001*o,p=Number((n*this.conversion).toFixed(6)),u=Number((i*this.conversion).toFixed(6)),v=Number((r*this.conversion).toFixed(6)),f=Number((a*this.conversion).toFixed(6)),g=Number((l*this.conversion).toFixed(6)),y=Number((c*this.conversion).toFixed(6)),m=Number((h*this.conversion).toFixed(6)),_=Number((d*this.conversion).toFixed(6));this.template([e>=n?b({class:"io-up4",value:n,label:String(p)}):t,e>=i?b({class:"io-up3",value:i,label:String(u)}):t,e>=r?b({class:"io-up2",value:r,label:String(v)}):t,e>=a?b({class:"io-up1",value:a,label:String(f)}):t,s({class:"io-number-ladder-center"}),this.step<=l?b({class:"io-down1",value:l,label:String(g)}):t,this.step<=c?b({class:"io-down2",value:c,label:String(y)}):t,this.step<=h?b({class:"io-down3",value:h,label:String(m)}):t,this.step<=d?b({class:"io-down4",value:d,label:String(_)}):t]),this.setAttribute("aria-valuemin",this.min),this.setAttribute("aria-valuemax",this.max),this.setAttribute("aria-valuenow",this.value),this.setAttribute("aria-valuestep",this.step),this.setAttribute("aria-invalid",!("number"==typeof this.value&&!isNaN(this.value))&&"true");const x=this.querySelectorAll("io-number-ladder-step");for(let e=x.length;e--;)x[e].setAttribute("aria-valuemin",this.min),x[e].setAttribute("aria-valuemax",this.max),x[e].setAttribute("aria-valuenow",this.value),x[e].changed()}};__decorate$3([e({value:"list",type:String})],m.prototype,"role",void 0),__decorate$3([e({value:void 0,type:o})],m.prototype,"src",void 0),__decorate$3([e({value:!1,type:Boolean,reflect:!0})],m.prototype,"expanded",void 0),m=__decorate$3([t],m);const _=new m;i.appendChild(_);var __decorate$2=function(e,t,o,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,o,s):i(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};let x=class IoNumber extends l{static get Style(){return"\n      :host {\n        cursor: text;\n        user-select: text;\n        -webkit-user-select: text;\n        -webkit-touch-callout: default;\n        font-family: monospace;\n        padding-left: var(--io_spacing3);\n        padding-right: var(--io_spacing3);\n      }\n    "}_pointer="";_onBlur(e){super._onBlur(e),this._setFromTextNode(),this.scrollTop=0,this.scrollLeft=0,setTimeout((()=>{document.activeElement.parentElement!==_&&(_.expanded=!1)}))}_onPointerdown(e){"touch"===this._pointer&&e.preventDefault(),this.addEventListener("pointermove",this._onPointermove),this.addEventListener("pointerup",this._onPointerup),document.activeElement===this&&0===e.button||(this._pointer=e.pointerType)}_onPointerup(e){this.removeEventListener("pointermove",this._onPointermove),this.removeEventListener("pointerup",this._onPointerup),this.ladder||1===e.button?("touch"===this._pointer?(e.preventDefault(),document.activeElement.blur()):document.activeElement!==this&&(this.focus(),this.setCaretPosition(this.textNode.length)),this._expandLadder()):document.activeElement!==this&&(this.focus(),this.setCaretPosition(this.textNode.length))}_onFocus(e){super._onFocus(e),"touch"===this._pointer&&(_.expanded=!1)}_expandLadder(){_.src=this,_.expanded=!0}_onKeydown(e){const t=window.getSelection().getRangeAt(0),o=t.startOffset,n=t.endOffset,i=this.childNodes[0]?this.childNodes[0].length:0,r=t.startContainer===t.endContainer&&(t.startContainer===this.childNodes[0]||t.startContainer===this);if(27===e.which||13===e.which||32===e.which)e.preventDefault(),this._setFromTextNode();else if(36===e.which)this.textNode=this.min,this._setFromTextNode();else if(35===e.which)this.textNode=this.max,this._setFromTextNode();else if(33===e.which){const e=Number(this.textNode);!isNaN(e)&&Math.abs(e)<Infinity?this.textNode=Number(this.textNode)+this.step:this.textNode=this.step,this._setFromTextNode()}else if(34===e.which){const e=Number(this.textNode);!isNaN(e)&&Math.abs(e)<Infinity?this.textNode=Number(this.textNode)-this.step:this.textNode=-this.step,this._setFromTextNode()}else if(37===e.which)(e.ctrlKey||r&&o===n&&0===o)&&(e.preventDefault(),this.focusTo("left"));else if(38===e.which)if(_.expanded){const e=_.querySelector(".io-up1");e&&e.focus()}else(e.ctrlKey||r&&o===n&&0===o)&&(e.preventDefault(),this.focusTo("up"));else if(39===e.which)(e.ctrlKey||r&&o===n&&o===i)&&(e.preventDefault(),this.focusTo("right"));else if(40===e.which)if(_.expanded){const e=_.querySelector(".io-down1");e&&e.focus()}else(e.ctrlKey||r&&o===n&&o===i)&&(e.preventDefault(),this.focusTo("down"))}_onKeyup(e){17===e.which?this._expandLadder():27!==e.which&&13!==e.which&&32!==e.which||(i.expanded=!1)}_setFromTextNode(){const e=this.textNode;let t=Number(e)/this.conversion;t=Math.min(this.max,Math.max(this.min,t)),t=Math.round(t/this.step)*this.step;const o=Math.max(0,Math.min(100,-Math.floor(Math.log(this.step)/Math.LN10)));t=Number(t.toFixed(o)),isNaN(t)?this.textNode="NaN":this.inputValue(t)}init(){this.changed()}changed(){this.setAttribute("value",this.value),this.setAttribute("aria-valuenow",this.value),this.setAttribute("aria-valuemin",this.min),this.setAttribute("aria-valuemax",this.max),this.setAttribute("aria-valuestep",this.step),"number"!=typeof this.value||isNaN(this.value)?this.setAttribute("aria-invalid","true"):this.removeAttribute("aria-invalid");let e,t=this.value;if("number"!=typeof t||isNaN(t))e="NaN";else{t*=this.conversion;let o=-Math.floor(Math.log(this.step*this.conversion)/Math.LN10);o=Math.max(0,Math.min(100,o)),t=Number(t.toFixed(o)),e=String(t)}this.setAttribute("value",e),this.setAttribute("positive",this.value>=0),this.textNode=e}};__decorate$2([e("textbox")],x.prototype,"role",void 0),__decorate$2([e({value:0,type:Number})],x.prototype,"value",void 0),__decorate$2([e({value:1,type:Number})],x.prototype,"conversion",void 0),__decorate$2([e({value:1e-4,type:Number})],x.prototype,"step",void 0),__decorate$2([e({value:-Infinity,type:Number})],x.prototype,"min",void 0),__decorate$2([e({value:Infinity,type:Number})],x.prototype,"max",void 0),__decorate$2([e({value:!1,type:Boolean})],x.prototype,"ladder",void 0),__decorate$2([e({value:!0,type:Boolean})],x.prototype,"contenteditable",void 0),__decorate$2([e({value:"number",type:String,reflect:!0})],x.prototype,"type",void 0),__decorate$2([e({value:'pattern="[0-9]*"',type:String,reflect:!0})],x.prototype,"pattern",void 0),__decorate$2([e({value:"numeric",type:String,reflect:!0})],x.prototype,"inputmode",void 0),__decorate$2([e({value:"false",type:String,reflect:!0})],x.prototype,"spellcheck",void 0),__decorate$2([e({value:"inset",type:String,reflect:!0})],x.prototype,"appearance",void 0),x=__decorate$2([t],x);const w=x.vDOM;var __decorate$1=function(e,t,o,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,o,s):i(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};let N=class IoString extends l{static get Style(){return"\n      :host {\n        cursor: text;\n        user-select: text;\n        -webkit-user-select: text;\n        -webkit-touch-callout: default;\n        padding-left: var(--io_spacing3);\n        padding-right: var(--io_spacing3);\n      }\n    "}_setFromTextNode(){const e=this.textNode;"string"==typeof this.value&&e!==String(this.value)&&this.inputValue(e)}_tryParseFromTextNode(){const e=this.textNode;try{const t=JSON.parse(e.replace(/[\t\n\r ]+/g," "));this.inputValue(t)}catch(t){console.warn("IoString: Cannot parse value",e),console.error(t),this._setFromTextNode()}}_onBlur(e){super._onBlur(e),this._setFromTextNode(),this.scrollTop=0,this.scrollLeft=0}_onPointerdown(e){this.addEventListener("pointermove",this._onPointermove),this.addEventListener("pointerup",this._onPointerup)}_onPointermove(e){}_onPointerup(e){this.removeEventListener("pointermove",this._onPointermove),this.removeEventListener("pointerup",this._onPointerup),document.activeElement!==this&&(this.focus(),this.setCaretPosition(this.textNode.length))}_onKeydown(e){const t=window.getSelection().getRangeAt(0),o=t.startOffset,n=t.endOffset,i=this.childNodes[0]?this.childNodes[0].length:0,r=t.startContainer===t.endContainer&&(t.startContainer===this.childNodes[0]||t.startContainer===this);"Enter"===e.key?(e.preventDefault(),e.shiftKey?this._tryParseFromTextNode():this._setFromTextNode()):"ArrowLeft"===e.key?(e.ctrlKey||r&&o===n&&0===o)&&(e.preventDefault(),this.focusTo("left")):"ArrowUp"===e.key?(e.ctrlKey||r&&o===n&&0===o)&&(e.preventDefault(),this.focusTo("up")):"ArrowRight"===e.key?(e.ctrlKey||r&&o===n&&o===i)&&(e.preventDefault(),this.focusTo("right")):"ArrowDown"===e.key&&(e.ctrlKey||r&&o===n&&o===i)&&(e.preventDefault(),this.focusTo("down"))}_onKeyup(e){if(super._onKeyup(e),this.live){const e=this.getCaretPosition();this._setFromTextNode(),this.setCaretPosition(e)}}changed(){this.title=this.label,this.textNode=String(this.value).replace(new RegExp(" ","g")," ")}valueChanged(){"string"!=typeof this.value?this.setAttribute("aria-invalid","true"):this.removeAttribute("aria-invalid")}};__decorate$1([e(!1)],N.prototype,"live",void 0),__decorate$1([e("")],N.prototype,"value",void 0),__decorate$1([e(!0)],N.prototype,"contenteditable",void 0),__decorate$1([e("textbox")],N.prototype,"role",void 0),__decorate$1([e({value:"inset",reflect:!0})],N.prototype,"appearance",void 0),N=__decorate$1([t],N);const P=N.vDOM;var __decorate=function(e,t,o,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,o,s):i(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};let k=class IoSwitch extends h{static get Style(){return"\n      :host {\n        position: relative;\n        width: calc(1.5 * var(--io_fieldHeight));\n        overflow: visible;\n      }\n      :host:before {\n        content: '';\n        box-sizing: border-box;\n        position: absolute;\n        visibility: visible;\n        top: var(--io_spacing);\n        left: 0;\n        width: 100%;\n        height: var(--io_lineHeight);\n        border-radius: var(--io_lineHeight);\n        border: var(--io_border);\n        border-color: var(--io_borderColorInset);\n        background-color: var(--io_bgColorField);\n        box-shadow: var(--io_shadowInset);\n        transition: background-color 0.4s;\n      }\n      :host:after {\n        content: '';\n        box-sizing: border-box;\n        position: absolute;\n        visibility: visible;\n        top: calc(var(--io_borderWidth) + var(--io_spacing));\n        left: var(--io_borderWidth);\n        height: calc(var(--io_lineHeight) - calc(2 * var(--io_borderWidth)));\n        width: calc(var(--io_lineHeight) - calc(2 * var(--io_borderWidth)));\n        background-color: var(--io_bgColorDimmed);\n        box-shadow: var(--io_shadowOutset);\n        border: var(--io_border);\n        border-color: var(--io_borderColorOutset);\n        border-radius: var(--io_lineHeight);\n        transition-timing-function: ease-in-out;\n        transition: left 0.25s;\n      }\n      :host[value]:after {\n        background-color: var(--io_bgColorBlue);\n        left: calc(100% - calc(var(--io_lineHeight) - var(--io_borderWidth)));\n      }\n      :host:focus:before {\n        border-color: var(--io_colorBlue);\n        outline: 1px auto var(--io_colorBlue);\n        outline: 1px auto -webkit-focus-ring-color;\n      }\n      :host:focus {\n        outline: 0;\n        border-color: transparent;\n      }\n    "}init(){this.setAttribute("aria-checked",String(!!this.value))}changed(){this.title=this.label}valueChanged(){this.setAttribute("aria-checked",String(!!this.value)),"boolean"!=typeof this.value?this.setAttribute("aria-invalid","true"):this.removeAttribute("aria-invalid")}};k=__decorate([t],k);const S=k.vDOM;export{h as IoBoolean,p as IoBoolicon,v as IoButton,l as IoField,x as IoNumber,_ as IoNumberLadderSingleton,g as IoNumberLadderStep,N as IoString,k as IoSwitch,d as ioBoolean,u as ioBoolicon,f as ioButton,c as ioField,w as ioNumber,b as ioNumberLadderStep,P as ioString,S as ioSwitch};
