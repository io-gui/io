{"version":3,"file":"io-number.js","sourceRoot":"","sources":["../src/io-number.ts"],"names":[],"mappings":"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","sourcesContent":["import { Register, Property, IoElement, IoField, IoOverlaySingleton, IoThemeSingleton } from 'io-gui';\n\n/**\n * Input element for `Number` data type.\n * It clamps the `value` to `min` / `max` and rounds it to the nearest `step` increment.\n * If `ladder` property is enabled, it displays an interactive float ladder element when clicked/taped.\n * Alternatively, ladder can be expanded by middle click or ctrl key regardless of ladder property.\n **/\n@Register\nexport class IoNumber extends IoField {\n  static get Style() {\n    return /* css */`\n      :host {\n        cursor: text;\n        user-select: text;\n        -webkit-user-select: text;\n        -webkit-touch-callout: default;\n        font-family: monospace;\n        padding-left: var(--io_spacing3);\n        padding-right: var(--io_spacing3);\n      }\n    `;\n  }\n\n  @Property('textbox')\n  declare role: string;\n\n  @Property({value: 0, type: Number})\n  declare value: number;\n\n  @Property({value: 1, type: Number})\n  declare conversion: number;\n\n  @Property({value: 0.0001, type: Number})\n  declare step: number;\n\n  @Property({value: -Infinity, type: Number})\n  declare min: number;\n\n  @Property({value: Infinity, type: Number})\n  declare max: number;\n\n  @Property({value: false, type: Boolean})\n  declare ladder: boolean;\n\n  @Property({value: true, type: Boolean})\n  declare contenteditable: boolean;\n\n  @Property({value: 'number', type: String, reflect: true})\n  declare type: string;\n\n  @Property({value: 'pattern=\"[0-9]*\"', type: String, reflect: true})\n  declare pattern: string;\n\n  @Property({value: 'numeric', type: String, reflect: true})\n  declare inputmode: string;\n\n  @Property({value: 'false', type: String, reflect: true})\n  declare spellcheck: string;\n\n  @Property({value: 'inset', type: String, reflect: true})\n  declare appearance: 'flush' | 'inset' | 'outset';\n\n  private _pointer = '';\n\n  _onBlur(event: FocusEvent) {\n    super._onBlur(event);\n    this._setFromTextNode();\n    this.scrollTop = 0;\n    this.scrollLeft = 0;\n    // TODO: unhack race condition\n    setTimeout(() => {\n      if ((document.activeElement as Element).parentElement !== IoNumberLadderSingleton as unknown as Element) {\n        IoNumberLadderSingleton.expanded = false;\n      }\n    });\n  }\n  _onPointerdown(event: PointerEvent) {\n    if (this._pointer === 'touch') event.preventDefault();\n    this.addEventListener('pointermove', this._onPointermove);\n    this.addEventListener('pointerup', this._onPointerup);\n    if (document.activeElement === this as unknown as Element && event.button === 0) return;\n    this._pointer = event.pointerType;\n  }\n  _onPointerup(event: PointerEvent) {\n    this.removeEventListener('pointermove', this._onPointermove);\n    this.removeEventListener('pointerup', this._onPointerup);\n    if (this.ladder || event.button === 1) {\n      if (this._pointer === 'touch') {\n        event.preventDefault();\n        (document.activeElement as HTMLElement).blur();\n      } else {\n        if (document.activeElement !== this as unknown as Element) {\n          this.focus();\n          this.setCaretPosition(this.textNode.length);\n        }\n      }\n      this._expandLadder();\n    } else {\n      if (document.activeElement !== this as unknown as Element) {\n        this.focus();\n        this.setCaretPosition(this.textNode.length);\n      }\n    }\n  }\n  _onFocus(event: FocusEvent) {\n    super._onFocus(event);\n    if (this._pointer === 'touch') {\n      IoNumberLadderSingleton.expanded = false;\n    }\n  }\n  _expandLadder() {\n    IoNumberLadderSingleton.src = this;\n    IoNumberLadderSingleton.expanded = true;\n  }\n  _onKeydown(event: KeyboardEvent) {\n    const rng = (window.getSelection() as Selection).getRangeAt(0);\n    const start = rng.startOffset;\n    const end = rng.endOffset;\n    const length = this.childNodes[0] ? this.childNodes[0].length : 0;\n    const rngInside = rng.startContainer === rng.endContainer && (rng.startContainer === this.childNodes[0] || rng.startContainer === this as unknown as Node);\n\n    if (event.which === 27 || event.which === 13 || event.which === 32) { //  esc || enter || space\n      event.preventDefault();\n      this._setFromTextNode();\n    } else if (event.which === 36) { // home\n      this.textNode = this.min;\n      this._setFromTextNode();\n    } else if (event.which === 35) { // end\n      this.textNode = this.max;\n      this._setFromTextNode();\n    } else if (event.which === 33) { // pgup\n      const valueNumber = Number(this.textNode);\n      if (!isNaN(valueNumber) && Math.abs(valueNumber) < Infinity) {\n        this.textNode = Number(this.textNode) + this.step;\n      } else {\n        this.textNode = this.step;\n      }\n      this._setFromTextNode();\n    } else if (event.which === 34) { // pgdown\n      const valueNumber = Number(this.textNode);\n      if (!isNaN(valueNumber) && Math.abs(valueNumber) < Infinity) {\n        this.textNode = Number(this.textNode) - this.step;\n      } else {\n        this.textNode = -this.step;\n      }\n      this._setFromTextNode();\n    } else if (event.which === 37) { // left\n      if (event.ctrlKey || (rngInside && start === end && start === 0)) {\n        event.preventDefault();\n        this.focusTo('left');\n      }\n    } else if (event.which === 38) { // up\n      if (IoNumberLadderSingleton.expanded) {\n        const upStep = IoNumberLadderSingleton.querySelector('.io-up1');\n        if (upStep) upStep.focus();\n      } else if (event.ctrlKey || (rngInside && start === end && start === 0)) {\n        event.preventDefault();\n        this.focusTo('up');\n      }\n    } else if (event.which === 39) { // right\n      if (event.ctrlKey || (rngInside && start === end && start === length)) {\n        event.preventDefault();\n        this.focusTo('right');\n      }\n    } else if (event.which === 40) { // down\n      if (IoNumberLadderSingleton.expanded) {\n        const downStep = IoNumberLadderSingleton.querySelector('.io-down1');\n        if (downStep) downStep.focus();\n      } else if (event.ctrlKey || (rngInside && start === end && start === length)) {\n        event.preventDefault();\n        this.focusTo('down');\n      }\n    }\n  }\n  _onKeyup(event: KeyboardEvent) {\n    if (event.which === 17) { // ctrl\n      this._expandLadder();\n    } else if (event.which === 27 || event.which === 13 || event.which === 32) { // esc || enter || space\n      IoOverlaySingleton.expanded = false;\n    }\n  }\n  _setFromTextNode() {\n    const valueText = this.textNode;\n    let valueNumber = Number(valueText) / this.conversion;\n    valueNumber = Math.min(this.max, Math.max(this.min, valueNumber));\n    valueNumber = Math.round(valueNumber / this.step) * this.step;\n    const d = Math.max(0, Math.min(100, -Math.floor(Math.log(this.step) / Math.LN10)));\n    valueNumber = Number(valueNumber.toFixed(d));\n    if (!isNaN(valueNumber)) this.inputValue(valueNumber);\n    else this.textNode = 'NaN';\n  }\n  init() {\n    this.changed();\n  }\n  changed() {\n    this.setAttribute('value', this.value);\n    this.setAttribute('aria-valuenow', this.value);\n    this.setAttribute('aria-valuemin', this.min);\n    this.setAttribute('aria-valuemax', this.max);\n    this.setAttribute('aria-valuestep', this.step);\n    if (typeof this.value !== 'number' || isNaN(this.value)) {\n      this.setAttribute('aria-invalid', 'true');\n    } else {\n      this.removeAttribute('aria-invalid');\n    }\n    let value = this.value;\n    let valueText;\n    if (typeof value === 'number' && !isNaN(value)) {\n      value *= this.conversion;\n      let d = -Math.floor(Math.log(this.step * this.conversion) / Math.LN10);\n      d = Math.max(0, Math.min(100, d));\n      value = Number(value.toFixed(d));\n      valueText = String(value);\n    } else {\n      valueText = 'NaN';\n    }\n    this.setAttribute('value', valueText);\n    this.setAttribute('positive', this.value >= 0);\n    this.textNode = valueText;\n  }\n}\n\nlet lastFocus: Element | null = null;\n{\n  window.addEventListener('focusin', () => {\n    lastFocus = document.activeElement;\n  }, {capture: false});\n  window.addEventListener('blur', () => {\n    setTimeout(() => {\n      if (document.activeElement === document.body) {\n        lastFocus = null;\n      }\n    });\n  }, {capture: true});\n}\n\n@Register\nexport class IoNumberLadderStep extends IoField {\n  static get Style() {\n    return /* css */`\n      :host {\n        pointer-events: all;\n        display: inline-block;\n        cursor: ew-resize;\n        text-align: center;\n        background-color: var(--io_bgColorStrong);\n        color: var(--io_color);\n        align-self: stretch;\n        touch-action: none;\n        width: 6em;\n      }\n      :host:before {\n        float: left;\n        content: '<';\n        opacity: 0.25;\n      }\n      :host:after {\n        float: right;\n        content: '>';\n        opacity: 0.25;\n      }\n    `;\n  }\n\n  @Property({value: 1, type: Number})\n  declare value: number;\n\n  @Property({value: 'number', type: String, reflect: true})\n  declare type: string;\n\n  @Property({value: 'spinbutton', type: String})\n  declare role: string;\n\n  _onKeydown(event: KeyboardEvent) {\n    let stepMove = 0;\n    if (event.key === 'Escape' || event.key === ' ') {\n      this.dispatchEvent('ladder-step-collapse', {}, true);\n    } else if (event.key === 'ArrowLeft' || event.key === 'Backspace') {\n      event.preventDefault();\n      stepMove = this.value * -1;\n    } else if (event.key === 'ArrowUp') {\n      event.preventDefault();\n      this.focusTo('up');\n    } else if (event.key === 'ArrowRight' || event.key === 'Enter') {\n      event.preventDefault();\n      stepMove = this.value * 1;\n    } else if (event.key === 'ArrowDown') {\n      event.preventDefault();\n      this.focusTo('down');\n    }\n    if (stepMove !== 0) {\n      this.dispatchEvent('ladder-step-change', {step: Number(stepMove.toFixed(5)), round: event.shiftKey}, true);\n    }\n  }\n  _onPointerdown(event: PointerEvent) {\n    this.setPointerCapture(event.pointerId);\n    this.addEventListener('pointermove', this._onPointermove);\n    this.addEventListener('pointerup', this._onPointerup);\n    this._startX = event.clientX;\n  }\n  _onPointermove(event: PointerEvent) {\n    const deltaX = event.clientX - this._startX;\n    if (Math.abs(deltaX) > 5) {\n      const expMove = Math.pow(deltaX / 5, 2) * deltaX < 0 ? -1: 1;\n      const roundMove = deltaX > 0 ? Math.floor(expMove) : Math.ceil(expMove);\n      const stepMove = this.value * roundMove;\n      this._startX = event.clientX;\n      this.dispatchEvent('ladder-step-change', {step: Number(stepMove.toFixed(5)), round: event.shiftKey}, true);\n    }\n  }\n  _onPointerup(event: PointerEvent) {\n    this.releasePointerCapture(event.pointerId);\n    this.removeEventListener('pointermove', this._onPointermove);\n    this.removeEventListener('pointerup', this._onPointerup);\n    this.dispatchEvent('ladder-step-collapse', {}, true);\n  }\n  init() {\n    this.changed();\n  }\n  changed() {\n    super.changed();\n    this.setAttribute('aria-valuestep', this.value);\n  }\n}\n\n/**\n * Interactive number ladder.\n * When dragged horizontally, it changes the value in step increments.\n * Dragging speed affects the rate of change exponentially.\n * Up/down arrow keys change the step focus while left/right change the value in step increments.\n * Escape key collapses the ladder and restores the focus to previously focused element.\n * If shift key is pressed, value is rounded to the nearest step incement.\n *\n * <io-element-demo element=\"io-ladder\" expanded properties='{\"value\": 0, \"step\": 0.0001, \"conversion\": 1, \"min\": -10000, \"max\": 10000, \"expanded\": true}'></io-element-demo>\n **/\n@Register\nexport class IoNumberLadder extends IoElement {\n  static get Style() {\n    return /* css */`\n      :host {\n        display: flex;\n        flex-direction: column;\n        position: absolute;\n        pointer-events: none;\n        user-select: none;\n        -webkit-tap-highlight-color: transparent;\n        -webkit-user-select: none;\n        -webkit-touch-callout: none;\n      }\n      :host:not([expanded]) {\n        visibility: hidden;\n      }\n      :host:not([expanded]) > io-number-ladder-step {\n        opacity: 0.5;\n      }\n      :host > io-number-ladder-step:nth-child(-n+5) {\n        box-shadow: 0 -1px 4px rgba(0,0,0,0.2);\n      }\n      :host > io-number-ladder-step:nth-child(n+6) {\n        box-shadow: 0 1px 4px rgba(0,0,0,0.2);\n      }\n      :host > .io-up1,\n      :host > .io-down1{\n        z-index: 4;\n        transition: opacity 0.1s, transform 0.1s;\n      }\n      :host > .io-up2,\n      :host > .io-down2 {\n        z-index: 3;\n        opacity: 0.8;\n        transition: opacity 0.2s, transform 0.2s;\n      }\n      :host:not([expanded]) > .io-up4 {\n        transform: translateY(calc(3 * var(--io_fieldHeight)));\n      }\n      :host:not([expanded]) > .io-up3 {\n        transform: translateY(calc(2 * var(--io_fieldHeight)));\n      }\n      :host:not([expanded]) > .io-up2 {\n        transform: translateY(calc(1 * var(--io_fieldHeight)));\n      }\n      :host:not([expanded]) > .io-down2 {\n        transform: translateY(calc(-1 * var(--io_fieldHeight)));\n      }\n      :host:not([expanded]) > .io-down3 {\n        transform: translateY(calc(-2 * var(--io_fieldHeight)));\n      }\n      :host:not([expanded]) > .io-down4 {\n        transform: translateY(calc(-3 * var(--io_fieldHeight)));\n      }\n      :host > .io-up3,\n      :host > .io-down3 {\n        z-index: 2;\n        opacity: 0.6;\n        transition: opacity 0.4s, transform 0.4s;\n      }\n      :host > .io-up4,\n      :host > .io-down4 {\n        z-index: 1;\n        opacity: 0.4;\n        transition: opacity 0.8s, transform 0.8s;\n      }\n      :host > io-number-ladder-step:hover,\n      :host > io-number-ladder-step:focus {\n        background-color: var(--io_bgColorStrong);\n        border-color: var(--io_colorBlue);\n        transition: opacity 0.2s;\n        opacity: 1;\n      }\n      :host > .io-number-ladder-empty {\n        height: var(--io_fieldHeight);\n      }\n      :host > .io-number-ladder-center {\n        height: calc(1.5 * var(--io_fieldHeight));\n      }\n    `;\n  }\n\n  @Property({value: 'list', type: String})\n  declare role: string;\n\n  @Property({value: undefined, type: IoNumber})\n  declare src?: IoNumber;\n\n  @Property({value: false, type: Boolean, reflect: true})\n  declare expanded: boolean;\n\n  static get Listeners() {\n    return {\n      'ladder-step-change': '_onLadderStepChange',\n      'ladder-step-collapse': '_onLadderStepCollapse',\n      'focusin': '_onFocusIn',\n    };\n  }\n  get value() {\n    return this.src ? this.src.value : 0;\n  }\n  get min() {\n    return this.src ? this.src.min : -Infinity;\n  }\n  get max() {\n    return this.src ? this.src.max : Infinity;\n  }\n  get step() {\n    return this.src ? this.src.step : 0.0001;\n  }\n  get conversion() {\n    return this.src ? this.src.conversion : 1;\n  }\n  _onFocusIn(event: FocusEvent) {\n    event.stopPropagation();\n  }\n  _onFocusTo(event: CustomEvent) {\n    event.stopPropagation();\n    const srcStep = event.composedPath()[0];\n    const src = this.src;\n    const dir = event.detail.dir;\n    if (src) {\n      if ((srcStep === this.querySelector('.io-up1') && dir === 'down') ||\n          (srcStep === this.querySelector('.io-down1') && dir === 'up')) {\n        src.focus();\n        src.selectionStart = src.selectionEnd = src.textNode.length;\n        return;\n      }\n    }\n    super._onFocusTo(event);\n  }\n  _onLadderStepChange(event: CustomEvent) {\n    const src = this.src;\n    if (src) {\n      const step = event.detail.step;\n      const value = event.detail.round ? (Math.round(this.value / step) * step) : this.value;\n      let newValue = Math.min(this.max, Math.max(this.min, value + step));\n      newValue = Number(newValue.toFixed(5));\n      src.inputValue(newValue);\n    }\n  }\n  _onLadderStepCollapse() {\n    this.setProperty('expanded', false);\n  }\n  expandedChanged() {\n    const src = this.src;\n    if (this.expanded) {\n      if (src) {\n        const rect = src.getBoundingClientRect();\n        const selfRect = this.getBoundingClientRect();\n        // NOTE: layerRect fix for Safari zoom.\n        const layerRect = IoOverlaySingleton.getBoundingClientRect();\n        this.style.top = rect.bottom - layerRect.top + 'px';\n        this.style.left = rect.left - layerRect.left + 'px';\n        this.style.marginTop = - (selfRect.height / 2 + IoThemeSingleton.lineHeight / 2 + IoThemeSingleton.spacing) + 'px';\n      } else {\n        this.removeAttribute('style');\n      }\n    } else {\n      if (src && src._pointerType !== 'touch') {\n        src.focus();\n      } else if (lastFocus) {\n        (lastFocus as HTMLElement).focus();\n      }\n    }\n    this.dispatchEvent('expanded', {value: this.expanded}, true);\n  }\n  changed() {\n    const range = this.max - this.min;\n    const hiddenItem = ['span', {class: 'io-number-ladder-empty'}];\n\n    // TODO: unhack\n    let step = this.step / 10000;\n    while (step < .1) step = step * 10;\n\n    const upStep4 = 10000 * step;\n    const upStep3 = 1000 * step;\n    const upStep2 = 100 * step;\n    const upStep1 = 10 * step;\n    const downStep1 = 1 * step;\n    const downStep2 = .1 * step;\n    const downStep3 = .01 * step;\n    const downStep4 = .001 * step;\n\n    const upLabel4 = Number((upStep4 * this.conversion).toFixed(6));\n    const upLabel3 = Number((upStep3 * this.conversion).toFixed(6));\n    const upLabel2 = Number((upStep2 * this.conversion).toFixed(6));\n    const upLabel1 = Number((upStep1 * this.conversion).toFixed(6));\n    const downLabel1 = Number((downStep1 * this.conversion).toFixed(6));\n    const downLabel2 = Number((downStep2 * this.conversion).toFixed(6));\n    const downLabel3 = Number((downStep3 * this.conversion).toFixed(6));\n    const downLabel4 = Number((downStep4 * this.conversion).toFixed(6));\n\n    this.template([\n      (range >= upStep4) ? ['io-number-ladder-step', {class: 'io-up4', value: upStep4, label: String(upLabel4)}] : hiddenItem,\n      (range >= upStep3) ? ['io-number-ladder-step', {class: 'io-up3', value: upStep3, label: String(upLabel3)}] : hiddenItem,\n      (range >= upStep2) ? ['io-number-ladder-step', {class: 'io-up2', value: upStep2, label: String(upLabel2)}] : hiddenItem,\n      (range >= upStep1) ? ['io-number-ladder-step', {class: 'io-up1', value: upStep1, label: String(upLabel1)}] : hiddenItem,\n      ['span', {class: 'io-number-ladder-center'}],\n      (this.step <= downStep1) ? ['io-number-ladder-step', {class: 'io-down1', value: downStep1, label: String(downLabel1)}] : hiddenItem,\n      (this.step <= downStep2) ? ['io-number-ladder-step', {class: 'io-down2', value: downStep2, label: String(downLabel2)}] : hiddenItem,\n      (this.step <= downStep3) ? ['io-number-ladder-step', {class: 'io-down3', value: downStep3, label: String(downLabel3)}] : hiddenItem,\n      (this.step <= downStep4) ? ['io-number-ladder-step', {class: 'io-down4', value: downStep4, label: String(downLabel4)}] : hiddenItem,\n    ]);\n\n    this.setAttribute('aria-valuemin', this.min);\n    this.setAttribute('aria-valuemax', this.max);\n    this.setAttribute('aria-valuenow', this.value);\n    this.setAttribute('aria-valuestep', this.step);\n    this.setAttribute('aria-invalid', (typeof this.value !== 'number' || isNaN(this.value))  ? 'true' : false);\n\n    const steps = this.querySelectorAll('io-number-ladder-step');\n    for (let i = steps.length; i--;) {\n      steps[i].setAttribute('aria-valuemin', this.min);\n      steps[i].setAttribute('aria-valuemax', this.max);\n      steps[i].setAttribute('aria-valuenow', this.value);\n      steps[i].changed();\n    }\n  }\n}\n\nexport const IoNumberLadderSingleton = new IoNumberLadder();\nIoOverlaySingleton.appendChild(IoNumberLadderSingleton as unknown as HTMLElement);\n"]}