{"version":3,"file":"io-number-ladder-step.js","sourceRoot":"","sources":["../src/io-number-ladder-step.ts"],"names":[],"mappings":"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","sourcesContent":["import { Register, Property, IoField } from 'io-gui';\n\n@Register\nexport class IoNumberLadderStep extends IoField {\n  static get Style() {\n    return /* css */`\n      :host {\n        pointer-events: all;\n        display: inline-block;\n        cursor: ew-resize;\n        text-align: center;\n        background-color: var(--io_bgColorStrong);\n        color: var(--io_color);\n        align-self: stretch;\n        touch-action: none;\n        width: 6em;\n      }\n      :host:before {\n        float: left;\n        content: '<';\n        opacity: 0.25;\n      }\n      :host:after {\n        float: right;\n        content: '>';\n        opacity: 0.25;\n      }\n    `;\n  }\n\n  @Property({value: 1, type: Number})\n  declare value: number;\n\n  @Property({value: 'number', type: String, reflect: true})\n  declare type: string;\n\n  @Property({value: 'spinbutton', type: String})\n  declare role: string;\n\n  _onKeydown(event: KeyboardEvent) {\n    let stepMove = 0;\n    if (event.key === 'Escape' || event.key === ' ') {\n      this.dispatchEvent('ladder-step-collapse', {}, true);\n    } else if (event.key === 'ArrowLeft' || event.key === 'Backspace') {\n      event.preventDefault();\n      stepMove = this.value * -1;\n    } else if (event.key === 'ArrowUp') {\n      event.preventDefault();\n      this.focusTo('up');\n    } else if (event.key === 'ArrowRight' || event.key === 'Enter') {\n      event.preventDefault();\n      stepMove = this.value * 1;\n    } else if (event.key === 'ArrowDown') {\n      event.preventDefault();\n      this.focusTo('down');\n    }\n    if (stepMove !== 0) {\n      this.dispatchEvent('ladder-step-change', {step: Number(stepMove.toFixed(5)), round: event.shiftKey}, true);\n    }\n  }\n  _onPointerdown(event: PointerEvent) {\n    this.setPointerCapture(event.pointerId);\n    this.addEventListener('pointermove', this._onPointermove);\n    this.addEventListener('pointerup', this._onPointerup);\n    this._startX = event.clientX;\n  }\n  _onPointermove(event: PointerEvent) {\n    const deltaX = event.clientX - this._startX;\n    if (Math.abs(deltaX) > 5) {\n      const expMove = Math.pow(deltaX / 5, 2) * deltaX < 0 ? -1: 1;\n      const roundMove = deltaX > 0 ? Math.floor(expMove) : Math.ceil(expMove);\n      const stepMove = this.value * roundMove;\n      this._startX = event.clientX;\n      this.dispatchEvent('ladder-step-change', {step: Number(stepMove.toFixed(5)), round: event.shiftKey}, true);\n    }\n  }\n  _onPointerup(event: PointerEvent) {\n    this.releasePointerCapture(event.pointerId);\n    this.removeEventListener('pointermove', this._onPointermove);\n    this.removeEventListener('pointerup', this._onPointerup);\n    this.dispatchEvent('ladder-step-collapse', {}, true);\n  }\n  init() {\n    this.changed();\n  }\n  changed() {\n    super.changed();\n    this.setAttribute('aria-valuestep', this.value);\n  }\n}\n"]}