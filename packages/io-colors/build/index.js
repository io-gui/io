import{Property as e,IoElement as t,Register as n,glsl as r,IoOverlaySingleton as o}from"io-gui";import{IoSlider as l,IoSlider2d as i}from"io-sliders";
/**@License
 * Copyright (c) 2011-2016 Heather Arthur <fayearthur@gmail.com>
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 */
const s={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(const e of Object.keys(s)){if(!("channels"in s[e]))throw new Error("missing channels property: "+e);if(!("labels"in s[e]))throw new Error("missing channel labels property: "+e);if(s[e].labels.length!==s[e].channels)throw new Error("channel and label counts mismatch: "+e);const{channels:t,labels:n}=s[e];delete s[e].channels,delete s[e].labels,Object.defineProperty(s[e],"channels",{value:t}),Object.defineProperty(s[e],"labels",{value:n})}s.rgb.hsl=function(e){const t=e[0]/255,n=e[1]/255,r=e[2]/255,o=Math.min(t,n,r),l=Math.max(t,n,r),i=l-o;let s,a=0;l===o?a=0:t===l?a=(n-r)/i:n===l?a=2+(r-t)/i:r===l&&(a=4+(t-n)/i),a=Math.min(60*a,360),a<0&&(a+=360);const c=(o+l)/2;return s=l===o?0:c<=.5?i/(l+o):i/(2-l-o),[a,100*s,100*c]},s.rgb.hsv=function(e){let t,n,r,o,l=0;const i=e[0]/255,s=e[1]/255,a=e[2]/255,c=Math.max(i,s,a),u=c-Math.min(i,s,a),diffc=function(e){return(c-e)/6/u+.5};return 0===u?(l=0,o=0):(o=u/c,t=diffc(i),n=diffc(s),r=diffc(a),i===c?l=r-n:s===c?l=1/3+t-r:a===c&&(l=2/3+n-t),l<0?l+=1:l>1&&(l-=1)),[360*l,100*o,100*c]},s.rgb.hwb=function(e){const t=e[0],n=e[1];let r=e[2];const o=s.rgb.hsl(e)[0],l=1/255*Math.min(t,Math.min(n,r));return r=1-1/255*Math.max(t,Math.max(n,r)),[o,100*l,100*r]},s.rgb.xyz=function(e){let t=e[0]/255,n=e[1]/255,r=e[2]/255;t=t>.04045?((t+.055)/1.055)**2.4:t/12.92,n=n>.04045?((n+.055)/1.055)**2.4:n/12.92,r=r>.04045?((r+.055)/1.055)**2.4:r/12.92;return[100*(.4124*t+.3576*n+.1805*r),100*(.2126*t+.7152*n+.0722*r),100*(.0193*t+.1192*n+.9505*r)]},s.rgb.lab=function(e){const t=s.rgb.xyz(e);let n=t[0],r=t[1],o=t[2];n/=95.047,r/=100,o/=108.883,n=n>.008856?n**(1/3):7.787*n+16/116,r=r>.008856?r**(1/3):7.787*r+16/116,o=o>.008856?o**(1/3):7.787*o+16/116;return[116*r-16,500*(n-r),200*(r-o)]},s.hsl.rgb=function(e){const t=e[0]/360,n=e[1]/100,r=e[2]/100;let o,l,i;if(0===n)return i=255*r,[i,i,i];o=r<.5?r*(1+n):r+n-r*n;const s=2*r-o,a=[0,0,0];for(let e=0;e<3;e++)l=t+1/3*-(e-1),l<0&&l++,l>1&&l--,i=6*l<1?s+6*(o-s)*l:2*l<1?o:3*l<2?s+(o-s)*(2/3-l)*6:s,a[e]=255*i;return a},s.hsl.hsv=function(e){const t=e[0];let n=e[1]/100,r=e[2]/100,o=n;const l=Math.max(r,.01);r*=2,n*=r<=1?r:2-r,o*=l<=1?l:2-l;return[t,100*(0===r?2*o/(l+o):2*n/(r+n)),100*((r+n)/2)]},s.hsv.rgb=function(e){const t=e[0]/60,n=e[1]/100;let r=e[2]/100;const o=Math.floor(t)%6,l=t-Math.floor(t),i=255*r*(1-n),s=255*r*(1-n*l),a=255*r*(1-n*(1-l));switch(r*=255,o){case 0:return[r,a,i];case 1:return[s,r,i];case 2:return[i,r,a];case 3:return[i,s,r];case 4:return[a,i,r];default:return[r,i,s]}},s.hsv.hsl=function(e){const t=e[0],n=e[1]/100,r=e[2]/100,o=Math.max(r,.01);let l,i;i=(2-n)*r;const s=(2-n)*o;return l=n*o,l/=s<=1?s:2-s,l=l||0,i/=2,[t,100*l,100*i]},s.hwb.rgb=function(e){const t=e[0]/360;let n=e[1]/100,r=e[2]/100;const o=n+r;let l;o>1&&(n/=o,r/=o);const i=Math.floor(6*t),s=1-r;l=6*t-i,1&i&&(l=1-l);const a=n+l*(s-n);let c,u,h;switch(i){default:case 6:case 0:c=s,u=a,h=n;break;case 1:c=a,u=s,h=n;break;case 2:c=n,u=s,h=a;break;case 3:c=n,u=a,h=s;break;case 4:c=a,u=n,h=s;break;case 5:c=s,u=n,h=a}return[255*c,255*u,255*h]},s.xyz.rgb=function(e){const t=e[0]/100,n=e[1]/100,r=e[2]/100;let o,l,i;return o=3.2406*t+-1.5372*n+-.4986*r,l=-.9689*t+1.8758*n+.0415*r,i=.0557*t+-.204*n+1.057*r,o=o>.0031308?1.055*o**(1/2.4)-.055:12.92*o,l=l>.0031308?1.055*l**(1/2.4)-.055:12.92*l,i=i>.0031308?1.055*i**(1/2.4)-.055:12.92*i,o=Math.min(Math.max(0,o),1),l=Math.min(Math.max(0,l),1),i=Math.min(Math.max(0,i),1),[255*o,255*l,255*i]},s.xyz.lab=function(e){let t=e[0],n=e[1],r=e[2];t/=95.047,n/=100,r/=108.883,t=t>.008856?t**(1/3):7.787*t+16/116,n=n>.008856?n**(1/3):7.787*n+16/116,r=r>.008856?r**(1/3):7.787*r+16/116;return[116*n-16,500*(t-n),200*(n-r)]},s.lab.xyz=function(e){let t,n,r;n=(e[0]+16)/116,t=e[1]/500+n,r=n-e[2]/200;const o=n**3,l=t**3,i=r**3;return n=o>.008856?o:(n-16/116)/7.787,t=l>.008856?l:(t-16/116)/7.787,r=i>.008856?i:(r-16/116)/7.787,t*=95.047,n*=100,r*=108.883,[t,n,r]},s.lab.lch=function(e){const t=e[0],n=e[1],r=e[2];let o;o=360*Math.atan2(r,n)/2/Math.PI,o<0&&(o+=360);return[t,Math.sqrt(n*n+r*r),o]},s.lch.lab=function(e){const t=e[0],n=e[1],r=e[2]/360*2*Math.PI;return[t,n*Math.cos(r),n*Math.sin(r)]},s.rgb.ansi16=function(e,t=null){const[n,r,o]=e;let l=null===t?s.rgb.hsv(e)[2]:t;if(l=Math.round(l/50),0===l)return 30;let i=30+(Math.round(o/255)<<2|Math.round(r/255)<<1|Math.round(n/255));return 2===l&&(i+=60),i},s.hsv.ansi16=function(e){return s.rgb.ansi16(s.hsv.rgb(e),e[2])},s.rgb.ansi256=function(e){const t=e[0],n=e[1],r=e[2];if(t===n&&n===r)return t<8?16:t>248?231:Math.round((t-8)/247*24)+232;return 16+36*Math.round(t/255*5)+6*Math.round(n/255*5)+Math.round(r/255*5)},s.ansi16.rgb=function(e){let t=e%10;if(0===t||7===t)return e>50&&(t+=3.5),t=t/10.5*255,[t,t,t];const n=.5*(1+~~(e>50));return[(1&t)*n*255,(t>>1&1)*n*255,(t>>2&1)*n*255]},s.ansi256.rgb=function(e){if(e>=232){const t=10*(e-232)+8;return[t,t,t]}let t;e-=16;return[Math.floor(e/36)/5*255,Math.floor((t=e%36)/6)/5*255,t%6/5*255]},s.rgb.hex=function(e){const t=(((255&Math.round(e[0]))<<16)+((255&Math.round(e[1]))<<8)+(255&Math.round(e[2]))).toString(16).toUpperCase();return"000000".substring(t.length)+t},s.hex.rgb=function(e){const t=e.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!t)return[0,0,0];let n=t[0];3===t[0].length&&(n=n.split("").map((e=>e+e)).join(""));const r=parseInt(n,16);return[r>>16&255,r>>8&255,255&r]},s.rgb.hcg=function(e){const t=e[0]/255,n=e[1]/255,r=e[2]/255,o=Math.max(Math.max(t,n),r),l=Math.min(Math.min(t,n),r),i=o-l;let s,a;return s=i<1?l/(1-i):0,a=i<=0?0:o===t?(n-r)/i%6:o===n?2+(r-t)/i:4+(t-n)/i+4,a/=6,a%=1,[360*a,100*i,100*s]},s.hsl.hcg=function(e){const t=e[1]/100,n=e[2]/100,r=n<.5?2*t*n:2*t*(1-n);let o=0;return r<1&&(o=(n-.5*r)/(1-r)),[e[0],100*r,100*o]},s.hsv.hcg=function(e){const t=e[1]/100,n=e[2]/100,r=t*n;let o=0;return r<1&&(o=(n-r)/(1-r)),[e[0],100*r,100*o]},s.hcg.rgb=function(e){const t=e[0]/360,n=e[1]/100,r=e[2]/100;if(0===n)return[255*r,255*r,255*r];const o=[0,0,0],l=t%1*6,i=l%1,s=1-i;let a=0;switch(Math.floor(l)){case 0:o[0]=1,o[1]=i,o[2]=0;break;case 1:o[0]=s,o[1]=1,o[2]=0;break;case 2:o[0]=0,o[1]=1,o[2]=i;break;case 3:o[0]=0,o[1]=s,o[2]=1;break;case 4:o[0]=i,o[1]=0,o[2]=1;break;default:o[0]=1,o[1]=0,o[2]=s}return a=(1-n)*r,[255*(n*o[0]+a),255*(n*o[1]+a),255*(n*o[2]+a)]},s.hcg.hsv=function(e){const t=e[1]/100,n=t+e[2]/100*(1-t);let r=0;return n>0&&(r=t/n),[e[0],100*r,100*n]},s.hcg.hsl=function(e){const t=e[1]/100,n=e[2]/100*(1-t)+.5*t;let r=0;return n>0&&n<.5?r=t/(2*n):n>=.5&&n<1&&(r=t/(2*(1-n))),[e[0],100*r,100*n]},s.hcg.hwb=function(e){const t=e[1]/100,n=t+e[2]/100*(1-t);return[e[0],100*(n-t),100*(1-n)]},s.hwb.hcg=function(e){const t=e[1]/100,n=1-e[2]/100,r=n-t;let o=0;return r<1&&(o=(n-r)/(1-r)),[e[0],100*r,100*o]},s.apple.rgb=function(e){return[e[0]/65535*255,e[1]/65535*255,e[2]/65535*255]},s.rgb.apple=function(e){return[e[0]/255*65535,e[1]/255*65535,e[2]/255*65535]},s.gray.rgb=function(e){return[e[0]/100*255,e[0]/100*255,e[0]/100*255]},s.gray.hsl=function(e){return[0,0,e[0]]},s.gray.hsv=s.gray.hsl,s.gray.hwb=function(e){return[0,100,e[0]]},s.gray.lab=function(e){return[e[0],0,0]},s.gray.hex=function(e){const t=255&Math.round(e[0]/100*255),n=((t<<16)+(t<<8)+t).toString(16).toUpperCase();return"000000".substring(n.length)+n},s.rgb.gray=function(e){return[(e[0]+e[1]+e[2])/3/255*100]};var __decorate$5=function(e,t,n,r){var o,l=arguments.length,i=l<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(l<3?o(i):l>3?o(t,n,i):o(t,n))||i);return l>3&&i&&Object.defineProperty(t,n,i),i};class IoColorBase extends t{init(){this.valueChanged()}valueMutated(){this.valueChanged()}rgbFromHsv(){const e=s.hsv.rgb([360*this.hsv[0],100*this.hsv[1],100*this.hsv[2]]);this.rgba[0]=e[0]/255,this.rgba[1]=e[1]/255,this.rgba[2]=e[2]/255}rgbFromHsl(){const e=s.hsl.rgb([360*this.hsl[0],100*this.hsl[1],100*this.hsl[2]]);this.rgba[0]=e[0]/255,this.rgba[1]=e[1]/255,this.rgba[2]=e[2]/255}valueFromRgb(){this.value.r=this.rgba[0],this.value.g=this.rgba[1],this.value.b=this.rgba[2]}valueChanged(){const e=[255*this.value.r,255*this.value.g,255*this.value.b],t=s.rgb.hsv(e),n=s.rgb.hsl(e);0!==t[0]&&360!==t[0]||(t[0]=360*this.hsv[0]),0!==n[0]&&360!==n[0]||(n[0]=360*this.hsl[0]),0===t[1]&&(t[0]=360*this.hsv[0]),0===n[1]&&(n[0]=360*this.hsl[0]),0===t[2]&&(t[1]=100*this.hsv[1]),0!==n[2]&&100!==n[2]||(n[0]=360*this.hsl[0],n[1]=100*this.hsl[1]),this.setProperties({rgba:[e[0]/255,e[1]/255,e[2]/255,this.value.a??1],hsv:[t[0]/360,t[1]/100,t[2]/100],hsl:[n[0]/360,n[1]/100,n[2]/100]})}}__decorate$5([e("debounced")],IoColorBase.prototype,"reactivity",void 0),__decorate$5([e({type:Object,init:{r:1,g:1,b:1,a:1}})],IoColorBase.prototype,"value",void 0),__decorate$5([e({type:Array,init:[1,1,1,1]})],IoColorBase.prototype,"rgba",void 0),__decorate$5([e({type:Array,init:[1,1,1]})],IoColorBase.prototype,"hsv",void 0),__decorate$5([e({type:Array,init:[1,1,1]})],IoColorBase.prototype,"hsl",void 0);var __decorate$4=function(e,t,n,r){var o,l=arguments.length,i=l<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(l<3?o(i):l>3?o(t,n,i):o(t,n))||i);return l>3&&i&&Object.defineProperty(t,n,i),i};let a=class IoColorSlider extends IoColorBase{static get Style(){return"\n      :host {\n        display: flex;\n      }\n    "}_onValueInput(e){const t=e.detail.value;switch(this.channel){case"r":this.value.r=t;break;case"g":this.value.g=t;break;case"b":this.value.b=t;break;case"a":this.value.a=t;break;case"h":this.hsv[0]=t,this.rgbFromHsv(),this.valueFromRgb();break;case"s":this.hsv[1]=t,this.rgbFromHsv(),this.valueFromRgb();break;case"v":this.hsv[2]=t,this.rgbFromHsv(),this.valueFromRgb();break;case"l":this.hsl[2]=t,this.rgbFromHsl(),this.valueFromRgb();break;case"hs":this.hsv[0]=t[0],this.hsv[1]=t[1],this.rgbFromHsv(),this.valueFromRgb();break;case"sv":this.hsv[1]=t[0],this.hsv[2]=t[1],this.rgbFromHsv(),this.valueFromRgb();break;case"sl":this.hsl[1]=t[0],this.hsl[2]=t[1],this.rgbFromHsl(),this.valueFromRgb()}this.dispatchEvent("object-mutated",{object:this.value},!1,window),this.dispatchEvent("value-input",{property:"value",value:this.value},!1)}changed(){const e=this.channel,t=`io-color-slider-${e}`;let n=0,r=[0,0,0,0],o=0,l=1,i=this.step;switch(this.channel){case"r":n=this.value.r,r=[...this.rgba];break;case"g":n=this.value.g,r=[...this.rgba];break;case"b":n=this.value.b,r=[...this.rgba];break;case"a":n=this.value.a||0,r=[...this.rgba];break;case"h":n=this.hsv[0],r=[...this.hsv,1];break;case"s":n=this.hsv[1],r=[...this.hsv,1];break;case"v":n=this.hsv[2],r=[...this.hsv,1];break;case"l":n=this.hsl[2],r=[...this.hsl,1];break;case"hs":n=[this.hsv[0],this.hsv[1]],r=[...this.hsv,1],o=[o,o],l=[l,l],i=[i,i];break;case"sv":n=[this.hsv[1],this.hsv[2]],r=[...this.hsv,1],o=[o,o],l=[l,l],i=[i,i];break;case"sl":n=[this.hsl[1],this.hsl[2]],r=[...this.hsl,1],o=[o,o],l=[l,l],i=[i,i]}this.template([[t,{id:e,value:n,min:o,max:l,step:i,vertical:this.vertical,color:r,"@value-input":this._onValueInput}]])}};__decorate$4([e({type:Array,init:[0,0,0,0]})],a.prototype,"color",void 0),__decorate$4([e(.01)],a.prototype,"step",void 0),__decorate$4([e("")],a.prototype,"channel",void 0),__decorate$4([e({value:!1,reflect:!0})],a.prototype,"vertical",void 0),a=__decorate$4([n],a);class IoColorSliderBase extends l{static get GlUtils(){return`\n      // Note: Implement in subclass!\n      // TODO: Allow GlUtils to rewrite inherited functions!\n      // vec3 getStartColor(vec2 uv) {}\n      // vec3 getEndColor(vec2 uv) {}\n      ${r.hue2rgb}\n      ${r.hsv2rgb}\n      ${r.hsl2rgb}\n    `}static get Frag(){return"\n    varying vec2 vUv;\n\n    void main(void) {\n      // Dimensions\n      vec2 size = uVertical == 1 ? uSize.yx : uSize;\n      vec2 uv = uVertical == 1 ? vUv.yx : vUv;\n      vec2 position = size * vec2(uv.x, uv.y - 0.5);\n      float valueInRange = (uValue - uMin) / (uMax - uMin);\n\n      // Colors\n      vec3 finalCol = io_bgColorField.rgb;\n      vec3 startCol = getStartColor(uv);\n      vec3 gridCol = io_bgColorDimmed.rgb;\n      vec3 endCol = getEndColor(uv);\n      vec3 sliderCol = mix(startCol, endCol, uv.x);\n\n      vec2 linePos = translate(size * uv, 0.0, size.y / 2.);\n      finalCol = paintHorizontalLine(finalCol, linePos, sliderCol);\n\n      // Grid\n      float gridSize = size.x / abs((uMax - uMin) / uStep);\n      float gridOffset = mod(uStep - uMin, uStep) / (uMax - uMin) * size.x;\n      float gridShape = paintDerivativeGrid2D(translate(position, gridOffset, 0.0), vec2(gridSize, 0.0), io_borderWidth);\n      if (size.x * uStep < 4.0) gridShape = 0.0;\n      finalCol = compose(finalCol, vec4(sliderCol, gridShape * 0.25));\n\n      // Slider\n      float sliderShape = rectangle(position, vec2(size.x * valueInRange, size.y));\n      finalCol = compose(finalCol, vec4(sliderCol, sliderShape));\n      finalCol = compose(finalCol, vec4(io_bgColorField.rgb, gridShape * sliderShape * 0.125));\n\n      gl_FragColor = vec4(finalCol, 1.0);\n    }"}}class IoColorSlider2dBase extends i{static get GlUtils(){return`\n      // Note: Implement in subclass!\n      // TODO: Allow GlUtils to rewrite inherited functions!\n      // vec3 getColor(vec2 uv) {}\n      ${r.hue2rgb}\n      ${r.hsv2rgb}\n      ${r.hsl2rgb}\n    `}static get Frag(){return"\n    varying vec2 vUv;\n\n    void main(void) {\n      // Dimensions\n      vec2 size = uVertical == 1 ? uSize.yx : uSize;\n      vec2 uv = uVertical == 1 ? vUv.yx : vUv;\n      vec2 position = size * (uv - vec2(0.5));\n\n      // Colors\n      vec3 finalCol = geio_color(uv);\n      vec3 gridCol = io_bgColorDimmed.rgb;\n      vec3 sliderCol = geio_color(uValue);\n\n      // Grid\n      vec2 gridSize = size / abs((uMax - uMin) / uStep);\n      vec2 gridOffset = (uMax + uMin) / (uMax - uMin) * size / 2.;\n      vec2 gridPosition = translate(position, -gridOffset);\n      float gridShape = paintDerivativeGrid2D(gridPosition, gridSize, io_borderWidth);\n      if (min(size.x * uStep.x, size.y * uStep.y) < 2.0) gridShape = 0.0;\n      finalCol = compose(finalCol, vec4(gridCol, gridShape * 0.5));\n\n      vec2 knobPos = uValue / (uMax - uMin) * size;\n      finalCol = paintKnob(finalCol, gridPosition, knobPos, sliderCol);\n\n      gl_FragColor = vec4(finalCol, 1.0);\n    }"}}let c=class IoColorSliderR extends IoColorSliderBase{static get GlUtils(){return"\n      vec3 getStartColor(vec2 uv) {\n        return vec3(uv.x, uColor[1], uColor[2]);\n      }\n      vec3 getEndColor(vec2 uv) {\n        return vec3(uv.x, uColor[1], uColor[2]);\n      }\n    "}};c=__decorate$4([n],c);let u=class IoColorSliderG extends IoColorSliderBase{static get GlUtils(){return"\n      vec3 getStartColor(vec2 uv) {\n        return vec3(uColor[0], uv.x, uColor[2]);\n      }\n      vec3 getEndColor(vec2 uv) {\n        return vec3(uColor[0], uv.x, uColor[2]);\n      }\n    "}};u=__decorate$4([n],u);let h=class IoColorSliderB extends IoColorSliderBase{static get GlUtils(){return"\n      vec3 getStartColor(vec2 uv) {\n        return vec3(uColor[0], uColor[1], uv.x);\n      }\n      vec3 getEndColor(vec2 uv) {\n        return vec3(uColor[0], uColor[1], uv.x);\n      }\n    "}};h=__decorate$4([n],h);let v=class IoColorSliderA extends IoColorSliderBase{static get GlUtils(){return"\n      vec3 getStartColor(vec2 uv) {\n        vec2 size = uVertical == 1 ? uSize.yx : uSize;\n        vec2 position = size * (uv - vec2(0.0, 0.5));\n        return mix(vec3(0.5), vec3(1.0), checkerX(position, io_fieldHeight / 4.0));\n      }\n      vec3 getEndColor(vec2 uv) {\n        vec2 size = uVertical == 1 ? uSize.yx : uSize;\n        vec2 position = size * (uv - vec2(0.0, 0.5));\n        vec3 chkCol = mix(vec3(0.5), vec3(1.0), checkerX(position, io_fieldHeight / 4.0));\n        return mix(chkCol, uColor.rgb, 1.0);\n      }\n    "}};v=__decorate$4([n],v);let d=class IoColorSliderH extends IoColorSliderBase{static get GlUtils(){return"\n      vec3 getStartColor(vec2 uv) {\n        return hsv2rgb(vec3(uv.x, uColor[1], uColor[2]));\n      }\n      vec3 getEndColor(vec2 uv) {\n        return hsv2rgb(vec3(uv.x, uColor[1], uColor[2]));\n      }\n    "}};d=__decorate$4([n],d);let g=class IoColorSliderS extends IoColorSliderBase{static get GlUtils(){return"\n      vec3 getStartColor(vec2 uv) {\n        return hsv2rgb(vec3(uColor[0], uv.x, uColor[2]));\n      }\n      vec3 getEndColor(vec2 uv) {\n        return hsv2rgb(vec3(uColor[0], uv.x, uColor[2]));\n      }\n    "}};g=__decorate$4([n],g);let b=class IoColorSliderV extends IoColorSliderBase{static get GlUtils(){return"\n      vec3 getStartColor(vec2 uv) {\n        return hsv2rgb(vec3(uColor[0], uColor[1], uv.x));\n      }\n      vec3 getEndColor(vec2 uv) {\n        return hsv2rgb(vec3(uColor[0], uColor[1], uv.x));\n      }\n    "}};b=__decorate$4([n],b);let p=class IoColorSliderL extends IoColorSliderBase{static get GlUtils(){return"\n      vec3 getStartColor(vec2 uv) {\n        return hsl2rgb(vec3(uColor[0], uColor[1], uv.x));\n      }\n      vec3 getEndColor(vec2 uv) {\n        return hsl2rgb(vec3(uColor[0], uColor[1], uv.x));\n      }\n    "}};p=__decorate$4([n],p);let f=class IoColorSliderHs extends IoColorSlider2dBase{static get GlUtils(){return"\n      vec3 geio_color(vec2 uv) {\n        return hsv2rgb(vec3(uv, uColor[2]));\n      }\n    "}};f=__decorate$4([n],f);let C=class IoColorSliderSv extends IoColorSlider2dBase{static get GlUtils(){return"\n      vec3 geio_color(vec2 uv) {\n        return hsv2rgb(vec3(uColor[0], uv));\n      }\n    "}};C=__decorate$4([n],C);let m=class IoColorSliderSL extends IoColorSlider2dBase{static get GlUtils(){return"\n      vec3 geio_color(vec2 uv) {\n        return hsl2rgb(vec3(uColor[0], uv));\n      }\n    "}};m=__decorate$4([n],m);var __decorate$3=function(e,t,n,r){var o,l=arguments.length,i=l<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(l<3?o(i):l>3?o(t,n,i):o(t,n))||i);return l>3&&i&&Object.defineProperty(t,n,i),i};let x=class IoColorPanel extends IoColorBase{static get Style(){return"\n    :host {\n      display: flex;\n      /* Panel */\n      flex: 1 1 auto;\n      flex-direction: column;\n      flex-wrap: nowrap;\n      align-self: stretch;\n      align-items: stretch;\n      justify-self: stretch;\n      border-radius: var(--io_borderRadius);\n      border: var(--io_border);\n      border-color: var(--io_borderColorOutset);\n      color: var(--io_colorField);\n      background-color: var(--io_bgColorDimmed);\n      padding: var(--io_spacing);\n      /*  */\n      cursor: move;\n      align-items: stretch;\n      flex-grow: 0;\n      min-width: var(--io_lineHeight);\n      min-height: calc(var(--io_lineHeight) * 5.5);\n      flex-direction: row;\n    }\n    :host:not([expanded]) {\n      display: none;\n    }\n    :host[vertical] {\n      flex-direction: column;\n    }\n    :host > * {\n      border-radius: calc(var(--io_borderRadius) - var(--io_borderWidth));\n    }\n    :host > :first-child {\n      flex: 1 0 auto;\n    }\n    :host > *:not(:first-child) {\n      flex: 0 0 auto;\n    }\n    :host > *:not(:last-child) {\n      margin: 0 0 var(--io_spacing) 0;\n    }\n    :host:not([vertical]) > * {\n      margin: 0 var(--io_spacing) 0 0;\n    }\n    "}static get Listeners(){return{keydown:"_onKeydown"}}_onKeydown(e){"Escape"!==e.key&&"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),this.expanded=!1)}onValueSet(){this.dispatchEvent("value-input",{property:"value",value:this.value},!0)}changed(){this.template([["io-color-slider",{value:this.value,channel:"sv",vertical:this.vertical,"@value-input":this.onValueSet}],["io-color-slider",{value:this.value,channel:"h",vertical:!this.vertical,"@value-input":this.onValueSet}],void 0!==this.value.a?["io-color-slider",{value:this.value,channel:"a","@value-input":this.onValueSet,vertical:!this.vertical}]:null])}};__decorate$3([e({value:!1,reflect:!0})],x.prototype,"expanded",void 0),__decorate$3([e({value:!1,reflect:!0})],x.prototype,"vertical",void 0),__decorate$3([e({value:!1,reflect:!0})],x.prototype,"inlayer",void 0),x=__decorate$3([n],x);const y=new x({inlayer:!0});o.appendChild(y);var __decorate$2=function(e,t,n,r){var o,l=arguments.length,i=l<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(l<3?o(i):l>3?o(t,n,i):o(t,n))||i);return l>3&&i&&Object.defineProperty(t,n,i),i};let S=class IoColorSwatch extends IoColorBase{static get Style(){return"\n      :host {\n        display: inline-block;\n        min-width: var(--io_fieldHeight);\n        height: var(--io_fieldHeight);\n        background-color: white;\n        background-image: linear-gradient(45deg, #808080 25%, transparent 25%), linear-gradient(-45deg, #808080 25%, transparent 25%), linear-gradient(45deg, transparent 75%, #808080 75%), linear-gradient(-45deg, transparent 75%, #808080 75%);\n        background-size: 12px 12px;\n        background-position: 0 0, 0 6px, 6px -6px, -6px 0px;\n        overflow: visible;\n      }\n      :host > div { \n        width: 100%;\n        height: 100%;\n      }\n    "}valueChanged(){super.valueChanged(),this.template([["div",{style:{"background-color":`rgba(${255*this.rgba[0]},${255*this.rgba[1]}, ${255*this.rgba[2]}, ${this.rgba[3]})`}}]])}};S=__decorate$2([n],S);var __decorate$1=function(e,t,n,r){var o,l=arguments.length,i=l<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(l<3?o(i):l>3?o(t,n,i):o(t,n))||i);return l>3&&i&&Object.defineProperty(t,n,i),i};let M=class IoColorPicker extends t{static get Style(){return"\n      :host {\n        height: var(--io_fieldHeight);\n        border: var(--io_border);\n        border-color: var(--io_borderColorInset);\n        border-radius: var(--io_borderRadius);\n        overflow: hidden;\n      }\n    "}static get Listeners(){return{click:"_onClick",keydown:"_onKeydown"}}_onClick(e){this.toggle()}get expanded(){return y.expanded&&y.value===this.value}_onKeydown(e){const t=this.getBoundingClientRect(),n=y.getBoundingClientRect();"Enter"===e.key||" "===e.key?(e.preventDefault(),this.toggle(),this.expanded&&y.firstChild.focus()):this.expanded&&n.top>=t.bottom&&"ArrowDown"===e.key||this.expanded&&n.bottom<=t.top&&"ArrowUp"===e.key?(e.preventDefault(),y.firstChild.focus()):(this.collapse(),super._onKeydown(e))}_onValueSet(){this.dispatchEvent("value-input",{property:"value",value:this.value},!0)}toggle(){this.expanded?this.collapse():this.expand()}expand(){y.value=this.value,y.expanded=!0,o.setElementPosition(y,"down",this.getBoundingClientRect()),y.addEventListener("value-input",this._onValueSet),y._targetValueSetHandler=this._onValueSet}collapse(){y.removeEventListener("value-input",y._targetValueSetHandler),y.expanded=!1}changed(){this.template([["io-color-swatch",{$:"swatch",value:this.value}]])}};__decorate$1([e({value:{r:1,g:1,b:1,a:1}})],M.prototype,"value",void 0),__decorate$1([e("0")],M.prototype,"tabindex",void 0),M=__decorate$1([n],M);var __decorate=function(e,t,n,r){var o,l=arguments.length,i=l<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(l<3?o(i):l>3?o(t,n,i):o(t,n))||i);return l>3&&i&&Object.defineProperty(t,n,i),i};let k=class IoColorRgba extends IoColorBase{static get Style(){return"\n      :host {\n        display: flex;\n        flex: 0 1 auto;\n        min-width: var(--io_fieldHeight5);\n        width: var(--io_fieldHeight10);\n      }\n      :host > io-number {\n        flex: 1 0 0;\n      }\n      :host > io-number#r {\n        border-bottom-color: var(--io_bgColorRed);\n      }\n      :host > io-number#g {\n        border-bottom-color: var(--io_bgColorGreen);\n      }\n      :host > io-number#b {\n        border-bottom-color: var(--io_bgColorBlue);\n      }\n      :host > io-number#a {\n        border-bottom-color: var(--io_color);\n      }\n      :host > io-color-picker {\n        flex-shrink: 0;\n      }\n      :host > *:not(:last-child) {\n        margin-right: var(--io_spacing);\n      }\n    "}_onNumberValueInput(e){const t=e.composedPath()[0].id,n=e.detail.value,r=e.detail.oldValue,o=this.value;o[t]=n;const l={object:this.value,property:t,value:o,oldValue:r};this.dispatchEvent("object-mutated",l,!1,window)}changed(){this.template([["io-number",{$:"r",id:"r",value:this.value.r,min:0,max:1,step:.001,ladder:!0,"@value-input":this._onNumberValueInput}],["io-number",{$:"g",id:"g",value:this.value.g,min:0,max:1,step:.001,ladder:!0,"@value-input":this._onNumberValueInput}],["io-number",{$:"b",id:"b",value:this.value.b,min:0,max:1,step:.001,ladder:!0,"@value-input":this._onNumberValueInput}],void 0!==this.value.a?["io-number",{$:"a",id:"a",value:this.value.a,min:0,max:1,step:1e-4,ladder:!0,"@value-input":this._onNumberValueInput}]:null,["io-color-picker",{$:"swatch",value:this.value}]])}};k=__decorate([n],k);export{IoColorBase,x as IoColorPanel,y as IoColorPanelSingleton,M as IoColorPicker,k as IoColorRgba,a as IoColorSlider,IoColorSlider2dBase,v as IoColorSliderA,h as IoColorSliderB,IoColorSliderBase,u as IoColorSliderG,d as IoColorSliderH,f as IoColorSliderHs,p as IoColorSliderL,c as IoColorSliderR,g as IoColorSliderS,m as IoColorSliderSL,C as IoColorSliderSv,b as IoColorSliderV,S as IoColorSwatch};
