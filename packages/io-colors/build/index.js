import{ReactiveProperty as e,Register as t,IoElement as r,glsl as o,IoOverlaySingleton as n,div as i,Property as s,nudge as l}from"io-gui";import{IoSlider as a,IoSlider2d as u}from"io-sliders";import{ioNumber as c}from"io-inputs";
/**@License
 * Copyright (c) 2011-2016 Heather Arthur <fayearthur@gmail.com>
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 */var __decorate$5=function(e,t,r,o){var n,i=arguments.length,s=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,o);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(s=(i<3?n(s):i>3?n(t,r,s):n(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s};let v=class IoColorBase extends r{ready(){this.valueChanged(),this.changed()}valueMutated(){this.valueChanged(),this.changed()}rgbFromHsv(){const e=function(e){const t=e[0]/60,r=e[1]/100;let o=e[2]/100;const n=Math.floor(t)%6,i=t-Math.floor(t),s=255*o*(1-r),l=255*o*(1-r*i),a=255*o*(1-r*(1-i));switch(o*=255,n){case 0:return[o,a,s];case 1:return[l,o,s];case 2:return[s,o,a];case 3:return[s,l,o];case 4:return[a,s,o];default:return[o,s,l]}}([360*this.hsv[0],100*this.hsv[1],100*this.hsv[2]]);this.rgba[0]=e[0]/255,this.rgba[1]=e[1]/255,this.rgba[2]=e[2]/255}rgbFromHsl(){const e=function(e){const t=e[0]/360,r=e[1]/100,o=e[2]/100;let n,i,s;if(0===r)return s=255*o,[s,s,s];n=o<.5?o*(1+r):o+r-o*r;const l=2*o-n,a=[0,0,0];for(let e=0;e<3;e++)i=t+1/3*-(e-1),i<0&&i++,i>1&&i--,s=6*i<1?l+6*(n-l)*i:2*i<1?n:3*i<2?l+(n-l)*(2/3-i)*6:l,a[e]=255*s;return a}([360*this.hsl[0],100*this.hsl[1],100*this.hsl[2]]);this.rgba[0]=e[0]/255,this.rgba[1]=e[1]/255,this.rgba[2]=e[2]/255}valueFromRgb(){this.value.r=this.rgba[0],this.value.g=this.rgba[1],this.value.b=this.rgba[2]}valueChanged(){const e=[255*this.value.r,255*this.value.g,255*this.value.b],t=function(e){let t,r,o,n,i=0;const s=e[0]/255,l=e[1]/255,a=e[2]/255,u=Math.max(s,l,a),c=u-Math.min(s,l,a),diffc=function(e){return(u-e)/6/c+.5};return 0===c?(i=0,n=0):(n=c/u,t=diffc(s),r=diffc(l),o=diffc(a),s===u?i=o-r:l===u?i=1/3+t-o:a===u&&(i=2/3+r-t),i<0?i+=1:i>1&&(i-=1)),[360*i,100*n,100*u]}(e),r=function(e){const t=e[0]/255,r=e[1]/255,o=e[2]/255,n=Math.min(t,r,o),i=Math.max(t,r,o),s=i-n;let l,a=0;i===n?a=0:t===i?a=(r-o)/s:r===i?a=2+(o-t)/s:o===i&&(a=4+(t-r)/s),a=Math.min(60*a,360),a<0&&(a+=360);const u=(n+i)/2;return l=i===n?0:u<=.5?s/(i+n):s/(2-i-n),[a,100*l,100*u]}(e);0!==t[0]&&360!==t[0]||(t[0]=360*this.hsv[0]),0!==r[0]&&360!==r[0]||(r[0]=360*this.hsl[0]),0===t[1]&&(t[0]=360*this.hsv[0]),0===r[1]&&(r[0]=360*this.hsl[0]),0===t[2]&&(t[1]=100*this.hsv[1]),0!==r[2]&&100!==r[2]||(r[0]=360*this.hsl[0],r[1]=100*this.hsl[1]),this.rgba[0]=e[0]/255,this.rgba[1]=e[1]/255,this.rgba[2]=e[2]/255,this.rgba[3]=this.value.a??1,this.hsv[0]=t[0]/360,this.hsv[1]=t[1]/100,this.hsv[2]=t[2]/100,this.hsl[0]=r[0]/360,this.hsl[1]=r[1]/100,this.hsl[2]=r[2]/100,this.setProperties({rgba:this.rgba,hsv:this.hsv,hsl:this.hsl})}};__decorate$5([e("throttled")],v.prototype,"reactivity",void 0),__decorate$5([e({type:Object,init:{r:1,g:1,b:1,a:1}})],v.prototype,"value",void 0),__decorate$5([e({type:Array,init:[1,1,1,1]})],v.prototype,"rgba",void 0),__decorate$5([e({type:Array,init:[1,1,1]})],v.prototype,"hsv",void 0),__decorate$5([e({type:Array,init:[1,1,1]})],v.prototype,"hsl",void 0),v=__decorate$5([t],v);var __decorate$4=function(e,t,r,o){var n,i=arguments.length,s=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,o);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(s=(i<3?n(s):i>3?n(t,r,s):n(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s};let h=class IoColorSlider extends v{static get Style(){return"\n      :host {\n        display: flex;\n      }\n    "}_onValueInput(e){const t=e.detail.value,r=JSON.stringify(this.value);switch(this.channel){case"r":this.value.r=t;break;case"g":this.value.g=t;break;case"b":this.value.b=t;break;case"a":this.value.a=t;break;case"h":this.hsv[0]=t,this.rgbFromHsv(),this.valueFromRgb();break;case"s":this.hsv[1]=t,this.rgbFromHsv(),this.valueFromRgb();break;case"v":this.hsv[2]=t,this.rgbFromHsv(),this.valueFromRgb();break;case"l":this.hsl[2]=t,this.rgbFromHsl(),this.valueFromRgb();break;case"hs":this.hsv[0]=t[0],this.hsv[1]=t[1],this.rgbFromHsv(),this.valueFromRgb();break;case"sv":this.hsv[1]=t[0],this.hsv[2]=t[1],this.rgbFromHsv(),this.valueFromRgb();break;case"sl":this.hsl[1]=t[0],this.hsl[2]=t[1],this.rgbFromHsl(),this.valueFromRgb()}r!==JSON.stringify(this.value)&&(this.value._isNode||this.dispatchMutation(this.value),this.dispatch("value-input",{property:"value",value:this.value},!1))}changed(){const e=this.channel;let t=null;switch(e){case"r":t=ioColorSliderR();break;case"g":t=ioColorSliderG();break;case"b":t=ioColorSliderB();break;case"a":t=ioColorSliderA();break;case"h":t=ioColorSliderH();break;case"s":t=ioColorSliderS();break;case"v":t=ioColorSliderV();break;case"l":t=ioColorSliderL();break;case"hs":t=ioColorSliderHs();break;case"sv":t=ioColorSliderSv();break;case"sl":t=ioColorSliderSl()}let r=0,o=[0,0,0,0],n=0,i=1,s=this.step;switch(this.channel){case"r":r=this.value.r,o=[...this.rgba];break;case"g":r=this.value.g,o=[...this.rgba];break;case"b":r=this.value.b,o=[...this.rgba];break;case"a":r=this.value.a||0,o=[...this.rgba];break;case"h":r=this.hsv[0],o=[...this.hsv,1];break;case"s":r=this.hsv[1],o=[...this.hsv,1];break;case"v":r=this.hsv[2],o=[...this.hsv,1];break;case"l":r=this.hsl[2],o=[...this.hsl,1];break;case"hs":r=[this.hsv[0],this.hsv[1]],o=[...this.hsv,1],n=[n,n],i=[i,i],s=[s,s];break;case"sv":r=[this.hsv[1],this.hsv[2]],o=[...this.hsv,1],n=[n,n],i=[i,i],s=[s,s];break;case"sl":r=[this.hsl[1],this.hsl[2]],o=[...this.hsl,1],n=[n,n],i=[i,i],s=[s,s]}t.props={id:e,value:r,min:n,max:i,step:s,vertical:this.vertical,color:o,"@value-input":this._onValueInput},this.render([t])}};__decorate$4([e({type:Array,init:[0,0,0,0]})],h.prototype,"color",void 0),__decorate$4([e({type:Number,value:.01})],h.prototype,"step",void 0),__decorate$4([e("a")],h.prototype,"channel",void 0),__decorate$4([e({value:!1,reflect:!0})],h.prototype,"vertical",void 0),h=__decorate$4([t],h);const ioColorSlider=function(e){return h.vConstructor(e)};class IoColorSliderBase extends a{static get GlUtils(){return`\n      // Note: Implement in subclass!\n      // TODO: Allow GlUtils to rewrite inherited functions!\n      // vec3 getStartColor(vec2 uv) {}\n      // vec3 getEndColor(vec2 uv) {}\n      ${o.hue2rgb}\n      ${o.hsv2rgb}\n      ${o.hsl2rgb}\n\n      vec3 paintHorizontalLine(vec3 dstCol, vec2 p, vec3 color) {\n        float lineShape = lineHorizontal(p, io_borderWidth * 2.0);\n        return compose(dstCol, vec4(color, lineShape));\n      }\n    `}static get Frag(){return"\n    varying vec2 vUv;\n\n    void main(void) {\n      // Dimensions\n      vec2 size = uVertical == 1 ? uSize.yx : uSize;\n      vec2 uv = uVertical == 1 ? vUv.yx : vUv;\n      vec2 position = size * vec2(uv.x, uv.y - 0.5);\n      float valueInRange = (uValue - uMin) / (uMax - uMin);\n\n      // Colors\n      vec3 finalCol = io_bgColorInput.rgb;\n      vec3 startCol = getStartColor(uv);\n      vec3 gridCol = io_bgColorLight.rgb;\n      vec3 endCol = getEndColor(uv);\n      vec3 sliderCol = mix(startCol, endCol, uv.x);\n\n      vec2 linePos = translate(size * uv, 0.0, size.y / 2.);\n      finalCol = paintHorizontalLine(finalCol, linePos, sliderCol);\n\n      // Grid\n      float gridSize = size.x / abs((uMax - uMin) / uStep);\n      float gridOffset = mod(uStep - uMin, uStep) / (uMax - uMin) * size.x;\n      float gridShape = paintDerivativeGrid2D(translate(position, gridOffset, 0.0), vec2(gridSize, 0.0), io_borderWidth);\n      if (size.x * uStep < 4.0) gridShape = 0.0;\n      finalCol = compose(finalCol, vec4(sliderCol, gridShape * 0.25));\n\n      // Slider\n      float sliderShape = rectangle(position, vec2(size.x * valueInRange, size.y));\n      finalCol = compose(finalCol, vec4(sliderCol, sliderShape));\n      finalCol = compose(finalCol, vec4(io_bgColorInput.rgb, gridShape * sliderShape * 0.125));\n\n      gl_FragColor = vec4(finalCol, 1.0);\n    }"}valueMutated(){}}__decorate$4([e({type:Array,init:[0,0,0,0]})],IoColorSliderBase.prototype,"color",void 0);class IoColorSlider2dBase extends u{static get GlUtils(){return`\n      // Note: Implement in subclass!\n      // TODO: Allow GlUtils to rewrite inherited functions!\n      // vec3 getColor(vec2 uv) {}\n      ${o.hue2rgb}\n      ${o.hsv2rgb}\n      ${o.hsl2rgb}\n    `}static get Frag(){return"\n    varying vec2 vUv;\n\n    void main(void) {\n      // Dimensions\n      vec2 size = uVertical == 1 ? uSize.yx : uSize;\n      vec2 uv = uVertical == 1 ? vUv.yx : vUv;\n      vec2 position = size * (uv - vec2(0.5));\n\n      // Colors\n      vec3 finalCol = color_field(uv);\n      vec3 gridCol = io_bgColorLight.rgb;\n      vec3 sliderCol = color_field(uValue);\n\n      // Grid\n      vec2 gridSize = size / abs((uMax - uMin) / uStep);\n      vec2 gridOffset = (uMax + uMin) / (uMax - uMin) * size / 2.;\n      vec2 gridPosition = translate(position, -gridOffset);\n      float gridShape = paintDerivativeGrid2D(gridPosition, gridSize, io_borderWidth);\n      if (min(size.x * uStep.x, size.y * uStep.y) < 2.0) gridShape = 0.0;\n      finalCol = compose(finalCol, vec4(gridCol, gridShape * 0.5));\n\n      vec2 knobPos = uValue / (uMax - uMin) * size;\n      finalCol = paintKnob(finalCol, gridPosition, knobPos, sliderCol);\n\n      gl_FragColor = vec4(finalCol, 1.0);\n    }"}valueMutated(){}}__decorate$4([e({type:Array,init:[0,0,0,0]})],IoColorSlider2dBase.prototype,"color",void 0);let d=class IoColorSliderR extends IoColorSliderBase{static get GlUtils(){return"\n      vec3 getStartColor(vec2 uv) {\n        return vec3(uv.x, uColor[1], uColor[2]);\n      }\n      vec3 getEndColor(vec2 uv) {\n        return vec3(uv.x, uColor[1], uColor[2]);\n      }\n    "}};d=__decorate$4([t],d);const ioColorSliderR=function(e){return d.vConstructor(e)};let g=class IoColorSliderG extends IoColorSliderBase{static get GlUtils(){return"\n      vec3 getStartColor(vec2 uv) {\n        return vec3(uColor[0], uv.x, uColor[2]);\n      }\n      vec3 getEndColor(vec2 uv) {\n        return vec3(uColor[0], uv.x, uColor[2]);\n      }\n    "}};g=__decorate$4([t],g);const ioColorSliderG=function(e){return g.vConstructor(e)};let p=class IoColorSliderB extends IoColorSliderBase{static get GlUtils(){return"\n      vec3 getStartColor(vec2 uv) {\n        return vec3(uColor[0], uColor[1], uv.x);\n      }\n      vec3 getEndColor(vec2 uv) {\n        return vec3(uColor[0], uColor[1], uv.x);\n      }\n    "}};p=__decorate$4([t],p);const ioColorSliderB=function(e){return p.vConstructor(e)};let b=class IoColorSliderA extends IoColorSliderBase{static get GlUtils(){return"\n      vec3 getStartColor(vec2 uv) {\n        vec2 size = uVertical == 1 ? uSize.yx : uSize;\n        vec2 position = size * (uv - vec2(0.0, 0.5));\n        return mix(vec3(0.5), vec3(1.0), checkerX(position, io_fieldHeight / 4.0));\n      }\n      vec3 getEndColor(vec2 uv) {\n        vec2 size = uVertical == 1 ? uSize.yx : uSize;\n        vec2 position = size * (uv - vec2(0.0, 0.5));\n        vec3 chkCol = mix(vec3(0.5), vec3(1.0), checkerX(position, io_fieldHeight / 4.0));\n        return mix(chkCol, uColor.rgb, 1.0);\n      }\n    "}};b=__decorate$4([t],b);const ioColorSliderA=function(e){return b.vConstructor(e)};let f=class IoColorSliderH extends IoColorSliderBase{static get GlUtils(){return"\n      vec3 getStartColor(vec2 uv) {\n        return hsv2rgb(vec3(uv.x, uColor[1], uColor[2]));\n      }\n      vec3 getEndColor(vec2 uv) {\n        return hsv2rgb(vec3(uv.x, uColor[1], uColor[2]));\n      }\n    "}};f=__decorate$4([t],f);const ioColorSliderH=function(e){return f.vConstructor(e)};let C=class IoColorSliderS extends IoColorSliderBase{static get GlUtils(){return"\n      vec3 getStartColor(vec2 uv) {\n        return hsv2rgb(vec3(uColor[0], uv.x, uColor[2]));\n      }\n      vec3 getEndColor(vec2 uv) {\n        return hsv2rgb(vec3(uColor[0], uv.x, uColor[2]));\n      }\n    "}};C=__decorate$4([t],C);const ioColorSliderS=function(e){return C.vConstructor(e)};let y=class IoColorSliderV extends IoColorSliderBase{static get GlUtils(){return"\n      vec3 getStartColor(vec2 uv) {\n        return hsv2rgb(vec3(uColor[0], uColor[1], uv.x));\n      }\n      vec3 getEndColor(vec2 uv) {\n        return hsv2rgb(vec3(uColor[0], uColor[1], uv.x));\n      }\n    "}};y=__decorate$4([t],y);const ioColorSliderV=function(e){return y.vConstructor(e)};let x=class IoColorSliderL extends IoColorSliderBase{static get GlUtils(){return"\n      vec3 getStartColor(vec2 uv) {\n        return hsl2rgb(vec3(uColor[0], uColor[1], uv.x));\n      }\n      vec3 getEndColor(vec2 uv) {\n        return hsl2rgb(vec3(uColor[0], uColor[1], uv.x));\n      }\n    "}};x=__decorate$4([t],x);const ioColorSliderL=function(e){return x.vConstructor(e)};let m=class IoColorSliderHs extends IoColorSlider2dBase{static get GlUtils(){return"\n      vec3 color_field(vec2 uv) {\n        return hsv2rgb(vec3(uv, uColor[2]));\n      }\n    "}};m=__decorate$4([t],m);const ioColorSliderHs=function(e){return m.vConstructor(e)};let S=class IoColorSliderSv extends IoColorSlider2dBase{static get GlUtils(){return"\n      vec3 color_field(vec2 uv) {\n        return hsv2rgb(vec3(uColor[0], uv));\n      }\n    "}};S=__decorate$4([t],S);const ioColorSliderSv=function(e){return S.vConstructor(e)};let k=class IoColorSliderSl extends IoColorSlider2dBase{static get GlUtils(){return"\n      vec3 color_field(vec2 uv) {\n        return hsl2rgb(vec3(uColor[0], uv));\n      }\n    "}};k=__decorate$4([t],k);const ioColorSliderSl=function(e){return k.vConstructor(e)};var __decorate$3=function(e,t,r,o){var n,i=arguments.length,s=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,o);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(s=(i<3?n(s):i>3?n(t,r,s):n(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s};let I=class IoColorPanel extends v{static get Style(){return"\n    :host {\n      display: flex;\n      flex-direction: row;\n      border: var(--io_border);\n      border-color: var(--io_borderColorOutset);\n      background-color: var(--io_bgColorLight);\n      padding: var(--io_spacing2);\n      border-radius: calc(var(--io_borderRadius) + var(--io_spacing2));\n    }\n    :host:not([expanded]) {\n      display: none;\n    }\n    :host > *:not(:last-child) {\n      margin: 0 var(--io_spacing2) 0 0;\n    }\n    "}static get Listeners(){return{keydown:"onKeydown","io-focus-to":"onIoFocusTo"}}onKeydown(e){"Escape"!==e.key&&"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),this.expanded=!1)}onIoFocusTo(e){const t=e.detail.source,r=e.detail.command,o=Array.from(this.querySelectorAll("[tabindex]")),n=Array.from(o).indexOf(t);"ArrowDown"===r||"ArrowLeft"===r&&0===n?(o[o.length-1].focus(),e.stopPropagation()):("ArrowUp"===r||"ArrowRight"===r&&n===o.length-1)&&(o[0].focus(),e.stopPropagation())}onValueInput(){this.dispatch("value-input",{property:"value",value:this.value},!0)}changed(){this.render([ioColorSlider({value:this.value,channel:"sv","@value-input":this.onValueInput}),ioColorSlider({value:this.value,channel:"h",vertical:!0,"@value-input":this.onValueInput}),void 0!==this.value.a?ioColorSlider({value:this.value,channel:"a","@value-input":this.onValueInput,vertical:!0}):null])}};__decorate$3([e({value:!1,reflect:!0})],I.prototype,"expanded",void 0),I=__decorate$3([t],I);const _=new I;setTimeout((()=>{n.appendChild(_)}),100);var __decorate$2=function(e,t,r,o){var n,i=arguments.length,s=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,o);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(s=(i<3?n(s):i>3?n(t,r,s):n(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s};let w=class IoColorSwatch extends v{static get Style(){return"\n      :host {\n        display: inline-block;\n        min-width: var(--io_fieldHeight);\n        height: var(--io_fieldHeight);\n        background-color: white;\n        background-image: linear-gradient(45deg, #808080 25%, transparent 25%), linear-gradient(-45deg, #808080 25%, transparent 25%), linear-gradient(45deg, transparent 75%, #808080 75%), linear-gradient(-45deg, transparent 75%, #808080 75%);\n        background-size: 12px 12px;\n        background-position: 0 0, 0 6px, 6px -6px, -6px 0px;\n        overflow: visible;\n      }\n      :host > div { \n        width: 100%;\n        height: 100%;\n      }\n    "}valueChanged(){super.valueChanged(),this.render([i({style:{"background-color":`rgba(${255*this.rgba[0]},${255*this.rgba[1]}, ${255*this.rgba[2]}, ${this.rgba[3]})`}})])}};w=__decorate$2([t],w);const ioColorSwatch=function(e){return w.vConstructor(e)};var __decorate$1=function(e,t,r,o){var n,i=arguments.length,s=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,o);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(s=(i<3?n(s):i>3?n(t,r,s):n(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s};let z=class IoColorPicker extends r{static get Style(){return"\n      :host {\n        position: relative;\n        height: var(--io_fieldHeight);\n        border: var(--io_border);\n        border-color: var(--io_borderColorInset);\n        border-radius: var(--io_borderRadius);\n        overflow: hidden;\n      }\n      :host:focus {\n        @apply --io_focus;\n      }\n      :host > io-color-swatch {\n        width: 100%;\n        height: 100%;\n      }\n    "}static get Listeners(){return{click:"onClick",keydown:"onKeydown"}}get expanded(){return _.expanded&&_.value===this.value}ready(){this.valueChanged()}onClick(){this.expanded||this.expand()}onKeydown(e){switch(e.key){case"Enter":case" ":e.preventDefault(),this.expanded||this.expand();break;default:["ArrowLeft","ArrowRight","ArrowUp","ArrowDown","Home","End","PageUp","PageDown"].includes(e.key)&&(e.preventDefault(),this.dispatch("io-focus-to",{source:this,command:e.key},!0))}}onValueSet(){this.dispatch("value-input",{property:"value",value:this.value},!0)}onPanelCollapse(){this.expanded||(_.removeEventListener("value-input",this.onValueSet),_.removeEventListener("expanded-changed",this.onPanelCollapse))}expand(){_.value=this.value,_.expanded=!0,_.addEventListener("value-input",this.onValueSet),_.addEventListener("expanded-changed",this.onPanelCollapse),l(_,this,"right"),_.firstChild?.firstChild?.focus()}collapse(){_.expanded=!1,_.value={r:1,g:1,b:1,a:1}}valueChanged(){this.render([ioColorSwatch({value:this.value})])}};__decorate$1([e({value:{r:1,g:1,b:1,a:1}})],z.prototype,"value",void 0),__decorate$1([s(0)],z.prototype,"tabIndex",void 0),z=__decorate$1([t],z);const ioColorPicker=function(e){return z.vConstructor(e)};var __decorate=function(e,t,r,o){var n,i=arguments.length,s=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,o);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(s=(i<3?n(s):i>3?n(t,r,s):n(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s};let R=class IoColorRgba extends v{static get Style(){return"\n      :host {\n        display: flex;\n        flex: 0 1 auto;\n      }\n      :host > io-number {\n        flex: 1 0 0;\n      }\n      :host > io-number#r {\n        border-bottom-color: var(--io_bgColorRed);\n      }\n      :host > io-number#g {\n        border-bottom-color: var(--io_bgColorGreen);\n      }\n      :host > io-number#b {\n        border-bottom-color: var(--io_bgColorBlue);\n      }\n      :host > io-number#a {\n        border-bottom-color: var(--io_color);\n      }\n      :host > io-color-picker {\n        flex-shrink: 0;\n      }\n      :host > *:not(:last-child) {\n        margin-right: var(--io_spacing);\n      }\n    "}_onNumberValueInput(e){const t=e.composedPath()[0];["r","g","b"].includes(t.id)&&(this.value[t.id]=e.detail.value),this.dispatch("value-input",{property:"value",value:this.value},!1)}changed(){this.render([c({id:"r",value:this.value.r,min:0,max:1,step:.001,ladder:!0,"@value-input":this._onNumberValueInput}),c({id:"g",value:this.value.g,min:0,max:1,step:.001,ladder:!0,"@value-input":this._onNumberValueInput}),c({id:"b",value:this.value.b,min:0,max:1,step:.001,ladder:!0,"@value-input":this._onNumberValueInput}),void 0!==this.value.a?c({id:"a",value:this.value.a,min:0,max:1,step:1e-4,ladder:!0,"@value-input":this._onNumberValueInput}):null,ioColorPicker({id:"swatch",value:this.value,"@value-input":this._onNumberValueInput})])}};R=__decorate([t],R);const ioColorRgba=function(e){return R.vConstructor(e)};export{v as IoColorBase,_ as IoColorPanelSingleton,z as IoColorPicker,R as IoColorRgba,h as IoColorSlider,b as IoColorSliderA,p as IoColorSliderB,g as IoColorSliderG,f as IoColorSliderH,m as IoColorSliderHs,x as IoColorSliderL,d as IoColorSliderR,C as IoColorSliderS,k as IoColorSliderSl,S as IoColorSliderSv,y as IoColorSliderV,w as IoColorSwatch,ioColorPicker,ioColorRgba,ioColorSlider,ioColorSliderA,ioColorSliderB,ioColorSliderG,ioColorSliderH,ioColorSliderHs,ioColorSliderL,ioColorSliderR,ioColorSliderS,ioColorSliderSl,ioColorSliderSv,ioColorSliderV,ioColorSwatch};
