import{ReactiveProperty,Property,IoGl,Register,IoElement}from"@io-gui/core";import{ioNumber}from"@io-gui/inputs";var __defProp$5=Object.defineProperty,__decorateClass$5=(decorators,target,key,kind)=>{for(var decorator,result=void 0,i=decorators.length-1;i>=0;i--)(decorator=decorators[i])&&(result=decorator(target,key,result)||result);return result&&__defProp$5(target,key,result),result};const clamp$1=(num,min,max)=>max>min?Math.min(Math.max(num,min),max):Math.min(Math.max(num,max),min);class IoSliderBase extends IoGl{static get Style(){return"\n      :host {\n        display: flex;\n        cursor: ew-resize;\n        border: var(--io_border);\n        border-radius: var(--io_borderRadius);\n        border-color: var(--io_borderColorInset);\n        min-height: var(--io_fieldHeight);\n        min-width: var(--io_fieldHeight);\n        flex-grow: 1;\n      }\n      :host[vertical] {\n        cursor: ns-resize;\n        width: var(--io_fieldHeight);\n        min-height: calc(var(--io_fieldHeight) * 5);\n        flex-basis: var(--io_fieldHeight);\n        flex-grow: 0;\n      }\n      :host[invalid] {\n        color: var(--io_colorWhite);\n        background-color: var(--io_bgColorRed);\n        border-color: var(--io_colorRed);\n      }\n      :host:focus {\n        @apply --io_focus;\n      }\n    "}_startX=0;_startY=0;_rect=null;_active=-1;get _min(){return"number"==typeof this.min?[this.min,this.min]:this.min instanceof Array?[...this.min]:[-Infinity,-Infinity]}get _max(){return"number"==typeof this.max?[this.max,this.max]:this.max instanceof Array?[...this.max]:[Infinity,Infinity]}get _step(){return"number"==typeof this.step?[this.step,this.step]:this.step instanceof Array?[...this.step]:[.01,.01]}get _value(){return"number"==typeof this.value?[this.value,this.value]:this.value instanceof Array?[...this.value]:[NaN,NaN]}static get Listeners(){return{focus:"onFocus",contextmenu:"onContextmenu",pointerdown:"onPointerdown",touchstart:["onTouchstart",{passive:!1}]}}constructor(args={}){super(args)}onFocus(){this.addEventListener("blur",this.onBlur),this.addEventListener("keydown",this.onKeydown)}onBlur(){this.removeEventListener("blur",this.onBlur),this.removeEventListener("keydown",this.onKeydown)}onContextmenu(event){event.stopPropagation(),event.preventDefault()}onTouchstart(event){this._rect=this.getBoundingClientRect(),this.addEventListener("touchmove",this.onTouchmove,{passive:!1}),this.addEventListener("touchend",this.onTouchend),this._startX=event.changedTouches[0].clientX,this._startY=event.changedTouches[0].clientY,this._active=this.noscroll?1:-1}onTouchmove(event){const dx=Math.abs(this._startX-event.changedTouches[0].clientX),dy=Math.abs(this._startY-event.changedTouches[0].clientY);-1===this._active&&(this.vertical?dy>5&&dy>dx&&(this._active=dy>dx&&dx<5?1:0):dx>5&&dx>dy&&(this._active=dx>dy&&dy<5?1:0)),1===this._active&&event.cancelable&&(event.stopPropagation(),event.preventDefault())}onTouchend(){this.removeEventListener("touchmove",this.onTouchmove),this.removeEventListener("touchend",this.onTouchend)}onPointerdown(event){event.stopPropagation(),this._rect=this.getBoundingClientRect(),this.setPointerCapture(event.pointerId),this.addEventListener("pointermove",this.onPointermove),this.addEventListener("pointerup",this.onPointerup),this.addEventListener("pointercancel",this.onPointerup)}onPointermove(event){"touch"!==event.pointerType&&(this._active=1),this.throttle(this.onPointermoveThrottled,event)}onPointerup(event){this.releasePointerCapture(event.pointerId),this.removeEventListener("pointermove",this.onPointermove),this.removeEventListener("pointerup",this.onPointerup),this.removeEventListener("pointercancel",this.onPointerup),this._active=-1}_getPointerCoord(event){const rect=this._rect||this.getBoundingClientRect();let x=Math.max(0,Math.min(1,(event.clientX-rect.x)/rect.width)),y=Math.max(0,Math.min(1,1-(event.clientY-rect.y)/rect.height));return x=Math.pow(x,this.exponent),y=Math.pow(y,this.exponent),this.vertical?[y,x]:[x,y]}_getValueFromCoord(coord){const value=[0,0],min=this._min,max=this._max;return value[0]=min[0]*(1-coord[0])+max[0]*coord[0],value[1]=min[1]*(1-coord[1])+max[1]*coord[1],value}onPointermoveThrottled(event){if(1===this._active){document.activeElement!==this&&this.focus();const coord=this._getPointerCoord(event),value=this._getValueFromCoord(coord);this._inputValue(value)}}_inputValue(value){const min=this._min,max=this._max,step=this._step;if(value[0]=clamp$1(value[0],max[0],min[0]),value[1]=clamp$1(value[1],max[1],min[1]),value[0]=Math.round(value[0]/step[0])*step[0],value[1]=Math.round(value[1]/step[1])*step[1],value[0]=Number(value[0].toFixed(5)),value[1]=Number(value[1].toFixed(5)),"number"==typeof this.value){if(this.value===value[0])return;this.inputValue(value[0])}else if(this.value instanceof Array){const oldValue=JSON.stringify(this.value);if(this.value[0]=value[0],this.value[1]=value[1],oldValue===JSON.stringify(this.value))return;this.inputValue(this.value),this.dispatchMutation(this.value)}else if("object"==typeof this.value){const oldValue=JSON.stringify(this.value),$value=this.value;if($value.x=value[0],$value.y=value[1],oldValue===JSON.stringify(this.value))return;this.inputValue(this.value),this.dispatchMutation(this.value)}}inputValue(value){if(this.value!==value||"object"==typeof this.value){const oldValue=this.value;this.setProperty("value",value),this.dispatch("value-input",{value:value,oldValue:oldValue},!1)}}onKeydown(event){const oneDimension="number"==typeof this.value;if(event.shiftKey)switch(event.key){case"ArrowLeft":oneDimension?this._setDecrease():this._setLeft();break;case"ArrowUp":oneDimension?this._setIncrease():this._setUp();break;case"ArrowRight":oneDimension?this._setIncrease():this._setRight();break;case"ArrowDown":oneDimension?this._setDecrease():this._setDown()}else["ArrowLeft","ArrowRight","ArrowUp","ArrowDown","Tab","Home","End","PageUp","PageDown"].includes(event.key)&&(event.preventDefault(),this.dispatch("io-focus-to",{source:this,command:event.key},!0))}_setIncrease(){const value=this._value,step=this._step;value[0]=value[0]+step[0],value[1]=value[1]+step[1],this._inputValue(value)}_setDecrease(){const value=this._value,step=this._step;value[0]=value[0]-step[0],value[1]=value[1]-step[1],this._inputValue(value)}_setMin(){const min=this._min;this._inputValue(min)}_setMax(){const max=this._max;this._inputValue(max)}_setUp(){const value=this._value,step=this._step;value[0]=value[0]+step[0],this._inputValue(value)}_setDown(){const value=this._value,step=this._step;value[0]=value[0]-step[0],this._inputValue(value)}_setLeft(){const value=this._value,step=this._step;value[1]=value[1]-step[1],this._inputValue(value)}_setRight(){const value=this._value,step=this._step;value[1]=value[1]+step[1],this._inputValue(value)}ready(){this.changed()}valueChanged(){let invalid=!1;this.value instanceof Array?invalid=isNaN(this.value[0])||isNaN(this.value[1]):isNaN(this.value)&&(invalid=!0),this.invalid=invalid}invalidChanged(){this.invalid?this.setAttribute("aria-invalid","true"):this.removeAttribute("aria-invalid")}valueMutated(){this.changed(),this.dispatchMutation()}changed(){super.changed(),this.setAttribute("aria-valuemin",JSON.stringify(this.min)),this.setAttribute("aria-valuemax",JSON.stringify(this.max)),this.setAttribute("aria-valuestep",JSON.stringify(this.step));const value=this._value;"number"!=typeof value[0]||isNaN(value[0])?this.setAttribute("aria-invalid","true"):this.removeAttribute("aria-invalid"),this.setAttribute("aria-valuenow",JSON.stringify(this.value))}}__decorateClass$5([ReactiveProperty({type:Number,value:0})],IoSliderBase.prototype,"value"),__decorateClass$5([ReactiveProperty({type:Number,value:.01})],IoSliderBase.prototype,"step"),__decorateClass$5([ReactiveProperty({type:Number,value:0})],IoSliderBase.prototype,"min"),__decorateClass$5([ReactiveProperty({type:Number,value:1})],IoSliderBase.prototype,"max"),__decorateClass$5([ReactiveProperty({type:Number,value:1})],IoSliderBase.prototype,"exponent"),__decorateClass$5([ReactiveProperty({value:!1,reflect:!0})],IoSliderBase.prototype,"vertical"),__decorateClass$5([ReactiveProperty({value:!1,type:Boolean,reflect:!0})],IoSliderBase.prototype,"invalid"),__decorateClass$5([Property(!1)],IoSliderBase.prototype,"noscroll"),__decorateClass$5([Property("slider")],IoSliderBase.prototype,"role"),__decorateClass$5([Property(0)],IoSliderBase.prototype,"tabIndex");var __defProp$4=Object.defineProperty,__getOwnPropDesc$4=Object.getOwnPropertyDescriptor,__decorateClass$4=(decorators,target,key,kind)=>{for(var decorator,result=kind>1?void 0:kind?__getOwnPropDesc$4(target,key):target,i=decorators.length-1;i>=0;i--)(decorator=decorators[i])&&(result=(kind?decorator(target,key,result):decorator(result))||result);return kind&&result&&__defProp$4(target,key,result),result};let IoSliderRange=class extends IoSliderBase{_index=0;constructor(args={}){super(args)}_getCoordFromValue(value){const coord=[0,0],min=this._min,max=this._max;return coord[0]=(value[0]-min[0])/(max[0]-min[0]),coord[1]=(value[1]-min[1])/(max[1]-min[1]),coord}onPointerdown(event){super.onPointerdown(event);const value=this._value,p=this._getPointerCoord(event),c=this._getCoordFromValue(value);this._index=Math.abs(c[0]-p[0])<Math.abs(c[1]-p[0])?0:1}onPointermoveThrottled(event){if(1===this._active){document.activeElement!==this&&this.focus();const value=this._value,coord=this._getPointerCoord(event),newValue=this._getValueFromCoord(coord);0===this._index?this._inputValue([newValue[0],value[1]]):1===this._index&&this._inputValue([value[0],newValue[0]])}}static get Frag(){return"\n    varying vec2 vUv;\n\n    void main(void) {\n      // Dimensions\n      vec2 size = uVertical == 1 ? uSize.yx : uSize;\n      vec2 uv = uVertical == 1 ? vUv.yx : vUv;\n      vec2 position = size * vec2(uv.x, uv.y - 0.5);\n      vec2 expPosition = size * vec2(pow(uv.x, uExponent), uv.y - 0.5);\n\n      vec2 valueInRange = (uValue - vec2(uMin)) / (vec2(uMax) - vec2(uMin));\n\n      vec2 valueSign = sign(valueInRange);\n      vec2 expValueInRange = pow(abs(valueInRange), vec2(1./uExponent)) * valueSign;\n      float valueInRangeWidth = valueInRange[1] - valueInRange[0];\n      float valueInRangeCenter = (valueInRange[1] + valueInRange[0]) / 2.0;\n      float signRange = sign(valueInRangeWidth);\n\n      // Colors\n      vec3 finalCol = io_bgColorInput.rgb;\n      vec3 gridCol = io_bgColorLight.rgb;\n      vec3 sliderCol = signRange > 0.0 ? io_bgColorBlue.rgb : io_bgColorRed.rgb;\n      vec3 lineCol1 = io_color.rgb;\n      vec3 lineCol2 = io_bgColor.rgb;\n\n      // Grid\n      float gridSize = size.x / abs((uMax - uMin) / uStep);\n      float gridOffset = mod(uStep - uMin, uStep) / (uMax - uMin) * size.x;\n      float gridShape = paintDerivativeGrid2D(translate(expPosition, gridOffset, 0.0), vec2(gridSize, 0.0), io_borderWidth);\n      finalCol = compose(finalCol, vec4(gridCol, gridShape * 0.5));\n\n      // Slider\n      float sliderShape = rectangle(translate(expPosition, size.x * valueInRangeCenter, 0.0), vec2(size.x * abs(valueInRangeWidth) * 0.5, size.y));\n      finalCol = compose(finalCol, vec4(sliderCol, sliderShape));\n      finalCol = compose(finalCol, vec4(io_bgColorInput.rgb, gridShape * sliderShape * 0.125));\n\n      // Lines\n      float maxPos = expValueInRange[0];\n      float minPos = expValueInRange[1];\n\n      float lineMinShape1 = lineVertical(translate(position, maxPos * size.x, 0.0), io_borderWidth);\n      finalCol = compose(finalCol, vec4(lineCol1, lineMinShape1));\n      float lineMinShape2 = lineVertical(translate(position, maxPos * size.x + io_borderWidth * signRange, 0.0), io_borderWidth);\n      finalCol = compose(finalCol, vec4(lineCol2, lineMinShape2));\n      \n      float lineMaxShape1 = lineVertical(translate(position, minPos * size.x, 0.0), io_borderWidth);\n      finalCol = compose(finalCol, vec4(lineCol1, lineMaxShape1));\n      float lineMaxShape2 = lineVertical(translate(position, minPos * size.x - io_borderWidth * signRange, 0.0), io_borderWidth);\n      finalCol = compose(finalCol, vec4(lineCol2, lineMaxShape2));\n\n      gl_FragColor = vec4(finalCol, 1.0);\n    }\n    "}};__decorateClass$4([ReactiveProperty({type:Array,value:void 0,init:[0,0]})],IoSliderRange.prototype,"value",2),__decorateClass$4([ReactiveProperty({type:Number,value:.01})],IoSliderRange.prototype,"step",2),__decorateClass$4([ReactiveProperty({type:Number,value:0})],IoSliderRange.prototype,"min",2),__decorateClass$4([ReactiveProperty({type:Number,value:1})],IoSliderRange.prototype,"max",2),IoSliderRange=__decorateClass$4([Register],IoSliderRange);const ioSliderRange=function(arg0){return IoSliderRange.vConstructor(arg0)};var __defProp$3=Object.defineProperty,__getOwnPropDesc$3=Object.getOwnPropertyDescriptor,__decorateClass$3=(decorators,target,key,kind)=>{for(var decorator,result=kind>1?void 0:kind?__getOwnPropDesc$3(target,key):target,i=decorators.length-1;i>=0;i--)(decorator=decorators[i])&&(result=(kind?decorator(target,key,result):decorator(result))||result);return kind&&result&&__defProp$3(target,key,result),result};let IoNumberSliderRange=class extends IoElement{static get Style(){return"\n    :host {\n      display: flex;\n    }\n    :host > io-number {\n      flex: 0 0 3.5em;\n    }\n    :host > io-slider-range {\n      margin-left: var(--io_spacing);\n      margin-right: var(--io_spacing);\n      flex: 1 1 3.5em;\n      min-width: 3.5em;\n    }\n    "}constructor(args={}){super(args)}_onNumberSet(event){const item=event.composedPath()[0];item===this.$.number0&&(this.value[0]=event.detail.value),item===this.$.number1&&(this.value[1]=event.detail.value),this.value._isNode||this.dispatchMutation(this.value)}_onSliderSet(event){this.value=event.detail.value,this.value._isNode||this.dispatchMutation(this.value)}ready(){this.changed()}changed(){this.render([ioNumber({id:"number0",value:this.value[0],step:this.step,min:this.min,max:this.max,conversion:this.conversion,"@value-input":this._onNumberSet}),ioSliderRange({id:"slider",value:this.value,step:this.step,min:this.min,max:this.max,exponent:this.exponent,"@value-input":this._onSliderSet}),ioNumber({id:"number1",value:this.value[1],step:this.step,min:this.min,max:this.max,conversion:this.conversion,"@value-input":this._onNumberSet})])}};__decorateClass$3([ReactiveProperty({type:Array,init:[0,0]})],IoNumberSliderRange.prototype,"value",2),__decorateClass$3([ReactiveProperty(.01)],IoNumberSliderRange.prototype,"step",2),__decorateClass$3([ReactiveProperty(0)],IoNumberSliderRange.prototype,"min",2),__decorateClass$3([ReactiveProperty(1)],IoNumberSliderRange.prototype,"max",2),__decorateClass$3([ReactiveProperty(1)],IoNumberSliderRange.prototype,"exponent",2),__decorateClass$3([ReactiveProperty(1)],IoNumberSliderRange.prototype,"conversion",2),IoNumberSliderRange=__decorateClass$3([Register],IoNumberSliderRange);const ioNumberSliderRange=function(arg0){return IoNumberSliderRange.vConstructor(arg0)};var _startX,_startY,_active,_rect,__defProp$2=Object.defineProperty,__getOwnPropDesc$2=Object.getOwnPropertyDescriptor,__typeError=msg=>{throw TypeError(msg)},__decorateClass$2=(decorators,target,key,kind)=>{for(var decorator,result=kind>1?void 0:kind?__getOwnPropDesc$2(target,key):target,i=decorators.length-1;i>=0;i--)(decorator=decorators[i])&&(result=(kind?decorator(target,key,result):decorator(result))||result);return kind&&result&&__defProp$2(target,key,result),result},__accessCheck=(obj,member,msg)=>member.has(obj)||__typeError("Cannot "+msg),__privateGet=(obj,member,getter)=>(__accessCheck(obj,member,"read from private field"),member.get(obj)),__privateAdd=(obj,member,value)=>member.has(obj)?__typeError("Cannot add the same private member more than once"):member instanceof WeakSet?member.add(obj):member.set(obj,value),__privateSet=(obj,member,value,setter)=>(__accessCheck(obj,member,"write to private field"),member.set(obj,value),value);let IoSlider=class extends IoGl{constructor(args={}){super(args),__privateAdd(this,_startX,0),__privateAdd(this,_startY,0),__privateAdd(this,_active,-1),__privateAdd(this,_rect,null)}static get Style(){return"\n      :host {\n        display: flex;\n        cursor: ew-resize;\n        border: var(--io_border);\n        border-radius: var(--io_borderRadius);\n        border-color: var(--io_borderColorInset);\n        min-height: var(--io_fieldHeight);\n        min-width: var(--io_fieldHeight);\n        flex-grow: 1;\n      }\n      :host[vertical] {\n        cursor: ns-resize;\n        width: var(--io_fieldHeight);\n        min-height: calc(var(--io_fieldHeight) * 5);\n        flex-basis: var(--io_fieldHeight);\n        flex-grow: 0;\n      }\n      :host[invalid] {\n        border-color: var(--io_colorRed);\n      }\n      :host[disabled] {\n        opacity: 0.5;\n      }\n      :host:focus {\n        @apply --io_focus;\n      }\n    "}static get Frag(){return"\n    varying vec2 vUv;\n\n    void main(void) {\n      // Dimensions\n      vec2 size = uVertical == 1 ? uSize.yx : uSize;\n      vec2 uv = uVertical == 1 ? vUv.yx : vUv;\n      vec2 position = size * vec2(uv.x, uv.y - 0.5);\n      vec2 expPosition = size * vec2(pow(uv.x, uExponent), uv.y - 0.5);\n      float valueInRange = (uValue - uMin) / (uMax - uMin);\n      if (uInvalid == 1) valueInRange = 0.0;\n      float valueSign = sign(valueInRange);\n      float expValueInRange = pow(abs(valueInRange), 1./uExponent) * valueSign;\n\n      // Colors\n      vec3 finalCol = io_bgColorInput.rgb;\n      vec3 gridCol = io_bgColorLight.rgb;\n      vec3 sliderCol = io_bgColorBlue.rgb;\n      vec3 lineCol1 = io_color.rgb;\n      vec3 lineCol2 = io_bgColor.rgb;\n\n      // Grid\n      float gridSize = size.x / abs((uMax - uMin) / uStep);\n      float gridOffset = mod(uStep - uMin, uStep) / (uMax - uMin) * size.x;\n      float gridShape = paintDerivativeGrid2D(translate(expPosition, gridOffset, 0.0), vec2(gridSize, 0.0), io_borderWidth);\n      finalCol = compose(finalCol, vec4(gridCol, gridShape * 0.5));\n\n      // Slider\n      float sliderShape = rectangle(expPosition, vec2(size.x * valueInRange, size.y));\n      finalCol = compose(finalCol, vec4(sliderCol, sliderShape));\n      finalCol = compose(finalCol, vec4(io_bgColorInput.rgb, gridShape * sliderShape * 0.125));\n\n      // Lines\n      float lineShape1 = lineVertical(translate(position, expValueInRange * size.x, 0.0), io_borderWidth);\n      finalCol = compose(finalCol, vec4(lineCol1, lineShape1));\n      float lineShape2 = lineVertical(translate(position, expValueInRange * size.x - io_borderWidth, 0.0), io_borderWidth);\n      finalCol = compose(finalCol, vec4(lineCol2, lineShape2));\n\n      gl_FragColor = vec4(finalCol, 1.0);\n    }"}static get Listeners(){return{focus:"onFocus",contextmenu:"onContextmenu",pointerdown:"onPointerdown",touchstart:["onTouchstart",{passive:!1}]}}onFocus(){this.addEventListener("blur",this.onBlur),this.addEventListener("keydown",this.onKeydown)}onBlur(){this.removeEventListener("blur",this.onBlur),this.removeEventListener("keydown",this.onKeydown)}onContextmenu(event){event.preventDefault()}onTouchstart(event){__privateSet(this,_rect,this.getBoundingClientRect()),this.addEventListener("touchmove",this.onTouchmove,{passive:!1}),this.addEventListener("touchend",this.onTouchend),__privateSet(this,_startX,event.changedTouches[0].clientX),__privateSet(this,_startY,event.changedTouches[0].clientY),__privateSet(this,_active,this.noscroll?1:-1)}onTouchmove(event){const dx=Math.abs(__privateGet(this,_startX)-event.changedTouches[0].clientX),dy=Math.abs(__privateGet(this,_startY)-event.changedTouches[0].clientY);-1===__privateGet(this,_active)&&(this.vertical?dy>5&&dy>dx&&__privateSet(this,_active,dy>dx&&dx<5?1:0):dx>5&&dx>dy&&__privateSet(this,_active,dx>dy&&dy<5?1:0)),1===__privateGet(this,_active)&&event.cancelable&&event.preventDefault()}onTouchend(){this.removeEventListener("touchmove",this.onTouchmove),this.removeEventListener("touchend",this.onTouchend)}onPointerdown(event){event.stopPropagation(),__privateSet(this,_rect,this.getBoundingClientRect()),this.setPointerCapture(event.pointerId),this.addEventListener("pointermove",this.onPointermove),this.addEventListener("pointerup",this.onPointerup),this.addEventListener("pointercancel",this.onPointerup)}onPointermove(event){"touch"!==event.pointerType&&__privateSet(this,_active,1),this.throttle(this.onPointermoveThrottled,event)}onPointerup(event){this.releasePointerCapture(event.pointerId),this.removeEventListener("pointermove",this.onPointermove),this.removeEventListener("pointerup",this.onPointerup),this.removeEventListener("pointercancel",this.onPointerup),__privateSet(this,_active,-1)}_getPointerCoord(event){const rect=__privateGet(this,_rect)||this.getBoundingClientRect(),x=Math.max(0,Math.min(1,(event.clientX-rect.x)/rect.width)),y=Math.max(0,Math.min(1,1-(event.clientY-rect.y)/rect.height));return Math.pow(this.vertical?y:x,this.exponent)}_getValueFromCoord(coord){return this.min*(1-coord)+this.max*coord}onPointermoveThrottled(event){if(1===__privateGet(this,_active)){document.activeElement!==this&&this.focus();const coord=this._getPointerCoord(event),value=this._getValueFromCoord(coord);this._inputValue(value)}}_incrementValue(value){this._inputValue(this.value+value)}_inputValue(value){var num,min,max;num=value,min=this.max,value=(max=this.min)>min?Math.min(Math.max(num,min),max):Math.min(Math.max(num,max),min),value=Math.round(value/this.step)*this.step,value=Number(value.toFixed(5)),isNaN(value)||this.value===value||this.inputValue(value)}inputValue(value){if(this.value!==value||"object"==typeof this.value){const oldValue=this.value;this.setProperty("value",value),this.dispatch("value-input",{value:value,oldValue:oldValue},!1)}}onKeydown(event){const invert=this.max<this.min;if(event.shiftKey)switch(event.key){case"ArrowLeft":case"ArrowDown":this._incrementValue(invert?this.step:-this.step);break;case"ArrowUp":case"ArrowRight":this._incrementValue(invert?-this.step:this.step);break;case"Home":event.preventDefault(),this._inputValue(this.min);break;case"End":event.preventDefault(),this._inputValue(this.max);break;case"PageUp":event.preventDefault(),this._incrementValue(invert?-this.step:this.step);break;case"PageDown":event.preventDefault(),this._incrementValue(invert?this.step:-this.step)}else["ArrowLeft","ArrowRight","ArrowUp","ArrowDown","Tab","Home","End","PageUp","PageDown"].includes(event.key)&&(event.preventDefault(),this.dispatch("io-focus-to",{source:this,command:event.key},!0))}ready(){this.valueChanged(),this.minChanged(),this.maxChanged(),this.changed()}invalidChanged(){this.ariaInvalid=String(this.invalid)}disabledChanged(){this.inert=this.disabled,this.ariaDisabled=String(this.disabled)}valueChanged(){this.invalid=isNaN(this.value),this.ariaValueNow=String(this.value)}minChanged(){this.ariaValueMin=String(this.min)}maxChanged(){this.ariaValueMax=String(this.max)}};_startX=new WeakMap,_startY=new WeakMap,_active=new WeakMap,_rect=new WeakMap,__decorateClass$2([ReactiveProperty(0)],IoSlider.prototype,"value",2),__decorateClass$2([ReactiveProperty(.01)],IoSlider.prototype,"step",2),__decorateClass$2([ReactiveProperty(0)],IoSlider.prototype,"min",2),__decorateClass$2([ReactiveProperty(1)],IoSlider.prototype,"max",2),__decorateClass$2([ReactiveProperty(1)],IoSlider.prototype,"exponent",2),__decorateClass$2([ReactiveProperty({value:!1,reflect:!0})],IoSlider.prototype,"vertical",2),__decorateClass$2([ReactiveProperty({value:!1,type:Boolean,reflect:!0})],IoSlider.prototype,"invalid",2),__decorateClass$2([ReactiveProperty({value:!1,type:Boolean,reflect:!0})],IoSlider.prototype,"disabled",2),__decorateClass$2([Property(!1)],IoSlider.prototype,"noscroll",2),__decorateClass$2([Property("slider")],IoSlider.prototype,"role",2),__decorateClass$2([Property(0)],IoSlider.prototype,"tabIndex",2),IoSlider=__decorateClass$2([Register],IoSlider);const ioSlider=function(arg0){return IoSlider.vConstructor(arg0)};var __defProp$1=Object.defineProperty,__getOwnPropDesc$1=Object.getOwnPropertyDescriptor,__decorateClass$1=(decorators,target,key,kind)=>{for(var decorator,result=kind>1?void 0:kind?__getOwnPropDesc$1(target,key):target,i=decorators.length-1;i>=0;i--)(decorator=decorators[i])&&(result=(kind?decorator(target,key,result):decorator(result))||result);return kind&&result&&__defProp$1(target,key,result),result};let IoNumberSlider=class extends IoElement{static get Style(){return"\n    :host {\n      display: flex;\n    }\n    :host > io-number {\n      flex: 0 0 3.8em;\n      margin-right: var(--io_spacing);\n    }\n    :host > io-slider {\n      flex: 1 1 3em;\n      min-width: 3em;\n    }\n    "}constructor(args={}){super(args)}_onNumberSet(event){this.value=event.detail.value,this.dispatch("value-input",event.detail,!1)}_onSliderSet(event){event.detail.value=event.detail.value/this.conversion,this.value=event.detail.value,this.dispatch("value-input",event.detail,!1)}ready(){this.changed()}changed(){this.render([ioNumber({id:"number",value:this.value,step:this.step,min:this.min*this.conversion,max:this.max*this.conversion,conversion:this.conversion,"@value-input":this._onNumberSet}),ioSlider({id:"slider",value:this.value*this.conversion,step:this.step*this.conversion,min:this.min*this.conversion,max:this.max*this.conversion,exponent:this.exponent,"@value-input":this._onSliderSet})])}};__decorateClass$1([ReactiveProperty({value:0})],IoNumberSlider.prototype,"value",2),__decorateClass$1([ReactiveProperty(.01)],IoNumberSlider.prototype,"step",2),__decorateClass$1([ReactiveProperty(0)],IoNumberSlider.prototype,"min",2),__decorateClass$1([ReactiveProperty(1)],IoNumberSlider.prototype,"max",2),__decorateClass$1([ReactiveProperty(1)],IoNumberSlider.prototype,"exponent",2),__decorateClass$1([ReactiveProperty(1)],IoNumberSlider.prototype,"conversion",2),IoNumberSlider=__decorateClass$1([Register],IoNumberSlider);const ioNumberSlider=function(arg0){return IoNumberSlider.vConstructor(arg0)};var __defProp=Object.defineProperty,__getOwnPropDesc=Object.getOwnPropertyDescriptor,__decorateClass=(decorators,target,key,kind)=>{for(var decorator,result=kind>1?void 0:kind?__getOwnPropDesc(target,key):target,i=decorators.length-1;i>=0;i--)(decorator=decorators[i])&&(result=(kind?decorator(target,key,result):decorator(result))||result);return kind&&result&&__defProp(target,key,result),result};let IoSlider2d=class extends IoSliderBase{static get Style(){return"\n      :host {\n        cursor: crosshair;\n        border: var(--io_border);\n        border-radius: var(--io_borderRadius);\n        border-color: var(--io_borderColorInset);\n        flex-grow: 0;\n      }\n      :host:not([vertical]),\n      :host[vertical] {\n        min-width: calc(var(--io_fieldHeight) * 5);\n        min-height: calc(var(--io_fieldHeight) * 5);\n        cursor: crosshair;\n      }\n    "}constructor(args={}){super(args)}static get GlUtils(){return"\n      vec3 paintKnob(vec3 dstCol, vec2 p, vec2 center, vec3 color) {\n        vec4 finalCol = vec4(0.0);\n        vec2 pCenter = translate(p, center);\n        float radius = io_fieldHeight * 0.25;\n        float stroke = io_borderWidth;\n        float strokeShape = circle(pCenter, radius + stroke + stroke);\n        float fillShape   = circle(pCenter, radius + stroke);\n        float colorShape  = circle(pCenter, radius);\n        finalCol = mix(io_colorStrong, finalCol, strokeShape);\n        finalCol = mix(vec4(io_bgColor.rgb, 1.0), finalCol, fillShape);\n        finalCol = mix(vec4(color, 1.0), finalCol, colorShape);\n        return compose(dstCol, finalCol);\n      }\n    "}static get Frag(){return"\n    varying vec2 vUv;\n\n    void main(void) {\n      // Dimensions\n      vec2 size = uVertical == 1 ? uSize.yx : uSize;\n      vec2 uv = uVertical == 1 ? vUv.yx : vUv;\n      vec2 position = size * (uv - vec2(0.5));\n\n      // Colors\n      vec3 finalCol = io_bgColorInput.rgb;\n      vec3 gridCol = io_bgColorLight.rgb;\n      vec3 sliderCol = io_bgColorBlue.rgb;\n      vec3 lineCol1 = io_color.rgb;\n      vec3 lineCol2 = io_bgColor.rgb;\n\n      // Grid\n      vec2 gridSize = size / abs((uMax - uMin) / uStep);\n      vec2 gridOffset = (uMax + uMin) / (uMax - uMin) * size / 2.;\n      vec2 gridPosition = translate(position, -gridOffset);\n      float gridShape = paintDerivativeGrid2D(gridPosition, gridSize, io_borderWidth);\n      finalCol = compose(finalCol, vec4(gridCol, gridShape * 0.5));\n\n      // Axis\n      float axisShape = lineCross2d(gridPosition, io_borderWidth);\n      finalCol = compose(finalCol, vec4(gridCol, axisShape));\n\n      // Knob\n      vec2 knobPos = uValue / (uMax - uMin) * size;\n      finalCol = paintKnob(finalCol, gridPosition, knobPos, sliderCol);\n\n      gl_FragColor = vec4(finalCol, 1.0);\n    }"}};__decorateClass([ReactiveProperty({type:Array,value:void 0,init:[0,0]})],IoSlider2d.prototype,"value",2),__decorateClass([ReactiveProperty({type:Array,value:void 0,init:[.01,.01]})],IoSlider2d.prototype,"step",2),__decorateClass([ReactiveProperty({type:Array,value:void 0,init:[-1,-1]})],IoSlider2d.prototype,"min",2),__decorateClass([ReactiveProperty({type:Array,value:void 0,init:[1,1]})],IoSlider2d.prototype,"max",2),__decorateClass([Property(!0)],IoSlider2d.prototype,"noscroll",2),IoSlider2d=__decorateClass([Register],IoSlider2d);const ioSlider2d=function(arg0){return IoSlider2d.vConstructor(arg0)};export{IoNumberSlider,IoNumberSliderRange,IoSlider,IoSlider2d,IoSliderBase,IoSliderRange,ioNumberSlider,ioNumberSliderRange,ioSlider,ioSlider2d,ioSliderRange};
//# sourceMappingURL=index.js.map
