{"version":3,"file":"IoSlider.js","sourceRoot":"","sources":["../../src/elements/IoSlider.ts"],"names":[],"mappings":"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","sourcesContent":["import { Register, ReactiveProperty, IoGl, IoElementProps, Property, ListenerDefinition, WithBinding } from '@io-gui/core'\n\nconst clamp = (num: number, min: number, max: number) => {\n  return max > min ? Math.min(Math.max(num, min), max) : Math.min(Math.max(num, max), min)\n}\n\nexport type IoSliderProps = IoElementProps & {\n  value?: WithBinding<number>\n  step?: number\n  min?: number\n  max?: number\n  exponent?: number\n  vertical?: boolean\n  disabled?: boolean\n  noscroll?: boolean\n}\n\n/**\n * Input element for `Number` data type displayed as slider.\n * It can be configured to clamp the `value` to `min` / `max` and round it to the nearest `step` increment. `exponent` property can be changed for non-linear scale.\n **/\n@Register\nexport class IoSlider extends IoGl {\n  static get Style() {\n    return /* css */`\n      :host {\n        display: flex;\n        cursor: ew-resize;\n        border: var(--io_border);\n        border-radius: var(--io_borderRadius);\n        border-color: var(--io_borderColorInset);\n        min-height: var(--io_fieldHeight);\n        min-width: var(--io_fieldHeight);\n        flex-grow: 1;\n      }\n      :host[vertical] {\n        cursor: ns-resize;\n        width: var(--io_fieldHeight);\n        min-height: calc(var(--io_fieldHeight) * 5);\n        flex-basis: var(--io_fieldHeight);\n        flex-grow: 0;\n      }\n      :host[invalid] {\n        border-color: var(--io_colorRed);\n      }\n      :host[disabled] {\n        opacity: 0.5;\n      }\n      :host:focus {\n        @apply --io_focus;\n      }\n    `\n  }\n\n  @ReactiveProperty(0)\n  declare value: number\n\n  @ReactiveProperty(0.01)\n  declare step: number\n\n  @ReactiveProperty(0)\n  declare min: number\n\n  @ReactiveProperty(1)\n  declare max: number\n\n  @ReactiveProperty(1)\n  declare exponent: number\n\n  @ReactiveProperty({value: false, reflect: true})\n  declare vertical: boolean\n\n  @ReactiveProperty({value: false, type: Boolean, reflect: true})\n  declare invalid: boolean\n\n  @ReactiveProperty({value: false, type: Boolean, reflect: true})\n  declare disabled: boolean\n\n  @Property(false)\n  declare noscroll: boolean\n\n  @Property('slider')\n  declare role: string\n\n  @Property(0)\n  declare tabIndex: number\n\n  #startX = 0\n  #startY = 0\n  #active = -1\n  #rect: DOMRect | null = null\n\n  static get Frag() {\n    return /* glsl */`\n    varying vec2 vUv;\n\n    void main(void) {\n      // Dimensions\n      vec2 size = uVertical == 1 ? uSize.yx : uSize;\n      vec2 uv = uVertical == 1 ? vUv.yx : vUv;\n      vec2 position = size * vec2(uv.x, uv.y - 0.5);\n      vec2 expPosition = size * vec2(pow(uv.x, uExponent), uv.y - 0.5);\n      float valueInRange = (uValue - uMin) / (uMax - uMin);\n      if (uInvalid == 1) valueInRange = 0.0;\n      float valueSign = sign(valueInRange);\n      float expValueInRange = pow(abs(valueInRange), 1./uExponent) * valueSign;\n\n      // Colors\n      vec3 finalCol = io_bgColorInput.rgb;\n      vec3 gridCol = io_bgColorLight.rgb;\n      vec3 sliderCol = io_bgColorBlue.rgb;\n      vec3 lineCol1 = io_color.rgb;\n      vec3 lineCol2 = io_bgColor.rgb;\n\n      // Grid\n      float gridSize = size.x / abs((uMax - uMin) / uStep);\n      float gridOffset = mod(uStep - uMin, uStep) / (uMax - uMin) * size.x;\n      float gridShape = paintDerivativeGrid2D(translate(expPosition, gridOffset, 0.0), vec2(gridSize, 0.0), io_borderWidth);\n      finalCol = compose(finalCol, vec4(gridCol, gridShape * 0.5));\n\n      // Slider\n      float sliderShape = rectangle(expPosition, vec2(size.x * valueInRange, size.y));\n      finalCol = compose(finalCol, vec4(sliderCol, sliderShape));\n      finalCol = compose(finalCol, vec4(io_bgColorInput.rgb, gridShape * sliderShape * 0.125));\n\n      // Lines\n      float lineShape1 = lineVertical(translate(position, expValueInRange * size.x, 0.0), io_borderWidth);\n      finalCol = compose(finalCol, vec4(lineCol1, lineShape1));\n      float lineShape2 = lineVertical(translate(position, expValueInRange * size.x - io_borderWidth, 0.0), io_borderWidth);\n      finalCol = compose(finalCol, vec4(lineCol2, lineShape2));\n\n      gl_FragColor = vec4(finalCol, 1.0);\n    }`\n  }\n\n  static get Listeners() {\n    return {\n      'focus': 'onFocus',\n      'contextmenu': 'onContextmenu',\n      'pointerdown': 'onPointerdown',\n      'touchstart': ['onTouchstart', {passive: false}] as ListenerDefinition,\n    }\n  }\n\n  constructor(args: IoSliderProps = {}) { super(args) }\n\n  onFocus() {\n    this.addEventListener('blur', this.onBlur)\n    this.addEventListener('keydown', this.onKeydown)\n  }\n  onBlur() {\n    this.removeEventListener('blur', this.onBlur)\n    this.removeEventListener('keydown', this.onKeydown)\n  }\n  onContextmenu(event: Event) {\n    event.preventDefault()\n  }\n  onTouchstart(event: TouchEvent) {\n    this.#rect = this.getBoundingClientRect()\n    this.addEventListener('touchmove', this.onTouchmove, {passive: false})\n    this.addEventListener('touchend', this.onTouchend)\n    this.#startX = event.changedTouches[0].clientX\n    this.#startY = event.changedTouches[0].clientY\n    this.#active = this.noscroll ? 1 : -1\n  }\n  onTouchmove(event: TouchEvent) {\n    const dx = Math.abs(this.#startX - event.changedTouches[0].clientX)\n    const dy = Math.abs(this.#startY - event.changedTouches[0].clientY)\n    if (this.#active === -1) {\n      if (this.vertical) {\n        if (dy > 5 && dy > dx) {\n          this.#active = (dy > dx && dx < 5) ? 1 : 0\n        }\n      } else {\n        if (dx > 5 && dx > dy) {\n          this.#active = (dx > dy && dy < 5) ? 1 : 0\n        }\n      }\n    }\n    if (this.#active === 1 && event.cancelable) {\n      event.preventDefault()\n    }\n  }\n  onTouchend() {\n    this.removeEventListener('touchmove', this.onTouchmove)\n    this.removeEventListener('touchend', this.onTouchend)\n  }\n  onPointerdown(event: PointerEvent) {\n    event.stopPropagation()\n    this.#rect = this.getBoundingClientRect()\n    this.setPointerCapture(event.pointerId)\n    this.addEventListener('pointermove', this.onPointermove)\n    this.addEventListener('pointerup', this.onPointerup)\n    this.addEventListener('pointercancel', this.onPointerup)\n  }\n  onPointermove(event: PointerEvent) {\n    if (event.pointerType !== 'touch') this.#active = 1\n    this.throttle(this.onPointermoveThrottled, event)\n  }\n  onPointerup(event: PointerEvent) {\n    this.releasePointerCapture(event.pointerId)\n    this.removeEventListener('pointermove', this.onPointermove)\n    this.removeEventListener('pointerup', this.onPointerup)\n    this.removeEventListener('pointercancel', this.onPointerup)\n    this.#active = -1\n  }\n  _getPointerCoord(event: PointerEvent): number {\n    const rect = this.#rect || this.getBoundingClientRect()\n    let x = Math.max(0, Math.min(1, (event.clientX - rect.x) / rect.width))\n    let y = Math.max(0, Math.min(1, 1 - (event.clientY - rect.y) / rect.height))\n    return Math.pow(this.vertical ? y : x, this.exponent)\n  }\n  _getValueFromCoord(coord: number) {\n    return this.min * (1 - coord) + this.max * coord\n  }\n  onPointermoveThrottled(event: PointerEvent) {\n    if (this.#active === 1) {\n      if (document.activeElement !== this as unknown as Element) this.focus()\n      const coord = this._getPointerCoord(event)\n      const value = this._getValueFromCoord(coord)\n      this._inputValue(value)\n    }\n  }\n  _incrementValue(value: number) {\n    this._inputValue(this.value + value)\n  }\n  _inputValue(value: number) {\n    value = clamp(value, this.max, this.min)\n    value = Math.round(value / this.step) * this.step\n    value = Number(value.toFixed(5))\n    if (!isNaN(value) && this.value !== value) {\n      this.inputValue(value)\n    }\n  }\n  inputValue(value: any) {\n    if (this.value !== value || typeof this.value === 'object') {\n      const oldValue = this.value\n      this.setProperty('value', value)\n      this.dispatch('value-input', {value: value, oldValue: oldValue}, false)\n    }\n  }\n  onKeydown(event: KeyboardEvent) {\n    const invert = this.max < this.min\n    if (event.shiftKey) switch (event.key) {\n      case 'ArrowLeft':\n        this._incrementValue(invert ? this.step : -this.step)\n        break\n      case 'ArrowUp':\n        this._incrementValue(invert ? -this.step : this.step)\n        break\n      case 'ArrowRight':\n        this._incrementValue(invert ? -this.step : this.step)\n        break\n      case 'ArrowDown':\n        this._incrementValue(invert ? this.step : -this.step)\n        break\n      case 'Home':\n        event.preventDefault()\n        this._inputValue(this.min)\n        break\n      case 'End':\n        event.preventDefault()\n        this._inputValue(this.max)\n        break\n      case 'PageUp':\n        event.preventDefault()\n        this._incrementValue(invert ? -this.step : this.step)\n        break\n      case 'PageDown':\n        event.preventDefault()\n        this._incrementValue(invert ? this.step : -this.step)\n        break\n    } else if (['ArrowLeft', 'ArrowRight', 'ArrowUp', 'ArrowDown', 'Tab', 'Home', 'End', 'PageUp', 'PageDown'].includes(event.key)) {\n      event.preventDefault()\n      this.dispatch('io-focus-to', {source: this, command: event.key}, true)\n    }\n  }\n  ready() {\n    this.valueChanged()\n    this.minChanged()\n    this.maxChanged()\n    this.changed()\n  }\n  invalidChanged() {\n    this.ariaInvalid = String(this.invalid)\n  }\n  disabledChanged() {\n    this.inert = this.disabled\n    this.ariaDisabled = String(this.disabled)\n  }\n  valueChanged() {\n    this.invalid = isNaN(this.value)\n    this.ariaValueNow = String(this.value)\n  }\n  minChanged() {\n    this.ariaValueMin = String(this.min)\n  }\n  maxChanged() {\n    this.ariaValueMax = String(this.max)\n  }\n}\nexport const ioSlider = function(arg0?: IoSliderProps) {\n  return IoSlider.vConstructor(arg0)\n}\n"]}