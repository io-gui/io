{"version":3,"file":"index.js","sources":["../src/elements/IoSliderBase.ts","../src/elements/IoSliderRange.ts","../src/elements/IoNumberSliderRange.ts","../src/elements/IoSlider.ts","../src/elements/IoNumberSlider.ts","../src/elements/IoSlider2d.ts"],"sourcesContent":["import { ReactiveProperty, IoGl, IoElementProps, WithBinding, Property, ListenerDefinition } from '@io-gui/core'\n\nconst clamp = (num: number, min: number, max: number) => {\n  return max > min ? Math.min(Math.max(num, min), max) : Math.min(Math.max(num, max), min)\n}\n\nexport type IoSliderBaseProps = IoElementProps & {\n  value?:  WithBinding<number | [number, number]>\n  step?:  number | [number, number]\n  min?: number | [number, number]\n  max?: number | [number, number]\n  exponent?: number\n  vertical?: boolean\n  noscroll?: boolean\n}\n\nexport class IoSliderBase extends IoGl {\n  static get Style() {\n    return /* css */`\n      :host {\n        display: flex;\n        cursor: ew-resize;\n        border: var(--io_border);\n        border-radius: var(--io_borderRadius);\n        border-color: var(--io_borderColorInset);\n        min-height: var(--io_fieldHeight);\n        min-width: var(--io_fieldHeight);\n        flex-grow: 1;\n      }\n      :host[vertical] {\n        cursor: ns-resize;\n        width: var(--io_fieldHeight);\n        min-height: calc(var(--io_fieldHeight) * 5);\n        flex-basis: var(--io_fieldHeight);\n        flex-grow: 0;\n      }\n      :host[invalid] {\n        color: var(--io_colorWhite);\n        background-color: var(--io_bgColorRed);\n        border-color: var(--io_colorRed);\n      }\n      :host:focus {\n        @apply --io_focus;\n      }\n    `\n  }\n\n  @ReactiveProperty({type: Number, value: 0})\n  declare value: number | [number, number]\n\n  @ReactiveProperty({type: Number, value: 0.01})\n  declare step: number | [number, number]\n\n  @ReactiveProperty({type: Number, value: 0})\n  declare min: number | [number, number]\n\n  @ReactiveProperty({type: Number, value: 1})\n  declare max: number | [number, number]\n\n  @ReactiveProperty({type: Number, value: 1})\n  declare exponent: number\n\n  @ReactiveProperty({value: false, reflect: true})\n  declare vertical: boolean\n\n  @ReactiveProperty({value: false, type: Boolean, reflect: true})\n  declare invalid: boolean\n\n  @Property(false)\n  declare noscroll: boolean\n\n  @Property('slider')\n  declare role: string\n\n  @Property(0)\n  declare tabIndex: number\n\n  _startX = 0\n  _startY = 0\n  _rect: DOMRect | null = null\n\n  _active = -1\n\n  get _min(): [number, number] {\n    if (typeof this.min === 'number') {\n      return [this.min, this.min]\n    } else if (this.min instanceof Array) {\n      return [...this.min]\n    }\n    return [-Infinity, -Infinity]\n  }\n\n  get _max(): [number, number] {\n    if (typeof this.max === 'number') {\n      return [this.max, this.max]\n    } else if (this.max instanceof Array) {\n      return [...this.max]\n    }\n    return [Infinity, Infinity]\n  }\n\n  get _step(): [number, number] {\n    if (typeof this.step === 'number') {\n      return [this.step, this.step]\n    } else if (this.step instanceof Array) {\n      return [...this.step]\n    }\n    return [0.01, 0.01]\n  }\n\n  get _value(): [number, number] {\n    if (typeof this.value === 'number') {\n      return [this.value, this.value]\n    } else if (this.value instanceof Array) {\n      return [...this.value]\n    }\n    return [NaN, NaN]\n  }\n\n  static get Listeners() {\n    return {\n      'focus': 'onFocus',\n      'contextmenu': 'onContextmenu',\n      'pointerdown': 'onPointerdown',\n      'touchstart': ['onTouchstart', {passive: false}] as ListenerDefinition,\n    }\n  }\n\n  constructor(args: IoSliderBaseProps = {}) { super(args) }\n\n  onFocus() {\n    this.addEventListener('blur', this.onBlur)\n    this.addEventListener('keydown', this.onKeydown)\n  }\n  onBlur() {\n    this.removeEventListener('blur', this.onBlur)\n    this.removeEventListener('keydown', this.onKeydown)\n  }\n  onContextmenu(event: Event) {\n    event.stopPropagation()\n    event.preventDefault()\n  }\n  onTouchstart(event: TouchEvent) {\n    this._rect = this.getBoundingClientRect()\n    this.addEventListener('touchmove', this.onTouchmove, {passive: false})\n    this.addEventListener('touchend', this.onTouchend)\n    this._startX = event.changedTouches[0].clientX\n    this._startY = event.changedTouches[0].clientY\n    this._active = this.noscroll ? 1 : -1\n  }\n  onTouchmove(event: TouchEvent) {\n    const dx = Math.abs(this._startX - event.changedTouches[0].clientX)\n    const dy = Math.abs(this._startY - event.changedTouches[0].clientY)\n    if (this._active === -1) {\n      if (this.vertical) {\n        if (dy > 5 && dy > dx) {\n          this._active = (dy > dx && dx < 5) ? 1 : 0\n        }\n      } else {\n        if (dx > 5 && dx > dy) {\n          this._active = (dx > dy && dy < 5) ? 1 : 0\n        }\n      }\n    }\n    if (this._active === 1 && event.cancelable) {\n      event.stopPropagation()\n      event.preventDefault()\n    }\n  }\n  onTouchend() {\n    this.removeEventListener('touchmove', this.onTouchmove)\n    this.removeEventListener('touchend', this.onTouchend)\n  }\n  onPointerdown(event: PointerEvent) {\n    event.stopPropagation()\n    this._rect = this.getBoundingClientRect()\n    this.setPointerCapture(event.pointerId)\n    this.addEventListener('pointermove', this.onPointermove)\n    this.addEventListener('pointerup', this.onPointerup)\n    this.addEventListener('pointercancel', this.onPointerup)\n  }\n  onPointermove(event: PointerEvent) {\n    if (event.pointerType !== 'touch') this._active = 1\n    this.throttle(this.onPointermoveThrottled, event)\n  }\n  onPointerup(event: PointerEvent) {\n    this.releasePointerCapture(event.pointerId)\n    this.removeEventListener('pointermove', this.onPointermove)\n    this.removeEventListener('pointerup', this.onPointerup)\n    this.removeEventListener('pointercancel', this.onPointerup)\n    this._active = -1\n  }\n  _getPointerCoord(event: PointerEvent): [number, number] {\n    const rect = this._rect || this.getBoundingClientRect()\n    let x = Math.max(0, Math.min(1, (event.clientX - rect.x) / rect.width))\n    let y = Math.max(0, Math.min(1, 1 - (event.clientY - rect.y) / rect.height))\n    x = Math.pow(x, this.exponent)\n    y = Math.pow(y, this.exponent)\n    return this.vertical ? [y, x] : [x, y]\n  }\n  _getValueFromCoord(coord: [number, number]) {\n    const value: [number, number] = [0, 0]\n    const min = this._min\n    const max = this._max\n    value[0] = min[0] * (1 - coord[0]) + max[0] * coord[0]\n    value[1] = min[1] * (1 - coord[1]) + max[1] * coord[1]\n    return value\n  }\n  onPointermoveThrottled(event: PointerEvent) {\n    if (this._active === 1) {\n      if (document.activeElement !== this as unknown as Element) this.focus()\n      const coord = this._getPointerCoord(event)\n      const value = this._getValueFromCoord(coord)\n      this._inputValue(value)\n    }\n  }\n  _inputValue(value: [number, number]) {\n    const min = this._min\n    const max = this._max\n    const step = this._step\n\n    value[0] = clamp(value[0], max[0], min[0])\n    value[1] = clamp(value[1], max[1], min[1])\n    value[0] = Math.round(value[0] / step[0]) * step[0]\n    value[1] = Math.round(value[1] / step[1]) * step[1]\n\n    value[0] = Number(value[0].toFixed(5))\n    value[1] = Number(value[1].toFixed(5))\n    if (typeof this.value === 'number') {\n      if (this.value === value[0]) return\n      this.inputValue(value[0])\n    } else if (this.value instanceof Array) {\n      const oldValue = JSON.stringify(this.value)\n      this.value[0] = value[0]\n      this.value[1] = value[1]\n      if (oldValue === JSON.stringify(this.value)) return\n      this.inputValue(this.value)\n      this.dispatchMutation(this.value)\n    } else if (typeof this.value === 'object') {\n      const oldValue = JSON.stringify(this.value)\n      const $value = this.value as {x: number; y: number}\n      $value.x = value[0]\n      $value.y = value[1]\n      if (oldValue === JSON.stringify(this.value)) return\n      this.inputValue(this.value)\n      this.dispatchMutation(this.value)\n    }\n  }\n  inputValue(value: any) {\n    if (this.value !== value || typeof this.value === 'object') {\n      const oldValue = this.value\n      this.setProperty('value', value)\n      this.dispatch('value-input', {value: value, oldValue: oldValue}, false)\n    }\n  }\n  onKeydown(event: KeyboardEvent) {\n    const oneDimension = typeof this.value === 'number'\n\n    if (event.shiftKey) switch (event.key) {\n      case 'ArrowLeft':\n        oneDimension ? this._setDecrease() : this._setLeft()\n        break\n      case 'ArrowUp':\n        oneDimension ? this._setIncrease() : this._setUp()\n        break\n      case 'ArrowRight':\n        oneDimension ? this._setIncrease() : this._setRight()\n        break\n      case 'ArrowDown':\n        oneDimension ? this._setDecrease() : this._setDown()\n        break\n      } else if (['ArrowLeft', 'ArrowRight', 'ArrowUp', 'ArrowDown', 'Tab', 'Home', 'End', 'PageUp', 'PageDown'].includes(event.key)) {\n        event.preventDefault()\n        this.dispatch('io-focus-to', {source: this, command: event.key}, true)\n      }\n  }\n  _setIncrease() {\n    const value = this._value\n    const step = this._step\n    value[0] = value[0] + step[0]\n    value[1] = value[1] + step[1]\n    this._inputValue(value)\n  }\n  _setDecrease() {\n    const value = this._value\n    const step = this._step\n    value[0] = value[0] - step[0]\n    value[1] = value[1] - step[1]\n    this._inputValue(value)\n  }\n  _setMin() {\n    const min = this._min\n    this._inputValue(min)\n  }\n  _setMax() {\n    const max = this._max\n    this._inputValue(max)\n  }\n  _setUp() {\n    const value = this._value\n    const step = this._step\n    value[0] = value[0] + step[0]\n    this._inputValue(value)\n  }\n  _setDown() {\n    const value = this._value\n    const step = this._step\n    value[0] = value[0] - step[0]\n    this._inputValue(value)\n  }\n  _setLeft() {\n    const value = this._value\n    const step = this._step\n    value[1] = value[1] - step[1]\n    this._inputValue(value)\n  }\n  _setRight() {\n    const value = this._value\n    const step = this._step\n    value[1] = value[1] + step[1]\n    this._inputValue(value)\n  }\n  ready() {\n    this.changed()\n  }\n  valueChanged() {\n    let invalid = false\n    if (this.value instanceof Array) {\n      invalid = isNaN(this.value[0]) || isNaN(this.value[1])\n    } else if (isNaN(this.value)) {\n      invalid = true\n    }\n    this.invalid = invalid\n  }\n  invalidChanged() {\n    if (this.invalid) {\n      this.setAttribute('aria-invalid', 'true')\n    } else {\n      this.removeAttribute('aria-invalid')\n    }\n  }\n  valueMutated() {\n    this.changed()\n    this.dispatchMutation()\n  }\n  changed() {\n    super.changed()\n    this.setAttribute('aria-valuemin', JSON.stringify(this.min))\n    this.setAttribute('aria-valuemax', JSON.stringify(this.max))\n    this.setAttribute('aria-valuestep', JSON.stringify(this.step))\n    const value = this._value\n    if (typeof value[0] !== 'number' || isNaN(value[0])) {\n      this.setAttribute('aria-invalid', 'true')\n    } else {\n      this.removeAttribute('aria-invalid')\n    }\n    this.setAttribute('aria-valuenow', JSON.stringify(this.value))\n  }\n}\n\n","import { Register, ReactiveProperty, WithBinding } from '@io-gui/core'\nimport { IoSliderBase, IoSliderBaseProps } from './IoSliderBase.js'\n\nexport type IoSliderRangeProps = IoSliderBaseProps & {\n  value?: WithBinding<[number, number]>\n  step?: number\n  min?: number\n  max?: number\n}\n\n/**\n * Input element for `Array(2)` data type displayed as slider.\n * It can be configured to clamp the `value` compoents to `min` / `max` and round it to the nearest `step` increment. `exponent` property can be changed for non-linear scale.\n **/\n@Register\nexport class IoSliderRange extends IoSliderBase {\n\n  @ReactiveProperty({type: Array, value: undefined, init: [0, 0]}) // TODO: Remove value: undefined\n  declare value: [number, number]\n\n  @ReactiveProperty({type: Number, value: 0.01})\n  declare step: number\n\n  @ReactiveProperty({type: Number, value: 0})\n  declare min: number\n\n  @ReactiveProperty({type: Number, value: 1})\n  declare max: number\n\n  _index = 0\n\n  constructor(args: IoSliderRangeProps = {}) { super(args) }\n\n  _getCoordFromValue(value: [number, number]) {\n    const coord = [0, 0]\n    const min = this._min\n    const max = this._max\n    coord[0] = (value[0] - min[0]) / (max[0] - min[0])\n    coord[1] = (value[1] - min[1]) / (max[1] - min[1])\n    return coord\n  }\n  onPointerdown(event: PointerEvent) {\n    super.onPointerdown(event)\n    const value = this._value\n    const p = this._getPointerCoord(event)\n    const c = this._getCoordFromValue(value)\n    this._index = Math.abs(c[0] - p[0]) < Math.abs(c[1] - p[0]) ? 0 : 1\n  }\n  onPointermoveThrottled(event: PointerEvent) {\n    if (this._active === 1) {\n      if (document.activeElement !== this as unknown as Element) this.focus()\n      const value = this._value\n      const coord = this._getPointerCoord(event)\n      const newValue = this._getValueFromCoord(coord)\n      if (this._index === 0) {\n        this._inputValue([newValue[0], value[1]])\n      } else if (this._index === 1) {\n        this._inputValue([value[0], newValue[0]])\n      }\n    }\n  }\n  static get Frag() {\n    return /* glsl */`\n    varying vec2 vUv;\n\n    void main(void) {\n      // Dimensions\n      vec2 size = uVertical == 1 ? uSize.yx : uSize;\n      vec2 uv = uVertical == 1 ? vUv.yx : vUv;\n      vec2 position = size * vec2(uv.x, uv.y - 0.5);\n      vec2 expPosition = size * vec2(pow(uv.x, uExponent), uv.y - 0.5);\n\n      vec2 valueInRange = (uValue - vec2(uMin)) / (vec2(uMax) - vec2(uMin));\n\n      vec2 valueSign = sign(valueInRange);\n      vec2 expValueInRange = pow(abs(valueInRange), vec2(1./uExponent)) * valueSign;\n      float valueInRangeWidth = valueInRange[1] - valueInRange[0];\n      float valueInRangeCenter = (valueInRange[1] + valueInRange[0]) / 2.0;\n      float signRange = sign(valueInRangeWidth);\n\n      // Colors\n      vec3 finalCol = io_bgColorInput.rgb;\n      vec3 gridCol = io_bgColorLight.rgb;\n      vec3 sliderCol = signRange > 0.0 ? io_bgColorBlue.rgb : io_bgColorRed.rgb;\n      vec3 lineCol1 = io_color.rgb;\n      vec3 lineCol2 = io_bgColor.rgb;\n\n      // Grid\n      float gridSize = size.x / abs((uMax - uMin) / uStep);\n      float gridOffset = mod(uStep - uMin, uStep) / (uMax - uMin) * size.x;\n      float gridShape = paintDerivativeGrid2D(translate(expPosition, gridOffset, 0.0), vec2(gridSize, 0.0), io_borderWidth);\n      finalCol = compose(finalCol, vec4(gridCol, gridShape * 0.5));\n\n      // Slider\n      float sliderShape = rectangle(translate(expPosition, size.x * valueInRangeCenter, 0.0), vec2(size.x * abs(valueInRangeWidth) * 0.5, size.y));\n      finalCol = compose(finalCol, vec4(sliderCol, sliderShape));\n      finalCol = compose(finalCol, vec4(io_bgColorInput.rgb, gridShape * sliderShape * 0.125));\n\n      // Lines\n      float maxPos = expValueInRange[0];\n      float minPos = expValueInRange[1];\n\n      float lineMinShape1 = lineVertical(translate(position, maxPos * size.x, 0.0), io_borderWidth);\n      finalCol = compose(finalCol, vec4(lineCol1, lineMinShape1));\n      float lineMinShape2 = lineVertical(translate(position, maxPos * size.x + io_borderWidth * signRange, 0.0), io_borderWidth);\n      finalCol = compose(finalCol, vec4(lineCol2, lineMinShape2));\n      \n      float lineMaxShape1 = lineVertical(translate(position, minPos * size.x, 0.0), io_borderWidth);\n      finalCol = compose(finalCol, vec4(lineCol1, lineMaxShape1));\n      float lineMaxShape2 = lineVertical(translate(position, minPos * size.x - io_borderWidth * signRange, 0.0), io_borderWidth);\n      finalCol = compose(finalCol, vec4(lineCol2, lineMaxShape2));\n\n      gl_FragColor = vec4(finalCol, 1.0);\n    }\n    `\n  }\n}\nexport const ioSliderRange = function(arg0?: IoSliderRangeProps) {\n  return IoSliderRange.vConstructor(arg0)\n}\n","import { Register, IoElement, ReactiveProperty, IoElementProps, WithBinding, Node } from '@io-gui/core'\nimport {ioNumber} from '@io-gui/inputs'\nimport {ioSliderRange} from './IoSliderRange.js'\n\nexport type IoNumberSliderRangeProps = IoElementProps & {\n  value?: WithBinding<[number, number]>\n  step?: number\n  min?: number\n  max?: number\n  exponent?: number\n  conversion?: number\n}\n\n/**\n * Input element for `Array(2)` data type combining `IoNumber` and `IoSliderRange`\n **/\n@Register\nexport class IoNumberSliderRange extends IoElement {\n  static get Style() {\n    return /* css */`\n    :host {\n      display: flex;\n    }\n    :host > io-number {\n      flex: 0 0 3.5em;\n    }\n    :host > io-slider-range {\n      margin-left: var(--io_spacing);\n      margin-right: var(--io_spacing);\n      flex: 1 1 3.5em;\n      min-width: 3.5em;\n    }\n    `\n  }\n\n  @ReactiveProperty({type: Array, init: [0, 0]})\n  declare value: [number, number]\n\n  @ReactiveProperty(0.01)\n  declare step: number\n\n  @ReactiveProperty(0)\n  declare min: number\n\n  @ReactiveProperty(1)\n  declare max: number\n\n  @ReactiveProperty(1)\n  declare exponent: number\n\n  @ReactiveProperty(1)\n  declare conversion: number\n\n  constructor(args: IoNumberSliderRangeProps = {}) { super(args) }\n\n  _onNumberSet(event: CustomEvent) {\n    const item = event.composedPath()[0]\n    if (item === this.$.number0) this.value[0] = event.detail.value\n    if (item === this.$.number1) this.value[1] = event.detail.value\n    if (!(this.value as unknown as Node)._isNode) {\n      this.dispatchMutation(this.value)\n    }\n  }\n  _onSliderSet(event: CustomEvent) {\n    this.value = event.detail.value\n    if (!(this.value as unknown as Node)._isNode) {\n      this.dispatchMutation(this.value)\n    }\n  }\n  ready() {\n    this.changed()\n  }\n  changed() {\n    this.render([\n      ioNumber({\n        id: 'number0',\n        value: this.value[0],\n        step: this.step,\n        min: this.min,\n        max: this.max,\n        conversion: this.conversion,\n        '@value-input': this._onNumberSet,\n      }),\n      ioSliderRange({\n        id: 'slider',\n        value: this.value,\n        step: this.step,\n        min: this.min,\n        max: this.max,\n        exponent: this.exponent,\n        '@value-input': this._onSliderSet,\n      }),\n      ioNumber({\n        id: 'number1',\n        value: this.value[1],\n        step: this.step,\n        min: this.min,\n        max: this.max,\n        conversion: this.conversion,\n        '@value-input': this._onNumberSet,\n      }),\n    ])\n  }\n}\nexport const ioNumberSliderRange = function(arg0?: IoNumberSliderRangeProps) {\n  return IoNumberSliderRange.vConstructor(arg0)\n}","import { Register, ReactiveProperty, IoGl, IoElementProps, Property, ListenerDefinition, WithBinding } from '@io-gui/core'\n\nconst clamp = (num: number, min: number, max: number) => {\n  return max > min ? Math.min(Math.max(num, min), max) : Math.min(Math.max(num, max), min)\n}\n\nexport type IoSliderProps = IoElementProps & {\n  value?: WithBinding<number>\n  step?: number\n  min?: number\n  max?: number\n  exponent?: number\n  vertical?: boolean\n  disabled?: boolean\n  noscroll?: boolean\n}\n\n/**\n * Input element for `Number` data type displayed as slider.\n * It can be configured to clamp the `value` to `min` / `max` and round it to the nearest `step` increment. `exponent` property can be changed for non-linear scale.\n **/\n@Register\nexport class IoSlider extends IoGl {\n  static get Style() {\n    return /* css */`\n      :host {\n        display: flex;\n        cursor: ew-resize;\n        border: var(--io_border);\n        border-radius: var(--io_borderRadius);\n        border-color: var(--io_borderColorInset);\n        min-height: var(--io_fieldHeight);\n        min-width: var(--io_fieldHeight);\n        flex-grow: 1;\n      }\n      :host[vertical] {\n        cursor: ns-resize;\n        width: var(--io_fieldHeight);\n        min-height: calc(var(--io_fieldHeight) * 5);\n        flex-basis: var(--io_fieldHeight);\n        flex-grow: 0;\n      }\n      :host[invalid] {\n        border-color: var(--io_colorRed);\n      }\n      :host[disabled] {\n        opacity: 0.5;\n      }\n      :host:focus {\n        @apply --io_focus;\n      }\n    `\n  }\n\n  @ReactiveProperty(0)\n  declare value: number\n\n  @ReactiveProperty(0.01)\n  declare step: number\n\n  @ReactiveProperty(0)\n  declare min: number\n\n  @ReactiveProperty(1)\n  declare max: number\n\n  @ReactiveProperty(1)\n  declare exponent: number\n\n  @ReactiveProperty({value: false, reflect: true})\n  declare vertical: boolean\n\n  @ReactiveProperty({value: false, type: Boolean, reflect: true})\n  declare invalid: boolean\n\n  @ReactiveProperty({value: false, type: Boolean, reflect: true})\n  declare disabled: boolean\n\n  @Property(false)\n  declare noscroll: boolean\n\n  @Property('slider')\n  declare role: string\n\n  @Property(0)\n  declare tabIndex: number\n\n  #startX = 0\n  #startY = 0\n  #active = -1\n  #rect: DOMRect | null = null\n\n  static get Frag() {\n    return /* glsl */`\n    varying vec2 vUv;\n\n    void main(void) {\n      // Dimensions\n      vec2 size = uVertical == 1 ? uSize.yx : uSize;\n      vec2 uv = uVertical == 1 ? vUv.yx : vUv;\n      vec2 position = size * vec2(uv.x, uv.y - 0.5);\n      vec2 expPosition = size * vec2(pow(uv.x, uExponent), uv.y - 0.5);\n      float valueInRange = (uValue - uMin) / (uMax - uMin);\n      if (uInvalid == 1) valueInRange = 0.0;\n      float valueSign = sign(valueInRange);\n      float expValueInRange = pow(abs(valueInRange), 1./uExponent) * valueSign;\n\n      // Colors\n      vec3 finalCol = io_bgColorInput.rgb;\n      vec3 gridCol = io_bgColorLight.rgb;\n      vec3 sliderCol = io_bgColorBlue.rgb;\n      vec3 lineCol1 = io_color.rgb;\n      vec3 lineCol2 = io_bgColor.rgb;\n\n      // Grid\n      float gridSize = size.x / abs((uMax - uMin) / uStep);\n      float gridOffset = mod(uStep - uMin, uStep) / (uMax - uMin) * size.x;\n      float gridShape = paintDerivativeGrid2D(translate(expPosition, gridOffset, 0.0), vec2(gridSize, 0.0), io_borderWidth);\n      finalCol = compose(finalCol, vec4(gridCol, gridShape * 0.5));\n\n      // Slider\n      float sliderShape = rectangle(expPosition, vec2(size.x * valueInRange, size.y));\n      finalCol = compose(finalCol, vec4(sliderCol, sliderShape));\n      finalCol = compose(finalCol, vec4(io_bgColorInput.rgb, gridShape * sliderShape * 0.125));\n\n      // Lines\n      float lineShape1 = lineVertical(translate(position, expValueInRange * size.x, 0.0), io_borderWidth);\n      finalCol = compose(finalCol, vec4(lineCol1, lineShape1));\n      float lineShape2 = lineVertical(translate(position, expValueInRange * size.x - io_borderWidth, 0.0), io_borderWidth);\n      finalCol = compose(finalCol, vec4(lineCol2, lineShape2));\n\n      gl_FragColor = vec4(finalCol, 1.0);\n    }`\n  }\n\n  static get Listeners() {\n    return {\n      'focus': 'onFocus',\n      'contextmenu': 'onContextmenu',\n      'pointerdown': 'onPointerdown',\n      'touchstart': ['onTouchstart', {passive: false}] as ListenerDefinition,\n    }\n  }\n\n  constructor(args: IoSliderProps = {}) { super(args) }\n\n  onFocus() {\n    this.addEventListener('blur', this.onBlur)\n    this.addEventListener('keydown', this.onKeydown)\n  }\n  onBlur() {\n    this.removeEventListener('blur', this.onBlur)\n    this.removeEventListener('keydown', this.onKeydown)\n  }\n  onContextmenu(event: Event) {\n    event.preventDefault()\n  }\n  onTouchstart(event: TouchEvent) {\n    this.#rect = this.getBoundingClientRect()\n    this.addEventListener('touchmove', this.onTouchmove, {passive: false})\n    this.addEventListener('touchend', this.onTouchend)\n    this.#startX = event.changedTouches[0].clientX\n    this.#startY = event.changedTouches[0].clientY\n    this.#active = this.noscroll ? 1 : -1\n  }\n  onTouchmove(event: TouchEvent) {\n    const dx = Math.abs(this.#startX - event.changedTouches[0].clientX)\n    const dy = Math.abs(this.#startY - event.changedTouches[0].clientY)\n    if (this.#active === -1) {\n      if (this.vertical) {\n        if (dy > 5 && dy > dx) {\n          this.#active = (dy > dx && dx < 5) ? 1 : 0\n        }\n      } else {\n        if (dx > 5 && dx > dy) {\n          this.#active = (dx > dy && dy < 5) ? 1 : 0\n        }\n      }\n    }\n    if (this.#active === 1 && event.cancelable) {\n      event.preventDefault()\n    }\n  }\n  onTouchend() {\n    this.removeEventListener('touchmove', this.onTouchmove)\n    this.removeEventListener('touchend', this.onTouchend)\n  }\n  onPointerdown(event: PointerEvent) {\n    event.stopPropagation()\n    this.#rect = this.getBoundingClientRect()\n    this.setPointerCapture(event.pointerId)\n    this.addEventListener('pointermove', this.onPointermove)\n    this.addEventListener('pointerup', this.onPointerup)\n    this.addEventListener('pointercancel', this.onPointerup)\n  }\n  onPointermove(event: PointerEvent) {\n    if (event.pointerType !== 'touch') this.#active = 1\n    this.throttle(this.onPointermoveThrottled, event)\n  }\n  onPointerup(event: PointerEvent) {\n    this.releasePointerCapture(event.pointerId)\n    this.removeEventListener('pointermove', this.onPointermove)\n    this.removeEventListener('pointerup', this.onPointerup)\n    this.removeEventListener('pointercancel', this.onPointerup)\n    this.#active = -1\n  }\n  _getPointerCoord(event: PointerEvent): number {\n    const rect = this.#rect || this.getBoundingClientRect()\n    const x = Math.max(0, Math.min(1, (event.clientX - rect.x) / rect.width))\n    const y = Math.max(0, Math.min(1, 1 - (event.clientY - rect.y) / rect.height))\n    return Math.pow(this.vertical ? y : x, this.exponent)\n  }\n  _getValueFromCoord(coord: number) {\n    return this.min * (1 - coord) + this.max * coord\n  }\n  onPointermoveThrottled(event: PointerEvent) {\n    if (this.#active === 1) {\n      if (document.activeElement !== this as unknown as Element) this.focus()\n      const coord = this._getPointerCoord(event)\n      const value = this._getValueFromCoord(coord)\n      this._inputValue(value)\n    }\n  }\n  _incrementValue(value: number) {\n    this._inputValue(this.value + value)\n  }\n  _inputValue(value: number) {\n    value = clamp(value, this.max, this.min)\n    value = Math.round(value / this.step) * this.step\n    value = Number(value.toFixed(5))\n    if (!isNaN(value) && this.value !== value) {\n      this.inputValue(value)\n    }\n  }\n  inputValue(value: any) {\n    if (this.value !== value || typeof this.value === 'object') {\n      const oldValue = this.value\n      this.setProperty('value', value)\n      this.dispatch('value-input', {value: value, oldValue: oldValue}, false)\n    }\n  }\n  onKeydown(event: KeyboardEvent) {\n    const invert = this.max < this.min\n    if (event.shiftKey) switch (event.key) {\n      case 'ArrowLeft':\n        this._incrementValue(invert ? this.step : -this.step)\n        break\n      case 'ArrowUp':\n        this._incrementValue(invert ? -this.step : this.step)\n        break\n      case 'ArrowRight':\n        this._incrementValue(invert ? -this.step : this.step)\n        break\n      case 'ArrowDown':\n        this._incrementValue(invert ? this.step : -this.step)\n        break\n      case 'Home':\n        event.preventDefault()\n        this._inputValue(this.min)\n        break\n      case 'End':\n        event.preventDefault()\n        this._inputValue(this.max)\n        break\n      case 'PageUp':\n        event.preventDefault()\n        this._incrementValue(invert ? -this.step : this.step)\n        break\n      case 'PageDown':\n        event.preventDefault()\n        this._incrementValue(invert ? this.step : -this.step)\n        break\n    } else if (['ArrowLeft', 'ArrowRight', 'ArrowUp', 'ArrowDown', 'Tab', 'Home', 'End', 'PageUp', 'PageDown'].includes(event.key)) {\n      event.preventDefault()\n      this.dispatch('io-focus-to', {source: this, command: event.key}, true)\n    }\n  }\n  ready() {\n    this.valueChanged()\n    this.minChanged()\n    this.maxChanged()\n    this.changed()\n  }\n  invalidChanged() {\n    this.ariaInvalid = String(this.invalid)\n  }\n  disabledChanged() {\n    this.inert = this.disabled\n    this.ariaDisabled = String(this.disabled)\n  }\n  valueChanged() {\n    this.invalid = isNaN(this.value)\n    this.ariaValueNow = String(this.value)\n  }\n  minChanged() {\n    this.ariaValueMin = String(this.min)\n  }\n  maxChanged() {\n    this.ariaValueMax = String(this.max)\n  }\n}\nexport const ioSlider = function(arg0?: IoSliderProps) {\n  return IoSlider.vConstructor(arg0)\n}\n","import { Register, IoElement, ReactiveProperty, IoElementProps, WithBinding } from '@io-gui/core'\nimport {ioNumber} from '@io-gui/inputs'\nimport {ioSlider} from './IoSlider.js'\n\nexport type IoNumberSliderProps = IoElementProps & {\n  value?: WithBinding<number>\n  step?: number\n  min?: number\n  max?: number\n  exponent?: number\n  conversion?: number\n}\n\n/**\n * Input element for `Number` data type combining `IoNumber` and `IoSlider`\n **/\n@Register\nexport class IoNumberSlider extends IoElement {\n\n  static get Style() {\n    return /* css */`\n    :host {\n      display: flex;\n    }\n    :host > io-number {\n      flex: 0 0 3.5em;\n      margin-right: var(--io_spacing);\n    }\n    :host > io-slider {\n      flex: 1 1 3em;\n      min-width: 3em;\n    }\n    `\n  }\n\n  @ReactiveProperty({value: 0})\n  declare value: number\n\n  @ReactiveProperty(0.01)\n  declare step: number\n\n  @ReactiveProperty(0)\n  declare min: number\n\n  @ReactiveProperty(1)\n  declare max: number\n\n  @ReactiveProperty(1)\n  declare exponent: number\n\n  @ReactiveProperty(1)\n  declare conversion: number\n\n  constructor(args: IoNumberSliderProps = {}) { super(args) }\n\n  _onNumberSet(event: CustomEvent) {\n    this.value = event.detail.value\n    this.dispatch('value-input', event.detail, false)\n  }\n  _onSliderSet(event: CustomEvent) {\n    event.detail.value = event.detail.value / this.conversion\n    this.value = event.detail.value\n    this.dispatch('value-input', event.detail, false)\n  }\n  ready() {\n    this.changed()\n  }\n  changed() {\n    this.render([\n      ioNumber({\n        id: 'number',\n        value: this.value,\n        step: this.step,\n        min: this.min * this.conversion,\n        max: this.max * this.conversion,\n        conversion: this.conversion,\n        '@value-input': this._onNumberSet,\n      }),\n      ioSlider({\n        id: 'slider',\n        value: this.value * this.conversion,\n        step: this.step * this.conversion,\n        min: this.min * this.conversion,\n        max: this.max * this.conversion,\n        exponent: this.exponent,\n        '@value-input': this._onSliderSet,\n      }),\n    ])\n  }\n}\nexport const ioNumberSlider = function(arg0?: IoNumberSliderProps) {\n  return IoNumberSlider.vConstructor(arg0)\n}","import { Register, ReactiveProperty, Property, WithBinding } from '@io-gui/core'\nimport { IoSliderBase, IoSliderBaseProps } from './IoSliderBase.js'\n\nexport type IoSlider2dProps = IoSliderBaseProps & {\n  value?: WithBinding<[number, number]>\n  step?: [number, number]\n  min?: [number, number]\n  max?: [number, number]\n}\n\n@Register\nexport class IoSlider2d extends IoSliderBase {\n\n  static get Style() {\n    return /* css */`\n      :host {\n        cursor: crosshair;\n        border: var(--io_border);\n        border-radius: var(--io_borderRadius);\n        border-color: var(--io_borderColorInset);\n        flex-grow: 0;\n      }\n      :host:not([vertical]),\n      :host[vertical] {\n        min-width: calc(var(--io_fieldHeight) * 5);\n        min-height: calc(var(--io_fieldHeight) * 5);\n        cursor: crosshair;\n      }\n    `\n  }\n\n  @ReactiveProperty({type: Array, value: undefined, init: [0, 0]}) // TODO: Remove value: undefined\n  declare value: [number, number]\n\n  @ReactiveProperty({type: Array, value: undefined, init: [0.01, 0.01]}) // TODO: Remove value: undefined\n  declare step: [number, number]\n\n  @ReactiveProperty({type: Array, value: undefined, init: [-1, -1]}) // TODO: Remove value: undefined\n  declare min: [number, number]\n\n  @ReactiveProperty({type: Array, value: undefined, init: [1, 1]}) // TODO: Remove value: undefined\n  declare max: [number, number]\n\n  @Property(true)\n  declare noscroll: boolean\n\n  constructor(args: IoSlider2dProps = {}) { super(args) }\n\n  static get GlUtils() {\n    return /* glsl */`\n      vec3 paintKnob(vec3 dstCol, vec2 p, vec2 center, vec3 color) {\n        vec4 finalCol = vec4(0.0);\n        vec2 pCenter = translate(p, center);\n        float radius = io_fieldHeight * 0.25;\n        float stroke = io_borderWidth;\n        float strokeShape = circle(pCenter, radius + stroke + stroke);\n        float fillShape   = circle(pCenter, radius + stroke);\n        float colorShape  = circle(pCenter, radius);\n        finalCol = mix(io_colorStrong, finalCol, strokeShape);\n        finalCol = mix(vec4(io_bgColor.rgb, 1.0), finalCol, fillShape);\n        finalCol = mix(vec4(color, 1.0), finalCol, colorShape);\n        return compose(dstCol, finalCol);\n      }\n    `\n  }\n  static get Frag() {\n    return /* glsl */`\n    varying vec2 vUv;\n\n    void main(void) {\n      // Dimensions\n      vec2 size = uVertical == 1 ? uSize.yx : uSize;\n      vec2 uv = uVertical == 1 ? vUv.yx : vUv;\n      vec2 position = size * (uv - vec2(0.5));\n\n      // Colors\n      vec3 finalCol = io_bgColorInput.rgb;\n      vec3 gridCol = io_bgColorLight.rgb;\n      vec3 sliderCol = io_bgColorBlue.rgb;\n      vec3 lineCol1 = io_color.rgb;\n      vec3 lineCol2 = io_bgColor.rgb;\n\n      // Grid\n      vec2 gridSize = size / abs((uMax - uMin) / uStep);\n      vec2 gridOffset = (uMax + uMin) / (uMax - uMin) * size / 2.;\n      vec2 gridPosition = translate(position, -gridOffset);\n      float gridShape = paintDerivativeGrid2D(gridPosition, gridSize, io_borderWidth);\n      finalCol = compose(finalCol, vec4(gridCol, gridShape * 0.5));\n\n      // Axis\n      float axisShape = lineCross2d(gridPosition, io_borderWidth);\n      finalCol = compose(finalCol, vec4(gridCol, axisShape));\n\n      // Knob\n      vec2 knobPos = uValue / (uMax - uMin) * size;\n      finalCol = paintKnob(finalCol, gridPosition, knobPos, sliderCol);\n\n      gl_FragColor = vec4(finalCol, 1.0);\n    }`\n  }\n}\nexport const ioSlider2d = function(arg0?: IoSlider2dProps) {\n  return IoSlider2d.vConstructor(arg0)\n}\n"],"names":["clamp","num","min","max","Math","IoSliderBase","IoGl","Style","_startX","_startY","_rect","_active","_min","this","Array","Infinity","_max","_step","step","_value","value","NaN","Listeners","focus","contextmenu","pointerdown","touchstart","passive","constructor","args","super","onFocus","addEventListener","onBlur","onKeydown","removeEventListener","onContextmenu","event","stopPropagation","preventDefault","onTouchstart","getBoundingClientRect","onTouchmove","onTouchend","changedTouches","clientX","clientY","noscroll","dx","abs","dy","vertical","cancelable","onPointerdown","setPointerCapture","pointerId","onPointermove","onPointerup","pointerType","throttle","onPointermoveThrottled","releasePointerCapture","_getPointerCoord","rect","x","width","y","height","pow","exponent","_getValueFromCoord","coord","document","activeElement","_inputValue","round","Number","toFixed","inputValue","oldValue","JSON","stringify","dispatchMutation","$value","setProperty","dispatch","oneDimension","shiftKey","key","_setDecrease","_setLeft","_setIncrease","_setUp","_setRight","_setDown","includes","source","command","_setMin","_setMax","ready","changed","valueChanged","invalid","isNaN","invalidChanged","setAttribute","removeAttribute","valueMutated","__decorateClass","ReactiveProperty","type","prototype","reflect","Boolean","Property","IoSliderRange","_index","_getCoordFromValue","p","c","newValue","Frag","init","Register","ioSliderRange","arg0","vConstructor","IoNumberSliderRange","IoElement","_onNumberSet","item","composedPath","$","number0","detail","number1","_isNode","_onSliderSet","render","ioNumber","id","conversion","ioNumberSliderRange","IoSlider","__privateAdd","__privateSet","__privateGet","_incrementValue","invert","minChanged","maxChanged","ariaInvalid","String","disabledChanged","inert","disabled","ariaDisabled","ariaValueNow","ariaValueMin","ariaValueMax","WeakMap","ioSlider","IoNumberSlider","ioNumberSlider","IoSlider2d","GlUtils","ioSlider2d"],"mappings":"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"}