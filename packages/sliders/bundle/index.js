import{ReactiveProperty as e,Property as t,IoGl as i,Register as n,IoElement as o}from"@io-gui/core";import{ioNumber as r}from"@io-gui/inputs";var s=Object.defineProperty,a=(e,t,i,n)=>{for(var o,r=void 0,a=e.length-1;a>=0;a--)(o=e[a])&&(r=o(t,i,r)||r);return r&&s(t,i,r),r};const l=(e,t,i)=>i>t?Math.min(Math.max(e,t),i):Math.min(Math.max(e,i),t);class h extends i{static get Style(){return"\n      :host {\n        display: flex;\n        cursor: ew-resize;\n        border: var(--io_border);\n        border-radius: var(--io_borderRadius);\n        border-color: var(--io_borderColorInset);\n        min-height: var(--io_fieldHeight);\n        min-width: var(--io_fieldHeight);\n        flex-grow: 1;\n      }\n      :host[vertical] {\n        cursor: ns-resize;\n        width: var(--io_fieldHeight);\n        min-height: calc(var(--io_fieldHeight) * 5);\n        flex-basis: var(--io_fieldHeight);\n        flex-grow: 0;\n      }\n      :host[invalid] {\n        color: var(--io_colorWhite);\n        background-color: var(--io_bgColorRed);\n        border-color: var(--io_colorRed);\n      }\n      :host:focus {\n        @apply --io_focus;\n      }\n    "}_startX=0;_startY=0;_rect=null;_active=-1;get _min(){return"number"==typeof this.min?[this.min,this.min]:this.min instanceof Array?[...this.min]:[-1/0,-1/0]}get _max(){return"number"==typeof this.max?[this.max,this.max]:this.max instanceof Array?[...this.max]:[1/0,1/0]}get _step(){return"number"==typeof this.step?[this.step,this.step]:this.step instanceof Array?[...this.step]:[.01,.01]}get _value(){return"number"==typeof this.value?[this.value,this.value]:this.value instanceof Array?[...this.value]:[NaN,NaN]}static get Listeners(){return{focus:"onFocus",contextmenu:"onContextmenu",pointerdown:"onPointerdown",touchstart:["onTouchstart",{passive:!1}]}}constructor(e={}){super(e)}onFocus(){this.addEventListener("blur",this.onBlur),this.addEventListener("keydown",this.onKeydown)}onBlur(){this.removeEventListener("blur",this.onBlur),this.removeEventListener("keydown",this.onKeydown)}onContextmenu(e){e.stopPropagation(),e.preventDefault()}onTouchstart(e){this._rect=this.getBoundingClientRect(),this.addEventListener("touchmove",this.onTouchmove,{passive:!1}),this.addEventListener("touchend",this.onTouchend),this._startX=e.changedTouches[0].clientX,this._startY=e.changedTouches[0].clientY,this._active=this.noscroll?1:-1}onTouchmove(e){const t=Math.abs(this._startX-e.changedTouches[0].clientX),i=Math.abs(this._startY-e.changedTouches[0].clientY);-1===this._active&&(this.vertical?i>5&&i>t&&(this._active=i>t&&t<5?1:0):t>5&&t>i&&(this._active=t>i&&i<5?1:0)),1===this._active&&e.cancelable&&(e.stopPropagation(),e.preventDefault())}onTouchend(){this.removeEventListener("touchmove",this.onTouchmove),this.removeEventListener("touchend",this.onTouchend)}onPointerdown(e){e.stopPropagation(),this._rect=this.getBoundingClientRect(),this.setPointerCapture(e.pointerId),this.addEventListener("pointermove",this.onPointermove),this.addEventListener("pointerup",this.onPointerup),this.addEventListener("pointercancel",this.onPointerup)}onPointermove(e){"touch"!==e.pointerType&&(this._active=1),this.throttle(this.onPointermoveThrottled,e)}onPointerup(e){this.releasePointerCapture(e.pointerId),this.removeEventListener("pointermove",this.onPointermove),this.removeEventListener("pointerup",this.onPointerup),this.removeEventListener("pointercancel",this.onPointerup),this._active=-1}_getPointerCoord(e){const t=this._rect||this.getBoundingClientRect();let i=Math.max(0,Math.min(1,(e.clientX-t.x)/t.width)),n=Math.max(0,Math.min(1,1-(e.clientY-t.y)/t.height));return i=Math.pow(i,this.exponent),n=Math.pow(n,this.exponent),this.vertical?[n,i]:[i,n]}_getValueFromCoord(e){const t=[0,0],i=this._min,n=this._max;return t[0]=i[0]*(1-e[0])+n[0]*e[0],t[1]=i[1]*(1-e[1])+n[1]*e[1],t}onPointermoveThrottled(e){if(1===this._active){document.activeElement!==this&&this.focus();const t=this._getPointerCoord(e),i=this._getValueFromCoord(t);this._inputValue(i)}}_inputValue(e){const t=this._min,i=this._max,n=this._step;if(e[0]=l(e[0],i[0],t[0]),e[1]=l(e[1],i[1],t[1]),e[0]=Math.round(e[0]/n[0])*n[0],e[1]=Math.round(e[1]/n[1])*n[1],e[0]=Number(e[0].toFixed(5)),e[1]=Number(e[1].toFixed(5)),"number"==typeof this.value){if(this.value===e[0])return;this.inputValue(e[0])}else if(this.value instanceof Array){const t=JSON.stringify(this.value);if(this.value[0]=e[0],this.value[1]=e[1],t===JSON.stringify(this.value))return;this.inputValue(this.value),this.dispatchMutation(this.value)}else if("object"==typeof this.value){const t=JSON.stringify(this.value),i=this.value;if(i.x=e[0],i.y=e[1],t===JSON.stringify(this.value))return;this.inputValue(this.value),this.dispatchMutation(this.value)}}inputValue(e){if(this.value!==e||"object"==typeof this.value){const t=this.value;this.setProperty("value",e),this.dispatch("value-input",{value:e,oldValue:t},!1)}}onKeydown(e){const t="number"==typeof this.value;if(e.shiftKey)switch(e.key){case"ArrowLeft":t?this._setDecrease():this._setLeft();break;case"ArrowUp":t?this._setIncrease():this._setUp();break;case"ArrowRight":t?this._setIncrease():this._setRight();break;case"ArrowDown":t?this._setDecrease():this._setDown()}else["ArrowLeft","ArrowRight","ArrowUp","ArrowDown","Tab","Home","End","PageUp","PageDown"].includes(e.key)&&(e.preventDefault(),this.dispatch("io-focus-to",{source:this,command:e.key},!0))}_setIncrease(){const e=this._value,t=this._step;e[0]=e[0]+t[0],e[1]=e[1]+t[1],this._inputValue(e)}_setDecrease(){const e=this._value,t=this._step;e[0]=e[0]-t[0],e[1]=e[1]-t[1],this._inputValue(e)}_setMin(){const e=this._min;this._inputValue(e)}_setMax(){const e=this._max;this._inputValue(e)}_setUp(){const e=this._value,t=this._step;e[0]=e[0]+t[0],this._inputValue(e)}_setDown(){const e=this._value,t=this._step;e[0]=e[0]-t[0],this._inputValue(e)}_setLeft(){const e=this._value,t=this._step;e[1]=e[1]-t[1],this._inputValue(e)}_setRight(){const e=this._value,t=this._step;e[1]=e[1]+t[1],this._inputValue(e)}ready(){this.changed()}valueChanged(){let e=!1;this.value instanceof Array?e=isNaN(this.value[0])||isNaN(this.value[1]):isNaN(this.value)&&(e=!0),this.invalid=e}invalidChanged(){this.invalid?this.setAttribute("aria-invalid","true"):this.removeAttribute("aria-invalid")}valueMutated(){this.changed(),this.dispatchMutation()}changed(){super.changed(),this.setAttribute("aria-valuemin",JSON.stringify(this.min)),this.setAttribute("aria-valuemax",JSON.stringify(this.max)),this.setAttribute("aria-valuestep",JSON.stringify(this.step));const e=this._value;"number"!=typeof e[0]||isNaN(e[0])?this.setAttribute("aria-invalid","true"):this.removeAttribute("aria-invalid"),this.setAttribute("aria-valuenow",JSON.stringify(this.value))}}a([e({type:Number,value:0})],h.prototype,"value"),a([e({type:Number,value:.01})],h.prototype,"step"),a([e({type:Number,value:0})],h.prototype,"min"),a([e({type:Number,value:1})],h.prototype,"max"),a([e({type:Number,value:1})],h.prototype,"exponent"),a([e({value:!1,reflect:!0})],h.prototype,"vertical"),a([e({value:!1,type:Boolean,reflect:!0})],h.prototype,"invalid"),a([t(!1)],h.prototype,"noscroll"),a([t("slider")],h.prototype,"role"),a([t(0)],h.prototype,"tabIndex");var u=Object.defineProperty,v=Object.getOwnPropertyDescriptor,c=(e,t,i,n)=>{for(var o,r=n>1?void 0:n?v(t,i):t,s=e.length-1;s>=0;s--)(o=e[s])&&(r=(n?o(t,i,r):o(r))||r);return n&&r&&u(t,i,r),r};let p=class extends h{_index=0;constructor(e={}){super(e)}_getCoordFromValue(e){const t=[0,0],i=this._min,n=this._max;return t[0]=(e[0]-i[0])/(n[0]-i[0]),t[1]=(e[1]-i[1])/(n[1]-i[1]),t}onPointerdown(e){super.onPointerdown(e);const t=this._value,i=this._getPointerCoord(e),n=this._getCoordFromValue(t);this._index=Math.abs(n[0]-i[0])<Math.abs(n[1]-i[0])?0:1}onPointermoveThrottled(e){if(1===this._active){document.activeElement!==this&&this.focus();const t=this._value,i=this._getPointerCoord(e),n=this._getValueFromCoord(i);0===this._index?this._inputValue([n[0],t[1]]):1===this._index&&this._inputValue([t[0],n[0]])}}static get Frag(){return"\n    varying vec2 vUv;\n\n    void main(void) {\n      // Dimensions\n      vec2 size = uVertical == 1 ? uSize.yx : uSize;\n      vec2 uv = uVertical == 1 ? vUv.yx : vUv;\n      vec2 position = size * vec2(uv.x, uv.y - 0.5);\n      vec2 expPosition = size * vec2(pow(uv.x, uExponent), uv.y - 0.5);\n\n      vec2 valueInRange = (uValue - vec2(uMin)) / (vec2(uMax) - vec2(uMin));\n\n      vec2 valueSign = sign(valueInRange);\n      vec2 expValueInRange = pow(abs(valueInRange), vec2(1./uExponent)) * valueSign;\n      float valueInRangeWidth = valueInRange[1] - valueInRange[0];\n      float valueInRangeCenter = (valueInRange[1] + valueInRange[0]) / 2.0;\n      float signRange = sign(valueInRangeWidth);\n\n      // Colors\n      vec3 finalCol = io_bgColorInput.rgb;\n      vec3 gridCol = io_bgColorLight.rgb;\n      vec3 sliderCol = signRange > 0.0 ? io_bgColorBlue.rgb : io_bgColorRed.rgb;\n      vec3 lineCol1 = io_color.rgb;\n      vec3 lineCol2 = io_bgColor.rgb;\n\n      // Grid\n      float gridSize = size.x / abs((uMax - uMin) / uStep);\n      float gridOffset = mod(uStep - uMin, uStep) / (uMax - uMin) * size.x;\n      float gridShape = paintDerivativeGrid2D(translate(expPosition, gridOffset, 0.0), vec2(gridSize, 0.0), io_borderWidth);\n      finalCol = compose(finalCol, vec4(gridCol, gridShape * 0.5));\n\n      // Slider\n      float sliderShape = rectangle(translate(expPosition, size.x * valueInRangeCenter, 0.0), vec2(size.x * abs(valueInRangeWidth) * 0.5, size.y));\n      finalCol = compose(finalCol, vec4(sliderCol, sliderShape));\n      finalCol = compose(finalCol, vec4(io_bgColorInput.rgb, gridShape * sliderShape * 0.125));\n\n      // Lines\n      float maxPos = expValueInRange[0];\n      float minPos = expValueInRange[1];\n\n      float lineMinShape1 = lineVertical(translate(position, maxPos * size.x, 0.0), io_borderWidth);\n      finalCol = compose(finalCol, vec4(lineCol1, lineMinShape1));\n      float lineMinShape2 = lineVertical(translate(position, maxPos * size.x + io_borderWidth * signRange, 0.0), io_borderWidth);\n      finalCol = compose(finalCol, vec4(lineCol2, lineMinShape2));\n      \n      float lineMaxShape1 = lineVertical(translate(position, minPos * size.x, 0.0), io_borderWidth);\n      finalCol = compose(finalCol, vec4(lineCol1, lineMaxShape1));\n      float lineMaxShape2 = lineVertical(translate(position, minPos * size.x - io_borderWidth * signRange, 0.0), io_borderWidth);\n      finalCol = compose(finalCol, vec4(lineCol2, lineMaxShape2));\n\n      gl_FragColor = vec4(finalCol, 1.0);\n    }\n    "}};c([e({type:Array,value:void 0,init:[0,0]})],p.prototype,"value",2),c([e({type:Number,value:.01})],p.prototype,"step",2),c([e({type:Number,value:0})],p.prototype,"min",2),c([e({type:Number,value:1})],p.prototype,"max",2),p=c([n],p);const d=function(e){return p.vConstructor(e)};var g=Object.defineProperty,m=Object.getOwnPropertyDescriptor,f=(e,t,i,n)=>{for(var o,r=n>1?void 0:n?m(t,i):t,s=e.length-1;s>=0;s--)(o=e[s])&&(r=(n?o(t,i,r):o(r))||r);return n&&r&&g(t,i,r),r};let _=class extends o{static get Style(){return"\n    :host {\n      display: flex;\n    }\n    :host > io-number {\n      flex: 0 0 3.5em;\n    }\n    :host > io-slider-range {\n      margin-left: var(--io_spacing);\n      margin-right: var(--io_spacing);\n      flex: 1 1 3.5em;\n      min-width: 3.5em;\n    }\n    "}constructor(e={}){super(e)}_onNumberSet(e){const t=e.composedPath()[0];t===this.$.number0&&(this.value[0]=e.detail.value),t===this.$.number1&&(this.value[1]=e.detail.value),this.value._isNode||this.dispatchMutation(this.value)}_onSliderSet(e){this.value=e.detail.value,this.value._isNode||this.dispatchMutation(this.value)}ready(){this.changed()}changed(){this.render([r({id:"number0",value:this.value[0],step:this.step,min:this.min,max:this.max,conversion:this.conversion,"@value-input":this._onNumberSet}),d({id:"slider",value:this.value,step:this.step,min:this.min,max:this.max,exponent:this.exponent,"@value-input":this._onSliderSet}),r({id:"number1",value:this.value[1],step:this.step,min:this.min,max:this.max,conversion:this.conversion,"@value-input":this._onNumberSet})])}};f([e({type:Array,init:[0,0]})],_.prototype,"value",2),f([e(.01)],_.prototype,"step",2),f([e(0)],_.prototype,"min",2),f([e(1)],_.prototype,"max",2),f([e(1)],_.prototype,"exponent",2),f([e(1)],_.prototype,"conversion",2),_=f([n],_);const b=function(e){return _.vConstructor(e)};var x,y,C,S,w=Object.defineProperty,P=Object.getOwnPropertyDescriptor,M=e=>{throw TypeError(e)},V=(e,t,i,n)=>{for(var o,r=n>1?void 0:n?P(t,i):t,s=e.length-1;s>=0;s--)(o=e[s])&&(r=(n?o(t,i,r):o(r))||r);return n&&r&&w(t,i,r),r},R=(e,t,i)=>t.has(e)||M("Cannot "+i),N=(e,t,i)=>(R(e,t,"read from private field"),t.get(e)),z=(e,t,i)=>t.has(e)?M("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,i),I=(e,t,i,n)=>(R(e,t,"write to private field"),t.set(e,i),i);let L=class extends i{constructor(e={}){super(e),z(this,x,0),z(this,y,0),z(this,C,-1),z(this,S,null)}static get Style(){return"\n      :host {\n        display: flex;\n        cursor: ew-resize;\n        border: var(--io_border);\n        border-radius: var(--io_borderRadius);\n        border-color: var(--io_borderColorInset);\n        min-height: var(--io_fieldHeight);\n        min-width: var(--io_fieldHeight);\n        flex-grow: 1;\n      }\n      :host[vertical] {\n        cursor: ns-resize;\n        width: var(--io_fieldHeight);\n        min-height: calc(var(--io_fieldHeight) * 5);\n        flex-basis: var(--io_fieldHeight);\n        flex-grow: 0;\n      }\n      :host[invalid] {\n        border-color: var(--io_colorRed);\n      }\n      :host[disabled] {\n        opacity: 0.5;\n      }\n      :host:focus {\n        @apply --io_focus;\n      }\n    "}static get Frag(){return"\n    varying vec2 vUv;\n\n    void main(void) {\n      // Dimensions\n      vec2 size = uVertical == 1 ? uSize.yx : uSize;\n      vec2 uv = uVertical == 1 ? vUv.yx : vUv;\n      vec2 position = size * vec2(uv.x, uv.y - 0.5);\n      vec2 expPosition = size * vec2(pow(uv.x, uExponent), uv.y - 0.5);\n      float valueInRange = (uValue - uMin) / (uMax - uMin);\n      if (uInvalid == 1) valueInRange = 0.0;\n      float valueSign = sign(valueInRange);\n      float expValueInRange = pow(abs(valueInRange), 1./uExponent) * valueSign;\n\n      // Colors\n      vec3 finalCol = io_bgColorInput.rgb;\n      vec3 gridCol = io_bgColorLight.rgb;\n      vec3 sliderCol = io_bgColorBlue.rgb;\n      vec3 lineCol1 = io_color.rgb;\n      vec3 lineCol2 = io_bgColor.rgb;\n\n      // Grid\n      float gridSize = size.x / abs((uMax - uMin) / uStep);\n      float gridOffset = mod(uStep - uMin, uStep) / (uMax - uMin) * size.x;\n      float gridShape = paintDerivativeGrid2D(translate(expPosition, gridOffset, 0.0), vec2(gridSize, 0.0), io_borderWidth);\n      finalCol = compose(finalCol, vec4(gridCol, gridShape * 0.5));\n\n      // Slider\n      float sliderShape = rectangle(expPosition, vec2(size.x * valueInRange, size.y));\n      finalCol = compose(finalCol, vec4(sliderCol, sliderShape));\n      finalCol = compose(finalCol, vec4(io_bgColorInput.rgb, gridShape * sliderShape * 0.125));\n\n      // Lines\n      float lineShape1 = lineVertical(translate(position, expValueInRange * size.x, 0.0), io_borderWidth);\n      finalCol = compose(finalCol, vec4(lineCol1, lineShape1));\n      float lineShape2 = lineVertical(translate(position, expValueInRange * size.x - io_borderWidth, 0.0), io_borderWidth);\n      finalCol = compose(finalCol, vec4(lineCol2, lineShape2));\n\n      gl_FragColor = vec4(finalCol, 1.0);\n    }"}static get Listeners(){return{focus:"onFocus",contextmenu:"onContextmenu",pointerdown:"onPointerdown",touchstart:["onTouchstart",{passive:!1}]}}onFocus(){this.addEventListener("blur",this.onBlur),this.addEventListener("keydown",this.onKeydown)}onBlur(){this.removeEventListener("blur",this.onBlur),this.removeEventListener("keydown",this.onKeydown)}onContextmenu(e){e.preventDefault()}onTouchstart(e){I(this,S,this.getBoundingClientRect()),this.addEventListener("touchmove",this.onTouchmove,{passive:!1}),this.addEventListener("touchend",this.onTouchend),I(this,x,e.changedTouches[0].clientX),I(this,y,e.changedTouches[0].clientY),I(this,C,this.noscroll?1:-1)}onTouchmove(e){const t=Math.abs(N(this,x)-e.changedTouches[0].clientX),i=Math.abs(N(this,y)-e.changedTouches[0].clientY);-1===N(this,C)&&(this.vertical?i>5&&i>t&&I(this,C,i>t&&t<5?1:0):t>5&&t>i&&I(this,C,t>i&&i<5?1:0)),1===N(this,C)&&e.cancelable&&e.preventDefault()}onTouchend(){this.removeEventListener("touchmove",this.onTouchmove),this.removeEventListener("touchend",this.onTouchend)}onPointerdown(e){e.stopPropagation(),I(this,S,this.getBoundingClientRect()),this.setPointerCapture(e.pointerId),this.addEventListener("pointermove",this.onPointermove),this.addEventListener("pointerup",this.onPointerup),this.addEventListener("pointercancel",this.onPointerup)}onPointermove(e){"touch"!==e.pointerType&&I(this,C,1),this.throttle(this.onPointermoveThrottled,e)}onPointerup(e){this.releasePointerCapture(e.pointerId),this.removeEventListener("pointermove",this.onPointermove),this.removeEventListener("pointerup",this.onPointerup),this.removeEventListener("pointercancel",this.onPointerup),I(this,C,-1)}_getPointerCoord(e){const t=N(this,S)||this.getBoundingClientRect(),i=Math.max(0,Math.min(1,(e.clientX-t.x)/t.width)),n=Math.max(0,Math.min(1,1-(e.clientY-t.y)/t.height));return Math.pow(this.vertical?n:i,this.exponent)}_getValueFromCoord(e){return this.min*(1-e)+this.max*e}onPointermoveThrottled(e){if(1===N(this,C)){document.activeElement!==this&&this.focus();const t=this._getPointerCoord(e),i=this._getValueFromCoord(t);this._inputValue(i)}}_incrementValue(e){this._inputValue(this.value+e)}_inputValue(e){var t,i,n;t=e,i=this.max,e=(n=this.min)>i?Math.min(Math.max(t,i),n):Math.min(Math.max(t,n),i),e=Math.round(e/this.step)*this.step,e=Number(e.toFixed(5)),isNaN(e)||this.value===e||this.inputValue(e)}inputValue(e){if(this.value!==e||"object"==typeof this.value){const t=this.value;this.setProperty("value",e),this.dispatch("value-input",{value:e,oldValue:t},!1)}}onKeydown(e){const t=this.max<this.min;if(e.shiftKey)switch(e.key){case"ArrowLeft":case"ArrowDown":this._incrementValue(t?this.step:-this.step);break;case"ArrowUp":case"ArrowRight":this._incrementValue(t?-this.step:this.step);break;case"Home":e.preventDefault(),this._inputValue(this.min);break;case"End":e.preventDefault(),this._inputValue(this.max);break;case"PageUp":e.preventDefault(),this._incrementValue(t?-this.step:this.step);break;case"PageDown":e.preventDefault(),this._incrementValue(t?this.step:-this.step)}else["ArrowLeft","ArrowRight","ArrowUp","ArrowDown","Tab","Home","End","PageUp","PageDown"].includes(e.key)&&(e.preventDefault(),this.dispatch("io-focus-to",{source:this,command:e.key},!0))}ready(){this.valueChanged(),this.minChanged(),this.maxChanged(),this.changed()}invalidChanged(){this.ariaInvalid=String(this.invalid)}disabledChanged(){this.inert=this.disabled,this.ariaDisabled=String(this.disabled)}valueChanged(){this.invalid=isNaN(this.value),this.ariaValueNow=String(this.value)}minChanged(){this.ariaValueMin=String(this.min)}maxChanged(){this.ariaValueMax=String(this.max)}};x=new WeakMap,y=new WeakMap,C=new WeakMap,S=new WeakMap,V([e(0)],L.prototype,"value",2),V([e(.01)],L.prototype,"step",2),V([e(0)],L.prototype,"min",2),V([e(1)],L.prototype,"max",2),V([e(1)],L.prototype,"exponent",2),V([e({value:!1,reflect:!0})],L.prototype,"vertical",2),V([e({value:!1,type:Boolean,reflect:!0})],L.prototype,"invalid",2),V([e({value:!1,type:Boolean,reflect:!0})],L.prototype,"disabled",2),V([t(!1)],L.prototype,"noscroll",2),V([t("slider")],L.prototype,"role",2),V([t(0)],L.prototype,"tabIndex",2),L=V([n],L);const E=function(e){return L.vConstructor(e)};var A=Object.defineProperty,D=Object.getOwnPropertyDescriptor,T=(e,t,i,n)=>{for(var o,r=n>1?void 0:n?D(t,i):t,s=e.length-1;s>=0;s--)(o=e[s])&&(r=(n?o(t,i,r):o(r))||r);return n&&r&&A(t,i,r),r};let k=class extends o{static get Style(){return"\n    :host {\n      display: flex;\n    }\n    :host > io-number {\n      flex: 0 0 3.5em;\n      margin-right: var(--io_spacing);\n    }\n    :host > io-slider {\n      flex: 1 1 3em;\n      min-width: 3em;\n    }\n    "}constructor(e={}){super(e)}_onNumberSet(e){this.value=e.detail.value,this.dispatch("value-input",e.detail,!1)}_onSliderSet(e){e.detail.value=e.detail.value/this.conversion,this.value=e.detail.value,this.dispatch("value-input",e.detail,!1)}ready(){this.changed()}changed(){this.render([r({id:"number",value:this.value,step:this.step,min:this.min*this.conversion,max:this.max*this.conversion,conversion:this.conversion,"@value-input":this._onNumberSet}),E({id:"slider",value:this.value*this.conversion,step:this.step*this.conversion,min:this.min*this.conversion,max:this.max*this.conversion,exponent:this.exponent,"@value-input":this._onSliderSet})])}};T([e({value:0})],k.prototype,"value",2),T([e(.01)],k.prototype,"step",2),T([e(0)],k.prototype,"min",2),T([e(1)],k.prototype,"max",2),T([e(1)],k.prototype,"exponent",2),T([e(1)],k.prototype,"conversion",2),k=T([n],k);const O=function(e){return k.vConstructor(e)};var W=Object.defineProperty,F=Object.getOwnPropertyDescriptor,U=(e,t,i,n)=>{for(var o,r=n>1?void 0:n?F(t,i):t,s=e.length-1;s>=0;s--)(o=e[s])&&(r=(n?o(t,i,r):o(r))||r);return n&&r&&W(t,i,r),r};let B=class extends h{static get Style(){return"\n      :host {\n        cursor: crosshair;\n        border: var(--io_border);\n        border-radius: var(--io_borderRadius);\n        border-color: var(--io_borderColorInset);\n        flex-grow: 0;\n      }\n      :host:not([vertical]),\n      :host[vertical] {\n        min-width: calc(var(--io_fieldHeight) * 5);\n        min-height: calc(var(--io_fieldHeight) * 5);\n        cursor: crosshair;\n      }\n    "}constructor(e={}){super(e)}static get GlUtils(){return"\n      vec3 paintKnob(vec3 dstCol, vec2 p, vec2 center, vec3 color) {\n        vec4 finalCol = vec4(0.0);\n        vec2 pCenter = translate(p, center);\n        float radius = io_fieldHeight * 0.25;\n        float stroke = io_borderWidth;\n        float strokeShape = circle(pCenter, radius + stroke + stroke);\n        float fillShape   = circle(pCenter, radius + stroke);\n        float colorShape  = circle(pCenter, radius);\n        finalCol = mix(io_colorStrong, finalCol, strokeShape);\n        finalCol = mix(vec4(io_bgColor.rgb, 1.0), finalCol, fillShape);\n        finalCol = mix(vec4(color, 1.0), finalCol, colorShape);\n        return compose(dstCol, finalCol);\n      }\n    "}static get Frag(){return"\n    varying vec2 vUv;\n\n    void main(void) {\n      // Dimensions\n      vec2 size = uVertical == 1 ? uSize.yx : uSize;\n      vec2 uv = uVertical == 1 ? vUv.yx : vUv;\n      vec2 position = size * (uv - vec2(0.5));\n\n      // Colors\n      vec3 finalCol = io_bgColorInput.rgb;\n      vec3 gridCol = io_bgColorLight.rgb;\n      vec3 sliderCol = io_bgColorBlue.rgb;\n      vec3 lineCol1 = io_color.rgb;\n      vec3 lineCol2 = io_bgColor.rgb;\n\n      // Grid\n      vec2 gridSize = size / abs((uMax - uMin) / uStep);\n      vec2 gridOffset = (uMax + uMin) / (uMax - uMin) * size / 2.;\n      vec2 gridPosition = translate(position, -gridOffset);\n      float gridShape = paintDerivativeGrid2D(gridPosition, gridSize, io_borderWidth);\n      finalCol = compose(finalCol, vec4(gridCol, gridShape * 0.5));\n\n      // Axis\n      float axisShape = lineCross2d(gridPosition, io_borderWidth);\n      finalCol = compose(finalCol, vec4(gridCol, axisShape));\n\n      // Knob\n      vec2 knobPos = uValue / (uMax - uMin) * size;\n      finalCol = paintKnob(finalCol, gridPosition, knobPos, sliderCol);\n\n      gl_FragColor = vec4(finalCol, 1.0);\n    }"}};U([e({type:Array,value:void 0,init:[0,0]})],B.prototype,"value",2),U([e({type:Array,value:void 0,init:[.01,.01]})],B.prototype,"step",2),U([e({type:Array,value:void 0,init:[-1,-1]})],B.prototype,"min",2),U([e({type:Array,value:void 0,init:[1,1]})],B.prototype,"max",2),U([t(!0)],B.prototype,"noscroll",2),B=U([n],B);const H=function(e){return B.vConstructor(e)};export{k as IoNumberSlider,_ as IoNumberSliderRange,L as IoSlider,B as IoSlider2d,h as IoSliderBase,p as IoSliderRange,O as ioNumberSlider,b as ioNumberSliderRange,E as ioSlider,H as ioSlider2d,d as ioSliderRange};
//# sourceMappingURL=index.js.map
