{"version":3,"file":"index.js","sources":["../src/elements/IoDivider.ts","../src/nodes/Tab.ts","../src/elements/IoTabDropMarker.ts","../src/elements/IoTabDragIcon.ts","../src/elements/IoTab.ts","../src/elements/IoTabsHamburgerMenuSingleton.ts","../src/elements/IoTabsHamburger.ts","../src/elements/IoTabs.ts","../src/elements/IoPanel.ts","../src/nodes/Panel.ts","../src/nodes/Split.ts","../src/elements/IoSplit.ts","../src/elements/IoLayout.ts"],"sourcesContent":["import { Register, ReactiveProperty, IoElement, IoElementProps, Property, ListenerDefinition } from '@io-gui/core'\n\nexport type IoDividerProps = IoElementProps & {\n  orientation: 'vertical' | 'horizontal'\n  index: number\n}\n\n@Register\nexport class IoDivider extends IoElement {\n  static get Style() {\n    return /* css */`\n      :host {\n        position: relative;\n        flex: 0 0 var(--io_spacing3);\n        background-color: var(--io_colorLight);\n        border-style: solid;\n        border-width: 0 var(--io_borderWidth);\n        border-color: var(--io_color);\n        cursor: col-resize;\n        @apply --unselectable;\n      }\n      :host[pressed] {\n        border-color: var(--io_borderColorBlue);\n        background-color: var(--io_bgColorBlue);\n      }\n      :host[pressed]:before,\n      :host[pressed]:after {\n        background-color: var(--io_colorWhite);\n      }\n      :host:before,\n      :host:after {\n        content: '';\n        position: absolute;\n        top: 50%;\n        left: 50%;\n        z-index: 1;\n        opacity: 0;\n      }\n      :host:before {\n        width: var(--io_fieldHeight);\n        height: var(--io_spacing);\n        background-color: var(--io_color);\n        transform: translate(-50%, -50%) rotate(90deg);\n        border-radius: var(--io_spacing);\n        opacity: 0.5;\n      }\n      :host[orientation='vertical']:before {\n        transform: translate(-50%, -50%);\n      }\n      :host:after {\n        width: var(--io_fieldHeight);\n        height: var(--io_fieldHeight);\n        background-color: var(--io_color);\n        transform: translate(-50%, -50%) rotate(45deg);\n        border-radius: 25%;\n      }\n      :host[orientation='vertical'] {\n        cursor: row-resize;\n        border-width: var(--io_borderWidth) 0;\n      }\n      :host:hover {\n        border-style: dashed;\n      }\n      :host:hover:before {\n        opacity: 1;\n      }\n    `\n  }\n\n  @ReactiveProperty({value: false, type: Boolean, reflect: true})\n  declare pressed: boolean\n\n  @ReactiveProperty({value: 'horizontal', type: String, reflect: true})\n  declare orientation: 'horizontal' | 'vertical'\n\n  @Property(Number)\n  declare index: number\n\n  static get Listeners() {\n    return {\n      'pointerdown': 'onPointerdown',\n      'touchstart': ['onTouchstart', {passive: false}] as ListenerDefinition,\n    }\n  }\n\n  constructor(args: IoDividerProps) { super(args) }\n\n  onPointerdown(event: PointerEvent) {\n    event.preventDefault()\n    event.stopPropagation()\n    this.addEventListener('pointermove', this.onPointermove)\n    this.addEventListener('pointerleave', this.onPointerleave)\n    this.addEventListener('pointerup', this.onPointerup)\n    this.setPointerCapture(event.pointerId)\n    this.pressed = true\n  }\n  onPointermove(event: PointerEvent) {\n    event.preventDefault()\n    this.dispatch('io-divider-move', {\n      index: this.index,\n      clientX: event.clientX,\n      clientY: event.clientY,\n    }, true)\n  }\n  onPointerleave(event: PointerEvent) {\n    event.preventDefault()\n    this.removeEventListener('pointermove', this.onPointermove)\n    this.removeEventListener('pointerleave', this.onPointerleave)\n    this.removeEventListener('pointerup', this.onPointerup)\n    this.pressed = false\n  }\n  onPointerup(event: PointerEvent) {\n    event.preventDefault()\n    this.removeEventListener('pointermove', this.onPointermove)\n    this.removeEventListener('pointerleave', this.onPointerleave)\n    this.removeEventListener('pointerup', this.onPointerup)\n    this.releasePointerCapture(event.pointerId)\n    this.pressed = false\n    this.dispatch('io-divider-move-end', {\n      index: this.index,\n      clientX: event.clientX,\n      clientY: event.clientY,\n    }, true)\n  }\n  onTouchstart(event: TouchEvent) {\n    this.addEventListener('touchmove', this.onTouchmove, {passive: false})\n    this.addEventListener('touchend', this.onTouchend)\n  }\n  onTouchmove(event: TouchEvent) {\n    event.preventDefault()\n  }\n  onTouchend() {\n    this.removeEventListener('touchmove', this.onTouchmove)\n    this.removeEventListener('touchend', this.onTouchend)\n  }\n}\nexport const ioDivider = function(arg0: IoDividerProps) {\n  return IoDivider.vConstructor(arg0)\n}\n","import { Node, ReactiveProperty, Register } from '@io-gui/core'\n\nexport type TabProps = {\n  id: string\n  label?: string\n  icon?: string\n  selected?: boolean\n}\n\n@Register\nexport class Tab extends Node {\n\n  @ReactiveProperty({type: String, value: ''})\n  declare id: string\n\n  @ReactiveProperty({type: String, value: ''})\n  declare label: string\n\n  @ReactiveProperty({type: String, value: ''})\n  declare icon: string\n\n  @ReactiveProperty({type: Boolean, value: false})\n  declare selected: boolean\n\n  constructor(args: TabProps) {\n    args.label = args.label ?? args.id\n    super(args)\n  }\n  toJSON(): TabProps {\n    return {\n      id: this.id,\n      label: this.label,\n      icon: this.icon,\n      selected: this.selected,\n    }\n  }\n  fromJSON(json: TabProps) {\n    this.setProperties({\n      id: json.id,\n      label: json.label ?? json.id,\n      icon: json.icon ?? '',\n      selected: json.selected ?? false,\n    })\n    return this\n  }\n}","import { Register, ReactiveProperty, IoElement, IoElementProps, ThemeSingleton } from '@io-gui/core'\nimport { IoTab } from './IoTab.js'\nimport { SplitDirection } from '../nodes/Split.js'\nimport { IoPanel } from './IoPanel.js'\n\n@Register\nclass IoTabDropMarker extends IoElement {\n  static get Style() {\n    return /* css */`\n      :host {\n        position: fixed;\n        height: calc(var(--io_fieldHeight) - var(--io_borderWidth) - var(--io_borderRadius));\n        width: var(--io_spacing);\n        background-color: var(--io_bgColorBlue);\n        margin-bottom: var(--io_borderWidth);\n        z-index: 100000;\n        display: none;\n      }\n      :host:not([dropindex=\"-1\"]) {\n        display: block;\n      }\n      :host:not([splitdirection=\"none\"]) {\n        display: block;\n        opacity: 0.25;\n      }\n    `\n  }\n\n  @ReactiveProperty(null)\n  declare dropTarget: IoPanel | null\n\n  @ReactiveProperty({type: String, value: 'none', reflect: true})\n  declare splitDirection: SplitDirection\n\n  @ReactiveProperty({type: Number, value: -1, reflect: true})\n  declare dropIndex: number\n\n  constructor(args: IoElementProps = {}) { super(args) }\n\n  changed() {\n    if (this.dropTarget && this.dropIndex !== -1) {\n      const tabs = this.dropTarget.querySelectorAll('io-tab')\n      this.style.width = ''\n      this.style.height = ''\n      if (tabs.length === 0) {\n        const rect = this.dropTarget.getBoundingClientRect()\n        this.style.top = `${rect.top + ThemeSingleton.borderRadius}px`\n        this.style.left = `${rect.left}px`\n      } else if (this.dropIndex > tabs.length - 1) {\n        const tab = tabs[tabs.length - 1] as IoTab\n        const rect = tab.getBoundingClientRect()\n        this.style.top = `${rect.top + ThemeSingleton.borderRadius}px`\n        this.style.left = `${rect.left + rect.width}px`\n      } else {\n        const tab = tabs[this.dropIndex] as IoTab\n        const rect = tab.getBoundingClientRect()\n        this.style.top = `${rect.top + ThemeSingleton.borderRadius}px`\n        this.style.left = `${rect.left - ThemeSingleton.spacing}px`\n      }\n    } else if (this.dropTarget && this.splitDirection !== 'none') {\n      const rect = this.dropTarget.getBoundingClientRect()\n      if (this.splitDirection === 'top') {\n        this.style.top = `${rect.top}px`\n        this.style.left = `${rect.left}px`\n        this.style.width = `${rect.width}px`\n        this.style.height = `${rect.height / 2}px`\n      } else if (this.splitDirection === 'bottom') {\n        this.style.top = `${rect.top + rect.height / 2}px`\n        this.style.left = `${rect.left}px`\n        this.style.width = `${rect.width}px`\n        this.style.height = `${rect.height / 2}px`\n      } else if (this.splitDirection === 'left') {\n        this.style.top = `${rect.top}px`\n        this.style.left = `${rect.left}px`\n        this.style.width = `${rect.width / 2}px`\n        this.style.height = `${rect.height}px`\n      } else if (this.splitDirection === 'right') {\n        this.style.top = `${rect.top}px`\n        this.style.left = `${rect.left + rect.width / 2}px`\n        this.style.width = `${rect.width / 2}px`\n        this.style.height = `${rect.height}px`\n      } else if (this.splitDirection === 'center') {\n        this.style.top = `${rect.top}px`\n        this.style.left = `${rect.left}px`\n        this.style.width = `${rect.width}px`\n        this.style.height = `${rect.height}px`\n      }\n    }\n  }\n}\n\nexport const tabDropMarkerSingleton = new IoTabDropMarker()\nsetTimeout(() => {\n  document.body.appendChild(tabDropMarkerSingleton as HTMLElement)\n}, 100)\n","import { Register, ReactiveProperty, Property, span } from '@io-gui/core'\nimport { IoField, IoFieldProps } from '@io-gui/inputs'\nimport { ioIcon } from '@io-gui/icons'\nimport { tabDropMarkerSingleton } from './IoTabDropMarker.js'\nimport { Tab } from '../nodes/Tab.js'\nimport { SplitDirection } from '../nodes/Split.js'\nimport { IoPanel } from './IoPanel.js'\n\n@Register\nclass IoTabDragIcon extends IoField {\n  static get Style() {\n    return /* css */`\n      :host {\n        display: none;\n        position: fixed;\n        top: 0;\n        left: 0;\n        transform: translate(-50%, -50%);\n        z-index: 100000;\n        pointer-events: none;\n        border-color: var(--io_borderColorLight);\n        background-color: var(--io_bgColorLight) !important;\n        opacity: 0.75;\n      }\n      :host[dragging] {\n        display: flex;\n      }\n      :host > * {\n        display: inline-block;\n        white-space: nowrap;\n        padding: 0 var(--io_spacing);\n      }\n      :host > .label {}\n    `\n  }\n\n  @ReactiveProperty({type: Boolean, reflect: true})\n  declare dragging: boolean\n\n  @ReactiveProperty(null)\n  declare tab: Tab | null\n\n  @ReactiveProperty(null)\n  declare dropSource: IoPanel | null\n\n  @ReactiveProperty(null)\n  declare dropTarget: IoPanel | null\n\n  @ReactiveProperty({type: String, value: 'none', reflect: true})\n  declare splitDirection: SplitDirection\n\n  @ReactiveProperty({type: Number, value: -1})\n  declare dropIndex: number\n\n  @Property(-1)\n  declare tabIndex: number\n\n  constructor(args: IoFieldProps = {}) { super(args) }\n\n  changed() {\n    tabDropMarkerSingleton.setProperties({\n      dropTarget: this.dropTarget,\n      splitDirection: this.splitDirection,\n      dropIndex: this.dropIndex,\n    })\n    this.render([\n      ioIcon({value: this.tab?.icon || ' '}),\n      span({class: 'label'}, this.tab?.label || ''),\n    ])\n  }\n}\n\nexport const tabDragIconSingleton = new IoTabDragIcon()\ndocument.body.appendChild(tabDragIconSingleton as HTMLElement)\n","import { Register, ReactiveProperty, span, ThemeSingleton } from '@io-gui/core'\nimport { IoField, IoFieldProps, ioField, ioString } from '@io-gui/inputs'\nimport { IoContextEditorSingleton } from '@io-gui/editors'\nimport { IconsetDB, ioIcon } from '@io-gui/icons'\nimport { MenuOptionProps, MenuOption, ioOptionSelect } from '@io-gui/menus'\nimport { IoTabs } from './IoTabs.js'\nimport { IoPanel } from './IoPanel.js'\nimport { Tab } from '../nodes/Tab.js'\nimport { tabDragIconSingleton } from './IoTabDragIcon.js'\n\nconst icons = []\nfor (const set of Object.keys(IconsetDB)) {\n  for (const icon of Object.keys(IconsetDB[set])) {\n    const id = `${set}:${icon}`\n    icons.push({value: id, label: icon, icon: id})\n  }\n}\n\n// TODO: consider initializing icon options when needed.\nconst iconOptions = ioOptionSelect({label: 'Select', option: new MenuOption({id: 'iconselect', options: icons as MenuOptionProps[]})})\n\nexport type IoTabProps = IoFieldProps & {\n  tab: Tab\n}\n\nlet _dragStartX = 0\nlet _dragStartY = 0\n\n// TODO: fix and improve keyboard navigation in all cases.\n@Register\nexport class IoTab extends IoField {\n  static get Style() {\n    return /* css */`\n      :host {\n        display: flex;\n        position: relative;\n        height: inherit;\n        min-height: inherit;\n        /* TODO: use vars for this */\n        min-width: calc(var(--io_fieldHeight) * 1.25);\n        margin: 0;\n        margin-right: var(--io_spacing);\n        background-color: var(--io_bgColor) !important;\n        border-bottom-left-radius: 0;\n        border-bottom-right-radius: 0;\n        border-color: var(--io_borderColorLight);\n        padding-right: var(--io_lineHeight);\n      }\n      :host[pressed] {\n        border-color: unset !important;\n        box-shadow: unset !important;\n      }\n      :host[selected] {\n        color: var(--io_colorStrong);\n        background-color: var(--io_bgColorLight) !important;\n        border-color: var(--io_borderColorStrong);\n        border-bottom-color: var(--io_bgColorLight);\n        z-index: 1;\n      }\n      :host[overflow]:not([selected]) > .io-close-icon {\n        display: none;\n      }\n      :host[selected]:focus {\n        color: var(--io_colorWhite);\n        z-index: 2;\n      }\n      :host > .io-icon:not([value=' ']) {\n        margin: 0 var(--io_spacing2) 0 0;\n      }\n      :host > .marker {\n        position: absolute;\n        top: 0;\n        left: 0;\n        height: 100%;\n        background-color: var(--io_bgColorBlue);\n        border-bottom-right-radius: var(--io_borderRadius);\n      }\n      :host > span {\n        padding: 0 var(--io_spacing);\n        overflow: hidden; \n        text-overflow: ellipsis !important;\n      }\n      :host > * {\n        pointer-events: none;\n        display: inline-block;\n        white-space: nowrap;\n      }\n      :host:not(:hover) > .io-close-icon {\n        opacity: 0;\n        transform: scale(0.2);\n        transition: transform 0.2s cubic-bezier(0.4, 0, 0.2, 1), opacity linear 0.2s;\n      }\n      :host:hover > .io-close-icon {\n        opacity: 1;\n        transform: scale(0.4);\n        transition: transform 0.2s cubic-bezier(0.4, 0, 0.2, 1), opacity linear 0.2s;\n      }\n      :host > .io-close-icon {\n        position: absolute;\n        right: var(--io_spacing);\n        top: var(--io_spacing);\n        pointer-events: inherit;\n        background: linear-gradient(to right, transparent 0%, var(--io_bgColor) 25%);\n      }\n      :host[selected] > .io-close-icon {\n        background: linear-gradient(to right, transparent 0%, var(--io_bgColorLight) 25%);\n      }\n      :host > .io-close-icon:hover {\n        transform: scale(0.5);\n        fill: var(--io_colorStrong);\n        stroke: var(--io_colorStrong);\n      }\n    `\n  }\n\n  @ReactiveProperty({type: Tab})\n  declare tab: Tab\n\n  @ReactiveProperty({type: Boolean, reflect: true})\n  declare overflow: boolean\n\n  static get Listeners() {\n    return {\n      'click': 'preventDefault',\n      'contextmenu': 'preventDefault',\n    }\n  }\n\n  constructor(args: IoTabProps) { super(args) }\n\n  onResized() {\n    const span = this.querySelector('span')!\n    this.overflow = span.scrollWidth > span.clientWidth\n  }\n  onTouchmove(event: TouchEvent) {\n    event.preventDefault()\n  }\n  preventDefault(event: Event) {\n    event.stopPropagation()\n    event.preventDefault()\n  }\n  onPointerdown(event: PointerEvent) {\n    event.preventDefault()\n    event.stopPropagation()\n    this.setPointerCapture(event.pointerId)\n    _dragStartX = event.clientX\n    _dragStartY = event.clientY\n    super.onPointerdown(event)\n    if (event.buttons === 2) {\n      this.expandContextEditor()\n    } else {\n      this.focus()\n    }\n  }\n  onPointermove(event: PointerEvent) {\n    event.preventDefault()\n    if (event.buttons !== 1) return\n    const panel = this.parentElement!.parentElement as IoPanel\n    if (!tabDragIconSingleton.dragging) {\n      const dx = Math.abs(_dragStartX - event.clientX)\n      const dy = Math.abs(_dragStartY - event.clientY)\n      if (dx > 10 || dy > 10) {\n        tabDragIconSingleton.setProperties({\n          tab: this.tab,\n          dragging: true,\n          dropSource: panel,\n          dropTarget: null,\n          dropIndex: -1,\n        })\n        tabDragIconSingleton.style.top = event.clientY + 'px'\n        tabDragIconSingleton.style.left = event.clientX + 'px'\n      }\n      return\n    }\n    tabDragIconSingleton.style.top = event.clientY + 'px'\n    tabDragIconSingleton.style.left = event.clientX + 'px'\n\n    const x = event.clientX\n    const y = event.clientY\n    const m = ThemeSingleton.spacing\n    const tabsContainers = document.querySelectorAll('io-tabs')\n    for (let i = 0; i < tabsContainers.length; i++) {\n      const tabsContainer = tabsContainers[i] as IoTabs\n      const targetPanel = tabsContainer.parentElement as IoPanel\n      const tcr = tabsContainer.getBoundingClientRect()\n      if (y >= tcr.top && y <= tcr.bottom && x >= tcr.left && x <= tcr.right) {\n        const tabs = tabsContainer.querySelectorAll('io-tab')\n        if (tabs.length === 0) {\n          tabDragIconSingleton.setProperties({\n            dropTarget: targetPanel,\n            splitDirection: 'none',\n            dropIndex: 0,\n          })\n          return\n        }\n        for (let j = 0; j < tabs.length; j++) {\n          const tab = tabs[j] as IoTab\n          const tr = tab.getBoundingClientRect()\n          const isLast = j === tabs.length - 1\n          // TODO: consider hovering empty tab space.\n          if (y >= tr.top - m && y <= tr.bottom + m && x >= tr.left - m && (x <= tr.right + m || isLast && x <= tcr.right)) {\n            const side = x < tr.left + tr.width / 2 ? 'left' : 'right'\n            const dropIndex = side === 'left' ? j : j + 1\n            tabDragIconSingleton.setProperties({\n              dropTarget: targetPanel,\n              splitDirection: 'none',\n              dropIndex: dropIndex,\n            })\n            return\n          }\n        }\n      }\n    }\n\n    const panels = document.querySelectorAll('io-panel')\n    for (let i = 0; i < panels.length; i++) {\n      const targetPanel = panels[i] as IoPanel\n      const pr = targetPanel.getBoundingClientRect()\n      if (y >= pr.top && y <= pr.bottom && x >= pr.left && x <= pr.right) {\n        // get xy relative to panel center\n        const rx = (x - pr.left - pr.width / 2) / pr.width * 2\n        const ry = (y - pr.top - pr.height / 2) / pr.height * 2\n        let direction = 'none'\n\n        if (Math.abs(rx) < 0.5 && Math.abs(ry) < 0.5) {\n          direction = 'center'\n        } else if (ry > 0 && Math.abs(ry) > Math.abs(rx)) {\n          direction = 'bottom'\n        } else if (ry < 0 && Math.abs(ry) > Math.abs(rx)) {\n          direction = 'top'\n        } else if (rx > 0 && Math.abs(rx) > Math.abs(ry)) {\n          direction = 'right'\n        } else if (rx < 0 && Math.abs(rx) > Math.abs(ry)) {\n          direction = 'left'\n        }\n\n        tabDragIconSingleton.setProperties({\n          dropTarget: targetPanel,\n          splitDirection: direction,\n          dropIndex: -1,\n        })\n        return\n      }\n    }\n  }\n  onPointerup(event: PointerEvent) {\n    event.preventDefault()\n    super.onPointerup(event)\n    this.releasePointerCapture(event.pointerId)\n    if (tabDragIconSingleton.dragging) {\n      const source = tabDragIconSingleton.dropSource\n      const target = tabDragIconSingleton.dropTarget\n      const index = tabDragIconSingleton.dropIndex\n      const direction = tabDragIconSingleton.splitDirection\n\n      if (target && index !== -1) {\n        if (source && source !== target) {\n          source.removeTab(this.tab)\n        }\n        target.addTab(this.tab, index)\n      } else if (source && target && direction !== 'none') {\n        target.moveTabToSplit(source, this.tab, direction)\n      }\n\n      tabDragIconSingleton.setProperties({\n        dragging: false,\n        dropSource: null,\n        dropTarget: null,\n        splitDirection: 'none',\n        dropIndex: -1,\n      })\n    } else {\n      this.onClick()\n    }\n  }\n  onPointercancel(event: PointerEvent) {\n    event.preventDefault()\n    event.stopPropagation()\n    super.onPointercancel(event)\n    tabDragIconSingleton.setProperties({\n      dragging: false,\n      dropSource: null,\n      dropTarget: null,\n      splitDirection: 'none',\n      dropIndex: -1,\n    })\n  }\n  onPointerleave(event: PointerEvent) {\n    event.preventDefault()\n    event.stopPropagation()\n  }\n  onClick() {\n    this.dispatch('io-edit-tab', {tab: this.tab, key: 'Select'}, true)\n  }\n  onDeleteClick() {\n    this.dispatch('io-edit-tab', {tab: this.tab, key: 'Backspace'}, true)\n  }\n  expandContextEditor() {\n    IoContextEditorSingleton.expand({\n      source: this,\n      direction: 'down',\n      value: this.tab,\n      properties: ['id', 'label', 'icon'],\n      orientation: 'horizontal',\n      config: new Map([\n        [Object, [\n          ['id', ioField({inert: true})],\n          ['label', ioString({live: true})],\n          ['icon', iconOptions],\n        ]],\n      ]),\n    })\n  }\n  onKeydown(event: KeyboardEvent) {\n    if (event.shiftKey && ['Backspace', 'ArrowLeft', 'ArrowRight', 'ArrowUp', 'ArrowDown', 'Home', 'End'].includes(event.key)) {\n      event.preventDefault()\n      this.dispatch('io-edit-tab', {tab: this.tab, key: event.key}, true)\n    } else if (event.shiftKey && event.key === 'Enter') {\n      this.expandContextEditor()\n    } else {\n      super.onKeydown(event)\n    }\n  }\n  tabMutated() {\n    this.changed()\n  }\n  changed() {\n    this.setAttribute('selected', this.tab.selected)\n    this.render([\n      this.tab.selected ? span({class: 'marker'}) : null,\n      ioIcon({class: 'io-icon', value: this.tab.icon || ' '}),\n      span({class: 'label'}, this.tab.label),\n      ioIcon({value: 'io:close', size: 'small', class: 'io-close-icon', '@click': this.onDeleteClick, '@pointerdown': this.preventDefault}),\n    ])\n  }\n}\n\nexport const ioTab = function(arg0: IoTabProps) {\n  return IoTab.vConstructor(arg0)\n}\n","import { IoOverlaySingleton, NudgeDirection, NodeArray, VDOMElement, IoElement, IoElementProps, Register, ReactiveProperty, nudge, ListenerDefinition } from '@io-gui/core'\nimport { Tab } from '../nodes/Tab.js'\nimport { ioTab, IoTab } from './IoTab.js'\n\nexport interface IoTabsHamburgerMenuExpandProps {\n  source: HTMLElement\n  direction: NudgeDirection\n  tabs: NodeArray<Tab>\n  onEditTab: (event: CustomEvent) => void\n}\n\n@Register\nclass IoTabsHamburgerMenu extends IoElement {\n  static vConstructor: (arg0?: IoElementProps | Array<VDOMElement | null> | string, arg1?: Array<VDOMElement | null> | string) => VDOMElement\n  static get Style() {\n    return /* css */`\n      :host {\n        display: flex;\n        flex-direction: column;\n        border: var(--io_border);\n        border-radius: calc(var(--io_borderRadius) + var(--io_spacing2));\n        border-color: var(--io_borderColorOutset);\n        background-color: var(--io_bgColorLight);\n        padding: calc(var(--io_spacing) + var(--io_borderWidth));\n        position: absolute;\n        overflow-y: auto;\n        box-shadow: 1px 1px 16px var(--io_shadowColor),\n                    1px 1px 8px var(--io_shadowColor), \n                    1px 1px 4px var(--io_shadowColor);\n      }\n      :host:not([expanded]) {\n        visibility: hidden;\n        opacity: 0;\n      }\n      :host > io-tab {\n        border-color: transparent !important;\n        background-color: var(--io_bgColorLight) !important;\n        border-radius: var(--io_borderRadius) !important;\n      }\n      :host > io-tab[selected] {\n        background-color: var(--io_bgColor) !important;\n      }\n      :host > io-tab > .marker {\n        border-radius: 0;\n      }\n    `\n  }\n\n  @ReactiveProperty({type: NodeArray, init: 'this'})\n  declare private tabs: NodeArray<Tab>\n\n  @ReactiveProperty({type: Boolean, reflect: true})\n  declare private expanded: boolean\n\n  declare private onEditTab: (event: CustomEvent) => void\n\n  static get Listeners() {\n    return {\n      'touchstart': ['stopPropagation', {passive: false}] as ListenerDefinition, // TODO: why?\n      'io-focus-to': 'onIoFocusTo',\n      'io-edit-tab': 'onEditTabCapture',\n    }\n  }\n\n  constructor(args: IoElementProps = {}) { super(args) }\n\n  stopPropagation(event: TouchEvent) {\n    event.stopPropagation()\n  }\n\n  onIoFocusTo(event: CustomEvent) {\n    const source = event.detail.source\n    const cmd = event.detail.command\n    const siblings = Array.from(this.querySelectorAll('io-tab')) as IoTab[]\n    const index = siblings.indexOf(source)\n\n    let cmdOverride = ''\n\n    if (cmd === 'ArrowDown') cmdOverride = 'Next'\n    if (cmd === 'ArrowUp') cmdOverride = 'Prev'\n    if (cmd === 'ArrowLeft') cmdOverride = 'First'\n    if (cmd === 'ArrowRight') cmdOverride = 'Last'\n\n    if (cmdOverride) {\n      if (cmdOverride === 'Next') {\n        siblings[(index + 1) % siblings.length].focus()\n      } else if (cmdOverride === 'Prev') {\n        siblings[(index - 1 + siblings.length) % siblings.length].focus()\n      } else if (cmdOverride === 'First') {\n        siblings[0].focus()\n      } else if (cmdOverride === 'Last') {\n        siblings[siblings.length - 1].focus()\n      }\n      event.stopPropagation()\n    }\n  }\n\n  onEditTabCapture(event: CustomEvent) {\n    event.stopPropagation()\n    this.onEditTab(event)\n    this.expanded = false\n  }\n\n  expand(props: IoTabsHamburgerMenuExpandProps) {\n    this.setProperties({\n      tabs: props.tabs,\n      expanded: true,\n    })\n    this.onEditTab = props.onEditTab\n    nudge(this, props.source, props.direction)\n    this.debounce(this.onExpand)\n  }\n  onExpand() {\n    (this.querySelector('[selected]') as HTMLElement)?.focus()\n  }\n  changed() {\n    this.render([\n      ...this.tabs.map(tab => ioTab({tab: tab})),\n    ])\n  }\n}\n\nexport const IoTabsHamburgerMenuSingleton = new IoTabsHamburgerMenu()\nsetTimeout(() => {\n  IoOverlaySingleton.appendChild(IoTabsHamburgerMenuSingleton as HTMLElement)\n}, 100)","import { Register, NodeArray, ReactiveProperty } from '@io-gui/core'\nimport { IoField, IoFieldProps } from '@io-gui/inputs'\nimport { ioIcon } from '@io-gui/icons'\nimport { Tab } from '../nodes/Tab.js'\nimport { IoTabsHamburgerMenuSingleton } from './IoTabsHamburgerMenuSingleton.js'\n\nexport type IoTabsHamburgerProps = IoFieldProps & {\n  tabs: NodeArray<Tab>\n}\n\n@Register\nexport class IoTabsHamburger extends IoField {\n  static get Style() {\n    return /* css */`\n      :host {\n        display: flex;\n        flex-shrink: 0;\n      }\n    `\n  }\n\n  @ReactiveProperty({type: NodeArray, init: 'this'})\n  declare private tabs: NodeArray<Tab>\n\n  constructor(args: IoTabsHamburgerProps) { super(args) }\n\n  onClick() {\n    IoTabsHamburgerMenuSingleton.expand({\n      source: this,\n      direction: 'over',\n      tabs: this.tabs,\n      onEditTab: this.onEditTab,\n    })\n  }\n  onEditTab(event: CustomEvent) {\n    this.dispatch('io-edit-tab', {tab: event.detail.tab, key: event.detail.key}, true)\n  }\n  changed() {\n    this.render([\n      ioIcon({value: 'io:hamburger'})\n    ])\n  }\n}\n\nexport const ioTabsHamburger = function(arg0: IoTabsHamburgerProps) {\n  return IoTabsHamburger.vConstructor(arg0)\n}","import { Register, IoElement, IoElementProps, ReactiveProperty, Property, NodeArray } from '@io-gui/core'\nimport { MenuOption, ioMenuItem } from '@io-gui/menus'\nimport { ioTab } from './IoTab.js'\nimport { ioTabsHamburger } from './IoTabsHamburger.js'\nimport { Tab } from '../nodes/Tab.js'\n\nexport type IoTabsProps = IoElementProps & {\n  tabs: NodeArray<Tab>\n  addMenuOption: MenuOption\n}\n\n@Register\nexport class IoTabs extends IoElement {\n  static get Style() {\n    return /* css */`\n      :host {\n        display: flex;\n        background-color: var(--io_bgColorStrong);\n        padding-top: var(--io_spacing);\n        padding-left: var(--io_spacing);\n        padding-right: var(--io_spacing);\n      }\n      :host io-tab {\n        transition: opacity 2s cubic-bezier(0.4, 0, 0.2, 1);\n      }\n      :host:not([overflow=\"-1\"]) io-tab {\n        /* TODO: make niceer animations */\n        pointer-events: none;\n        opacity: 0;\n      }\n      :host[overflow=\"-1\"] io-tabs-hamburger {\n        /* TODO: make niceer animations */\n        display: none;\n      }\n      :host > io-tabs-hamburger {\n        margin-bottom: var(--io_spacing);\n        /* transition: opacity 1s cubic-bezier(0.4, 0, 0.2, 1); */\n      }\n      :host > io-menu-item {\n        margin-left: auto;\n        flex-shrink: 0;\n        opacity: 0.125;\n        transition: transform 0.2s cubic-bezier(0.4, 0, 0.2, 1), opacity linear 0.2s;\n      }\n      :host > io-menu-item:focus,\n      :host > io-menu-item:hover {\n        opacity: 1;\n      }\n      :host > io-menu-item > .label,\n      :host > io-menu-item > .icon,\n      :host > io-menu-item > .hasmore {\n        display: none;\n      }\n    `\n  }\n\n  @ReactiveProperty({type: NodeArray, init: 'this'})\n  declare tabs: NodeArray<Tab>\n\n  @ReactiveProperty({type: Number, value: -1, reflect: true})\n  declare overflow: number\n\n  @Property({type: MenuOption})\n  declare addMenuOption: MenuOption\n\n  constructor(args: IoTabsProps) { super(args) }\n\n  tabsMutated() {\n    this.changed()\n\n    this.overflow = -1\n    this.onResized()\n  }\n\n  onResized() {\n    const rect = this.getBoundingClientRect()\n    const addMenuRect = this.querySelector('.add-tab')!.getBoundingClientRect()\n\n    if (this.overflow === -1) {\n      if (addMenuRect.right > rect.right) {\n        this.overflow = rect.width\n      }\n    } else if (rect.width > (this.overflow + 32)) {\n      this.overflow = -1\n    }\n  }\n\n  changed() {\n    this.render([\n      ioTabsHamburger({tabs: this.tabs}),\n      ...this.tabs.map(tab => ioTab({tab: tab})),\n      ioMenuItem({\n        class: 'add-tab',\n        icon: 'io:box_fill_plus',\n        direction: 'down',\n        option: this.addMenuOption,\n      }),\n    ])\n  }\n}\n\nexport const ioTabs = function(arg0: IoTabsProps) {\n  return IoTabs.vConstructor(arg0)\n}","import { Register, IoElement, VDOMElement, IoElementProps, ReactiveProperty, Property } from '@io-gui/core'\nimport { ioSelector } from '@io-gui/navigation'\nimport { IoMenuItem, MenuOption } from '@io-gui/menus'\nimport { ioTabs } from './IoTabs.js'\nimport { IoSplit } from './IoSplit.js'\nimport { Tab } from '../nodes/Tab.js'\nimport { Panel } from '../nodes/Panel.js'\nimport { SplitDirection } from '../nodes/Split.js'\nimport { IoLayout } from './IoLayout.js'\n\nexport type IoPanelProps = IoElementProps & {\n  panel: Panel\n  elements: VDOMElement[]\n  addMenuOption: MenuOption\n}\n\n@Register\nexport class IoPanel extends IoElement {\n  static get Style() {\n    return /* css */`\n      :host {\n        display: flex;\n        overflow: hidden;\n        flex-direction: column;\n        flex: 1 1 auto;\n        background-color: var(--io_bgColorLight);\n      }\n      :host > io-selector {\n        margin-top: calc(-1 * var(--io_borderWidth));\n        border-top: var(--io_border);\n        border-top-color: var(--io_borderColorStrong);\n      }\n    `\n  }\n\n  @ReactiveProperty({type: Object})\n  declare panel: Panel\n\n  @ReactiveProperty(Array)\n  declare elements: VDOMElement[]\n\n  @Property(MenuOption)\n  declare private addMenuOption: MenuOption\n\n  static get Listeners() {\n    return {\n      'io-edit-tab': 'onEditTab',\n    }\n  }\n\n  onEditTab(event: CustomEvent) {\n    event.stopPropagation()\n    const tab: Tab = event.detail.tab\n    const key = event.detail.key\n    const index = this.panel.tabs.indexOf(tab)\n    if (index === -1) {\n      debug: console.warn('IoTabs:Tab not found in panel', tab)\n      return\n    }\n    switch (key) {\n      case 'Select': {\n        this.selectTab(tab)\n        break\n      }\n      case 'Backspace': {\n        this.removeTab(tab)\n        break\n      }\n      case 'ArrowLeft': {\n        this.moveTab(tab, index - 1)\n        break\n      }\n      case 'ArrowRight': {\n        this.moveTab(tab, index + 1)\n        break\n      }\n      case 'ArrowUp': {\n        // TODO: move tab to panel above or split the panel\n        break\n      }\n      case 'ArrowDown': {\n        // TODO: move tab to panel below or split the panel\n        break\n      }\n    }\n  }\n  init() {\n    this.focusTabDebounced = this.focusTabDebounced.bind(this)\n  }\n  onNewTabClicked(event: CustomEvent) {\n    event.stopPropagation()\n    const option: MenuOption = event.detail.option\n    if (option.id && option.options.length === 0) {\n      const tab = new Tab({id: option.id, label: option.label, icon: option.icon})\n      this.addTab(tab)\n      const addMenuOption = this.querySelector('.add-tab') as IoMenuItem\n      if (addMenuOption) addMenuOption.expanded = false\n    }\n  }\n  selectIndex(index: number) {\n    index = Math.min(index, this.panel.tabs.length - 1)\n    this.panel.setSelected(this.panel.tabs[index].id)\n    this.debounce(this.focusTabDebounced, index)\n  }\n  selectTab(tab: Tab) {\n    const index = this.panel.tabs.indexOf(tab)\n    this.panel.setSelected(tab.id)\n    this.debounce(this.focusTabDebounced, index)\n  }\n  moveTabToSplit(sourcePanel: IoPanel, tab: Tab, direction: SplitDirection) {\n    const parentSplit = this.parentElement as IoSplit\n    if (direction === 'center') {\n      sourcePanel.removeTab(tab)\n      this.addTab(tab)\n    } else {\n      parentSplit.moveTabToSplit(sourcePanel, this.panel, tab, direction)\n    }\n  }\n  addTab(tab: Tab, index?: number) {\n    const existingIndex = this.panel.tabs.findIndex(t => t.id === tab.id)\n    if (existingIndex !== -1) {\n      this.panel.tabs.splice(existingIndex, 1)\n    }\n    index = index ?? this.panel.tabs.length\n    index = Math.min(index, this.panel.tabs.length)\n    this.panel.tabs.splice(index, 0, tab)\n    this.selectIndex(index)\n  }\n  removeTab(tab: Tab) {\n    // Prevent removing the last tab from a layout with only one split, panel and a tab.\n    const parentSplit = this.parentElement as IoSplit\n    const grandParentLayout = (parentSplit.parentElement instanceof IoLayout) ? parentSplit.parentElement : null\n    if (grandParentLayout && parentSplit.split.children.length === 1 && this.panel.tabs.length === 1) {\n      return\n    }\n\n    const index = this.panel.tabs.indexOf(tab)\n    this.panel.tabs.splice(index, 1)\n    if (this.panel.tabs.length > 0) {\n      const newIndex = Math.min(index, this.panel.tabs.length - 1)\n      this.selectIndex(newIndex)\n    } else {\n      this.dispatch('io-panel-remove', {panel: this.panel}, true)\n    }\n  }\n  moveTab(tab: Tab, index: number) {\n    index = Math.max(Math.min(index, this.panel.tabs.length - 1), 0)\n    const currIndex = this.panel.tabs.findIndex(t => t.id === tab.id)\n    this.panel.tabs.splice(currIndex, 1)\n    index = Math.min(index, this.panel.tabs.length)\n    this.panel.tabs.splice(index, 0, tab)\n    this.selectIndex(index)\n  }\n  focusTabDebounced(index: number) {\n    const tabs = Array.from(this.querySelectorAll('io-tab')) as HTMLElement[]\n    index = Math.min(index, tabs.length - 1)\n    if (tabs[index]) tabs[index].focus()\n  }\n  panelMutated() {\n    this.changed()\n  }\n  changed() {\n    this.render([\n      ioTabs({\n        tabs: this.panel.tabs,\n        addMenuOption: this.addMenuOption,\n        '@io-menu-option-clicked': this.onNewTabClicked,\n      }),\n      ioSelector({\n        selected: this.panel.getSelected(),\n        elements: this.elements,\n        anchor: '',\n      })\n    ])\n  }\n}\nexport const ioPanel = function(arg0: IoPanelProps) {\n  return IoPanel.vConstructor(arg0)\n}","import { Node, NodeArray, ReactiveProperty, Register } from '@io-gui/core'\nimport { Tab, TabProps } from './Tab.js'\n\nexport type PanelProps = {\n  tabs: Array<TabProps>\n  flex?: string\n}\n\n@Register\nexport class Panel extends Node {\n\n  @ReactiveProperty({type: NodeArray, init: 'this'})\n  declare tabs: NodeArray<Tab>\n\n  @ReactiveProperty({type: String, value: '1 1 100%'})\n  declare flex: string\n\n  constructor(args: PanelProps) {\n    args = { ...args }\n    if (args.tabs.length > 0 && !args.tabs.find(tab => tab.selected)) {\n      args.tabs[0].selected = true\n    }\n    args.tabs = args.tabs.map(tab => new Tab({...tab}))\n    super(args)\n  }\n  tabsMutated() {\n    this.debounce(this.onTabsMutatedDebounced)\n  }\n  onTabsMutatedDebounced() {\n    this.dispatchMutation()\n  }\n  getSelected() {\n    let selected = ''\n    for (let i = 0; i < this.tabs.length; i++) {\n      const item = this.tabs[i]\n      if (item.selected && item.id) {\n        selected = item.id\n        break\n      }\n    }\n    return selected\n  }\n  setSelected(id: string) {\n    // TODO Test and reconsider withInternalOperation\n    this.tabs.withInternalOperation(() => {\n      for (let i = 0; i < this.tabs.length; i++) {\n        const item = this.tabs[i]\n        if (item.id === id) {\n          item.selected = true\n        } else {\n          item.selected = false\n        }\n      }\n    })\n    this.tabs.dispatchMutation()\n  }\n  toJSON(): PanelProps {\n    return {\n      tabs: this.tabs.map(tab => tab.toJSON()),\n      flex: this.flex,\n    }\n  }\n  fromJSON(json: PanelProps) {\n    this.setProperties({\n      tabs: json.tabs.map(tab => new Tab(tab)),\n      flex: json.flex ?? '1 1 100%',\n    })\n    return this\n  }\n  dispose() {\n    this.tabs.length = 0 // TODO: test magic!\n    super.dispose()\n  }\n}","import { Node, NodeArray, ReactiveProperty, Register } from '@io-gui/core'\nimport { Panel, PanelProps } from './Panel.js'\n\nexport type SplitOrientation = 'horizontal' | 'vertical'\nexport type SplitDirection = 'none' | 'left' | 'right' | 'top' | 'bottom' | 'center'\n\nexport type SplitProps = {\n  children: Array<SplitProps | PanelProps>\n  orientation?: SplitOrientation\n  flex?: string\n}\n\n@Register\nexport class Split extends Node {\n\n  @ReactiveProperty({type: NodeArray, init: 'this'})\n  declare children: NodeArray<Split | Panel>\n\n  @ReactiveProperty({type: String, value: 'horizontal'})\n  declare orientation: SplitOrientation\n\n  @ReactiveProperty({type: String, value: '1 1 100%'})\n  declare flex: string\n\n  constructor(args: SplitProps) {\n    args = { ...args }\n    for (let i = 0; i < args.children.length; i++) {\n      const panelChild = args.children[i] as PanelProps\n      const splitChild = args.children[i] as SplitProps\n      if (panelChild.tabs) {\n        args.children[i] = new Panel(panelChild)\n      } else if (splitChild.children) {\n        args.children[i] = new Split(splitChild)\n      }\n    }\n    super(args)\n  }\n  childrenMutated() {\n    this.debounce(this.onChildrenMutatedDebounced)\n  }\n  onChildrenMutatedDebounced() {\n    this.dispatchMutation()\n  }\n  toJSON(): SplitProps {\n    return {\n      children: this.children.map((child: Split | Panel): SplitProps | PanelProps => child.toJSON()),\n      orientation: this.orientation,\n      flex: this.flex,\n    }\n  }\n  fromJSON(json: SplitProps) {\n    this.setProperties({\n      children: json.children.map((child: SplitProps | PanelProps) => {\n        const panelChild = child as PanelProps\n        const splitChild = child as SplitProps\n        if (panelChild.tabs) {\n          return new Panel(panelChild)\n        } else if (splitChild.children) {\n          return new Split(splitChild)\n        }\n      }),\n      orientation: json.orientation ?? 'horizontal',\n      flex: json.flex ?? '1 1 100%',\n    })\n    return this\n  }\n  dispose() {\n    this.children.length = 0 // TODO: test magic!\n    super.dispose()\n  }\n}","import { Register, ReactiveProperty, VDOMElement, IoElement, IoElementProps, Property, ThemeSingleton } from '@io-gui/core'\nimport { MenuOption } from '@io-gui/menus'\nimport { IoPanel, ioPanel } from './IoPanel.js'\nimport { ioDivider } from './IoDivider.js'\nimport { Split, SplitDirection, SplitOrientation } from '../nodes/Split.js'\nimport { Panel } from '../nodes/Panel.js'\nimport { Tab } from '../nodes/Tab.js'\n\nexport type IoSplitProps = IoElementProps & {\n  split: Split\n  elements: VDOMElement[]\n  addMenuOption: MenuOption\n}\n\n@Register\nexport class IoSplit extends IoElement {\n  static get Style() {\n    return /* css */`\n      :host {\n        display: flex;\n        overflow: hidden;\n        flex-direction: row;\n      }\n      :host[orientation='vertical'] {\n        flex-direction: column;\n      }\n    `\n  }\n\n  @ReactiveProperty({type: Object})\n  declare split: Split\n\n  @ReactiveProperty(Array)\n  declare elements: VDOMElement[]\n\n  @Property({type: MenuOption})\n  declare private addMenuOption: MenuOption\n\n  static get Listeners() {\n    return {\n      'io-divider-move': 'onDividerMove',\n      'io-divider-move-end': 'onDividerMoveEnd',\n      'io-panel-remove': 'onPanelRemove',\n      'io-split-remove': 'onSplitRemove',\n      'io-split-convert-to-panel': 'onSplitConvertToPanel',\n    }\n  }\n  // TODO: Make sure one panel is available even when all tabs are removed.\n\n  constructor(args: IoSplitProps) {\n    super(args)\n    this.splitMutatedDebounced = this.splitMutatedDebounced.bind(this)\n  }\n\n  onDividerMove(event: CustomEvent) {\n    event.stopPropagation()\n    const index = event.detail.index\n    const rect = this.getBoundingClientRect()\n    const orientation = this.split.orientation\n\n    const dividerSize = ThemeSingleton.spacing3\n    const totalSpace = (orientation === 'horizontal' ? rect.width : rect.height) - dividerSize * (this.children.length - 1) / 2\n    const minSize = orientation === 'horizontal' ? ThemeSingleton.fieldHeight * 4 : ThemeSingleton.fieldHeight\n\n    const splits = []\n    const splitSizes = []\n    const splitResize = []\n\n    for (let i = 0; i < this.children.length; i += 2) {\n      const splitElement = this.children[i] as HTMLElement\n\n      const splitRect = splitElement.getBoundingClientRect()\n      const splitSize = orientation === 'horizontal' ? splitRect.width : splitRect.height\n\n      let x = event.detail.clientX - splitRect.left - dividerSize / 2\n      let y = event.detail.clientY - splitRect.top - dividerSize / 2\n      if (i === this.children.length - 1) {\n        // NOTE: The last panel should be sized from the end.\n        x = rect.width - (event.detail.clientX - rect.left) - dividerSize / 2\n        y = rect.height - (event.detail.clientY - rect.top) - dividerSize / 2\n      }\n      let size = orientation === 'horizontal' ? x : y\n\n      splits.push(splitElement)\n      splitSizes.push(splitSize)\n      splitResize.push(size)\n    }\n\n    let fixedSpaceBefore = 0\n    let fixedSpaceAfter = 0\n    let flexSpace = 0\n    let flexCountBefore = 0\n    let flexCountAfter = 0\n\n    for (let i = 0; i < splits.length; i++) {\n      let idx = index\n      if (idx === splits.length - 2) {\n        // NOTE: The last divider manipulates the panel after the split.\n        idx = splits.length - 1\n      }\n      if (splits[i].style.flex.endsWith('%')) {\n        flexSpace += splitSizes[i]\n        if (i < idx) {\n          flexCountBefore++\n        } else if (i > idx) {\n          flexCountAfter++\n        }\n      } else {\n        if (i < idx) {\n          fixedSpaceBefore += splitSizes[i]\n        } else if (i > idx) {\n          fixedSpaceAfter += splitSizes[i]\n        }\n      }\n    }\n\n    if (index === 0) {\n      const maxSize = totalSpace - minSize * flexCountAfter - fixedSpaceAfter\n      const size = Math.max(minSize, Math.min(maxSize, splitResize[0]))\n      // Set fixed size for the first panel.\n      splits[index].style.flex = `0 0 ${size}px`\n      // Prevent flex splits from compressing below minSize.\n      for (let i = 0; i < splits.length; i++) {\n        if (splits[i].style.flex.endsWith('%')) {\n          if (i !== index) {\n            splits[i].style.flex = `1 1 ${Math.max(minSize, splitSizes[i]) / flexSpace * 100}%`\n          }\n        }\n      }\n\n    } else if (index === splits.length - 2) {\n      const maxSize = totalSpace - minSize * flexCountBefore - fixedSpaceBefore\n      const size = Math.max(minSize, Math.min(maxSize, splitResize[index + 1]))\n      // Set fixed size for the last panel.\n      splits[index + 1].style.flex = `0 0 ${size}px`\n      // Prevent flex splits from compressing below minSize.\n      for (let i = 0; i < splits.length; i++) {\n        if (splits[i].style.flex.endsWith('%')) {\n          if (i !== index + 1) {\n            splits[i].style.flex = `1 1 ${Math.max(minSize, splitSizes[i]) / flexSpace * 100}%`\n          }\n        }\n      }\n    } else {\n      const maxSize = splitSizes[index] + splitSizes[index + 1] - minSize\n      const size = Math.max(minSize, Math.min(maxSize, splitResize[index]))\n      const sizeNext = splitSizes[index + 1] - (size - splitSizes[index])\n      // Apply flex sizes\n      for (let i = 0; i < splits.length; i++) {\n        if (splits[i].style.flex.endsWith('%')) {\n          if (i === index) {\n            splits[i].style.flex = `1 1 ${size / flexSpace * 100}%`\n          } else if (i === index + 1) {\n            splits[i].style.flex = `1 1 ${sizeNext / flexSpace * 100}%`\n          } else {\n            splits[i].style.flex = `1 1 ${Math.max(minSize, splitSizes[i]) / flexSpace * 100}%`\n          }\n        }\n      }\n    }\n  }\n\n  onDividerMoveEnd(event: CustomEvent) {\n    event.stopPropagation()\n    let index = 0\n    for (let i = 0; i < this.children.length; i += 2) {\n      const splitElement = this.children[i] as HTMLElement\n      this.split.children[index].flex = splitElement.style.flex\n      index++\n    }\n  }\n\n  onPanelRemove(event: CustomEvent) {\n    if (event.detail.panel === this.split) return\n    event.stopPropagation()\n    for (let i = this.split.children.length; i--;) {\n      const child = this.split.children[i]\n      if (child instanceof Panel && child.tabs.length === 0) {\n        this.split.children.splice(i, 1)\n      }\n    }\n    if (this.split.children.length === 0) {\n      this.dispatch('io-split-remove', {split: this.split}, true)\n    } else if (this.split.children.length === 1) {\n      this.dispatch('io-split-convert-to-panel', {split: this.split}, true)\n    }\n  }\n\n  onSplitRemove(event: CustomEvent) {\n    if (event.detail.split === this.split) return\n    event.stopPropagation()\n    const index = this.split.children.indexOf(event.detail.split)\n    this.split.children.splice(index, 1)\n    if (this.split.children.length === 2) {\n      this.split.children[1].flex = '1 1 100%'\n    }\n  }\n\n  onSplitConvertToPanel(event: CustomEvent) {\n    if (event.detail.split === this.split) return\n    event.stopPropagation()\n    this.convertToPanel(event.detail.split)\n  }\n\n  convertToSplit(panel: Panel, first: Panel, second: Panel, orientation: SplitOrientation) {\n    const index = this.split.children.indexOf(panel)\n    this.split.children.splice(index, 1, new Split({orientation: orientation, children: [first, second]}))\n  }\n  convertToPanel(split: Split) {\n    const panel = split.children[0] as Panel\n    const index = this.split.children.indexOf(split)\n    panel.flex = '1 1 100%'\n    this.split.children.splice(index, 1, panel)\n  }\n\n  moveTabToSplit(sourcePanel: IoPanel, panel: Panel, tab: Tab, direction: SplitDirection) {\n    const index = this.split.children.indexOf(panel)\n    let orientation: SplitOrientation = 'horizontal'\n    if (direction === 'top' || direction === 'bottom') {\n      orientation = 'vertical'\n    }\n    let newIndex = ['left', 'top'].includes(direction) ? index - 1 : index + 1\n\n    if (this.split.orientation === orientation) {\n      newIndex = Math.max(0, newIndex)\n      this.split.children.splice(newIndex, 0, new Panel({tabs: [tab]}))\n      sourcePanel.removeTab(tab)\n    } else {\n      if (panel.tabs.length > 1 || panel !== sourcePanel.panel) {\n        sourcePanel.removeTab(tab)\n        if (newIndex === -1) {\n          this.convertToSplit(panel, new Panel({tabs: [tab]}), panel, orientation)\n        } else {\n          this.convertToSplit(panel, panel, new Panel({tabs: [tab]}), orientation)\n        }\n      }\n    }\n  }\n  splitMutated() {\n    this.debounce(this.splitMutatedDebounced)\n  }\n  splitMutatedDebounced() {\n    this.changed()\n  }\n  changed() {\n    this.setAttribute('orientation', this.split.orientation)\n    this.style.flex = this.split.flex\n    // TODO: Validate split\n    const vChildren: VDOMElement[] = []\n    for (let i = 0; i < this.split.children.length; i++) {\n      const child = this.split.children[i]\n      if (child instanceof Split) {\n        vChildren.push(ioSplit({\n          split: child,\n          style: {flex: child.flex},\n          elements: this.elements,\n          addMenuOption: this.addMenuOption,\n        }))\n      } else if (child instanceof Panel) {\n        vChildren.push(ioPanel({\n          panel: child,\n          style: {flex: child.flex},\n          elements: this.elements,\n          addMenuOption: this.addMenuOption,\n        }))\n      } else debug: {\n        console.warn('IOSplit: Invalid child type', child)\n      }\n      if (i < this.split.children.length - 1) {\n        vChildren.push(ioDivider({orientation: this.split.orientation, index: i}))\n      }\n    }\n    this.render(vChildren)\n  }\n}\nexport const ioSplit = function(arg0: IoSplitProps) {\n  return IoSplit.vConstructor(arg0)\n}\n","import { Register, IoElement, VDOMElement, IoElementProps, ReactiveProperty, Property, Binding } from '@io-gui/core'\nimport { MenuOption } from '@io-gui/menus'\nimport { ioSplit } from './IoSplit.js'\nimport { Split } from '../nodes/Split.js'\n\nexport type IoLayoutProps = IoElementProps & {\n  split: Split | Binding<Split>\n  elements: VDOMElement[]\n  addMenuOption: MenuOption\n}\n\n@Register\nexport class IoLayout extends IoElement {\n  static get Style() {\n    return /* css */`\n      :host {\n        position: relative;\n        display: flex;\n        flex: 1 1 100%;\n        max-width: 100%;\n        max-height: 100%;\n      }\n      :host > io-split {\n        max-width: 100%;\n        max-height: 100%;\n      }\n    `\n  }\n\n  @ReactiveProperty({type: Object})\n  declare split: Split\n\n  @ReactiveProperty(Array)\n  declare elements: VDOMElement[]\n\n  @Property({type: MenuOption})\n  declare private addMenuOption: MenuOption\n\n  changed() {\n    this.render([\n      ioSplit({\n        split: this.split,\n        elements: this.elements,\n        addMenuOption: this.addMenuOption,\n      })\n    ])\n  }\n}\n\nexport const ioLayout = function(arg0: IoLayoutProps) {\n  return IoLayout.vConstructor(arg0)\n}"],"names":["IoDivider","IoElement","args","event","__decorateClass","ReactiveProperty","Property","Register","ioDivider","arg0","Tab","Node","json","IoTabDropMarker","tabs","rect","ThemeSingleton","tabDropMarkerSingleton","IoTabDragIcon","IoField","ioIcon","span","tabDragIconSingleton","icons","set","IconsetDB","icon","id","iconOptions","ioOptionSelect","MenuOption","_dragStartX","_dragStartY","IoTab","panel","dx","dy","x","y","m","tabsContainers","i","tabsContainer","targetPanel","tcr","j","tr","isLast","dropIndex","panels","pr","rx","ry","direction","source","target","index","IoContextEditorSingleton","ioField","ioString","ioTab","IoTabsHamburgerMenu","cmd","siblings","cmdOverride","props","nudge","tab","__publicField","NodeArray","IoTabsHamburgerMenuSingleton","IoOverlaySingleton","IoTabsHamburger","ioTabsHamburger","IoTabs","addMenuRect","ioMenuItem","ioTabs","IoPanel","key","option","addMenuOption","sourcePanel","parentSplit","existingIndex","t","IoLayout","newIndex","currIndex","ioSelector","ioPanel","Panel","selected","item","Split","panelChild","splitChild","child","IoSplit","orientation","dividerSize","totalSpace","minSize","splits","splitSizes","splitResize","splitElement","splitRect","splitSize","size","fixedSpaceBefore","fixedSpaceAfter","flexSpace","flexCountBefore","flexCountAfter","idx","maxSize","sizeNext","first","second","split","vChildren","ioSplit","ioLayout"],"mappings":"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"}