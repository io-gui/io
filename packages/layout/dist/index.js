import{ReactiveProperty,IoElement,Register,Node,NodeArray,ThemeSingleton,span,IoOverlaySingleton,nudge,Property,div}from"@io-gui/core";import{ioIcon,IconsetDB}from"@io-gui/icons";import{ioOptionSelect,MenuOption,ioMenuItem}from"@io-gui/menus";import{ioSelector}from"@io-gui/navigation";import{IoField,ioButton,ioString}from"@io-gui/inputs";import{IoContextEditorSingleton}from"@io-gui/editors";var __defProp$d=Object.defineProperty,__getOwnPropDesc$d=Object.getOwnPropertyDescriptor,__decorateClass$d=(decorators,target,key,kind)=>{for(var decorator,result=kind>1?void 0:kind?__getOwnPropDesc$d(target,key):target,i=decorators.length-1;i>=0;i--)(decorator=decorators[i])&&(result=(kind?decorator(target,key,result):decorator(result))||result);return kind&&result&&__defProp$d(target,key,result),result};let IoDivider=class extends IoElement{static get Style(){return"\n      :host {\n        position: relative;\n        flex: 0 0 var(--io_spacing3);\n        background-color: var(--io_colorLight);\n        border-style: solid;\n        border-width: 0 var(--io_borderWidth);\n        border-color: var(--io_color);\n        cursor: col-resize;\n        @apply --unselectable;\n      }\n      :host[pressed] {\n        border-color: var(--io_borderColorBlue);\n        background-color: var(--io_bgColorBlue);\n      }\n      :host[pressed]:before,\n      :host[pressed]:after {\n        background-color: var(--io_colorWhite);\n      }\n      :host:before,\n      :host:after {\n        content: '';\n        position: absolute;\n        top: 50%;\n        left: 50%;\n        z-index: 1;\n        opacity: 0;\n      }\n      :host:before {\n        width: var(--io_fieldHeight);\n        height: var(--io_spacing);\n        background-color: var(--io_color);\n        transform: translate(-50%, -50%) rotate(90deg);\n        border-radius: var(--io_spacing);\n        opacity: 0.5;\n      }\n      :host[orientation='vertical']:before {\n        transform: translate(-50%, -50%);\n      }\n      :host:after {\n        width: var(--io_fieldHeight);\n        height: var(--io_fieldHeight);\n        background-color: var(--io_color);\n        transform: translate(-50%, -50%) rotate(45deg);\n        border-radius: 25%;\n      }\n      :host[orientation='vertical'] {\n        cursor: row-resize;\n        border-width: var(--io_borderWidth) 0;\n      }\n      :host:hover {\n        border-style: dashed;\n      }\n      :host:hover:before {\n        opacity: 1;\n      }\n    "}static get Listeners(){return{pointerdown:"onPointerdown",touchstart:["onTouchstart",{passive:!1}]}}constructor(args){super(args)}onPointerdown(event){event.preventDefault(),event.stopPropagation(),this.addEventListener("pointermove",this.onPointermove),this.addEventListener("pointerup",this.onPointerup),this.addEventListener("pointercancel",this.onPointercancel),this.setPointerCapture(event.pointerId),this.pressed=!0}onPointermove(event){event.preventDefault(),this.dispatch("io-divider-move",{clientX:event.clientX,clientY:event.clientY,element:this},!0)}onPointerup(event){event.preventDefault(),this.removeEventListener("pointermove",this.onPointermove),this.removeEventListener("pointerup",this.onPointerup),this.removeEventListener("pointercancel",this.onPointercancel),this.releasePointerCapture(event.pointerId),this.pressed=!1,this.dispatch("io-divider-move-end",{clientX:event.clientX,clientY:event.clientY,element:this},!0)}onPointercancel(event){event.preventDefault(),this.removeEventListener("pointermove",this.onPointermove),this.removeEventListener("pointerup",this.onPointerup),this.removeEventListener("pointercancel",this.onPointercancel),this.releasePointerCapture(event.pointerId),this.pressed=!1}onTouchstart(event){this.addEventListener("touchmove",this.onTouchmove,{passive:!1}),this.addEventListener("touchend",this.onTouchend)}onTouchmove(event){event.preventDefault()}onTouchend(){this.removeEventListener("touchmove",this.onTouchmove),this.removeEventListener("touchend",this.onTouchend)}};__decorateClass$d([ReactiveProperty({value:!1,type:Boolean,reflect:!0})],IoDivider.prototype,"pressed",2),__decorateClass$d([ReactiveProperty({value:"horizontal",type:String,reflect:!0})],IoDivider.prototype,"orientation",2),IoDivider=__decorateClass$d([Register],IoDivider);const ioDivider=function(arg0){return IoDivider.vConstructor(arg0)};var __defProp$c=Object.defineProperty,__getOwnPropDesc$c=Object.getOwnPropertyDescriptor,__decorateClass$c=(decorators,target,key,kind)=>{for(var decorator,result=kind>1?void 0:kind?__getOwnPropDesc$c(target,key):target,i=decorators.length-1;i>=0;i--)(decorator=decorators[i])&&(result=(kind?decorator(target,key,result):decorator(result))||result);return kind&&result&&__defProp$c(target,key,result),result};let Tab=class extends Node{constructor(args){args.id||console.error("Tab: construction error - empty id"),super({...args,label:args.label?args.label:args.id})}toJSON(){const json={id:this.id};return this.label!==this.id&&(json.label=this.label),this.icon&&(json.icon=this.icon),this.selected&&(json.selected=this.selected),json}fromJSON(json){return this.setProperties({id:json.id,label:json.label?json.label:json.id,icon:json.icon?json.icon:"",selected:!!json.selected&&json.selected}),this}};__decorateClass$c([ReactiveProperty({type:String,value:""})],Tab.prototype,"id",2),__decorateClass$c([ReactiveProperty({type:String,value:""})],Tab.prototype,"label",2),__decorateClass$c([ReactiveProperty({type:String,value:""})],Tab.prototype,"icon",2),__decorateClass$c([ReactiveProperty({type:Boolean,value:!1})],Tab.prototype,"selected",2),Tab=__decorateClass$c([Register],Tab);var __defProp$b=Object.defineProperty,__getOwnPropDesc$b=Object.getOwnPropertyDescriptor,__decorateClass$b=(decorators,target,key,kind)=>{for(var decorator,result=kind>1?void 0:kind?__getOwnPropDesc$b(target,key):target,i=decorators.length-1;i>=0;i--)(decorator=decorators[i])&&(result=(kind?decorator(target,key,result):decorator(result))||result);return kind&&result&&__defProp$b(target,key,result),result};function deduplicateTabs(tabs,context){const seenIds=/* @__PURE__ */new Set,uniqueTabs=[];for(const tab of tabs)seenIds.has(tab.id)?console.warn(`${context}: Duplicate tab id "${tab.id}" - keeping first occurrence`):(seenIds.add(tab.id),uniqueTabs.push(tab));return uniqueTabs}let Panel=class extends Node{constructor(args){"panel"!==args.type&&console.error(`Panel: Invalid type "${args.type}". Expected "panel".`),(args={...args}).tabs=deduplicateTabs(args.tabs,"Panel"),args.tabs.length>0&&!args.tabs.find(tab=>tab.selected)&&(args.tabs[0].selected=!0),args.tabs=args.tabs.map(tab=>new Tab({...tab})),super(args)}tabsMutated(){this.debounce(this.onTabsMutatedDebounced)}onTabsMutatedDebounced(){this.dispatchMutation()}getSelected(){let selected="";for(let i=0;i<this.tabs.length;i++){const item=this.tabs[i];if(item.selected&&item.id){selected=item.id;break}}return selected}setSelected(id){this.tabs.withInternalOperation(()=>{for(let i=0;i<this.tabs.length;i++){const item=this.tabs[i];item.id===id?item.selected=!0:item.selected=!1}}),this.tabs.dispatchMutation()}flexChanged(){/^[\d.]+\s+[\d.]+\s+(?:auto|[\d.]+(?:px|%))$/.test(this.flex)||console.warn(`Split: Invalid flex value "${this.flex}". Expected a valid CSS flex value.`)}toJSON(){const json={type:"panel",tabs:this.tabs.map(tab=>tab.toJSON())};return"1 1 auto"!==this.flex&&(json.flex=this.flex),json}fromJSON(json){"panel"!==json.type&&console.error(`Panel.fromJSON: Invalid type "${json.type}". Expected "panel".`);const uniqueTabs=deduplicateTabs(json.tabs,"Panel.fromJSON");return this.setProperties({tabs:uniqueTabs.map(tab=>new Tab(tab)),flex:json.flex??"1 1 auto"}),this}dispose(){this.tabs.length=0,super.dispose()}};__decorateClass$b([ReactiveProperty({type:NodeArray,init:"this"})],Panel.prototype,"tabs",2),__decorateClass$b([ReactiveProperty({type:String,value:"1 1 auto"})],Panel.prototype,"flex",2),Panel=__decorateClass$b([Register],Panel);var __defProp$a=Object.defineProperty,__getOwnPropDesc$a=Object.getOwnPropertyDescriptor,__decorateClass$a=(decorators,target,key,kind)=>{for(var decorator,result=kind>1?void 0:kind?__getOwnPropDesc$a(target,key):target,i=decorators.length-1;i>=0;i--)(decorator=decorators[i])&&(result=(kind?decorator(target,key,result):decorator(result))||result);return kind&&result&&__defProp$a(target,key,result),result};function createChild(child){return"panel"===child.type?new Panel(child):new Split(child)}function consolidateChildren(children,orientation){let result=children,resultOrientation=orientation;for(;1===result.length&&result[0]instanceof Split;){const soleChild=result[0];resultOrientation=soleChild.orientation,result=[...soleChild.children]}return{children:result,orientation:resultOrientation}}let Split=class extends Node{constructor(args){"split"!==args.type&&console.error(`Split: Invalid type "${args.type}". Expected "split".`);const consolidated=consolidateChildren(args.children.map(createChild),args.orientation??"horizontal");super({...args,children:consolidated.children,orientation:consolidated.orientation})}childrenMutated(){this.debounce(this.onChildrenMutatedDebounced)}onChildrenMutatedDebounced(){this.dispatchMutation()}flexChanged(){/^[\d.]+\s+[\d.]+\s+(?:auto|[\d.]+(?:px|%))$/.test(this.flex)||console.warn(`Split: Invalid flex value "${this.flex}". Expected a valid CSS flex value.`)}toJSON(){const json={type:"split",children:this.children.map(child=>child.toJSON())};return"horizontal"!==this.orientation&&(json.orientation=this.orientation),"1 1 auto"!==this.flex&&(json.flex=this.flex),json}fromJSON(json){"split"!==json.type&&console.error(`Split.fromJSON: Invalid type "${json.type}". Expected "split".`);const consolidated=consolidateChildren(json.children.map(createChild),json.orientation??"horizontal");return this.setProperties({children:consolidated.children,orientation:consolidated.orientation,flex:json.flex??"1 1 auto"}),this}dispose(){this.children.length=0,super.dispose()}};__decorateClass$a([ReactiveProperty({type:NodeArray,init:"this"})],Split.prototype,"children",2),__decorateClass$a([ReactiveProperty({type:String,value:"horizontal"})],Split.prototype,"orientation",2),__decorateClass$a([ReactiveProperty({type:String,value:"1 1 auto"})],Split.prototype,"flex",2),Split=__decorateClass$a([Register],Split);var __defProp$9=Object.defineProperty,__getOwnPropDesc$9=Object.getOwnPropertyDescriptor,__decorateClass$9=(decorators,target,key,kind)=>{for(var decorator,result=kind>1?void 0:kind?__getOwnPropDesc$9(target,key):target,i=decorators.length-1;i>=0;i--)(decorator=decorators[i])&&(result=(kind?decorator(target,key,result):decorator(result))||result);return kind&&result&&__defProp$9(target,key,result),result};let IoTabDropRect=class extends IoElement{static get Style(){return'\n      :host {\n        position: fixed;\n        height: calc(var(--io_fieldHeight) - var(--io_borderWidth) - var(--io_borderRadius));\n        width: var(--io_spacing);\n        background-color: var(--io_bgColorBlue);\n        margin-bottom: var(--io_borderWidth);\n        z-index: 100000;\n        display: none;\n      }\n      :host:not([dropindex="-1"]) {\n        display: block;\n      }\n      :host:not([splitdirection="none"]) {\n        display: block;\n        opacity: 0.25;\n      }\n    '}constructor(args={}){super(args)}changed(){if(this.dropTarget&&-1!==this.dropIndex){const tabs=this.dropTarget.querySelectorAll("io-tab");if(this.style.width="",this.style.height="",0===tabs.length){const rect=this.dropTarget.getBoundingClientRect();this.style.top=`${rect.top+ThemeSingleton.borderRadius}px`,this.style.left=`${rect.left}px`}else if(this.dropIndex>tabs.length-1){const rect=tabs[tabs.length-1].getBoundingClientRect();this.style.top=`${rect.top+ThemeSingleton.borderRadius}px`,this.style.left=`${rect.left+rect.width}px`}else{const rect=tabs[this.dropIndex].getBoundingClientRect();this.style.top=`${rect.top+ThemeSingleton.borderRadius}px`,this.style.left=rect.left-ThemeSingleton.spacing+"px"}}else if(this.dropTarget&&"none"!==this.splitDirection){const rect=this.dropTarget.getBoundingClientRect();"top"===this.splitDirection?(this.style.top=`${rect.top}px`,this.style.left=`${rect.left}px`,this.style.width=`${rect.width}px`,this.style.height=rect.height/2+"px"):"bottom"===this.splitDirection?(this.style.top=`${rect.top+rect.height/2}px`,this.style.left=`${rect.left}px`,this.style.width=`${rect.width}px`,this.style.height=rect.height/2+"px"):"left"===this.splitDirection?(this.style.top=`${rect.top}px`,this.style.left=`${rect.left}px`,this.style.width=rect.width/2+"px",this.style.height=`${rect.height}px`):"right"===this.splitDirection?(this.style.top=`${rect.top}px`,this.style.left=`${rect.left+rect.width/2}px`,this.style.width=rect.width/2+"px",this.style.height=`${rect.height}px`):"center"===this.splitDirection&&(this.style.top=`${rect.top}px`,this.style.left=`${rect.left}px`,this.style.width=`${rect.width}px`,this.style.height=`${rect.height}px`)}}};__decorateClass$9([ReactiveProperty(null)],IoTabDropRect.prototype,"dropTarget",2),__decorateClass$9([ReactiveProperty({type:String,value:"none",reflect:!0})],IoTabDropRect.prototype,"splitDirection",2),__decorateClass$9([ReactiveProperty({type:Number,value:-1,reflect:!0})],IoTabDropRect.prototype,"dropIndex",2),IoTabDropRect=__decorateClass$9([Register],IoTabDropRect);const ioTabDropRectSingleton=new IoTabDropRect;document.body.appendChild(ioTabDropRectSingleton);var __defProp$8=Object.defineProperty,__getOwnPropDesc$8=Object.getOwnPropertyDescriptor,__decorateClass$8=(decorators,target,key,kind)=>{for(var decorator,result=kind>1?void 0:kind?__getOwnPropDesc$8(target,key):target,i=decorators.length-1;i>=0;i--)(decorator=decorators[i])&&(result=(kind?decorator(target,key,result):decorator(result))||result);return kind&&result&&__defProp$8(target,key,result),result};let IoTabDragIcon=class extends IoField{static get Style(){return"\n      :host {\n        display: none;\n        position: fixed;\n        top: 0;\n        left: 0;\n        transform: translate(-50%, -50%);\n        z-index: 100000;\n        pointer-events: none;\n        border-color: var(--io_borderColorLight);\n        background-color: var(--io_bgColorLight) !important;\n        opacity: 0.75;\n      }\n      :host[dragging] {\n        display: flex;\n      }\n      :host > * {\n        display: inline-block;\n        white-space: nowrap;\n        padding: 0 var(--io_spacing);\n      }\n    "}_startX=0;_startY=0;constructor(args={}){super(args)}setStartPosition(x,y){this._startX=x,this._startY=y}updateDrag(tab,sourcePanel,x,y,root){if(!this.dragging){const dx=Math.abs(this._startX-x),dy=Math.abs(this._startY-y);return void((dx>10||dy>10)&&(this.setProperties({tab:tab,dragging:!0,dropSource:sourcePanel,dropTarget:null,dropIndex:-1}),this.style.top=y+"px",this.style.left=x+"px"))}this.style.top=y+"px",this.style.left=x+"px",root?this.detectDropTargets(x,y,root):console.error("IoTabDragIcon: No io-layout found!")}detectDropTargets(x,y,root){const m=ThemeSingleton.spacing,tabsContainers=root.querySelectorAll("io-tabs");for(let i=0;i<tabsContainers.length;i++){const tabsContainer=tabsContainers[i],targetPanel=tabsContainer.parentElement,tcr=tabsContainer.getBoundingClientRect();if(y>=tcr.top&&y<=tcr.bottom&&x>=tcr.left&&x<=tcr.right){const tabs=tabsContainer.querySelectorAll("io-tab");if(0===tabs.length)return void this.setProperties({dropTarget:targetPanel,splitDirection:"none",dropIndex:0});for(let j=0;j<tabs.length;j++){const tr=tabs[j].getBoundingClientRect(),isLast=j===tabs.length-1;if(y>=tr.top-m&&y<=tr.bottom+m&&x>=tr.left-m&&(x<=tr.right+m||isLast&&x<=tcr.right)){const dropIndex="left"===(x<tr.left+tr.width/2?"left":"right")?j:j+1;return void this.setProperties({dropTarget:targetPanel,splitDirection:"none",dropIndex:dropIndex})}}}}const panels=root.querySelectorAll("io-panel");for(let i=0;i<panels.length;i++){const targetPanel=panels[i],pr=targetPanel.getBoundingClientRect();if(y>=pr.top&&y<=pr.bottom&&x>=pr.left&&x<=pr.right){const direction=this.calculateSplitDirection(x,y,pr);return void this.setProperties({dropTarget:targetPanel,splitDirection:direction,dropIndex:-1})}}}calculateSplitDirection(x,y,rect){const rx=(x-rect.left-rect.width/2)/rect.width*2,ry=(y-rect.top-rect.height/2)/rect.height*2;return Math.abs(rx)<.5&&Math.abs(ry)<.5?"center":Math.abs(ry)>Math.abs(rx)?ry>0?"bottom":"top":rx>0?"right":"left"}endDrag(){const source=this.dropSource,target=this.dropTarget,index=this.dropIndex,direction=this.splitDirection,tab=this.tab;tab&&target&&-1!==index?(source&&source!==target&&source.removeTab(tab),target.addTab(tab,index)):tab&&source&&target&&"none"!==direction&&target.moveTabToSplit(source,tab,direction),this.cancelDrag()}cancelDrag(){this.setProperties({dragging:!1,tab:null,dropSource:null,dropTarget:null,splitDirection:"none",dropIndex:-1})}changed(){ioTabDropRectSingleton.setProperties({dropTarget:this.dropTarget,splitDirection:this.splitDirection,dropIndex:this.dropIndex}),this.render([ioIcon({value:this.tab?.icon||" "}),span({class:"label"},this.tab?.label||"")])}};__decorateClass$8([ReactiveProperty({type:Boolean,reflect:!0})],IoTabDragIcon.prototype,"dragging",2),__decorateClass$8([ReactiveProperty()],IoTabDragIcon.prototype,"tab",2),__decorateClass$8([ReactiveProperty()],IoTabDragIcon.prototype,"dropSource",2),__decorateClass$8([ReactiveProperty()],IoTabDragIcon.prototype,"dropTarget",2),__decorateClass$8([ReactiveProperty({type:String,value:"none",reflect:!0})],IoTabDragIcon.prototype,"splitDirection",2),__decorateClass$8([ReactiveProperty({type:Number,value:-1})],IoTabDragIcon.prototype,"dropIndex",2),IoTabDragIcon=__decorateClass$8([Register],IoTabDragIcon);const tabDragIconSingleton=new IoTabDragIcon;document.body.appendChild(tabDragIconSingleton);var __defProp$7=Object.defineProperty,__getOwnPropDesc$7=Object.getOwnPropertyDescriptor,__decorateClass$7=(decorators,target,key,kind)=>{for(var decorator,result=kind>1?void 0:kind?__getOwnPropDesc$7(target,key):target,i=decorators.length-1;i>=0;i--)(decorator=decorators[i])&&(result=(kind?decorator(target,key,result):decorator(result))||result);return kind&&result&&__defProp$7(target,key,result),result};const icons=[];for(const set of Object.keys(IconsetDB))for(const icon of Object.keys(IconsetDB[set])){const id=`${set}:${icon}`;icons.push({value:id,id:icon,icon:id})}const iconOptions=ioOptionSelect({selectBy:"value",label:"Icon",option:new MenuOption({options:icons})});let IoTab=class extends IoField{static get Style(){return"\n      :host {\n        display: flex;\n        position: relative;\n        height: inherit;\n        min-height: inherit;\n        /* TODO: use vars for this */\n        min-width: calc(var(--io_fieldHeight) * 1.25);\n        margin: 0;\n        margin-right: var(--io_spacing);\n        background-color: var(--io_bgColor) !important;\n        border-bottom-left-radius: 0;\n        border-bottom-right-radius: 0;\n        border-color: var(--io_borderColorLight);\n        padding-right: calc(var(--io_lineHeight) / 2);\n        padding-left: calc(var(--io_lineHeight) / 2);\n      }\n      :host[pressed] {\n        border-color: unset !important;\n        box-shadow: unset !important;\n      }\n      :host[selected] {\n        color: var(--io_colorStrong);\n        background-color: var(--io_bgColorLight) !important;\n        border-color: var(--io_borderColorStrong);\n        border-bottom-color: var(--io_bgColorLight);\n        z-index: 1;\n      }\n      :host[selected]:focus {\n        color: var(--io_colorWhite);\n        z-index: 2;\n      }\n      :host > .io-icon:not([value=' ']) {\n        margin: 0 var(--io_spacing2) 0 0;\n      }\n      :host > .io-tab-drop-marker {\n        position: absolute;\n        top: 0;\n        left: 0;\n        height: 100%;\n        background-color: var(--io_bgColorBlue);\n        border-bottom-right-radius: var(--io_borderRadius);\n      }\n      :host > span {\n        padding: 0 var(--io_spacing);\n        overflow: hidden; \n        text-overflow: ellipsis !important;\n      }\n      :host > * {\n        pointer-events: none;\n        display: inline-block;\n        white-space: nowrap;\n      }\n    "}static get Listeners(){return{click:"preventDefault",contextmenu:"onContextMenu"}}constructor(args){super(args)}onResized(){const span2=this.querySelector("span");this.overflow=span2.scrollWidth>span2.clientWidth}onTouchmove(event){event.preventDefault()}preventDefault(event){event.stopPropagation(),event.preventDefault()}onContextMenu(event){event.stopPropagation(),event.preventDefault(),this.expandContextEditor()}onPointerdown(event){event.preventDefault(),event.stopPropagation(),this.setPointerCapture(event.pointerId),tabDragIconSingleton.setStartPosition(event.clientX,event.clientY),super.onPointerdown(event),1===event.buttons&&this.focus()}onPointermove(event){if(event.preventDefault(),1!==event.buttons)return;const panel=this.parentElement.parentElement,root=this.closest("io-layout");tabDragIconSingleton.updateDrag(this.tab,panel,event.clientX,event.clientY,root)}onPointerup(event){event.preventDefault(),super.onPointerup(event),this.releasePointerCapture(event.pointerId),tabDragIconSingleton.dragging?tabDragIconSingleton.endDrag():this.onClick()}onPointercancel(event){event.preventDefault(),event.stopPropagation(),super.onPointercancel(event),tabDragIconSingleton.cancelDrag()}onPointerleave(event){event.preventDefault(),event.stopPropagation()}onClick(){this.dispatch("io-edit-tab",{tab:this.tab,key:"Select"},!0)}onDeleteClick(){this.dispatch("io-edit-tab",{tab:this.tab,key:"Backspace"},!0)}expandContextEditor(){IoContextEditorSingleton.expand({source:this,direction:"down",value:this.tab,properties:["label","icon"],config:[["label",ioString({live:!0})],["icon",iconOptions]],widget:ioButton({label:"Delete Tab",icon:"io:close",action:()=>{IoContextEditorSingleton.expanded=!1,this.onDeleteClick()}})})}onKeydown(event){event.shiftKey&&["Backspace","ArrowLeft","ArrowRight","ArrowUp","ArrowDown","Home","End"].includes(event.key)?(event.preventDefault(),this.dispatch("io-edit-tab",{tab:this.tab,key:event.key},!0)):event.shiftKey&&"Enter"===event.key?this.expandContextEditor():super.onKeydown(event)}tabMutated(){this.changed()}changed(){this.setAttribute("selected",this.tab.selected),this.setAttribute("title",this.tab.label),this.render([this.tab.selected?span({class:"io-tab-drop-marker"}):null,this.tab.icon?ioIcon({value:this.tab.icon}):null,span({class:"io-tab-label"},this.tab.label)])}};__decorateClass$7([ReactiveProperty({type:Tab})],IoTab.prototype,"tab",2),__decorateClass$7([ReactiveProperty({type:Boolean,reflect:!0})],IoTab.prototype,"overflow",2),IoTab=__decorateClass$7([Register],IoTab);const ioTab=function(arg0){return IoTab.vConstructor(arg0)};var __defProp$6=Object.defineProperty,__getOwnPropDesc$6=Object.getOwnPropertyDescriptor,__decorateClass$6=(decorators,target,key,kind)=>{for(var decorator,result=kind>1?void 0:kind?__getOwnPropDesc$6(target,key):target,i=decorators.length-1;i>=0;i--)(decorator=decorators[i])&&(result=(kind?decorator(target,key,result):decorator(result))||result);return kind&&result&&__defProp$6(target,key,result),result};let IoTabsHamburgerMenu=class extends IoElement{static get Style(){return"\n      :host {\n        display: flex;\n        flex-direction: column;\n        border: var(--io_border);\n        border-radius: calc(var(--io_borderRadius) + var(--io_spacing2));\n        border-color: var(--io_borderColorOutset);\n        background-color: var(--io_bgColorLight);\n        padding: calc(var(--io_spacing) + var(--io_borderWidth));\n        position: absolute;\n        overflow-y: auto;\n        box-shadow: 1px 1px 16px var(--io_shadowColor),\n                    1px 1px 8px var(--io_shadowColor), \n                    1px 1px 4px var(--io_shadowColor);\n      }\n      :host:not([expanded]) {\n        visibility: hidden;\n        opacity: 0;\n      }\n      :host > io-tab {\n        border-color: transparent !important;\n        background-color: var(--io_bgColorLight) !important;\n        border-radius: var(--io_borderRadius) !important;\n      }\n      :host > io-tab[selected] {\n        background-color: var(--io_bgColor) !important;\n      }\n      :host > io-tab > .io-tab-drop-marker {\n        border-radius: 0;\n      }\n    "}static get Listeners(){return{touchstart:["stopPropagation",{passive:!1}],"io-focus-to":"onIoFocusTo","io-edit-tab":"onEditTabCapture"}}constructor(args={}){super(args)}stopPropagation(event){event.stopPropagation()}onIoFocusTo(event){const source=event.detail.source,cmd=event.detail.command,siblings=Array.from(this.querySelectorAll("io-tab")),index=siblings.indexOf(source);let cmdOverride="";"ArrowDown"===cmd&&(cmdOverride="Next"),"ArrowUp"===cmd&&(cmdOverride="Prev"),"ArrowLeft"===cmd&&(cmdOverride="First"),"ArrowRight"===cmd&&(cmdOverride="Last"),cmdOverride&&("Next"===cmdOverride?siblings[(index+1)%siblings.length].focus():"Prev"===cmdOverride?siblings[(index-1+siblings.length)%siblings.length].focus():"First"===cmdOverride?siblings[0].focus():"Last"===cmdOverride&&siblings[siblings.length-1].focus(),event.stopPropagation())}onEditTabCapture(event){event.stopPropagation(),this.onEditTab(event),this.expanded=!1}expand(props){this.setProperties({tabs:props.tabs,expanded:!0}),this.onEditTab=props.onEditTab,nudge(this,props.source,props.direction),this.debounce(this.onExpand)}onExpand(){this.querySelector("[selected]")?.focus()}changed(){this.render([...this.tabs.map(tab=>ioTab({tab:tab}))])}};var value;((obj,key,value)=>{key in obj?__defProp$6(obj,key,{enumerable:!0,configurable:!0,writable:!0,value:value}):obj[key]=value})(IoTabsHamburgerMenu,"vConstructor"+"",value),__decorateClass$6([ReactiveProperty({type:NodeArray,init:"this"})],IoTabsHamburgerMenu.prototype,"tabs",2),__decorateClass$6([ReactiveProperty({type:Boolean,reflect:!0})],IoTabsHamburgerMenu.prototype,"expanded",2),IoTabsHamburgerMenu=__decorateClass$6([Register],IoTabsHamburgerMenu);const ioTabsHamburgerMenuSingleton=new IoTabsHamburgerMenu;IoOverlaySingleton.appendChild(ioTabsHamburgerMenuSingleton);var __defProp$5=Object.defineProperty,__getOwnPropDesc$5=Object.getOwnPropertyDescriptor,__decorateClass$5=(decorators,target,key,kind)=>{for(var decorator,result=kind>1?void 0:kind?__getOwnPropDesc$5(target,key):target,i=decorators.length-1;i>=0;i--)(decorator=decorators[i])&&(result=(kind?decorator(target,key,result):decorator(result))||result);return kind&&result&&__defProp$5(target,key,result),result};let IoTabsHamburger=class extends IoField{static get Style(){return"\n      :host {\n        display: flex;\n        flex-shrink: 0;\n      }\n    "}constructor(args){super(args)}onClick(){ioTabsHamburgerMenuSingleton.expand({source:this,direction:"over",tabs:this.tabs,onEditTab:this.onEditTab})}onEditTab(event){this.dispatch("io-edit-tab",{tab:event.detail.tab,key:event.detail.key},!0)}changed(){this.render([ioIcon({value:"io:hamburger"})])}};__decorateClass$5([ReactiveProperty({type:NodeArray,init:"this"})],IoTabsHamburger.prototype,"tabs",2),IoTabsHamburger=__decorateClass$5([Register],IoTabsHamburger);const ioTabsHamburger=function(arg0){return IoTabsHamburger.vConstructor(arg0)};var __defProp$4=Object.defineProperty,__getOwnPropDesc$4=Object.getOwnPropertyDescriptor,__decorateClass$4=(decorators,target,key,kind)=>{for(var decorator,result=kind>1?void 0:kind?__getOwnPropDesc$4(target,key):target,i=decorators.length-1;i>=0;i--)(decorator=decorators[i])&&(result=(kind?decorator(target,key,result):decorator(result))||result);return kind&&result&&__defProp$4(target,key,result),result};let IoTabs=class extends IoElement{static get Style(){return'\n      :host {\n        display: flex;\n        background-color: var(--io_bgColorStrong);\n        padding-top: var(--io_spacing);\n        padding-left: var(--io_spacing);\n        padding-right: var(--io_spacing);\n      }\n      :host io-tab {\n        transition: opacity 2s cubic-bezier(0.4, 0, 0.2, 1);\n      }\n      :host:not([overflow="-1"]) io-tab {\n        /* TODO: make niceer animations */\n        pointer-events: none;\n        opacity: 0;\n      }\n      :host[overflow="-1"] io-tabs-hamburger {\n        /* TODO: make niceer animations */\n        display: none;\n      }\n      :host > io-tabs-hamburger {\n        margin-bottom: var(--io_spacing);\n        /* transition: opacity 1s cubic-bezier(0.4, 0, 0.2, 1); */\n      }\n      :host > io-menu-item {\n        margin-left: auto;\n        flex-shrink: 0;\n        opacity: 0.125;\n        transition: transform 0.2s cubic-bezier(0.4, 0, 0.2, 1), opacity linear 0.2s;\n      }\n      :host > io-menu-item:focus,\n      :host > io-menu-item:hover {\n        opacity: 1;\n      }\n      :host > io-menu-item > .label,\n      :host > io-menu-item > .icon,\n      :host > io-menu-item > .hasmore {\n        display: none;\n      }\n    '}constructor(args){super(args)}tabsMutated(){this.changed(),this.overflow=-1,this.onResized()}onResized(){const lastElement=this.children[this.children.length-1];if(!lastElement)return;const rect=this.getBoundingClientRect(),lastElementRect=lastElement.getBoundingClientRect();-1===this.overflow?lastElementRect.right>rect.right&&(this.overflow=rect.width):rect.width>this.overflow+32&&(this.overflow=-1)}changed(){const hasOptions=this.addMenuOption&&this.addMenuOption.options?.length>0;this.render([ioTabsHamburger({tabs:this.tabs}),...this.tabs.map(tab=>ioTab({tab:tab})),hasOptions?ioMenuItem({class:"io-tabs-add-tab",icon:"io:box_fill_plus",direction:"down",option:this.addMenuOption}):null])}};__decorateClass$4([ReactiveProperty({type:NodeArray,init:"this"})],IoTabs.prototype,"tabs",2),__decorateClass$4([ReactiveProperty({type:Number,value:-1,reflect:!0})],IoTabs.prototype,"overflow",2),__decorateClass$4([ReactiveProperty({type:MenuOption})],IoTabs.prototype,"addMenuOption",2),IoTabs=__decorateClass$4([Register],IoTabs);const ioTabs=function(arg0){return IoTabs.vConstructor(arg0)};var __defProp$3=Object.defineProperty,__getOwnPropDesc$3=Object.getOwnPropertyDescriptor,__decorateClass$3=(decorators,target,key,kind)=>{for(var decorator,result=kind>1?void 0:kind?__getOwnPropDesc$3(target,key):target,i=decorators.length-1;i>=0;i--)(decorator=decorators[i])&&(result=(kind?decorator(target,key,result):decorator(result))||result);return kind&&result&&__defProp$3(target,key,result),result};function sizeToFlex(size){return"auto"===size?"1 1 auto":`0 0 ${size}px`}let IoLayout=class extends IoElement{static get Style(){return"\n      :host {\n        position: relative;\n        display: flex;\n        flex: 1 1 100%;\n        max-width: 100%;\n        max-height: 100%;\n      }\n      :host > io-split {\n        max-width: 100%;\n        max-height: 100%;\n      }\n      :host[frozen] .io-close-icon,\n      :host[frozen] .io-tabs-add-tab {\n        display: none;\n      }\n    "}changed(){this.render([ioSplit({split:this.split,style:{flex:this.split.flex},elements:this.elements,addMenuOption:this.addMenuOption})])}};__decorateClass$3([ReactiveProperty({type:Object})],IoLayout.prototype,"split",2),__decorateClass$3([ReactiveProperty(Array)],IoLayout.prototype,"elements",2),__decorateClass$3([Property({type:MenuOption})],IoLayout.prototype,"addMenuOption",2),__decorateClass$3([ReactiveProperty({type:Boolean,value:!1,reflect:!0})],IoLayout.prototype,"frozen",2),IoLayout=__decorateClass$3([Register],IoLayout);const ioLayout=function(arg0){return IoLayout.vConstructor(arg0)};var __defProp$2=Object.defineProperty,__getOwnPropDesc$2=Object.getOwnPropertyDescriptor,__decorateClass$2=(decorators,target,key,kind)=>{for(var decorator,result=kind>1?void 0:kind?__getOwnPropDesc$2(target,key):target,i=decorators.length-1;i>=0;i--)(decorator=decorators[i])&&(result=(kind?decorator(target,key,result):decorator(result))||result);return kind&&result&&__defProp$2(target,key,result),result};let IoPanel=class extends IoElement{static get Style(){return"\n      :host {\n        display: flex;\n        overflow: hidden;\n        flex-direction: column;\n        flex: 1 1 auto;\n        background-color: var(--io_bgColorLight);\n      }\n      :host > io-selector {\n        margin-top: calc(-1 * var(--io_borderWidth));\n        border-top: var(--io_border);\n        border-top-color: var(--io_borderColorStrong);\n      }\n    "}static get Listeners(){return{"io-edit-tab":"onEditTab"}}onEditTab(event){event.stopPropagation();const tab=event.detail.tab,key=event.detail.key,index=this.panel.tabs.indexOf(tab);if(-1!==index)switch(key){case"Select":this.selectTab(tab);break;case"Backspace":this.removeTab(tab);break;case"ArrowLeft":this.moveTab(tab,index-1);break;case"ArrowRight":this.moveTab(tab,index+1)}else console.warn("IoTabs:Tab not found in panel",tab)}onNewTabClicked(event){event.stopPropagation();const option=event.detail.option;if(option.id&&0===option.options.length){const tab=new Tab({id:option.id,label:option.label,icon:option.icon});this.addTab(tab);const addMenuOption=this.querySelector(".io-tabs-add-tab");addMenuOption&&(addMenuOption.expanded=!1)}}selectIndex(index){index=Math.min(index,this.panel.tabs.length-1),this.panel.setSelected(this.panel.tabs[index].id),this.debounce(this.focusTabDebounced,index)}selectTab(tab){const index=this.panel.tabs.indexOf(tab);this.panel.setSelected(tab.id),this.debounce(this.focusTabDebounced,index)}moveTabToSplit(sourcePanel,tab,direction){const parentSplit=this.parentElement;"center"===direction?(sourcePanel.removeTab(tab),this.addTab(tab)):parentSplit.moveTabToSplit(sourcePanel,this.panel,tab,direction)}addTab(tab,index){const existingIndex=this.panel.tabs.findIndex(t=>t.id===tab.id);-1!==existingIndex&&(console.warn(`IoPanel.addTab: Duplicate tab id "${tab.id}", removing duplicate tab.`),this.panel.tabs.splice(existingIndex,1)),index=index??this.panel.tabs.length,index=Math.min(index,this.panel.tabs.length),this.panel.tabs.splice(index,0,tab),this.selectIndex(index)}removeTab(tab){const index=this.panel.tabs.indexOf(tab);if(this.panel.tabs.splice(index,1),this.panel.tabs.length>0){const newIndex=Math.min(index,this.panel.tabs.length-1);this.selectIndex(newIndex)}else{const parentSplit=this.parentElement;parentSplit.parentElement instanceof IoLayout&&1===parentSplit.split.children.length||this.dispatch("io-panel-remove",{panel:this.panel},!0)}}moveTab(tab,index){index=Math.max(Math.min(index,this.panel.tabs.length-1),0);const currIndex=this.panel.tabs.findIndex(t=>t.id===tab.id);this.panel.tabs.splice(currIndex,1),index=Math.min(index,this.panel.tabs.length),this.panel.tabs.splice(index,0,tab),this.selectIndex(index)}focusTabDebounced(index){const tabs=Array.from(this.querySelectorAll("io-tab"));tabs[index=Math.min(index,tabs.length-1)]&&tabs[index].focus()}panelMutated(){this.debounce(this.changed)}getAddMenuOption(){if(this.addMenuOption&&this.addMenuOption.options?.length>0)return this.addMenuOption;if(!this.elements||0===this.elements.length)return;const existingTabIds=new Set(this.panel.tabs.map(tab=>tab.id)),options=this.elements.filter(el=>el.props?.id&&!existingTabIds.has(el.props.id)).map(el=>new MenuOption({id:el.props.id,label:el.props.label??el.props.id,icon:el.props.icon??""}));return 0!==options.length?new MenuOption({options:options}):void 0}changed(){this.render([ioTabs({tabs:this.panel.tabs,addMenuOption:this.getAddMenuOption(),"@io-menu-option-clicked":this.onNewTabClicked}),ioSelector({selected:this.panel.getSelected(),elements:this.elements,anchor:""})])}};__decorateClass$2([ReactiveProperty({type:Object})],IoPanel.prototype,"panel",2),__decorateClass$2([ReactiveProperty(Array)],IoPanel.prototype,"elements",2),__decorateClass$2([Property({type:MenuOption})],IoPanel.prototype,"addMenuOption",2),IoPanel=__decorateClass$2([Register],IoPanel);const ioPanel=function(arg0){return IoPanel.vConstructor(arg0)};var __defProp$1=Object.defineProperty,__getOwnPropDesc$1=Object.getOwnPropertyDescriptor,__decorateClass$1=(decorators,target,key,kind)=>{for(var decorator,result=kind>1?void 0:kind?__getOwnPropDesc$1(target,key):target,i=decorators.length-1;i>=0;i--)(decorator=decorators[i])&&(result=(kind?decorator(target,key,result):decorator(result))||result);return kind&&result&&__defProp$1(target,key,result),result};function parseFlexBasis(flex){const basis=flex.trim().split(/\s+/)[2]??"auto";if("auto"===basis||"0"===basis)return 240;const match=basis.match(/^(\d+(?:\.\d+)?)px$/);return match?parseInt(match[1],10):240}function hasFlexGrow(flex){const grow=parseFloat(flex.trim().split(/\s+/)[0]??"0");return!isNaN(grow)&&grow>0}let IoSplit=class extends IoElement{static get Style(){return"\n      :host {\n        position: relative;\n        display: flex;\n        overflow: hidden;\n        flex-direction: row;\n      }\n      :host[orientation='vertical'] {\n        flex-direction: column;\n      }\n      :host:not([hasvisibleflexgrow]) > .io-split-last-visible {\n        flex: 1 1 auto !important;\n      }\n      :host:not([showveil]) > .io-split-veil {\n        display: none;\n        pointer-events: none;\n      }\n      :host[showveil] > .io-split-veil {\n        position: absolute;\n        inset: 0;\n        z-index: 2;\n        background-color: rgba(0, 0, 0, 0.5);\n        pointer-events: auto;\n        cursor: pointer;\n      }\n    "}static get Listeners(){return{"io-divider-move":"onDividerMove","io-divider-move-end":"onDividerMoveEnd","io-panel-remove":"onPanelRemove","io-split-remove":"onSplitRemove","io-split-consolidate":"onSplitConsolidate","io-drawer-expanded-changed":"onDrawerExpandedChanged"}}constructor(args){super(args)}onResized(){this.debounce(this.calculateCollapsedDrawersDebounced)}calculateCollapsedDrawersDebounced(){this.calculateCollapsedDrawers()}calculateCollapsedDrawers(){const rect=this.getBoundingClientRect();if(0===rect.width&&0===rect.height)return;const split=this.split,children=split.children,orientation=split.orientation;let size=Infinity,minSize=0;const sizes=[];size="horizontal"===orientation?rect.width:rect.height,children.forEach(child=>{const childMinSize=parseFlexBasis(child.flex);minSize+=childMinSize,sizes.push(childMinSize)});let collapsePriority="end";const lastIndex=children.length-1,firstGrows=hasFlexGrow(children[0].flex),lastGrows=hasFlexGrow(children[lastIndex].flex),bothGrow=firstGrows&&lastGrows;!firstGrows&&!lastGrows?collapsePriority=sizes[0]<=sizes[lastIndex]?"start":"end":bothGrow||(collapsePriority=lastGrows?"start":"end");const collapsedSize="start"===collapsePriority?sizes[0]:sizes[sizes.length-1];size<minSize?children.length>=3&&size<minSize-collapsedSize?this.setProperties({leadingDrawer:children[0],trailingDrawer:children[lastIndex]}):children.length>=2&&("start"===collapsePriority?this.setProperties({leadingDrawer:children[0],trailingDrawer:null}):this.setProperties({leadingDrawer:null,trailingDrawer:children[lastIndex]})):this.setProperties({leadingDrawer:null,trailingDrawer:null})}onDividerMove(event){event.stopPropagation();const orientation=this.split.orientation,dividerSize=ThemeSingleton.spacing3,minSize=4*ThemeSingleton.fieldHeight,leftSplit=event.detail.element.previousElementSibling,rightSplit=event.detail.element.nextElementSibling,leftRect=leftSplit.getBoundingClientRect(),rightRect=rightSplit.getBoundingClientRect(),combinedSize="horizontal"===orientation?leftRect.width+rightRect.width:leftRect.height+rightRect.height,pointerPos="horizontal"===orientation?event.detail.clientX-leftRect.left-dividerSize/2:event.detail.clientY-leftRect.top-dividerSize/2,leftSize=Math.max(minSize,Math.min(combinedSize-minSize,pointerPos)),rightSize=combinedSize-leftSize;leftSplit.style.flex=`0 0 ${leftSize}px`,rightSplit.style.flex=`0 0 ${rightSize}px`}onDividerMoveEnd(event){event.stopPropagation();const orientation=this.split.orientation,childrenElements=this.querySelectorAll(":scope > io-split, :scope > io-panel");for(let i=0;i<childrenElements.length;i++){const child=childrenElements[i],childmodel=child instanceof IoSplit?child.split:child.panel,childRect=child.getBoundingClientRect(),childSize="horizontal"===orientation?childRect.width:childRect.height;hasFlexGrow(childmodel.flex)?child.style.flex=childmodel.flex:childmodel.flex=`0 0 ${childSize}px`}this.ensureOneHasFlexGrow(),this.debounce(this.calculateCollapsedDrawersDebounced)}onPanelRemove(event){event.stopPropagation();for(let i=this.split.children.length;i--;){const child=this.split.children[i];child instanceof Panel&&0===child.tabs.length&&this.split.children.splice(i,1)}0===this.split.children.length?this.dispatch("io-split-remove",{split:this.split},!0):1===this.split.children.length&&this.dispatch("io-split-consolidate",{split:this.split},!0),this.ensureOneHasFlexGrow()}onSplitRemove(event){if(event.detail.split===this.split)return;event.stopPropagation();const index=this.split.children.indexOf(event.detail.split);-1!==index&&(this.split.children.splice(index,1),1===this.split.children.length&&this.dispatch("io-split-consolidate",{split:this.split},!0),this.ensureOneHasFlexGrow())}ensureOneHasFlexGrow(){if(!this.split.children.some(child=>hasFlexGrow(child.flex))&&this.split.children.length>0){const i=Math.min(1,this.split.children.length-1);this.split.children[i].flex="1 1 auto"}this.hasVisibleFlexGrow=this.split.children.some((child,i)=>(0!==i||null===this.leadingDrawer)&&((i!==this.split.children.length-1||null===this.trailingDrawer)&&hasFlexGrow(child.flex)))}onSplitConsolidate(event){event.detail.split!==this.split&&(event.stopPropagation(),this.consolidateChild(event.detail.split),1===this.split.children.length&&this.dispatch("io-split-consolidate",{split:this.split},!0))}convertToSplit(panel,first,second,orientation){const index=this.split.children.indexOf(panel),newSplit=new Split({type:"split",orientation:orientation,children:[]});newSplit.children.push(first,second),this.split.children.splice(index,1,newSplit)}consolidateChild(childSplit){const index=this.split.children.indexOf(childSplit);if(-1===index||0===childSplit.children.length)return;const soleChild=childSplit.children[0];soleChild instanceof Panel?(soleChild.flex="1 1 auto",this.split.children.splice(index,1,soleChild)):soleChild instanceof Split&&(this.split.orientation=soleChild.orientation,this.split.children.splice(index,1,...soleChild.children),this.ensureOneHasFlexGrow())}moveTabToSplit(sourcePanel,panel,tab,direction){const index=this.split.children.indexOf(panel);let orientation="horizontal";"top"!==direction&&"bottom"!==direction||(orientation="vertical");let newIndex=["left","top"].includes(direction)?index-1:index+1;this.split.orientation===orientation?(newIndex=Math.max(0,newIndex),this.split.children.splice(newIndex,0,new Panel({type:"panel",tabs:[tab]})),sourcePanel.removeTab(tab)):(panel.tabs.length>1||panel!==sourcePanel.panel)&&(sourcePanel.removeTab(tab),-1===newIndex?this.convertToSplit(panel,new Panel({type:"panel",tabs:[tab]}),panel,orientation):this.convertToSplit(panel,panel,new Panel({type:"panel",tabs:[tab]}),orientation))}onDrawerExpandedChanged(event){event.stopPropagation(),this.updateVeil()}updateVeil(){const drawers=[...this.querySelectorAll(":scope > io-drawer")];this.showVeil=drawers.some(drawer=>drawer.expanded)}collapseAllDrawers(){[...this.querySelectorAll(":scope > io-drawer")].forEach(drawer=>drawer.expanded=!1)}onVeilClick(event){event.stopPropagation(),this.collapseAllDrawers()}splitMutated(){this.calculateCollapsedDrawers(),this.changed()}splitChanged(){this.calculateCollapsedDrawers()}changed(){this.setAttribute("orientation",this.split.orientation);const childCount=this.split.children.length,lastIndex=childCount-1,orientation=this.split.orientation,vChildren=[];vChildren.push(div({class:"io-split-veil","@click":this.onVeilClick})),null!==this.leadingDrawer&&vChildren.push(ioDrawer({orientation:orientation,direction:"leading",child:this.leadingDrawer,elements:this.elements,addMenuOption:this.addMenuOption}));for(let i=0;i<childCount;i++){if(0===i&&null!==this.leadingDrawer)continue;if(i===lastIndex&&null!==this.trailingDrawer)continue;const isLastVisible=i===lastIndex-1&&null!==this.trailingDrawer||i===lastIndex&&null===this.trailingDrawer,child=this.split.children[i];child instanceof Split?vChildren.push(ioSplit({split:child,style:{flex:child.flex},class:isLastVisible?"io-split-last-visible":"",elements:this.elements,addMenuOption:this.addMenuOption})):child instanceof Panel?vChildren.push(ioPanel({panel:child,style:{flex:child.flex},class:isLastVisible?"io-split-last-visible":"",elements:this.elements,addMenuOption:this.addMenuOption})):console.warn("IOSplit: Invalid child type",child),isLastVisible||vChildren.push(ioDivider({orientation:orientation}))}null!==this.trailingDrawer&&vChildren.push(ioDrawer({orientation:orientation,direction:"trailing",child:this.trailingDrawer,elements:this.elements,addMenuOption:this.addMenuOption})),this.render(vChildren)}};__decorateClass$1([ReactiveProperty({type:Object})],IoSplit.prototype,"split",2),__decorateClass$1([ReactiveProperty(Array)],IoSplit.prototype,"elements",2),__decorateClass$1([ReactiveProperty({type:Object,value:null})],IoSplit.prototype,"leadingDrawer",2),__decorateClass$1([ReactiveProperty({type:Object,value:null})],IoSplit.prototype,"trailingDrawer",2),__decorateClass$1([Property({type:MenuOption})],IoSplit.prototype,"addMenuOption",2),__decorateClass$1([ReactiveProperty({type:Boolean,value:!0,reflect:!0})],IoSplit.prototype,"hasVisibleFlexGrow",2),__decorateClass$1([ReactiveProperty({type:Boolean,value:!1,reflect:!0})],IoSplit.prototype,"showVeil",2),IoSplit=__decorateClass$1([Register],IoSplit);const ioSplit=function(arg0){return IoSplit.vConstructor(arg0)};var __defProp=Object.defineProperty,__getOwnPropDesc=Object.getOwnPropertyDescriptor,__decorateClass=(decorators,target,key,kind)=>{for(var decorator,result=kind>1?void 0:kind?__getOwnPropDesc(target,key):target,i=decorators.length-1;i>=0;i--)(decorator=decorators[i])&&(result=(kind?decorator(target,key,result):decorator(result))||result);return kind&&result&&__defProp(target,key,result),result};let IoDrawer=class extends IoElement{static get Style(){return'\n      :host {\n        z-index: 2;\n        pointer-events: auto;\n        position: relative;\n      }\n      :host[orientation="horizontal"] {\n        top: 0;\n        bottom: 0;\n        width: var(--io_lineHeight) !important;\n        cursor: ew-resize;\n      }\n      :host[orientation="vertical"] {\n        left: 0;\n        right: 0;\n        height: var(--io_lineHeight) !important;\n        cursor: ns-resize;\n      }\n      :host[orientation="horizontal"][direction="trailing"] {\n        /* flex-direction: row-reverse; */\n      }\n      :host[orientation="vertical"][direction="trailing"] {\n        /* flex-direction: column-reverse; */\n      }\n\n      :host > .io-drawer-content {\n        position: relative;\n        overflow: hidden;\n        inset: 0;\n        display: flex;\n      }\n      :host[orientation="horizontal"] > .io-drawer-content {\n        transform: translateX(0);\n        position: relative;\n        flex-direction: row;\n        height: 100%;\n        width: var(--io-drawer-size);\n        transition: transform 0.125s ease-out;\n      }\n      :host[orientation="horizontal"][direction="leading"][expanded] > .io-drawer-content {\n        transform: translateX(calc(var(--io-drawer-size) - var(--io_lineHeight)));\n      }\n      :host[orientation="horizontal"][direction="trailing"][expanded] > .io-drawer-content {\n        transform: translateX(calc(var(--io-drawer-size) * -1 + var(--io_lineHeight)));\n      }\n\n      :host > .io-drawer-content > .io-drawer-handle {\n        display: flex;\n        align-items: center;\n        background-color: var(--io_bgColorLight);\n        border: var(--io_border);\n        border-top: 0;\n        border-bottom: 0;\n        border-color: var(--io_borderColorInset);\n        @apply --unselectable;\n      }\n\n      :host > .io-drawer-content > io-panel,\n      :host > .io-drawer-content > io-split {\n        flex: 0 0 auto;\n      }\n      /* :host[orientation="horizontal"] > .io-drawer-handle {\n        width: var(--io_lineHeight);\n        border-width: 0 var(--io_borderWidth);\n      }\n      :host[orientation="vertical"] > .io-drawer-handle {\n        height: var(--io_lineHeight);\n        border-width: var(--io_borderWidth) 0;\n      }\n      :host > .io-drawer-handle:hover {\n        background-color: var(--io_bgColorLight);\n      }\n      :host > .io-drawer-handle:active {\n        background-color: var(--io_bgColorBlue);\n      }\n      :host > .io-drawer-handle > io-icon {\n        opacity: 0.5;\n        transition: transform 0.2s ease-out;\n      }\n      :host[expanded] > .io-drawer-handle > io-icon {\n        opacity: 1;\n      }\n      \n      :host[orientation="horizontal"] > .io-drawer-content {\n        width: 0;\n        height: 100%;\n      }\n      :host[orientation="horizontal"][expanded] > .io-drawer-content {\n        width: var(--io-drawer-size);\n      }\n      :host[orientation="vertical"] > .io-drawer-content {\n        height: 0;\n        width: 100%;\n      }\n      :host[orientation="vertical"][expanded] > .io-drawer-content {\n        height: var(--io-drawer-size);\n      }\n      :host > .io-drawer-content > io-panel,\n      :host > .io-drawer-content > io-split {\n        flex: 1 1 auto;\n      }\n      :host[orientation="horizontal"] > .io-drawer-content > io-panel,\n      :host[orientation="horizontal"] > .io-drawer-content > io-split {\n        min-width: var(--io-drawer-size);\n      }\n      :host[orientation="vertical"] > .io-drawer-content > io-panel,\n      :host[orientation="vertical"] > .io-drawer-content > io-split {\n        min-height: var(--io-drawer-size);\n      } */\n    '}constructor(args){super(args)}onClick(event){event.preventDefault(),event.stopPropagation(),this.expanded=!this.expanded}expandedChanged(){console.log("onExpandedChanged",this.expanded),this.dispatch("io-drawer-expanded-changed",void 0,!0)}changed(){const drawerSize=parseFlexBasis(this.child.flex);this.style.setProperty("--io-drawer-size",`${drawerSize+ThemeSingleton.lineHeight}px`);const style="horizontal"===this.orientation?{width:`${drawerSize}px`}:{height:`${drawerSize}px`};let childVDOM=null;this.child&&(this.child instanceof Split?childVDOM=ioSplit({split:this.child,style:style,elements:this.elements,addMenuOption:this.addMenuOption}):this.child instanceof Panel&&(childVDOM=ioPanel({panel:this.child,style:style,elements:this.elements,addMenuOption:this.addMenuOption})));let icon="";icon="horizontal"===this.orientation?"leading"===this.direction?"io:triangle_right":"io:triangle_left":"leading"===this.direction?"io:triangle_down":"io:triangle_up",this.render([div({class:"io-drawer-content"},[div({class:"io-drawer-handle","@click":this.onClick},[ioIcon({value:icon,size:"small"})]),childVDOM])])}};__decorateClass([ReactiveProperty({type:String,value:"horizontal",reflect:!0})],IoDrawer.prototype,"orientation",2),__decorateClass([ReactiveProperty({type:String,value:"leading",reflect:!0})],IoDrawer.prototype,"direction",2),__decorateClass([ReactiveProperty({type:Boolean,value:!1,reflect:!0})],IoDrawer.prototype,"expanded",2),__decorateClass([ReactiveProperty({type:Object})],IoDrawer.prototype,"child",2),__decorateClass([ReactiveProperty(Array)],IoDrawer.prototype,"elements",2),__decorateClass([ReactiveProperty({type:MenuOption})],IoDrawer.prototype,"addMenuOption",2),IoDrawer=__decorateClass([Register],IoDrawer);const ioDrawer=function(args){return IoDrawer.vConstructor(args)};export{IoDivider,IoDrawer,IoLayout,IoPanel,IoSplit,IoTab,IoTabs,IoTabsHamburger,Panel,Split,Tab,hasFlexGrow,ioDivider,ioDrawer,ioLayout,ioPanel,ioSplit,ioTab,ioTabDropRectSingleton,ioTabs,ioTabsHamburger,ioTabsHamburgerMenuSingleton,parseFlexBasis,sizeToFlex,tabDragIconSingleton};
//# sourceMappingURL=index.js.map
