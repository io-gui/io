{"version":3,"file":"IoSplit.js","sourceRoot":"","sources":["../../src/elements/IoSplit.ts"],"names":[],"mappings":"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","sourcesContent":["import { Register, ReactiveProperty, VDOMElement, IoElement, IoElementProps, Property, ThemeSingleton, div } from '@io-gui/core'\nimport { MenuOption } from '@io-gui/menus'\nimport { IoPanel, ioPanel } from './IoPanel.js'\nimport { ioDivider } from './IoDivider.js'\nimport { ioDrawer, IoDrawer } from './IoDrawer.js'\nimport { Split, SplitOrientation } from '../nodes/Split.js'\nimport { Panel } from '../nodes/Panel.js'\nimport { Tab } from '../nodes/Tab.js'\n\nexport function parseFlexBasis(flex: string): number {\n  const parts = flex.trim().split(/\\s+/)\n  const basis = parts[2] ?? 'auto'\n  if (basis === 'auto' || basis === '0') return 240\n  const match = basis.match(/^(\\d+(?:\\.\\d+)?)px$/)\n  return match ? parseInt(match[1], 10) : 240\n}\n\nexport function hasFlexGrow(flex: string): boolean {\n  const grow = parseFloat(flex.trim().split(/\\s+/)[0] ?? '0')\n  return !isNaN(grow) && grow > 0\n}\n\nexport type SplitDirection = 'none' | 'left' | 'right' | 'top' | 'bottom' | 'center'\n\nexport type IoSplitProps = IoElementProps & {\n  split: Split\n  elements: VDOMElement[]\n  addMenuOption?: MenuOption\n}\n\n@Register\nexport class IoSplit extends IoElement {\n  static get Style() {\n    return /* css */`\n      :host {\n        position: relative;\n        display: flex;\n        overflow: hidden;\n        flex-direction: row;\n      }\n      :host[orientation='vertical'] {\n        flex-direction: column;\n      }\n      :host:not([hasvisibleflexgrow]) > .io-split-last-visible {\n        flex: 1 1 auto !important;\n      }\n      :host > .io-split-veil {\n        position: absolute;\n        opacity: 0;\n        transition: opacity 0.125s ease-out;\n        background-color: rgba(0, 0, 0, 1);\n        pointer-events: none;\n        z-index: 2;\n        inset: 0;\n      }\n      :host[showveil] > .io-split-veil {\n        display: block;\n        opacity: 0.5;\n        pointer-events: auto;\n        cursor: pointer;\n      }\n    `\n  }\n\n  @ReactiveProperty({type: Object})\n  declare split: Split\n\n  @ReactiveProperty(Array)\n  declare elements: VDOMElement[]\n\n  @ReactiveProperty({type: Object, value: null})\n  declare leadingDrawer: Split | Panel | null\n\n  @ReactiveProperty({type: Object, value: null})\n  declare trailingDrawer: Split | Panel | null\n\n  @Property({type: MenuOption})\n  declare addMenuOption: MenuOption | undefined\n\n  @ReactiveProperty({type: Boolean, value: true, reflect: true})\n  declare hasVisibleFlexGrow: boolean\n\n  @ReactiveProperty({type: Boolean, value: false, reflect: true})\n  declare showVeil: boolean\n\n  static get Listeners() {\n    return {\n      'io-divider-move': 'onDividerMove',\n      'io-divider-move-end': 'onDividerMoveEnd',\n      'io-panel-remove': 'onPanelRemove',\n      'io-split-remove': 'onSplitRemove',\n      'io-split-consolidate': 'onSplitConsolidate',\n      'io-drawer-expanded-changed': 'onDrawerExpandedChanged',\n    }\n  }\n  // TODO: Make sure one panel is available even when all tabs are removed.\n\n  constructor(args: IoSplitProps) {\n    super(args)\n  }\n\n  onResized() {\n    this.debounce(this.calculateCollapsedDrawersDebounced)\n  }\n  calculateCollapsedDrawersDebounced() {\n    this.calculateCollapsedDrawers()\n  }\n  calculateCollapsedDrawers() {\n    const rect = this.getBoundingClientRect()\n    if (rect.width === 0 && rect.height === 0) return\n\n    const split = this.split\n    const children = split.children\n    const orientation = split.orientation\n    let size: number = Infinity\n    let minSize = 0\n    const sizes: Array<number> = []\n\n    if (orientation === 'horizontal') {\n      size = rect.width\n    } else {\n      size = rect.height\n    }\n    children.forEach(child => {\n      const childMinSize = parseFlexBasis(child.flex)\n      minSize += childMinSize\n      sizes.push(childMinSize)\n    })\n\n    let collapsePriority: 'start' | 'end' = 'end'\n    const lastIndex = children.length - 1\n    const firstGrows = hasFlexGrow(children[0].flex)\n    const lastGrows = hasFlexGrow(children[lastIndex].flex)\n    const bothGrow = firstGrows && lastGrows\n    const neitherGrows = !firstGrows && !lastGrows\n    if (neitherGrows) {\n      collapsePriority = sizes[0] <= sizes[lastIndex] ? 'start' : 'end'\n    } else if (!bothGrow) {\n      collapsePriority = lastGrows ? 'start' : 'end'\n    }\n    const collapsedSize = collapsePriority === 'start' ? sizes[0] : sizes[sizes.length - 1]\n\n    if (size < minSize) {\n      if (children.length >= 3 && size < (minSize - collapsedSize)) {\n        this.setProperties({\n          leadingDrawer: children[0],\n          trailingDrawer: children[lastIndex],\n        })\n      } else if (children.length >= 2) {\n        if (collapsePriority === 'start') {\n          this.setProperties({\n            leadingDrawer: children[0],\n            trailingDrawer: null,\n          })\n        } else {\n          this.setProperties({\n            leadingDrawer: null,\n            trailingDrawer: children[lastIndex],\n          })\n        }\n      }\n\n    } else {\n      this.setProperties({\n        leadingDrawer: null,\n        trailingDrawer: null,\n      })\n    }\n  }\n\n  onDividerMove(event: CustomEvent) {\n    event.stopPropagation()\n\n    const orientation = this.split.orientation\n    const dividerSize = ThemeSingleton.spacing3\n    const minSize = ThemeSingleton.fieldHeight * 4\n\n    const leftSplit = event.detail.element.previousElementSibling as HTMLElement\n    const rightSplit = event.detail.element.nextElementSibling as HTMLElement\n    const leftRect = leftSplit.getBoundingClientRect()\n    const rightRect = rightSplit.getBoundingClientRect()\n\n    const combinedSize = orientation === 'horizontal'\n      ? leftRect.width + rightRect.width\n      : leftRect.height + rightRect.height\n\n    const pointerPos = orientation === 'horizontal'\n      ? event.detail.clientX - leftRect.left - dividerSize / 2\n      : event.detail.clientY - leftRect.top - dividerSize / 2\n\n    const leftSize = Math.max(minSize, Math.min(combinedSize - minSize, pointerPos))\n    const rightSize = combinedSize - leftSize\n\n    leftSplit.style.flex = `0 0 ${leftSize}px`\n    rightSplit.style.flex = `0 0 ${rightSize}px`\n  }\n\n  onDividerMoveEnd(event: CustomEvent) {\n    event.stopPropagation()\n    const orientation = this.split.orientation\n\n    const childrenElements = this.querySelectorAll(':scope > io-split, :scope > io-panel')\n    for (let i = 0; i < childrenElements.length; i++) {\n      const child = childrenElements[i] as IoSplit | IoPanel\n      const childmodel = child instanceof IoSplit ? child.split : child.panel\n\n      const childRect = child.getBoundingClientRect()\n      const childSize = orientation === 'horizontal' ? childRect.width : childRect.height\n\n      if (hasFlexGrow(childmodel.flex)) {\n        // TODO: Reconsider. Test\n        child.style.flex = childmodel.flex\n      } else {\n        childmodel.flex = `0 0 ${childSize}px`\n      }\n    }\n\n    this.ensureOneHasFlexGrow()\n    this.debounce(this.calculateCollapsedDrawersDebounced)\n  }\n\n  onPanelRemove(event: CustomEvent) {\n    event.stopPropagation()\n    for (let i = this.split.children.length; i--;) {\n      const child = this.split.children[i]\n      if (child instanceof Panel && child.tabs.length === 0) {\n        this.split.children.splice(i, 1)\n      }\n    }\n    if (this.split.children.length === 0) {\n      this.dispatch('io-split-remove', {split: this.split}, true)\n    } else if (this.split.children.length === 1) {\n      this.dispatch('io-split-consolidate', {split: this.split}, true)\n    }\n    this.ensureOneHasFlexGrow()\n  }\n\n  onSplitRemove(event: CustomEvent) {\n    if (event.detail.split === this.split) return\n    event.stopPropagation()\n    const index = this.split.children.indexOf(event.detail.split)\n    if (index === -1) return\n    this.split.children.splice(index, 1)\n\n    if (this.split.children.length === 1) {\n      this.dispatch('io-split-consolidate', {split: this.split}, true)\n    }\n    this.ensureOneHasFlexGrow()\n  }\n\n  ensureOneHasFlexGrow() {\n    const hasGrow = this.split.children.some(child => hasFlexGrow(child.flex))\n    if (!hasGrow && this.split.children.length > 0) {\n      const i = Math.min(1, this.split.children.length - 1)\n      this.split.children[i].flex = '1 1 auto'\n    }\n\n    this.hasVisibleFlexGrow = this.split.children.some((child, i) => {\n      if (i === 0 && this.leadingDrawer !== null) return false\n      if (i === this.split.children.length - 1 && this.trailingDrawer !== null) return false\n      return hasFlexGrow(child.flex)\n    })\n  }\n\n  onSplitConsolidate(event: CustomEvent) {\n    if (event.detail.split === this.split) return\n    event.stopPropagation()\n    this.consolidateChild(event.detail.split)\n    // Recursive consolidation: if this split now has only 1 child, propagate up the tree\n    if (this.split.children.length === 1) {\n      this.dispatch('io-split-consolidate', {split: this.split}, true)\n    }\n  }\n\n  convertToSplit(panel: Panel, first: Panel, second: Panel, orientation: SplitOrientation) {\n    const index = this.split.children.indexOf(panel)\n    const newSplit = new Split({type: 'split', orientation, children: []})\n    newSplit.children.push(first, second)\n    this.split.children.splice(index, 1, newSplit)\n  }\n\n  consolidateChild(childSplit: Split) {\n    const index = this.split.children.indexOf(childSplit)\n    if (index === -1 || childSplit.children.length === 0) return\n    const soleChild = childSplit.children[0]\n    if (soleChild instanceof Panel) {\n      soleChild.flex = '1 1 auto'\n      this.split.children.splice(index, 1, soleChild)\n    } else if (soleChild instanceof Split) {\n      this.split.orientation = soleChild.orientation\n      this.split.children.splice(index, 1, ...soleChild.children)\n      this.ensureOneHasFlexGrow()\n    }\n  }\n\n  moveTabToSplit(sourcePanel: IoPanel, panel: Panel, tab: Tab, direction: SplitDirection) {\n    const index = this.split.children.indexOf(panel)\n    let orientation: SplitOrientation = 'horizontal'\n    if (direction === 'top' || direction === 'bottom') {\n      orientation = 'vertical'\n    }\n    let newIndex = ['left', 'top'].includes(direction) ? index - 1 : index + 1\n\n    if (this.split.orientation === orientation) {\n      newIndex = Math.max(0, newIndex)\n      this.split.children.splice(newIndex, 0, new Panel({type: 'panel', tabs: [tab]}))\n      sourcePanel.removeTab(tab)\n    } else {\n      if (panel.tabs.length > 1 || panel !== sourcePanel.panel) {\n        sourcePanel.removeTab(tab)\n        if (newIndex === -1) {\n          this.convertToSplit(panel, new Panel({type: 'panel', tabs: [tab]}), panel, orientation)\n        } else {\n          this.convertToSplit(panel, panel, new Panel({type: 'panel', tabs: [tab]}), orientation)\n        }\n      }\n    }\n  }\n\n  onDrawerExpandedChanged(event: CustomEvent) {\n    const srcDrawer = event.detail.element as IoDrawer\n    if (srcDrawer.expanded) {\n      const drawers = [...this.querySelectorAll(':scope > io-drawer')] as IoDrawer[]\n      drawers.forEach(drawer => drawer !== srcDrawer && (drawer.expanded = false))\n    }\n    event.stopPropagation()\n    this.updateVeil()\n  }\n\n  updateVeil() {\n    const drawers = [...this.querySelectorAll(':scope > io-drawer')] as IoDrawer[]\n    this.showVeil = drawers.some(drawer => drawer.expanded)\n  }\n\n  collapseAllDrawers() {\n    const drawers = [...this.querySelectorAll(':scope > io-drawer')] as IoDrawer[]\n    drawers.forEach(drawer => drawer.expanded = false)\n  }\n\n  onVeilClick(event: MouseEvent) {\n    event.stopPropagation()\n    // TODO: this should trigger onDrawerExpandedChanged and updateVeil\n    this.collapseAllDrawers()\n  }\n\n  splitMutated() {\n    this.calculateCollapsedDrawers()\n    this.changed()\n  }\n  splitChanged() {\n    this.calculateCollapsedDrawers()\n  }\n  changed() {\n    this.setAttribute('orientation', this.split.orientation)\n    const childCount = this.split.children.length\n    const lastIndex = childCount - 1\n    const orientation = this.split.orientation\n\n    const vChildren: VDOMElement[] = []\n\n    vChildren.push(div({\n      class: 'io-split-veil',\n      '@click': this.onVeilClick,\n    }))\n\n    if (this.leadingDrawer !== null) {\n      vChildren.push(ioDrawer({\n        orientation: orientation,\n        direction: 'leading',\n        child: this.leadingDrawer,\n        elements: this.elements,\n        addMenuOption: this.addMenuOption,\n      }))\n    }\n\n    // Render visible children\n    for (let i = 0; i < childCount; i++) {\n\n      if (i === 0 && this.leadingDrawer !== null) {\n        continue\n      }\n      if (i === lastIndex && this.trailingDrawer !== null) {\n        continue\n      }\n\n      const isLastVisible = (i === lastIndex - 1 && this.trailingDrawer !== null) || (i === lastIndex && this.trailingDrawer === null)\n\n      const child = this.split.children[i]\n      if (child instanceof Split) {\n        vChildren.push(ioSplit({\n          split: child,\n          style: {flex: child.flex},\n          class: isLastVisible ? 'io-split-last-visible' : '',\n          elements: this.elements,\n          addMenuOption: this.addMenuOption,\n        }))\n      } else if (child instanceof Panel) {\n        vChildren.push(ioPanel({\n          panel: child,\n          style: {flex: child.flex},\n          class: isLastVisible ? 'io-split-last-visible' : '',\n          elements: this.elements,\n          addMenuOption: this.addMenuOption,\n        }))\n      } else debug: {\n        console.warn('IOSplit: Invalid child type', child)\n      }\n\n      if (!isLastVisible) {\n        vChildren.push(ioDivider({\n          orientation: orientation,\n        }))\n      }\n    }\n\n    if (this.trailingDrawer !== null) {\n      vChildren.push(ioDrawer({\n        orientation: orientation,\n        direction: 'trailing',\n        child: this.trailingDrawer,\n        elements: this.elements,\n        addMenuOption: this.addMenuOption,\n      }))\n    }\n\n    this.render(vChildren)\n  }\n}\nexport const ioSplit = function(arg0: IoSplitProps) {\n  return IoSplit.vConstructor(arg0)\n}\n"]}