{"version":3,"file":"IoSplit.js","sourceRoot":"","sources":["../../src/elements/IoSplit.ts"],"names":[],"mappings":";;;;;;AAAA,OAAO,EAAE,QAAQ,EAAE,gBAAgB,EAAe,SAAS,EAAkB,QAAQ,EAAE,cAAc,EAAE,MAAM,cAAc,CAAA;AAC3H,OAAO,EAAE,UAAU,EAAE,MAAM,eAAe,CAAA;AAC1C,OAAO,EAAW,OAAO,EAAE,MAAM,cAAc,CAAA;AAC/C,OAAO,EAAE,SAAS,EAAE,MAAM,gBAAgB,CAAA;AAC1C,OAAO,EAAE,KAAK,EAAoC,MAAM,mBAAmB,CAAA;AAC3E,OAAO,EAAE,KAAK,EAAE,MAAM,mBAAmB,CAAA;AAUlC,IAAM,OAAO,GAAb,MAAM,OAAQ,SAAQ,SAAS;IACpC,MAAM,KAAK,KAAK;QACd,OAAO,SAAS,CAAA;;;;;;;;;KASf,CAAA;IACH,CAAC;IAWD,MAAM,KAAK,SAAS;QAClB,OAAO;YACL,iBAAiB,EAAE,eAAe;YAClC,qBAAqB,EAAE,kBAAkB;YACzC,iBAAiB,EAAE,eAAe;YAClC,iBAAiB,EAAE,eAAe;YAClC,2BAA2B,EAAE,uBAAuB;SACrD,CAAA;IACH,CAAC;IACD,yEAAyE;IAEzE,YAAY,IAAkB;QAC5B,KAAK,CAAC,IAAI,CAAC,CAAA;QACX,IAAI,CAAC,qBAAqB,GAAG,IAAI,CAAC,qBAAqB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAA;IACpE,CAAC;IAED,aAAa,CAAC,KAAkB;QAC9B,KAAK,CAAC,eAAe,EAAE,CAAA;QACvB,MAAM,KAAK,GAAG,KAAK,CAAC,MAAM,CAAC,KAAK,CAAA;QAChC,MAAM,IAAI,GAAG,IAAI,CAAC,qBAAqB,EAAE,CAAA;QACzC,MAAM,WAAW,GAAG,IAAI,CAAC,KAAK,CAAC,WAAW,CAAA;QAE1C,MAAM,WAAW,GAAG,cAAc,CAAC,QAAQ,CAAA;QAC3C,MAAM,UAAU,GAAG,CAAC,WAAW,KAAK,YAAY,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,WAAW,GAAG,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,CAAC,GAAG,CAAC,CAAA;QAC3H,MAAM,OAAO,GAAG,WAAW,KAAK,YAAY,CAAC,CAAC,CAAC,cAAc,CAAC,WAAW,GAAG,CAAC,CAAC,CAAC,CAAC,cAAc,CAAC,WAAW,CAAA;QAE1G,MAAM,MAAM,GAAG,EAAE,CAAA;QACjB,MAAM,UAAU,GAAG,EAAE,CAAA;QACrB,MAAM,WAAW,GAAG,EAAE,CAAA;QAEtB,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC;YACjD,MAAM,YAAY,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAgB,CAAA;YAEpD,MAAM,SAAS,GAAG,YAAY,CAAC,qBAAqB,EAAE,CAAA;YACtD,MAAM,SAAS,GAAG,WAAW,KAAK,YAAY,CAAC,CAAC,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC,CAAC,SAAS,CAAC,MAAM,CAAA;YAEnF,IAAI,CAAC,GAAG,KAAK,CAAC,MAAM,CAAC,OAAO,GAAG,SAAS,CAAC,IAAI,GAAG,WAAW,GAAG,CAAC,CAAA;YAC/D,IAAI,CAAC,GAAG,KAAK,CAAC,MAAM,CAAC,OAAO,GAAG,SAAS,CAAC,GAAG,GAAG,WAAW,GAAG,CAAC,CAAA;YAC9D,IAAI,CAAC,KAAK,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC;gBACnC,qDAAqD;gBACrD,CAAC,GAAG,IAAI,CAAC,KAAK,GAAG,CAAC,KAAK,CAAC,MAAM,CAAC,OAAO,GAAG,IAAI,CAAC,IAAI,CAAC,GAAG,WAAW,GAAG,CAAC,CAAA;gBACrE,CAAC,GAAG,IAAI,CAAC,MAAM,GAAG,CAAC,KAAK,CAAC,MAAM,CAAC,OAAO,GAAG,IAAI,CAAC,GAAG,CAAC,GAAG,WAAW,GAAG,CAAC,CAAA;YACvE,CAAC;YACD,MAAM,IAAI,GAAG,WAAW,KAAK,YAAY,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAA;YAEjD,MAAM,CAAC,IAAI,CAAC,YAAY,CAAC,CAAA;YACzB,UAAU,CAAC,IAAI,CAAC,SAAS,CAAC,CAAA;YAC1B,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAA;QACxB,CAAC;QAED,IAAI,gBAAgB,GAAG,CAAC,CAAA;QACxB,IAAI,eAAe,GAAG,CAAC,CAAA;QACvB,IAAI,SAAS,GAAG,CAAC,CAAA;QACjB,IAAI,eAAe,GAAG,CAAC,CAAA;QACvB,IAAI,cAAc,GAAG,CAAC,CAAA;QAEtB,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,MAAM,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;YACvC,IAAI,GAAG,GAAG,KAAK,CAAA;YACf,IAAI,GAAG,KAAK,MAAM,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC;gBAC9B,gEAAgE;gBAChE,GAAG,GAAG,MAAM,CAAC,MAAM,GAAG,CAAC,CAAA;YACzB,CAAC;YACD,IAAI,MAAM,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,EAAE,CAAC;gBACvC,SAAS,IAAI,UAAU,CAAC,CAAC,CAAC,CAAA;gBAC1B,IAAI,CAAC,GAAG,GAAG,EAAE,CAAC;oBACZ,eAAe,EAAE,CAAA;gBACnB,CAAC;qBAAM,IAAI,CAAC,GAAG,GAAG,EAAE,CAAC;oBACnB,cAAc,EAAE,CAAA;gBAClB,CAAC;YACH,CAAC;iBAAM,CAAC;gBACN,IAAI,CAAC,GAAG,GAAG,EAAE,CAAC;oBACZ,gBAAgB,IAAI,UAAU,CAAC,CAAC,CAAC,CAAA;gBACnC,CAAC;qBAAM,IAAI,CAAC,GAAG,GAAG,EAAE,CAAC;oBACnB,eAAe,IAAI,UAAU,CAAC,CAAC,CAAC,CAAA;gBAClC,CAAC;YACH,CAAC;QACH,CAAC;QAED,IAAI,KAAK,KAAK,CAAC,EAAE,CAAC;YAChB,MAAM,OAAO,GAAG,UAAU,GAAG,OAAO,GAAG,cAAc,GAAG,eAAe,CAAA;YACvE,MAAM,IAAI,GAAG,IAAI,CAAC,GAAG,CAAC,OAAO,EAAE,IAAI,CAAC,GAAG,CAAC,OAAO,EAAE,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC,CAAA;YACjE,sCAAsC;YACtC,MAAM,CAAC,KAAK,CAAC,CAAC,KAAK,CAAC,IAAI,GAAG,OAAO,IAAI,IAAI,CAAA;YAC1C,sDAAsD;YACtD,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,MAAM,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;gBACvC,IAAI,MAAM,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,EAAE,CAAC;oBACvC,IAAI,CAAC,KAAK,KAAK,EAAE,CAAC;wBAChB,MAAM,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,IAAI,GAAG,OAAO,IAAI,CAAC,GAAG,CAAC,OAAO,EAAE,UAAU,CAAC,CAAC,CAAC,CAAC,GAAG,SAAS,GAAG,GAAG,GAAG,CAAA;oBACrF,CAAC;gBACH,CAAC;YACH,CAAC;QAEH,CAAC;aAAM,IAAI,KAAK,KAAK,MAAM,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC;YACvC,MAAM,OAAO,GAAG,UAAU,GAAG,OAAO,GAAG,eAAe,GAAG,gBAAgB,CAAA;YACzE,MAAM,IAAI,GAAG,IAAI,CAAC,GAAG,CAAC,OAAO,EAAE,IAAI,CAAC,GAAG,CAAC,OAAO,EAAE,WAAW,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC,CAAC,CAAA;YACzE,qCAAqC;YACrC,MAAM,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC,KAAK,CAAC,IAAI,GAAG,OAAO,IAAI,IAAI,CAAA;YAC9C,sDAAsD;YACtD,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,MAAM,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;gBACvC,IAAI,MAAM,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,EAAE,CAAC;oBACvC,IAAI,CAAC,KAAK,KAAK,GAAG,CAAC,EAAE,CAAC;wBACpB,MAAM,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,IAAI,GAAG,OAAO,IAAI,CAAC,GAAG,CAAC,OAAO,EAAE,UAAU,CAAC,CAAC,CAAC,CAAC,GAAG,SAAS,GAAG,GAAG,GAAG,CAAA;oBACrF,CAAC;gBACH,CAAC;YACH,CAAC;QACH,CAAC;aAAM,CAAC;YACN,MAAM,OAAO,GAAG,UAAU,CAAC,KAAK,CAAC,GAAG,UAAU,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,OAAO,CAAA;YACnE,MAAM,IAAI,GAAG,IAAI,CAAC,GAAG,CAAC,OAAO,EAAE,IAAI,CAAC,GAAG,CAAC,OAAO,EAAE,WAAW,CAAC,KAAK,CAAC,CAAC,CAAC,CAAA;YACrE,MAAM,QAAQ,GAAG,UAAU,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC,IAAI,GAAG,UAAU,CAAC,KAAK,CAAC,CAAC,CAAA;YACnE,mBAAmB;YACnB,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,MAAM,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;gBACvC,IAAI,MAAM,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,EAAE,CAAC;oBACvC,IAAI,CAAC,KAAK,KAAK,EAAE,CAAC;wBAChB,MAAM,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,IAAI,GAAG,OAAO,IAAI,GAAG,SAAS,GAAG,GAAG,GAAG,CAAA;oBACzD,CAAC;yBAAM,IAAI,CAAC,KAAK,KAAK,GAAG,CAAC,EAAE,CAAC;wBAC3B,MAAM,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,IAAI,GAAG,OAAO,QAAQ,GAAG,SAAS,GAAG,GAAG,GAAG,CAAA;oBAC7D,CAAC;yBAAM,CAAC;wBACN,MAAM,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,IAAI,GAAG,OAAO,IAAI,CAAC,GAAG,CAAC,OAAO,EAAE,UAAU,CAAC,CAAC,CAAC,CAAC,GAAG,SAAS,GAAG,GAAG,GAAG,CAAA;oBACrF,CAAC;gBACH,CAAC;YACH,CAAC;QACH,CAAC;IACH,CAAC;IAED,gBAAgB,CAAC,KAAkB;QACjC,KAAK,CAAC,eAAe,EAAE,CAAA;QACvB,IAAI,KAAK,GAAG,CAAC,CAAA;QACb,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC;YACjD,MAAM,YAAY,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAgB,CAAA;YACpD,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,IAAI,GAAG,YAAY,CAAC,KAAK,CAAC,IAAI,CAAA;YACzD,KAAK,EAAE,CAAA;QACT,CAAC;IACH,CAAC;IAED,aAAa,CAAC,KAAkB;QAC9B,IAAI,KAAK,CAAC,MAAM,CAAC,KAAK,KAAK,IAAI,CAAC,KAAK;YAAE,OAAM;QAC7C,KAAK,CAAC,eAAe,EAAE,CAAA;QACvB,KAAK,IAAI,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC,EAAE,GAAG,CAAC;YAC9C,MAAM,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAA;YACpC,IAAI,KAAK,YAAY,KAAK,IAAI,KAAK,CAAC,IAAI,CAAC,MAAM,KAAK,CAAC,EAAE,CAAC;gBACtD,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,CAAA;YAClC,CAAC;QACH,CAAC;QACD,IAAI,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,MAAM,KAAK,CAAC,EAAE,CAAC;YACrC,IAAI,CAAC,QAAQ,CAAC,iBAAiB,EAAE,EAAC,KAAK,EAAE,IAAI,CAAC,KAAK,EAAC,EAAE,IAAI,CAAC,CAAA;QAC7D,CAAC;aAAM,IAAI,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,MAAM,KAAK,CAAC,EAAE,CAAC;YAC5C,IAAI,CAAC,QAAQ,CAAC,2BAA2B,EAAE,EAAC,KAAK,EAAE,IAAI,CAAC,KAAK,EAAC,EAAE,IAAI,CAAC,CAAA;QACvE,CAAC;IACH,CAAC;IAED,aAAa,CAAC,KAAkB;QAC9B,IAAI,KAAK,CAAC,MAAM,CAAC,KAAK,KAAK,IAAI,CAAC,KAAK;YAAE,OAAM;QAC7C,KAAK,CAAC,eAAe,EAAE,CAAA;QACvB,MAAM,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,OAAO,CAAC,KAAK,CAAC,MAAM,CAAC,KAAK,CAAC,CAAA;QAC7D,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAA;QACpC,IAAI,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,MAAM,KAAK,CAAC,EAAE,CAAC;YACrC,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,IAAI,GAAG,UAAU,CAAA;QAC1C,CAAC;IACH,CAAC;IAED,qBAAqB,CAAC,KAAkB;QACtC,IAAI,KAAK,CAAC,MAAM,CAAC,KAAK,KAAK,IAAI,CAAC,KAAK;YAAE,OAAM;QAC7C,KAAK,CAAC,eAAe,EAAE,CAAA;QACvB,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,MAAM,CAAC,KAAK,CAAC,CAAA;IACzC,CAAC;IAED,cAAc,CAAC,KAAY,EAAE,KAAY,EAAE,MAAa,EAAE,WAA6B;QACrF,MAAM,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,OAAO,CAAC,KAAK,CAAC,CAAA;QAChD,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,EAAE,IAAI,KAAK,CAAC,EAAC,WAAW,EAAE,WAAW,EAAE,QAAQ,EAAE,CAAC,KAAK,EAAE,MAAM,CAAC,EAAC,CAAC,CAAC,CAAA;IACxG,CAAC;IACD,cAAc,CAAC,KAAY;QACzB,MAAM,KAAK,GAAG,KAAK,CAAC,QAAQ,CAAC,CAAC,CAAU,CAAA;QACxC,MAAM,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,OAAO,CAAC,KAAK,CAAC,CAAA;QAChD,KAAK,CAAC,IAAI,GAAG,UAAU,CAAA;QACvB,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,EAAE,KAAK,CAAC,CAAA;IAC7C,CAAC;IAED,cAAc,CAAC,WAAoB,EAAE,KAAY,EAAE,GAAQ,EAAE,SAAyB;QACpF,MAAM,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,OAAO,CAAC,KAAK,CAAC,CAAA;QAChD,IAAI,WAAW,GAAqB,YAAY,CAAA;QAChD,IAAI,SAAS,KAAK,KAAK,IAAI,SAAS,KAAK,QAAQ,EAAE,CAAC;YAClD,WAAW,GAAG,UAAU,CAAA;QAC1B,CAAC;QACD,IAAI,QAAQ,GAAG,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC,CAAC,KAAK,GAAG,CAAC,CAAA;QAE1E,IAAI,IAAI,CAAC,KAAK,CAAC,WAAW,KAAK,WAAW,EAAE,CAAC;YAC3C,QAAQ,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAA;YAChC,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,MAAM,CAAC,QAAQ,EAAE,CAAC,EAAE,IAAI,KAAK,CAAC,EAAC,IAAI,EAAE,CAAC,GAAG,CAAC,EAAC,CAAC,CAAC,CAAA;YACjE,WAAW,CAAC,SAAS,CAAC,GAAG,CAAC,CAAA;QAC5B,CAAC;aAAM,CAAC;YACN,IAAI,KAAK,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,IAAI,KAAK,KAAK,WAAW,CAAC,KAAK,EAAE,CAAC;gBACzD,WAAW,CAAC,SAAS,CAAC,GAAG,CAAC,CAAA;gBAC1B,IAAI,QAAQ,KAAK,CAAC,CAAC,EAAE,CAAC;oBACpB,IAAI,CAAC,cAAc,CAAC,KAAK,EAAE,IAAI,KAAK,CAAC,EAAC,IAAI,EAAE,CAAC,GAAG,CAAC,EAAC,CAAC,EAAE,KAAK,EAAE,WAAW,CAAC,CAAA;gBAC1E,CAAC;qBAAM,CAAC;oBACN,IAAI,CAAC,cAAc,CAAC,KAAK,EAAE,KAAK,EAAE,IAAI,KAAK,CAAC,EAAC,IAAI,EAAE,CAAC,GAAG,CAAC,EAAC,CAAC,EAAE,WAAW,CAAC,CAAA;gBAC1E,CAAC;YACH,CAAC;QACH,CAAC;IACH,CAAC;IACD,YAAY;QACV,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,qBAAqB,CAAC,CAAA;IAC3C,CAAC;IACD,qBAAqB;QACnB,IAAI,CAAC,OAAO,EAAE,CAAA;IAChB,CAAC;IACD,OAAO;QACL,IAAI,CAAC,YAAY,CAAC,aAAa,EAAE,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,CAAA;QACxD,IAAI,CAAC,KAAK,CAAC,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAA;QACjC,uBAAuB;QACvB,MAAM,SAAS,GAAkB,EAAE,CAAA;QACnC,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;YACpD,MAAM,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAA;YACpC,IAAI,KAAK,YAAY,KAAK,EAAE,CAAC;gBAC3B,SAAS,CAAC,IAAI,CAAC,OAAO,CAAC;oBACrB,KAAK,EAAE,KAAK;oBACZ,KAAK,EAAE,EAAC,IAAI,EAAE,KAAK,CAAC,IAAI,EAAC;oBACzB,QAAQ,EAAE,IAAI,CAAC,QAAQ;oBACvB,aAAa,EAAE,IAAI,CAAC,aAAa;iBAClC,CAAC,CAAC,CAAA;YACL,CAAC;iBAAM,IAAI,KAAK,YAAY,KAAK,EAAE,CAAC;gBAClC,SAAS,CAAC,IAAI,CAAC,OAAO,CAAC;oBACrB,KAAK,EAAE,KAAK;oBACZ,KAAK,EAAE,EAAC,IAAI,EAAE,KAAK,CAAC,IAAI,EAAC;oBACzB,QAAQ,EAAE,IAAI,CAAC,QAAQ;oBACvB,aAAa,EAAE,IAAI,CAAC,aAAa;iBAClC,CAAC,CAAC,CAAA;YACL,CAAC;;gBAAM,KAAK,EAAE,CAAC;oBACb,OAAO,CAAC,IAAI,CAAC,6BAA6B,EAAE,KAAK,CAAC,CAAA;gBACpD,CAAC;YACD,IAAI,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC;gBACvC,SAAS,CAAC,IAAI,CAAC,SAAS,CAAC,EAAC,WAAW,EAAE,IAAI,CAAC,KAAK,CAAC,WAAW,EAAE,KAAK,EAAE,CAAC,EAAC,CAAC,CAAC,CAAA;YAC5E,CAAC;QACH,CAAC;QACD,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,CAAA;IACxB,CAAC;CACF,CAAA;AApPS;IADP,gBAAgB,CAAC,EAAC,IAAI,EAAE,MAAM,EAAC,CAAC;sCACb;AAGZ;IADP,gBAAgB,CAAC,KAAK,CAAC;yCACO;AAGf;IADf,QAAQ,CAAC,EAAC,IAAI,EAAE,UAAU,EAAC,CAAC;8CACY;AArB9B,OAAO;IADnB,QAAQ;GACI,OAAO,CAmQnB;;AACD,MAAM,CAAC,MAAM,OAAO,GAAG,UAAS,IAAkB;IAChD,OAAO,OAAO,CAAC,YAAY,CAAC,IAAI,CAAC,CAAA;AACnC,CAAC,CAAA","sourcesContent":["import { Register, ReactiveProperty, VDOMElement, IoElement, IoElementProps, Property, ThemeSingleton } from '@io-gui/core'\nimport { MenuOption } from '@io-gui/menus'\nimport { IoPanel, ioPanel } from './IoPanel.js'\nimport { ioDivider } from './IoDivider.js'\nimport { Split, SplitDirection, SplitOrientation } from '../nodes/Split.js'\nimport { Panel } from '../nodes/Panel.js'\nimport { Tab } from '../nodes/Tab.js'\n\nexport type IoSplitProps = IoElementProps & {\n  split: Split\n  elements: VDOMElement[]\n  addMenuOption: MenuOption\n}\n\n@Register\nexport class IoSplit extends IoElement {\n  static get Style() {\n    return /* css */`\n      :host {\n        display: flex;\n        overflow: hidden;\n        flex-direction: row;\n      }\n      :host[orientation='vertical'] {\n        flex-direction: column;\n      }\n    `\n  }\n\n  @ReactiveProperty({type: Object})\n  declare split: Split\n\n  @ReactiveProperty(Array)\n  declare elements: VDOMElement[]\n\n  @Property({type: MenuOption})\n  declare private addMenuOption: MenuOption\n\n  static get Listeners() {\n    return {\n      'io-divider-move': 'onDividerMove',\n      'io-divider-move-end': 'onDividerMoveEnd',\n      'io-panel-remove': 'onPanelRemove',\n      'io-split-remove': 'onSplitRemove',\n      'io-split-convert-to-panel': 'onSplitConvertToPanel',\n    }\n  }\n  // TODO: Make sure one panel is available even when all tabs are removed.\n\n  constructor(args: IoSplitProps) {\n    super(args)\n    this.splitMutatedDebounced = this.splitMutatedDebounced.bind(this)\n  }\n\n  onDividerMove(event: CustomEvent) {\n    event.stopPropagation()\n    const index = event.detail.index\n    const rect = this.getBoundingClientRect()\n    const orientation = this.split.orientation\n\n    const dividerSize = ThemeSingleton.spacing3\n    const totalSpace = (orientation === 'horizontal' ? rect.width : rect.height) - dividerSize * (this.children.length - 1) / 2\n    const minSize = orientation === 'horizontal' ? ThemeSingleton.fieldHeight * 4 : ThemeSingleton.fieldHeight\n\n    const splits = []\n    const splitSizes = []\n    const splitResize = []\n\n    for (let i = 0; i < this.children.length; i += 2) {\n      const splitElement = this.children[i] as HTMLElement\n\n      const splitRect = splitElement.getBoundingClientRect()\n      const splitSize = orientation === 'horizontal' ? splitRect.width : splitRect.height\n\n      let x = event.detail.clientX - splitRect.left - dividerSize / 2\n      let y = event.detail.clientY - splitRect.top - dividerSize / 2\n      if (i === this.children.length - 1) {\n        // NOTE: The last panel should be sized from the end.\n        x = rect.width - (event.detail.clientX - rect.left) - dividerSize / 2\n        y = rect.height - (event.detail.clientY - rect.top) - dividerSize / 2\n      }\n      const size = orientation === 'horizontal' ? x : y\n\n      splits.push(splitElement)\n      splitSizes.push(splitSize)\n      splitResize.push(size)\n    }\n\n    let fixedSpaceBefore = 0\n    let fixedSpaceAfter = 0\n    let flexSpace = 0\n    let flexCountBefore = 0\n    let flexCountAfter = 0\n\n    for (let i = 0; i < splits.length; i++) {\n      let idx = index\n      if (idx === splits.length - 2) {\n        // NOTE: The last divider manipulates the panel after the split.\n        idx = splits.length - 1\n      }\n      if (splits[i].style.flex.endsWith('%')) {\n        flexSpace += splitSizes[i]\n        if (i < idx) {\n          flexCountBefore++\n        } else if (i > idx) {\n          flexCountAfter++\n        }\n      } else {\n        if (i < idx) {\n          fixedSpaceBefore += splitSizes[i]\n        } else if (i > idx) {\n          fixedSpaceAfter += splitSizes[i]\n        }\n      }\n    }\n\n    if (index === 0) {\n      const maxSize = totalSpace - minSize * flexCountAfter - fixedSpaceAfter\n      const size = Math.max(minSize, Math.min(maxSize, splitResize[0]))\n      // Set fixed size for the first panel.\n      splits[index].style.flex = `0 0 ${size}px`\n      // Prevent flex splits from compressing below minSize.\n      for (let i = 0; i < splits.length; i++) {\n        if (splits[i].style.flex.endsWith('%')) {\n          if (i !== index) {\n            splits[i].style.flex = `1 1 ${Math.max(minSize, splitSizes[i]) / flexSpace * 100}%`\n          }\n        }\n      }\n\n    } else if (index === splits.length - 2) {\n      const maxSize = totalSpace - minSize * flexCountBefore - fixedSpaceBefore\n      const size = Math.max(minSize, Math.min(maxSize, splitResize[index + 1]))\n      // Set fixed size for the last panel.\n      splits[index + 1].style.flex = `0 0 ${size}px`\n      // Prevent flex splits from compressing below minSize.\n      for (let i = 0; i < splits.length; i++) {\n        if (splits[i].style.flex.endsWith('%')) {\n          if (i !== index + 1) {\n            splits[i].style.flex = `1 1 ${Math.max(minSize, splitSizes[i]) / flexSpace * 100}%`\n          }\n        }\n      }\n    } else {\n      const maxSize = splitSizes[index] + splitSizes[index + 1] - minSize\n      const size = Math.max(minSize, Math.min(maxSize, splitResize[index]))\n      const sizeNext = splitSizes[index + 1] - (size - splitSizes[index])\n      // Apply flex sizes\n      for (let i = 0; i < splits.length; i++) {\n        if (splits[i].style.flex.endsWith('%')) {\n          if (i === index) {\n            splits[i].style.flex = `1 1 ${size / flexSpace * 100}%`\n          } else if (i === index + 1) {\n            splits[i].style.flex = `1 1 ${sizeNext / flexSpace * 100}%`\n          } else {\n            splits[i].style.flex = `1 1 ${Math.max(minSize, splitSizes[i]) / flexSpace * 100}%`\n          }\n        }\n      }\n    }\n  }\n\n  onDividerMoveEnd(event: CustomEvent) {\n    event.stopPropagation()\n    let index = 0\n    for (let i = 0; i < this.children.length; i += 2) {\n      const splitElement = this.children[i] as HTMLElement\n      this.split.children[index].flex = splitElement.style.flex\n      index++\n    }\n  }\n\n  onPanelRemove(event: CustomEvent) {\n    if (event.detail.panel === this.split) return\n    event.stopPropagation()\n    for (let i = this.split.children.length; i--;) {\n      const child = this.split.children[i]\n      if (child instanceof Panel && child.tabs.length === 0) {\n        this.split.children.splice(i, 1)\n      }\n    }\n    if (this.split.children.length === 0) {\n      this.dispatch('io-split-remove', {split: this.split}, true)\n    } else if (this.split.children.length === 1) {\n      this.dispatch('io-split-convert-to-panel', {split: this.split}, true)\n    }\n  }\n\n  onSplitRemove(event: CustomEvent) {\n    if (event.detail.split === this.split) return\n    event.stopPropagation()\n    const index = this.split.children.indexOf(event.detail.split)\n    this.split.children.splice(index, 1)\n    if (this.split.children.length === 2) {\n      this.split.children[1].flex = '1 1 100%'\n    }\n  }\n\n  onSplitConvertToPanel(event: CustomEvent) {\n    if (event.detail.split === this.split) return\n    event.stopPropagation()\n    this.convertToPanel(event.detail.split)\n  }\n\n  convertToSplit(panel: Panel, first: Panel, second: Panel, orientation: SplitOrientation) {\n    const index = this.split.children.indexOf(panel)\n    this.split.children.splice(index, 1, new Split({orientation: orientation, children: [first, second]}))\n  }\n  convertToPanel(split: Split) {\n    const panel = split.children[0] as Panel\n    const index = this.split.children.indexOf(split)\n    panel.flex = '1 1 100%'\n    this.split.children.splice(index, 1, panel)\n  }\n\n  moveTabToSplit(sourcePanel: IoPanel, panel: Panel, tab: Tab, direction: SplitDirection) {\n    const index = this.split.children.indexOf(panel)\n    let orientation: SplitOrientation = 'horizontal'\n    if (direction === 'top' || direction === 'bottom') {\n      orientation = 'vertical'\n    }\n    let newIndex = ['left', 'top'].includes(direction) ? index - 1 : index + 1\n\n    if (this.split.orientation === orientation) {\n      newIndex = Math.max(0, newIndex)\n      this.split.children.splice(newIndex, 0, new Panel({tabs: [tab]}))\n      sourcePanel.removeTab(tab)\n    } else {\n      if (panel.tabs.length > 1 || panel !== sourcePanel.panel) {\n        sourcePanel.removeTab(tab)\n        if (newIndex === -1) {\n          this.convertToSplit(panel, new Panel({tabs: [tab]}), panel, orientation)\n        } else {\n          this.convertToSplit(panel, panel, new Panel({tabs: [tab]}), orientation)\n        }\n      }\n    }\n  }\n  splitMutated() {\n    this.debounce(this.splitMutatedDebounced)\n  }\n  splitMutatedDebounced() {\n    this.changed()\n  }\n  changed() {\n    this.setAttribute('orientation', this.split.orientation)\n    this.style.flex = this.split.flex\n    // TODO: Validate split\n    const vChildren: VDOMElement[] = []\n    for (let i = 0; i < this.split.children.length; i++) {\n      const child = this.split.children[i]\n      if (child instanceof Split) {\n        vChildren.push(ioSplit({\n          split: child,\n          style: {flex: child.flex},\n          elements: this.elements,\n          addMenuOption: this.addMenuOption,\n        }))\n      } else if (child instanceof Panel) {\n        vChildren.push(ioPanel({\n          panel: child,\n          style: {flex: child.flex},\n          elements: this.elements,\n          addMenuOption: this.addMenuOption,\n        }))\n      } else debug: {\n        console.warn('IOSplit: Invalid child type', child)\n      }\n      if (i < this.split.children.length - 1) {\n        vChildren.push(ioDivider({orientation: this.split.orientation, index: i}))\n      }\n    }\n    this.render(vChildren)\n  }\n}\nexport const ioSplit = function(arg0: IoSplitProps) {\n  return IoSplit.vConstructor(arg0)\n}\n"]}