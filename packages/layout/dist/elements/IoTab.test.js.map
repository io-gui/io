{"version":3,"file":"IoTab.test.js","sourceRoot":"","sources":["../../src/elements/IoTab.test.ts"],"names":[],"mappings":"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","sourcesContent":["//@ts-nocheck\nimport { describe, it, expect, beforeEach, afterEach } from 'vitest'\nimport { IoTab, Tab, tabDragIconSingleton } from '@io-gui/layout'\n\ndescribe('IoTab', () => {\n  let tab: Tab\n  let ioTab: IoTab\n  let container: HTMLElement\n\n  beforeEach(() => {\n    container = document.createElement('div')\n    container.style.display = 'none'\n    document.body.appendChild(container)\n\n    tab = new Tab({ id: 'test-tab', label: 'Test Tab', icon: 'io:test' })\n    ioTab = new IoTab({ tab })\n    container.appendChild(ioTab)\n  })\n\n  afterEach(() => {\n    ioTab.remove()\n    container.remove()\n    tab.dispose()\n\n    // Reset singleton state\n    tabDragIconSingleton.setProperties({\n      dragging: false,\n      dropSource: null,\n      dropTarget: null,\n      splitDirection: 'none',\n      dropIndex: -1,\n    })\n  })\n\n  describe('Construction', () => {\n    it('should construct with a Tab domain model', () => {\n      expect(ioTab.tab).toBe(tab)\n    })\n\n    it('should have expected default properties', () => {\n      expect(ioTab.overflow).toBe(false)\n    })\n\n    it('should set tab property as reactive', () => {\n      const newTab = new Tab({ id: 'new-tab' })\n      ioTab.tab = newTab\n      expect(ioTab.tab).toBe(newTab)\n      newTab.dispose()\n    })\n  })\n\n  // describe('Rendering', () => {\n  //   it('should render icon from tab.icon', () => {\n  //     const icon = ioTab.querySelector('.io-icon')\n  //     expect(icon).toBeTruthy()\n  //   })\n\n  //   it('should render label from tab.label', () => {\n  //     const span = ioTab.querySelector('span:not(.io-icon)')\n  //     expect(span?.textContent).toBe('Test Tab')\n  //   })\n\n  //   it('should render close icon button', () => {\n  //     const closeIcon = ioTab.querySelector('.io-close-icon')\n  //     expect(closeIcon).toBeTruthy()\n  //   })\n\n  //   it('should update selected attribute when tab.selected changes', () => {\n  //     expect(ioTab.getAttribute('selected')).toBe('false')\n  //     tab.selected = true\n  //     expect(ioTab.getAttribute('selected')).toBe('true')\n  //   })\n\n  //   it('should render drop marker when selected', () => {\n  //     tab.selected = false\n  //     expect(ioTab.querySelector('.io-tab-drop-marker')).toBeNull()\n\n  //     tab.selected = true\n  //     expect(ioTab.querySelector('.io-tab-drop-marker')).toBeTruthy()\n  //   })\n\n  //   it('should update label when tab.label changes', () => {\n  //     tab.label = 'Updated Label'\n  //     const span = ioTab.querySelector('span:not(.io-icon)')\n  //     expect(span?.textContent).toBe('Updated Label')\n  //   })\n\n  //   it('should update icon when tab.icon changes', () => {\n  //     const icon = ioTab.querySelector('.io-icon') as HTMLElement\n  //     expect(icon).toBeTruthy()\n  //     tab.icon = 'io:new-icon'\n  //     // Icon component should reflect the new value\n  //     expect(icon.getAttribute('value')).toBe('io:new-icon')\n  //   })\n\n  //   it('should render space icon when tab has no icon', () => {\n  //     const noIconTab = new Tab({ id: 'no-icon' })\n  //     const noIconIoTab = new IoTab({ tab: noIconTab })\n  //     container.appendChild(noIconIoTab)\n\n  //     const icon = noIconIoTab.querySelector('.io-icon') as HTMLElement\n  //     expect(icon?.getAttribute('value')).toBe(' ')\n\n  //     noIconIoTab.remove()\n  //     noIconTab.dispose()\n  //   })\n  // })\n\n  // describe('Tab Mutation Handling', () => {\n  //   it('should call changed when tabMutated is invoked', () => {\n  //     const changedSpy = vi.spyOn(ioTab, 'changed')\n  //     ioTab.tabMutated()\n  //     expect(changedSpy).toHaveBeenCalledTimes(1)\n  //   })\n  // })\n\n  // describe('Overflow Detection', () => {\n  //   it('should set overflow attribute based on text overflow', () => {\n  //     // Initially no overflow\n  //     expect(ioTab.overflow).toBe(false)\n  //   })\n\n  //   it('should detect overflow on resize', () => {\n  //     const span = ioTab.querySelector('span:not(.io-icon)') as HTMLElement\n  //     if (span) {\n  //       // Mock scrollWidth > clientWidth\n  //       Object.defineProperty(span, 'scrollWidth', { value: 200, configurable: true })\n  //       Object.defineProperty(span, 'clientWidth', { value: 100, configurable: true })\n\n  //       ioTab.onResized()\n  //       expect(ioTab.overflow).toBe(true)\n  //     }\n  //   })\n\n  //   it('should not set overflow when text fits', () => {\n  //     const span = ioTab.querySelector('span:not(.io-icon)') as HTMLElement\n  //     if (span) {\n  //       Object.defineProperty(span, 'scrollWidth', { value: 50, configurable: true })\n  //       Object.defineProperty(span, 'clientWidth', { value: 100, configurable: true })\n\n  //       ioTab.onResized()\n  //       expect(ioTab.overflow).toBe(false)\n  //     }\n  //   })\n  // })\n\n  // describe('Event Prevention', () => {\n  //   it('should stop propagation and prevent default on click', () => {\n  //     const event = new MouseEvent('click', { bubbles: true, cancelable: true })\n  //     const stopSpy = vi.spyOn(event, 'stopPropagation')\n  //     const preventSpy = vi.spyOn(event, 'preventDefault')\n\n  //     ioTab.preventDefault(event)\n\n  //     expect(stopSpy).toHaveBeenCalled()\n  //     expect(preventSpy).toHaveBeenCalled()\n  //   })\n\n  //   it('should stop propagation and prevent default on contextmenu', () => {\n  //     const event = new MouseEvent('contextmenu', { bubbles: true, cancelable: true })\n  //     const stopSpy = vi.spyOn(event, 'stopPropagation')\n  //     const preventSpy = vi.spyOn(event, 'preventDefault')\n\n  //     ioTab.preventDefault(event)\n\n  //     expect(stopSpy).toHaveBeenCalled()\n  //     expect(preventSpy).toHaveBeenCalled()\n  //   })\n  // })\n\n  // describe('Pointer Events - Basic', () => {\n  //   it('should capture pointer on pointerdown', () => {\n  //     const captureSpy = vi.spyOn(ioTab, 'setPointerCapture')\n  //     const event = new PointerEvent('pointerdown', {\n  //       pointerId: 1,\n  //       buttons: 1,\n  //       clientX: 100,\n  //       clientY: 100,\n  //       bubbles: true,\n  //       cancelable: true,\n  //     })\n\n  //     ioTab.onPointerdown(event)\n\n  //     expect(captureSpy).toHaveBeenCalledWith(1)\n  //   })\n\n  //   it('should focus on left button pointerdown', () => {\n  //     const focusSpy = vi.spyOn(ioTab, 'focus')\n  //     const event = new PointerEvent('pointerdown', {\n  //       pointerId: 1,\n  //       buttons: 1,\n  //       clientX: 100,\n  //       clientY: 100,\n  //       bubbles: true,\n  //       cancelable: true,\n  //     })\n\n  //     ioTab.onPointerdown(event)\n\n  //     expect(focusSpy).toHaveBeenCalled()\n  //   })\n\n  //   it('should expand context editor on right button pointerdown', () => {\n  //     const expandSpy = vi.spyOn(ioTab, 'expandContextEditor')\n  //     const event = new PointerEvent('pointerdown', {\n  //       pointerId: 1,\n  //       buttons: 2,\n  //       clientX: 100,\n  //       clientY: 100,\n  //       bubbles: true,\n  //       cancelable: true,\n  //     })\n\n  //     ioTab.onPointerdown(event)\n\n  //     expect(expandSpy).toHaveBeenCalled()\n  //   })\n\n  //   it('should release pointer capture on pointerup', () => {\n  //     const releaseSpy = vi.spyOn(ioTab, 'releasePointerCapture')\n  //     const event = new PointerEvent('pointerup', {\n  //       pointerId: 1,\n  //       buttons: 0,\n  //       clientX: 100,\n  //       clientY: 100,\n  //       bubbles: true,\n  //       cancelable: true,\n  //     })\n\n  //     ioTab.onPointerup(event)\n\n  //     expect(releaseSpy).toHaveBeenCalledWith(1)\n  //   })\n\n  //   it('should prevent default on pointerleave', () => {\n  //     const event = new PointerEvent('pointerleave', {\n  //       bubbles: true,\n  //       cancelable: true,\n  //     })\n  //     const preventSpy = vi.spyOn(event, 'preventDefault')\n  //     const stopSpy = vi.spyOn(event, 'stopPropagation')\n\n  //     ioTab.onPointerleave(event)\n\n  //     expect(preventSpy).toHaveBeenCalled()\n  //     expect(stopSpy).toHaveBeenCalled()\n  //   })\n\n  //   it('should prevent touchmove default', () => {\n  //     const event = new TouchEvent('touchmove', {\n  //       bubbles: true,\n  //       cancelable: true,\n  //     })\n  //     const preventSpy = vi.spyOn(event, 'preventDefault')\n\n  //     ioTab.onTouchmove(event)\n\n  //     expect(preventSpy).toHaveBeenCalled()\n  //   })\n  // })\n\n  // describe('Drag Initiation', () => {\n  //   it('should not start drag until 10px threshold is exceeded', () => {\n  //     // Start pointerdown\n  //     const downEvent = new PointerEvent('pointerdown', {\n  //       pointerId: 1,\n  //       buttons: 1,\n  //       clientX: 100,\n  //       clientY: 100,\n  //       bubbles: true,\n  //       cancelable: true,\n  //     })\n  //     ioTab.onPointerdown(downEvent)\n\n  //     // Move less than 10px\n  //     const moveEvent = new PointerEvent('pointermove', {\n  //       pointerId: 1,\n  //       buttons: 1,\n  //       clientX: 105,\n  //       clientY: 105,\n  //       bubbles: true,\n  //       cancelable: true,\n  //     })\n  //     ioTab.onPointermove(moveEvent)\n\n  //     expect(tabDragIconSingleton.dragging).toBe(false)\n  //   })\n\n  //   it('should start drag after moving more than 10px horizontally', () => {\n  //     // Mock parent structure to avoid null errors\n  //     const mockPanel = document.createElement('div')\n  //     const mockTabs = document.createElement('div')\n  //     mockTabs.appendChild(ioTab)\n  //     mockPanel.appendChild(mockTabs)\n  //     container.appendChild(mockPanel)\n\n  //     const downEvent = new PointerEvent('pointerdown', {\n  //       pointerId: 1,\n  //       buttons: 1,\n  //       clientX: 100,\n  //       clientY: 100,\n  //       bubbles: true,\n  //       cancelable: true,\n  //     })\n  //     ioTab.onPointerdown(downEvent)\n\n  //     const moveEvent = new PointerEvent('pointermove', {\n  //       pointerId: 1,\n  //       buttons: 1,\n  //       clientX: 115,\n  //       clientY: 100,\n  //       bubbles: true,\n  //       cancelable: true,\n  //     })\n  //     ioTab.onPointermove(moveEvent)\n\n  //     expect(tabDragIconSingleton.dragging).toBe(true)\n  //     expect(tabDragIconSingleton.tab).toBe(tab)\n  //   })\n\n  //   it('should start drag after moving more than 10px vertically', () => {\n  //     const mockPanel = document.createElement('div')\n  //     const mockTabs = document.createElement('div')\n  //     mockTabs.appendChild(ioTab)\n  //     mockPanel.appendChild(mockTabs)\n  //     container.appendChild(mockPanel)\n\n  //     const downEvent = new PointerEvent('pointerdown', {\n  //       pointerId: 1,\n  //       buttons: 1,\n  //       clientX: 100,\n  //       clientY: 100,\n  //       bubbles: true,\n  //       cancelable: true,\n  //     })\n  //     ioTab.onPointerdown(downEvent)\n\n  //     const moveEvent = new PointerEvent('pointermove', {\n  //       pointerId: 1,\n  //       buttons: 1,\n  //       clientX: 100,\n  //       clientY: 115,\n  //       bubbles: true,\n  //       cancelable: true,\n  //     })\n  //     ioTab.onPointermove(moveEvent)\n\n  //     expect(tabDragIconSingleton.dragging).toBe(true)\n  //   })\n\n  //   it('should not start drag when not holding left button', () => {\n  //     const mockPanel = document.createElement('div')\n  //     const mockTabs = document.createElement('div')\n  //     mockTabs.appendChild(ioTab)\n  //     mockPanel.appendChild(mockTabs)\n  //     container.appendChild(mockPanel)\n\n  //     const downEvent = new PointerEvent('pointerdown', {\n  //       pointerId: 1,\n  //       buttons: 1,\n  //       clientX: 100,\n  //       clientY: 100,\n  //       bubbles: true,\n  //       cancelable: true,\n  //     })\n  //     ioTab.onPointerdown(downEvent)\n\n  //     // Move with no buttons pressed (e.g., user released button)\n  //     const moveEvent = new PointerEvent('pointermove', {\n  //       pointerId: 1,\n  //       buttons: 0,\n  //       clientX: 115,\n  //       clientY: 100,\n  //       bubbles: true,\n  //       cancelable: true,\n  //     })\n  //     ioTab.onPointermove(moveEvent)\n\n  //     expect(tabDragIconSingleton.dragging).toBe(false)\n  //   })\n\n  //   it('should set singleton dropSource to parent panel when drag starts', () => {\n  //     const mockPanel = document.createElement('io-panel')\n  //     const mockTabs = document.createElement('div')\n  //     mockTabs.appendChild(ioTab)\n  //     mockPanel.appendChild(mockTabs)\n  //     container.appendChild(mockPanel)\n\n  //     const downEvent = new PointerEvent('pointerdown', {\n  //       pointerId: 1,\n  //       buttons: 1,\n  //       clientX: 100,\n  //       clientY: 100,\n  //       bubbles: true,\n  //       cancelable: true,\n  //     })\n  //     ioTab.onPointerdown(downEvent)\n\n  //     const moveEvent = new PointerEvent('pointermove', {\n  //       pointerId: 1,\n  //       buttons: 1,\n  //       clientX: 115,\n  //       clientY: 100,\n  //       bubbles: true,\n  //       cancelable: true,\n  //     })\n  //     ioTab.onPointermove(moveEvent)\n\n  //     expect(tabDragIconSingleton.dropSource).toBe(mockPanel)\n  //   })\n  // })\n\n  // describe('Drag Icon Positioning', () => {\n  //   it('should position drag icon at cursor during drag', () => {\n  //     const mockPanel = document.createElement('div')\n  //     const mockTabs = document.createElement('div')\n  //     mockTabs.appendChild(ioTab)\n  //     mockPanel.appendChild(mockTabs)\n  //     container.appendChild(mockPanel)\n\n  //     // Start drag\n  //     const downEvent = new PointerEvent('pointerdown', {\n  //       pointerId: 1,\n  //       buttons: 1,\n  //       clientX: 100,\n  //       clientY: 100,\n  //       bubbles: true,\n  //       cancelable: true,\n  //     })\n  //     ioTab.onPointerdown(downEvent)\n\n  //     const moveEvent1 = new PointerEvent('pointermove', {\n  //       pointerId: 1,\n  //       buttons: 1,\n  //       clientX: 115,\n  //       clientY: 100,\n  //       bubbles: true,\n  //       cancelable: true,\n  //     })\n  //     ioTab.onPointermove(moveEvent1)\n\n  //     expect(tabDragIconSingleton.style.left).toBe('115px')\n  //     expect(tabDragIconSingleton.style.top).toBe('100px')\n\n  //     // Continue moving\n  //     const moveEvent2 = new PointerEvent('pointermove', {\n  //       pointerId: 1,\n  //       buttons: 1,\n  //       clientX: 200,\n  //       clientY: 150,\n  //       bubbles: true,\n  //       cancelable: true,\n  //     })\n  //     ioTab.onPointermove(moveEvent2)\n\n  //     expect(tabDragIconSingleton.style.left).toBe('200px')\n  //     expect(tabDragIconSingleton.style.top).toBe('150px')\n  //   })\n  // })\n\n  // describe('Pointer Cancel', () => {\n  //   it('should reset singleton state on pointer cancel', () => {\n  //     // Set up some drag state\n  //     tabDragIconSingleton.setProperties({\n  //       dragging: true,\n  //       dropSource: {} as any,\n  //       dropTarget: {} as any,\n  //       splitDirection: 'left',\n  //       dropIndex: 2,\n  //     })\n\n  //     const event = new PointerEvent('pointercancel', {\n  //       bubbles: true,\n  //       cancelable: true,\n  //     })\n  //     ioTab.onPointercancel(event)\n\n  //     expect(tabDragIconSingleton.dragging).toBe(false)\n  //     expect(tabDragIconSingleton.dropSource).toBeNull()\n  //     expect(tabDragIconSingleton.dropTarget).toBeNull()\n  //     expect(tabDragIconSingleton.splitDirection).toBe('none')\n  //     expect(tabDragIconSingleton.dropIndex).toBe(-1)\n  //   })\n\n  //   it('should prevent default and stop propagation on cancel', () => {\n  //     const event = new PointerEvent('pointercancel', {\n  //       bubbles: true,\n  //       cancelable: true,\n  //     })\n  //     const preventSpy = vi.spyOn(event, 'preventDefault')\n  //     const stopSpy = vi.spyOn(event, 'stopPropagation')\n\n  //     ioTab.onPointercancel(event)\n\n  //     expect(preventSpy).toHaveBeenCalled()\n  //     expect(stopSpy).toHaveBeenCalled()\n  //   })\n  // })\n\n  // describe('Click Behavior', () => {\n  //   it('should dispatch io-edit-tab with Select key on click when not dragging', () => {\n  //     const handler = vi.fn()\n  //     ioTab.addEventListener('io-edit-tab', handler)\n\n  //     ioTab.onClick()\n\n  //     expect(handler).toHaveBeenCalledTimes(1)\n  //     expect(handler.mock.calls[0][0].detail.tab).toBe(tab)\n  //     expect(handler.mock.calls[0][0].detail.key).toBe('Select')\n  //   })\n\n  //   it('should invoke onClick from pointerup when not dragging', () => {\n  //     const clickSpy = vi.spyOn(ioTab, 'onClick')\n\n  //     const upEvent = new PointerEvent('pointerup', {\n  //       pointerId: 1,\n  //       buttons: 0,\n  //       clientX: 100,\n  //       clientY: 100,\n  //       bubbles: true,\n  //       cancelable: true,\n  //     })\n  //     ioTab.onPointerup(upEvent)\n\n  //     expect(clickSpy).toHaveBeenCalled()\n  //   })\n\n  //   it('should NOT invoke onClick from pointerup when dragging', () => {\n  //     tabDragIconSingleton.dragging = true\n\n  //     const clickSpy = vi.spyOn(ioTab, 'onClick')\n\n  //     const upEvent = new PointerEvent('pointerup', {\n  //       pointerId: 1,\n  //       buttons: 0,\n  //       clientX: 100,\n  //       clientY: 100,\n  //       bubbles: true,\n  //       cancelable: true,\n  //     })\n  //     ioTab.onPointerup(upEvent)\n\n  //     expect(clickSpy).not.toHaveBeenCalled()\n  //   })\n  // })\n\n  // describe('Delete Click', () => {\n  //   it('should dispatch io-edit-tab with Backspace key on delete click', () => {\n  //     const handler = vi.fn()\n  //     ioTab.addEventListener('io-edit-tab', handler)\n\n  //     ioTab.onDeleteClick()\n\n  //     expect(handler).toHaveBeenCalledTimes(1)\n  //     expect(handler.mock.calls[0][0].detail.tab).toBe(tab)\n  //     expect(handler.mock.calls[0][0].detail.key).toBe('Backspace')\n  //   })\n  // })\n\n  // describe('Keyboard Events', () => {\n  //   const shiftKeys = ['Backspace', 'ArrowLeft', 'ArrowRight', 'ArrowUp', 'ArrowDown', 'Home', 'End']\n\n  //   shiftKeys.forEach(key => {\n  //     it(`should dispatch io-edit-tab on Shift+${key}`, () => {\n  //       const handler = vi.fn()\n  //       ioTab.addEventListener('io-edit-tab', handler)\n\n  //       const event = new KeyboardEvent('keydown', {\n  //         key,\n  //         shiftKey: true,\n  //         bubbles: true,\n  //         cancelable: true,\n  //       })\n  //       const preventSpy = vi.spyOn(event, 'preventDefault')\n\n  //       ioTab.onKeydown(event)\n\n  //       expect(handler).toHaveBeenCalledTimes(1)\n  //       expect(handler.mock.calls[0][0].detail.tab).toBe(tab)\n  //       expect(handler.mock.calls[0][0].detail.key).toBe(key)\n  //       expect(preventSpy).toHaveBeenCalled()\n  //     })\n  //   })\n\n  //   it('should expand context editor on Shift+Enter', () => {\n  //     const expandSpy = vi.spyOn(ioTab, 'expandContextEditor')\n\n  //     const event = new KeyboardEvent('keydown', {\n  //       key: 'Enter',\n  //       shiftKey: true,\n  //       bubbles: true,\n  //       cancelable: true,\n  //     })\n\n  //     ioTab.onKeydown(event)\n\n  //     expect(expandSpy).toHaveBeenCalled()\n  //   })\n\n  //   it('should NOT dispatch io-edit-tab without Shift modifier', () => {\n  //     const handler = vi.fn()\n  //     ioTab.addEventListener('io-edit-tab', handler)\n\n  //     const event = new KeyboardEvent('keydown', {\n  //       key: 'Backspace',\n  //       shiftKey: false,\n  //       bubbles: true,\n  //       cancelable: true,\n  //     })\n\n  //     ioTab.onKeydown(event)\n\n  //     expect(handler).not.toHaveBeenCalled()\n  //   })\n\n  //   it('should call super.onKeydown for non-shift keys', () => {\n  //     // Just verify it doesn't throw and doesn't dispatch io-edit-tab\n  //     const handler = vi.fn()\n  //     ioTab.addEventListener('io-edit-tab', handler)\n\n  //     const event = new KeyboardEvent('keydown', {\n  //       key: 'Tab',\n  //       shiftKey: false,\n  //       bubbles: true,\n  //       cancelable: true,\n  //     })\n\n  //     expect(() => ioTab.onKeydown(event)).not.toThrow()\n  //     expect(handler).not.toHaveBeenCalled()\n  //   })\n  // })\n\n  // describe('Context Editor', () => {\n  //   it('should have expandContextEditor method', () => {\n  //     expect(typeof ioTab.expandContextEditor).toBe('function')\n  //   })\n\n  //   it('should expand context editor without throwing', () => {\n  //     expect(() => ioTab.expandContextEditor()).not.toThrow()\n  //   })\n  // })\n\n  // describe('Drag End - Cleanup', () => {\n  //   it('should reset singleton state after drop on pointerup', () => {\n  //     tabDragIconSingleton.setProperties({\n  //       dragging: true,\n  //       dropSource: null,\n  //       dropTarget: null,\n  //       splitDirection: 'none',\n  //       dropIndex: -1,\n  //     })\n\n  //     const upEvent = new PointerEvent('pointerup', {\n  //       pointerId: 1,\n  //       buttons: 0,\n  //       clientX: 100,\n  //       clientY: 100,\n  //       bubbles: true,\n  //       cancelable: true,\n  //     })\n  //     ioTab.onPointerup(upEvent)\n\n  //     expect(tabDragIconSingleton.dragging).toBe(false)\n  //     expect(tabDragIconSingleton.dropSource).toBeNull()\n  //     expect(tabDragIconSingleton.dropTarget).toBeNull()\n  //     expect(tabDragIconSingleton.splitDirection).toBe('none')\n  //     expect(tabDragIconSingleton.dropIndex).toBe(-1)\n  //   })\n  // })\n\n  // describe('Edge Cases', () => {\n  //   it('should handle tab with empty label', () => {\n  //     const emptyLabelTab = new Tab({ id: 'empty-label', label: '' })\n  //     const emptyLabelIoTab = new IoTab({ tab: emptyLabelTab })\n  //     container.appendChild(emptyLabelIoTab)\n\n  //     const span = emptyLabelIoTab.querySelector('span:not(.io-icon)')\n  //     // Label defaults to id when empty\n  //     expect(span?.textContent).toBe('empty-label')\n\n  //     emptyLabelIoTab.remove()\n  //     emptyLabelTab.dispose()\n  //   })\n\n  //   it('should handle tab with very long label', () => {\n  //     const longLabel = 'A'.repeat(500)\n  //     const longTab = new Tab({ id: 'long', label: longLabel })\n  //     const longIoTab = new IoTab({ tab: longTab })\n  //     container.appendChild(longIoTab)\n\n  //     const span = longIoTab.querySelector('span:not(.io-icon)')\n  //     expect(span?.textContent).toBe(longLabel)\n\n  //     longIoTab.remove()\n  //     longTab.dispose()\n  //   })\n\n  //   it('should handle tab with unicode characters', () => {\n  //     const unicodeTab = new Tab({ id: 'unicode', label: 'æ—¥æœ¬èªžã‚¿ãƒ– ðŸŽ‰' })\n  //     const unicodeIoTab = new IoTab({ tab: unicodeTab })\n  //     container.appendChild(unicodeIoTab)\n\n  //     const span = unicodeIoTab.querySelector('span:not(.io-icon)')\n  //     expect(span?.textContent).toBe('æ—¥æœ¬èªžã‚¿ãƒ– ðŸŽ‰')\n\n  //     unicodeIoTab.remove()\n  //     unicodeTab.dispose()\n  //   })\n\n  //   it('should handle rapid selection changes', () => {\n  //     for (let i = 0; i < 10; i++) {\n  //       tab.selected = i % 2 === 0\n  //       expect(ioTab.getAttribute('selected')).toBe(String(i % 2 === 0))\n  //     }\n  //   })\n\n  //   it('should handle changing tab reference', () => {\n  //     const newTab = new Tab({ id: 'new-tab', label: 'New Tab' })\n  //     ioTab.tab = newTab\n\n  //     expect(ioTab.tab).toBe(newTab)\n  //     const span = ioTab.querySelector('span:not(.io-icon)')\n  //     expect(span?.textContent).toBe('New Tab')\n\n  //     newTab.dispose()\n  //   })\n  // })\n\n  // describe('Static Properties', () => {\n  //   it('should have Style getter', () => {\n  //     expect(IoTab.Style).toBeDefined()\n  //     expect(typeof IoTab.Style).toBe('string')\n  //     expect(IoTab.Style).toContain(':host')\n  //   })\n\n  //   it('should have Listeners getter', () => {\n  //     expect(IoTab.Listeners).toBeDefined()\n  //     expect(IoTab.Listeners.click).toBe('preventDefault')\n  //     expect(IoTab.Listeners.contextmenu).toBe('preventDefault')\n  //   })\n  // })\n\n  // describe('Attribute Reflection', () => {\n  //   it('should reflect overflow to attribute', () => {\n  //     ioTab.overflow = true\n  //     expect(ioTab.hasAttribute('overflow')).toBe(true)\n\n  //     ioTab.overflow = false\n  //     expect(ioTab.getAttribute('overflow')).toBe('false')\n  //   })\n\n  //   it('should update selected attribute synchronously', () => {\n  //     tab.selected = true\n  //     expect(ioTab.getAttribute('selected')).toBe('true')\n\n  //     tab.selected = false\n  //     expect(ioTab.getAttribute('selected')).toBe('false')\n  //   })\n  // })\n})\n\n// describe('IoTab Factory Function', () => {\n//   it('should export ioTab factory function', async () => {\n//     const { ioTab } = await import('./IoTab.js')\n//     expect(typeof ioTab).toBe('function')\n//   })\n\n//   it('should create virtual constructor from factory', async () => {\n//     const { ioTab } = await import('./IoTab.js')\n//     const tab = new Tab({ id: 'factory-test' })\n//     const vdom = ioTab({ tab })\n\n//     expect(vdom).toBeDefined()\n//     expect(vdom[0]).toBe('io-tab')\n\n//     tab.dispose()\n//   })\n// })\n\n"]}