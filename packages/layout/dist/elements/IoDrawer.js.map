{"version":3,"file":"IoDrawer.js","sourceRoot":"","sources":["../../src/elements/IoDrawer.ts"],"names":[],"mappings":"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","sourcesContent":["import { Register, ReactiveProperty, IoElement, IoElementProps, VDOMElement, div, ThemeSingleton } from '@io-gui/core'\nimport { ioIcon } from '@io-gui/icons'\nimport { MenuOption } from '@io-gui/menus'\nimport { Split } from '../nodes/Split.js'\nimport { Panel } from '../nodes/Panel.js'\nimport { ioSplit, parseFlexBasis } from './IoSplit.js'\nimport { ioPanel } from './IoPanel.js'\n\nexport type DrawerDirection = 'leading' | 'trailing'\n\nexport type IoDrawerProps = IoElementProps & {\n  orientation: 'horizontal' | 'vertical'\n  direction: DrawerDirection\n  child: Split | Panel | null\n  elements: VDOMElement[]\n  addMenuOption?: MenuOption\n}\n\n@Register\nexport class IoDrawer extends IoElement {\n  static get Style() {\n    return /* css */`\n      :host {\n        z-index: 2;\n        pointer-events: auto;\n        position: relative;\n      }\n      :host[orientation=\"horizontal\"] {\n        top: 0;\n        bottom: 0;\n        width: var(--io_lineHeight) !important;\n        cursor: ew-resize;\n      }\n      :host[orientation=\"vertical\"] {\n        left: 0;\n        right: 0;\n        height: var(--io_lineHeight) !important;\n        cursor: ns-resize;\n      }\n      :host[orientation=\"horizontal\"][direction=\"trailing\"] {\n        /* flex-direction: row-reverse; */\n      }\n      :host[orientation=\"vertical\"][direction=\"trailing\"] {\n        /* flex-direction: column-reverse; */\n      }\n\n      :host > .io-drawer-content {\n        position: relative;\n        overflow: hidden;\n        inset: 0;\n        display: flex;\n      }\n      :host[orientation=\"horizontal\"] > .io-drawer-content {\n        transform: translateX(0);\n        position: relative;\n        flex-direction: row;\n        height: 100%;\n        width: var(--io-drawer-size);\n        transition: transform 0.125s ease-out;\n      }\n      :host[orientation=\"horizontal\"][direction=\"leading\"][expanded] > .io-drawer-content {\n        transform: translateX(calc(var(--io-drawer-size) - var(--io_lineHeight)));\n      }\n      :host[orientation=\"horizontal\"][direction=\"trailing\"][expanded] > .io-drawer-content {\n        transform: translateX(calc(var(--io-drawer-size) * -1 + var(--io_lineHeight)));\n      }\n\n      :host > .io-drawer-content > .io-drawer-handle {\n        display: flex;\n        align-items: center;\n        background-color: var(--io_bgColorLight);\n        border: var(--io_border);\n        border-top: 0;\n        border-bottom: 0;\n        border-color: var(--io_borderColorInset);\n        @apply --unselectable;\n      }\n\n      :host > .io-drawer-content > io-panel,\n      :host > .io-drawer-content > io-split {\n        flex: 0 0 auto;\n      }\n      /* :host[orientation=\"horizontal\"] > .io-drawer-handle {\n        width: var(--io_lineHeight);\n        border-width: 0 var(--io_borderWidth);\n      }\n      :host[orientation=\"vertical\"] > .io-drawer-handle {\n        height: var(--io_lineHeight);\n        border-width: var(--io_borderWidth) 0;\n      }\n      :host > .io-drawer-handle:hover {\n        background-color: var(--io_bgColorLight);\n      }\n      :host > .io-drawer-handle:active {\n        background-color: var(--io_bgColorBlue);\n      }\n      :host > .io-drawer-handle > io-icon {\n        opacity: 0.5;\n        transition: transform 0.2s ease-out;\n      }\n      :host[expanded] > .io-drawer-handle > io-icon {\n        opacity: 1;\n      }\n      \n      :host[orientation=\"horizontal\"] > .io-drawer-content {\n        width: 0;\n        height: 100%;\n      }\n      :host[orientation=\"horizontal\"][expanded] > .io-drawer-content {\n        width: var(--io-drawer-size);\n      }\n      :host[orientation=\"vertical\"] > .io-drawer-content {\n        height: 0;\n        width: 100%;\n      }\n      :host[orientation=\"vertical\"][expanded] > .io-drawer-content {\n        height: var(--io-drawer-size);\n      }\n      :host > .io-drawer-content > io-panel,\n      :host > .io-drawer-content > io-split {\n        flex: 1 1 auto;\n      }\n      :host[orientation=\"horizontal\"] > .io-drawer-content > io-panel,\n      :host[orientation=\"horizontal\"] > .io-drawer-content > io-split {\n        min-width: var(--io-drawer-size);\n      }\n      :host[orientation=\"vertical\"] > .io-drawer-content > io-panel,\n      :host[orientation=\"vertical\"] > .io-drawer-content > io-split {\n        min-height: var(--io-drawer-size);\n      } */\n    `\n  }\n\n  @ReactiveProperty({type: String, value: 'horizontal', reflect: true})\n  declare orientation: 'horizontal' | 'vertical'\n\n  @ReactiveProperty({type: String, value: 'leading', reflect: true})\n  declare direction: DrawerDirection\n\n  @ReactiveProperty({type: Boolean, value: false, reflect: true})\n  declare expanded: boolean\n\n  @ReactiveProperty({type: Object})\n  declare child: Split | Panel\n\n  @ReactiveProperty(Array)\n  declare elements: VDOMElement[]\n\n  @ReactiveProperty({type: MenuOption})\n  declare addMenuOption: MenuOption | undefined\n\n  constructor(args: IoDrawerProps) {\n    super(args)\n  }\n\n  onClick(event: MouseEvent) {\n    event.preventDefault()\n    event.stopPropagation()\n    this.expanded = !this.expanded\n  }\n\n  expandedChanged() {\n    console.log('onExpandedChanged', this.expanded)\n    this.dispatch('io-drawer-expanded-changed', undefined, true)\n  }\n\n  changed() {\n    const drawerSize = parseFlexBasis(this.child.flex)\n    this.style.setProperty('--io-drawer-size', `${drawerSize + ThemeSingleton.lineHeight}px`)\n    const style = this.orientation === 'horizontal' ? {width: `${drawerSize}px`} : {height: `${drawerSize}px`} as Record<string, string>\n\n    let childVDOM: VDOMElement | null = null\n\n    if (this.child) {\n      if (this.child instanceof Split) {\n        childVDOM = ioSplit({\n          split: this.child,\n          style: style,\n          elements: this.elements,\n          addMenuOption: this.addMenuOption,\n        })\n      } else if (this.child instanceof Panel) {\n        childVDOM = ioPanel({\n          panel: this.child,\n          style: style,\n          elements: this.elements,\n          addMenuOption: this.addMenuOption,\n        })\n      }\n    }\n\n    let icon = ''\n    if (this.orientation === 'horizontal') {\n      icon = this.direction === 'leading' ? 'io:triangle_right' : 'io:triangle_left'\n    } else {\n      icon = this.direction === 'leading' ? 'io:triangle_down' : 'io:triangle_up'\n    }\n\n    this.render([\n      div({class: 'io-drawer-content'}, [\n        div({class: 'io-drawer-handle', '@click': this.onClick}, [\n          ioIcon({value: icon, size: 'small'})\n        ]),\n        childVDOM\n      ])\n    ])\n  }\n}\n\nexport const ioDrawer = function(args: IoDrawerProps) {\n  return IoDrawer.vConstructor(args)\n}\n"]}