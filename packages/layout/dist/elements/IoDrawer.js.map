{"version":3,"file":"IoDrawer.js","sourceRoot":"","sources":["../../src/elements/IoDrawer.ts"],"names":[],"mappings":"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","sourcesContent":["import { Register, ReactiveProperty, IoElement, IoElementProps, VDOMElement, div, ThemeSingleton } from '@io-gui/core'\nimport { ioIcon } from '@io-gui/icons'\nimport { MenuOption } from '@io-gui/menus'\nimport { Split } from '../nodes/Split.js'\nimport { Panel } from '../nodes/Panel.js'\nimport { IoSplit, ioSplit, parseFlexBasis } from './IoSplit.js'\nimport { ioPanel } from './IoPanel.js'\n\nexport type DrawerDirection = 'leading' | 'trailing'\n\nexport type IoDrawerProps = IoElementProps & {\n  orientation: 'horizontal' | 'vertical'\n  direction: DrawerDirection\n  parent: IoSplit\n  child: Split | Panel | null\n  elements: VDOMElement[]\n  addMenuOption?: MenuOption\n}\n\n@Register\nexport class IoDrawer extends IoElement {\n  static get Style() {\n    return /* css */`\n      :host {\n        z-index: 2;\n        pointer-events: auto;\n        position: relative;\n      }\n      :host[orientation=\"horizontal\"] {\n        top: 0;\n        bottom: 0;\n        width: var(--io_lineHeight) !important;\n        cursor: ew-resize;\n      }\n      :host[orientation=\"vertical\"] {\n        left: 0;\n        right: 0;\n        height: var(--io_lineHeight) !important;\n        cursor: ns-resize;\n      }\n\n      :host > .io-drawer-content {\n        position: relative;\n        display: flex;\n        overflow: hidden;\n        transition: transform 0.125s ease-out;\n        justify-content: flex-end;\n      }\n      :host[orientation=\"horizontal\"] > .io-drawer-content {\n        height: 100%;\n        width: var(--io-drawer-size);\n      }\n      :host[orientation=\"vertical\"] > .io-drawer-content {\n        width: 100%;\n        height: var(--io-drawer-size);\n        flex-direction: column;\n      }\n\n      :host[orientation=\"horizontal\"][direction=\"leading\"] > .io-drawer-content {\n        transform: translateX(calc(var(--io-drawer-size) * -1 + var(--io_lineHeight)));\n        flex-direction: row;\n      }\n      :host[orientation=\"horizontal\"][direction=\"leading\"][expanded] > .io-drawer-content {\n        transform: translateX(0);\n      }\n\n      :host[orientation=\"horizontal\"][direction=\"trailing\"] > .io-drawer-content {\n        transform: translateX(0);\n        flex-direction: row-reverse;\n      }\n      :host[orientation=\"horizontal\"][direction=\"trailing\"][expanded] > .io-drawer-content {\n        transform: translateX(calc(var(--io-drawer-size) * -1 + var(--io_lineHeight)));\n      }\n\n      :host[orientation=\"vertical\"][direction=\"leading\"] > .io-drawer-content {\n        transform: translateY(calc(var(--io-drawer-size) * -1 + var(--io_lineHeight)));\n        flex-direction: column;\n      }\n      :host[orientation=\"vertical\"][direction=\"leading\"][expanded] > .io-drawer-content {\n        transform: translateY(0);\n      }\n\n      :host[orientation=\"vertical\"][direction=\"trailing\"] > .io-drawer-content {\n        transform: translateY(0);\n        flex-direction: column-reverse;\n      }\n      :host[orientation=\"vertical\"][direction=\"trailing\"][expanded] > .io-drawer-content {\n        transform: translateY(calc(var(--io-drawer-size) * -1 + var(--io_lineHeight)));\n      }\n\n      :host > .io-drawer-content > .io-drawer-handle {\n        display: flex;\n        align-items: center;\n        background-color: var(--io_bgColorLight);\n        border: var(--io_border);\n        border-color: var(--io_borderColorStrong);\n        @apply --unselectable;\n      }\n      :host[orientation=\"horizontal\"] > .io-drawer-content > .io-drawer-handle {\n        border-top: 0;\n        border-bottom: 0;\n        flex-direction: row;\n      }\n      :host[orientation=\"vertical\"] > .io-drawer-content > .io-drawer-handle {\n        border-left: 0;\n        border-right: 0;\n        flex-direction: column;\n      }\n\n      :host > .io-drawer-content > io-panel,\n      :host > .io-drawer-content > io-split {\n        flex: 0 0 auto;\n      }\n    `\n  }\n\n  @ReactiveProperty({type: String, value: 'horizontal', reflect: true})\n  declare orientation: 'horizontal' | 'vertical'\n\n  @ReactiveProperty({type: String, value: 'leading', reflect: true})\n  declare direction: DrawerDirection\n\n  @ReactiveProperty({type: Boolean, value: false, reflect: true})\n  declare expanded: boolean\n\n  @ReactiveProperty({type: Object})\n  declare parent: IoSplit\n\n  @ReactiveProperty({type: Object})\n  declare child: Split | Panel\n\n  @ReactiveProperty(Array)\n  declare elements: VDOMElement[]\n\n  @ReactiveProperty({type: MenuOption})\n  declare addMenuOption: MenuOption | undefined\n\n  constructor(args: IoDrawerProps) {\n    super(args)\n  }\n\n  onClick(event: MouseEvent) {\n    event.preventDefault()\n    event.stopPropagation()\n    this.expanded = !this.expanded\n  }\n\n  expandedChanged() {\n    this.dispatch('io-drawer-expanded-changed', {element:this}, true)\n  }\n\n  childMutated() {\n    this.changed()\n  }\n\n  changed() {\n    if (!this.child) {\n      this.render([])\n      return\n    }\n\n    let availableSize = Infinity\n    const parent = this.parent as IoSplit\n    if (parent) {\n      const parentRect = parent.getBoundingClientRect()\n      availableSize = this.orientation === 'horizontal' ? parentRect.width : parentRect.height\n    }\n\n    const drawerSize = Math.min(parseFlexBasis(this.child.flex), availableSize - ThemeSingleton.lineHeight * 2)\n    const contentSize = drawerSize + ThemeSingleton.lineHeight\n    const style = this.orientation === 'horizontal' ? {width: `${drawerSize}px`} : {height: `${drawerSize}px`} as Record<string, string>\n\n    let childVDOM: VDOMElement | null = null\n\n    if (this.child instanceof Split) {\n      childVDOM = ioSplit({\n        split: this.child,\n        style: style,\n        elements: this.elements,\n        addMenuOption: this.addMenuOption,\n      })\n    } else if (this.child instanceof Panel) {\n      childVDOM = ioPanel({\n        panel: this.child,\n        style: style,\n        elements: this.elements,\n        addMenuOption: this.addMenuOption,\n      })\n    }\n\n    const icon = {\n      horizontal: {\n        leading: this.expanded ? 'io:triangle_left' : 'io:triangle_right',\n        trailing: this.expanded ? 'io:triangle_right' : 'io:triangle_left',\n      },\n      vertical: {\n        leading: this.expanded ? 'io:triangle_up' : 'io:triangle_down',\n        trailing: this.expanded ? 'io:triangle_down' : 'io:triangle_up',\n      }\n    }[this.orientation][this.direction]\n\n    this.render([\n      div({class: 'io-drawer-content', style: {'--io-drawer-size': `${contentSize}px`}}, [\n        childVDOM,\n        div({class: 'io-drawer-handle', '@click': this.onClick}, [\n          ioIcon({value: icon, size: 'small'})\n        ]),\n      ])\n    ])\n  }\n}\n\nexport const ioDrawer = function(args: IoDrawerProps) {\n  return IoDrawer.vConstructor(args)\n}\n"]}