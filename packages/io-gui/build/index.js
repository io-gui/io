const bothAreNaNs=function(e,t){return"number"==typeof e&&isNaN(e)&&"number"==typeof t&&isNaN(t)};class Binding{node;property;targets=[];targetProperties=new WeakMap;constructor(e,t){this.node=e,this.property=t,this.onSourceChanged=this.onSourceChanged.bind(this),this.onTargetChanged=this.onTargetChanged.bind(this),this.node.addEventListener(`${this.property}-changed`,this.onSourceChanged)}set value(e){this.node[this.property]=e}get value(){return this.node[this.property]}addTarget(e,t){const i=this.getTargetProperties(e);if(-1===this.targets.indexOf(e)&&this.targets.push(e),-1===i.indexOf(t)){i.push(t);const r=e._reactiveProperties.get(t);r.binding&&r.binding!==this&&r.binding.removeTarget(e,t),r.binding=this,e.addEventListener(`${t}-changed`,this.onTargetChanged),e.setProperty(t,this.value,!0)}}removeTarget(e,t){const i=this.getTargetProperties(e);if(t){const r=i.indexOf(t);i.splice(r,1);e._reactiveProperties.get(t).binding=void 0,e.removeEventListener(`${t}-changed`,this.onTargetChanged)}else{for(let t=i.length;t--;){const r=i[t];e._reactiveProperties.get(r).binding=void 0,e.removeEventListener(`${r}-changed`,this.onTargetChanged)}i.length=0}0===i.length&&this.targets.splice(this.targets.indexOf(e),1)}onTargetChanged(e){const t=this.value,i=e.detail.value;if(t!==i){if(bothAreNaNs(i,t))return;this.node[this.property]=i}}onSourceChanged(e){const t=e.detail.value;for(let e=this.targets.length;e--;){const i=this.targets[e],r=this.getTargetProperties(i);for(let e=r.length;e--;){const o=r[e],n=i[o];if(n!==t){if(bothAreNaNs(t,n))continue;i[o]=t}}}}getTargetProperties(e){return this.targetProperties.has(e)||this.targetProperties.set(e,[]),this.targetProperties.get(e)}toJSON(){const e=[];for(let t=0;t<this.targets.length;t++){const i=this.targets[t],r=this.getTargetProperties(i);e[t]=r}return{node:this.node.constructor.name,property:this.property,targets:this.targets.map((e=>e.constructor.name)),targetProperties:e}}dispose(){this.node.removeEventListener(`${this.property}-changed`,this.onSourceChanged);for(let e=this.targets.length;e--;)this.removeTarget(this.targets[e]);this.targets.length=0,delete this.node,delete this.property,delete this.targets,delete this.targetProperties}}class ChangeQueue{dispatchedChange=!1;dispatching=!1;constructor(e){this.changes=[],this.node=e,Object.defineProperty(this,"dispatch",{value:this.dispatch.bind(this),enumerable:!1,writable:!1,configurable:!1})}queue(e,t,i){const r=this.changes.findIndex((t=>t.property===e));-1===r?this.changes.push({property:e,value:t,oldValue:i}):t===this.changes[r].oldValue?this.changes.splice(r,1):this.changes[r].value=t}dispatch(){if(!0===this.dispatching)return;this.dispatching=!0;const e=[];for(;this.changes.length;){const t=this.changes[0];this.changes.splice(0,1);const i=t.property;t.value!==t.oldValue&&(this.dispatchedChange=!0,this.node[i+"Changed"]&&this.node[i+"Changed"](t),this.node.dispatch(i+"-changed",t),e.push(i))}this.dispatchedChange&&(this.node.changed(),this.node.dispatchMutation(this.node,e)),this.dispatchedChange=!1,this.dispatching=!1}dispose(){this.changes.length=0,delete this.node,delete this.changes}}const hardenListenerDefinition=e=>Array.isArray(e)?e:[e],listenerFromDefinition=(e,t)=>{const i=t[0],r=t[1],o="string"==typeof i?e[i]:i;return r?[o,r]:[o]};class EventDispatcher{node;nodeIsEventTarget;protoListeners={};propListeners={};addedListeners={};constructor(e){this.node=e,this.nodeIsEventTarget=e instanceof EventTarget,this.setProtoListeners(e)}setProtoListeners(e){for(const t in e._protochain?.listeners){for(let i=0;i<e._protochain.listeners[t].length;i++){const r=listenerFromDefinition(e,e._protochain.listeners[t][i]);this.protoListeners[t]=[r]}if(this.nodeIsEventTarget&&this.protoListeners[t]){const e=this.protoListeners[t][0];EventTarget.prototype.addEventListener.call(this.node,t,e[0],e[1])}}}applyPropListeners(e){const t={};for(const i in e){if(!i.startsWith("@"))continue;const r=i.slice(1),o=hardenListenerDefinition(e[i]),n=listenerFromDefinition(this.node,o);t[r]=[n]}const i=this.propListeners;for(const e in i)if(!t[e]){if(this.nodeIsEventTarget){const t=i[e][0];EventTarget.prototype.removeEventListener.call(this.node,e,t[0],t[1])}delete i[e]}for(const e in t){if(this.nodeIsEventTarget){const r=t[e][0];if(i[e]){const t=i[e][0];(t!==r||r[1]&&JSON.stringify(t[1])!==JSON.stringify(r[1]))&&EventTarget.prototype.removeEventListener.call(this.node,e,t[0],t[1])}EventTarget.prototype.addEventListener.call(this.node,e,r[0],r[1])}i[e]=t[e]}}addEventListener(e,t,i){this.addedListeners[e]||(this.addedListeners[e]=[]);if(-1!==this.addedListeners[e].findIndex((e=>e[0]===t)))return;const r=i?[t,i]:[t];this.addedListeners[e].push(r),this.nodeIsEventTarget&&EventTarget.prototype.addEventListener.call(this.node,e,t,i)}removeEventListener(e,t,i){if(this.addedListeners[e]){if(t){const r=this.addedListeners[e].findIndex((e=>e[0]===t));-1!==r&&(this.addedListeners[e].splice(r,1),this.nodeIsEventTarget&&EventTarget.prototype.removeEventListener.call(this.node,e,t,i))}else{for(let t=0;t<this.addedListeners[e].length;t++)if(this.nodeIsEventTarget){const i=this.addedListeners[e][t];EventTarget.prototype.removeEventListener.call(this.node,e,i[0],i[1])}this.addedListeners[e].length=0}0===this.addedListeners[e].length&&delete this.addedListeners[e]}}dispatchEvent(e,t,i=!0,r=this.node){if(r instanceof EventTarget)EventTarget.prototype.dispatchEvent.call(r,new CustomEvent(e,{detail:t,bubbles:i,composed:!0,cancelable:!0}));else{const i={detail:t,target:r,path:[r]};if(this.protoListeners[e])for(let t=0;t<this.protoListeners[e].length;t++){this.protoListeners[e][t][0].call(r,i)}if(this.propListeners[e]){this.propListeners[e][0][0].call(r,i)}if(this.addedListeners[e])for(let t=0;t<this.addedListeners[e].length;t++){this.addedListeners[e][t][0].call(r,i)}}}dispose(){for(const e in this.protoListeners){if(this.nodeIsEventTarget)for(let t=0;t<this.protoListeners[e].length;t++){const i=this.protoListeners[e][t];EventTarget.prototype.removeEventListener.call(this.node,e,i[0],i[1])}this.protoListeners[e].length=0,delete this.protoListeners[e]}for(const e in this.propListeners){if(this.nodeIsEventTarget){const t=this.propListeners[e][0];EventTarget.prototype.removeEventListener.call(this.node,e,t[0],t[1])}this.propListeners[e].length=0,delete this.propListeners[e]}for(const e in this.addedListeners){if(this.nodeIsEventTarget)for(let t=this.addedListeners[e].length;t--;){const i=this.addedListeners[e][t];EventTarget.prototype.removeEventListener.call(this.node,e,i[0],i[1])}this.addedListeners[e].length=0,delete this.addedListeners[e]}delete this.node,delete this.protoListeners,delete this.propListeners,delete this.addedListeners}}function Register(e){e.prototype.Register(e)}class ReactiveProtoProperty{constructor(e){if(null==e)this.value=e;else if("function"==typeof e)this.type=e;else if(e instanceof Binding)this.value=e.value,this.binding=e;else if(e&&e.constructor===Object){const t=e;Object.hasOwn(t,"value")&&(this.value=t.value),Object.hasOwn(t,"type")&&(this.type=t.type),t.binding instanceof Binding&&(this.binding=t.binding,this.value=this.binding.value),Object.hasOwn(t,"reflect")&&(this.reflect=t.reflect),Object.hasOwn(t,"init")&&(this.init=t.init)}else e&&e.constructor===Object||(this.value=e)}assign(e){Object.hasOwn(e,"value")&&(this.value=e.value),Object.hasOwn(e,"type")&&(this.type=e.type),Object.hasOwn(e,"reflect")&&(this.reflect=e.reflect),Object.hasOwn(e,"init")&&(this.init=e.init),Object.hasOwn(e,"binding")&&(this.binding=e.binding)}toJSON(){const e={value:this.value,type:this.type,reflect:this.reflect,init:this.init,binding:this.binding};return e.value&&"object"==typeof e.value&&(e.value=e.value.constructor.name),e.type&&"function"==typeof e.type&&(e.type=e.type.name),e}}function decodeInitArgument(e,t){if("this"===e)return t;if("string"!=typeof e||!e.startsWith("this."))return e;{const i=e.split(".");let r=t;for(let e=1;e<i.length;e++)r=r[i[e]];if(r)return r;console.error(`ReactivePropertyInstance: Invalid path ${e}`)}}class ReactivePropertyInstance{value;type;binding;reflect=!1;init=void 0;constructor(e,t){if(this.value=t.value,this.type=t.type,this.binding=t.binding,"boolean"==typeof t.reflect&&(this.reflect=t.reflect),void 0!==t.init&&(this.init=t.init),this.binding instanceof Binding)this.value=this.binding.value;else if(void 0===this.value)if(this.type===Boolean)this.value=!1;else if(this.type===String)this.value="";else if(this.type===Number)this.value=0;else if("function"==typeof this.type&&void 0!==this.init)if(this.init instanceof Array){const t=this.init.map((t=>decodeInitArgument(t,e)));this.value=new this.type(...t)}else if(this.init instanceof Object){const t={};Object.keys(this.init).forEach((i=>{t[i]=decodeInitArgument(this.init[i],e)})),this.value=new this.type(t)}else if(null===this.init)this.value=new this.type;else{const t=decodeInitArgument(this.init,e);this.value=new this.type(t)}}}const e=new WeakMap,t=new WeakMap;function Property(t=void 0){return(i,r)=>{const o=i.constructor,n=e.get(o)||{};e.set(o,n),n[r]=t}}function ReactiveProperty(e={}){return(i,r)=>{const o=i.constructor,n=t.get(o)||{};t.set(o,n),n[r]=e}}const i=new WeakMap;function Style(e){return(t,r)=>{console.log("***",r);const o=t.constructor;i.set(o,e)}}class ProtoChain{constructors=[];properties={};reactiveProperties={};listeners={};style="";handlers=[];constructor(e){let t=e.prototype;for(;t&&e!==HTMLElement&&e!==Object;)this.constructors.push(e),t=Object.getPrototypeOf(t),e=t.constructor;let i="",r="";for(let t=this.constructors.length;t--;)e=this.constructors[t],this.addPropertiesFromDecorators(e),r=this.addProperties(e.Properties,r),this.addReactivePropertiesFromDecorators(e),i=this.addReactiveProperties(e.ReactiveProperties,i),this.addListeners(e.Listeners),this.addStyle(e.Style),this.addStyleFromDecorators(e),this.addHandlers(e.prototype)}init(e){for(let t=this.handlers.length;t--;)Object.defineProperty(e,this.handlers[t],{value:e[this.handlers[t]].bind(e),writable:!0,configurable:!0})}addPropertiesFromDecorators(t){const i=e.get(t);if(i)for(const e in i)this.properties[e]=i[e]}addProperties(e={},t=""){const i=JSON.stringify(e);if(i!==t){for(const t in e)this.properties[t]=e[t];t=i}return t}addReactivePropertiesFromDecorators(e){const i=t.get(e);if(i)for(const e in i){const t=new ReactiveProtoProperty(i[e]);this.reactiveProperties[e]||(this.reactiveProperties[e]=t),this.reactiveProperties[e].assign(t)}}addReactiveProperties(e={},t=""){const i={};for(const t in e)i[t]=new ReactiveProtoProperty(e[t]);const r=JSON.stringify(i);if(r!==t){for(const t in e)this.reactiveProperties[t]?this.reactiveProperties[t].assign(i[t]):this.reactiveProperties[t]=i[t];t=r}return t}addListeners(e){for(const t in e)if(e[t]){const i=hardenListenerDefinition(e[t]),r=this.listeners[t]=this.listeners[t]||[],o=r.findIndex((e=>e[0]===i[0]));-1!==o?r[o][1]?r[o][1]=Object.assign(r[o][1],i[1]):i[1]&&(r[o][1]=i[1]):r.push(i)}}addStyle(e){e&&-1===this.style.indexOf(e)&&(this.style=this.style?this.style+"\n"+e:e)}addStyleFromDecorators(e){const t=i.get(e);t&&(this.style=this.style?this.style+"\n"+t:t)}addHandlers(e){const t=Object.getOwnPropertyNames(e);for(let i=0;i<t.length;i++){const r=t[i];if(/^on[A-Z]/.test(r)||/^_on[A-Z]/.test(r)||r.endsWith("Changed")||r.endsWith("Mutated")||"changed"===r){const t=Object.getOwnPropertyDescriptor(e,r);if(void 0===t||t.get||t.set)continue;"function"==typeof e[r]&&-1===this.handlers.indexOf(r)&&this.handlers.push(r)}}}validateReactiveProperties(){for(const e in this.reactiveProperties){const t=this.reactiveProperties[e];if(-1!==[String,Number,Boolean].indexOf(t.type))(t.type===Boolean&&void 0!==t.value&&"boolean"!=typeof t.value||t.type===Number&&void 0!==t.value&&"number"!=typeof t.value||t.type===String&&void 0!==t.value&&"string"!=typeof t.value)&&console.warn(`Reactive property "${e}" value "${t.value}" type for ${t.type.name} property!`);else{const i=null===t.value,r=void 0===t.value;"function"!=typeof t.type||t.value instanceof t.type||i||r||console.warn(`Reactive property "${e}" value "${t.value}" type for ${t.type.name} property!`)}}}}let r=0;const o=[],n=[],s=[],a=new WeakMap,c=new WeakMap;let l=n,h=a;async function nextQueue(){return new Promise((e=>{l.push(e),h.set(e,{arg:void 0,node:void 0,frame:r+1})}))}function throttle(e,t,i,n=1){if(-1!==o.indexOf(e))-1===l.indexOf(e)&&l.push(e),h.has(e)?h.get(e).arg=t:h.set(e,{arg:t,node:i,frame:r+n});else{if(o.push(e),i?._disposed)return;try{e(t)}catch(e){console.error(e)}}}function debounce(e,t,i,o=1){if(-1===l.indexOf(e)&&l.push(e),h.has(e)){const n=h.get(e);n.arg=t,n.node=i,n.frame=r+o}else h.set(e,{arg:t,node:i,frame:r+o})}requestAnimationFrame((function executeQueue(){o.length=0,r++;const e=l,t=h;l=l===n?s:n,h=h===a?c:a;for(let i=0;i<e.length;i++){const o=e[i],n=t.get(o);if(t.delete(o),void 0===n&&console.warn(o),n.frame>r)-1===l.indexOf(o)&&l.push(o),h.set(o,n);else if(!n.node?._disposed)try{void 0!==n.arg?o(n.arg):o()}catch(e){console.error(e)}}e.length=0,requestAnimationFrame(executeQueue)}));const d=new WeakMap,applyNativeElementProps=function(e,t){let i=d.get(e)||{};d.set(e,i);for(const r in t){const o=r,n=t[o];if(Object.hasOwn(i,o)||(i[o]=e[o]),"style"===o)for(const t in n)e.style.setProperty(t,n[t]);else"class"===o?e.className=n:o.startsWith("data-")?void 0===n?e.removeAttribute(o):e.setAttribute(o,n):e[o]=void 0===n?i[o]:n;(void 0===n||n===i[o])&&e.removeAttribute(o)}for(const r in i){const o=r;Object.hasOwn(t,o)||(e[o]=i[o],e.removeAttribute(o))}e._eventDispatcher||Object.defineProperty(e,"_eventDispatcher",{enumerable:!1,configurable:!0,value:new EventDispatcher(e)}),e._eventDispatcher.applyPropListeners(t)},constructElement=function(e){const t=e.props||{},i=window.customElements?window.customElements.get(e.tag):null;if(i&&i._isIoElement)return new i(t);const r=document.createElement(e.tag);return applyNativeElementProps(r,t),r},disposeChildren=function(e){requestAnimationFrame((()=>{const t=Array.from(e.querySelectorAll("*")).concat([e]);for(let e=t.length;e--;)"function"==typeof t[e].dispose?t[e].dispose():t[e]._eventDispatcher&&(t[e]._eventDispatcher.dispose(),delete t[e]._eventDispatcher)}))},vDOMAttributes=function(e){const t={};for(let i=0;i<e.attributes.length;i++){const r=e.attributes[i].name,o=e.getAttribute(r);null!==o&&(t[r]=o)}return t},toVDOMChildren=function(e){const t=[];for(let i=0;i<e.length;i++)t.push(toVDOM(e[i]));return t},toVDOM=function(e){return{tag:e.localName,props:vDOMAttributes(e),children:e.children.length>0?toVDOMChildren(e.children):e.textContent}},p={},u=new RegExp("(( --[\\s\\S]*?): {([\\s\\S]*?)})","gi"),g=new RegExp("(@apply\\s.*?;)","gi");var __decorate$5=function(e,t,i,r){var o,n=arguments.length,s=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(n<3?o(s):n>3?o(t,i,s):o(t,i))||s);return n>3&&s&&Object.defineProperty(t,i,s),s};const f=new ResizeObserver((e=>{for(const t of e)t.target.onResized()}));let v=class IoElement extends HTMLElement{static get Style(){return"\n      :host {\n        display: block;\n        box-sizing: border-box;\n        -webkit-touch-callout: none;\n      }\n      :host[hidden] {\n        display: none;\n        pointer-events: none;\n      }\n    "}static get ReactiveProperties(){return{}}static get Properties(){return{}}static get Listeners(){return{}}constructor(e={}){super(),this.init(),this._protochain.init(this),Object.defineProperty(this,"_changeQueue",{enumerable:!1,configurable:!0,value:new ChangeQueue(this)}),Object.defineProperty(this,"_reactiveProperties",{enumerable:!1,configurable:!0,value:new Map}),Object.defineProperty(this,"_bindings",{enumerable:!1,configurable:!0,value:new Map}),Object.defineProperty(this,"_eventDispatcher",{enumerable:!1,configurable:!0,value:new EventDispatcher(this)}),Object.defineProperty(this,"_observedObjectProperties",{enumerable:!1,configurable:!0,value:[]}),Object.defineProperty(this,"_observedNodeProperties",{enumerable:!1,configurable:!0,value:[]}),initReactiveProperties(this),initProperties(this),this.applyProperties(e,!0),this.ready(),this.dispatchQueue()}applyProperties(e,t=!1){for(const t in e)if(this._reactiveProperties.has(t))this.setProperty(t,e[t],!0);else if("class"===t)this.className=e[t];else if("style"===t)for(const i in e[t])this.style[i]=e[t][i];else t.startsWith("data-")?void 0===e[t]?this.removeAttribute(t):this.setAttribute(t,e[t]):t.startsWith("@")||(this[t]=e[t],void 0===e[t]&&this.hasAttribute(t)&&this.removeAttribute(t));this._eventDispatcher.applyPropListeners(e),t||this.dispatchQueue()}setProperties(e){setProperties(this,e)}setProperty(e,t,i=!1){if(this._disposed)return;setProperty(this,e,t,i);this._reactiveProperties.get(e).reflect&&this.setAttribute(e.toLowerCase(),t)}init(){}ready(){}changed(){}queue(e,t,i){this._changeQueue.queue(e,t,i)}dispatchQueue(e=!1){dispatchQueue(this,e)}throttle(e,t,i=1){throttle(e,t,this,i)}debounce(e,t,i=1){debounce(e,t,this,i)}onPropertyMutated(e){return onPropertyMutated(this,e)}dispatchMutation(e=this,t=[]){e._isNode?this.dispatch("io-object-mutation",{object:e,properties:t}):this.dispatch("io-object-mutation",{object:e,properties:t},!1,window)}bind(e){return bind(this,e)}unbind(e){unbind(this,e)}addEventListener(e,t,i){this._eventDispatcher.addEventListener(e,t,i)}removeEventListener(e,t,i){this._eventDispatcher.removeEventListener(e,t,i)}dispatch(e,t=void 0,i=!1,r){this._eventDispatcher.dispatchEvent(e,t,i,r)}dispose(){dispose(this)}connectedCallback(){"function"==typeof this.onResized&&f.observe(this)}disconnectedCallback(){"function"==typeof this.onResized&&f.unobserve(this)}render(e,t,i){t=t||this;const r=e.filter((e=>null!==e));this.$={},this.traverse(r,t,i)}traverse(e,t,i){const r=t.children;for(;r.length>e.length;){const e=r[r.length-1];t.removeChild(e),i||disposeChildren(e)}for(let o=0;o<r.length;o++){const n=r[o];if(n.localName!==e[o].tag||i){const r=n,s=constructElement(e[o]);t.insertBefore(s,r),t.removeChild(r),i||disposeChildren(r)}else n.removeAttribute("className"),n.removeAttribute("style"),e[o].props&&(n._isIoElement?n.applyProperties(e[o].props):applyNativeElementProps(n,e[o].props))}if(r.length<e.length){const i=document.createDocumentFragment();for(let t=r.length;t<e.length;t++){const r=constructElement(e[t]);i.appendChild(r)}t.appendChild(i)}for(let t=0;t<e.length;t++){const o=e[t],n=r[t];if(o.props?.id&&(this.$[o.props.id]=n),void 0!==o.children)if("string"==typeof o.children)this._flattenTextNode(n),n._textNode.nodeValue=String(o.children);else if(o.children instanceof Array){const e=o.children.filter((e=>null!==e));this.traverse(e,n,i)}}}_flattenTextNode(e){if(0===e.childNodes.length&&e.appendChild(document.createTextNode("")),"#text"!==e.childNodes[0].nodeName&&(e.innerHTML="",e.appendChild(document.createTextNode(""))),e._textNode=e.childNodes[0],e.childNodes.length>1){const t=e.textContent;for(let t=e.childNodes.length;t--;)0!==t&&e.removeChild(e.childNodes[t]);e._textNode.nodeValue=t}}setAttribute(e,t){!0===t?HTMLElement.prototype.setAttribute.call(this,e,""):!1===t||""===t?this.removeAttribute(e):"string"!=typeof t&&"number"!=typeof t||this.getAttribute(e)!==String(t)&&HTMLElement.prototype.setAttribute.call(this,e,String(t))}toVDOM(){return toVDOM(this)}Register(e){Object.defineProperty(e,"_isNode",{enumerable:!1,value:!0,writable:!1}),Object.defineProperty(e.prototype,"_isNode",{enumerable:!1,value:!0,writable:!1}),Object.defineProperty(e.prototype,"_protochain",{value:new ProtoChain(e)});const t=e.name.replace(/([a-z])([A-Z,0-9])/g,"$1-$2").toLowerCase();Object.defineProperty(e,"localName",{value:t}),Object.defineProperty(e.prototype,"localName",{value:t}),Object.defineProperty(e,"_isIoElement",{enumerable:!1,value:!0,writable:!1}),Object.defineProperty(e.prototype,"_isIoElement",{enumerable:!1,value:!0,writable:!1}),Object.defineProperty(window,e.name,{value:e}),window.customElements.define(t,e),function applyElementStyleToDocument(e,t){let i="";const r=t.match(u);if(r)for(let e=0;e<r.length;e++){const t=r[e].split(": {"),o=t[0].replace(" --","--"),n=t[1].replace(/}/g,"").trim().replace(/^ +/gm,"");p[o]=n,i+=r[e].replace(" --",".").replace(": {"," {")}const o=(t=t.replace(u,"")).match(g);if(o)for(let e=0;e<o.length;e++){const i=o[e].split("@apply ")[1].replace(";","");p[i]?t=t.replace(o[e],p[i]):console.warn("IoElement: cound not find mixin:",i)}t=i+t.replace(new RegExp(":host","g"),e);const n=document.createElement("style");n.innerHTML=t,n.setAttribute("id","io-style-"+e.replace("io-","")),document.head.appendChild(n)}(t,e.prototype._protochain.style),Object.defineProperty(e,"vConstructor",{value:function(e,i){const r={tag:t};return void 0!==e&&("string"==typeof e||e instanceof Array?r.children=e:"object"==typeof e&&(r.props=e),void 0!==i&&("string"==typeof i||i instanceof Array)&&(r.children=i)),r}})}};__decorate$5([ReactiveProperty({type:String,value:"immediate"})],v.prototype,"reactivity",void 0),__decorate$5([Property(Object)],v.prototype,"$",void 0),v=__decorate$5([Register],v);const b=v.vConstructor;var __decorate$4=function(e,t,i,r){var o,n=arguments.length,s=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(n<3?o(s):n>3?o(t,i,s):o(t,i))||s);return n>3&&s&&Object.defineProperty(t,i,s),s};let y=class Node extends Object{static get ReactiveProperties(){return{}}static get Properties(){return{}}static get Listeners(){return{}}constructor(e){super(),this.init(),this._protochain.init(this),Object.defineProperty(this,"_changeQueue",{enumerable:!1,configurable:!0,value:new ChangeQueue(this)}),Object.defineProperty(this,"_reactiveProperties",{enumerable:!1,configurable:!0,value:new Map}),Object.defineProperty(this,"_bindings",{enumerable:!1,configurable:!0,value:new Map}),Object.defineProperty(this,"_eventDispatcher",{enumerable:!1,configurable:!0,value:new EventDispatcher(this)}),Object.defineProperty(this,"_observedObjectProperties",{enumerable:!1,configurable:!0,value:[]}),Object.defineProperty(this,"_observedNodeProperties",{enumerable:!1,configurable:!0,value:[]}),initReactiveProperties(this),initProperties(this),this.applyProperties("object"==typeof e?e:{},!0),this.ready(),this.dispatchQueue()}applyProperties(e,t=!1){for(const t in e)this._reactiveProperties.has(t)?this.setProperty(t,e[t],!0):t.startsWith("@")||(this[t]=e[t]);this._eventDispatcher.applyPropListeners(e),t||this.dispatchQueue()}setProperties(e){setProperties(this,e)}setProperty(e,t,i=!1){this._disposed||setProperty(this,e,t,i)}init(){}ready(){}changed(){}queue(e,t,i){this._changeQueue.queue(e,t,i)}dispatchQueue(e=!1){dispatchQueue(this,e)}throttle(e,t,i=1){throttle(e,t,this,i)}debounce(e,t,i=1){debounce(e,t,this,i)}onPropertyMutated(e){return onPropertyMutated(this,e)}dispatchMutation(e=this,t=[]){e._isNode?this.dispatch("io-object-mutation",{object:e,properties:t}):this.dispatch("io-object-mutation",{object:e,properties:t},!1,window)}bind(e){return bind(this,e)}unbind(e){unbind(this,e)}addEventListener(e,t,i){this._eventDispatcher.addEventListener(e,t,i)}removeEventListener(e,t,i){this._eventDispatcher.removeEventListener(e,t,i)}dispatch(e,t=void 0,i=!1,r){this._eventDispatcher.dispatchEvent(e,t,i,r)}dispose(){dispose(this)}Register(e){Object.defineProperty(e,"_isNode",{enumerable:!1,value:!0,writable:!1}),Object.defineProperty(e.prototype,"_isNode",{enumerable:!1,value:!0,writable:!1}),Object.defineProperty(e.prototype,"_protochain",{value:new ProtoChain(e)})}};function initReactiveProperties(e){for(const t in e._protochain.reactiveProperties){Object.defineProperty(e,t,{get:function(){return e._reactiveProperties.get(t).value},set:function(i){e.setProperty(t,i)},configurable:!0,enumerable:!0});const i=new ReactivePropertyInstance(e,e._protochain.reactiveProperties[t]);e._reactiveProperties.set(t,i),i.binding&&i.binding.addTarget(e,t),observeObjectProperty(e,t,i),observeNodeProperty(e,t,i),e instanceof v&&i.reflect&&void 0!==i.value&&null!==i.value&&e.setAttribute(t,i.value)}}function initProperties(e){for(const t in e._protochain.properties){let i=e._protochain.properties[t];"function"==typeof i?i=new i:i instanceof Array?i=i.slice():"object"==typeof i&&(i=Object.assign({},i)),e[t]=i}}function setProperties(e,t){for(const i in t)e._reactiveProperties.has(i)&&e.setProperty(i,t[i],!0);e.dispatchQueue()}function setProperty(e,t,i,r=!1){const o=e._reactiveProperties.get(t),n=o.value;if(i!==n){const s=i instanceof Binding?i:null;if(s){const i=o.binding;return s!==i?(i&&i.removeTarget(e,t),void s.addTarget(e,t)):void 0}if(observeObjectProperty(e,t,o),o.type===NodeArray&&i.constructor===Array){const e=o.value;return void e.withInternalOperation((()=>{e.length=0,e.push(...i)}),!1)}if(o.value=i,i!==n){let r=!1,o=!1;e._reactiveProperties.forEach(((e,s)=>{e.value===i&&s!==t&&(r=!0),e.value===n&&s!==t&&(o=!0)})),i?._isNode&&!r&&(e._observedNodeProperties.push(t),i.addEventListener("io-object-mutation",e.onPropertyMutated)),!n?._isNode||o||n._disposed||(e._observedNodeProperties.splice(e._observedNodeProperties.indexOf(t),1),n.removeEventListener("io-object-mutation",e.onPropertyMutated))}n!==i&&(e.queue(t,i,n),e.dispatchQueue(r))}}function dispatchQueue(e,t=!1){"debounced"===e.reactivity||t||e._changeQueue.dispatching?e.debounce(e._changeQueue.dispatch):"throttled"===e.reactivity?e.throttle(e._changeQueue.dispatch):"immediate"===e.reactivity&&e._changeQueue.dispatch()}function onPropertyMutated(e,t){const i=t.detail.object,r=[...new Set([...e._observedObjectProperties,...e._observedNodeProperties])];for(let o=0;o<r.length;o++){const n=r[o];if(e._reactiveProperties.get(n).value===i){const i=n+"Mutated";return"function"==typeof e[i]&&e[i](t),!0}}}function observeObjectProperty(e,t,i){e._observedObjectProperties.includes(t)||function isNonNodeObject(e){return"object"==typeof e&&null!==e&&!e._isNode}(i.value)&&(e._observedObjectProperties.push(t),1===e._observedObjectProperties.length&&window.addEventListener("io-object-mutation",e.onPropertyMutated))}function observeNodeProperty(e,t,i){if(i.value?._isNode){let r=!1;e._reactiveProperties.forEach(((e,o)=>{e.value===i.value&&o!==t&&(r=!0)})),r||(e._observedNodeProperties.push(t),i.value.addEventListener("io-object-mutation",e.onPropertyMutated))}}function bind(e,t){return e._bindings.has(t)||e._bindings.set(t,new Binding(e,t)),e._bindings.get(t)}function unbind(e,t){const i=e._bindings.get(t);i&&(i.dispose(),e._bindings.delete(t));const r=e._reactiveProperties.get(t);r?.binding?.removeTarget(e,t)}function dispose(e){if(e._disposed)return;e._bindings.forEach(((t,i)=>{t.dispose(),e._bindings.delete(i)})),delete e._bindings,e._observedObjectProperties.length&&(window.removeEventListener("io-object-mutation",e.onPropertyMutated),e._observedObjectProperties.length=0,delete e._observedObjectProperties),delete e._protochain,e._changeQueue.dispose(),delete e._changeQueue;let t=[];e._reactiveProperties.forEach(((i,r)=>{i.binding?.removeTarget(e,r),!i.value?._isNode||t.includes(i.value)||i.value._disposed||(i.value.removeEventListener("io-object-mutation",e.onPropertyMutated),t.push(i.value))}));for(const t in e._protochain.properties)delete e[t];e._eventDispatcher.dispose(),delete e._eventDispatcher,delete e._reactiveProperties,Object.defineProperty(e,"_disposed",{value:!0})}__decorate$4([ReactiveProperty({type:String,value:"immediate"})],y.prototype,"reactivity",void 0),y=__decorate$4([Register],y);class NodeArray extends Array{node;_isInternalOperation=!1;static get[Symbol.species](){return Array}constructor(e,...t){super(...t),this.node=e,this.itemMutated=this.itemMutated.bind(this),this.dispatchMutation=this.dispatchMutation.bind(this);const i=this,r=new Proxy(this,{get(e,t){if("selected"===t){let t="";for(let i=0;i<e.length;i++){const r=e[i];if(r.selected&&r.id){t=r.id;break}}return t}if("symbol"==typeof t)return e[t];const i=Number(t);return!isNaN(i)&&i>=0?e[i]:e[t]},set(e,t,r){if("length"===t){if(!i._isInternalOperation){const t=e.length,o=Number(r);if(o<t)for(let r=o;r<t;r++){const t=e[r];t instanceof y&&t.removeEventListener("io-object-mutation",i.itemMutated)}else if(o>t)return console.warn("NodeArray: cannot extend array with empty slots"),!0}return e[t]=r,i._isInternalOperation||i.dispatchMutation(),!0}if("selected"===t){for(let t=0;t<e.length;t++){const i=e[t];i.id===r?i.selected=!0:i.selected=!1}return e[t]=r,i._isInternalOperation||i.dispatchMutation(),!0}const o=Number(t);if(!isNaN(o)&&o>=0){const n=e[o];return n instanceof y&&!i._isInternalOperation&&n.removeEventListener("io-object-mutation",i.itemMutated),e[t]=r,r instanceof y&&!i._isInternalOperation&&r.addEventListener("io-object-mutation",i.itemMutated),r.selected&&r.id&&(e.selected=r.id),i._isInternalOperation||i.dispatchMutation(),!0}return e[t]=r,!0}});return Object.defineProperty(this,"proxy",{value:r,enumerable:!1,configurable:!1}),r}withInternalOperation(e,t=!0){this._isInternalOperation=!0;try{return e()}finally{this._isInternalOperation=!1,t&&this.dispatchMutation()}}splice(e,t,...i){return this.withInternalOperation((()=>{for(let i=e;i<e+t;i++){const e=this[i];e instanceof y&&e.removeEventListener("io-object-mutation",this.itemMutated)}const r=super.splice(e,t,...i);for(let t=e;t<e+i.length;t++){const e=this[t];e instanceof y&&e.addEventListener("io-object-mutation",this.itemMutated)}return r}))}push(...e){return this.withInternalOperation((()=>{const t=super.push(...e);for(const t of e)t instanceof y&&t.addEventListener("io-object-mutation",this.itemMutated);return t}))}unshift(...e){return this.withInternalOperation((()=>{const t=super.unshift(...e);for(const t of e)t instanceof y&&t.addEventListener("io-object-mutation",this.itemMutated);return t}))}pop(){return this.withInternalOperation((()=>{const e=super.pop();return e instanceof y&&e.removeEventListener("io-object-mutation",this.itemMutated),e}))}shift(){return this.withInternalOperation((()=>{const e=super.shift();return e instanceof y&&e.removeEventListener("io-object-mutation",this.itemMutated),e}))}reverse(){return this.withInternalOperation((()=>super.reverse()))}sort(e){return this.withInternalOperation((()=>super.sort(e)))}fill(){return console.warn("NodeArray: fill is not supported"),this}copyWithin(){return console.warn("NodeArray: copyWithin is not supported"),this}itemMutated(e){const t=e.detail.object;e.detail.properties.includes("selected")&&this.node.dispatch("io-node-array-selected-changed",{node:this.proxy,item:t},!1),this.node.dispatch("io-object-mutation",{object:this.proxy},!1,window)}dispatchMutation(){this.node.dispatch("io-object-mutation",{object:this.proxy},!1,window)}}var __decorate$3=function(e,t,i,r){var o,n=arguments.length,s=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(n<3?o(s):n>3?o(t,i,s):o(t,i))||s);return n>3&&s&&Object.defineProperty(t,i,s),s};const m=new class EmulatedLocalStorage{constructor(){Object.defineProperty(this,"store",{value:new Map}),Object.defineProperty(this,"warned",{value:!1,writable:!0})}get permitted(){try{return"true"===self.localStorage.getItem("Storage:user-permitted")}catch(e){console.warn("Storage: Cannot access localStorage. Check browser privacy settings!")}return!1}set permitted(e){try{e?(console.info("Storage: localStorage permission granted."),this.store.set("Storage:user-permitted",String(e)),this.store.forEach(((e,t)=>{self.localStorage.setItem(t,String(e)),this.store.delete(t)}))):(console.info("Storage: localStorage permission revoked."),self.localStorage.setItem("Storage:user-permitted",String(e)),new Map(Object.entries(self.localStorage)).forEach(((e,t)=>{this.store.set(t,e)})),self.localStorage.clear())}catch(e){console.warn("Storage: Cannot access localStorage. Check browser privacy settings!")}}setItem(e,t){const i="object"==typeof t?JSON.stringify(t):String(t);"Storage:user-permitted"!==e?this.permitted?self.localStorage.setItem(e,i):(this.store.set(e,i),this.warned||this.permitted||(console.warn("Storage: localStorage permission not set."),this.warned=!0)):this.permitted="true"===t}getItem(e){return this.permitted?self.localStorage.getItem(e):this.store.has(e)?this.store.get(e):null}removeItem(e){if(this.permitted)return self.localStorage.removeItem(e);this.store.delete(e)}clear(){if(this.permitted)return self.localStorage.clear();this.store.clear()}},w={local:new Map,hash:new Map};let P={},C=class StorageNode extends y{constructor(e){if(void 0===e.storage&&(e.storage="local"),w[e.storage].has(e.key))return w[e.storage].get(e.key);{let t,i;"object"==typeof e.value&&null!==e.value?(i=e.value.constructor,t=JSON.stringify(e.value)):t=e.value;let r=null;switch(e.storage){case"hash":r=function getValueFromHash(e){return P=parseHash(self.location.hash),P[e]||null}(e.key);break;case"local":r=m.getItem("Storage:"+e.key)}if(null!==r)try{const t=JSON.parse(r);e.value=i?new i(t):t}catch(t){e.value=r}return super(e),this.valueMutatedDebounced=this.valueMutatedDebounced.bind(this),this.default=t,this.binding=this.bind("value"),this.binding.dispose=()=>{this.clearStorage()},"__proto__"!==e.key&&w[e.storage].set(e.key,this),this}}dispose(){this.clearStorage(),super.dispose()}clearStorage(){switch(this.storage){case"hash":this.removeValueToHash();break;case"local":m.removeItem("Storage:"+this.key)}const e=this.storage;w[e].delete(this.key)}valueMutated(){this.debounce(this.valueMutatedDebounced)}valueMutatedDebounced(){this.valueChanged()}valueChanged(){switch(this.storage){case"hash":this.saveValueToHash();break;case"local":null===this.value||void 0===this.value||this.value===this.default&&"object"!=typeof this.value?m.removeItem("Storage:"+this.key):m.setItem("Storage:"+this.key,JSON.stringify(this.value))}}removeValueToHash(){P=parseHash(self.location.hash),delete P[this.key];let e="";for(const t in P)e+=t+"="+P[t]+"&";e?(e=e.slice(0,-1),self.location.hash=e):history.replaceState("",document.title,self.location.pathname+self.location.search)}saveValueToHash(){P=parseHash(self.location.hash);const e=this.value;void 0!==e&&""!==e&&e!==this.default?"string"==typeof e?isNaN(e)?P[this.key]=e:P[this.key]='"'+e+'"':P[this.key]=JSON.stringify(e):delete P[this.key];let t="";for(const e in P)t+=e+"="+P[e]+"&";t?(t=t.slice(0,-1),self.location.hash=t):history.replaceState("",document.title,self.location.pathname+self.location.search)}};__decorate$3([ReactiveProperty({value:"",type:String})],C.prototype,"key",void 0),__decorate$3([ReactiveProperty()],C.prototype,"value",void 0),__decorate$3([ReactiveProperty({value:"local",type:String})],C.prototype,"storage",void 0),C=__decorate$3([Register],C);const _=Object.assign((e=>new C(e).binding),{permit(){m.permitted=!0},unpermit(){m.permitted=!1}});function parseHash(e){return e.substring(1).split("&").reduce((function(e,t){const i=t.split("=");return i[0]&&i[1]&&(e[i[0]]=i[1].replace(/%22/g,'"').replace(/%20/g," ")),e}),{})}function updateAllFromHash(){P=parseHash(self.location.hash);for(const e in P)if(w.hash.has(e)){const t=w.hash.get(e);try{t.value=JSON.parse(P[e])}catch(i){t.value=P[e]}}for(const[e,t]of w.hash.entries())void 0===P[e]&&(t.value=t.default)}self.addEventListener("hashchange",updateAllFromHash,!1),updateAllFromHash();var __decorate$2=function(e,t,i,r){var o,n=arguments.length,s=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(n<3?o(s):n>3?o(t,i,s):o(t,i))||s);return n>3&&s&&Object.defineProperty(t,i,s),s};const x="v0.11",O=document.createElement("style");O.setAttribute("id","io-theme-variables-"+x),document.head.appendChild(O);class Color{r;g;b;a;constructor(e,t,i,r){this.r=e,this.g=t,this.b=i,this.a=r}toCss(){const e=Math.floor(255*this.r),t=Math.floor(255*this.g),i=Math.floor(255*this.b);return void 0!==this.a&&1!==this.a?`rgba(${e}, ${t}, ${i}, ${this.a})`:`rgb(${e}, ${t}, ${i})`}}const R={spacing:2,spacing2:0,spacing3:0,spacing5:0,spacing8:0,lineHeight:20,fontSize:14,fieldHeight:0,borderRadius:2,borderWidth:1,borderColor:new Color(.2,.2,.2,1),borderColorLight:new Color(.3,.3,.3,1),borderColorStrong:new Color(.6,.6,.6,1),borderColorRed:new Color(1,.35,.15,1),borderColorGreen:new Color(.1,.7,.2,1),borderColorBlue:new Color(.2,.4,.95,1),bgColor:new Color(.85,.85,.85,1),bgColorStrong:new Color(.9,.9,.9,1),bgColorLight:new Color(.8,.8,.8,1),bgColorRed:new Color(1,.5,.3,1),bgColorGreen:new Color(.2,.9,.3,1),bgColorBlue:new Color(.2,.5,.9,1),bgColorInput:new Color(.95,.96,.95,1),color:new Color(.25,.25,.2,1),colorStrong:new Color(0,0,0,1),colorLight:new Color(.6,.6,.6,1),colorRed:new Color(1,.2,0,1),colorGreen:new Color(0,.6,.1,1),colorBlue:new Color(.2,.3,1,1),colorWhite:new Color(1,1,1,1),colorInput:new Color(0,.05,.02,1),gradientColorStart:new Color(.9,.9,.9,1),gradientColorEnd:new Color(.75,.75,.75,1),shadowColor:new Color(0,0,0,.2)},E={spacing:2,spacing2:0,spacing3:0,spacing5:0,spacing8:0,lineHeight:20,fontSize:14,fieldHeight:0,borderRadius:2,borderWidth:1,borderColor:new Color(.5,.5,.5,1),borderColorLight:new Color(.3,.3,.3,1),borderColorStrong:new Color(0,0,0,1),borderColorRed:new Color(1,.2,0,1),borderColorBlue:new Color(.4,.5,.9,1),borderColorGreen:new Color(0,.6,.1,1),bgColor:new Color(.2,.2,.2,1),bgColorStrong:new Color(.15,.15,.15,1),bgColorLight:new Color(.25,.25,.25,1),bgColorRed:new Color(.7,.2,.1,1),bgColorGreen:new Color(.1,.5,.2,1),bgColorBlue:new Color(.2,.4,.8,1),bgColorInput:new Color(.02,.02,.02,1),color:new Color(.6,.6,.6,1),colorStrong:new Color(.86,.86,.86,1),colorLight:new Color(.3,.3,.3,1),colorRed:new Color(1,.4,.4,1),colorGreen:new Color(.4,.95,.3,1),colorBlue:new Color(.6,.9,1,1),colorWhite:new Color(1,1,1,1),colorInput:new Color(.65,.7,.68,1),gradientColorStart:new Color(.45,.45,.45,1),gradientColorEnd:new Color(.2,.2,.2,1),shadowColor:new Color(0,0,0,.2)},S=_({value:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",storage:"local",key:"theme-"+x}),L=_({value:{},storage:"local",key:"io-themes-"+x});let A=class Theme extends y{static get ReactiveProperties(){const e={};for(const t in R){const i=R[t];e[t]=i instanceof Object?{value:i,type:Color,init:null}:i}return e}ready(){this.registerTheme("light",R),this.registerTheme("dark",E),this.themeIDChanged()}registerTheme(e,t){this.themeDefaults[e]=t,this.setProperty("themeDefaults",JSON.parse(JSON.stringify(this.themeDefaults)),!0),L.value[e]=L.value[e]||t,L.value=JSON.parse(JSON.stringify(L.value))}reset(){L.value=JSON.parse(JSON.stringify(this.themeDefaults)),this.themeIDChanged()}themeIDChanged(){const e=L.value[this.themeID];for(const t in e)e[t]instanceof Object&&'["r","g","b","a"]'===JSON.stringify(Object.keys(e[t]))&&(e[t]=new Color(e[t].r,e[t].g,e[t].b,e[t].a));this.setProperties(e)}onPropertyMutated(e){if(super.onPropertyMutated(e))return this.changed(),this.dispatchMutation(),!0}fontSizeChanged(){this.lineHeight=Math.max(this.fontSize,this.lineHeight)}lineHeightChanged(){this.fontSize=Math.min(this.lineHeight,this.fontSize)}changed(){this.fieldHeight=this.lineHeight+2*(this.spacing+this.borderWidth),this.spacing2=2*this.spacing,this.spacing3=3*this.spacing,this.spacing5=5*this.spacing,this.spacing8=8*this.spacing;const e=Array.from(Object.keys(R)).reduce(((e,t)=>(L.value[this.themeID][t]=this[t],"object"==typeof this[t]?`${e}--io_${t}: ${this[t].toCss()};\n    `:`${e}--io_${t}: ${this[t]}px;\n    `)),"");O.innerHTML=`body {\n  ${e}\n}\n\n  body {\n    --io_border: var(--io_borderWidth) solid var(--io_borderColor);\n    --io_borderColorInset: var(--io_borderColorStrong) var(--io_borderColorLight) var(--io_borderColorLight) var(--io_borderColorStrong);\n    --io_borderColorOutset: var(--io_borderColorLight) var(--io_borderColorStrong) var(--io_borderColorStrong) var(--io_borderColorLight);\n    --io_gradientOutset: linear-gradient(180deg, var(--io_gradientColorStart), var(--io_gradientColorEnd) 100%);\n    --io_gradientInset: linear-gradient(0deg, var(--io_gradientColorStart), var(--io_gradientColorEnd) 150%);\n    --io_shadow: 2px 2px 6px var(--io_shadowColor), 1px 1px 1px var(--io_shadowColor);\n    --io_shadowInset: 0.75px 0.75px 2px inset var(--io_shadowColor);\n    --io_shadowOutset: 1px 1px 2px var(--io_shadowColor);\n  }\n`,this.debounce(this.onSaveTheme,void 0,60)}onSaveTheme(){L.value=JSON.parse(JSON.stringify(L.value))}};__decorate$2([ReactiveProperty({type:Object,init:null})],A.prototype,"themeDefaults",void 0),__decorate$2([ReactiveProperty({type:String,binding:S})],A.prototype,"themeID",void 0),__decorate$2([ReactiveProperty("debounced")],A.prototype,"reactivity",void 0),A=__decorate$2([Register],A);const j=new A,k={saturate:"\n  #ifndef saturate\n    #define saturate(v) clamp(v, 0., 1.)\n  #endif\n",translate:"\n  vec2 translate(vec2 samplePosition, vec2 xy){\n    return samplePosition - vec2(xy.x, xy.y);\n  }\n  vec2 translate(vec2 samplePosition, float x, float y){\n    return samplePosition - vec2(x, y);\n  }\n",circle:"\n  float circle(vec2 samplePosition, float radius){\n    return saturate((length(samplePosition) - radius) * uPxRatio);\n  }\n",rectangle:"\n  float rectangle(vec2 samplePosition, vec2 halfSize){\n    vec2 edgeDistance = abs(samplePosition) - halfSize;\n    float outside = length(max(edgeDistance, 0.));\n    float inside = min(max(edgeDistance.x, edgeDistance.y), 0.);\n    return 1.0 - saturate((outside + inside) * 1000000.0);\n  }\n",paintDerivativeGrid2D:"\n  float paintDerivativeGrid2D(vec2 samplePosition, vec2 gridWidth, float lineWidth) {\n    vec2 sp = samplePosition / gridWidth;\n    float fractx = abs(fract(sp.x - 0.5) - 0.5) * 2.0;\n    float fracty = abs(fract(sp.y - 0.5) - 0.5) * 2.0;\n\n    float sx = ((sp.x - 0.5) - 0.5) * 2.0;\n    float sy = ((sp.y - 0.5) - 0.5) * 2.0;\n    \n    float absx = abs(max(dFdx(sx), dFdy(sx)));\n    float absy = abs(max(dFdy(sy), dFdx(sy)));\n\n    float fadeX = 1.0 - dFdx(sx);\n    float fadeY = 1.0 - dFdy(sx);\n    if (fadeX <= 0.0 || fadeY <= 0.0) return 1.0;\n\n    float linex = fractx / absx - (0.5 * max(uPxRatio, 2.0) * lineWidth - 1.0) - 0.5;\n    float liney = fracty / absy - (0.5 * max(uPxRatio, 2.0) * lineWidth - 1.0) - 0.5;\n\n    return (1.0 - saturate(min(linex, liney)));\n  }\n",lineVertical:"\n  float lineVertical(vec2 samplePosition, float lineWidth) {\n    return (abs(samplePosition.x) * 2.0 > lineWidth) ? 0.0 : 1.0;\n  }\n",lineHorizontal:"\n  float lineHorizontal(vec2 samplePosition, float lineWidth) {\n    return (abs(samplePosition.y) * 2.0 > lineWidth) ? 0.0 : 1.0;\n  }\n",lineCross2d:"\n  float lineCross2d(vec2 samplePosition, float lineWidth) {\n    return (min(abs(samplePosition.x), abs(samplePosition.y)) * 2.0 > lineWidth) ? 0.0 : 1.0;\n  }\n",checker:"\n  float checker(vec2 samplePosition, float size) {\n    vec2 checkerPos = floor(samplePosition / size);\n    float checkerMask = mod(checkerPos.x + mod(checkerPos.y, 2.0), 2.0);\n    return checkerMask;\n  }\n",checkerX:"\n  float checkerX(vec2 samplePosition, float size) {\n    vec2 checkerPos = floor(samplePosition / size);\n    float checkerMask = mod(checkerPos.x, 2.0);\n    return checkerMask;\n  }\n",checkerY:"\n  float checkerY(vec2 samplePosition, float size) {\n    vec2 checkerPos = floor(samplePosition / size);\n    float checkerMask = mod(checkerPos.y, 2.0);\n    return checkerMask;\n  }\n",compose:"\n  vec3 compose(vec3 dst, vec4 src) {\n    return mix(dst, src.rgb, src.a);\n  }\n",hue2rgb:"\n  vec3 hue2rgb(float hue) {\n    hue = fract(hue);\n    float R = abs(hue * 6. - 3.) - 1.;\n    float G = 2. - abs(hue * 6. - 2.);\n    float B = 2. - abs(hue * 6. - 4.);\n    return saturate(vec3(R,G,B));\n  }\n",hsv2rgb:"\n  vec3 hsv2rgb(vec3 hsv) {\n    vec3 rgb = hue2rgb(hsv.r);\n    return ((rgb - 1.) * hsv.g + 1.) * hsv.b;\n  }\n",hsl2rgb:"\n  vec3 hsl2rgb(vec3 hsl) {\n    vec3 rgb = hue2rgb(hsl.x);\n    float C = (1. - abs(2. * hsl.z - 1.)) * hsl.y;\n    return (rgb - 0.5) * C + hsl.z;\n  }\n"};var __decorate$1=function(e,t,i,r){var o,n=arguments.length,s=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(n<3?o(s):n>3?o(t,i,s):o(t,i))||s);return n>3&&s&&Object.defineProperty(t,i,s),s};const M=document.createElement("canvas"),N=M.getContext("webgl",{antialias:!1,premultipliedAlpha:!1});N.getExtension("OES_standard_derivatives"),N.enable(N.BLEND),N.blendFunc(N.SRC_ALPHA,N.ONE_MINUS_SRC_ALPHA),N.disable(N.DEPTH_TEST);const I=N.createBuffer();N.bindBuffer(N.ARRAY_BUFFER,I),N.bufferData(N.ARRAY_BUFFER,new Float32Array([-1,1,0,-1,-1,0,1,-1,0,1,1,0]),N.STATIC_DRAW),N.bindBuffer(N.ARRAY_BUFFER,null);const T=N.createBuffer();N.bindBuffer(N.ARRAY_BUFFER,T),N.bufferData(N.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),N.STATIC_DRAW),N.bindBuffer(N.ARRAY_BUFFER,null);const D=N.createBuffer();N.bindBuffer(N.ELEMENT_ARRAY_BUFFER,D),N.bufferData(N.ELEMENT_ARRAY_BUFFER,new Uint16Array([3,2,1,3,1,0]),N.STATIC_DRAW),N.bindBuffer(N.ELEMENT_ARRAY_BUFFER,null),N.bindBuffer(N.ELEMENT_ARRAY_BUFFER,D);const F=new WeakMap;let B,H=class IoGl extends v{static get Style(){return"\n      :host {\n        position: relative;\n        overflow: hidden !important;\n        user-select: none;\n      }\n      :host > canvas {\n        position: absolute;\n        pointer-events: none;\n        image-rendering: pixelated;\n      }\n      :host > span {\n        position: absolute;\n        text-shadow: 0 0 3px var(--io_bgColorStrong), 0 0 3px var(--io_bgColorStrong), 0 0 3px var(--io_bgColorStrong);\n        left: 3px;\n        pointer-events: none;\n        color: var(--io_colorStrong);\n      }\n    "}#e=!1;#t;#i;#r;#o;static get Vert(){return"\n      attribute vec3 position;\n      attribute vec2 uv;\n      varying vec2 vUv;\n\n      void main(void) {\n        vUv = uv;\n        gl_Position = vec4(position, 1.0);\n      }\n\n"}static get GlUtils(){return`\n      ${k.saturate}\n      ${k.translate}\n      ${k.circle}\n      ${k.rectangle}\n      ${k.paintDerivativeGrid2D}\n      ${k.lineVertical}\n      ${k.lineHorizontal}\n      ${k.lineCross2d}\n      ${k.checker}\n      ${k.checkerX}\n      ${k.checkerY}\n      ${k.compose}\n    `}static get Frag(){return"\n      void main(void) {\n        gl_FragColor = io_color;\n      }\n\n"}initPropertyUniform(e,t){switch(t.value.constructor){case Boolean:return"uniform int "+e+";\n";case Number:return"uniform float "+e+";\n";case Array:return this.#r[e]=t.value.length,"uniform vec"+t.value.length+" "+e+";\n";case Color:return this.#r[e]=4,"uniform vec4 "+e+";\n"}return""}initShader(){let e="\n    #extension GL_OES_standard_derivatives : enable\n    precision highp float;\n";this.theme._reactiveProperties.forEach(((t,i)=>{e+=this.initPropertyUniform("io_"+i,t)})),e+="\n",this._reactiveProperties.forEach(((t,i)=>{const r="u"+i.charAt(0).toUpperCase()+i.slice(1);e+=this.initPropertyUniform(r,t)})),e+=this.constructor.prototype._glUtils;const t=N.createShader(N.VERTEX_SHADER);if(N.shaderSource(t,this.constructor.Vert),N.compileShader(t),!N.getShaderParameter(t,N.COMPILE_STATUS)){const e=N.getShaderInfoLog(t);console.error("IoGl [Vertex Shader] "+this.localName+" error:"),console.warn(e)}const i=N.createShader(N.FRAGMENT_SHADER);if(N.shaderSource(i,e+this.constructor.Frag),N.compileShader(i),!N.getShaderParameter(i,N.COMPILE_STATUS)){const e=N.getShaderInfoLog(i);console.error("IoGl [Frament Shader] "+this.localName+" error:"),console.warn(e)}const r=N.createProgram();return N.attachShader(r,t),N.attachShader(r,i),r}constructor(e={}){super(e),this.#t=document.createElement("canvas"),this.appendChild(this.#t),this.#i=this.#t.getContext("2d",{alpha:!0}),this.#r={},this.theme._reactiveProperties.forEach(((e,t)=>{e.type===Color&&(this.#r["io_"+t]=4)})),this._reactiveProperties.forEach(((e,t)=>{const i="u"+t.charAt(0).toUpperCase()+t.slice(1);e.type===Array&&(this.#r[i]=e.value.length)})),F.has(this.constructor)?this.#o=F.get(this.constructor):(this.#o=this.initShader(),F.set(this.constructor,this.#o)),N.linkProgram(this.#o);const t=N.getAttribLocation(this.#o,"position");N.bindBuffer(N.ARRAY_BUFFER,I),N.vertexAttribPointer(t,3,N.FLOAT,!1,0,0),N.enableVertexAttribArray(t);const i=N.getAttribLocation(this.#o,"uv");N.bindBuffer(N.ARRAY_BUFFER,T),N.vertexAttribPointer(i,2,N.FLOAT,!1,0,0),N.enableVertexAttribArray(i),this.updateThemeUniforms()}onResized(){const e=window.devicePixelRatio,t=this.getBoundingClientRect(),i=window.getComputedStyle(this),r=parseInt(i.borderRightWidth)+parseInt(i.borderLeftWidth),o=parseInt(i.borderTopWidth)+parseInt(i.borderBottomWidth),n=Math.max(0,Math.floor(t.width-r)),s=Math.max(0,Math.floor(t.height-o));(n!==this.size[0]||s!==this.size[1]||e!==this.pxRatio)&&(this.#t.style.width=Math.floor(n)+"px",this.#t.style.height=Math.floor(s)+"px",this.#e=!0,this.setProperties({size:[n,s],pxRatio:e}))}get ctx(){return this.#i}themeMutated(){this.updateThemeUniforms(),this.throttle(this.onRender)}changed(){this.throttle(this.onRender)}onRender(){const e=Math.floor(this.size[0]*this.pxRatio),t=Math.floor(this.size[1]*this.pxRatio);e&&t&&(this.setShaderProgram(),this._reactiveProperties.forEach(((e,t)=>{const i="u"+t.charAt(0).toUpperCase()+t.slice(1);this.updatePropertyUniform(i,e)})),this.#e&&(this.#t.width=e,this.#t.height=t,this.#e=!1),M.width=e,M.height=t,N.viewport(0,0,e,t),N.clearColor(0,0,0,0),N.clear(N.COLOR_BUFFER_BIT),this.#i.clearRect(0,0,e,t),N.drawElements(N.TRIANGLES,6,N.UNSIGNED_SHORT,0),this.#i.drawImage(M,0,0))}setShaderProgram(){B!==this.#o&&(B=this.#o,N.useProgram(this.#o))}updatePropertyUniform(e,t){this.setShaderProgram(),this.setUniform(e,t.value)}updateThemeUniforms(){this.theme._reactiveProperties.forEach(((e,t)=>{this.updatePropertyUniform("io_"+t,e)}))}setUniform(e,t){const i=N.getUniformLocation(this.#o,e);if(null===i)return;let r,o=typeof t;switch(t instanceof Array&&(o="array"),o){case"boolean":N.uniform1i(i,t?1:0);break;case"number":N.uniform1f(i,t??1);break;case"object":case"array":switch(r=[0,1,2,3],"object"==typeof t&&(void 0!==t.x?r=["x","y","z","w"]:void 0!==t.r?r=["r","g","b","a"]:void 0!==t.h?r=["h","s","v","a"]:void 0!==t.c&&(r=["c","m","y","k"])),this.#r[e]){case 2:if(void 0===t){N.uniform2f(i,0,0);break}N.uniform2f(i,t[r[0]]??1,t[r[1]]??1);break;case 3:if(void 0===t){N.uniform3f(i,0,0,0);break}N.uniform3f(i,t[r[0]]??1,t[r[1]]??1,t[r[2]]??1);break;case 4:if(void 0===t){N.uniform4f(i,0,0,0,0);break}N.uniform4f(i,t[r[0]]??1,t[r[1]]??1,t[r[2]]??1,t[r[3]]??1)}}}Register(e){super.Register(e);let t="";const i=e.prototype._protochain.constructors;for(let e=i.length;e--;){const r=i[e],o=Object.getOwnPropertyDescriptor(r,"GlUtils");o&&o.get&&(t+=r.GlUtils)}Object.defineProperty(e.prototype,"_glUtils",{enumerable:!1,value:t})}};__decorate$1([ReactiveProperty({type:y,value:j})],H.prototype,"theme",void 0),__decorate$1([ReactiveProperty({type:Array,init:[0,0]})],H.prototype,"size",void 0),__decorate$1([ReactiveProperty({type:Number,value:1})],H.prototype,"pxRatio",void 0),__decorate$1([ReactiveProperty("throttled")],H.prototype,"reactivity",void 0),H=__decorate$1([Register],H);const W=["a","abbr","acronym","address","applet","area","article","aside","audio","b","base","basefont","bdi","bdo","big","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","dir","div","dl","dt","em","embed","fieldset","figcaption","figure","font","footer","form","frame","frameset","head","header","hgroup","h1","h2","h3","h4","h5","h6","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noframes","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strike","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","tt","u","ul","var","video","wbr"],U={};W.forEach((e=>{U[e]=function(t,i){const r={tag:e};return void 0!==t&&("string"==typeof t||t instanceof Array?r.children=t:"object"==typeof t&&(r.props=t),void 0!==i&&("string"==typeof i||i instanceof Array)&&(r.children=i)),r}}));const{a:$,abbr:z,acronym:Q,address:G,applet:J,area:V,article:Y,aside:q,audio:X,b:Z,base:K,basefont:ee,bdi:te,bdo:ie,big:re,blockquote:oe,body:ne,br:se,button:ae,canvas:ce,caption:le,center:he,cite:de,code:pe,col:ue,colgroup:ge,data:fe,datalist:ve,dd:be,del:ye,details:me,dfn:we,dialog:Pe,dir:Ce,div:_e,dl:xe,dt:Oe,em:Re,embed:Ee,fieldset:Se,figcaption:Le,figure:Ae,font:je,footer:ke,form:Me,frame:Ne,frameset:Ie,head:Te,header:De,hgroup:Fe,h1:Be,h2:He,h3:We,h4:Ue,h5:$e,h6:ze,hr:Qe,html:Ge,i:Je,iframe:Ve,img:Ye,input:qe,ins:Xe,kbd:Ze,keygen:Ke,label:et,legend:tt,li:it,link:rt,main:ot,map:nt,mark:st,menu:at,menuitem:ct,meta:lt,meter:ht,nav:dt,noframes:pt,noscript:ut,object:gt,ol:ft,optgroup:vt,option:bt,output:yt,p:mt,param:wt,picture:Pt,pre:Ct,progress:_t,q:xt,rp:Ot,rt:Rt,ruby:Et,s:St,samp:Lt,script:At,section:jt,select:kt,small:Mt,source:Nt,span:It,strike:Tt,strong:Dt,style:Ft,sub:Bt,summary:Ht,sup:Wt,svg:Ut,table:$t,tbody:zt,td:Qt,template:Gt,textarea:Jt,tfoot:Vt,th:Yt,thead:qt,time:Xt,title:Zt,tr:Kt,track:ei,tt:ti,u:ii,ul:ri,video:oi,wbr:ni}=U;var __decorate=function(e,t,i,r){var o,n=arguments.length,s=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(n<3?o(s):n>3?o(t,i,s):o(t,i))||s);return n>3&&s&&Object.defineProperty(t,i,s),s};let si=null,ai=class IoOverlay extends v{static get Style(){return"\n      :host {\n        display: block;\n        position: fixed;\n        top: 0;\n        left: 0;\n        bottom: 0;\n        right: 0;\n        z-index: 100000;\n        user-select: none;\n        overflow: hidden;\n        pointer-events: none;\n        touch-action: none;\n        background: transparent;\n      }\n      :host[expanded] {\n        background: rgba(0, 0, 0, 0.25);\n        pointer-events: all;\n      }\n      :host > * {\n        position: absolute !important;\n        box-shadow: var(--io_shadow);\n      }\n      :host * {\n        touch-action: none;\n      }\n    "}static get Listeners(){return{pointerdown:["stopPropagation",{passive:!1}],pointermove:["stopPropagation",{passive:!1}],pointerup:"onPointerup",contextmenu:"onContextmenu",mousedown:["stopPropagation",{passive:!1}],mousemove:["stopPropagation",{passive:!1}],mouseup:["stopPropagation",{passive:!1}],touchstart:["stopPropagation",{passive:!1}],touchmove:["stopPropagation",{passive:!1}],touchend:["stopPropagation",{passive:!1}],keydown:["stopPropagation",{passive:!1}],keyup:["stopPropagation",{passive:!1}],focusin:["stopPropagation",{passive:!1}],blur:["stopPropagation",{passive:!1}],scroll:"onScroll",wheel:["onScroll",{passive:!1}]}}constructor(e={}){super(e)}init(){this.expandAsChildren=this.expandAsChildren.bind(this)}stopPropagation(e){e.stopPropagation()}onPointerup(e){e.composedPath()[0]===this&&this.collapse(),e.stopPropagation()}onContextmenu(e){e.preventDefault(),e.stopPropagation()}onScroll(e){e.composedPath()[0]===this&&this.collapse()}onResized(){this.collapse()}appendChild(e){return super.appendChild(e),e.addEventListener("expanded-changed",this.onChildExpandedChanged),this.debounce(this.expandAsChildren),e}removeChild(e){return super.removeChild(e),e.removeEventListener("expanded-changed",this.onChildExpandedChanged),this.debounce(this.expandAsChildren),e}onChildExpandedChanged(){this.debounce(this.expandAsChildren)}collapse(){for(let e=this.children.length;e--;)this.expanded=!1;this.expanded=!1}expandAsChildren(){for(let e=this.children.length;e--;)if(this.children[e].expanded)return void(this.expanded=!0);this.expanded=!1}expandedChanged(){if(!this.expanded){for(let e=this.children.length;e--;)this.children[e].expanded=!1;si&&si.focus()}}};__decorate([ReactiveProperty({value:!1,type:Boolean,reflect:!0})],ai.prototype,"expanded",void 0),ai=__decorate([Register],ai);const ci=new ai;setTimeout((()=>{document.body.appendChild(ci)}),100),window.addEventListener("focusin",(()=>{si=document.activeElement}),{capture:!1}),window.addEventListener("blur",(()=>{setTimeout((()=>{ci.expanded||document.activeElement!==document.body||(si=null)}))}),{capture:!0});let li=new WeakMap;const hi={ArrowLeft:"ArrowRight",ArrowRight:"ArrowLeft",ArrowDown:"ArrowUp",ArrowUp:"ArrowDown"};function setFocusBacktrack(e,t,i){li.set(e,{dir:hi[t],source:i})}function getRectDistance(e,t,i=1){if(e.right>t.left&&t.right>e.left&&e.bottom>t.top&&t.bottom>e.top)return 0;let r=0,o=0;const n=j.fieldHeight/2;return e.right<t.left?r=Math.max(n,t.left-e.right):t.right<e.left&&(r=Math.max(n,e.left-t.right)),e.bottom<t.top?o=Math.max(n,t.top-e.bottom):t.bottom<e.top&&(o=Math.max(n,e.top-t.bottom)),r*=i,o/=i,(r**2+o**2)**.5}function getCenterDistance(e,t,i=1){let r=e.x+e.width/2,o=e.y+e.height/2,n=r-(t.x+t.width/2),s=o-(t.y+t.height/2);return n*=i,s/=i,(n**2+s**2)**.5}function nudgeUp(e,t,i,r,o,n){t=Math.max(0,Math.min(t,window.innerWidth-r.width));let s=-1,a=-1;const c=i-r.height>=0,l=t+r.width<=window.innerWidth;return!(!c&&!o)&&(c?i-=r.height:n?(a=i,i=0):i=r.height-i,l||(n?s=window.innerWidth:t=window.innerWidth-r.width),e.style.top=i+"px",e.style.left=t+"px",e.style.width=-1!==s?s+"px":"",e.style.height=-1!==a?a+"px":"",!0)}function nudgeDown(e,t,i,r,o,n){t=Math.max(0,Math.min(t,window.innerWidth-r.width));let s=-1,a=-1;const c=i+r.height<=window.innerHeight,l=t+r.width<=window.innerWidth;return!(!c&&!o)&&(c||(n?a=window.innerHeight-i:i=window.innerHeight-r.height),l||(n?s=window.innerWidth:t=window.innerWidth-r.width),e.style.top=i+"px",e.style.left=t+"px",e.style.width=-1!==s?s+"px":"",e.style.height=-1!==a?a+"px":"",!0)}function nudgeLeft(e,t,i,r,o,n){i=Math.max(0,Math.min(i,window.innerHeight-r.height));let s=-1,a=-1;const c=t-r.width>=0,l=i+r.height<=window.innerHeight;return!(!c&&!o)&&(c?t-=r.width:n?(s=t,t=0):t=0,l||(n?a=window.innerHeight:i=window.innerHeight-r.height),e.style.top=i+"px",e.style.left=t+"px",e.style.width=-1!==s?s+"px":"",e.style.height=-1!==a?a+"px":"",!0)}function nudgeRight(e,t,i,r,o,n){i=Math.max(0,Math.min(i,window.innerHeight-r.height));let s=-1,a=-1;const c=t+r.width<=window.innerWidth,l=i+r.height<=window.innerHeight;return!(!c&&!o)&&(c||(n?s=window.innerWidth-t:t=window.innerWidth-r.width),l||(n?a=window.innerHeight:i=window.innerHeight-r.height),e.style.top=i+"px",e.style.left=t+"px",e.style.width=-1!==s?s+"px":"",e.style.height=-1!==a?a+"px":"",!0)}function nudge(e,t,i,r){const o=e.getBoundingClientRect(),n=t.getBoundingClientRect(),s=n.left,a=n.top,c=n.right,l=n.bottom,h=window.innerHeight-l,d=window.innerWidth-c,p=o.left,u=o.top;switch(i){case"none":nudgeRight(e,p,u,o,!1,r)||nudgeLeft(e,p,u,o,!1,r)||nudgeRight(e,p,u,o,d>s,r)||nudgeLeft(e,s,a,o,d<=s,r);break;case"up":nudgeUp(e,s,a,o,!1,r)||nudgeDown(e,s,l,o,!1,r)||nudgeUp(e,s,a,o,a>h,r)||nudgeDown(e,s,l,o,a<=h,r);break;case"left":nudgeLeft(e,s,a,o,!1,r)||nudgeRight(e,c,a,o,!1,r)||nudgeLeft(e,s,a,o,s>d,r)||nudgeRight(e,c,a,o,s<=d,r);break;case"down":nudgeDown(e,s,l,o,!1,r)||nudgeUp(e,s,a,o,!1,r)||nudgeDown(e,s,l,o,h>a,r)||nudgeUp(e,s,a,o,h<=a,r);break;case"right":nudgeRight(e,c,a,o,!1,r)||nudgeLeft(e,s,a,o,!1,r)||nudgeRight(e,c,a,o,d>s,r)||nudgeLeft(e,s,a,o,d<=s,r);break;default:nudgeRight(e,s,a,o,!1,r)||nudgeLeft(e,c,a,o,!1,r)||nudgeRight(e,s,a,o,d>s,r)||nudgeLeft(e,c,a,o,d<=s,r)}}
/** @License
 * Copyright 2025 Aleksandar (Aki) Rodic
 *
 * The MIT License
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */document.addEventListener("io-focus-to",(function onIoFocusTo(e){const t=e.detail.source,i=t.getBoundingClientRect(),r=e.detail.command,o=ci.contains(t);let n=t,s=Infinity,a=Infinity;const c=li.get(t);if(c&&c.dir===r){const e=c.source;let i=!0;if(e.offsetParent&&e!==t){const t=window.getComputedStyle(e);"visible"===t.visibility&&"none"!==t.display||(i=!1)}else i=!1;if(i)return e.focus(),void setFocusBacktrack(e,r,t)}const l=o?ci:document;let h=Array.from(l.querySelectorAll(`[tabIndex="${t.tabIndex||0}"]:not([disabled]):not([inert]):not([hidden])`)),d=Array.from(t.parentElement.querySelectorAll(`[tabIndex="${t.tabIndex||0}"]:not([disabled]):not([inert]):not([hidden])`));if(h=h.filter((e=>null!==e.offsetParent)),h=h.filter((e=>{const t=window.getComputedStyle(e);return"none"!==t.display&&"hidden"!==t.visibility&&"0"!==t.opacity})),"Tab"!==r)if("Home"!==r)if("End"!==r)if("PageUp"!==r)if("PageDown"!==r){if(["ArrowLeft","ArrowRight","ArrowDown","ArrowUp"].includes(r)){for(let e=h.length;e--;){const o=h[e];if(!o.offsetParent||o===t)continue;const c=window.getComputedStyle(o);if("visible"!==c.visibility||"none"===c.display)continue;const l=o.getBoundingClientRect();if("ArrowRight"===r&&l.left<i.right)continue;if("ArrowLeft"===r&&l.right>i.left)continue;if("ArrowDown"===r&&l.top<i.bottom)continue;if("ArrowUp"===r&&l.bottom>i.top)continue;const d=4,p="ArrowLeft"===r||"ArrowRight"===r?1/d:d,u=getRectDistance(i,l,p),g=getCenterDistance(i,l,p);u<s?(s=u,a=g,n=o):u===s&&g<a&&(a=g,n=o)}n!==t&&(n.focus(),setFocusBacktrack(n,r,t))}}else d[d.length-1].focus();else d[0].focus();else h[h.length-1].focus();else h[0].focus();else{const e=h.indexOf(t);-1!==e&&h[(e+1)%h.length].focus()}}));const di="MIT";export{Binding,ChangeQueue,Color,E as DARK_THEME,EventDispatcher,W as HTML_ELEMENTS,v as IoElement,H as IoGl,ci as IoOverlaySingleton,di as LICENSE,R as LIGHT_THEME,y as Node,NodeArray,Property,ProtoChain,ReactiveProperty,ReactivePropertyInstance,ReactiveProtoProperty,Register,_ as Storage,C as StorageNode,Style,A as Theme,j as ThemeSingleton,$ as a,z as abbr,Q as acronym,G as address,J as applet,applyNativeElementProps,V as area,Y as article,q as aside,X as audio,Z as b,K as base,ee as basefont,te as bdi,ie as bdo,re as big,bind,oe as blockquote,ne as body,se as br,ae as button,ce as canvas,le as caption,he as center,de as cite,pe as code,ue as col,ge as colgroup,constructElement,fe as data,ve as datalist,be as dd,debounce,ye as del,me as details,we as dfn,Pe as dialog,Ce as dir,dispatchQueue,dispose,disposeChildren,_e as div,xe as dl,Oe as dt,Re as em,Ee as embed,Se as fieldset,Le as figcaption,Ae as figure,je as font,ke as footer,Me as form,Ne as frame,Ie as frameset,k as glsl,Be as h1,He as h2,We as h3,Ue as h4,$e as h5,ze as h6,hardenListenerDefinition,Te as head,De as header,Fe as hgroup,Qe as hr,Ge as html,Je as i,Ve as iframe,Ye as img,initProperties,initReactiveProperties,qe as input,Xe as ins,b as ioElement,Ze as kbd,Ke as keygen,et as label,tt as legend,it as li,rt as link,listenerFromDefinition,ot as main,nt as map,st as mark,at as menu,ct as menuitem,lt as meta,ht as meter,dt as nav,nextQueue,pt as noframes,ut as noscript,nudge,gt as object,observeNodeProperty,observeObjectProperty,ft as ol,onPropertyMutated,vt as optgroup,bt as option,yt as output,mt as p,wt as param,Pt as picture,Ct as pre,_t as progress,e as propertyDecorators,xt as q,t as reactivePropertyDecorators,Ot as rp,Rt as rt,Et as ruby,St as s,Lt as samp,At as script,jt as section,kt as select,setProperties,setProperty,Mt as small,Nt as source,It as span,Tt as strike,Dt as strong,Ft as style,i as styleDecorators,Bt as sub,Ht as summary,Wt as sup,Ut as svg,$t as table,zt as tbody,Qt as td,Gt as template,Jt as textarea,Vt as tfoot,Yt as th,qt as thead,throttle,Xt as time,Zt as title,toVDOM,Kt as tr,ei as track,ti as tt,ii as u,ri as ul,unbind,oi as video,ni as wbr};
