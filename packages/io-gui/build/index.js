class ChangeQueue{dispatchedChange=!1;dispatching=!1;constructor(e){this.changes=[],this.node=e,Object.defineProperty(this,"dispatch",{value:this.dispatch.bind(this),enumerable:!1,writable:!1,configurable:!1})}queue(e,t,i){const o=this.changes.findIndex((t=>t.property===e));-1===o?this.changes.push({property:e,value:t,oldValue:i}):t===this.changes[o].oldValue?this.changes.splice(o,1):this.changes[o].value=t}dispatch(){if(!0!==this.dispatching){for(this.dispatching=!0;this.changes.length;){const e=this.changes[0];this.changes.splice(0,1);const t=e.property;e.value!==e.oldValue&&(this.dispatchedChange=!0,this.node[t+"Changed"]&&this.node[t+"Changed"](e),this.node.dispatchEvent(t+"-changed",e))}this.dispatchedChange&&(this.node.changed(),this.node.dispatchEvent("object-mutated",{object:this.node})),this.dispatchedChange=!1,this.dispatching=!1}}dispose(){this.changes.length=0,delete this.node,delete this.changes}}const hardenListenerDefinition=e=>Array.isArray(e)?e:[e],listenerFromDefinition=(e,t)=>{const i=t[0],o=t[1],r="string"==typeof i?e[i]:i;return o?[r,o]:[r]};class EventDispatcher{node;nodeIsEventTarget;protoListeners={};propListeners={};addedListeners={};constructor(e){this.node=e,this.nodeIsEventTarget=e instanceof EventTarget,this.setProtoListeners(e)}setProtoListeners(e){for(const t in e._protochain?.listeners){for(let i=0;i<e._protochain.listeners[t].length;i++){const o=listenerFromDefinition(e,e._protochain.listeners[t][i]);this.protoListeners[t]=[o]}if(this.nodeIsEventTarget&&this.protoListeners[t]){const e=this.protoListeners[t][0];EventTarget.prototype.addEventListener.call(this.node,t,e[0],e[1])}}}applyPropListeners(e){const t={};for(const i in e){if(!i.startsWith("@"))continue;const o=i.slice(1),r=hardenListenerDefinition(e[i]),n=listenerFromDefinition(this.node,r);t[o]=[n]}const i=this.propListeners;for(const e in i)if(!t[e]){if(this.nodeIsEventTarget){const t=i[e][0];EventTarget.prototype.removeEventListener.call(this.node,e,t[0],t[1])}delete i[e]}for(const e in t){if(this.nodeIsEventTarget){const o=t[e][0];if(i[e]){const t=i[e][0];(t!==o||o[1]&&JSON.stringify(t[1])!==JSON.stringify(o[1]))&&EventTarget.prototype.removeEventListener.call(this.node,e,t[0],t[1])}EventTarget.prototype.addEventListener.call(this.node,e,o[0],o[1])}i[e]=t[e]}}addEventListener(e,t,i){this.addedListeners[e]||(this.addedListeners[e]=[]);if(-1!==this.addedListeners[e].findIndex((e=>e[0]===t)))return;const o=i?[t,i]:[t];this.addedListeners[e].push(o),this.nodeIsEventTarget&&EventTarget.prototype.addEventListener.call(this.node,e,t,i)}removeEventListener(e,t,i){if(this.addedListeners[e]){if(t){const o=this.addedListeners[e].findIndex((e=>e[0]===t));-1!==o&&(this.addedListeners[e].splice(o,1),this.nodeIsEventTarget&&EventTarget.prototype.removeEventListener.call(this.node,e,t,i))}else{for(let t=0;t<this.addedListeners[e].length;t++)if(this.nodeIsEventTarget){const i=this.addedListeners[e][t];EventTarget.prototype.removeEventListener.call(this.node,e,i[0],i[1])}this.addedListeners[e].length=0}0===this.addedListeners[e].length&&delete this.addedListeners[e]}}dispatchEvent(e,t,i=!0,o=this.node){if(o instanceof EventTarget)EventTarget.prototype.dispatchEvent.call(o,new CustomEvent(e,{detail:t,bubbles:i,composed:!0,cancelable:!0}));else{const i={detail:t,target:o,path:[o]};if(this.protoListeners[e])for(let t=0;t<this.protoListeners[e].length;t++){this.protoListeners[e][t][0].call(o,i)}if(this.propListeners[e]){this.propListeners[e][0][0].call(o,i)}if(this.addedListeners[e])for(let t=0;t<this.addedListeners[e].length;t++){this.addedListeners[e][t][0].call(o,i)}}}dispose(){for(const e in this.protoListeners){if(this.nodeIsEventTarget)for(let t=0;t<this.protoListeners[e].length;t++){const i=this.protoListeners[e][t];EventTarget.prototype.removeEventListener.call(this.node,e,i[0],i[1])}this.protoListeners[e].length=0,delete this.protoListeners[e]}for(const e in this.propListeners){if(this.nodeIsEventTarget){const t=this.propListeners[e][0];EventTarget.prototype.removeEventListener.call(this.node,e,t[0],t[1])}this.propListeners[e].length=0,delete this.propListeners[e]}for(const e in this.addedListeners){if(this.nodeIsEventTarget)for(let t=this.addedListeners[e].length;t--;){const i=this.addedListeners[e][t];EventTarget.prototype.removeEventListener.call(this.node,e,i[0],i[1])}this.addedListeners[e].length=0,delete this.addedListeners[e]}delete this.node,delete this.protoListeners,delete this.propListeners,delete this.addedListeners}}const bothAreNaNs=function(e,t){return"number"==typeof e&&isNaN(e)&&"number"==typeof t&&isNaN(t)};class Binding{node;property="";targets=[];targetProperties=new WeakMap;constructor(e,t){this.node=e,this.property=t,this.onSourceChanged=this.onSourceChanged.bind(this),this.onTargetChanged=this.onTargetChanged.bind(this),this.node.addEventListener(`${this.property}-changed`,this.onSourceChanged)}set value(e){this.node[this.property]=e}get value(){return this.node[this.property]}toJSON(){const e={};for(let t=0;t<this.targets.length;t++){const i=this.targets[t],o=this.getTargetProperties(i);e[i.constructor.name]=o}return{node:this.node.constructor.name,property:this.property,targets:this.targets.map((e=>e.constructor.name)),targetProperties:e}}getTargetProperties(e){return this.targetProperties.has(e)||this.targetProperties.set(e,[]),this.targetProperties.get(e)}addTarget(e,t){-1===this.targets.indexOf(e)&&this.targets.push(e);const i=this.getTargetProperties(e);if(-1===i.indexOf(t)){i.push(t);const o=e._reactiveProperties.get(t);o.binding&&o.binding!==this&&o.binding.removeTarget(e,t),o.binding=this,e.addEventListener(`${t}-changed`,this.onTargetChanged),e.setProperty(t,this.value,!0)}}removeTarget(e,t){const i=this.getTargetProperties(e);if(t){const o=i.indexOf(t);i.splice(o,1);e._reactiveProperties.get(t).binding=void 0,e.removeEventListener(`${t}-changed`,this.onTargetChanged)}else{for(let t=i.length;t--;){const o=i[t];e._reactiveProperties.get(o).binding=void 0,e.removeEventListener(`${o}-changed`,this.onTargetChanged)}i.length=0}0===i.length&&this.targets.splice(this.targets.indexOf(e),1)}onTargetChanged(e){const t=this.value,i=e.detail.value;if(t!==i){if(bothAreNaNs(i,t))return;this.value=i}}onSourceChanged(e){const t=e.detail.value;for(let e=this.targets.length;e--;){const i=this.targets[e],o=this.getTargetProperties(i);for(let e=o.length;e--;){const r=o[e],n=i[r];if(n!==t){if(bothAreNaNs(t,n))continue;i[r]=t}}}}dispose(){this.node.removeEventListener(`${this.property}-changed`,this.onSourceChanged);for(let e=this.targets.length;e--;)this.removeTarget(this.targets[e]);this.targets.length=0,delete this.node,delete this.property,delete this.targets,delete this.targetProperties}}class ReactiveProtoProperty{constructor(e){if(null==e)this.value=e;else if("function"==typeof e)this.type=e;else if(e instanceof Binding)this.value=e.value,this.binding=e;else if(e&&e.constructor===Object){const t=e;Object.hasOwn(t,"value")&&(this.value=t.value),Object.hasOwn(t,"type")&&(this.type=t.type),t.binding instanceof Binding&&(this.binding=t.binding,this.value=this.binding.value),Object.hasOwn(t,"reflect")&&(this.reflect=t.reflect),Object.hasOwn(t,"init")&&(this.init=t.init)}else e&&e.constructor===Object||(this.value=e)}assign(e){Object.hasOwn(e,"value")&&(this.value=e.value),Object.hasOwn(e,"type")&&(this.type=e.type),Object.hasOwn(e,"reflect")&&(this.reflect=e.reflect),Object.hasOwn(e,"init")&&(this.init=e.init),Object.hasOwn(e,"binding")&&(this.binding=e.binding)}toJSON(){const e={value:this.value,type:this.type,reflect:this.reflect,init:this.init,binding:this.binding};return e.value&&"object"==typeof e.value&&(e.value=e.value.constructor.name),e.type&&"function"==typeof e.type&&(e.type=e.type.name),e}}function decodeInitArgument(e,t){if("this"===e)return t;if("string"!=typeof e||!e.startsWith("this."))return e;{const i=e.split(".");let o=t;for(let e=1;e<i.length;e++)o=o[i[e]];if(o)return o}}class ReactivePropertyInstance{value;type;binding;reflect=!1;init=void 0;constructor(e,t){if(this.value=t.value,this.type=t.type,this.binding=t.binding,"boolean"==typeof t.reflect&&(this.reflect=t.reflect),void 0!==t.init&&(this.init=t.init),this.binding instanceof Binding)this.value=this.binding.value;else if((void 0===this.value||null===this.value)&&null!==this.init)if(this.type===Boolean)this.value=!1;else if(this.type===String)this.value="";else if(this.type===Number)this.value=0;else if("function"==typeof this.type)if(void 0!==this.init)if(this.init instanceof Array){const t=this.init.map((t=>decodeInitArgument(t,e)));this.value=new this.type(...t)}else if(this.init instanceof Object){const t={};Object.keys(this.init).forEach((i=>{t[i]=decodeInitArgument(this.init[i],e)})),this.value=new this.type(t)}else{const t=decodeInitArgument(this.init,e);this.value=new this.type(t)}else this.value=new this.type}}const e=new WeakMap,ReactiveProperty=function(t={}){return(i,o)=>{const r=i.constructor,n=e.get(r)||{};e.set(r,n),n[o]=t}},t=new WeakMap,Property=function(e){return(i,o)=>{const r=i.constructor,n=t.get(r)||{};t.set(r,n),n[o]=e}},i=[String,Number,Boolean,Date,RegExp,Map,Set,WeakMap,WeakSet];function isNonNodeConstructor(e){if("function"!=typeof e)return!1;let t=e.prototype;for(;t;){if(i.includes(e))return!1;if("NodeMixinConstructor"===t.constructor.name)return!1;if(t===Object.prototype)return!0;t=Object.getPrototypeOf(t)}return!1}function isNonNodeObject(e){return"object"==typeof e&&null!==e&&!e._isNode}function isNodeObjectConstructor(e){if("function"!=typeof e)return!1;let t=e.prototype;for(;t;){if("NodeMixinConstructor"===t.constructor.name)return!0;t=Object.getPrototypeOf(t)}return!1}class ProtoChain{constructors=[];reactiveProperties={};listeners={};properties={};styles="";handlers=[];observedObjectProperties=[];observedNodeProperties=[];constructor(e){let i=e.prototype;for(;i&&e!==HTMLElement&&e!==Object&&e!==Array;)this.constructors.push(e),this.addHandlers(i),this.addStyles(e.Style),i=Object.getPrototypeOf(i),e=i.constructor;let o="";for(let i=this.constructors.length;i--;){e=this.constructors[i],this.addPropertiesFromDecorators(e),o=this.addStaticProperties(e.ReactiveProperties,o),this.addListeners(e.Listeners);const r=t.get(e);if(r)for(const e in r)this.properties[e]=r[e]}this.observedObjectProperties=this.getObservedObjectProperties(),this.observedNodeProperties=this.getObservedNodeProperties()}addPropertiesFromDecorators(t){const i=e.get(t);if(i)for(const e in i){const t=new ReactiveProtoProperty(i[e]);this.reactiveProperties[e]||(this.reactiveProperties[e]=t),this.reactiveProperties[e].assign(t)}}addStaticProperties(e={},t=""){const i={};for(const t in e)i[t]=new ReactiveProtoProperty(e[t]);const o=JSON.stringify(i);if(o!==t)for(const r in e)this.reactiveProperties[r]?this.reactiveProperties[r].assign(i[r]):this.reactiveProperties[r]=i[r],t=o;return t}addListeners(e){for(const t in e)if(e[t]){const i=hardenListenerDefinition(e[t]),o=this.listeners[t]=this.listeners[t]||[],r=o.findIndex((e=>e[0]===i[0]));-1!==r?o[r][1]?o[r][1]=Object.assign(o[r][1],i[1]):i[1]&&(o[r][1]=i[1]):o.push(i)}}addStyles(e){e&&-1===this.styles.indexOf(e)&&(this.styles=e+"\n"+this.styles)}addHandlers(e){const t=Object.getOwnPropertyNames(e);for(let i=0;i<t.length;i++){const o=t[i];if(/^on[A-Z]/.test(o)||/^_on[A-Z]/.test(o)||o.endsWith("Changed")||o.endsWith("Mutated")||"changed"===o){const t=Object.getOwnPropertyDescriptor(e,o);if(void 0===t||t.get||t.set)continue;"function"==typeof e[o]&&-1===this.handlers.indexOf(o)&&this.handlers.push(o)}}}getObservedObjectProperties(){const e=[];for(const t in this.reactiveProperties){const i=this.reactiveProperties[t].value,o=this.reactiveProperties[t].type;(isNonNodeObject(i)||isNonNodeConstructor(o))&&e.push(t)}return e}getObservedNodeProperties(){const e=[];for(const t in this.reactiveProperties){const i=this.reactiveProperties[t].value,o=this.reactiveProperties[t].type;(i?._isNode||isNodeObjectConstructor(o))&&e.push(t)}return e}validateProperties(){for(const e in this.reactiveProperties){const t=this.reactiveProperties[e];if(-1!==[String,Number,Boolean].indexOf(t.type))(t.type===Boolean&&void 0!==t.value&&"boolean"!=typeof t.value||t.type===Number&&void 0!==t.value&&"number"!=typeof t.value||t.type===String&&void 0!==t.value&&"string"!=typeof t.value)&&console.warn(`Property "${e}" in ProtoChain: Incorrect value type for ${t.type} property!`);else{const i=null===t.value,o=void 0===t.value;"function"!=typeof t.type||t.value instanceof t.type||i||o||console.warn(`Property "${e}" in ProtoChain: Incorrect value type for ${t.type} property!`)}}}autobindHandlers(e){for(let t=this.handlers.length;t--;)Object.defineProperty(e,this.handlers[t],{value:e[this.handlers[t]].bind(e),writable:!0,configurable:!0})}}let o=0;const r=[],n=[],s=[],a=new WeakMap,h=new WeakMap;let l=n,c=a;async function nextQueue(){return new Promise((e=>{l.push(e),c.set(e,{arg:void 0,node:void 0,frame:o+1})}))}function throttle(e,t,i,n=1){if(-1!==r.indexOf(e))-1===l.indexOf(e)&&l.push(e),c.has(e)?c.get(e).arg=t:c.set(e,{arg:t,node:i,frame:o+n});else{if(r.push(e),i?._disposed)return;try{e(t)}catch(e){console.error(e)}}}function debounce(e,t,i,r=1){if(-1===l.indexOf(e)&&l.push(e),c.has(e)){const n=c.get(e);n.arg=t,n.node=i,n.frame=o+r}else c.set(e,{arg:t,node:i,frame:o+r})}requestAnimationFrame((function executeQueue(){r.length=0,o++;const e=l,t=c;l=l===n?s:n,c=c===a?h:a;for(let i=0;i<e.length;i++){const r=e[i],n=t.get(r);if(t.delete(r),void 0===n&&console.warn(r),n.frame>o)-1===l.indexOf(r)&&l.push(r),c.set(r,n);else if(!n.node?._disposed)try{void 0!==n.arg?r(n.arg):r()}catch(e){console.error(e)}}e.length=0,requestAnimationFrame(executeQueue)}));const d=new WeakMap,applyNativeElementProps=function(e,t){const i=e;let o=d.get(e)||{};d.set(e,o);for(const r in t){const n=r,s=t[n];if(Object.hasOwn(o,n)||(o[n]=i[n]),"style"===n)for(const t in s)e.style.setProperty(t,s[t]);else"class"===n?e.className=s:i[n]=void 0===s?o[n]:s;void 0===s&&e.removeAttribute(n),s===o[n]&&e.removeAttribute(n)}for(const r in o){const n=r;Object.hasOwn(t,n)||(i[n]=o[n],e.removeAttribute(n))}i._eventDispatcher||Object.defineProperty(e,"_eventDispatcher",{enumerable:!1,configurable:!0,value:new EventDispatcher(e)}),i._eventDispatcher.applyPropListeners(t)},constructElement=function(e){const t=e.props||{},i=window.customElements?window.customElements.get(e.tag):null;if(i&&i._isIoElement)return new i(t);const o=document.createElement(e.tag);return applyNativeElementProps(o,t),o},disposeChildren=function(e){requestAnimationFrame((()=>{const t=[...e.querySelectorAll("*"),e];for(let e=t.length;e--;)"function"==typeof t[e].dispose?t[e].dispose():t[e]._eventDispatcher&&(t[e]._eventDispatcher.dispose(),delete t[e]._eventDispatcher)}))},vDOMAttributes=function(e){const t={};for(let i=0;i<e.attributes.length;i++){const o=e.attributes[i].name,r=e.getAttribute(o);null!==r&&(t[o]=r)}return t},toVDOMChildren=function(e){const t=[];for(let i=0;i<e.length;i++)t.push(toVDOM(e[i]));return t},toVDOM=function(e){return{tag:e.localName,props:vDOMAttributes(e),children:e.children.length>0?toVDOMChildren(e.children):e.textContent}},Autobind=function(e,t,i){const o=i.value;return{configurable:!0,enumerable:!1,get(){if(this===e.prototype||Object.prototype.hasOwnProperty.call(this,t))return o;const i=o.bind(this);return Object.defineProperty(this,t,{configurable:!0,writable:!0,enumerable:!1,value:i}),i},set(e){Object.defineProperty(this,t,{configurable:!0,writable:!0,enumerable:!0,value:e})}}};function Register(e){e.prototype.Register(e)}var __decorate$5=function(e,t,i,o){var r,n=arguments.length,s=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(n<3?r(s):n>3?r(t,i,s):r(t,i))||s);return n>3&&s&&Object.defineProperty(t,i,s),s};function NodeMixin(e){return class NodeMixinConstructor extends e{static get ReactiveProperties(){return{reactivity:{value:"immediate",type:String}}}constructor(e={},...t){super(...t),this._isIoElement&&Object.defineProperty(this,"$",{value:{},writable:!0,enumerable:!1}),this._protochain.autobindHandlers(this),Object.defineProperty(this,"_changeQueue",{enumerable:!1,configurable:!0,value:new ChangeQueue(this)}),Object.defineProperty(this,"_reactiveProperties",{enumerable:!1,configurable:!0,value:new Map}),Object.defineProperty(this,"_bindings",{enumerable:!1,configurable:!0,value:new Map}),Object.defineProperty(this,"_eventDispatcher",{enumerable:!1,configurable:!0,value:new EventDispatcher(this)});for(const e in this._protochain.reactiveProperties)Object.defineProperty(this,e,{get:function(){return this._reactiveProperties.get(e).value},set:function(t){this.setProperty(e,t)},configurable:!0,enumerable:!0});for(const e in this._protochain.reactiveProperties){const t=new ReactivePropertyInstance(this,this._protochain.reactiveProperties[e]);if(this._reactiveProperties.set(e,t),t.binding&&t.binding.addTarget(this,e),t.value?._isNode){let i=!1;this._reactiveProperties.forEach(((o,r)=>{o.value===t.value&&r!==e&&(i=!0)})),i||t.value.addEventListener("object-mutated",this.onPropertyMutated)}}for(const e in this._protochain.properties){let t=this._protochain.properties[e];"function"==typeof t?t=t():t instanceof Array?t=t.slice():"object"==typeof t&&(t=Object.assign({},t)),this[e]=t}this.applyProperties(e,!0),this._protochain.observedObjectProperties.length&&window.addEventListener("object-mutated",this.onPropertyMutated),this.init(),this.dispatchQueue()}applyProperties(e,t=!1){for(const t in e)this._reactiveProperties.has(t)||t.startsWith("@"),this.setProperty(t,e[t],!0);this._eventDispatcher.applyPropListeners(e),t||this.dispatchQueue()}setProperties(e){for(const t in e)this._reactiveProperties.has(t)&&this.setProperty(t,e[t],!0);this.dispatchQueue()}setProperty(e,t,i=!1){const o=this._reactiveProperties.get(e),r=o.value;if(t!==r){const n=t instanceof Binding?t:null;if(n){const t=o.binding;return n!==t?(t&&t.removeTarget(this,e),void n.addTarget(this,e)):void 0}if(o.value=t,t!==r){let i=!1,o=!1;this._reactiveProperties.forEach(((n,s)=>{n.value===t&&s!==e&&(i=!0),n.value===r&&s!==e&&(o=!0)})),t?._isNode&&(i||t.addEventListener("object-mutated",this.onPropertyMutated)),r?._isNode&&(o||r._disposed||r.removeEventListener("object-mutated",this.onPropertyMutated))}r!==t&&(this.queue(e,t,r),this.dispatchQueue(i))}}inputValue(e){if(this.value!==e||"object"==typeof this.value){const t=this.value;this.setProperty("value",e),this.dispatchEvent("value-input",{value:e,oldValue:t},!1)}}changed(){}init(){}queue(e,t,i){"none"!==this.reactivity&&this._changeQueue.queue(e,t,i)}dispatchQueue(e=!1){"debounced"===this.reactivity||e||this._changeQueue.dispatching?this.debounce(this._changeQueue.dispatch):"throttled"===this.reactivity?this.throttle(this._changeQueue.dispatch):"immediate"===this.reactivity&&this._changeQueue.dispatch()}throttle(e,t,i=1){throttle(e,t,this,i)}debounce(e,t,i=1){debounce(e,t,this,i)}onPropertyMutated(e){const t=e.detail.object,i=[...new Set([...this._protochain.observedObjectProperties,...this._protochain.observedNodeProperties])];for(let e=0;e<i.length;e++){const o=i[e];if(this._reactiveProperties.get(o).value===t)return"function"==typeof this[o+"Mutated"]&&this.throttle(this[o+"Mutated"]),!0}}bind(e){return this._bindings.has(e)||this._bindings.set(e,new Binding(this,e)),this._bindings.get(e)}unbind(e){const t=this._bindings.get(e);t&&(t.dispose(),this._bindings.delete(e));const i=this._reactiveProperties.get(e);i?.binding?.removeTarget(this,e)}addEventListener(e,t,i){this._eventDispatcher.addEventListener(e,t,i)}removeEventListener(e,t,i){this._eventDispatcher.removeEventListener(e,t,i)}dispatchEvent(e,t=void 0,i=!1,o){this._eventDispatcher.dispatchEvent(e,t,i,o)}dispose(){if(this._disposed)return;this._bindings.forEach(((e,t)=>{e.dispose(),this._bindings.delete(t)})),delete this._bindings,this._protochain.observedObjectProperties.length&&window.removeEventListener("object-mutated",this.onPropertyMutated),delete this._protochain,this._changeQueue.dispose(),delete this._changeQueue;let e=[];this._reactiveProperties.forEach(((t,i)=>{t.binding?.removeTarget(this,i),!t.value?._isNode||e.includes(t.value)||t.value._disposed||(t.value.removeEventListener("object-mutated",this.onPropertyMutated),e.push(t.value))})),this._eventDispatcher.dispose(),delete this._eventDispatcher,delete this._reactiveProperties,Object.defineProperty(this,"_disposed",{value:!0})}Register(e){Object.defineProperty(e,"_isNode",{enumerable:!1,value:!0}),Object.defineProperty(e.prototype,"_isNode",{enumerable:!1,value:!0}),Object.defineProperty(e.prototype,"_protochain",{value:new ProtoChain(e)})}}}let p=class Node extends(NodeMixin(Object)){};p=__decorate$5([Register],p);var __decorate$4=function(e,t,i,o){var r,n=arguments.length,s=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(n<3?r(s):n>3?r(t,i,s):r(t,i))||s);return n>3&&s&&Object.defineProperty(t,i,s),s};const u=new class EmulatedLocalStorage{constructor(){Object.defineProperty(this,"store",{value:new Map}),Object.defineProperty(this,"warned",{value:!1,writable:!0})}get permitted(){try{return"true"===self.localStorage.getItem("Storage:user-permitted")}catch(e){console.warn("Storage: Cannot access localStorage. Check browser privacy settings!")}return!1}set permitted(e){try{e?(console.info("Storage: localStorage permission granted."),this.store.set("Storage:user-permitted",String(e)),this.store.forEach(((e,t)=>{self.localStorage.setItem(t,String(e)),this.store.delete(t)}))):(console.info("Storage: localStorage permission revoked."),self.localStorage.setItem("Storage:user-permitted",String(e)),new Map(Object.entries(self.localStorage)).forEach(((e,t)=>{this.store.set(t,e)})),self.localStorage.clear())}catch(e){console.warn("Storage: Cannot access localStorage. Check browser privacy settings!")}}setItem(e,t){const i="object"==typeof t?JSON.stringify(t):String(t);"Storage:user-permitted"!==e?this.permitted?self.localStorage.setItem(e,i):(this.store.set(e,i),this.warned||this.permitted||(console.warn("Storage: localStorage permission not set."),this.warned=!0)):this.permitted="true"===t}getItem(e){return this.permitted?self.localStorage.getItem(e):this.store.has(e)?this.store.get(e):null}removeItem(e){if(this.permitted)return self.localStorage.removeItem(e);this.store.delete(e)}clear(){if(this.permitted)return self.localStorage.clear();this.store.clear()}},g={local:new Map,hash:new Map,none:new Map};let f={};function genObjectStorageID(e){const t=JSON.stringify(e);let i=0;for(let e=0;e<t.length;e++)i=Math.imul(31,i)+t.charCodeAt(e)|0;return"io-local-state-"+String(i)}let v=class StorageNode extends p{constructor(e){const t=e.storage||"none";if(g[t].has(e.key))return g[t].get(e.key);{const i=e.default||e.value;switch(e.storage){case"hash":{const t=function getValueFromHash(e){if(f=parseHash(self.location.hash),f[e])try{return JSON.parse(f[e])}catch(t){return f[e]}}(e.key);if(void 0!==t)try{e.value=JSON.parse(t)}catch(i){e.value=t}break}case"local":{const t=u.getItem("Storage:"+e.key);t&&(e.value=JSON.parse(t));break}}return void 0===e.value&&(e.value=i),super(Object.assign({default:i},e)),"__proto__"!==e.key&&g[t].set(e.key,this),this.binding=this.bind("value"),this.binding.dispose=()=>{this._clearStorage()},this}}dispose(){this._clearStorage(),super.dispose()}_clearStorage(){switch(this.storage){case"hash":this.removeValueToHash();break;case"local":u.removeItem("Storage:"+this.key)}const e=this.storage;g[e].delete(this.key)}valueChanged(){switch(this.storage){case"hash":this.saveValueToHash();break;case"local":null===this.value||void 0===this.value||this.value===this.default?u.removeItem("Storage:"+this.key):u.setItem("Storage:"+this.key,JSON.stringify(this.value))}}removeValueToHash(){f=parseHash(self.location.hash),delete f[this.key];let e="";for(const t in f)e+=t+"="+f[t]+"&";e?(e=e.slice(0,-1),self.location.hash=e):history.replaceState("",document.title,self.location.pathname+self.location.search)}saveValueToHash(){f=parseHash(self.location.hash);const e=this.value;void 0!==e&&""!==e&&e!==this.default?"string"==typeof e?isNaN(e)?f[this.key]=e:f[this.key]='"'+e+'"':f[this.key]=JSON.stringify(e):delete f[this.key];let t="";for(const e in f)t+=e+"="+f[e]+"&";t?(t=t.slice(0,-1),self.location.hash=t):history.replaceState("",document.title,self.location.pathname+self.location.search)}};__decorate$4([ReactiveProperty({value:"",type:String})],v.prototype,"key",void 0),__decorate$4([ReactiveProperty({value:void 0})],v.prototype,"value",void 0),__decorate$4([ReactiveProperty({value:void 0})],v.prototype,"default",void 0),__decorate$4([ReactiveProperty({value:"none",type:String})],v.prototype,"storage",void 0),v=__decorate$4([Register],v);const b=Object.assign((e=>new v(e).binding),{permit(){u.permitted=!0},unpermit(){u.permitted=!1}});function parseHash(e){return e.substring(1).split("&").reduce((function(e,t){const i=t.split("=");return i[0]&&i[1]&&(e[i[0]]=i[1].replace(/%22/g,'"').replace(/%20/g," ")),e}),{})}function updateAllFromHash(){f=parseHash(self.location.hash);for(const e in f)if(g.hash.has(e)){const t=g.hash.get(e);try{t.value=JSON.parse(f[e])}catch(i){t.value=f[e]}}}self.addEventListener("hashchange",updateAllFromHash,!1),updateAllFromHash();var __decorate$3=function(e,t,i,o){var r,n=arguments.length,s=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(n<3?r(s):n>3?r(t,i,s):r(t,i))||s);return n>3&&s&&Object.defineProperty(t,i,s),s};const y="v0.10",m=document.createElement("style");m.setAttribute("id","io-theme-variables-"+y),document.head.appendChild(m);class Color{r;g;b;a;constructor(e,t,i,o){this.r=e,this.g=t,this.b=i,this.a=o}toCss(){const e=Math.floor(255*this.r),t=Math.floor(255*this.g),i=Math.floor(255*this.b);return void 0!==this.a&&1!==this.a?`rgba(${e}, ${t}, ${i}, ${this.a})`:`rgb(${e}, ${t}, ${i})`}}const P={spacing:2,spacing2:0,spacing3:0,spacing5:0,spacing8:0,lineHeight:20,fontSize:14,fieldHeight:0,fieldHeight2:0,fieldHeight3:0,fieldHeight4:0,fieldHeight5:0,fieldHeight6:0,fieldHeight7:0,fieldHeight8:0,fieldHeight9:0,fieldHeight10:0,fieldHeight11:0,fieldHeight12:0,borderRadius:2,borderRadius2:0,borderWidth:1,borderColor:new Color(0,0,0,.2),borderColorLight:new Color(1,1,1,.8),borderColorDark:new Color(0,0,0,.4),bgColor:new Color(.85,.85,.85,1),bgColorStrong:new Color(.9,.9,.9,1),bgColorDimmed:new Color(.8,.8,.8,1),bgColorRed:new Color(1,.5,.3,1),bgColorGreen:new Color(.2,.9,.3,1),bgColorBlue:new Color(.2,.5,.9,1),bgColorInput:new Color(.95,.96,.95,1),color:new Color(.25,.25,.2,1),colorStrong:new Color(0,0,0,1),colorDimmed:new Color(.6,.6,.6,1),colorRed:new Color(1,.2,0,1),colorGreen:new Color(0,.6,.1,1),colorBlue:new Color(.2,.3,1,1),colorWhite:new Color(1,1,1,1),colorInput:new Color(0,.05,.02,1),gradientColorStart:new Color(.9,.9,.9,1),gradientColorEnd:new Color(.75,.75,.75,1),shadowColor:new Color(0,0,0,.2)},w={spacing:2,spacing2:0,spacing3:0,spacing5:0,spacing8:0,lineHeight:20,fontSize:14,fieldHeight:0,fieldHeight2:0,fieldHeight3:0,fieldHeight4:0,fieldHeight5:0,fieldHeight6:0,fieldHeight7:0,fieldHeight8:0,fieldHeight9:0,fieldHeight10:0,fieldHeight11:0,fieldHeight12:0,borderRadius:2,borderRadius2:0,borderWidth:1,borderColor:new Color(1,1,1,.5),borderColorLight:new Color(1,1,1,.3),borderColorDark:new Color(0,0,0,1),bgColor:new Color(.2,.2,.2,1),bgColorStrong:new Color(.15,.15,.15,1),bgColorDimmed:new Color(.25,.25,.25,1),bgColorRed:new Color(.7,.2,.1,1),bgColorGreen:new Color(.1,.5,.2,1),bgColorBlue:new Color(.4,.3,.65,1),bgColorInput:new Color(.02,.02,.02,1),color:new Color(.6,.6,.6,1),colorStrong:new Color(.86,.86,.86,1),colorDimmed:new Color(.3,.3,.3,1),colorRed:new Color(1,.4,.4,1),colorGreen:new Color(.4,.95,.3,1),colorBlue:new Color(.6,.9,1,1),colorWhite:new Color(1,1,1,1),colorInput:new Color(.65,.7,.68,1),gradientColorStart:new Color(.45,.45,.45,1),gradientColorEnd:new Color(.2,.2,.2,1),shadowColor:new Color(0,0,0,.2)},x=b({value:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",storage:"local",key:"theme-"+y}),C=b({value:{},storage:"local",key:"io-themes-"+y});let _=class Theme extends p{static get ReactiveProperties(){const e={};for(const t in P){const i=P[t];e[t]=i instanceof Object?{value:i,type:Color}:i}return e}init(){this.registerTheme("light",P),this.registerTheme("dark",w),this.themeIDChanged()}registerTheme(e,t){this.themeDefaults[e]=t,this.setProperty("themeDefaults",JSON.parse(JSON.stringify(this.themeDefaults)),!0),C.value[e]=C.value[e]||t,C.value=JSON.parse(JSON.stringify(C.value))}reset(){C.value=JSON.parse(JSON.stringify(this.themeDefaults)),this.themeIDChanged()}themeIDChanged(){const e=C.value[this.themeID];for(const t in e)e[t]instanceof Object&&'["r","g","b","a"]'===JSON.stringify(Object.keys(e[t]))&&(e[t]=new Color(e[t].r,e[t].g,e[t].b,e[t].a));this.setProperties(e)}onPropertyMutated(e){if(super.onPropertyMutated(e))return this.changed(),this.dispatchEvent("object-mutated",{object:this}),!0}fontSizeChanged(){this.lineHeight=Math.max(this.fontSize,this.lineHeight)}lineHeightChanged(){this.fontSize=Math.min(this.lineHeight,this.fontSize)}changed(){this.fieldHeight=this.lineHeight+2*(this.spacing+this.borderWidth),this.fieldHeight2=2*this.fieldHeight,this.fieldHeight3=3*this.fieldHeight,this.fieldHeight4=4*this.fieldHeight,this.fieldHeight5=5*this.fieldHeight,this.fieldHeight6=6*this.fieldHeight,this.fieldHeight7=7*this.fieldHeight,this.fieldHeight8=8*this.fieldHeight,this.fieldHeight9=9*this.fieldHeight,this.fieldHeight10=10*this.fieldHeight,this.fieldHeight11=11*this.fieldHeight,this.fieldHeight12=12*this.fieldHeight,this.spacing2=2*this.spacing,this.spacing3=3*this.spacing,this.spacing5=5*this.spacing,this.spacing8=8*this.spacing,this.borderRadius2=this.borderRadius+this.spacing;const e=Array.from(Object.keys(P)).reduce(((e,t)=>(C.value[this.themeID][t]=this[t],"object"==typeof this[t]?`${e}--io_${t}: ${this[t].toCss()};\n    `:`${e}--io_${t}: ${this[t]}px;\n    `)),"");m.innerHTML=`body {\n  ${e}\n}\n\n  body {\n    --io_border: var(--io_borderWidth) solid var(--io_borderColor);\n    --io_borderColorInset: var(--io_borderColorDark) var(--io_borderColorLight) var(--io_borderColorLight) var(--io_borderColorDark);\n    --io_borderColorOutset: var(--io_borderColorLight) var(--io_borderColorDark) var(--io_borderColorDark) var(--io_borderColorLight);\n    --io_gradientOutset: linear-gradient(180deg, var(--io_gradientColorStart), var(--io_gradientColorEnd) 100%);\n    --io_gradientInset: linear-gradient(0deg, var(--io_gradientColorStart), var(--io_gradientColorEnd) 150%);\n    --io_shadow: 2px 2px 6px var(--io_shadowColor), 1px 1px 1px var(--io_shadowColor);\n    --io_shadowInset: 0.75px 0.75px 2px inset var(--io_shadowColor);\n    --io_shadowOutset: 1px 1px 2px var(--io_shadowColor);\n  }\n`,this.debounce(this.onSaveTheme,void 0,60)}onSaveTheme(){C.value=JSON.parse(JSON.stringify(C.value))}};__decorate$3([ReactiveProperty({type:Object})],_.prototype,"themeDefaults",void 0),__decorate$3([ReactiveProperty({type:String,binding:x})],_.prototype,"themeID",void 0),__decorate$3([ReactiveProperty("debounced")],_.prototype,"reactivity",void 0),_=__decorate$3([Register],_);const O=new _;var __decorate$2=function(e,t,i,o){var r,n=arguments.length,s=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(n<3?r(s):n>3?r(t,i,s):r(t,i))||s);return n>3&&s&&Object.defineProperty(t,i,s),s};const E={},S=new RegExp("(( --[\\s\\S]*?): {([\\s\\S]*?)})","gi"),R=new RegExp("(@apply\\s.*?;)","gi"),L=new ResizeObserver((e=>{for(const t of e)t.target.onResized()}));let k=class IoElement extends(NodeMixin(HTMLElement)){static vConstructor;static get Style(){return"\n      :host {\n        display: block;\n        box-sizing: border-box;\n        -webkit-touch-callout: none;\n      }\n    "}constructor(e){super(e);for(const e in this._protochain.reactiveProperties){const t=this._reactiveProperties.get(e),i=t.value;null!=i&&t.reflect&&this.setAttribute(e,i)}}connectedCallback(){"function"==typeof this.onResized&&L.observe(this)}disconnectedCallback(){"function"==typeof this.onResized&&L.unobserve(this)}setProperty(e,t,i=!1){super.setProperty(e,t,i);this._reactiveProperties.get(e).reflect&&this.setAttribute(e.toLowerCase(),t)}template(e,t,i){t=t||this;const o=e.filter((e=>null!==e));this.traverse(o,t,i)}traverse(e,t,i){const o=t.children;for(;o.length>e.length;){const e=o[o.length-1];t.removeChild(e),i||disposeChildren(e)}for(let r=0;r<o.length;r++){const n=o[r];if(n.localName!==e[r].tag||i){const o=n,s=constructElement(e[r]);t.insertBefore(s,o),t.removeChild(o),i||disposeChildren(o)}else n.removeAttribute("className"),e[r].props&&(n._isIoElement?n.applyProperties(e[r].props):applyNativeElementProps(n,e[r].props))}if(o.length<e.length){const i=document.createDocumentFragment();for(let t=o.length;t<e.length;t++){const o=constructElement(e[t]);i.appendChild(o)}t.appendChild(i)}for(let t=0;t<e.length;t++){const r=o[t];if(e[t].props?.id&&(this.$[e[t].props.id]=r),e[t].children)if("string"==typeof e[t].children)this._flattenTextNode(r),r._textNode.nodeValue=String(e[t].children);else if(e[t].children instanceof Array&&e[t].children.length>0){const o=e[t].children.filter((e=>null!==e));this.traverse(o,r,i)}}}_flattenTextNode(e){if(0===e.childNodes.length&&e.appendChild(document.createTextNode("")),"#text"!==e.childNodes[0].nodeName&&(e.innerHTML="",e.appendChild(document.createTextNode(""))),e._textNode=e.childNodes[0],e.childNodes.length>1){const t=e.textContent;for(let t=e.childNodes.length;t--;)0!==t&&e.removeChild(e.childNodes[t]);e._textNode.nodeValue=t}}applyProperties(e,t=!1){for(const t in e)if(this._reactiveProperties.has(t))this.setProperty(t,e[t],!0);else if("class"===t)this.className=e[t];else if("style"===t)for(const i in e[t])this.style[i]=e[t][i];else t.startsWith("@")||(this[t]=e[t],void 0===e[t]&&this.hasAttribute(t)&&this.removeAttribute(t));this._eventDispatcher.applyPropListeners(e),t||this.dispatchQueue()}setAttribute(e,t){!0===t?HTMLElement.prototype.setAttribute.call(this,e,""):!1===t||""===t?this.removeAttribute(e):"string"!=typeof t&&"number"!=typeof t||this.getAttribute(e)!==String(t)&&HTMLElement.prototype.setAttribute.call(this,e,String(t))}toVDOM(){return toVDOM(this)}Register(e){super.Register(e);const t=e.name.replace(/([a-z])([A-Z,0-9])/g,"$1-$2").toLowerCase();Object.defineProperty(e,"localName",{value:t}),Object.defineProperty(e.prototype,"localName",{value:t}),Object.defineProperty(e,"_isIoElement",{enumerable:!1,value:!0}),Object.defineProperty(e.prototype,"_isIoElement",{enumerable:!1,value:!0}),Object.defineProperty(window,e.name,{value:e}),window.customElements.define(t,e);let i="";const o=e.prototype._protochain.styles.match(S);if(o)for(let e=0;e<o.length;e++){const t=o[e].split(": {"),r=t[0].replace(" --","--"),n=t[1].replace(/}/g,"").trim().replace(/^ +/gm,"");E[r]=n,i+=o[e].replace(" --",".").replace(": {"," {")}let r=e.prototype._protochain.styles.replace(S,"");const n=r.match(R);if(n)for(let e=0;e<n.length;e++){const t=n[e].split("@apply ")[1].replace(";","");E[t]?r=r.replace(n[e],E[t]):console.warn("IoElement: cound not find mixin:",t)}r=i+r.replace(new RegExp(":host","g"),t);const s=document.createElement("style");s.innerHTML=r,s.setAttribute("id","io-style-"+t.replace("io-","")),document.head.appendChild(s),Object.defineProperty(e,"vConstructor",{value:function(e,i){const o={tag:t};return void 0!==e&&("string"==typeof e||e instanceof Array?o.children=e:"object"==typeof e&&(o.props=e),void 0!==i&&("string"==typeof i||i instanceof Array)&&(o.children=i)),o}})}};__decorate$2([Property(Object)],k.prototype,"$",void 0),k=__decorate$2([Register],k);const j=k.vConstructor;let A=new WeakMap;const N={left:"right",right:"left",down:"up",up:"down"};function setBacktrack(e,t,i){A.set(e,{dir:N[t],source:i})}function focusTo(e,t){const i=e.getBoundingClientRect();let o=e,r=Infinity;const n=A.get(e);if(n&&n.dir===t){const i=n.source;let o=!0;if(i.offsetParent&&i!==e){const e=window.getComputedStyle(i);"visible"===e.visibility&&"none"!==e.display||(o=!1)}else o=!1;if(o)return i.focus(),void setBacktrack(i,t,e)}const s=Array.from(document.querySelectorAll(`[tabIndex="${e.tabIndex||0}"]:not([disabled]):not([inert]):not([hidden])`));for(let n=s.length;n--;){if(!s[n].offsetParent||s[n]===e)continue;const a=window.getComputedStyle(s[n]);if("visible"!==a.visibility||"none"===a.display)continue;const h=s[n].getBoundingClientRect();switch(t){case"right":{const e={x:i.right,y:i.y+i.height/2},t={x:h.left,y:h.y+h.height/2},a={x:t.x-e.x,y:t.y-e.y},l=Math.sqrt(a.x*a.x+a.y*a.y);a.x>=0&&Math.abs(a.y)<=Math.abs(a.x)&&l<r&&(o=s[n],r=l);break}case"left":{const e={x:i.left,y:i.y+i.height/2},t={x:h.right,y:h.y+h.height/2},a={x:t.x-e.x,y:t.y-e.y},l=Math.sqrt(a.x*a.x+a.y*a.y);a.x<=0&&Math.abs(a.y)<=Math.abs(a.x)&&l<r&&(o=s[n],r=l);break}case"down":{const e={x:i.x+i.width/2,y:i.bottom},t={x:h.x+h.width/2,y:h.top},a={x:t.x-e.x,y:t.y-e.y},l=Math.sqrt(a.x*a.x+a.y*a.y);a.y>=0&&l<r&&(o=s[n],r=l);break}case"up":{const e={x:i.x+i.width/2,y:i.top},t={x:h.x+h.width/2,y:h.bottom},a={x:t.x-e.x,y:t.y-e.y},l=Math.sqrt(a.x*a.x+a.y*a.y);a.y<=0&&l<r&&(o=s[n],r=l);break}}}o!==e&&(o.focus(),setBacktrack(o,t,e))}const H={saturate:"\n  #ifndef saturate\n    #define saturate(v) clamp(v, 0., 1.)\n  #endif\n",translate:"\n  vec2 translate(vec2 samplePosition, vec2 xy){\n    return samplePosition - vec2(xy.x, xy.y);\n  }\n  vec2 translate(vec2 samplePosition, float x, float y){\n    return samplePosition - vec2(x, y);\n  }\n",circle:"\n  float circle(vec2 samplePosition, float radius){\n    return saturate((length(samplePosition) - radius) * uPxRatio);\n  }\n",rectangle:"\n  float rectangle(vec2 samplePosition, vec2 halfSize){\n    vec2 edgeDistance = abs(samplePosition) - halfSize;\n    float outside = length(max(edgeDistance, 0.));\n    float inside = min(max(edgeDistance.x, edgeDistance.y), 0.);\n    return 1.0 - saturate((outside + inside) * 1000000.0);\n  }\n",paintDerivativeGrid2D:"\n  float paintDerivativeGrid2D(vec2 samplePosition, vec2 gridWidth, float lineWidth) {\n    vec2 sp = samplePosition / gridWidth;\n    float fractx = abs(fract(sp.x - 0.5) - 0.5) * 2.0;\n    float fracty = abs(fract(sp.y - 0.5) - 0.5) * 2.0;\n\n    float sx = ((sp.x - 0.5) - 0.5) * 2.0;\n    float sy = ((sp.y - 0.5) - 0.5) * 2.0;\n    \n    float absx = abs(max(dFdx(sx), dFdy(sx)));\n    float absy = abs(max(dFdy(sy), dFdx(sy)));\n\n    float fadeX = 1.0 - dFdx(sx);\n    float fadeY = 1.0 - dFdy(sx);\n    if (fadeX <= 0.0 || fadeY <= 0.0) return 1.0;\n\n    float linex = fractx / absx - (0.5 * max(uPxRatio, 2.0) * lineWidth - 1.0) - 0.5;\n    float liney = fracty / absy - (0.5 * max(uPxRatio, 2.0) * lineWidth - 1.0) - 0.5;\n\n    return (1.0 - saturate(min(linex, liney)));\n  }\n",lineVertical:"\n  float lineVertical(vec2 samplePosition, float lineWidth) {\n    return (abs(samplePosition.x) * 2.0 > lineWidth) ? 0.0 : 1.0;\n  }\n",lineHorizontal:"\n  float lineHorizontal(vec2 samplePosition, float lineWidth) {\n    return (abs(samplePosition.y) * 2.0 > lineWidth) ? 0.0 : 1.0;\n  }\n",lineCross2d:"\n  float lineCross2d(vec2 samplePosition, float lineWidth) {\n    return (min(abs(samplePosition.x), abs(samplePosition.y)) * 2.0 > lineWidth) ? 0.0 : 1.0;\n  }\n",checker:"\n  float checker(vec2 samplePosition, float size) {\n    vec2 checkerPos = floor(samplePosition / size);\n    float checkerMask = mod(checkerPos.x + mod(checkerPos.y, 2.0), 2.0);\n    return checkerMask;\n  }\n",checkerX:"\n  float checkerX(vec2 samplePosition, float size) {\n    vec2 checkerPos = floor(samplePosition / size);\n    float checkerMask = mod(checkerPos.x, 2.0);\n    return checkerMask;\n  }\n",checkerY:"\n  float checkerY(vec2 samplePosition, float size) {\n    vec2 checkerPos = floor(samplePosition / size);\n    float checkerMask = mod(checkerPos.y, 2.0);\n    return checkerMask;\n  }\n",compose:"\n  vec3 compose(vec3 dst, vec4 src) {\n    return mix(dst, src.rgb, src.a);\n  }\n",paintHorizontalLine:"\n  vec3 paintHorizontalLine(vec3 dstCol, vec2 p, vec3 color) {\n    float lineShape = lineHorizontal(p, io_borderWidth);\n    return compose(dstCol, vec4(color, lineShape));\n  }\n",hue2rgb:"\n  vec3 hue2rgb(float hue) {\n    hue = fract(hue);\n    float R = abs(hue * 6. - 3.) - 1.;\n    float G = 2. - abs(hue * 6. - 2.);\n    float B = 2. - abs(hue * 6. - 4.);\n    return saturate(vec3(R,G,B));\n  }\n",hsv2rgb:"\n  vec3 hsv2rgb(vec3 hsv) {\n    vec3 rgb = hue2rgb(hsv.r);\n    return ((rgb - 1.) * hsv.g + 1.) * hsv.b;\n  }\n",hsl2rgb:"\n  vec3 hsl2rgb(vec3 hsl) {\n    vec3 rgb = hue2rgb(hsl.x);\n    float C = (1. - abs(2. * hsl.z - 1.)) * hsl.y;\n    return (rgb - 0.5) * C + hsl.z;\n  }\n"};var __decorate$1=function(e,t,i,o){var r,n=arguments.length,s=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(n<3?r(s):n>3?r(t,i,s):r(t,i))||s);return n>3&&s&&Object.defineProperty(t,i,s),s};const T=document.createElement("canvas"),M=T.getContext("webgl",{antialias:!1,premultipliedAlpha:!1});M.getExtension("OES_standard_derivatives"),M.enable(M.BLEND),M.blendFunc(M.SRC_ALPHA,M.ONE_MINUS_SRC_ALPHA),M.disable(M.DEPTH_TEST);const I=M.createBuffer();M.bindBuffer(M.ARRAY_BUFFER,I),M.bufferData(M.ARRAY_BUFFER,new Float32Array([-1,1,0,-1,-1,0,1,-1,0,1,1,0]),M.STATIC_DRAW),M.bindBuffer(M.ARRAY_BUFFER,null);const D=M.createBuffer();M.bindBuffer(M.ARRAY_BUFFER,D),M.bufferData(M.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),M.STATIC_DRAW),M.bindBuffer(M.ARRAY_BUFFER,null);const B=M.createBuffer();M.bindBuffer(M.ELEMENT_ARRAY_BUFFER,B),M.bufferData(M.ELEMENT_ARRAY_BUFFER,new Uint16Array([3,2,1,3,1,0]),M.STATIC_DRAW),M.bindBuffer(M.ELEMENT_ARRAY_BUFFER,null),M.bindBuffer(M.ELEMENT_ARRAY_BUFFER,B);const F=new WeakMap;let W,U=class IoGl extends k{static vConstructor;static get Style(){return"\n      :host {\n        position: relative;\n        overflow: hidden !important;\n        user-select: none;\n      }\n      :host > canvas {\n        position: absolute;\n        pointer-events: none;\n        image-rendering: pixelated;\n      }\n      :host > span {\n        position: absolute;\n        text-shadow: 0 0 3px var(--io_bgColorStrong), 0 0 3px var(--io_bgColorStrong), 0 0 3px var(--io_bgColorStrong);\n        left: 3px;\n        pointer-events: none;\n        color: var(--io_colorStrong);\n      }\n    "}#e=!1;#t;#i;#o;#r;static get Vert(){return"\n      attribute vec3 position;\n      attribute vec2 uv;\n      varying vec2 vUv;\n\n      void main(void) {\n        vUv = uv;\n        gl_Position = vec4(position, 1.0);\n      }\n\n"}static get GlUtils(){return`\n      ${H.saturate}\n      ${H.translate}\n      ${H.circle}\n      ${H.rectangle}\n      ${H.paintDerivativeGrid2D}\n      ${H.lineVertical}\n      ${H.lineHorizontal}\n      ${H.lineCross2d}\n      ${H.checker}\n      ${H.checkerX}\n      ${H.checkerY}\n      ${H.compose}\n      ${H.paintHorizontalLine}\n    `}static get Frag(){return"\n      void main(void) {\n        gl_FragColor = io_color;\n      }\n\n"}initPropertyUniform(e,t){switch(t.value.constructor){case Boolean:return"uniform int "+e+";\n";case Number:return"uniform float "+e+";\n";case Array:return this.#o[e]=t.value.length,"uniform vec"+t.value.length+" "+e+";\n";case Color:return this.#o[e]=4,"uniform vec4 "+e+";\n"}return""}initShader(){let e="\n    #extension GL_OES_standard_derivatives : enable\n    precision highp float;\n";this.theme._reactiveProperties.forEach(((t,i)=>{e+=this.initPropertyUniform("io_"+i,t)})),e+="\n",this._reactiveProperties.forEach(((t,i)=>{const o="u"+i.charAt(0).toUpperCase()+i.slice(1);e+=this.initPropertyUniform(o,t)})),e+=this.constructor.prototype._glUtils;const t=M.createShader(M.VERTEX_SHADER);if(M.shaderSource(t,this.constructor.Vert),M.compileShader(t),!M.getShaderParameter(t,M.COMPILE_STATUS)){const e=M.getShaderInfoLog(t);console.error("IoGl [Vertex Shader] "+this.localName+" error:"),console.warn(e)}const i=M.createShader(M.FRAGMENT_SHADER);if(M.shaderSource(i,e+this.constructor.Frag),M.compileShader(i),!M.getShaderParameter(i,M.COMPILE_STATUS)){const e=M.getShaderInfoLog(i);console.error("IoGl [Frament Shader] "+this.localName+" error:"),console.warn(e)}const o=M.createProgram();return M.attachShader(o,t),M.attachShader(o,i),o}constructor(e={}){super(e),this.#t=document.createElement("canvas"),this.appendChild(this.#t),this.#i=this.#t.getContext("2d",{alpha:!0}),this.#o={},this.theme._reactiveProperties.forEach(((e,t)=>{e.type===Color&&(this.#o["io_"+t]=4)})),this._reactiveProperties.forEach(((e,t)=>{const i="u"+t.charAt(0).toUpperCase()+t.slice(1);e.type===Array&&(this.#o[i]=e.value.length)})),F.has(this.constructor)?this.#r=F.get(this.constructor):(this.#r=this.initShader(),F.set(this.constructor,this.#r)),M.linkProgram(this.#r);const t=M.getAttribLocation(this.#r,"position");M.bindBuffer(M.ARRAY_BUFFER,I),M.vertexAttribPointer(t,3,M.FLOAT,!1,0,0),M.enableVertexAttribArray(t);const i=M.getAttribLocation(this.#r,"uv");M.bindBuffer(M.ARRAY_BUFFER,D),M.vertexAttribPointer(i,2,M.FLOAT,!1,0,0),M.enableVertexAttribArray(i),this.updateThemeUniforms()}onResized(){const e=window.devicePixelRatio,t=this.getBoundingClientRect(),i=window.getComputedStyle(this),o=parseInt(i.borderRightWidth)+parseInt(i.borderLeftWidth),r=parseInt(i.borderTopWidth)+parseInt(i.borderBottomWidth),n=Math.max(0,Math.floor(t.width-o)),s=Math.max(0,Math.floor(t.height-r));(n!==this.size[0]||s!==this.size[1]||e!==this.pxRatio)&&(this.#t.style.width=Math.floor(n)+"px",this.#t.style.height=Math.floor(s)+"px",this.#e=!0,this.setProperties({size:[n,s],pxRatio:e}))}get ctx(){return this.#i}themeMutated(){this.updateThemeUniforms(),this.throttle(this._onRender)}changed(){this.throttle(this._onRender)}_onRender(){const e=Math.floor(this.size[0]*this.pxRatio),t=Math.floor(this.size[1]*this.pxRatio);e&&t&&(this.setShaderProgram(),this._reactiveProperties.forEach(((e,t)=>{const i="u"+t.charAt(0).toUpperCase()+t.slice(1);this.updatePropertyUniform(i,e)})),this.#e&&(this.#t.width=e,this.#t.height=t,this.#e=!1),T.width=e,T.height=t,M.viewport(0,0,e,t),M.clearColor(0,0,0,0),M.clear(M.COLOR_BUFFER_BIT),this.#i.clearRect(0,0,e,t),M.drawElements(M.TRIANGLES,6,M.UNSIGNED_SHORT,0),this.#i.drawImage(T,0,0))}setShaderProgram(){W!==this.#r&&(W=this.#r,M.useProgram(this.#r))}updatePropertyUniform(e,t){this.setShaderProgram(),this.setUniform(e,t.value)}updateThemeUniforms(){this.theme._reactiveProperties.forEach(((e,t)=>{this.updatePropertyUniform("io_"+t,e)}))}setUniform(e,t){const i=M.getUniformLocation(this.#r,e);if(null===i)return;let o,r=typeof t;switch(t instanceof Array&&(r="array"),r){case"boolean":M.uniform1i(i,t?1:0);break;case"number":M.uniform1f(i,t??1);break;case"object":case"array":switch(o=[0,1,2,3],"object"==typeof t&&(void 0!==t.x?o=["x","y","z","w"]:void 0!==t.r?o=["r","g","b","a"]:void 0!==t.h?o=["h","s","v","a"]:void 0!==t.c&&(o=["c","m","y","k"])),this.#o[e]){case 2:if(void 0===t){M.uniform2f(i,0,0);break}M.uniform2f(i,t[o[0]]??1,t[o[1]]??1);break;case 3:if(void 0===t){M.uniform3f(i,0,0,0);break}M.uniform3f(i,t[o[0]]??1,t[o[1]]??1,t[o[2]]??1);break;case 4:if(void 0===t){M.uniform4f(i,0,0,0,0);break}M.uniform4f(i,t[o[0]]??1,t[o[1]]??1,t[o[2]]??1,t[o[3]]??1)}}}Register(e){super.Register(e);let t="";const i=e.prototype._protochain.constructors;for(let e=i.length;e--;){const o=i[e],r=Object.getOwnPropertyDescriptor(o,"GlUtils");r&&r.get&&(t+=o.GlUtils)}Object.defineProperty(e.prototype,"_glUtils",{enumerable:!1,value:t})}};__decorate$1([ReactiveProperty({type:p,value:O})],U.prototype,"theme",void 0),__decorate$1([ReactiveProperty({type:Array,init:[0,0]})],U.prototype,"size",void 0),__decorate$1([ReactiveProperty({type:Number,value:1})],U.prototype,"pxRatio",void 0),__decorate$1([ReactiveProperty("throttled")],U.prototype,"reactivity",void 0),U=__decorate$1([Register],U);const z=U.vConstructor,$=["a","abbr","acronym","address","applet","area","article","aside","audio","b","base","basefont","bdi","bdo","big","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","dir","div","dl","dt","em","embed","fieldset","figcaption","figure","font","footer","form","frame","frameset","head","header","hgroup","h1","h2","h3","h4","h5","h6","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noframes","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strike","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","tt","u","ul","var","video","wbr"],J={};$.forEach((e=>{J[e]=function(t,i){const o={tag:e};return void 0!==t&&("string"==typeof t||t instanceof Array?o.children=t:"object"==typeof t&&(o.props=t),void 0!==i&&("string"==typeof i||i instanceof Array)&&(o.children=i)),o}}));const{a:V,abbr:Q,acronym:G,address:q,applet:Y,area:X,article:Z,aside:K,audio:ee,b:te,base:ie,basefont:oe,bdi:re,bdo:ne,big:se,blockquote:ae,body:he,br:le,button:ce,canvas:de,caption:pe,center:ue,cite:ge,code:fe,col:ve,colgroup:be,data:ye,datalist:me,dd:Pe,del:we,details:xe,dfn:Ce,dialog:_e,dir:Oe,div:Ee,dl:Se,dt:Re,em:Le,embed:ke,fieldset:je,figcaption:Ae,figure:Ne,font:He,footer:Te,form:Me,frame:Ie,frameset:De,head:Be,header:Fe,hgroup:We,h1:Ue,h2:ze,h3:$e,h4:Je,h5:Ve,h6:Qe,hr:Ge,html:qe,i:Ye,iframe:Xe,img:Ze,input:Ke,ins:et,kbd:tt,keygen:it,label:ot,legend:rt,li:nt,link:st,main:at,map:ht,mark:lt,menu:ct,menuitem:dt,meta:pt,meter:ut,nav:gt,noframes:ft,noscript:vt,object:bt,ol:yt,optgroup:mt,option:Pt,output:wt,p:xt,param:Ct,picture:_t,pre:Ot,progress:Et,q:St,rp:Rt,rt:Lt,ruby:kt,s:jt,samp:At,script:Nt,section:Ht,select:Tt,small:Mt,source:It,span:Dt,strike:Bt,strong:Ft,style:Wt,sub:Ut,summary:zt,sup:$t,svg:Jt,table:Vt,tbody:Qt,td:Gt,template:qt,textarea:Yt,tfoot:Xt,th:Zt,thead:Kt,time:ei,title:ti,tr:ii,track:oi,tt:ri,u:ni,ul:si,video:ai,wbr:hi}=J;var __decorate=function(e,t,i,o){var r,n=arguments.length,s=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(n<3?r(s):n>3?r(t,i,s):r(t,i))||s);return n>3&&s&&Object.defineProperty(t,i,s),s};let li=null;window.addEventListener("focusin",(()=>{li=document.activeElement}),{capture:!1}),window.addEventListener("blur",(()=>{setTimeout((()=>{document.activeElement===document.body&&(li=null)}))}),{capture:!0});let ci=class IoOverlay extends k{static get Style(){return"\n      :host {\n        display: block;\n        position: fixed;\n        top: 0;\n        left: 0;\n        bottom: 0;\n        right: 0;\n        z-index: 100000;\n        user-select: none;\n        overflow: hidden;\n        pointer-events: none;\n        touch-action: none;\n        background: transparent;\n      }\n      :host[expanded] {\n        pointer-events: all;\n      }\n      :host > * {\n        position: absolute !important;\n        touch-action: none;\n        box-shadow: var(--io_shadow);\n      }\n    "}static get Listeners(){return{pointerdown:["stopPropagation",{passive:!1}],pointermove:["stopPropagation",{passive:!1}],pointerup:"onPointerup",contextmenu:"onContextmenu",focusin:"onFocusIn",scroll:"_onScroll",wheel:["_onScroll",{passive:!1}],mousedown:["stopPropagation",{passive:!1}],mousemove:["stopPropagation",{passive:!1}],mouseup:["stopPropagation",{passive:!1}],touchstart:["stopPropagation",{passive:!1}],touchmove:["stopPropagation",{passive:!1}],touchend:["stopPropagation",{passive:!1}],keydown:["stopPropagation",{passive:!1}],keyup:["stopPropagation",{passive:!1}]}}constructor(e={}){super(e),Object.defineProperty(this,"x",{value:0,writable:!0}),Object.defineProperty(this,"y",{value:0,writable:!0})}stopPropagation(e){e.stopPropagation()}onResized(){this.expanded=!1}onPointerup(e){e.composedPath()[0]===this&&this.throttle(this._onCollapse)}_onCollapse(){this.expanded=!1}onContextmenu(e){e.preventDefault()}onFocusIn(e){e.stopPropagation()}_onScroll(e){e.composedPath()[0]===this&&this.throttle(this._onCollapse)}nudgeDown(e,t,i,o,r){t=Math.max(0,Math.min(t,window.innerWidth-o.width));const n=i+o.height<window.innerHeight;return!(!n&&!r)&&(n||(i=window.innerHeight-o.height),e.style.left=t+"px",e.style.top=i+"px",!0)}nudgeUp(e,t,i,o,r){t=Math.max(0,Math.min(t,window.innerWidth-o.width));const n=i-o.height>0;return!(!n&&!r)&&(n||(i=0),e.style.left=t+"px",e.style.top=i-o.height+"px",!0)}nudgeRight(e,t,i,o,r){const n=t+o.width<window.innerWidth;return!(!n&&!r)&&(n||(t=window.innerWidth-o.width),e.style.left=t+"px",e.style.top=Math.min(i,window.innerHeight-o.height)+"px",!0)}nudgeLeft(e,t,i,o,r){const n=t-o.width>0;return!(!n&&!r)&&(n||(t=0),e.style.left=t-o.width+"px",e.style.top=Math.min(i,window.innerHeight-o.height)+"px",!0)}nudgePointer(e,t,i,o){return e.style.left=Math.max(0,Math.min(t,window.innerWidth-o.width))+"px",e.style.top=Math.max(0,Math.min(i,window.innerHeight-o.height))+"px",!0}setElementPosition(e,t,i){const o=e.getBoundingClientRect(),r=i.left,n=i.top,s=i.right,a=i.bottom,h=window.innerHeight-a,l=window.innerWidth-s;switch(t){case"pointer":this.nudgePointer(e,this.x+5,this.y+5,o);break;case"up":this.nudgeUp(e,r,n,o)||this.nudgeDown(e,r,a,o)||this.nudgeUp(e,r,n,o,n>h)||this.nudgeDown(e,r,a,o,n<=h);break;case"left":this.nudgeLeft(e,r,n,o)||this.nudgeRight(e,s,n,o)||this.nudgeLeft(e,r,n,o,r>l)||this.nudgeRight(e,s,n,o,r<=l);break;case"down":this.nudgeDown(e,r,a,o)||this.nudgeUp(e,r,n,o)||this.nudgeDown(e,r,a,o,h>n)||this.nudgeUp(e,r,n,o,h<=n);break;default:this.nudgeRight(e,s,n,o)||this.nudgeLeft(e,r,n,o)||this.nudgeRight(e,s,n,o,l>r)||this.nudgeLeft(e,r,n,o,l<=r)}}appendChild(e){super.appendChild(e),e.addEventListener("expanded-changed",this.onChildExpanded),this.onChildExpanded()}removeChild(e){super.removeChild(e),e.removeEventListener("expanded-changed",this.onChildExpanded),this.onChildExpanded()}onChildExpanded(){this.throttle(this.onChildExpandedDelayed)}onChildExpandedDelayed(){for(let e=this.children.length;e--;)if(this.children[e].expanded)return void(this.expanded=!0);this.throttle(this._onCollapse)}expandedChanged(){if(!this.expanded){for(let e=this.children.length;e--;)this.children[e].expanded=!1;li&&li.focus()}}};__decorate([ReactiveProperty({value:!1,type:Boolean,reflect:!0})],ci.prototype,"expanded",void 0),ci=__decorate([Register],ci);const di=new ci;document.body.appendChild(di);
/** @License
 * Copyright ©2025 Aleksandar (Aki) Rodic
 *
 * The MIT License
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */
const pi="MIT";export{Autobind,Binding,ChangeQueue,Color,w as DARK_THEME,EventDispatcher,$ as HTML_ELEMENTS,k as IoElement,U as IoGl,di as IoOverlaySingleton,pi as LICENSE,P as LIGHT_THEME,p as Node,NodeMixin,Property,ProtoChain,ReactiveProperty,ReactivePropertyInstance,ReactiveProtoProperty,Register,b as Storage,v as StorageNode,_ as Theme,O as ThemeSingleton,V as a,Q as abbr,G as acronym,q as address,Y as applet,applyNativeElementProps,X as area,Z as article,K as aside,ee as audio,te as b,ie as base,oe as basefont,re as bdi,ne as bdo,se as big,ae as blockquote,he as body,le as br,ce as button,de as canvas,pe as caption,ue as center,ge as cite,fe as code,ve as col,be as colgroup,constructElement,ye as data,me as datalist,Pe as dd,debounce,we as del,xe as details,Ce as dfn,_e as dialog,Oe as dir,disposeChildren,Ee as div,Se as dl,Re as dt,Le as em,ke as embed,je as fieldset,Ae as figcaption,Ne as figure,focusTo,He as font,Te as footer,Me as form,Ie as frame,De as frameset,genObjectStorageID,H as glsl,Ue as h1,ze as h2,$e as h3,Je as h4,Ve as h5,Qe as h6,hardenListenerDefinition,Be as head,Fe as header,We as hgroup,Ge as hr,qe as html,Ye as i,Xe as iframe,Ze as img,Ke as input,et as ins,j as ioElement,z as ioGl,tt as kbd,it as keygen,ot as label,rt as legend,nt as li,st as link,listenerFromDefinition,at as main,ht as map,lt as mark,ct as menu,dt as menuitem,pt as meta,ut as meter,gt as nav,nextQueue,ft as noframes,vt as noscript,bt as object,yt as ol,mt as optgroup,Pt as option,wt as output,xt as p,Ct as param,_t as picture,Ot as pre,Et as progress,t as propertyDecorators,St as q,e as reactivePropertyDecorators,Rt as rp,Lt as rt,kt as ruby,jt as s,At as samp,Nt as script,Ht as section,Tt as select,Mt as small,It as source,Dt as span,Bt as strike,Ft as strong,Wt as style,Ut as sub,zt as summary,$t as sup,Jt as svg,Vt as table,Qt as tbody,Gt as td,qt as template,Yt as textarea,Xt as tfoot,Zt as th,Kt as thead,throttle,ei as time,ti as title,toVDOM,ii as tr,oi as track,ri as tt,ni as u,si as ul,ai as video,hi as wbr};
