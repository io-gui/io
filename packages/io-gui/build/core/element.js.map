{"version":3,"file":"element.js","sourceRoot":"","sources":["../../src/core/element.ts"],"names":[],"mappings":"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","sourcesContent":["import { EventDispatcher } from './internals/eventDispatcher';\nimport { IoNode, IoNodeMixin, IoNodeArgs } from './node';\nimport { Property } from './decorators/property';\nimport { Register } from './decorators/register';\n// Global mixin record\nconst mixinRecord: Record<string, string> = {};\n\n// Regular expressions for style string processing.\nconst commentsRegex =  new RegExp('(\\\\/\\\\*[\\\\s\\\\S]*?\\\\*\\\\/)', 'gi');\nconst keyframeRegex =  new RegExp('((@.*?keyframes [\\\\s\\\\S]*?){([\\\\s\\\\S]*?}\\\\s*?)})', 'gi');\nconst mediaQueryRegex =  new RegExp('((@media [\\\\s\\\\S]*?){([\\\\s\\\\S]*?}\\\\s*?)})', 'gi');\nconst mixinRegex = new RegExp('(( --[\\\\s\\\\S]*?): {([\\\\s\\\\S]*?)})', 'gi');\nconst applyRegex = new RegExp('(@apply\\\\s.*?;)', 'gi');\nconst cssRegex =  new RegExp('((\\\\s*?(?:\\\\/\\\\*[\\\\s\\\\S]*?\\\\*\\\\/)?\\\\s*?@media[\\\\s\\\\S]*?){([\\\\s\\\\S]*?)}\\\\s*?})|(([\\\\s\\\\S]*?){([\\\\s\\\\S]*?)})', 'gi');\n\nconst resizeObserver = new ResizeObserver((entries: any) => {\n  for (const entry of entries) (entry.target as unknown as IoElement).onResized();\n});\n\nexport type IoElementArgs = IoNodeArgs & {\n  tabindex?: string;\n  contenteditable?: boolean;\n  class?: string;\n  role?: string;\n  label?: string;\n  name?: string;\n  title?: string;\n  id?: string;\n  hidden?: boolean;\n  disabled?: boolean;\n  cache?: boolean;\n  [key: string]: any, // TODO: remove and make specific types\n}\n\n// export type VDOMArray<T = Record<never, never>> =\n//   [string, Partial<T> & IoElementArgs | string | VDOMArray<T>[] ] |\n//   [string, Partial<T> & IoElementArgs | string, VDOMArray<T>[] | string ];\n\nexport type VDOMArray =\n  [string] |\n  [string, IoElementArgs | string | VDOMArray[] ] |\n  [string, IoElementArgs | string, VDOMArray[] | string ];\n\nexport type VDOMElement = {\n  name: string,\n  props: IoElementArgs,\n  children: VDOMElement[]\n}\n\n/** @license\n * MIT License\n *\n * Copyright (c) 2019 Luke Jackson\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\nconst isString = (x: any) => typeof x === 'string';\nconst isArray = Array.isArray;\nconst isObject = (x: any) => typeof x === 'object' && !isArray(x);\n\nconst clense = (a: any, b: any) => !b ? a : isString(b[0]) ? [...a, b] : [...a, ...b];\n\nexport const buildTree = () => (node: VDOMArray): any => isObject(node[1]) ? {\n  ['name']: node[0],\n  ['props']: node[1],\n  ['children']: isArray(node[2]) ? node[2].reduce(clense, []).map(buildTree()) : node[2]\n} : buildTree()([node[0], {}, node[1] as VDOMArray[] | string]);\n\n/**\n * Creates an element from a virtual dom object.\n * @param {VDOMElement} vDOMElement - Virtual dom object.\n * @return {HTMLElement} - Created element.\n */\nconst constructElement = function(vDOMElement: VDOMElement) {\n  // IoElement classes constructed with constructor.\n  const ConstructorClass = window.customElements ? window.customElements.get(vDOMElement.name) : null;\n  if (ConstructorClass && (ConstructorClass as any)._isIoElement) {\n    return new ConstructorClass(vDOMElement.props);\n  }\n  // Other element classes constructed with document.createElement.\n  const element = document.createElement(vDOMElement.name);\n  applyNativeElementProps(element, vDOMElement.props);\n  return element;\n};\n\nexport const disposeElementDeep = function(element: IoElement) {\n  // NOTE: This timeout ensures that element's change queue is emptied before disposing.\n  requestAnimationFrame(() => {\n    const elements = [...(element.querySelectorAll('*')), element] as IoElement[];\n    for (let i = elements.length; i--;) {\n      if (typeof elements[i].dispose === 'function') {\n        elements[i].dispose();\n      } else if (elements[i]._eventDispatcher) {\n        elements[i]._eventDispatcher.dispose();\n        delete (elements[i] as any)._eventDispatcher;\n      }\n    }\n  });\n};\n\nconst superCreateElement = document.createElement;\ndocument.createElement = function(tagName: string, options?: ElementCreationOptions) {\n  if (tagName.startsWith('io-')) {\n    const constructor = customElements.get(tagName);\n    if (constructor) {\n      return new constructor();\n    } else {\n      return superCreateElement.apply(this, [tagName, options]);\n    }\n  } else  {\n    return superCreateElement.apply(this, [tagName, options]);\n  }\n};\n\n/**\n * Sets element properties.\n * @param {HTMLElement} element - Element to set properties on.\n * @param {Object} props - Element properties.\n */\nexport const applyNativeElementProps = function(element: HTMLElement, props: any) {\n  for (const p in props) {\n    const prop = props[p];\n    if (p === 'style') for (const s in prop) element.style.setProperty(s, prop[s]);\n    else if (p === 'class') element['className'] = prop;\n    else (element as unknown as IoElement)[p] = prop;\n    if (p === 'name') element.setAttribute('name', prop);\n    if (p === 'src') element.setAttribute('src', prop);\n  }\n  if (!(element as unknown as IoElement)._eventDispatcher) {\n    Object.defineProperty(element, '_eventDispatcher', {enumerable: false, configurable: true, value: new EventDispatcher(element as unknown as IoNode)});\n  }\n  (element as unknown as IoElement)._eventDispatcher.applyPropListeners(props);\n};\n\n/**\n * Core `IoElement` class.\n */\n@Register\nexport class IoElement extends IoNodeMixin(HTMLElement) {\n  static get Style(): string {\n    return /* css */`\n      :host {\n        box-sizing: border-box;\n        display: block;\n      }\n      :host[hidden] {\n        display: none;\n      }\n      :host[disabled] {\n        pointer-events: none;\n        opacity: 0.5;\n      }\n      :host:focus {\n        border-color: var(--io_colorBlue);\n        outline: 1px auto var(--io_colorBlue);\n        outline: 1px auto -webkit-focus-ring-color;\n      }\n      :host[aria-invalid] {\n        border: var(--io_borderFail);\n      }\n    `;\n  }\n\n  declare $: Record<string, any>; // TODO: Add type safety.\n\n  @Property({value: '', type: String, reflect: true})\n  declare tabindex: string;\n\n  @Property({value: false, type: Boolean, reflect: true})\n  declare contenteditable: boolean;\n\n  @Property({value: '', type: String, reflect: true})\n  declare class: string;\n\n  @Property({value: '', type: String, reflect: true})\n  declare role: string;\n\n  @Property({value: '', type: String, reflect: true})\n  declare label: string;\n\n  @Property({value: '', type: String, reflect: true})\n  declare name: string;\n\n  @Property({value: '', type: String, reflect: true})\n  declare title: string;\n\n  @Property({value: '', type: String, reflect: true})\n  declare id: string;\n\n  @Property({value: false, type: Boolean, reflect: true})\n  declare hidden: boolean;\n\n  @Property({value: false, type: Boolean, reflect: true})\n  declare disabled: boolean;\n\n  constructor(...args: any[]) {\n    super(...args);\n    for (const name in this._protochain.properties) {\n      const property = this._properties.get(name)!;\n      const value = property.value;\n      if (value !== undefined && value !== null) {\n        if (property.reflect) {\n          this.setAttribute(name, value);\n        }\n      }\n    }\n  }\n\n  /**\n  * Add resize listener if `onResized()` is defined in subclass.\n  */\n  connectedCallback() {\n    if (typeof this.onResized === 'function') {\n      resizeObserver.observe(this as unknown as HTMLElement);\n    }\n  }\n  /**\n  * Removes resize listener if `onResized()` is defined in subclass.\n  */\n  disconnectedCallback() {\n    if (typeof this.onResized === 'function') {\n      resizeObserver.unobserve(this as unknown as HTMLElement);\n    }\n  }\n\n  setProperty(name: string, value: any, debounce = false) {\n    super.setProperty(name, value, debounce);\n    const prop = this._properties.get(name)!;\n    if ((prop.reflect) && this._isIoElement) this.setAttribute(name, value);\n  }\n  // TODO: Reconsider cache parameter. Does it belong in the code class?\n  /**\n   * Renders DOM from virtual DOM arrays.\n   * @param {Array} vDOM - Array of vDOM children.\n   * @param {HTMLElement} [host] - Optional template target.\n   * @param {boolean} [cache] - Optional don't reuse existing elements and skip dispose\n   */\n  template(vDOM: Array<any>, host?: HTMLElement, cache?: boolean) {\n    const vChildren = buildTree()(['first', vDOM]).children;\n    host = (host || this) as any;\n    if (host === (this as any)) this.$ = {};\n    this.traverse(vChildren, host as HTMLElement, cache);\n  }\n  /**\n   * Recurively traverses vDOM.\n   * TODO: test element.traverse() function!\n   * @param {Array} vChildren - Array of vDOM children converted by `buildTree()` for easier parsing.\n   * @param {HTMLElement} [host] - Optional template target.\n   * @param {boolean} [cache] - Optional don't reuse existing elements and skip dispose\n   */\n  traverse(vChildren: Array<any>, host: HTMLElement, cache?: boolean) {\n    const children = host.children;\n    // remove trailing elements\n    while (children.length > vChildren.length) {\n      const child = children[children.length - 1];\n      host.removeChild(child);\n      if (!cache) disposeElementDeep(child as unknown as IoElement);\n    }\n    // replace elements\n    for (let i = 0; i < children.length; i++) {\n      const child = children[i] as HTMLElement | IoElement;\n      // replace existing elements\n      if (child.localName !== vChildren[i].name || cache) {\n        const oldElement = child as unknown as HTMLElement;\n        const element = constructElement(vChildren[i]);\n        host.insertBefore(element, oldElement);\n        host.removeChild(oldElement);\n        if (!cache) disposeElementDeep(oldElement as unknown as IoElement);\n      // update existing elements\n      } else {\n        child.removeAttribute('className');\n        if ((child as IoElement)._isIoElement) {\n          // Set IoElement element properties\n          (child as IoElement).applyProperties(vChildren[i].props);\n        } else {\n          // Set native HTML element properties\n          applyNativeElementProps(child as HTMLElement, vChildren[i].props);\n        }\n      }\n    }\n    // TODO: doing this before \"replace elements\" cached elements to be created twice. Consider making a unit test for this.\n    // create new elements after existing\n    if (children.length < vChildren.length) {\n      const frag = document.createDocumentFragment();\n      for (let i = children.length; i < vChildren.length; i++) {\n        const element = constructElement(vChildren[i]);\n        frag.appendChild(element);\n      }\n      host.appendChild(frag);\n    }\n    for (let i = 0; i < vChildren.length; i++) {\n      // Update this.$ map of ids.\n      const child = children[i] as HTMLElement | IoElement;\n      if (vChildren[i].props.$) {\n        this.$[vChildren[i].props.$] = child;\n      }\n      if (vChildren[i].children !== undefined) {\n        if (typeof vChildren[i].children === 'string') {\n          // Set textNode value.\n          this._flattenTextNode(child as HTMLElement);\n          (child as IoElement)._textNode.nodeValue = String(vChildren[i].children);\n        } else if (typeof vChildren[i].children === 'object') {\n          // Traverse deeper.\n          this.traverse(vChildren[i].children, child as HTMLElement, cache);\n        }\n      }\n    }\n  }\n  Register(ioNodeConstructor: typeof IoNode) {\n    super.Register(ioNodeConstructor);\n    const localName = ioNodeConstructor.name.replace(/([a-z])([A-Z,0-9])/g, '$1-$2').toLowerCase();\n\n    Object.defineProperty(ioNodeConstructor, 'localName', {value: localName});\n    Object.defineProperty(ioNodeConstructor.prototype, 'localName', {value: localName});\n\n    Object.defineProperty(ioNodeConstructor, '_isIoElement', {enumerable: false, value: true});\n    Object.defineProperty(ioNodeConstructor.prototype, '_isIoElement', {enumerable: false, value: true});\n    Object.defineProperty(window, ioNodeConstructor.name, {value: ioNodeConstructor});\n\n    window.customElements.define(localName, ioNodeConstructor as unknown as CustomElementConstructor);\n\n    let mixinsString = '';\n    const mixins = ioNodeConstructor.prototype._protochain.styles.match(mixinRegex);\n    if (mixins) {\n      for (let i = 0; i < mixins.length; i++) {\n        // TODO: improve mixing regex and string handling.\n        const m = mixins[i].split(': {');\n        const name = m[0].replace(' --', '--');\n        const value = m[1].replace(/}/g, '').trim().replace(/^ +/gm, '');\n        mixinRecord[name] = value;\n        mixinsString += mixins[i].replace(' --', '.').replace(': {', ' {');\n      }\n    }\n\n    // Remove mixins\n    let styleString = ioNodeConstructor.prototype._protochain.styles.replace(mixinRegex, '');\n    // Apply mixins\n    const apply = styleString.match(applyRegex);\n    if (apply) {\n      for (let i = 0; i < apply.length; i++) {\n        const name = apply[i].split('@apply ')[1].replace(';', '');\n        if (mixinRecord[name]) {\n          styleString = styleString.replace(apply[i], mixinRecord[name]);\n        } else {\n          console.warn('IoElement: cound not find mixin:', name);\n        }\n      }\n    }\n\n    debug: {\n      let styleStringStripped = styleString;\n      styleStringStripped = styleStringStripped.replace(commentsRegex, '');\n      styleStringStripped = styleStringStripped.replace(keyframeRegex, '');\n      styleStringStripped = styleStringStripped.replace(mediaQueryRegex, '');\n      const match = styleStringStripped.match(cssRegex);\n      if (match) {\n        match.map((selector: any) => {\n          selector = selector.trim();\n          if (!selector.startsWith(':host')) {\n            console.warn(localName + ': CSS Selector not prefixed with \":host\"! This will cause style leakage!');\n            console.warn(selector);\n          }\n        });\n      }\n    }\n\n    // Replace `:host` with element tag and add mixin CSS variables.\n    styleString = mixinsString + styleString.replace(new RegExp(':host', 'g'), localName);\n\n    const styleElement = document.createElement('style');\n    styleElement.innerHTML = styleString;\n    styleElement.setAttribute('id', 'io-style-' + localName.replace('io-', ''));\n    document.head.appendChild(styleElement);\n  }\n  /**\n  * Helper function to flatten textContent into a single TextNode.\n  * Update textContent via TextNode is better for layout performance.\n  * @param {HTMLElement} element - Element to flatten.\n  */\n  _flattenTextNode(element: HTMLElement | IoElement) {\n    if (element.childNodes.length === 0) {\n      element.appendChild(document.createTextNode(''));\n    }\n    if (element.childNodes[0].nodeName !== '#text') {\n      element.innerHTML = '';\n      element.appendChild(document.createTextNode(''));\n    }\n    (element as IoElement)._textNode = element.childNodes[0];\n    if (element.childNodes.length > 1) {\n      const textContent = element.textContent;\n      for (let i = element.childNodes.length; i--;) {\n        if (i !== 0) element.removeChild(element.childNodes[i]);\n      }\n      (element as IoElement)._textNode.nodeValue = textContent;\n    }\n  }\n  get textNode() {\n    this._flattenTextNode(this);\n    return this._textNode.nodeValue;\n  }\n  set textNode(value) {\n    this._flattenTextNode(this);\n    this._textNode.nodeValue = String(value);\n  }\n  applyProperties(props: any) {\n    super.applyProperties(props);\n    if (props['style']) {\n      for (const s in props['style']) {\n        this.style[s] = props['style'][s];\n      }\n    }\n  }\n  /**\n  * Alias for HTMLElement setAttribute where falsey values remove the attribute.\n  * @param {string} attr - Attribute name.\n  * @param {*} value - Attribute value.\n  */\n  setAttribute(attr: string, value: boolean | number | string) {\n    if (value === true) {\n      HTMLElement.prototype.setAttribute.call(this, attr, '');\n    } else if (value === false || value === '') {\n      this.removeAttribute(attr);\n    } else if (typeof value === 'string' || typeof value === 'number') {\n      if (this.getAttribute(attr) !== String(value)) HTMLElement.prototype.setAttribute.call(this, attr, String(value));\n    }\n  }\n  labelChanged() {\n    if (this.label) {\n      this.setAttribute('aria-label', this.label);\n    } else {\n      this.removeAttribute('aria-label');\n    }\n  }\n  disabledChanged() {\n    if (this.disabled) {\n      this.setAttribute('aria-disabled', this.disabled);\n    } else {\n      this.removeAttribute('aria-disabled');\n    }\n  }\n}\n"]}