{"version":3,"file":"eventDispatcher.test.js","sourceRoot":"","sources":["../../../src/core/internals/eventDispatcher.test.ts"],"names":[],"mappings":"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","sourcesContent":["import { IoNode, Register, ListenerDefinitions, EventDispatcher } from '../../index';\n\nconst handlerFunction = (event: CustomEvent) => {\n  (event.target as unknown as MockIoNode1).eventStack.push(`handlerFunction ${event.detail}`);\n};\n\n@Register\nclass MockIoNode1 extends IoNode {\n  eventStack: string[] = [];\n  static get Listeners(): ListenerDefinitions {\n    return {\n      'event1': 'event1Handler',\n    };\n  }\n  event1Handler(event: CustomEvent) {\n    this.eventStack.push(`event1Handler ${event.detail}`);\n  }\n}\n\n@Register\nclass MockIoNode2 extends MockIoNode1 {\n  eventStack: string[] = [];\n  static get Listeners(): ListenerDefinitions {\n    return {\n      'event2': ['event2Handler', {capture: true}],\n    };\n  }\n  event2Handler(event: CustomEvent) {\n    this.eventStack.push(`event2Handler ${event.detail}`);\n  }\n}\n\n@Register\nclass MockIoNode3 extends MockIoNode2 {\n  eventStack: string[] = [];\n  static get Listeners(): ListenerDefinitions {\n    return {\n      'event1': 'event3Handler',\n      'event2': [handlerFunction, {passive: true}],\n      'event3': handlerFunction\n    };\n  }\n  event3Handler(event: CustomEvent) {\n    this.eventStack.push(`event3Handler ${event.detail}`);\n  }\n}\n\nclass TestDiv extends HTMLElement {\n  eventStack: string[] = [];\n  event1Handler(event: CustomEvent) {\n    this.eventStack.push(`event1Handler ${event.detail}`);\n  }\n}\nwindow.customElements.define('test-div', TestDiv);\n\nexport default class {\n  run() {\n    describe('eventDispatcher.test.ts', () => {\n      it('Should initialize with correct values', () => {\n        const node = new MockIoNode1();\n        let eventDispatcher = new EventDispatcher(node);\n        expect(eventDispatcher.node).to.be.equal(node);\n        expect(eventDispatcher.protoListeners).to.be.eql({event1:[[node.event1Handler]]});\n        expect(eventDispatcher.propListeners).to.be.eql({});\n        expect(eventDispatcher.addedListeners).to.be.eql({});\n        expect(eventDispatcher.isEventTarget).to.be.eql(false);\n      });\n      it('Should initialize listeners from ProtoChain', () => {\n        const node1 = new MockIoNode1();\n        let eventDispatcher = new EventDispatcher(node1);\n        expect(eventDispatcher.protoListeners).to.be.eql({\n          event1:[[node1.event1Handler]],\n        });\n        const node2 = new MockIoNode2();\n        eventDispatcher = new EventDispatcher(node2);\n        expect(eventDispatcher.protoListeners).to.be.eql({\n          event1:[[node1.event1Handler]],\n          event2:[[node2.event2Handler, {capture:true}]]\n        });\n        const node3 = new MockIoNode3();\n        eventDispatcher = new EventDispatcher(node3);\n        expect(eventDispatcher.protoListeners).to.be.eql({\n          event1:[[node3.event3Handler]],\n          event2:[[handlerFunction, {passive: true}]],\n          event3:[[handlerFunction]]\n        });\n      });\n      it('Should applyPropListeners() correctly', () => {\n        const node3 = new MockIoNode3();\n        let eventDispatcher = new EventDispatcher(node3);\n        const handler4 = () => {};\n        const handler5 = () => {};\n        eventDispatcher.applyPropListeners({'@event3': 'event3Handler', '@event4': handler4});\n        expect(eventDispatcher.propListeners).to.be.eql({\n          event3:[[node3.event3Handler]], event4:[[handler4]]\n        });\n        eventDispatcher.applyPropListeners({'@event5': ['event3Handler'], '@event6': [handler4]});\n        expect(eventDispatcher.propListeners).to.be.eql({\n          event5:[[node3.event3Handler]], event6:[[handler4]]\n        });\n        eventDispatcher.applyPropListeners({'@event7': [node3.event3Handler, {capture: true}], '@event8': [handler5, {capture: true}]});\n        expect(eventDispatcher.propListeners).to.be.eql({\n          event7:[[node3.event3Handler, {capture:true}]], event8:[[handler5, {capture:true}]]\n        });\n        eventDispatcher.applyPropListeners({});\n        expect(eventDispatcher.propListeners).to.be.eql({});\n      });\n      it('Should add/remove listeners correctly', () => {\n        const node2 = new MockIoNode2();\n        let eventDispatcher = new EventDispatcher(node2);\n        const listener1 = () => {};\n        const listener2 = () => {};\n        eventDispatcher.addEventListener('event1', listener1);\n        eventDispatcher.addEventListener('event1', listener2, {capture: true});\n        expect(eventDispatcher.addedListeners).to.be.eql({\n          event1:[[listener1],[listener2, {capture:true}]]\n        });\n        eventDispatcher.removeEventListener('event1', listener1);\n        expect(eventDispatcher.addedListeners).to.be.eql({\n          event1:[[listener2, {capture:true}]]\n        });\n        eventDispatcher.removeEventListener('event1');\n        expect(eventDispatcher.addedListeners).to.be.eql({});\n      });\n      it('Should not add listeners if already added', () => {\n        const node2 = new MockIoNode2();\n        let eventDispatcher = new EventDispatcher(node2);\n        const listener1 = () => {};\n        const listener2 = () => {};\n        eventDispatcher.addEventListener('event1', listener1);\n        eventDispatcher.addEventListener('event1', listener1);\n        eventDispatcher.addEventListener('event1', listener2, {capture: true});\n        expect(eventDispatcher.addedListeners).to.be.eql({\n          event1:[[listener1],[listener2, {capture:true}]]\n        });\n      });\n      it('Should remove correct listener', () => {\n        const node2 = new MockIoNode2();\n        let eventDispatcher = new EventDispatcher(node2);\n        const listener1 = () => {};\n        const listener2 = () => {};\n        eventDispatcher.addEventListener('event1', listener1);\n        eventDispatcher.addEventListener('event1', listener2, {capture: true});\n        eventDispatcher.removeEventListener('event1', listener2);\n        expect(eventDispatcher.addedListeners).to.be.eql({\n          event1:[[listener1]]\n        });\n        eventDispatcher.removeEventListener('event1', listener1);\n        expect(eventDispatcher.addedListeners).to.be.eql({});\n      });\n      it('Should dispatch added events with correct payloads', () => {\n        const node3 = new MockIoNode3();\n        let eventDispatcher = new EventDispatcher(node3);\n        const handler4 = (event: CustomEvent) => {\n          (event.target as unknown as MockIoNode3).eventStack.push(`handler4 ${event.detail}`);\n        };\n        const handler5 = (event: CustomEvent) => {\n          (event.target as unknown as MockIoNode3).eventStack.push(`handler5 ${event.detail}`);\n        };\n        eventDispatcher.applyPropListeners({'@event3': 'event3Handler', '@event4': handler4});\n        eventDispatcher.addEventListener('event5', handler5);\n        eventDispatcher.dispatchEvent('event1', 1);\n        eventDispatcher.dispatchEvent('event2', 2);\n        eventDispatcher.dispatchEvent('event3', 3);\n        eventDispatcher.dispatchEvent('event4', 4);\n        eventDispatcher.dispatchEvent('event5', 5);\n        expect(node3.eventStack).to.be.eql(['event3Handler 1', 'handlerFunction 2', 'handlerFunction 3', 'event3Handler 3', 'handler4 4', 'handler5 5']);\n\n        node3.eventStack = [];\n        eventDispatcher.applyPropListeners({'@event4': handler4});\n        eventDispatcher.removeEventListener('event5', handler5);\n        eventDispatcher.dispatchEvent('event1', 1);\n        eventDispatcher.dispatchEvent('event2', 2);\n        eventDispatcher.dispatchEvent('event3', 3);\n        eventDispatcher.dispatchEvent('event4', 4);\n        eventDispatcher.dispatchEvent('event5', 5);\n        expect(node3.eventStack).to.be.eql(['event3Handler 1', 'handlerFunction 2', 'handlerFunction 3', 'handler4 4']);\n      });\n      it('Should add/remove/dispatch events on HTML elements', () => {\n        const element = document.createElement('test-div') as TestDiv;\n        const eventDispatcher = new EventDispatcher(element);\n        const handler2 = (event: CustomEvent) => {\n          (event.target as unknown as TestDiv).eventStack.push(`handler2 ${event.detail}`);\n        };\n        const handler3 = (event: CustomEvent) => {\n          (event.target as unknown as TestDiv).eventStack.push(`handler3 ${event.detail}`);\n        };\n        eventDispatcher.applyPropListeners({'@event1': 'event1Handler', '@event2': handler2});\n        eventDispatcher.addEventListener('event3', handler3);\n        element.dispatchEvent(new CustomEvent('event1', {detail: 1}));\n        element.dispatchEvent(new CustomEvent('event2', {detail: 2}));\n        element.dispatchEvent(new CustomEvent('event3', {detail: 3}));\n        expect(element.eventStack).to.be.eql(['event1Handler 1', 'handler2 2', 'handler3 3']);\n\n        element.eventStack = [];\n        eventDispatcher.applyPropListeners({});\n        eventDispatcher.removeEventListener('event3', handler3);\n        element.dispatchEvent(new CustomEvent('event1', {detail: 1}));\n        element.dispatchEvent(new CustomEvent('event2', {detail: 2}));\n        element.dispatchEvent(new CustomEvent('event3', {detail: 3}));\n        expect(element.eventStack).to.be.eql([]);\n      });\n      it('Should bubble events if specified', () => {\n        const element = document.createElement('test-div') as TestDiv;\n        element.id = 'element';\n        const parentElement = document.createElement('test-div') as TestDiv;\n        parentElement.id = 'parentElement';\n        parentElement.appendChild(element);\n        const eventDispatcher = new EventDispatcher(element);\n        const parentEventDispatcher = new EventDispatcher(parentElement);\n        const handler2 = function(this: TestDiv, event: CustomEvent) {\n          this.eventStack.push(`handler2 ${event.detail}`);\n        };\n        eventDispatcher.applyPropListeners({'@event1': 'event1Handler'});\n        eventDispatcher.addEventListener('event2', handler2.bind(element));\n        parentEventDispatcher.applyPropListeners({'@event1': 'event1Handler'});\n        parentEventDispatcher.addEventListener('event2', handler2.bind(parentElement));\n\n        eventDispatcher.dispatchEvent('event1', 1, false);\n        eventDispatcher.dispatchEvent('event2', 2, false);\n        expect(element.eventStack).to.be.eql(['event1Handler 1', 'handler2 2']);\n        expect(parentElement.eventStack).to.be.eql([]);\n\n        element.eventStack = [];\n        parentElement.eventStack = [];\n        eventDispatcher.dispatchEvent('event1', 1, true);\n        eventDispatcher.dispatchEvent('event2', 2, true);\n        expect(element.eventStack).to.be.eql(['event1Handler 1', 'handler2 2']);\n        expect(parentElement.eventStack).to.be.eql(['event1Handler 1', 'handler2 2']);\n      });\n      it('Should emit event from specified target', () => {\n        const element = document.createElement('div');\n        const eventDispatcher = new EventDispatcher(element);\n\n        const element2 = document.createElement('test-div') as TestDiv;\n        const eventDispatcher2 = new EventDispatcher(element2);\n        eventDispatcher2.applyPropListeners({'@event1': 'event1Handler'});\n\n        let path = null;\n        let target = null;\n        eventDispatcher2.addEventListener('event1', (event: CustomEvent) => {\n          path = event.composedPath();\n          target = event.target;\n        });\n\n        eventDispatcher.dispatchEvent('event1', 1, false, element2);\n        expect(element2.eventStack).to.be.eql(['event1Handler 1']);\n        expect(path).to.be.eql([element2]);\n        expect(target).to.be.eql(element2);\n      });\n      it('Should dispose correctly', () => {\n        const node = new MockIoNode1();\n        const eventDispatcher = new EventDispatcher(node);\n        eventDispatcher.dispose();\n        expect(eventDispatcher.node).to.be.equal(undefined);\n        expect(eventDispatcher.protoListeners).to.be.equal(undefined);\n        expect(eventDispatcher.propListeners).to.be.equal(undefined);\n        expect(eventDispatcher.addedListeners).to.be.equal(undefined);\n      });\n    });\n  }\n}"]}