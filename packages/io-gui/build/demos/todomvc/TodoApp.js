import{ReactiveProperty as e,Register as t,Node as o,NodeArray as i,IoElement as l,input as s,li as r,div as c,label as n,button as d,section as p,ul as a,span as u,a as h,Storage as m,header as f,h1 as g,p as y}from"io-gui";var __decorate$6=function(e,t,o,i){var l,s=arguments.length,r=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var c=e.length-1;c>=0;c--)(l=e[c])&&(r=(s<3?l(r):s>3?l(t,o,r):l(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r};class TodoItemModel extends o{toggle=()=>{this.completed=!this.completed};delete=()=>{this.dispatch("delete-item",{item:this},!0)};toJSON(){return{title:this.title,completed:this.completed}}fromJSON(e){return this.setProperties({title:e.title??"",completed:e.completed??!1}),this}}__decorate$6([e({type:String})],TodoItemModel.prototype,"title",void 0),__decorate$6([e({type:Boolean})],TodoItemModel.prototype,"completed",void 0),t(TodoItemModel);var __decorate$5=function(e,t,o,i){var l,s=arguments.length,r=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var c=e.length-1;c>=0;c--)(l=e[c])&&(r=(s<3?l(r):s>3?l(t,o,r):l(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r};class TodoListModel extends o{static get Listeners(){return{"delete-item":"onDeleteItem"}}onDeleteItem(e){const t=e.path[0],o=this.items.indexOf(t);this.items.splice(o,1)}get filters(){return{all:()=>!0,active:e=>!e.completed,completed:e=>e.completed}}get count(){return this.items.length}get completedCount(){return this.items.filter(e=>e.completed).length}get activeCount(){return this.items.filter(e=>!e.completed).length}get allCompleted(){return this.items.every(e=>e.completed)}constructor(e){(e={...e}).items=e.items.map(e=>new TodoItemModel({...e})),super(e)}completeAll=()=>{this.items.forEach(e=>e.completed=!0)};clearCompleted=()=>{this.items=this.items.filter(e=>!e.completed)};itemsMutated(){this.dispatchMutation()}toJSON(){return{items:this.items.map(e=>e.toJSON())}}fromJSON(e){return this.setProperties({items:e.items.map(e=>new TodoItemModel(e))}),this}}__decorate$5([e({type:i,init:"this"})],TodoListModel.prototype,"items",void 0),t(TodoListModel);var __decorate$4=function(e,t,o,i){var l,s=arguments.length,r=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var c=e.length-1;c>=0;c--)(l=e[c])&&(r=(s<3?l(r):s>3?l(t,o,r):l(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r};class TodoInput extends l{static get Style(){return"\n    :host {\n      display: contents;\n    }\n    "}constructor(e={}){super(e)}onInputKey(e){if("Enter"===e.key){const e=this.$.input,t=String(e.value).trim();t&&this.model.items.push(new TodoItemModel({title:t,completed:!1})),e.value="",e.focus()}if("Escape"===e.key){const e=this.$.input;e.value="",e.focus()}}changed(){this.render([s({id:"input",class:"new-todo",placeholder:"What needs to be done?","@keyup":this.onInputKey,autofocus:!0})])}}__decorate$4([e({type:TodoListModel})],TodoInput.prototype,"model",void 0),t(TodoInput);var __decorate$3=function(e,t,o,i){var l,s=arguments.length,r=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var c=e.length-1;c>=0;c--)(l=e[c])&&(r=(s<3?l(r):s>3?l(t,o,r):l(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r};class TodoItem extends l{static get Style(){return"\n    :host {\n      display: contents;\n    }\n    "}$input;_originalTitle;constructor(e={}){super(e)}itemMutated(){this.changed()}changed(){this.render([r({class:"todo "+(this.item.completed?"completed ":"")+(this.editing?"editing":"")},[c({class:"view"},[s({type:"checkbox",class:"toggle",checked:this.item.completed,"@click":this.item.toggle}),n({"@dblclick":this.onStartEdit},this.item.title),d({class:"destroy","@click":this.item.delete})]),s({id:"input-"+this.item.title,class:"edit",value:this.item.title,"@blur":this.onBlur,"@keyup":this.onInputKey})])]),this.$input=this.querySelector("input.edit")}onStartEdit(){this.editing=!0,this._originalTitle=this.item.title,this.$input.focus()}onBlur(){const e=String(this.$input.value).trim();this.item.title=e||this._originalTitle,this.editing=!1}onInputKey(e){const t=e.detail;["Enter","Escape"].includes(t.key)&&this.$input.blur()}}__decorate$3([e({type:TodoItemModel})],TodoItem.prototype,"item",void 0),__decorate$3([e({type:TodoListModel})],TodoItem.prototype,"model",void 0),__decorate$3([e({value:!1})],TodoItem.prototype,"editing",void 0),t(TodoItem);var __decorate$2=function(e,t,o,i){var l,s=arguments.length,r=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var c=e.length-1;c>=0;c--)(l=e[c])&&(r=(s<3?l(r):s>3?l(t,o,r):l(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r};class TodoList extends l{static get Style(){return"\n      :host {\n        flex-direction: column;\n      }\n    "}constructor(e={}){super(e)}modelMutated(){this.changed()}changed(){const e=this.model.items.filter(this.model.filters[this.route]);this.render([p({class:"main"},[s({type:"checkbox",id:"toggle-all",class:"toggle-all",checked:this.model.allCompleted}),this.model.items.length&&!this.model.allCompleted?n({for:"toggle-all","@click":this.model.completeAll},"Mark all as complete"):null,a({class:"todo-list"},e.map(e=>{return t={item:e,model:this.model},TodoItem.vConstructor(t);var t}))])])}}__decorate$2([e({type:TodoListModel})],TodoList.prototype,"model",void 0),__decorate$2([e({value:"all"})],TodoList.prototype,"route",void 0),t(TodoList);const todoList=function(e){return TodoList.vConstructor(e)};var __decorate$1=function(e,t,o,i){var l,s=arguments.length,r=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var c=e.length-1;c>=0;c--)(l=e[c])&&(r=(s<3?l(r):s>3?l(t,o,r):l(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r};class TodoFooter extends l{static get Style(){return"\n      :host a {\n        cursor: pointer;\n      }\n    "}constructor(e={}){super(e)}onRouteClicked(e){const t=e.target;this.route=t.innerText.toLowerCase()}modelMutated(){this.changed()}changed(){this.render([u({class:"todo-count"},String(this.model.activeCount)+(1===this.model.activeCount?" item":" items")+" left"),a({class:"filters"},[r([h({"@click":this.onRouteClicked,class:"all"===this.route?"selected":""},"All")]),r([h({"@click":this.onRouteClicked,class:"active"===this.route?"selected":""},"Active")]),r([h({"@click":this.onRouteClicked,class:"completed"===this.route?"selected":""},"Completed")])]),this.model.completedCount?d({class:"clear-completed","@click":this.model.clearCompleted},"Clear completed"):null])}}__decorate$1([e({type:TodoListModel})],TodoFooter.prototype,"model",void 0),__decorate$1([e({value:"all"})],TodoFooter.prototype,"route",void 0),t(TodoFooter);const todoFooter=function(e){return TodoFooter.vConstructor(e)};var __decorate=function(e,t,o,i){var l,s=arguments.length,r=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var c=e.length-1;c>=0;c--)(l=e[c])&&(r=(s<3?l(r):s>3?l(t,o,r):l(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r};m.permit();const v=m({key:"route",storage:"hash",value:"all"}),T=m({key:"model",storage:"local",value:new TodoListModel({items:[]})});class TodoApp extends l{ready(){this.changed()}modelMutated(){this.changed()}changed(){var e;this.render([p({class:"todoapp"},[f({class:"header"},[g("todos"),(e={model:this.model},TodoInput.vConstructor(e))]),todoList({class:"todo-list",model:this.model,route:this.route}),this.model.count?todoFooter({class:"footer",model:this.model,route:this.bind("route")}):null]),c({class:"info"},[y("Double-click to edit a todo"),y([u("Created with "),h({href:"https://iogui.dev",target:"_blank"},"Io-Gui")]),y([u("Part of "),h({href:"http://todomvc.com/",target:"_blank"},"TodoMVC")])])])}}__decorate([e(T)],TodoApp.prototype,"model",void 0),__decorate([e(v)],TodoApp.prototype,"route",void 0),t(TodoApp);const b=TodoApp.vConstructor;export{TodoApp,b as todoApp};
