{"version":3,"file":"ProtoChain.test.js","sourceRoot":"","sources":["../../src/core/ProtoChain.test.ts"],"names":[],"mappings":"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","sourcesContent":["import { describe, it, expect } from 'vitest'\nimport { ProtoChain, Node, ReactiveProperty, ReactivePropertyDefinitions, ListenerDefinitions, IoElement, Register, Property } from '@io-gui/core'\n\nclass Array1 extends Array {}\nclass Array2 extends Array1 {}\nclass Array3 extends Array2 {}\n\nclass Object1 {}\nclass Object2 extends Object1 {}\nclass Object3 extends Object2 {}\n\nclass HTMLElement1 extends HTMLElement {}\nclass HTMLElement2 extends HTMLElement1 {}\nclass HTMLElement3 extends HTMLElement2 {}\n\n// TODO: Fix init field testing. Based on old implementation.\n\n@Register\nclass Node1 extends Node {\n  static get ReactiveProperties(): ReactivePropertyDefinitions {\n    return {\n      prop1: {\n        init: false\n      },\n      prop2: {}\n    }\n  }\n\n  static get Properties(): Record<string, any> {\n    return {\n      sprop1: 'foo'\n    }\n  }\n\n  @ReactiveProperty({type: Object, init: null})\n  declare prop2: Object\n}\n\n@Register\nclass Node3 extends Node1 {\n  static get ReactiveProperties(): ReactivePropertyDefinitions {\n    return {\n      prop1: {\n        init: true,\n        reflect: true\n      }\n    }\n  }\n\n  @ReactiveProperty({init: true})\n  declare prop1: any\n\n  @ReactiveProperty({value: 'foo', reflect: false})\n  declare prop2: any\n\n  @ReactiveProperty({reflect: true})\n  declare prop3: any\n\n  @Property('bar')\n  declare sprop2: any\n}\n\n@Register\nclass Node4 extends Node1 {\n  @ReactiveProperty({init: true})\n  declare prop1: any\n\n  @ReactiveProperty({})\n  declare prop2: any\n\n  @Property('baz')\n  declare sprop1: string\n}\n\nclass IoElement1 extends IoElement {}\n\nclass MockNode1 {\n  static get ReactiveProperties(): ReactivePropertyDefinitions {\n    return {\n      prop1: {\n        init: false\n      }\n    }\n  }\n  static get Listeners(): ListenerDefinitions {\n    return {\n      listener1: 'function1',\n      listener2: '',\n      listener3: ['_onFunction1', {capture: true}],\n      listener4: () => {}\n    }\n  }\n  static get Style() {\n    return 'a'\n  }\n  changed() {}\n  function1() {}\n  onFunction1() {}\n  _onFunction1() {}\n}\n\nclass MockNode2 extends MockNode1 {\n  function2() {}\n  onFunction2() {}\n  _onFunction2() {}\n  static get ReactiveProperties(): ReactivePropertyDefinitions {\n    return {\n      prop1: {\n        type: Object,\n        init: null\n      },\n      prop2: {}\n    }\n  }\n  static get Listeners(): ListenerDefinitions {\n    return {\n      listener1: '_onFunction2',\n      listener2: ['function2', {capture: true, passive: true}],\n      listener3: ['_onFunction1', {passive: true}]\n    }\n  }\n  static get Style() {\n    return 'b'\n  }\n}\nclass MockNode3 extends MockNode2 {}\n\ndescribe('ProtoChain', () => {\n  it('Should include an array of inherited class constructors', () => {\n    let constructors = new ProtoChain(Array3).constructors\n    expect(constructors).toEqual([Array3, Array2, Array1, Array])\n    constructors = new ProtoChain(Object3).constructors\n    expect(constructors).toEqual([Object3, Object2, Object1])\n    constructors = new ProtoChain(HTMLElement3).constructors\n    expect(constructors).toEqual([HTMLElement3, HTMLElement2, HTMLElement1])\n    constructors = new ProtoChain(Node).constructors\n    expect(constructors).toEqual([Node])\n    constructors = new ProtoChain(Node1).constructors\n    expect(constructors).toEqual([Node1, Node])\n    constructors = new ProtoChain(IoElement1).constructors\n    expect(constructors).toEqual([IoElement1, IoElement])\n  })\n  it('Should include properties declared in `static get Properties()` return oject', () => {\n    let protoChain = new ProtoChain(Node1)\n    expect(Object.keys(protoChain.properties)).toEqual(['sprop1'])\n    expect(protoChain.properties).toEqual({\n      sprop1: 'foo'\n    })\n  })\n  it('Should include reactive properties declared in `static get ReactiveProperties()` return oject', () => {\n    let protoChain = new ProtoChain(MockNode1)\n    expect(Object.keys(protoChain.reactiveProperties)).toEqual(['prop1'])\n    expect(protoChain.reactiveProperties).toEqual({\n      prop1:{init: false},\n    })\n    protoChain = new ProtoChain(MockNode2)\n    expect(Object.keys(protoChain.reactiveProperties)).toEqual(['prop1', 'prop2'])\n    expect(protoChain.reactiveProperties).toEqual({\n      prop1:{type: Object, init: null},\n      prop2:{},\n    })\n  })\n  it('Should include properties declared in Property decorator', () => {\n    let protoChain = new ProtoChain(Node3)\n    expect(Object.keys(protoChain.properties)).toEqual(['sprop1', 'sprop2'])\n    expect(protoChain.properties).toEqual({\n      sprop1: 'foo',\n      sprop2: 'bar'\n    })\n  })\n  it('Should include reactive properties declared in ReactiveProperty decorator', () => {\n    let protoChain = new ProtoChain(Node1)\n    expect(Object.keys(protoChain.reactiveProperties)).toEqual(['reactivity', 'prop2', 'prop1'])\n    expect(protoChain.reactiveProperties).toEqual({\n      reactivity:{value: 'immediate', type: String},\n      prop1:{init: false},\n      prop2:{type: Object, init: null},\n    })\n    protoChain = new ProtoChain(Node3)\n    expect(Object.keys(protoChain.reactiveProperties)).toEqual(['reactivity', 'prop2', 'prop1', 'prop3'])\n    expect(protoChain.reactiveProperties).toEqual({\n      reactivity:{value: 'immediate', type: String},\n      prop1:{reflect: true, init: true},\n      prop2:{value: 'foo', init: null, type: Object, reflect: false},\n      prop3:{reflect: true},\n    })\n  })\n  it('Should not override properties declared in Property decorator with inherited `static get Properties()` return oject', () => {\n    const protoChain = new ProtoChain(Node4)\n    expect(Object.keys(protoChain.properties)).toEqual(['sprop1'])\n    expect(protoChain.properties).toEqual({\n      sprop1: 'baz',\n    })\n  })\n  it('Should not override reactive properties declared in ReactiveProperty decorator with inherited `static get ReactiveProperties()` return oject', () => {\n    const protoChain = new ProtoChain(Node4)\n    expect(Object.keys(protoChain.reactiveProperties)).toEqual(['reactivity', 'prop2', 'prop1'])\n    expect(protoChain.reactiveProperties).toEqual({\n      reactivity:{value: 'immediate', type: String},\n      prop1:{init: true},\n      prop2:{type: Object, init: null},\n    })\n  })\n  it('Should include listners declared in `static get Listeners()` return oject', () => {\n    let protoChain = new ProtoChain(MockNode1)\n    expect(Object.keys(protoChain.listeners)).toEqual(['listener1', 'listener3', 'listener4'])\n    expect(protoChain.listeners['listener1']).toEqual([['function1']])\n    expect(protoChain.listeners['listener3']).toEqual([['_onFunction1', {capture: true}]])\n    expect(String(protoChain.listeners['listener4'])).toBe('() => {\\n      }')\n    protoChain = new ProtoChain(MockNode2)\n    expect(Object.keys(protoChain.listeners)).toEqual(['listener1', 'listener3', 'listener4', 'listener2'])\n    expect(protoChain.listeners['listener1']).toEqual([['function1'], ['_onFunction2']])\n    expect(protoChain.listeners['listener2']).toEqual([['function2', {capture: true, passive: true}]])\n    expect(protoChain.listeners['listener3']).toEqual([['_onFunction1', {capture: true, passive: true}]])\n    expect(String(protoChain.listeners['listener4'])).toBe('() => {\\n      }')\n  })\n  it('Should include style strings declared in `static get Style()` return string', () => {\n    let protoChain = new ProtoChain(MockNode1)\n    expect(protoChain.style).toBe('a')\n    protoChain = new ProtoChain(MockNode2)\n    expect(protoChain.style).toBe('a\\nb')\n    protoChain = new ProtoChain(MockNode3)\n    expect(protoChain.style).toBe('a\\nb')\n  })\n  it('Should include an array of handler names that start with \"on[A-Z]\" or \"_on[A-Z]\" for auto-binding', () => {\n    let protoChain = new ProtoChain(Node1)\n    expect(protoChain.handlers).toEqual(['changed', 'onPropertyMutated'])\n    protoChain = new ProtoChain(MockNode1)\n    expect(protoChain.handlers).toEqual(['changed', 'onFunction1', '_onFunction1'])\n    protoChain = new ProtoChain(MockNode2)\n    expect(protoChain.handlers).toEqual(['changed', 'onFunction1', '_onFunction1', 'onFunction2', '_onFunction2'])\n  })\n  it('Should bind auto-binding functions with `.init(node)` function', () => {\n    const protoChain = new ProtoChain(MockNode2)\n    const node = new MockNode2()\n    protoChain.init(node as unknown as Node)\n    expect(node.function1.name).toBe('function1')\n    expect(node.onFunction1.name).toBe('bound onFunction1')\n    expect(node._onFunction1.name).toBe('bound _onFunction1')\n    expect(node.function2.name).toBe('function2')\n    expect(node.onFunction2.name).toBe('bound onFunction2')\n    expect(node._onFunction2.name).toBe('bound _onFunction2')\n  })\n})\n"]}