{"version":3,"file":"EventDispatcher.test.js","sourceRoot":"","sources":["../../src/core/EventDispatcher.test.ts"],"names":[],"mappings":"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","sourcesContent":["import { Node, Register, ListenerDefinitions, EventDispatcher } from '@io-gui/core'\n\nconst handlerFunction = (event: CustomEvent) => {\n  (event.target as unknown as MockNode1).eventStack.push(`handlerFunction ${event.detail}`)\n}\n\n@Register\nclass MockNode1 extends Node {\n  eventStack: string[] = []\n  static get Listeners(): ListenerDefinitions {\n    return {\n      'event1': 'event1Handler',\n    }\n  }\n  event1Handler(event: CustomEvent) {\n    this.eventStack.push(`event1Handler ${event.detail}`)\n  }\n}\n\n@Register\nclass MockNode2 extends MockNode1 {\n  eventStack: string[] = []\n  static get Listeners(): ListenerDefinitions {\n    return {\n      'event2': ['event2Handler', {capture: true}],\n    }\n  }\n  event2Handler(event: CustomEvent) {\n    this.eventStack.push(`event2Handler ${event.detail}`)\n  }\n}\n\n@Register\nclass MockNode3 extends MockNode2 {\n  eventStack: string[] = []\n  static get Listeners(): ListenerDefinitions {\n    return {\n      'event1': 'event3Handler',\n      'event2': [handlerFunction, {passive: true}],\n      'event3': handlerFunction\n    }\n  }\n  event3Handler(event: CustomEvent) {\n    this.eventStack.push(`event3Handler ${event.detail}`)\n  }\n}\n\nclass TestDiv extends HTMLElement {\n  eventStack: string[] = []\n  event1Handler(event: CustomEvent) {\n    this.eventStack.push(`event1Handler ${event.detail}`)\n  }\n}\nwindow.customElements.define('test-div', TestDiv)\n\nexport default class {\n  run() {\n    describe('EventDispatcher', () => {\n      it('Should initialize with correct values', () => {\n        const node = new MockNode1()\n        let eventDispatcher = new EventDispatcher(node)\n        expect(eventDispatcher.node).to.be.equal(node)\n        expect(eventDispatcher.protoListeners).to.be.eql({event1:[[node.event1Handler]]})\n        expect(eventDispatcher.propListeners).to.be.eql({})\n        expect(eventDispatcher.addedListeners).to.be.eql({})\n        expect(eventDispatcher.nodeIsEventTarget).to.be.eql(false)\n      })\n      it('Should initialize listeners from ProtoChain', () => {\n        const node1 = new MockNode1()\n        let eventDispatcher = new EventDispatcher(node1)\n        expect(eventDispatcher.protoListeners).to.be.eql({\n          event1:[[node1.event1Handler]],\n        })\n        const node2 = new MockNode2()\n        eventDispatcher = new EventDispatcher(node2)\n        expect(eventDispatcher.protoListeners).to.be.eql({\n          event1:[[node1.event1Handler]],\n          event2:[[node2.event2Handler, {capture:true}]]\n        })\n        const node3 = new MockNode3()\n        eventDispatcher = new EventDispatcher(node3)\n        expect(eventDispatcher.protoListeners).to.be.eql({\n          event1:[[node3.event3Handler]],\n          event2:[[handlerFunction, {passive: true}]],\n          event3:[[handlerFunction]]\n        })\n      })\n      it('Should applyPropListeners() correctly', () => {\n        const node3 = new MockNode3()\n        let eventDispatcher = new EventDispatcher(node3)\n        const handler4 = () => {}\n        const handler5 = () => {}\n        eventDispatcher.applyPropListeners({'@event3': 'event3Handler', '@event4': handler4})\n        expect(eventDispatcher.propListeners).to.be.eql({\n          event3:[[node3.event3Handler]], event4:[[handler4]]\n        })\n        eventDispatcher.applyPropListeners({'@event5': ['event3Handler'], '@event6': [handler4]})\n        expect(eventDispatcher.propListeners).to.be.eql({\n          event5:[[node3.event3Handler]], event6:[[handler4]]\n        })\n        eventDispatcher.applyPropListeners({'@event7': [node3.event3Handler, {capture: true}], '@event8': [handler5, {capture: true}]})\n        expect(eventDispatcher.propListeners).to.be.eql({\n          event7:[[node3.event3Handler, {capture:true}]], event8:[[handler5, {capture:true}]]\n        })\n        eventDispatcher.applyPropListeners({})\n        expect(eventDispatcher.propListeners).to.be.eql({})\n      })\n      it('Should add/remove listeners correctly', () => {\n        const node2 = new MockNode2()\n        let eventDispatcher = new EventDispatcher(node2)\n        const listener1 = () => {}\n        const listener2 = () => {}\n        eventDispatcher.addEventListener('event1', listener1)\n        eventDispatcher.addEventListener('event1', listener2, {capture: true})\n        expect(eventDispatcher.addedListeners).to.be.eql({\n          event1:[[listener1],[listener2, {capture:true}]]\n        })\n        eventDispatcher.removeEventListener('event1', listener1)\n        expect(eventDispatcher.addedListeners).to.be.eql({\n          event1:[[listener2, {capture:true}]]\n        })\n        eventDispatcher.removeEventListener('event1')\n        expect(eventDispatcher.addedListeners).to.be.eql({})\n      })\n      it('Should not add listeners if already added', () => {\n        const node2 = new MockNode2()\n        let eventDispatcher = new EventDispatcher(node2)\n        const listener1 = () => {}\n        const listener2 = () => {}\n        eventDispatcher.addEventListener('event1', listener1)\n        eventDispatcher.addEventListener('event1', listener1)\n        eventDispatcher.addEventListener('event1', listener2, {capture: true})\n        expect(eventDispatcher.addedListeners).to.be.eql({\n          event1:[[listener1],[listener2, {capture:true}]]\n        })\n      })\n      it('Should remove correct listener', () => {\n        const node2 = new MockNode2()\n        let eventDispatcher = new EventDispatcher(node2)\n        const listener1 = () => {}\n        const listener2 = () => {}\n        eventDispatcher.addEventListener('event1', listener1)\n        eventDispatcher.addEventListener('event1', listener2, {capture: true})\n        eventDispatcher.removeEventListener('event1', listener2)\n        expect(eventDispatcher.addedListeners).to.be.eql({\n          event1:[[listener1]]\n        })\n        eventDispatcher.removeEventListener('event1', listener1)\n        expect(eventDispatcher.addedListeners).to.be.eql({})\n      })\n      it('Should dispatch added events with correct payloads', () => {\n        const node3 = new MockNode3()\n        let eventDispatcher = new EventDispatcher(node3)\n        const handler4 = (event: CustomEvent) => {\n          (event.target as unknown as MockNode3).eventStack.push(`handler4 ${event.detail}`)\n        }\n        const handler5 = (event: CustomEvent) => {\n          (event.target as unknown as MockNode3).eventStack.push(`handler5 ${event.detail}`)\n        }\n        eventDispatcher.applyPropListeners({'@event3': 'event3Handler', '@event4': handler4})\n        eventDispatcher.addEventListener('event5', handler5)\n        eventDispatcher.dispatchEvent('event1', 1)\n        eventDispatcher.dispatchEvent('event2', 2)\n        eventDispatcher.dispatchEvent('event3', 3)\n        eventDispatcher.dispatchEvent('event4', 4)\n        eventDispatcher.dispatchEvent('event5', 5)\n        expect(node3.eventStack).to.be.eql(['event3Handler 1', 'handlerFunction 2', 'handlerFunction 3', 'event3Handler 3', 'handler4 4', 'handler5 5'])\n\n        node3.eventStack = []\n        eventDispatcher.applyPropListeners({'@event4': handler4})\n        eventDispatcher.removeEventListener('event5', handler5)\n        eventDispatcher.dispatchEvent('event1', 1)\n        eventDispatcher.dispatchEvent('event2', 2)\n        eventDispatcher.dispatchEvent('event3', 3)\n        eventDispatcher.dispatchEvent('event4', 4)\n        eventDispatcher.dispatchEvent('event5', 5)\n        expect(node3.eventStack).to.be.eql(['event3Handler 1', 'handlerFunction 2', 'handlerFunction 3', 'handler4 4'])\n      })\n      it('Should add/remove/dispatch events on HTML elements', () => {\n        const element = document.createElement('test-div') as TestDiv\n        const eventDispatcher = new EventDispatcher(element)\n        const handler2 = (event: CustomEvent) => {\n          (event.target as unknown as TestDiv).eventStack.push(`handler2 ${event.detail}`)\n        }\n        const handler3 = (event: CustomEvent) => {\n          (event.target as unknown as TestDiv).eventStack.push(`handler3 ${event.detail}`)\n        }\n        eventDispatcher.applyPropListeners({'@event1': 'event1Handler', '@event2': handler2})\n        eventDispatcher.addEventListener('event3', handler3)\n        element.dispatchEvent(new CustomEvent('event1', {detail: 1}))\n        element.dispatchEvent(new CustomEvent('event2', {detail: 2}))\n        element.dispatchEvent(new CustomEvent('event3', {detail: 3}))\n        expect(element.eventStack).to.be.eql(['event1Handler 1', 'handler2 2', 'handler3 3'])\n\n        element.eventStack = []\n        eventDispatcher.applyPropListeners({})\n        eventDispatcher.removeEventListener('event3', handler3)\n        element.dispatchEvent(new CustomEvent('event1', {detail: 1}))\n        element.dispatchEvent(new CustomEvent('event2', {detail: 2}))\n        element.dispatchEvent(new CustomEvent('event3', {detail: 3}))\n        expect(element.eventStack).to.be.eql([])\n      })\n      it('Should bubble events if specified', () => {\n        const element = document.createElement('test-div') as TestDiv\n        element.id = 'element'\n        const parentElement = document.createElement('test-div') as TestDiv\n        parentElement.id = 'parentElement'\n        parentElement.appendChild(element)\n        const eventDispatcher = new EventDispatcher(element)\n        const parentEventDispatcher = new EventDispatcher(parentElement)\n        const handler2 = function(this: TestDiv, event: CustomEvent) {\n          this.eventStack.push(`handler2 ${event.detail}`)\n        }\n        eventDispatcher.applyPropListeners({'@event1': 'event1Handler'})\n        eventDispatcher.addEventListener('event2', handler2.bind(element))\n        parentEventDispatcher.applyPropListeners({'@event1': 'event1Handler'})\n        parentEventDispatcher.addEventListener('event2', handler2.bind(parentElement))\n\n        eventDispatcher.dispatchEvent('event1', 1, false)\n        eventDispatcher.dispatchEvent('event2', 2, false)\n        expect(element.eventStack).to.be.eql(['event1Handler 1', 'handler2 2'])\n        expect(parentElement.eventStack).to.be.eql([])\n\n        element.eventStack = []\n        parentElement.eventStack = []\n        eventDispatcher.dispatchEvent('event1', 1, true)\n        eventDispatcher.dispatchEvent('event2', 2, true)\n        expect(element.eventStack).to.be.eql(['event1Handler 1', 'handler2 2'])\n        expect(parentElement.eventStack).to.be.eql(['event1Handler 1', 'handler2 2'])\n      })\n      it('Should emit event from specified target', () => {\n        const element = document.createElement('div')\n        const eventDispatcher = new EventDispatcher(element)\n\n        const element2 = document.createElement('test-div') as TestDiv\n        const eventDispatcher2 = new EventDispatcher(element2)\n        eventDispatcher2.applyPropListeners({'@event1': 'event1Handler'})\n\n        let path = null\n        let target = null\n        eventDispatcher2.addEventListener('event1', (event: CustomEvent) => {\n          path = event.composedPath()\n          target = event.target\n        })\n\n        eventDispatcher.dispatchEvent('event1', 1, false, element2)\n        expect(element2.eventStack).to.be.eql(['event1Handler 1'])\n        expect(path).to.be.eql([element2])\n        expect(target).to.be.eql(element2)\n      })\n      it('Should dispose correctly', () => {\n        const node = new MockNode1()\n        const eventDispatcher = new EventDispatcher(node)\n        eventDispatcher.dispose()\n        expect(eventDispatcher.node).to.be.equal(undefined)\n        expect(eventDispatcher.protoListeners).to.be.equal(undefined)\n        expect(eventDispatcher.propListeners).to.be.equal(undefined)\n        expect(eventDispatcher.addedListeners).to.be.equal(undefined)\n      })\n    })\n  }\n}"]}