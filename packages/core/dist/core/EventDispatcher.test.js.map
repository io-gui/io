{"version":3,"file":"EventDispatcher.test.js","sourceRoot":"","sources":["../../src/core/EventDispatcher.test.ts"],"names":[],"mappings":"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","sourcesContent":["import { describe, it, expect } from 'vitest'\nimport { ReactiveNode, Register, ListenerDefinitions, EventDispatcher, IoElement, ReactiveProperty } from '@io-gui/core'\n\nconst handlerFunction = (event: CustomEvent) => {\n  (event.target as unknown as MockNode1).eventStack.push(`handlerFunction ${event.detail}`)\n}\n\n@Register\nclass MockNode1 extends ReactiveNode {\n  eventStack: string[] = []\n  static get Listeners(): ListenerDefinitions {\n    return {\n      'event1': 'event1Handler',\n    }\n  }\n  event1Handler(event: CustomEvent) {\n    this.eventStack.push(`event1Handler ${event.detail}`)\n  }\n}\n\n@Register\nclass MockNode2 extends MockNode1 {\n  eventStack: string[] = []\n  static get Listeners(): ListenerDefinitions {\n    return {\n      'event2': ['event2Handler', {capture: true}],\n    }\n  }\n  event2Handler(event: CustomEvent) {\n    this.eventStack.push(`event2Handler ${event.detail}`)\n  }\n}\n\n@Register\nclass MockNode3 extends MockNode2 {\n  eventStack: string[] = []\n  static get Listeners(): ListenerDefinitions {\n    return {\n      'event1': 'event3Handler',\n      'event2': [handlerFunction, {passive: true}],\n      'event3': handlerFunction\n    }\n  }\n  event3Handler(event: CustomEvent) {\n    this.eventStack.push(`event3Handler ${event.detail}`)\n  }\n}\n\nclass TestDiv extends HTMLElement {\n  eventStack: string[] = []\n  event1Handler(event: CustomEvent) {\n    this.eventStack.push(`event1Handler ${event.detail}`)\n  }\n}\nwindow.customElements.define('test-div', TestDiv)\n\ndescribe('EventDispatcher', () => {\n  it('Should initialize with correct values', () => {\n    const node = new MockNode1()\n    const eventDispatcher = new EventDispatcher(node)\n    expect(eventDispatcher.node).toBe(node)\n    expect(eventDispatcher.protoListeners).toEqual({event1:[[node.event1Handler]]})\n    expect(eventDispatcher.propListeners).toEqual({})\n    expect(eventDispatcher.addedListeners).toEqual({})\n    expect(eventDispatcher.nodeIsEventTarget).toEqual(false)\n  })\n  it('Should initialize listeners from ProtoChain', () => {\n    const node1 = new MockNode1()\n    let eventDispatcher = new EventDispatcher(node1)\n    expect(eventDispatcher.protoListeners).toEqual({\n      event1:[[node1.event1Handler]],\n    })\n    const node2 = new MockNode2()\n    eventDispatcher = new EventDispatcher(node2)\n    expect(eventDispatcher.protoListeners).toEqual({\n      event1:[[node1.event1Handler]],\n      event2:[[node2.event2Handler, {capture:true}]]\n    })\n    const node3 = new MockNode3()\n    eventDispatcher = new EventDispatcher(node3)\n    expect(eventDispatcher.protoListeners).toEqual({\n      event1:[[node3.event3Handler]],\n      event2:[[handlerFunction, {passive: true}]],\n      event3:[[handlerFunction]]\n    })\n  })\n  it('Should applyPropListeners() correctly', () => {\n    const node3 = new MockNode3()\n    const eventDispatcher = new EventDispatcher(node3)\n    const handler4 = () => {}\n    const handler5 = () => {}\n    eventDispatcher.applyPropListeners({'@event3': 'event3Handler', '@event4': handler4})\n    expect(eventDispatcher.propListeners).toEqual({\n      event3:[[node3.event3Handler]], event4:[[handler4]]\n    })\n    eventDispatcher.applyPropListeners({'@event5': ['event3Handler'], '@event6': [handler4]})\n    expect(eventDispatcher.propListeners).toEqual({\n      event5:[[node3.event3Handler]], event6:[[handler4]]\n    })\n    eventDispatcher.applyPropListeners({'@event7': [node3.event3Handler, {capture: true}], '@event8': [handler5, {capture: true}]})\n    expect(eventDispatcher.propListeners).toEqual({\n      event7:[[node3.event3Handler, {capture:true}]], event8:[[handler5, {capture:true}]]\n    })\n    eventDispatcher.applyPropListeners({})\n    expect(eventDispatcher.propListeners).toEqual({})\n  })\n  it('Should add/remove listeners correctly', () => {\n    const node2 = new MockNode2()\n    const eventDispatcher = new EventDispatcher(node2)\n    const listener1 = () => {}\n    const listener2 = () => {}\n    eventDispatcher.addEventListener('event1', listener1)\n    eventDispatcher.addEventListener('event1', listener2, {capture: true})\n    expect(eventDispatcher.addedListeners).toEqual({\n      event1:[[listener1],[listener2, {capture:true}]]\n    })\n    eventDispatcher.removeEventListener('event1', listener1)\n    expect(eventDispatcher.addedListeners).toEqual({\n      event1:[[listener2, {capture:true}]]\n    })\n    eventDispatcher.removeEventListener('event1')\n    expect(eventDispatcher.addedListeners).toEqual({})\n  })\n  it('Should not add listeners if already added', () => {\n    const node2 = new MockNode2()\n    const eventDispatcher = new EventDispatcher(node2)\n    const listener1 = () => {}\n    const listener2 = () => {}\n    eventDispatcher.addEventListener('event1', listener1)\n    eventDispatcher.addEventListener('event1', listener1)\n    eventDispatcher.addEventListener('event1', listener2, {capture: true})\n    expect(eventDispatcher.addedListeners).toEqual({\n      event1:[[listener1],[listener2, {capture:true}]]\n    })\n  })\n  it('Should remove correct listener', () => {\n    const node2 = new MockNode2()\n    const eventDispatcher = new EventDispatcher(node2)\n    const listener1 = () => {}\n    const listener2 = () => {}\n    eventDispatcher.addEventListener('event1', listener1)\n    eventDispatcher.addEventListener('event1', listener2, {capture: true})\n    eventDispatcher.removeEventListener('event1', listener2)\n    expect(eventDispatcher.addedListeners).toEqual({\n      event1:[[listener1]]\n    })\n    eventDispatcher.removeEventListener('event1', listener1)\n    expect(eventDispatcher.addedListeners).toEqual({})\n  })\n  it('Should dispatch added events with correct payloads', () => {\n    const node3 = new MockNode3()\n    const eventDispatcher = new EventDispatcher(node3)\n    const handler4 = (event: CustomEvent) => {\n      (event.target as unknown as MockNode3).eventStack.push(`handler4 ${event.detail}`)\n    }\n    const handler5 = (event: CustomEvent) => {\n      (event.target as unknown as MockNode3).eventStack.push(`handler5 ${event.detail}`)\n    }\n    eventDispatcher.applyPropListeners({'@event3': 'event3Handler', '@event4': handler4})\n    eventDispatcher.addEventListener('event5', handler5)\n    eventDispatcher.dispatchEvent('event1', 1)\n    eventDispatcher.dispatchEvent('event2', 2)\n    eventDispatcher.dispatchEvent('event3', 3)\n    eventDispatcher.dispatchEvent('event4', 4)\n    eventDispatcher.dispatchEvent('event5', 5)\n    expect(node3.eventStack).toEqual(['event3Handler 1', 'handlerFunction 2', 'handlerFunction 3', 'event3Handler 3', 'handler4 4', 'handler5 5'])\n\n    node3.eventStack = []\n    eventDispatcher.applyPropListeners({'@event4': handler4})\n    eventDispatcher.removeEventListener('event5', handler5)\n    eventDispatcher.dispatchEvent('event1', 1)\n    eventDispatcher.dispatchEvent('event2', 2)\n    eventDispatcher.dispatchEvent('event3', 3)\n    eventDispatcher.dispatchEvent('event4', 4)\n    eventDispatcher.dispatchEvent('event5', 5)\n    expect(node3.eventStack).toEqual(['event3Handler 1', 'handlerFunction 2', 'handlerFunction 3', 'handler4 4'])\n  })\n  it('Should add/remove/dispatch events on HTML elements', () => {\n    const element = document.createElement('test-div') as TestDiv\n    const eventDispatcher = new EventDispatcher(element)\n    const handler2 = (event: CustomEvent) => {\n      (event.target as unknown as TestDiv).eventStack.push(`handler2 ${event.detail}`)\n    }\n    const handler3 = (event: CustomEvent) => {\n      (event.target as unknown as TestDiv).eventStack.push(`handler3 ${event.detail}`)\n    }\n    eventDispatcher.applyPropListeners({'@event1': 'event1Handler', '@event2': handler2})\n    eventDispatcher.addEventListener('event3', handler3)\n    element.dispatchEvent(new CustomEvent('event1', {detail: 1}))\n    element.dispatchEvent(new CustomEvent('event2', {detail: 2}))\n    element.dispatchEvent(new CustomEvent('event3', {detail: 3}))\n    expect(element.eventStack).toEqual(['event1Handler 1', 'handler2 2', 'handler3 3'])\n\n    element.eventStack = []\n    eventDispatcher.applyPropListeners({})\n    eventDispatcher.removeEventListener('event3', handler3)\n    element.dispatchEvent(new CustomEvent('event1', {detail: 1}))\n    element.dispatchEvent(new CustomEvent('event2', {detail: 2}))\n    element.dispatchEvent(new CustomEvent('event3', {detail: 3}))\n    expect(element.eventStack).toEqual([])\n  })\n  it('Should bubble events if specified', () => {\n    const element = document.createElement('test-div') as TestDiv\n    element.id = 'element'\n    const parentElement = document.createElement('test-div') as TestDiv\n    parentElement.id = 'parentElement'\n    parentElement.appendChild(element)\n    const eventDispatcher = new EventDispatcher(element)\n    const parentEventDispatcher = new EventDispatcher(parentElement)\n    const handler2 = function(this: TestDiv, event: CustomEvent) {\n      this.eventStack.push(`handler2 ${event.detail}`)\n    }\n    eventDispatcher.applyPropListeners({'@event1': 'event1Handler'})\n    eventDispatcher.addEventListener('event2', handler2.bind(element))\n    parentEventDispatcher.applyPropListeners({'@event1': 'event1Handler'})\n    parentEventDispatcher.addEventListener('event2', handler2.bind(parentElement))\n\n    eventDispatcher.dispatchEvent('event1', 1, false)\n    eventDispatcher.dispatchEvent('event2', 2, false)\n    expect(element.eventStack).toEqual(['event1Handler 1', 'handler2 2'])\n    expect(parentElement.eventStack).toEqual([])\n\n    element.eventStack = []\n    parentElement.eventStack = []\n    eventDispatcher.dispatchEvent('event1', 1, true)\n    eventDispatcher.dispatchEvent('event2', 2, true)\n    expect(element.eventStack).toEqual(['event1Handler 1', 'handler2 2'])\n    expect(parentElement.eventStack).toEqual(['event1Handler 1', 'handler2 2'])\n  })\n  it('Should emit event from specified target', () => {\n    const element = document.createElement('div')\n    const eventDispatcher = new EventDispatcher(element)\n\n    const element2 = document.createElement('test-div') as TestDiv\n    const eventDispatcher2 = new EventDispatcher(element2)\n    eventDispatcher2.applyPropListeners({'@event1': 'event1Handler'})\n\n    let path = null\n    let target = null\n    eventDispatcher2.addEventListener('event1', (event: CustomEvent) => {\n      path = event.composedPath()\n      target = event.target\n    })\n\n    eventDispatcher.dispatchEvent('event1', 1, false, element2)\n    expect(element2.eventStack).toEqual(['event1Handler 1'])\n    expect(path).toEqual([element2])\n    expect(target).toEqual(element2)\n  })\n  it('Should dispose correctly', () => {\n    const node = new MockNode1()\n    const eventDispatcher = new EventDispatcher(node)\n    eventDispatcher.dispose()\n    expect(eventDispatcher.node).toBe(undefined)\n    expect(eventDispatcher.protoListeners).toBe(undefined)\n    expect(eventDispatcher.propListeners).toBe(undefined)\n    expect(eventDispatcher.addedListeners).toBe(undefined)\n  })\n  it('Should not dispatch bubbling events to disposed parents', () => {\n    const parent = new MockNode1()\n    const child = new MockNode1()\n    child.addParent(parent)\n\n    const parentHandler = (event: CustomEvent) => {\n      parent.eventStack.push(`parentHandler ${event.detail}`)\n    }\n    const childHandler = (event: CustomEvent) => {\n      child.eventStack.push(`childHandler ${event.detail}`)\n    }\n\n    parent._eventDispatcher.addEventListener('test-event', parentHandler)\n    child._eventDispatcher.addEventListener('test-event', childHandler)\n\n    // Dispatch bubbling event - parent should receive it\n    child._eventDispatcher.dispatchEvent('test-event', 1, true)\n    expect(child.eventStack).toEqual(['childHandler 1'])\n    expect(parent.eventStack).toEqual(['parentHandler 1'])\n\n    // Reset stacks\n    child.eventStack = []\n    parent.eventStack = []\n\n    // Dispose the parent (simulates parent being removed from layout)\n    parent.dispose()\n\n    // Child still has parent in _parents array but parent is disposed\n    // Dispatch bubbling event - should not error and should not reach disposed parent\n    child._eventDispatcher.dispatchEvent('test-event', 2, true)\n    expect(child.eventStack).toEqual(['childHandler 2'])\n    // Parent should not have received event (disposed)\n    expect(parent.eventStack).toEqual([])\n  })\n  it('Should handle complex parent-child disposal scenarios', () => {\n    // Simulates IoSplit scenario: grandparent > parent > child\n    // Parent gets disposed when child moves to drawer\n    const grandparent = new MockNode1()\n    const parent = new MockNode1()\n    const child = new MockNode1()\n\n    parent.addParent(grandparent)\n    child.addParent(parent)\n\n    const stacks = { grandparent: [] as string[], parent: [] as string[], child: [] as string[] }\n\n    grandparent._eventDispatcher.addEventListener('bubble-event', () => {\n      stacks.grandparent.push('received')\n    })\n    parent._eventDispatcher.addEventListener('bubble-event', () => {\n      stacks.parent.push('received')\n    })\n    child._eventDispatcher.addEventListener('bubble-event', () => {\n      stacks.child.push('received')\n    })\n\n    // Normal bubbling works\n    child._eventDispatcher.dispatchEvent('bubble-event', null, true)\n    expect(stacks).toEqual({ grandparent: ['received'], parent: ['received'], child: ['received'] })\n\n    // Reset\n    stacks.grandparent = []\n    stacks.parent = []\n    stacks.child = []\n\n    // Dispose parent (middle of chain)\n    parent.dispose()\n\n    // Child dispatches - should reach child but skip disposed parent\n    // Grandparent won't receive because parent (the link) is disposed\n    child._eventDispatcher.dispatchEvent('bubble-event', null, true)\n    expect(stacks.child).toEqual(['received'])\n    expect(stacks.parent).toEqual([])  // Disposed\n    expect(stacks.grandparent).toEqual([])  // Not reachable (parent link broken)\n  })\n  it('Should bubble events from ReactiveNode to IoElement parent (cross-border bubbling)', () => {\n    // Create a ReactiveNode that will be a child\n    @Register\n    class ChildNode extends ReactiveNode {\n      eventStack: string[] = []\n      static get Listeners(): ListenerDefinitions {\n        return {\n          'cross-border-event': 'onCrossBorderEvent',\n        }\n      }\n      onCrossBorderEvent(event: CustomEvent) {\n        this.eventStack.push(`child ${event.detail}`)\n      }\n    }\n\n    // Create an IoElement that owns the ReactiveNode as a property\n    @Register\n    class ParentElement extends IoElement {\n      eventStack: string[] = []\n\n      @ReactiveProperty({type: ChildNode, init: null})\n      declare childNode: ChildNode\n\n      static get Listeners(): ListenerDefinitions {\n        return {\n          'cross-border-event': 'onCrossBorderEvent',\n        }\n      }\n      onCrossBorderEvent(event: CustomEvent) {\n        this.eventStack.push(`parent ${event.detail}`)\n      }\n    }\n\n    const parent = new ParentElement()\n    const child = new ChildNode()\n\n    // Assign the child node to the parent element's property\n    // This should call child.addParent(parent)\n    parent.childNode = child\n\n    // Verify the parent was added\n    expect(child._parents.includes(parent)).toBe(true)\n\n    // Dispatch a bubbling event from the child\n    child.dispatch('cross-border-event', 'test-data', true)\n\n    // The child should have received the event\n    expect(child.eventStack).toEqual(['child test-data'])\n\n    // The parent element should also have received the bubbling event\n    expect(parent.eventStack).toEqual(['parent test-data'])\n\n    // Clean up\n    parent.dispose()\n    child.dispose()\n  })\n})\n"]}