{"version":3,"file":"Queue.test.js","sourceRoot":"","sources":["../../src/core/Queue.test.ts"],"names":[],"mappings":"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","sourcesContent":["import { describe, it, expect } from 'vitest'\nimport { throttle, debounce, nextQueue, Node } from '@io-gui/core'\n\ndescribe('Queue', () => {\n  it('Should exectute twice throttled function once in the next frame', async () => {\n    let count = 0\n    const func = () => { count++ }\n    throttle(func)\n    throttle(func)\n    await nextQueue()\n    expect(count).toBe(1)\n    await nextQueue()\n    expect(count).toBe(1)\n  })\n  it('Should exectute throttled function with correct argument', async () => {\n    let arg = ''\n    const func = (a: string) => { arg = a }\n    throttle(func, 'first')\n    throttle(func, 'second')\n    expect(arg).toBe('')\n    await nextQueue()\n    expect(arg).toBe('second')\n    throttle(func, 'third')\n    throttle(func, 'fourth')\n    throttle(func, 'sixt')\n    await nextQueue()\n    expect(arg).toBe('sixt')\n  })\n  it('Should execute throttled function in the next frame if called multiple times', async () => {\n    let count = 0\n    const func = () => { count++ }\n    throttle(func)\n    throttle(func)\n    throttle(func)\n    throttle(func)\n    expect(count).toBe(0)\n    await nextQueue()\n    expect(count).toBe(1)\n    await nextQueue()\n    expect(count).toBe(1)\n  })\n  it('Should execute throttled function after specified delay', async () => {\n    let count = 0\n    const func = () => { count++ }\n    throttle(func, undefined, undefined, 10)\n    throttle(func, undefined, undefined, 10)\n    throttle(func, undefined, undefined, 10)\n    throttle(func, undefined, undefined, 10)\n    expect(count).toBe(0)\n    await nextQueue()\n    await nextQueue()\n    await nextQueue()\n    await nextQueue()\n    await nextQueue()\n    await nextQueue()\n    await nextQueue()\n    await nextQueue()\n    await nextQueue()\n    await nextQueue()\n    expect(count).toBe(1)\n    await nextQueue()\n    expect(count).toBe(1)\n  })\n  it('Should exectute debounced function in the next frame', async () => {\n    let count = 0\n    const func = () => { count++ }\n    debounce(func)\n    expect(count).toBe(0)\n    await nextQueue()\n    expect(count).toBe(1)\n  })\n  it('Should exectute debounced function with correct argument', async () => {\n    let arg = ''\n    const func = (a: string) => { arg = a }\n    debounce(func, 'first')\n    debounce(func, 'second')\n    await nextQueue()\n    expect(arg).toBe('second')\n    await nextQueue()\n    debounce(func, 'third')\n    debounce(func, 'fourth')\n    debounce(func, 'sixt')\n    await nextQueue()\n    expect(arg).toBe('sixt')\n  })\n  it('Should postpone debounced function execution if called multiple times before specified delay', async () => {\n    let count = 0\n    const func = () => { count++ }\n    debounce(func, undefined, undefined, 2)\n    expect(count).toBe(0)\n    await nextQueue()\n    debounce(func, undefined, undefined, 2)\n    expect(count).toBe(0)\n    await nextQueue()\n    debounce(func)\n    expect(count).toBe(0)\n    await nextQueue()\n    expect(count).toBe(1)\n  })\n  it('Should execute debounced function after specified delay', async () => {\n    let count = 0\n    const func = () => { count++ }\n    debounce(func, undefined, undefined, 10)\n    expect(count).toBe(0)\n    await nextQueue()\n    await nextQueue()\n    await nextQueue()\n    await nextQueue()\n    await nextQueue()\n    await nextQueue()\n    await nextQueue()\n    await nextQueue()\n    await nextQueue()\n    await nextQueue()\n    expect(count).toBe(1)\n  })\n  it('Should abort execution if node is disposed', async () => {\n    let count = 0\n    const func = () => { count++ }\n    const node = new Node()\n    debounce(func, undefined, node)\n    node.dispose()\n    await nextQueue()\n    expect(count).toBe(0)\n    throttle(func, undefined, node)\n    throttle(func, undefined, node)\n    await nextQueue()\n    expect(count).toBe(0)\n    await nextQueue()\n    expect(count).toBe(0)\n  })\n})\n"]}