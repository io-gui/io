{"version":3,"file":"VDOM.test.js","sourceRoot":"","sources":["../../src/vdom/VDOM.test.ts"],"names":[],"mappings":"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","sourcesContent":["import { describe, it, expect } from 'vitest'\nimport { Register, IoElement, applyNativeElementProps, constructElement, VDOMElement, div, span, ReactivePropertyDefinitions } from '@io-gui/core'\n\ndescribe('VDOM', () => {\n  it('Should construct an native DIV element', () => {\n    const element = constructElement(div())\n    expect(element).toBeDefined()\n    expect(element.localName).toBe('div')\n  })\n  it('Should apply native element properties to the native DIV element', () => {\n    const element = document.createElement('div')\n\n    applyNativeElementProps(element, {\n      tabIndex: 0,\n      contentEditable: true,\n      spellcheck: false,\n    })\n\n    expect(element.tabIndex).toBe(0)\n    expect(element.contentEditable).toBe('true')\n    expect(element.spellcheck).toBe(false)\n\n    expect(element.getAttribute('tabindex')).toBe('0')\n    expect(element.getAttribute('contenteditable')).toBe('true')\n    expect(element.getAttribute('spellcheck')).toBe('false')\n\n    applyNativeElementProps(element, {\n      tabIndex: undefined,\n      contentEditable: undefined,\n      spellcheck: undefined,\n    })\n\n    expect(element.tabIndex).toBe(-1)\n    expect(element.contentEditable).toBe('inherit')\n    expect(element.spellcheck).toBe(true)\n\n    expect(element.getAttribute('tabindex')).toBe(null)\n    expect(element.getAttribute('contenteditable')).toBe(null)\n    expect(element.getAttribute('spellcheck')).toBe(null)\n  })\n  it('Should reset properties to defaults if they are not in the props when the element is updated after initial applyNativeElementProps', () => {\n    const element = document.createElement('div')\n    applyNativeElementProps(element, {\n      tabIndex: 0,\n      contentEditable: true,\n      spellcheck: false,\n    })\n\n    expect(element.tabIndex).toBe(0)\n    expect(element.contentEditable).toBe('true')\n    expect(element.spellcheck).toBe(false)\n\n    expect(element.getAttribute('tabindex')).toBe('0')\n    expect(element.getAttribute('contenteditable')).toBe('true')\n    expect(element.getAttribute('spellcheck')).toBe('false')\n\n    applyNativeElementProps(element, {\n      tabIndex: 1,\n      contentEditable: undefined,\n      spellcheck: undefined,\n    })\n\n    expect(element.tabIndex).toBe(1)\n    expect(element.contentEditable).toBe('inherit')\n    expect(element.spellcheck).toBe(true)\n\n    expect(element.getAttribute('tabindex')).toBe('1')\n    expect(element.getAttribute('contenteditable')).toBe(null)\n    expect(element.getAttribute('spellcheck')).toBe(null)\n  })\n  it('Should clear text content when reusing element with undefined children', () => {\n    // This test verifies that when a span with text content is reused\n    // for a vDOM element with undefined children, the text content is cleared.\n    // Bug scenario: IoTab renders [span.drop-marker, span.label(\"Text\"), ...]\n    // When tab selection changes, positions shift and span.label becomes span.drop-marker\n    // The text content \"Text\" should be cleared but wasn't due to the bug.\n\n    @Register\n    class TestVDOMClearChildren extends IoElement {\n      static get ReactiveProperties(): ReactivePropertyDefinitions {\n        return {\n          showMarker: false,\n        }\n      }\n      declare showMarker: boolean\n      ready() {\n        this.changed()\n      }\n      changed() {\n        // Mimics IoTab render pattern where selected tab has a drop-marker span\n        // and all tabs have a label span. When showMarker changes, the first\n        // span switches between drop-marker (no children) and label (with text).\n        if (this.showMarker) {\n          this.render([\n            span({class: 'drop-marker'}),  // no children - should be empty\n            span({class: 'label'}, 'Label Text'),\n          ])\n        } else {\n          this.render([\n            span({class: 'label'}, 'Label Text'),\n          ])\n        }\n      }\n    }\n\n    const element = new TestVDOMClearChildren()\n    document.body.appendChild(element as unknown as HTMLElement)\n\n    // Initial render without marker - just the label span\n    expect(element.children.length).toBe(1)\n    expect(element.children[0].className).toBe('label')\n    expect(element.children[0].textContent).toBe('Label Text')\n\n    // Now show marker - first span should be drop-marker with NO text content\n    element.showMarker = true\n    expect(element.children.length).toBe(2)\n    expect(element.children[0].className).toBe('drop-marker')\n    // BUG: The drop-marker span inherited text content from the previous label span\n    // because it was reused (same tag 'span') and vChild.children was undefined\n    expect(element.children[0].textContent).toBe('')  // This should pass after fix\n    expect(element.children[1].className).toBe('label')\n    expect(element.children[1].textContent).toBe('Label Text')\n\n    element.remove()\n  })\n})\n\n/**\n * Tests for VDOM element reuse behavior.\n *\n * Bug description: When rendering the same VDom instances consecutively,\n * the virtual DOM may create multiple DOM element instances instead of\n * reusing existing ones. This specifically manifests when:\n * - A new VDom wrapper object is created each render\n * - But the wrapper references shared children arrays from a cached widget\n */\ndescribe('VDOM Element Reuse', () => {\n\n  it('Should reuse DOM elements when rendering the same VDom array consecutively', () => {\n    @Register\n    class TestReuseConsecutive1 extends IoElement {\n      renderWithVdom(vdom: any[]) {\n        this.render(vdom)\n      }\n    }\n\n    const element = new TestReuseConsecutive1()\n    document.body.appendChild(element as unknown as HTMLElement)\n\n    const vdom = [span({class: 'test-span'})]\n\n    // First render\n    element.renderWithVdom(vdom)\n    expect(element.children.length).toBe(1)\n    const firstRenderChild = element.children[0]\n\n    // Second render with same VDom array\n    element.renderWithVdom(vdom)\n    expect(element.children.length).toBe(1)\n    const secondRenderChild = element.children[0]\n\n    // DOM element should be the same instance (reused, not recreated)\n    expect(firstRenderChild).toBe(secondRenderChild)\n\n    element.remove()\n  })\n\n  it('Should reuse DOM elements when rendering the same VDom object instance in multiple positions', () => {\n    @Register\n    class TestReuseSameInstance1 extends IoElement {\n      renderWithVdom(vdom: any[]) {\n        this.render(vdom)\n      }\n    }\n\n    const element = new TestReuseSameInstance1()\n    document.body.appendChild(element as unknown as HTMLElement)\n\n    // Same VDom object instance used twice in the array\n    const sharedVdom = span({class: 'shared'})\n    const vdom = [sharedVdom, sharedVdom]\n\n    // First render - should create 2 separate DOM elements\n    element.renderWithVdom(vdom)\n    expect(element.children.length).toBe(2)\n    const firstChild1 = element.children[0]\n    const firstChild2 = element.children[1]\n\n    // Two different DOM elements should be created from the same VDom\n    expect(firstChild1).not.toBe(firstChild2)\n    expect(firstChild1.className).toBe('shared')\n    expect(firstChild2.className).toBe('shared')\n\n    // Second render with same array\n    element.renderWithVdom(vdom)\n    expect(element.children.length).toBe(2)\n    const secondChild1 = element.children[0]\n    const secondChild2 = element.children[1]\n\n    // Both DOM elements should be reused\n    expect(firstChild1).toBe(secondChild1)\n    expect(firstChild2).toBe(secondChild2)\n\n    element.remove()\n  })\n\n  /**\n   * This test mimics the IoPropertyEditor widget pattern where:\n   * 1. A widget VDom is cached\n   * 2. On each render, a NEW wrapper object is created\n   * 3. But the wrapper references the SAME children array from the cached widget\n   *\n   * Bug: This pattern causes multiple DOM instances to be created instead of reusing.\n   */\n  it('Should reuse elements when creating new VDom wrapper with shared children (widget pattern)', () => {\n    @Register\n    class TestWidgetPattern1 extends IoElement {\n      renderWithVdom(vdom: any[]) {\n        this.render(vdom)\n      }\n    }\n\n    const element = new TestWidgetPattern1()\n    document.body.appendChild(element as unknown as HTMLElement)\n\n    // Simulates the cached widget - this object is created once and reused\n    const cachedWidget: VDOMElement = {\n      tag: 'div',\n      props: { class: 'widget' },\n      children: [\n        { tag: 'span', props: { class: 'widget-child-1' } },\n        { tag: 'span', props: { class: 'widget-child-2' } },\n      ]\n    }\n\n    // First render - create a NEW wrapper object, but share children array\n    const widgetWithValue1 = {\n      tag: cachedWidget.tag,\n      props: Object.assign({ value: 'test-value-1' }, cachedWidget.props),\n      children: cachedWidget.children  // SAME children reference\n    }\n    element.renderWithVdom([widgetWithValue1])\n\n    expect(element.children.length).toBe(1)\n    const widgetDiv = element.children[0] as HTMLDivElement\n    expect(widgetDiv.className).toBe('widget')\n    expect(widgetDiv.children.length).toBe(2)\n\n    const child1 = widgetDiv.children[0]\n    const child2 = widgetDiv.children[1]\n    expect(child1.className).toBe('widget-child-1')\n    expect(child2.className).toBe('widget-child-2')\n\n    // Second render - create ANOTHER NEW wrapper object, but SAME children array\n    const widgetWithValue2 = {\n      tag: cachedWidget.tag,\n      props: Object.assign({ value: 'test-value-2' }, cachedWidget.props),\n      children: cachedWidget.children  // SAME children reference\n    }\n    element.renderWithVdom([widgetWithValue2])\n\n    expect(element.children.length).toBe(1)\n\n    const widgetDivAfter = element.children[0] as HTMLDivElement\n    expect(widgetDiv).toBe(widgetDivAfter)  // Parent should be reused\n\n    expect(widgetDivAfter.children.length).toBe(2)\n    const child1After = widgetDivAfter.children[0]\n    const child2After = widgetDivAfter.children[1]\n\n    // Children should also be reused\n    expect(child1).toBe(child1After)\n    expect(child2).toBe(child2After)\n\n    // Third render - still should reuse\n    const widgetWithValue3 = {\n      tag: cachedWidget.tag,\n      props: Object.assign({ value: 'test-value-3' }, cachedWidget.props),\n      children: cachedWidget.children\n    }\n    element.renderWithVdom([widgetWithValue3])\n\n    expect(element.children[0]).toBe(widgetDiv)\n    expect((element.children[0] as HTMLElement).children[0]).toBe(child1)\n    expect((element.children[0] as HTMLElement).children[1]).toBe(child2)\n\n    element.remove()\n  })\n\n  it('Should reuse nested DOM elements when parent VDom is rendered consecutively', () => {\n    @Register\n    class TestReuseNested1 extends IoElement {\n      renderWithVdom(vdom: any[]) {\n        this.render(vdom)\n      }\n    }\n\n    const element = new TestReuseNested1()\n    document.body.appendChild(element as unknown as HTMLElement)\n\n    const vdom = [\n      div({class: 'parent'}, [\n        span({class: 'child1'}),\n        span({class: 'child2'}),\n      ])\n    ]\n\n    // First render\n    element.renderWithVdom(vdom)\n    expect(element.children.length).toBe(1)\n    const parentDiv = element.children[0]\n    expect(parentDiv.children.length).toBe(2)\n    const child1 = parentDiv.children[0]\n    const child2 = parentDiv.children[1]\n\n    // Second render with same VDom\n    element.renderWithVdom(vdom)\n    expect(element.children.length).toBe(1)\n    const parentDiv2 = element.children[0]\n    expect(parentDiv2.children.length).toBe(2)\n    const child1After = parentDiv2.children[0]\n    const child2After = parentDiv2.children[1]\n\n    // All elements should be reused\n    expect(parentDiv).toBe(parentDiv2)\n    expect(child1).toBe(child1After)\n    expect(child2).toBe(child2After)\n\n    element.remove()\n  })\n\n  it('Should reuse elements when VDom array changes length and then returns to original', () => {\n    @Register\n    class TestReuseLengthChange1 extends IoElement {\n      renderWithVdom(vdom: any[]) {\n        this.render(vdom)\n      }\n    }\n\n    const element = new TestReuseLengthChange1()\n    document.body.appendChild(element as unknown as HTMLElement)\n\n    // Start with 2 elements\n    const vdom2 = [span({class: 'a'}), span({class: 'b'})]\n    element.renderWithVdom(vdom2)\n    expect(element.children.length).toBe(2)\n    const childA = element.children[0]\n    // childB captured for documentation but will be disposed when shrinking\n    void element.children[1]\n\n    // Shrink to 1 element\n    const vdom1 = [span({class: 'a'})]\n    element.renderWithVdom(vdom1)\n    expect(element.children.length).toBe(1)\n    expect(element.children[0]).toBe(childA) // First element should be reused\n\n    // Grow back to 2 elements\n    element.renderWithVdom(vdom2)\n    expect(element.children.length).toBe(2)\n    expect(element.children[0]).toBe(childA) // First element should still be reused\n    // Note: childB was disposed, so children[1] will be a new element\n\n    element.remove()\n  })\n\n  it('Should properly reuse elements when same VDom array is rendered in rapid succession', () => {\n    @Register\n    class TestReuseRapid1 extends IoElement {\n      renderCount = 0\n      renderWithVdom(vdom: any[]) {\n        this.renderCount++\n        this.render(vdom)\n      }\n    }\n\n    const element = new TestReuseRapid1()\n    document.body.appendChild(element as unknown as HTMLElement)\n\n    const vdom = [span({class: 'rapid'})]\n\n    // First render to establish baseline\n    element.renderWithVdom(vdom)\n    const firstChild = element.children[0]\n\n    // Rapid succession of renders with same VDom\n    for (let i = 0; i < 10; i++) {\n      element.renderWithVdom(vdom)\n    }\n\n    expect(element.renderCount).toBe(11)\n    expect(element.children.length).toBe(1)\n\n    // Element should still be the same instance\n    expect(element.children[0]).toBe(firstChild)\n\n    element.remove()\n  })\n\n  it('Should reuse elements when VDom props change but structure remains same', () => {\n    @Register\n    class TestReusePropsChange1 extends IoElement {\n      renderWithVdom(vdom: any[]) {\n        this.render(vdom)\n      }\n    }\n\n    const element = new TestReusePropsChange1()\n    document.body.appendChild(element as unknown as HTMLElement)\n\n    // First render\n    element.renderWithVdom([span({class: 'initial', title: 'first'})])\n    expect(element.children.length).toBe(1)\n    const child = element.children[0] as HTMLSpanElement\n    expect(child.className).toBe('initial')\n    expect(child.title).toBe('first')\n\n    // Same structure, different props - element should be reused\n    element.renderWithVdom([span({class: 'updated', title: 'second'})])\n    expect(element.children.length).toBe(1)\n    const childAfter = element.children[0] as HTMLSpanElement\n\n    // Same DOM element, updated props\n    expect(child).toBe(childAfter)\n    expect(childAfter.className).toBe('updated')\n    expect(childAfter.title).toBe('second')\n\n    element.remove()\n  })\n\n  /**\n   * This test specifically targets the bug where creating NEW VDom wrapper\n   * objects on each render (even with same children) causes duplicate instances.\n   */\n  it('Should NOT create duplicate elements when new VDom wrappers share same children array', () => {\n    @Register\n    class TestDuplicateBug1 extends IoElement {\n      renderWithVdom(vdom: any[]) {\n        this.render(vdom)\n      }\n    }\n\n    const element = new TestDuplicateBug1()\n    document.body.appendChild(element as unknown as HTMLElement)\n\n    // Shared children array (like widget.children in IoPropertyEditor)\n    const sharedChildren: VDOMElement[] = [\n      { tag: 'span', props: { class: 'shared-child' } }\n    ]\n\n    const instanceTracker: Element[] = []\n\n    // Helper to render with new wrapper\n    const renderNewWrapper = () => {\n      // Each render creates a NEW wrapper object (like widgetWithValue)\n      // but references the SAME children array\n      const newWrapper: VDOMElement = {\n        tag: 'div',\n        props: { class: 'wrapper' },\n        children: sharedChildren\n      }\n\n      element.renderWithVdom([newWrapper])\n\n      // Track all instances created\n      if (element.children[0]) {\n        const wrapperEl = element.children[0] as HTMLElement\n        if (wrapperEl.children[0] && !instanceTracker.includes(wrapperEl.children[0])) {\n          instanceTracker.push(wrapperEl.children[0])\n        }\n      }\n    }\n\n    // Initial render\n    renderNewWrapper()\n    expect(element.children.length).toBe(1)\n    expect((element.children[0] as HTMLElement).children.length).toBe(1)\n    expect(instanceTracker.length).toBe(1)\n    const originalChild = instanceTracker[0]\n\n    // Multiple renders - each creates new wrapper, same children\n    for (let i = 0; i < 5; i++) {\n      renderNewWrapper()\n    }\n\n    // BUG: If this fails, it means new DOM instances are being created\n    // when they should be reused\n    expect(instanceTracker.length).toBe(1)\n    expect((element.children[0] as HTMLElement).children[0]).toBe(originalChild)\n\n    element.remove()\n  })\n\n  /**\n   * This test uses IoElement children (custom elements), which is what\n   * IoPropertyEditor widgets typically are. The handling differs between\n   * IoElement and native elements in the traverse function.\n   */\n  it('Should reuse IoElement children when rendering widget pattern with custom elements', () => {\n    // Define a custom IoElement to use as widget\n    @Register\n    class TestWidgetElement1 extends IoElement {\n      static get ReactiveProperties(): ReactivePropertyDefinitions {\n        return {\n          value: null,\n        }\n      }\n      declare value: any\n      instanceId = Math.random()  // Unique ID to track instance identity\n    }\n\n    @Register\n    class TestParentWithWidget1 extends IoElement {\n      renderWithVdom(vdom: any[]) {\n        this.render(vdom)\n      }\n    }\n\n    const parent = new TestParentWithWidget1()\n    document.body.appendChild(parent as unknown as HTMLElement)\n\n    // Simulates the cached widget VDom (like what getEditorWidget returns)\n    const cachedWidgetVdom: VDOMElement = {\n      tag: 'test-widget-element1',\n      props: { class: 'widget' },\n      children: undefined  // IoElements manage their own children\n    }\n\n    // First render - create a NEW wrapper object (like widgetWithValue)\n    const widgetWithValue1: VDOMElement = {\n      tag: cachedWidgetVdom.tag,\n      props: Object.assign({ value: { foo: 'bar' } }, cachedWidgetVdom.props),\n      children: cachedWidgetVdom.children\n    }\n    parent.renderWithVdom([widgetWithValue1])\n\n    expect(parent.children.length).toBe(1)\n    const widget1 = parent.children[0] as TestWidgetElement1\n    expect(widget1.localName).toBe('test-widget-element1')\n    expect(widget1.value).toEqual({ foo: 'bar' })\n    const originalInstanceId = widget1.instanceId\n\n    // Second render - create ANOTHER NEW wrapper object, but same widget tag\n    const widgetWithValue2: VDOMElement = {\n      tag: cachedWidgetVdom.tag,\n      props: Object.assign({ value: { foo: 'baz' } }, cachedWidgetVdom.props),\n      children: cachedWidgetVdom.children\n    }\n    parent.renderWithVdom([widgetWithValue2])\n\n    expect(parent.children.length).toBe(1)\n    const widget2 = parent.children[0] as TestWidgetElement1\n\n    // BUG: If widget2.instanceId !== originalInstanceId, then a new instance\n    // was created instead of reusing the existing one\n    expect(widget2.instanceId).toBe(originalInstanceId)\n    expect(widget2.value).toEqual({ foo: 'baz' })  // Props should be updated\n\n    // Multiple renders\n    for (let i = 0; i < 5; i++) {\n      const widgetWithValueN: VDOMElement = {\n        tag: cachedWidgetVdom.tag,\n        props: Object.assign({ value: { count: i } }, cachedWidgetVdom.props),\n        children: cachedWidgetVdom.children\n      }\n      parent.renderWithVdom([widgetWithValueN])\n    }\n\n    expect(parent.children.length).toBe(1)\n    const widgetFinal = parent.children[0] as TestWidgetElement1\n    expect(widgetFinal.instanceId).toBe(originalInstanceId)\n\n    parent.remove()\n  })\n\n  /**\n   * Test the exact pattern from IoPropertyEditor where widget has children\n   * that are shared across renders.\n   */\n  it('Should reuse IoElement widget with nested native children', () => {\n    @Register\n    class TestWidgetWithChildren1 extends IoElement {\n      static get ReactiveProperties(): ReactivePropertyDefinitions {\n        return {\n          value: null,\n        }\n      }\n      declare value: any\n      instanceId = Math.random()\n    }\n\n    @Register\n    class TestParentWithNestedWidget1 extends IoElement {\n      renderWithVdom(vdom: any[]) {\n        this.render(vdom)\n      }\n    }\n\n    const parent = new TestParentWithNestedWidget1()\n    document.body.appendChild(parent as unknown as HTMLElement)\n\n    // Cached widget with children (like what getEditorWidget might return)\n    const sharedChildren: VDOMElement[] = [\n      { tag: 'span', props: { class: 'label' } },\n      { tag: 'input', props: { type: 'text' } },\n    ]\n\n    const cachedWidgetVdom: VDOMElement = {\n      tag: 'test-widget-with-children1',\n      props: { class: 'widget' },\n      children: sharedChildren\n    }\n\n    // First render\n    const widgetWithValue1: VDOMElement = {\n      tag: cachedWidgetVdom.tag,\n      props: Object.assign({ value: 'first' }, cachedWidgetVdom.props),\n      children: cachedWidgetVdom.children  // SAME children reference\n    }\n    parent.renderWithVdom([widgetWithValue1])\n\n    expect(parent.children.length).toBe(1)\n    const widget = parent.children[0] as TestWidgetWithChildren1\n    const originalInstanceId = widget.instanceId\n\n    // Second render - new wrapper, same children array\n    const widgetWithValue2: VDOMElement = {\n      tag: cachedWidgetVdom.tag,\n      props: Object.assign({ value: 'second' }, cachedWidgetVdom.props),\n      children: cachedWidgetVdom.children  // SAME children reference\n    }\n    parent.renderWithVdom([widgetWithValue2])\n\n    expect(parent.children.length).toBe(1)\n    const widgetAfter = parent.children[0] as TestWidgetWithChildren1\n\n    // Widget should be reused\n    expect(widgetAfter.instanceId).toBe(originalInstanceId)\n    expect(widgetAfter.value).toBe('second')\n\n    parent.remove()\n  })\n\n  /**\n   * Test that simulates the debounced render pattern in IoPropertyEditor\n   */\n  it('Should handle multiple debounced renders without creating duplicates', async () => {\n    @Register\n    class TestWidgetElement2 extends IoElement {\n      static get ReactiveProperties(): ReactivePropertyDefinitions {\n        return {\n          value: null,\n        }\n      }\n      declare value: any\n      instanceId = Math.random()\n    }\n\n    @Register\n    class TestDebouncedParent1 extends IoElement {\n      static get ReactiveProperties(): ReactivePropertyDefinitions {\n        return {\n          data: null,\n        }\n      }\n      declare data: any\n\n      // Simulates IoPropertyEditor's _widget property\n      private cachedWidget: VDOMElement = {\n        tag: 'test-widget-element2',\n        props: { class: 'cached-widget' },\n      }\n\n      renderWidget() {\n        // Simulates configureDebounced pattern\n        const widgetWithValue: VDOMElement = {\n          tag: this.cachedWidget.tag,\n          props: Object.assign({ value: this.data }, this.cachedWidget.props),\n          children: this.cachedWidget.children\n        }\n        this.render([widgetWithValue])\n      }\n    }\n\n    const parent = new TestDebouncedParent1()\n    document.body.appendChild(parent as unknown as HTMLElement)\n\n    // Initial render\n    parent.data = { count: 0 }\n    parent.renderWidget()\n\n    expect(parent.children.length).toBe(1)\n    const widget = parent.children[0] as TestWidgetElement2\n    const originalId = widget.instanceId\n\n    // Simulate rapid data changes that would trigger debounced renders\n    for (let i = 1; i <= 10; i++) {\n      parent.data = { count: i }\n      parent.renderWidget()\n    }\n\n    expect(parent.children.length).toBe(1)\n    const finalWidget = parent.children[0] as TestWidgetElement2\n\n    // Same instance should be reused throughout\n    expect(finalWidget.instanceId).toBe(originalId)\n    expect(finalWidget.value).toEqual({ count: 10 })\n\n    parent.remove()\n  })\n\n  /**\n   * Diagnostic test: Verify widget renders its own children during construction\n   */\n  it('DIAGNOSTIC: Widget should render children via ready() -> changed()', () => {\n    @Register\n    class TestDiagnosticWidget1 extends IoElement {\n      static get ReactiveProperties(): ReactivePropertyDefinitions {\n        return {\n          value: null,\n        }\n      }\n      declare value: any\n\n      ready() {\n        this.changed()\n      }\n\n      changed() {\n        this.render([\n          span({class: 'diag-child-1'}),\n          span({class: 'diag-child-2'}),\n        ])\n      }\n    }\n\n    // Create widget directly, not via parent\n    const widget = new TestDiagnosticWidget1()\n    document.body.appendChild(widget as unknown as HTMLElement)\n\n    // Widget should have 2 children from its changed() method\n    expect(widget.children.length).toBe(2)\n    expect(widget.children[0].className).toBe('diag-child-1')\n    expect(widget.children[1].className).toBe('diag-child-2')\n\n    widget.remove()\n  })\n\n  /**\n   * Test: Parent should NOT traverse IoElement children even when vChild.children is an array.\n   *\n   * Scenario:\n   * 1. IoElement widget renders its own children via ready() -> changed() -> render()\n   * 2. Parent renders widget with vChild.children = [] (empty array)\n   * 3. Parent's traverse should NOT override widget's internally-rendered children\n   */\n  it('Parent should NOT traverse IoElement children even when vChild.children is an array', () => {\n    // Widget that renders its own children via ready() -> changed()\n    @Register\n    class TestSelfRenderingWidget1 extends IoElement {\n      static get ReactiveProperties(): ReactivePropertyDefinitions {\n        return {\n          value: null,\n        }\n      }\n      declare value: any\n\n      ready() {\n        this.changed()\n      }\n\n      changed() {\n        // Widget renders its own children - this is standard IoElement pattern\n        this.render([\n          span({class: 'internal-child-1'}),\n          span({class: 'internal-child-2'}),\n        ])\n      }\n    }\n\n    @Register\n    class TestParentWithExplicitChildren1 extends IoElement {\n      renderWithVdom(vdom: any[]) {\n        this.render(vdom)\n      }\n    }\n\n    const parent = new TestParentWithExplicitChildren1()\n    document.body.appendChild(parent as unknown as HTMLElement)\n\n    // Parent renders widget WITH explicit children: [] (empty array)\n    // Note: tag must match the auto-generated name (hyphen before numbers)\n    const widgetVdom: VDOMElement = {\n      tag: 'test-self-rendering-widget-1',\n      props: { value: 'test' },\n      children: []  // Empty array should NOT override widget's children\n    }\n\n    parent.renderWithVdom([widgetVdom])\n\n    expect(parent.children.length).toBe(1)\n    const widget = parent.children[0] as TestSelfRenderingWidget1\n\n    // Widget should have 2 children (rendered by its changed() method)\n    expect(widget.children.length).toBe(2)\n    expect(widget.children[0].className).toBe('internal-child-1')\n    expect(widget.children[1].className).toBe('internal-child-2')\n\n    parent.remove()\n  })\n\n  /**\n   * Test: Parent should NOT override IoElement internal children with vChild.children array.\n   */\n  it('Parent should NOT override IoElement internal children with vChild.children array', () => {\n    @Register\n    class TestSelfRenderingWidget2 extends IoElement {\n      static get ReactiveProperties(): ReactivePropertyDefinitions {\n        return {\n          value: null,\n        }\n      }\n      declare value: any\n\n      ready() {\n        this.changed()\n      }\n\n      changed() {\n        // Widget renders 3 children internally\n        this.render([\n          span({class: 'widget-child-a'}),\n          span({class: 'widget-child-b'}),\n          span({class: 'widget-child-c'}),\n        ])\n      }\n    }\n\n    @Register\n    class TestParentWithMismatchedChildren1 extends IoElement {\n      renderWithVdom(vdom: any[]) {\n        this.render(vdom)\n      }\n    }\n\n    const parent = new TestParentWithMismatchedChildren1()\n    document.body.appendChild(parent as unknown as HTMLElement)\n\n    // Parent renders widget with DIFFERENT children array\n    // This simulates a misconfigured widget registration\n    // Note: tag must match the auto-generated name (hyphen before numbers)\n    const widgetVdom: VDOMElement = {\n      tag: 'test-self-rendering-widget-2',  // <-- hyphen before 2\n      props: { value: 'test' },\n      children: [\n        { tag: 'div', props: { class: 'external-child' } }  // Different from what widget renders!\n      ]\n    }\n\n    parent.renderWithVdom([widgetVdom])\n\n    expect(parent.children.length).toBe(1)\n    const widget = parent.children[0] as TestSelfRenderingWidget2\n\n    // The widget's internal children should take precedence\n    // because IoElements manage their own children\n    // BUG: If this fails, parent's traverse is overriding widget's children\n    expect(widget.children.length).toBe(3)  // Widget renders 3 children\n    expect(widget.children[0].className).toBe('widget-child-a')\n    expect(widget.children[1].className).toBe('widget-child-b')\n    expect(widget.children[2].className).toBe('widget-child-c')\n\n    parent.remove()\n  })\n})\n"]}