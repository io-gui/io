const e=function(e,t){return"number"==typeof e&&isNaN(e)&&"number"==typeof t&&isNaN(t)};class t{node;property;targets=[];targetProperties=/* @__PURE__ */new WeakMap;constructor(e,t){e._isNode||e._isIoElement||console.warn("Source node is not a Node or IoElement instance!"),e._reactiveProperties.has(t)||console.warn(`Source node does not have a reactive property "${t}"!`),this.node=e,this.property=t,this.onSourceChanged=this.onSourceChanged.bind(this),this.onTargetChanged=this.onTargetChanged.bind(this),this.node.addEventListener(`${this.property}-changed`,this.onSourceChanged)}set value(e){this.node[this.property]=e}get value(){return this.node[this.property]}addTarget(e,t){const o=this.getTargetProperties(e);if(e._isNode||e._isIoElement||console.warn("Target node is not a Node or IoElement instance!"),e._reactiveProperties.has(t)||console.warn(`Target node does not have a reactive property "${t}"!`),-1!==o.indexOf(t)&&console.error(`Target property "${t}" already added!`),-1===this.targets.indexOf(e)&&this.targets.push(e),-1===o.indexOf(t)){o.push(t);const r=e._reactiveProperties.get(t);r.binding&&r.binding!==this&&(console.warn("Improper usage detected!"),console.info("Target property is already a target of another binding. Undinding previous binding!"),r.binding.removeTarget(e,t)),r.binding=this;{const e=this.node._reactiveProperties.get(this.property),o=void 0!==e.value&&void 0!==r.value&&typeof e.value!=typeof r.value,s=void 0!==e.type&&void 0!==r.type&&(i=e.type,n=r.type,!(i===n||"function"==typeof i&&"function"==typeof n&&(i instanceof n||n instanceof i)));(o||s)&&(console.warn(`Source property "${this.property}" does not match type of target property "${t}"!`),console.info(`Source "${this.property}" value: ${e.value} type: ${e.type} typeof: ${typeof e.value}`),console.info(`Target "${t}" value: ${r.value} type: ${r.type} typeof: ${typeof r.value}`))}e.addEventListener(`${t}-changed`,this.onTargetChanged),e.setProperty(t,this.value,!0)}var i,n}removeTarget(e,t){const o=this.getTargetProperties(e);if(t){const i=o.indexOf(t);-1===i&&console.error("Target property not found!"),o.splice(i,1);const n=e._reactiveProperties.get(t);n.binding!==this&&console.error("Target property has a different binding!"),n.binding=void 0,e.removeEventListener(`${t}-changed`,this.onTargetChanged)}else{for(let t=o.length;t--;){const i=o[t],n=e._reactiveProperties.get(i);n.binding!==this&&console.error("Target property has a different binding!"),n.binding=void 0,e.removeEventListener(`${i}-changed`,this.onTargetChanged)}o.length=0}0===o.length&&this.targets.splice(this.targets.indexOf(e),1)}onTargetChanged(t){-1===this.targets.indexOf(t.target)&&console.error("onTargetChanged() should never fire if target is not accounted for!");const o=this.value,i=t.detail.value;if(o!==i){if(e(i,o))return;this.node[this.property]=i}}onSourceChanged(t){t.target!==this.node&&console.error("onSourceChanged() should always originate form source node!");const o=t.detail.value;for(let i=this.targets.length;i--;){const t=this.targets[i],n=this.getTargetProperties(t);for(let i=n.length;i--;){const r=n[i],s=t[r];if(s!==o){if(e(o,s))continue;t[r]=o}}}}getTargetProperties(e){return this.targetProperties.has(e)||this.targetProperties.set(e,[]),this.targetProperties.get(e)}toJSON(){const e=[];for(let t=0;t<this.targets.length;t++){const o=this.targets[t],i=this.getTargetProperties(o);e[t]=i}return{node:this.node.constructor.name,property:this.property,targets:this.targets.map(e=>e.constructor.name),targetProperties:e}}dispose(){this.node.removeEventListener(`${this.property}-changed`,this.onSourceChanged);for(let e=this.targets.length;e--;)this.removeTarget(this.targets[e]);this.targets.length=0,delete this.node,delete this.property,delete this.targets,delete this.targetProperties}}class o{dispatchedChange=!1;dispatching=!1;constructor(e){this.changes=[],this.node=e,Object.defineProperty(this,"dispatch",{value:this.dispatch.bind(this),enumerable:!1,writable:!1,configurable:!1})}queue(e,t,o){t===o&&console.warn("ChangeQueue: queuing change with same value and oldValue!");const i=this.changes.findIndex(t=>t.property===e);-1===i?this.changes.push({property:e,value:t,oldValue:o}):t===this.changes[i].oldValue?this.changes.splice(i,1):this.changes[i].value=t}dispatch(){if(!0===this.dispatching)return void console.error("ChangeQueue: dispatching already in progress!");this.dispatching=!0;const e=[];for(;this.changes.length;){const t=this.changes[0];this.changes.splice(0,1);const o=t.property;t.value!==t.oldValue&&(this.dispatchedChange=!0,this.node[o+"Changed"]&&this.node[o+"Changed"](t),this.node.dispatch(o+"-changed",t),e.push(o))}this.dispatchedChange&&(this.node.changed(),this.node._isNode&&this.node.dispatchMutation(this.node,e)),this.dispatchedChange=!1,this.dispatching=!1}dispose(){this.changes.length=0,delete this.node,delete this.changes}}const i=e=>Array.isArray(e)?e:[e],n=["capture","passive"],r=(e,t)=>{const o=t[0],i=t[1];if("string"!=typeof o&&"function"!=typeof o&&console.error("listenerFromDefinition: Listener must be a function or method name"),i)if("object"!=typeof i)console.error("listenerFromDefinition: Listener options must be an object");else{const e=Object.keys(i).filter(e=>!n.includes(e));e.length>0&&console.error(`listenerFromDefinition: Invalid listener options: ${e.join(", ")}`)}"string"!=typeof o||o in e||console.error(`listenerFromDefinition: Method "${o}" not found on node`);const r="string"==typeof o?e[o]:o;return i?[r,i]:[r]};class s{node;nodeIsEventTarget;protoListeners={};propListeners={};addedListeners={};constructor(e){this.node=e,this.nodeIsEventTarget=e instanceof EventTarget,this.setProtoListeners(e)}setProtoListeners(e){for(const t in e._protochain?.listeners){for(let o=0;o<e._protochain.listeners[t].length;o++){const i=r(e,e._protochain.listeners[t][o]);this.protoListeners[t]=[i]}if(this.nodeIsEventTarget&&this.protoListeners[t]){const e=this.protoListeners[t][0];EventTarget.prototype.addEventListener.call(this.node,t,e[0],e[1])}}}applyPropListeners(e){const t={};for(const n in e){if(!n.startsWith("@"))continue;const o=n.slice(1),s=i(e[n]),a=r(this.node,s);t[o]=[a]}const o=this.propListeners;for(const i in o)if(!t[i]){if(this.nodeIsEventTarget){const e=o[i][0];EventTarget.prototype.removeEventListener.call(this.node,i,e[0],e[1])}delete o[i]}for(const i in t){if(this.nodeIsEventTarget){const e=t[i][0];if(o[i]){const t=o[i][0];(t!==e||e[1]&&JSON.stringify(t[1])!==JSON.stringify(e[1]))&&EventTarget.prototype.removeEventListener.call(this.node,i,t[0],t[1])}EventTarget.prototype.addEventListener.call(this.node,i,e[0],e[1])}o[i]=t[i]}}addEventListener(e,t,o){if("function"!=typeof t&&console.error("EventDispatcher.addEventListener: Invalid listener type - must be a function"),o)if("object"!=typeof o)console.error("EventDispatcher.addEventListener: Invalid listener options type - must be an object");else{const e=Object.keys(o).filter(e=>!n.includes(e));e.length>0&&console.warn(`EventDispatcher.addEventListener: Invalid listener options: ${e.join(", ")}`)}this.addedListeners[e]||(this.addedListeners[e]=[]);if(-1!==this.addedListeners[e].findIndex(e=>e[0]===t))return void console.warn(`EventDispatcher.addEventListener: Listener for '${e}' event already added`,this.node);const i=o?[t,o]:[t];this.addedListeners[e].push(i),this.nodeIsEventTarget&&EventTarget.prototype.addEventListener.call(this.node,e,t,o)}removeEventListener(e,t,o){if(t&&"function"!=typeof t&&console.error("EventDispatcher.removeEventListener: Invalid listener type!"),o)if("object"!=typeof o)console.error("EventDispatcher.removeEventListener: Invalid listener options type - must be an object");else{const e=Object.keys(o).filter(e=>!n.includes(e));e.length>0&&console.warn(`EventDispatcher.removeEventListener: Invalid listener options: ${e.join(", ")}`)}if(this.addedListeners[e]||console.error(`EventDispatcher.removeEventListener: Listener ${e} not found!`),this.addedListeners[e]){if(t){const i=this.addedListeners[e].findIndex(e=>e[0]===t);-1===i&&console.error(`EventDispatcher.removeEventListener: Listener ${e} not found!`),-1!==i&&(this.addedListeners[e].splice(i,1),this.nodeIsEventTarget&&EventTarget.prototype.removeEventListener.call(this.node,e,t,o))}else{for(let t=0;t<this.addedListeners[e].length;t++)if(this.nodeIsEventTarget){const o=this.addedListeners[e][t];EventTarget.prototype.removeEventListener.call(this.node,e,o[0],o[1])}this.addedListeners[e].length=0}0===this.addedListeners[e].length&&delete this.addedListeners[e]}}dispatchEvent(e,t,o=!0,i=this.node,n=[]){if(n=[...n,i],i instanceof EventTarget)EventTarget.prototype.dispatchEvent.call(i,new CustomEvent(e,{detail:t,bubbles:o,composed:!0,cancelable:!0}));else{const r={detail:t,target:i,path:n};if(this.protoListeners[e])for(let t=0;t<this.protoListeners[e].length;t++){this.protoListeners[e][t][0].call(i,r)}if(this.propListeners[e]){this.propListeners[e].length>1&&console.error(`EventDispatcher.dispathEvent: PropListeners[${e}] array too long!`);this.propListeners[e][0][0].call(i,r)}if(this.addedListeners[e])for(let t=0;t<this.addedListeners[e].length;t++){this.addedListeners[e][t][0].call(i,r)}if(o)for(const s of i._parents)s._isNode&&s._eventDispatcher.dispatchEvent(e,t,o,s,n)}}dispose(){for(const e in this.protoListeners){if(this.nodeIsEventTarget)for(let t=0;t<this.protoListeners[e].length;t++){const o=this.protoListeners[e][t];EventTarget.prototype.removeEventListener.call(this.node,e,o[0],o[1])}this.protoListeners[e].length=0,delete this.protoListeners[e]}for(const e in this.propListeners){if(this.nodeIsEventTarget){const t=this.propListeners[e][0];EventTarget.prototype.removeEventListener.call(this.node,e,t[0],t[1])}this.propListeners[e].length=0,delete this.propListeners[e]}for(const e in this.addedListeners){if(this.nodeIsEventTarget)for(let t=this.addedListeners[e].length;t--;){const o=this.addedListeners[e][t];EventTarget.prototype.removeEventListener.call(this.node,e,o[0],o[1])}this.addedListeners[e].length=0,delete this.addedListeners[e]}delete this.node,delete this.protoListeners,delete this.propListeners,delete this.addedListeners}}class a extends Array{constructor(e,...t){super(...t),this.node=e,this.itemMutated=this.itemMutated.bind(this),this.dispatchMutation=this.dispatchMutation.bind(this),e._isNode||e._isIoElement||console.error("NodeArray constructor called with non-node!");const o=this,i=new Proxy(this,{get(e,t){if("symbol"==typeof t)return e[t];const o=Number(t);return!isNaN(o)&&o>=0?e[o]:e[t]},set(e,t,i){if("length"===t){if(!o._isInternalOperation){const t=e.length,n=Number(i);if(n<t)for(let i=n;i<t;i++){const t=e[i];t._isNode&&(t.removeEventListener("io-object-mutation",o.itemMutated),t.removeParent(o.node))}else if(n>t)return console.warn("NodeArray: cannot extend array with empty slots"),!0}return e[t]=i,o._isInternalOperation||o.dispatchMutation(),!0}const n=Number(t);if(!isNaN(n)&&n>=0){const r=e[n];return void 0!==r&&r._isNode&&!o._isInternalOperation&&(r.removeEventListener("io-object-mutation",o.itemMutated),r.removeParent(o.node)),e[t]=i,i._isNode&&!o._isInternalOperation&&(i.addEventListener("io-object-mutation",o.itemMutated),i.addParent(o.node)),o._isInternalOperation||o.dispatchMutation(),!0}return e[t]=i,!0}});return Object.defineProperty(this,"proxy",{value:i,enumerable:!1,configurable:!1}),i}_isInternalOperation=!1;static get[Symbol.species](){return Array}withInternalOperation(e){this._isInternalOperation=!0;try{return e()}finally{this._isInternalOperation=!1}}splice(e,t,...o){return this.withInternalOperation(()=>{for(let o=e;o<e+t;o++){const e=this[o];e._isNode&&(e.removeEventListener("io-object-mutation",this.itemMutated),e.removeParent(this.node))}const i=super.splice(e,t,...o);for(let t=e;t<e+o.length;t++){const e=this[t];e._isNode&&(e.addEventListener("io-object-mutation",this.itemMutated),e.addParent(this.node))}return(t||o.length)&&this.dispatchMutation(),i})}push(...e){return this.withInternalOperation(()=>{const t=super.push(...e);for(const o of e)o._isNode&&(o.addEventListener("io-object-mutation",this.itemMutated),o.addParent(this.node));return e.length&&this.dispatchMutation(),t})}unshift(...e){return this.withInternalOperation(()=>{const t=super.unshift(...e);for(const o of e)o._isNode&&(o.addEventListener("io-object-mutation",this.itemMutated),o.addParent(this.node));return e.length&&this.dispatchMutation(),t})}pop(){return this.withInternalOperation(()=>{const e=super.pop();return void 0!==e&&e._isNode&&(e.removeEventListener("io-object-mutation",this.itemMutated),e.removeParent(this.node)),void 0!==e&&this.dispatchMutation(),e})}shift(){return this.withInternalOperation(()=>{const e=super.shift();return void 0!==e&&e._isNode&&(e.removeEventListener("io-object-mutation",this.itemMutated),e.removeParent(this.node)),void 0!==e&&this.dispatchMutation(),e})}reverse(){return this.withInternalOperation(()=>{const e=super.reverse();return e.length&&this.dispatchMutation(),e})}sort(e){return this.withInternalOperation(()=>{const t=super.sort(e);return t.length&&this.dispatchMutation(),t})}fill(){return console.warn("NodeArray: fill is not supported"),this}copyWithin(){return console.warn("NodeArray: copyWithin is not supported"),this}itemMutated(e){this.node.dispatch("io-object-mutation",{object:this.proxy},!1,window)}dispatchMutation(){this.node.dispatch("io-object-mutation",{object:this.proxy},!1,window)}}class l{constructor(e){if(null==e)this.value=e;else if("function"==typeof e)this.type=e;else if(e instanceof t)this.value=e.value,this.binding=e;else if(e&&e.constructor===Object){const o=e;Object.hasOwn(o,"value")&&(this.value=o.value),Object.hasOwn(o,"type")&&(this.type=o.type),o.binding instanceof t&&(this.binding=o.binding,this.value=this.binding.value),Object.hasOwn(o,"reflect")&&(this.reflect=o.reflect),Object.hasOwn(o,"init")&&(this.init=o.init)}else e&&e.constructor===Object||(this.value=e)}assign(e){Object.hasOwn(e,"value")&&(this.value=e.value),Object.hasOwn(e,"type")&&(this.type=e.type),Object.hasOwn(e,"reflect")&&(this.reflect=e.reflect),Object.hasOwn(e,"init")&&(this.init=e.init),Object.hasOwn(e,"binding")&&(this.binding=e.binding)}toJSON(){const e={value:this.value,type:this.type,reflect:this.reflect,init:this.init,binding:this.binding};return e.value&&"object"==typeof e.value&&(e.value=e.value.constructor.name),e.type&&"function"==typeof e.type&&(e.type=e.type.name),e}}function c(e,t){if("this"===e)return t;if("string"!=typeof e||!e.startsWith("this."))return e;{const o=e.split(".");let i=t;for(let e=1;e<o.length;e++)i=i[o[e]];if(i)return i;console.error(`ReactivePropertyInstance: Invalid path ${e}`)}}class h{value;type;binding;reflect=!1;init=void 0;constructor(e,o){if(Object.keys(o).forEach(e=>{-1===["value","type","reflect","init","binding"].indexOf(e)&&console.warn(`ReactiveProtoProperty: Invalid field ${e}`)}),void 0!==o.type&&"function"!=typeof o.type&&console.warn('Incorrect type for "type" field'),o.type===a&&"this"!==o.init&&console.warn('NodeArray property should be initialized with "this"'),void 0!==o.binding&&o.binding.constructor!==t&&console.warn('Incorrect type for "binding" field'),void 0!==o.reflect&&"boolean"!=typeof o.reflect&&console.error(`Invalid reflect field ${o.reflect}!`),this.value=o.value,this.type=o.type,this.binding=o.binding,"boolean"==typeof o.reflect&&(this.reflect=o.reflect),void 0!==o.init&&(this.init=o.init),this.binding instanceof t)this.value=this.binding.value;else if(void 0===this.value)if(this.type===Boolean)this.value=!1;else if(this.type===String)this.value="";else if(this.type===Number)this.value=0;else if("function"==typeof this.type&&void 0!==this.init)if(this.init instanceof Array){const t=this.init.map(t=>c(t,e));this.value=new this.type(...t)}else if(this.init instanceof Object){const t={};Object.keys(this.init).forEach(o=>{t[o]=c(this.init[o],e)}),this.value=new this.type(t)}else if(null===this.init)this.value=new this.type;else{const t=c(this.init,e);this.value=new this.type(t)}void 0!==this.value&&void 0!==this.init&&(-1!==[String,Number,Boolean].indexOf(this.type)?(this.type===Boolean&&"boolean"!=typeof this.value||this.type===Number&&"number"!=typeof this.value||this.type===String&&"string"!=typeof this.value)&&console.warn(`Property: Uninitialized value for type "${this.type.name}"!`):"function"!=typeof this.type||this.value instanceof this.type||console.warn(`Property: Incorrect value "${this.value}" for type "${this.type.name}"!`))}}const d=/* @__PURE__ */new WeakMap,p=/* @__PURE__ */new WeakMap;function u(e=void 0){return(t,o)=>{const i=t.constructor,n=d.get(i)||{};d.set(i,n),n[o]=e}}function f(e={}){return(t,o)=>{const i=t.constructor,n=p.get(i)||{};p.set(i,n),n[o]=e}}const g=/* @__PURE__ */new WeakMap;function v(e){return t=>{Object.defineProperty(t,"Style",{get:()=>e,configurable:!0,enumerable:!0}),g.set(t,e)}}class y{constructors=[];properties={};reactiveProperties={};listeners={};style="";handlers=[];constructor(e){let t=e.prototype;for(;t&&e!==HTMLElement&&e!==Object;)this.constructors.push(e),t=Object.getPrototypeOf(t),e=t.constructor;let o="",i="";for(let n=this.constructors.length;n--;)e=this.constructors[n],this.addPropertiesFromDecorators(e),i=this.addProperties(e.Properties,i),this.addReactivePropertiesFromDecorators(e),o=this.addReactiveProperties(e.ReactiveProperties,o),this.addListeners(e.Listeners),this.addStyle(e.Style),this.addStyleFromDecorators(e),this.addHandlers(e.prototype);this.validateReactiveProperties()}init(e){for(let t=this.handlers.length;t--;)Object.defineProperty(e,this.handlers[t],{value:e[this.handlers[t]].bind(e),writable:!0,configurable:!0});this.constructors[0]!==e.constructor&&console.error(`${e.constructor.name} not registered!\nUse @Register decorator before using ${e.constructor.name} class!`)}addPropertiesFromDecorators(e){const t=d.get(e);if(t)for(const o in t)this.properties[o]=t[o]}addProperties(e={},t=""){const o=JSON.stringify(e);if(o!==t){for(const t in e)this.properties[t]=e[t];t=o}return t}addReactivePropertiesFromDecorators(e){const t=p.get(e);if(t)for(const o in t){const e=new l(t[o]);this.reactiveProperties[o]||(this.reactiveProperties[o]=e),this.reactiveProperties[o].assign(e)}}addReactiveProperties(e={},t=""){const o={};for(const n in e)o[n]=new l(e[n]);const i=JSON.stringify(o);if(i!==t){for(const t in e)this.reactiveProperties[t]?this.reactiveProperties[t].assign(o[t]):this.reactiveProperties[t]=o[t];t=i}return t}addListeners(e){for(const t in e)if(e[t]){const o=i(e[t]),n=this.listeners[t]=this.listeners[t]||[],r=n.findIndex(e=>e[0]===o[0]);-1!==r?n[r][1]?n[r][1]=Object.assign(n[r][1],o[1]):o[1]&&(n[r][1]=o[1]):n.push(o)}}addStyle(e){e&&-1===this.style.indexOf(e)&&(this.style=this.style?this.style+"\n"+e:e)}addStyleFromDecorators(e){const t=g.get(e);t&&(this.style=this.style?this.style+"\n"+t:t)}addHandlers(e){const t=Object.getOwnPropertyNames(e);for(let o=0;o<t.length;o++){const i=t[o];if(/^on[A-Z]/.test(i)||/^_on[A-Z]/.test(i)||i.endsWith("Changed")||i.endsWith("Mutated")||"changed"===i){const t=Object.getOwnPropertyDescriptor(e,i);if(void 0===t||t.get||t.set)continue;"function"==typeof e[i]&&-1===this.handlers.indexOf(i)&&this.handlers.push(i)}}}validateReactiveProperties(){for(const e in this.reactiveProperties){const t=this.reactiveProperties[e];if(-1!==[String,Number,Boolean].indexOf(t.type))(t.type===Boolean&&void 0!==t.value&&"boolean"!=typeof t.value||t.type===Number&&void 0!==t.value&&"number"!=typeof t.value||t.type===String&&void 0!==t.value&&"string"!=typeof t.value)&&console.warn(`Reactive property "${e}" value "${t.value}" type for ${t.type.name} property!`);else{const o=null===t.value,i=void 0===t.value;"function"!=typeof t.type||t.value instanceof t.type||o||i||console.warn(`Reactive property "${e}" value "${t.value}" type for ${t.type.name} property!`)}}}}let b=0;const m=[],w=[],P=/* @__PURE__ */new WeakMap,_=/* @__PURE__ */new WeakMap;let E=m,x=P;async function S(){return new Promise(e=>{E.push(e),x.set(e,{arg:void 0,node:void 0,frame:b+1})})}function O(e,t,o,i=1){if(-1===E.indexOf(e)&&E.push(e),x.has(e)){x.get(e).arg=t}else x.set(e,{arg:t,node:o,frame:b+i})}function L(e,t,o,i=1){if(-1===E.indexOf(e)&&E.push(e),x.has(e)){const o=x.get(e);o.arg=t,o.frame=b+i}else x.set(e,{arg:t,node:o,frame:b+i})}requestAnimationFrame(function e(){b++;const t=E,o=x;E=E===m?w:m,x=x===P?_:P;for(let n=0;n<t.length;n++){const e=t[n],r=o.get(e);if(o.delete(e),void 0!==r){if(r.frame>b)-1===E.indexOf(e)&&E.push(e),x.has(e)||x.set(e,r);else if(!r.node?._disposed)try{void 0!==r.arg?e(r.arg):e()}catch(i){console.error(i)}}else console.warn(e)}t.length=0,requestAnimationFrame(e)});const C=/* @__PURE__ */new WeakMap,j=function(e,o){const i=C.get(e)||{};C.set(e,i);for(const n in o){const r=n,s=o[r];if(s instanceof t&&console.warn(`VDOM: Cannot set binding on "${e.localName}.${n}"`),Object.hasOwn(i,r)||(i[r]=e[r]),"style"===r)for(const t in s)e.style.setProperty(t,s[t]);else"class"===r?e.className=s:r.startsWith("data-")?void 0===s?e.removeAttribute(r):e.setAttribute(r,s):e[r]=void 0===s?i[r]:s;(void 0===s||s===i[r])&&e.removeAttribute(r)}for(const t in i){const n=t;Object.hasOwn(o,n)||(e[n]=i[n],e.removeAttribute(n))}e._eventDispatcher||Object.defineProperty(e,"_eventDispatcher",{enumerable:!1,configurable:!0,value:new s(e)}),e._eventDispatcher.applyPropListeners(o)},A=function(e){const t=e.props||{},o=window.customElements?window.customElements.get(e.tag):null;if(o&&o._isIoElement)return new o(t);const i=document.createElement(e.tag);return j(i,t),i},N=function(e){requestAnimationFrame(()=>{const t=Array.from(e.querySelectorAll("*")).concat([e]);for(let e=t.length;e--;)"function"==typeof t[e].dispose?t[e].dispose():t[e]._eventDispatcher&&(t[e]._eventDispatcher.dispose(),delete t[e]._eventDispatcher)})},k=function(e){const t={};for(let o=0;o<e.attributes.length;o++){const i=e.attributes[o].name,n=e.getAttribute(i);null!==n&&(t[i]=n)}return t},M=function(e){const t=[];for(let o=0;o<e.length;o++)t.push(I(e[o]));return t},I=function(e){return{tag:e.localName,props:k(e),children:e.children.length>0?M(e.children):e.textContent}};function R(e){e.prototype.Register(e)}const T={},$=new RegExp("(\\/\\*[\\s\\S]*?\\*\\/)","gi"),D=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi"),W=new RegExp("((@media [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi"),F=new RegExp("(( --[\\s\\S]*?): {([\\s\\S]*?)})","gi"),B=new RegExp("(@apply\\s.*?;)","gi"),U=new RegExp("((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})","gi");var z=Object.defineProperty,V=Object.getOwnPropertyDescriptor,H=(e,t,o,i)=>{for(var n,r=i>1?void 0:i?V(t,o):t,s=e.length-1;s>=0;s--)(n=e[s])&&(r=(i?n(t,o,r):n(r))||r);return i&&r&&z(t,o,r),r};const J=new ResizeObserver(e=>{for(const t of e)t.target.onResized()});let G=class extends HTMLElement{static get Style(){return"\n      :host {\n        display: block;\n        box-sizing: border-box;\n        -webkit-touch-callout: none;\n      }\n      :host[hidden] {\n        display: none;\n      }\n      --unselectable: {\n        user-select: none;\n        -webkit-user-select: none;\n        -webkit-touch-callout: none;\n        -webkit-tap-highlight-color: transparent;\n      }\n      --io_focus: {\n        border-color: var(--io_colorWhite) !important;\n        outline: var(--io_borderWidth) solid var(--io_borderColorBlue) !important;\n        z-index: 1;\n      }\n    "}static get ReactiveProperties(){return{}}static get Properties(){return{}}static get Listeners(){return{}}constructor(e={}){super(),this._protochain.init(this),Object.defineProperty(this,"_changeQueue",{enumerable:!1,configurable:!0,value:new o(this)}),Object.defineProperty(this,"_reactiveProperties",{enumerable:!1,configurable:!0,value:/* @__PURE__ */new Map}),Object.defineProperty(this,"_bindings",{enumerable:!1,configurable:!0,value:/* @__PURE__ */new Map}),Object.defineProperty(this,"_eventDispatcher",{enumerable:!1,configurable:!0,value:new s(this)}),Object.defineProperty(this,"_observedObjectProperties",{enumerable:!1,configurable:!0,value:[]}),Object.defineProperty(this,"_observedNodeProperties",{enumerable:!1,configurable:!0,value:[]}),this.init(),ee(this),te(this),this.applyProperties(e,!0),this.ready(),this.dispatchQueue()}applyProperties(e,o=!1){for(const i in e)if(this._reactiveProperties.has(i))this.setProperty(i,e[i],!0);else if("class"===i)this.className=e[i];else if("style"===i)for(const t in e[i])this.style[t]=e[i][t];else i.startsWith("data-")?void 0===e[i]?this.removeAttribute(i):this.setAttribute(i,e[i]):i.startsWith("@")||(e[i]instanceof t&&console.warn(`IoElement: Not a ReactiveProperty! Cannot set binding to "${i}" property on element "${this.localName}"`),this[i]=e[i],void 0===e[i]&&this.hasAttribute(i)&&this.removeAttribute(i));this._eventDispatcher.applyPropListeners(e),o||this.dispatchQueue()}setProperties(e){oe(this,e)}setProperty(e,t,o=!1){if(this._disposed)return;ie(this,e,t,o);this._reactiveProperties.get(e).reflect&&this.setAttribute(e.toLowerCase(),t)}init(){}ready(){}changed(){}queue(e,t,o){this._changeQueue.queue(e,t,o)}dispatchQueue(e=!1){ne(this,e)}throttle(e,t,o=1){O(e,t,this,o)}debounce(e,t,o=1){L(e,t,this,o)}onPropertyMutated(e){return re(this,e)}dispatchMutation(e=this,t=[]){e._isNode||e._isIoElement?this.dispatch("io-object-mutation",{object:e,properties:t}):this.dispatch("io-object-mutation",{object:e,properties:t},!1,window)}bind(e){return le(this,e)}unbind(e){ce(this,e)}addEventListener(e,t,o){this._disposed||this._eventDispatcher.addEventListener(e,t,o)}removeEventListener(e,t,o){this._disposed||this._eventDispatcher.removeEventListener(e,t,o)}dispatch(e,t=void 0,o=!1,i){this._disposed||this._eventDispatcher.dispatchEvent(e,t,o,i)}dispose(){he(this)}connectedCallback(){"function"==typeof this.onResized&&J.observe(this)}disconnectedCallback(){"function"==typeof this.onResized&&J.unobserve(this)}render(e,t,o){t=t||this;const i=e.filter(e=>null!==e);this.$={},this.traverse(i,t,o)}traverse(e,t,o){const i=t.children;for(;i.length>e.length;){const e=i[i.length-1];t.removeChild(e),o||N(e)}for(let n=0;n<i.length;n++){const r=i[n];if(r.localName!==e[n].tag||o){const i=r,s=A(e[n]);t.insertBefore(s,i),t.removeChild(i),o||N(i)}else r.removeAttribute("className"),r.removeAttribute("style"),e[n].props&&(r._isIoElement?r.applyProperties(e[n].props):j(r,e[n].props))}if(i.length<e.length){const o=document.createDocumentFragment();for(let t=i.length;t<e.length;t++){const i=A(e[t]);o.appendChild(i)}t.appendChild(o)}for(let n=0;n<e.length;n++){const t=e[n],r=i[n];if(t.props?.id&&(void 0!==this.$[t.props.id]&&console.warn("IoElement: Duplicate id in template."),this.$[t.props.id]=r),void 0!==t.children)if("string"==typeof t.children)this._flattenTextNode(r),r._textNode.nodeValue=String(t.children);else if(t.children instanceof Array){const e=t.children.filter(e=>null!==e);this.traverse(e,r,o)}}}_flattenTextNode(e){if(0===e.childNodes.length&&e.appendChild(document.createTextNode("")),"#text"!==e.childNodes[0].nodeName&&(e.innerHTML="",e.appendChild(document.createTextNode(""))),e._textNode=e.childNodes[0],e.childNodes.length>1){const t=e.textContent;for(let o=e.childNodes.length;o--;)0!==o&&e.removeChild(e.childNodes[o]);e._textNode.nodeValue=t}}setAttribute(e,t){!0===t?HTMLElement.prototype.setAttribute.call(this,e,""):!1===t||""===t?this.removeAttribute(e):"string"!=typeof t&&"number"!=typeof t||this.getAttribute(e)!==String(t)&&HTMLElement.prototype.setAttribute.call(this,e,String(t))}toVDOM(){return I(this)}Register(e){Object.defineProperty(e.prototype,"_protochain",{value:new y(e)});const t=e.name.replace(/([a-z])([A-Z,0-9])/g,"$1-$2").toLowerCase();Object.defineProperty(e,"localName",{value:t}),Object.defineProperty(e.prototype,"localName",{value:t}),Object.defineProperty(e,"_isIoElement",{enumerable:!1,value:!0,writable:!1}),Object.defineProperty(e.prototype,"_isIoElement",{enumerable:!1,value:!0,writable:!1}),Object.defineProperty(window,e.name,{value:e}),window.customElements.define(t,e),function(e,t){let o="";const i=t.match(F);if(i)for(let s=0;s<i.length;s++){const e=i[s].split(": {"),t=e[0].replace(" --","--"),n=e[1].replace(/}/g,"").trim().replace(/^ +/gm,"");T[t]=n,o+=i[s].replace(" --",".").replace(": {"," {")}const n=(t=t.replace(F,"")).match(B);if(n)for(let s=0;s<n.length;s++){const e=n[s].split("@apply ")[1].replace(";","");T[e]?t=t.replace(n[s],T[e]):console.warn("IoElement: cound not find mixin:",e)}{let o=t;o=o.replace($,""),o=o.replace(D,""),o=o.replace(W,"");const i=o.match(U);i&&i.forEach(t=>{(t=t.trim()).startsWith(":host")||(console.warn(e+': CSS Selector not prefixed with ":host"! This will cause style leakage!'),console.warn(t))})}t=o+t.replace(new RegExp(":host","g"),e);const r=document.createElement("style");r.innerHTML=t,r.setAttribute("id","io-style-"+e.replace("io-","")),document.head.appendChild(r)}(t,e.prototype._protochain.style),Object.defineProperty(e,"vConstructor",{value:function(e,o){const i={tag:t};return void 0!==e&&("string"==typeof e||e instanceof Array?i.children=e:"object"==typeof e&&(i.props=e),void 0!==o&&("string"==typeof o||o instanceof Array)&&(i.children=o)),i}})}};H([f({type:String,value:"immediate"})],G.prototype,"reactivity",2),H([u(Object)],G.prototype,"$",2),G=H([R],G);const Q=G.vConstructor;var q=Object.defineProperty,Y=Object.getOwnPropertyDescriptor,X=(e,t,o,i)=>{for(var n,r=i>1?void 0:i?Y(t,o):t,s=e.length-1;s>=0;s--)(n=e[s])&&(r=(i?n(t,o,r):n(r))||r);return i&&r&&q(t,o,r),r};const Z={active:/* @__PURE__ */new Set,disposed:/* @__PURE__ */new Set};let K=class extends Object{static get ReactiveProperties(){return{}}static get Properties(){return{}}static get Listeners(){return{}}constructor(e){super(),this._protochain.init(this),Object.defineProperty(this,"_changeQueue",{enumerable:!1,configurable:!0,value:new o(this)}),Object.defineProperty(this,"_reactiveProperties",{enumerable:!1,configurable:!0,value:/* @__PURE__ */new Map}),Object.defineProperty(this,"_bindings",{enumerable:!1,configurable:!0,value:/* @__PURE__ */new Map}),Object.defineProperty(this,"_eventDispatcher",{enumerable:!1,configurable:!0,value:new s(this)}),Object.defineProperty(this,"_observedObjectProperties",{enumerable:!1,configurable:!0,value:[]}),Object.defineProperty(this,"_observedNodeProperties",{enumerable:!1,configurable:!0,value:[]}),Object.defineProperty(this,"_parents",{enumerable:!1,configurable:!0,value:[]}),this.init(),ee(this),te(this),this.applyProperties("object"==typeof e?e:{},!0),Z.active.add(this),this.ready(),this.dispatchQueue()}applyProperties(e,o=!1){for(const i in e)this._reactiveProperties.has(i)?this.setProperty(i,e[i],!0):i.startsWith("@")||(this[i]=e[i],e[i]instanceof t&&console.warn(`IoElement: Not a ReactiveProperty! Cannot set binding to "${i}" property on "${this.constructor.name}"`));this._eventDispatcher.applyPropListeners(e),o||this.dispatchQueue()}setProperties(e){oe(this,e)}setProperty(e,t,o=!1){this._disposed||ie(this,e,t,o)}init(){}ready(){}changed(){}queue(e,t,o){this._changeQueue.queue(e,t,o)}dispatchQueue(e=!1){ne(this,e)}throttle(e,t,o=1){O(e,t,this,o)}debounce(e,t,o=1){L(e,t,this,o)}onPropertyMutated(e){return re(this,e)}dispatchMutation(e=this,t=[]){e._isNode||e._isIoElement?this.dispatch("io-object-mutation",{object:e,properties:t}):this.dispatch("io-object-mutation",{object:e,properties:t},!1,window)}bind(e){return le(this,e)}unbind(e){ce(this,e)}addEventListener(e,t,o){this._eventDispatcher.addEventListener(e,t,o)}removeEventListener(e,t,o){this._eventDispatcher.removeEventListener(e,t,o)}dispatch(e,t=void 0,o=!1,i){this._eventDispatcher.dispatchEvent(e,t,o,i)}addParent(e){e._isNode&&this._parents.push(e)}removeParent(e){e._isNode&&(this._parents.includes(e)||console.error("Node.removeParent(): Parent not found!",e),this._parents.splice(this._parents.indexOf(e),1))}dispose(){he(this),Z.active.delete(this),Z.disposed.add(this)}Register(e){Object.defineProperty(e,"_isNode",{enumerable:!1,value:!0,writable:!1}),Object.defineProperty(e.prototype,"_isNode",{enumerable:!1,value:!0,writable:!1}),Object.defineProperty(e,"_isIoElement",{enumerable:!1,value:!1,writable:!1}),Object.defineProperty(e.prototype,"_isIoElement",{enumerable:!1,value:!1,writable:!1}),Object.defineProperty(e.prototype,"_protochain",{value:new y(e)})}};function ee(e){for(const t in e._protochain.reactiveProperties){Object.defineProperty(e,t,{get:function(){return e._reactiveProperties.get(t).value},set:function(o){e.setProperty(t,o)},configurable:!0,enumerable:!0});const o=new h(e,e._protochain.reactiveProperties[t]);e._reactiveProperties.set(t,o),o.binding&&o.binding.addTarget(e,t),se(e,t,o),ae(e,t,o),e instanceof G&&o.reflect&&void 0!==o.value&&null!==o.value&&e.setAttribute(t,o.value)}}function te(e){for(const t in e._protochain.properties){let o=e._protochain.properties[t];"function"==typeof o?o=new o:o instanceof Array?o=o.slice():"object"==typeof o&&(o=Object.assign({},o)),e[t]=o}}function oe(e,t){for(const o in t)e._reactiveProperties.has(o)?e.setProperty(o,t[o],!0):console.warn(`Property "${o}" is not defined`,e);e.dispatchQueue()}function ie(e,o,i,n=!1){const r=e._reactiveProperties.get(o),s=r.value;if(i!==s){const l=i instanceof t?i:null;if(l){const t=r.binding;return l!==t?(t&&t.removeTarget(e,o),void l.addTarget(e,o)):void 0}if(se(e,o,r),r.type===a&&i.constructor===Array){const e=r.value;return i.some(e=>!e._isNode)&&console.error(`Node: Property "${o}" should be assigned as an Array of nodes!`,i),e.constructor!==a&&console.error(`Node: Property "${o}" should be initialized as a NodeArray!`,e),void e.withInternalOperation(()=>{e.length=0,e.push(...i),0===i.length&&e.dispatchMutation()})}if(r.value=i,i!==s){let t=!1,n=!1;e._reactiveProperties.forEach((e,r)=>{e.value===i&&r!==o&&(t=!0),e.value===s&&r!==o&&(n=!0)}),i?._isNode&&!t&&(e._observedNodeProperties.push(o),i.addEventListener("io-object-mutation",e.onPropertyMutated),i.addParent(e)),!s?._isNode||n||s._disposed||(e._observedNodeProperties.splice(e._observedNodeProperties.indexOf(o),1),s.removeEventListener("io-object-mutation",e.onPropertyMutated),s.removeParent(e))}r.type===String?"string"!=typeof i&&console.warn(`Wrong type of property "${o}". Value: "${i}". Expected type: ${r.type.name}`,e):r.type===Number?"number"!=typeof i&&console.warn(`Wrong type of property "${o}". Value: "${i}". Expected type: ${r.type.name}`,e):r.type===Boolean?"boolean"!=typeof i&&console.warn(`Wrong type of property "${o}". Value: "${i}". Expected type: ${r.type.name}`,e):r.type===Array?i instanceof Array||console.warn(`Wrong type of property "${o}". Value: "${i}". Expected type: ${r.type.name}`,e):r.type===Object?i instanceof Array&&console.warn(`Wrong type of property "${o}". Value: "${JSON.stringify(i)}". Expected type: ${r.type.name}`,e):r.type===a?(i instanceof a||console.error(`Wrong type of property "${o}". Value: "${i}". Expected type: ${r.type.name}`,e),i.some(e=>!e._isNode)&&console.error(`Wrong type of property "${o}". NodeArray items should be nodes!`,i)):"function"==typeof r.type&&(i instanceof r.type||console.warn(`Wrong type of property "${o}". Value: "${i}". Expected type: ${r.type.name}`,e)),s!==i&&(e.queue(o,i,s),e.dispatchQueue(n))}}function ne(e,t=!1){"debounced"===e.reactivity||t||e._changeQueue.dispatching?e.debounce(e._changeQueue.dispatch):"throttled"===e.reactivity?e.throttle(e._changeQueue.dispatch):"immediate"===e.reactivity&&e._changeQueue.dispatch(),-1===["immediate","throttled","debounced"].indexOf(e.reactivity)&&console.warn(`Node.dispatchQueue(): Invalid reactivity property value: "${e.reactivity}". Expected one of: "immediate", "throttled", "debounced".`)}function re(e,t){const o=t.detail.object;let i=!1;const n=[.../* @__PURE__ */new Set([...e._observedObjectProperties,...e._observedNodeProperties])];for(let r=0;r<n.length;r++){const s=n[r];if(e._reactiveProperties.get(s).value===o){const o=s+"Mutated";"function"==typeof e[o]&&e[o](t),i=!0}}return i}function se(e,t,o){var i;e._observedObjectProperties.includes(t)||"object"!=typeof(i=o.value)||null===i||i._isNode||(e._observedObjectProperties.push(t),1===e._observedObjectProperties.length&&window.addEventListener("io-object-mutation",e.onPropertyMutated))}function ae(e,t,o){if(o.value?._isNode){let i=!1;e._reactiveProperties.forEach((e,n)=>{e.value===o.value&&n!==t&&(i=!0)}),i||(e._observedNodeProperties.push(t),o.value.addEventListener("io-object-mutation",e.onPropertyMutated))}}function le(e,o){return e._reactiveProperties.has(o)||console.warn(`IoGUI Node: cannot bind to ${o} property. Does not exist!`),e._bindings.has(o)||e._bindings.set(o,new t(e,o)),e._bindings.get(o)}function ce(e,t){const o=e._bindings.get(t);o&&(o.dispose(),e._bindings.delete(t));const i=e._reactiveProperties.get(t);i?.binding?.removeTarget(e,t)}function he(e){if(e._disposed&&console.warn("Node.dispose(): Already disposed!",e.constructor.name),e._disposed)return;e._bindings.forEach((t,o)=>{t.dispose(),e._bindings.delete(o)}),delete e._bindings,e._observedObjectProperties.length&&(window.removeEventListener("io-object-mutation",e.onPropertyMutated),e._observedObjectProperties.length=0,delete e._observedObjectProperties),delete e._protochain,e._changeQueue.dispose(),delete e._changeQueue;const t=[];e._reactiveProperties.forEach((o,i)=>{o.binding?.removeTarget(e,i),!o.value?._isNode||t.includes(o.value)||o.value._disposed||(o.value.removeEventListener("io-object-mutation",e.onPropertyMutated),t.push(o.value))});for(const o in e._protochain.properties)delete e[o];e._eventDispatcher.dispose(),delete e._eventDispatcher,delete e._reactiveProperties,e._parents&&(e._parents.length=0,delete e._parents),Object.defineProperty(e,"_disposed",{value:!0})}X([f({type:String,value:"immediate"})],K.prototype,"reactivity",2),K=X([R],K);var de=Object.defineProperty,pe=Object.getOwnPropertyDescriptor,ue=(e,t,o,i)=>{for(var n,r=i>1?void 0:i?pe(t,o):t,s=e.length-1;s>=0;s--)(n=e[s])&&(r=(i?n(t,o,r):n(r))||r);return i&&r&&de(t,o,r),r};const fe=new class{constructor(){Object.defineProperty(this,"store",{value:/* @__PURE__ */new Map}),Object.defineProperty(this,"warned",{value:!1,writable:!0})}get permitted(){try{return"true"===self.localStorage.getItem("Storage:user-permitted")}catch(e){console.warn("Storage: Cannot access localStorage. Check browser privacy settings!"),console.warn(e)}return!1}set permitted(e){try{e?(console.info("Storage: localStorage permission granted."),this.store.set("Storage:user-permitted",String(e)),this.store.forEach((e,t)=>{self.localStorage.setItem(t,String(e)),this.store.delete(t)})):(console.info("Storage: localStorage permission revoked."),self.localStorage.setItem("Storage:user-permitted",String(e)),new Map(Object.entries(self.localStorage)).forEach((e,t)=>{this.store.set(t,e)}),self.localStorage.clear())}catch(t){console.warn("Storage: Cannot access localStorage. Check browser privacy settings!"),console.warn(t)}}setItem(e,t){const o="object"==typeof t?JSON.stringify(t):String(t);"Storage:user-permitted"!==e?this.permitted?self.localStorage.setItem(e,o):(this.store.set(e,o),this.warned||this.permitted||(console.warn("Storage: localStorage permission not set."),this.warned=!0)):this.permitted="true"===t}getItem(e){return this.permitted?self.localStorage.getItem(e):this.store.has(e)?this.store.get(e):null}removeItem(e){if(this.permitted)return self.localStorage.removeItem(e);this.store.delete(e)}clear(){if(this.permitted)return self.localStorage.clear();this.store.clear()}},ge={local:/* @__PURE__ */new Map,hash:/* @__PURE__ */new Map};let ve={},ye=class extends K{constructor(e){if("object"!=typeof e?console.warn("Ivalid Storage arguments!"):("string"==typeof e.key&&e.key||console.warn("Ivalid Storage key!"),e.storage&&-1===["hash","local"].indexOf(e.storage)&&console.warn("Ivalid Storage storage!")),void 0===e.storage&&(e.storage="local"),ge[e.storage].has(e.key))return ge[e.storage].get(e.key);{let i,n;"object"==typeof e.value&&null!==e.value?(n=e.value.constructor,i=JSON.stringify(e.value)):i=e.value;let r=null;switch(e.storage){case"hash":t=e.key,ve=me(self.location.hash),r=ve[t]||null;break;case"local":r=fe.getItem("Storage:"+e.key)}if(null!==r)try{const t=JSON.parse(r);e.value=n?new n(t):t}catch(o){e.value=r,console.warn(o)}return super(e),this.valueMutatedDebounced=this.valueMutatedDebounced.bind(this),this.default=i,this.binding=this.bind("value"),this.binding.dispose=()=>{this.clearStorage()},"__proto__"!==e.key&&ge[e.storage].set(e.key,this),this}var t}dispose(){this.clearStorage(),super.dispose()}clearStorage(){switch(this.storage){case"hash":this.removeValueToHash();break;case"local":fe.removeItem("Storage:"+this.key)}const e=this.storage;ge[e].delete(this.key)}valueMutated(){this.debounce(this.valueMutatedDebounced)}valueMutatedDebounced(){this.valueChanged()}valueChanged(){switch(this.storage){case"hash":this.saveValueToHash();break;case"local":null===this.value||void 0===this.value||this.value===this.default&&"object"!=typeof this.value?fe.removeItem("Storage:"+this.key):fe.setItem("Storage:"+this.key,JSON.stringify(this.value))}}removeValueToHash(){ve=me(self.location.hash),delete ve[this.key];let e="";for(const t in ve)e+=t+"="+ve[t]+"&";e?(e=e.slice(0,-1),self.location.hash=e):history.replaceState("",document.title,self.location.pathname+self.location.search)}saveValueToHash(){ve=me(self.location.hash);const e=this.value;void 0!==e&&""!==e&&e!==this.default?"string"==typeof e?isNaN(e)?ve[this.key]=e:ve[this.key]='"'+e+'"':ve[this.key]=JSON.stringify(e):delete ve[this.key];let t="";for(const o in ve)t+=o+"="+ve[o]+"&";t?(t=t.slice(0,-1),self.location.hash=t):history.replaceState("",document.title,self.location.pathname+self.location.search)}};ue([f({value:"",type:String})],ye.prototype,"key",2),ue([f()],ye.prototype,"value",2),ue([f({value:"local",type:String})],ye.prototype,"storage",2),ye=ue([R],ye);const be=Object.assign(e=>new ye(e).binding,{permit(){fe.permitted=!0},unpermit(){fe.permitted=!1}});function me(e){return e.substring(1).split("&").reduce(function(e,t){const o=t.split("=");return o[0]&&o[1]&&(e[o[0]]=o[1].replace(/%22/g,'"').replace(/%20/g," ")),e},{})}function we(){ve=me(self.location.hash);for(const t in ve)if(ge.hash.has(t)){const o=ge.hash.get(t);try{o.value=JSON.parse(ve[t])}catch(e){o.value=ve[t],console.warn(e)}}for(const[t,o]of ge.hash.entries())void 0===ve[t]&&(o.value=o.default)}self.addEventListener("hashchange",we,!1),we();var Pe=Object.defineProperty,_e=Object.getOwnPropertyDescriptor,Ee=(e,t,o,i)=>{for(var n,r=i>1?void 0:i?_e(t,o):t,s=e.length-1;s>=0;s--)(n=e[s])&&(r=(i?n(t,o,r):n(r))||r);return i&&r&&Pe(t,o,r),r};const xe="v0.11",Se=document.createElement("style");Se.setAttribute("id","io-theme-variables-"+xe),document.head.appendChild(Se);class Oe{r;g;b;a;constructor(e,t,o,i){this.r=e,this.g=t,this.b=o,this.a=i}toCss(){const e=Math.floor(255*this.r),t=Math.floor(255*this.g),o=Math.floor(255*this.b);return void 0!==this.a&&1!==this.a?`rgba(${e}, ${t}, ${o}, ${this.a})`:`rgb(${e}, ${t}, ${o})`}}const Le={spacing:2,spacing2:0,spacing3:0,spacing5:0,spacing8:0,lineHeight:20,fontSize:14,fieldHeight:0,borderRadius:2,borderWidth:1,borderColor:new Oe(.2,.2,.2,1),borderColorLight:new Oe(.3,.3,.3,1),borderColorStrong:new Oe(.6,.6,.6,1),borderColorRed:new Oe(1,.35,.15,1),borderColorGreen:new Oe(.1,.7,.2,1),borderColorBlue:new Oe(.2,.4,.95,1),bgColor:new Oe(.85,.85,.85,1),bgColorStrong:new Oe(.9,.9,.9,1),bgColorLight:new Oe(.8,.8,.8,1),bgColorRed:new Oe(1,.5,.3,1),bgColorGreen:new Oe(.2,.9,.3,1),bgColorBlue:new Oe(.2,.5,.9,1),bgColorInput:new Oe(.95,.96,.95,1),color:new Oe(.25,.25,.2,1),colorStrong:new Oe(0,0,0,1),colorLight:new Oe(.6,.6,.6,1),colorRed:new Oe(1,.2,0,1),colorGreen:new Oe(0,.6,.1,1),colorBlue:new Oe(.2,.3,1,1),colorWhite:new Oe(1,1,1,1),colorInput:new Oe(0,.05,.02,1),gradientColorStart:new Oe(.9,.9,.9,1),gradientColorEnd:new Oe(.75,.75,.75,1),shadowColor:new Oe(0,0,0,.2)},Ce={spacing:2,spacing2:0,spacing3:0,spacing5:0,spacing8:0,lineHeight:20,fontSize:14,fieldHeight:0,borderRadius:2,borderWidth:1,borderColor:new Oe(.5,.5,.5,1),borderColorLight:new Oe(.3,.3,.3,1),borderColorStrong:new Oe(0,0,0,1),borderColorRed:new Oe(1,.2,0,1),borderColorBlue:new Oe(.4,.5,.9,1),borderColorGreen:new Oe(0,.6,.1,1),bgColor:new Oe(.2,.2,.2,1),bgColorStrong:new Oe(.15,.15,.15,1),bgColorLight:new Oe(.25,.25,.25,1),bgColorRed:new Oe(.7,.2,.1,1),bgColorGreen:new Oe(.1,.5,.2,1),bgColorBlue:new Oe(.2,.4,.8,1),bgColorInput:new Oe(.02,.02,.02,1),color:new Oe(.6,.6,.6,1),colorStrong:new Oe(.86,.86,.86,1),colorLight:new Oe(.3,.3,.3,1),colorRed:new Oe(1,.4,.4,1),colorGreen:new Oe(.4,.95,.3,1),colorBlue:new Oe(.6,.9,1,1),colorWhite:new Oe(1,1,1,1),colorInput:new Oe(.65,.7,.68,1),gradientColorStart:new Oe(.45,.45,.45,1),gradientColorEnd:new Oe(.2,.2,.2,1),shadowColor:new Oe(0,0,0,.2)},je=be({value:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",storage:"local",key:"theme-"+xe}),Ae=be({value:{},storage:"local",key:"io-themes-"+xe});let Ne=class extends K{static get ReactiveProperties(){const e={};for(const t in Le){const o=Le[t];e[t]=o instanceof Object?{value:o,type:Oe,init:null}:o}return e}ready(){this.registerTheme("light",Le),this.registerTheme("dark",Ce),this.themeIDChanged()}registerTheme(e,t){this.themeDefaults[e]=t,this.setProperty("themeDefaults",JSON.parse(JSON.stringify(this.themeDefaults)),!0),Ae.value[e]=Ae.value[e]||t,Ae.value=JSON.parse(JSON.stringify(Ae.value))}reset(){Ae.value=JSON.parse(JSON.stringify(this.themeDefaults)),this.themeIDChanged()}themeIDChanged(){const e=Ae.value[this.themeID];for(const t in e)e[t]instanceof Object&&'["r","g","b","a"]'===JSON.stringify(Object.keys(e[t]))&&(e[t]=new Oe(e[t].r,e[t].g,e[t].b,e[t].a));this.setProperties(e)}onPropertyMutated(e){return!!super.onPropertyMutated(e)&&(this.changed(),this.dispatchMutation(),!0)}fontSizeChanged(){this.lineHeight=Math.max(this.fontSize,this.lineHeight)}lineHeightChanged(){this.fontSize=Math.min(this.lineHeight,this.fontSize)}changed(){this.fieldHeight=this.lineHeight+2*(this.spacing+this.borderWidth),this.spacing2=2*this.spacing,this.spacing3=3*this.spacing,this.spacing5=5*this.spacing,this.spacing8=8*this.spacing;const e=Array.from(Object.keys(Le)).reduce((e,t)=>(Ae.value[this.themeID][t]=this[t],"object"==typeof this[t]?`${e}--io_${t}: ${this[t].toCss()};\n    `:`${e}--io_${t}: ${this[t]}px;\n    `),"");Se.innerHTML=`body {\n  ${e}\n}\n\n  body {\n    --io_border: var(--io_borderWidth) solid var(--io_borderColor);\n    --io_borderColorInset: var(--io_borderColorStrong) var(--io_borderColorLight) var(--io_borderColorLight) var(--io_borderColorStrong);\n    --io_borderColorOutset: var(--io_borderColorLight) var(--io_borderColorStrong) var(--io_borderColorStrong) var(--io_borderColorLight);\n    --io_gradientOutset: linear-gradient(180deg, var(--io_gradientColorStart), var(--io_gradientColorEnd) 100%);\n    --io_gradientInset: linear-gradient(0deg, var(--io_gradientColorStart), var(--io_gradientColorEnd) 150%);\n    --io_shadow: 2px 2px 6px var(--io_shadowColor), 1px 1px 1px var(--io_shadowColor);\n    --io_shadowInset: 0.75px 0.75px 2px inset var(--io_shadowColor);\n    --io_shadowOutset: 1px 1px 2px var(--io_shadowColor);\n  }\n`,this.debounce(this.onSaveTheme,void 0,60)}onSaveTheme(){Ae.value=JSON.parse(JSON.stringify(Ae.value))}};Ee([f({type:Object,init:null})],Ne.prototype,"themeDefaults",2),Ee([f({type:String,binding:je})],Ne.prototype,"themeID",2),Ee([f("debounced")],Ne.prototype,"reactivity",2),Ne=Ee([R],Ne);const ke=new Ne,Me={saturate:"\n  #ifndef saturate\n    #define saturate(v) clamp(v, 0., 1.)\n  #endif\n",translate:"\n  vec2 translate(vec2 samplePosition, vec2 xy){\n    return samplePosition - vec2(xy.x, xy.y);\n  }\n  vec2 translate(vec2 samplePosition, float x, float y){\n    return samplePosition - vec2(x, y);\n  }\n",circle:"\n  float circle(vec2 samplePosition, float radius){\n    return saturate((length(samplePosition) - radius) * uPxRatio);\n  }\n",rectangle:"\n  float rectangle(vec2 samplePosition, vec2 halfSize){\n    vec2 edgeDistance = abs(samplePosition) - halfSize;\n    float outside = length(max(edgeDistance, 0.));\n    float inside = min(max(edgeDistance.x, edgeDistance.y), 0.);\n    return 1.0 - saturate((outside + inside) * 1000000.0);\n  }\n",paintDerivativeGrid2D:"\n  float paintDerivativeGrid2D(vec2 samplePosition, vec2 gridWidth, float lineWidth) {\n    vec2 sp = samplePosition / gridWidth;\n    float fractx = abs(fract(sp.x - 0.5) - 0.5) * 2.0;\n    float fracty = abs(fract(sp.y - 0.5) - 0.5) * 2.0;\n\n    float sx = ((sp.x - 0.5) - 0.5) * 2.0;\n    float sy = ((sp.y - 0.5) - 0.5) * 2.0;\n    \n    float absx = abs(max(dFdx(sx), dFdy(sx)));\n    float absy = abs(max(dFdy(sy), dFdx(sy)));\n\n    float fadeX = 1.0 - dFdx(sx);\n    float fadeY = 1.0 - dFdy(sx);\n    if (fadeX <= 0.0 || fadeY <= 0.0) return 1.0;\n\n    float linex = fractx / absx - (0.5 * max(uPxRatio, 2.0) * lineWidth - 1.0) - 0.5;\n    float liney = fracty / absy - (0.5 * max(uPxRatio, 2.0) * lineWidth - 1.0) - 0.5;\n\n    return (1.0 - saturate(min(linex, liney)));\n  }\n",lineVertical:"\n  float lineVertical(vec2 samplePosition, float lineWidth) {\n    return (abs(samplePosition.x) * 2.0 > lineWidth) ? 0.0 : 1.0;\n  }\n",lineHorizontal:"\n  float lineHorizontal(vec2 samplePosition, float lineWidth) {\n    return (abs(samplePosition.y) * 2.0 > lineWidth) ? 0.0 : 1.0;\n  }\n",lineCross2d:"\n  float lineCross2d(vec2 samplePosition, float lineWidth) {\n    return (min(abs(samplePosition.x), abs(samplePosition.y)) * 2.0 > lineWidth) ? 0.0 : 1.0;\n  }\n",checker:"\n  float checker(vec2 samplePosition, float size) {\n    vec2 checkerPos = floor(samplePosition / size);\n    float checkerMask = mod(checkerPos.x + mod(checkerPos.y, 2.0), 2.0);\n    return checkerMask;\n  }\n",checkerX:"\n  float checkerX(vec2 samplePosition, float size) {\n    vec2 checkerPos = floor(samplePosition / size);\n    float checkerMask = mod(checkerPos.x, 2.0);\n    return checkerMask;\n  }\n",checkerY:"\n  float checkerY(vec2 samplePosition, float size) {\n    vec2 checkerPos = floor(samplePosition / size);\n    float checkerMask = mod(checkerPos.y, 2.0);\n    return checkerMask;\n  }\n",compose:"\n  vec3 compose(vec3 dst, vec4 src) {\n    return mix(dst, src.rgb, src.a);\n  }\n",hue2rgb:"\n  vec3 hue2rgb(float hue) {\n    hue = fract(hue);\n    float R = abs(hue * 6. - 3.) - 1.;\n    float G = 2. - abs(hue * 6. - 2.);\n    float B = 2. - abs(hue * 6. - 4.);\n    return saturate(vec3(R,G,B));\n  }\n",hsv2rgb:"\n  vec3 hsv2rgb(vec3 hsv) {\n    vec3 rgb = hue2rgb(hsv.r);\n    return ((rgb - 1.) * hsv.g + 1.) * hsv.b;\n  }\n",hsl2rgb:"\n  vec3 hsl2rgb(vec3 hsl) {\n    vec3 rgb = hue2rgb(hsl.x);\n    float C = (1. - abs(2. * hsl.z - 1.)) * hsl.y;\n    return (rgb - 0.5) * C + hsl.z;\n  }\n"};var Ie,Re,Te,$e,De,We=Object.defineProperty,Fe=Object.getOwnPropertyDescriptor,Be=e=>{throw TypeError(e)},Ue=(e,t,o,i)=>{for(var n,r=i>1?void 0:i?Fe(t,o):t,s=e.length-1;s>=0;s--)(n=e[s])&&(r=(i?n(t,o,r):n(r))||r);return i&&r&&We(t,o,r),r},ze=(e,t,o)=>t.has(e)||Be("Cannot "+o),Ve=(e,t,o)=>(ze(e,t,"read from private field"),o?o.call(e):t.get(e)),He=(e,t,o)=>t.has(e)?Be("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,o),Je=(e,t,o,i)=>(ze(e,t,"write to private field"),t.set(e,o),o);const Ge=document.createElement("canvas"),Qe=Ge.getContext("webgl",{antialias:!1,premultipliedAlpha:!1});Qe.getExtension("OES_standard_derivatives"),Qe.enable(Qe.BLEND),Qe.blendFunc(Qe.SRC_ALPHA,Qe.ONE_MINUS_SRC_ALPHA),Qe.disable(Qe.DEPTH_TEST);const qe=Qe.createBuffer();Qe.bindBuffer(Qe.ARRAY_BUFFER,qe),Qe.bufferData(Qe.ARRAY_BUFFER,new Float32Array([-1,1,0,-1,-1,0,1,-1,0,1,1,0]),Qe.STATIC_DRAW),Qe.bindBuffer(Qe.ARRAY_BUFFER,null);const Ye=Qe.createBuffer();Qe.bindBuffer(Qe.ARRAY_BUFFER,Ye),Qe.bufferData(Qe.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),Qe.STATIC_DRAW),Qe.bindBuffer(Qe.ARRAY_BUFFER,null);const Xe=Qe.createBuffer();Qe.bindBuffer(Qe.ELEMENT_ARRAY_BUFFER,Xe),Qe.bufferData(Qe.ELEMENT_ARRAY_BUFFER,new Uint16Array([3,2,1,3,1,0]),Qe.STATIC_DRAW),Qe.bindBuffer(Qe.ELEMENT_ARRAY_BUFFER,null),Qe.bindBuffer(Qe.ELEMENT_ARRAY_BUFFER,Xe);const Ze=/* @__PURE__ */new WeakMap;let Ke,et=class extends G{constructor(e={}){super(e),He(this,Ie,!1),He(this,Re),He(this,Te),He(this,$e),He(this,De),Je(this,Re,document.createElement("canvas")),this.appendChild(Ve(this,Re)),Je(this,Te,Ve(this,Re).getContext("2d",{alpha:!0})),Je(this,$e,{}),this.theme._reactiveProperties.forEach((e,t)=>{e.type===Oe&&(Ve(this,$e)["io_"+t]=4)}),this._reactiveProperties.forEach((e,t)=>{const o="u"+t.charAt(0).toUpperCase()+t.slice(1);e.type===Array&&(Ve(this,$e)[o]=e.value.length)}),Ze.has(this.constructor)?Je(this,De,Ze.get(this.constructor)):(Je(this,De,this.initShader()),Ze.set(this.constructor,Ve(this,De))),Qe.linkProgram(Ve(this,De));const t=Qe.getAttribLocation(Ve(this,De),"position");Qe.bindBuffer(Qe.ARRAY_BUFFER,qe),Qe.vertexAttribPointer(t,3,Qe.FLOAT,!1,0,0),Qe.enableVertexAttribArray(t);const o=Qe.getAttribLocation(Ve(this,De),"uv");Qe.bindBuffer(Qe.ARRAY_BUFFER,Ye),Qe.vertexAttribPointer(o,2,Qe.FLOAT,!1,0,0),Qe.enableVertexAttribArray(o),this.updateThemeUniforms()}static get Style(){return"\n      :host {\n        position: relative;\n        overflow: hidden !important;\n        @apply --unselectable;\n      }\n      :host > canvas {\n        position: absolute;\n        pointer-events: none;\n        image-rendering: pixelated;\n      }\n      :host > span {\n        position: absolute;\n        text-shadow: 0 0 3px var(--io_bgColorStrong), 0 0 3px var(--io_bgColorStrong), 0 0 3px var(--io_bgColorStrong);\n        left: 3px;\n        pointer-events: none;\n        color: var(--io_colorStrong);\n      }\n    "}static get Vert(){return"\n      attribute vec3 position;\n      attribute vec2 uv;\n      varying vec2 vUv;\n\n      void main(void) {\n        vUv = uv;\n        gl_Position = vec4(position, 1.0);\n      }\n\n"}static get GlUtils(){return`\n      ${Me.saturate}\n      ${Me.translate}\n      ${Me.circle}\n      ${Me.rectangle}\n      ${Me.paintDerivativeGrid2D}\n      ${Me.lineVertical}\n      ${Me.lineHorizontal}\n      ${Me.lineCross2d}\n      ${Me.checker}\n      ${Me.checkerX}\n      ${Me.checkerY}\n      ${Me.compose}\n    `}static get Frag(){return"\n      void main(void) {\n        gl_FragColor = io_color;\n      }\n\n"}initPropertyUniform(e,t){switch(t.value.constructor){case Boolean:return"uniform int "+e+";\n";case Number:return"uniform float "+e+";\n";case Array:return Ve(this,$e)[e]=t.value.length,"uniform vec"+t.value.length+" "+e+";\n";case Oe:return Ve(this,$e)[e]=4,"uniform vec4 "+e+";\n"}return""}initShader(){let e="\n    #extension GL_OES_standard_derivatives : enable\n    precision highp float;\n";this.theme._reactiveProperties.forEach((t,o)=>{e+=this.initPropertyUniform("io_"+o,t)}),e+="\n",this._reactiveProperties.forEach((t,o)=>{const i="u"+o.charAt(0).toUpperCase()+o.slice(1);e+=this.initPropertyUniform(i,t)}),e+=this.constructor.prototype._glUtils;const t=Qe.createShader(Qe.VERTEX_SHADER);if(Qe.shaderSource(t,this.constructor.Vert),Qe.compileShader(t),!Qe.getShaderParameter(t,Qe.COMPILE_STATUS)){const e=Qe.getShaderInfoLog(t);console.error("IoGl [Vertex Shader] "+this.localName+" error:"),console.warn(e)}const o=Qe.createShader(Qe.FRAGMENT_SHADER);if(Qe.shaderSource(o,e+this.constructor.Frag),Qe.compileShader(o),!Qe.getShaderParameter(o,Qe.COMPILE_STATUS)){const e=Qe.getShaderInfoLog(o);console.error("IoGl [Frament Shader] "+this.localName+" error:"),console.warn(e)}const i=Qe.createProgram();return Qe.attachShader(i,t),Qe.attachShader(i,o),i}onResized(){const e=window.devicePixelRatio,t=this.getBoundingClientRect(),o=window.getComputedStyle(this),i=parseInt(o.borderRightWidth)+parseInt(o.borderLeftWidth),n=parseInt(o.borderTopWidth)+parseInt(o.borderBottomWidth),r=Math.max(0,Math.floor(t.width-i)),s=Math.max(0,Math.floor(t.height-n));(r!==this.size[0]||s!==this.size[1]||e!==this.pxRatio)&&(Ve(this,Re).style.width=Math.floor(r)+"px",Ve(this,Re).style.height=Math.floor(s)+"px",Je(this,Ie,!0),this.setProperties({size:[r,s],pxRatio:e}))}get ctx(){return Ve(this,Te)}themeMutated(){this.updateThemeUniforms(),this.throttle(this.onRender)}changed(){this.throttle(this.onRender)}onRender(){const e=Math.floor(this.size[0]*this.pxRatio),t=Math.floor(this.size[1]*this.pxRatio);e&&t&&(this.setShaderProgram(),this._reactiveProperties.forEach((e,t)=>{const o="u"+t.charAt(0).toUpperCase()+t.slice(1);this.updatePropertyUniform(o,e)}),Ve(this,Ie)&&(Ve(this,Re).width=e,Ve(this,Re).height=t,Je(this,Ie,!1)),Ge.width=e,Ge.height=t,Qe.viewport(0,0,e,t),Qe.clearColor(0,0,0,0),Qe.clear(Qe.COLOR_BUFFER_BIT),Ve(this,Te).clearRect(0,0,e,t),Qe.drawElements(Qe.TRIANGLES,6,Qe.UNSIGNED_SHORT,0),Ve(this,Te).drawImage(Ge,0,0))}setShaderProgram(){Ke!==Ve(this,De)&&(Ke=Ve(this,De),Qe.useProgram(Ve(this,De)))}updatePropertyUniform(e,t){this.setShaderProgram(),this.setUniform(e,t.value)}updateThemeUniforms(){this.theme._reactiveProperties.forEach((e,t)=>{this.updatePropertyUniform("io_"+t,e)})}setUniform(e,t){const o=Qe.getUniformLocation(Ve(this,De),e);if(null===o)return;let i,n=typeof t;switch(t instanceof Array&&(n="array"),n){case"boolean":Qe.uniform1i(o,t?1:0);break;case"number":Qe.uniform1f(o,t??1);break;case"object":case"array":switch(i=[0,1,2,3],"object"==typeof t&&(void 0!==t.x?i=["x","y","z","w"]:void 0!==t.r?i=["r","g","b","a"]:void 0!==t.h?i=["h","s","v","a"]:void 0!==t.c&&(i=["c","m","y","k"])),Ve(this,$e)[e]){case 2:if(void 0===t){Qe.uniform2f(o,0,0);break}Qe.uniform2f(o,t[i[0]]??1,t[i[1]]??1);break;case 3:if(void 0===t){Qe.uniform3f(o,0,0,0);break}Qe.uniform3f(o,t[i[0]]??1,t[i[1]]??1,t[i[2]]??1);break;case 4:if(void 0===t){Qe.uniform4f(o,0,0,0,0);break}Qe.uniform4f(o,t[i[0]]??1,t[i[1]]??1,t[i[2]]??1,t[i[3]]??1)}}}Register(e){super.Register(e);let t="";const o=e.prototype._protochain.constructors;for(let i=o.length;i--;){const e=o[i],n=Object.getOwnPropertyDescriptor(e,"GlUtils");n&&n.get&&(t+=e.GlUtils)}Object.defineProperty(e.prototype,"_glUtils",{enumerable:!1,value:t})}};Ie=new WeakMap,Re=new WeakMap,Te=new WeakMap,$e=new WeakMap,De=new WeakMap,Ue([f({type:K,value:ke})],et.prototype,"theme",2),Ue([f({type:Array,init:[0,0]})],et.prototype,"size",2),Ue([f({type:Number,value:1})],et.prototype,"pxRatio",2),et=Ue([R],et);const tt=["a","abbr","acronym","address","applet","area","article","aside","audio","b","base","basefont","bdi","bdo","big","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","dir","div","dl","dt","em","embed","fieldset","figcaption","figure","font","footer","form","frame","frameset","head","header","hgroup","h1","h2","h3","h4","h5","h6","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noframes","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strike","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","tt","u","ul","var","video","wbr"],ot={};tt.forEach(e=>{ot[e]=function(t,o){const i={tag:e};return void 0!==t&&("string"==typeof t||t instanceof Array?i.children=t:"object"==typeof t&&(i.props=t),void 0!==o&&("string"==typeof o||o instanceof Array)&&(i.children=o)),i}});const{a:it,abbr:nt,acronym:rt,address:st,applet:at,area:lt,article:ct,aside:ht,audio:dt,b:pt,base:ut,basefont:ft,bdi:gt,bdo:vt,big:yt,blockquote:bt,body:mt,br:wt,button:Pt,canvas:_t,caption:Et,center:xt,cite:St,code:Ot,col:Lt,colgroup:Ct,data:jt,datalist:At,dd:Nt,del:kt,details:Mt,dfn:It,dialog:Rt,dir:Tt,div:$t,dl:Dt,dt:Wt,em:Ft,embed:Bt,fieldset:Ut,figcaption:zt,figure:Vt,font:Ht,footer:Jt,form:Gt,frame:Qt,frameset:qt,head:Yt,header:Xt,hgroup:Zt,h1:Kt,h2:eo,h3:to,h4:oo,h5:io,h6:no,hr:ro,html:so,i:ao,iframe:lo,img:co,input:ho,ins:po,kbd:uo,keygen:fo,label:go,legend:vo,li:yo,link:bo,main:mo,map:wo,mark:Po,menu:_o,menuitem:Eo,meta:xo,meter:So,nav:Oo,noframes:Lo,noscript:Co,object:jo,ol:Ao,optgroup:No,option:ko,output:Mo,p:Io,param:Ro,picture:To,pre:$o,progress:Do,q:Wo,rp:Fo,rt:Bo,ruby:Uo,s:zo,samp:Vo,script:Ho,section:Jo,select:Go,small:Qo,source:qo,span:Yo,strike:Xo,strong:Zo,style:Ko,sub:ei,summary:ti,sup:oi,svg:ii,table:ni,tbody:ri,td:si,template:ai,textarea:li,tfoot:ci,th:hi,thead:di,time:pi,title:ui,tr:fi,track:gi,tt:vi,u:yi,ul:bi,video:mi,wbr:wi}=ot;var Pi=Object.defineProperty,_i=Object.getOwnPropertyDescriptor,Ei=(e,t,o,i)=>{for(var n,r=i>1?void 0:i?_i(t,o):t,s=e.length-1;s>=0;s--)(n=e[s])&&(r=(i?n(t,o,r):n(r))||r);return i&&r&&Pi(t,o,r),r};let xi=null,Si=class extends G{static get Style(){return"\n      :host {\n        display: block;\n        position: fixed;\n        top: 0;\n        left: 0;\n        bottom: 0;\n        right: 0;\n        z-index: 100000;\n        overflow: hidden;\n        pointer-events: none;\n        touch-action: none;\n        background: transparent;\n        @apply --unselectable;\n      }\n      :host[expanded] {\n        background: rgba(0, 0, 0, 0.25);\n        pointer-events: all;\n      }\n      :host > * {\n        position: absolute !important;\n        box-shadow: var(--io_shadow);\n      }\n    "}static get Listeners(){return{pointerdown:["stopPropagation",{passive:!1}],pointermove:["stopPropagation",{passive:!1}],pointerup:"onPointerup",contextmenu:"onContextmenu",mousedown:["stopPropagation",{passive:!1}],mousemove:["stopPropagation",{passive:!1}],mouseup:["stopPropagation",{passive:!1}],touchstart:["stopPropagation",{passive:!1}],touchmove:["stopPropagation",{passive:!1}],touchend:["stopPropagation",{passive:!1}],keydown:["stopPropagation",{passive:!1}],keyup:["stopPropagation",{passive:!1}],focusin:["stopPropagation",{passive:!1}],blur:["stopPropagation",{passive:!1}],scroll:"onScroll",wheel:["onScroll",{passive:!1}]}}constructor(e={}){super(e)}init(){this.expandAsChildren=this.expandAsChildren.bind(this)}stopPropagation(e){e.stopPropagation()}onPointerup(e){e.composedPath()[0]===this&&this.collapse(),e.stopPropagation()}onContextmenu(e){e.preventDefault(),e.stopPropagation()}onScroll(e){e.composedPath()[0]===this&&this.collapse()}onResized(){this.collapse()}appendChild(e){return super.appendChild(e),e.addEventListener("expanded-changed",this.onChildExpandedChanged),this.debounce(this.expandAsChildren),e}removeChild(e){return super.removeChild(e),e.removeEventListener("expanded-changed",this.onChildExpandedChanged),this.debounce(this.expandAsChildren),e}onChildExpandedChanged(){this.debounce(this.expandAsChildren)}collapse(){for(let e=this.children.length;e--;)this.expanded=!1;this.expanded=!1}expandAsChildren(){for(let e=this.children.length;e--;)if(this.children[e].expanded)return void(this.expanded=!0);this.expanded=!1}expandedChanged(){if(!this.expanded){for(let e=this.children.length;e--;)this.children[e].expanded=!1;xi&&xi.focus()}}};Ei([f({value:!1,type:Boolean,reflect:!0})],Si.prototype,"expanded",2),Si=Ei([R],Si);const Oi=new Si;setTimeout(()=>{document.body.appendChild(Oi)},100),window.addEventListener("focusin",()=>{xi=document.activeElement},{capture:!1}),window.addEventListener("blur",()=>{setTimeout(()=>{Oi.expanded||document.activeElement!==document.body||(xi=null)})},{capture:!0});const Li=/* @__PURE__ */new WeakMap,Ci={ArrowLeft:"ArrowRight",ArrowRight:"ArrowLeft",ArrowDown:"ArrowUp",ArrowUp:"ArrowDown"};function ji(e,t,o){Li.set(e,{dir:Ci[t],source:o})}function Ai(e,t,o=1){if(e.right>t.left&&t.right>e.left&&e.bottom>t.top&&t.bottom>e.top)return 0;let i=0,n=0;const r=ke.fieldHeight/2;return e.right<t.left?i=Math.max(r,t.left-e.right):t.right<e.left&&(i=Math.max(r,e.left-t.right)),e.bottom<t.top?n=Math.max(r,t.top-e.bottom):t.bottom<e.top&&(n=Math.max(r,e.top-t.bottom)),i*=o,n/=o,(i**2+n**2)**.5}function Ni(e,t,o=1){const i=e.x+e.width/2,n=e.y+e.height/2;let r=i-(t.x+t.width/2),s=n-(t.y+t.height/2);return r*=o,s/=o,(r**2+s**2)**.5}document.addEventListener("io-focus-to",function(e){const t=e.detail.source,o=t.getBoundingClientRect(),i=e.detail.command,n=Oi.contains(t);let r=t,s=1/0,a=1/0;const l=Li.get(t);if(l&&l.dir===i){const e=l.source;let o=!0;if(e.offsetParent&&e!==t){const t=window.getComputedStyle(e);"visible"===t.visibility&&"none"!==t.display||(o=!1)}else o=!1;if(o)return e.focus(),void ji(e,i,t)}const c=n?Oi:document;let h=Array.from(c.querySelectorAll(`[tabIndex="${t.tabIndex||0}"]:not([disabled]):not([inert]):not([hidden])`));const d=Array.from(t.parentElement.querySelectorAll(`[tabIndex="${t.tabIndex||0}"]:not([disabled]):not([inert]):not([hidden])`));if(h=h.filter(e=>null!==e.offsetParent),h=h.filter(e=>{const t=window.getComputedStyle(e);return"none"!==t.display&&"hidden"!==t.visibility&&"0"!==t.opacity}),"Tab"===i){const e=h.indexOf(t);return void(-1!==e&&h[(e+1)%h.length].focus())}if("Home"!==i)if("End"!==i)if("PageUp"!==i)if("PageDown"!==i){if(["ArrowLeft","ArrowRight","ArrowDown","ArrowUp"].includes(i)){for(let e=h.length;e--;){const n=h[e];if(!n.offsetParent||n===t)continue;const l=window.getComputedStyle(n);if("visible"!==l.visibility||"none"===l.display)continue;const c=n.getBoundingClientRect();if("ArrowRight"===i&&c.left<o.right)continue;if("ArrowLeft"===i&&c.right>o.left)continue;if("ArrowDown"===i&&c.top<o.bottom)continue;if("ArrowUp"===i&&c.bottom>o.top)continue;const d=4,p="ArrowLeft"===i||"ArrowRight"===i?1/d:d,u=Ai(o,c,p),f=Ni(o,c,p);u<s?(s=u,a=f,r=n):u===s&&f<a&&(a=f,r=n)}r!==t&&(r.focus(),ji(r,i,t))}}else d[d.length-1].focus();else d[0].focus();else h[h.length-1].focus();else h[0].focus()});const ki={get width(){return window.visualViewport?window.visualViewport.width*window.visualViewport.scale:document.documentElement.clientWidth},get height(){return window.visualViewport?window.visualViewport.height*window.visualViewport.scale:document.documentElement.clientHeight},get offsetLeft(){return window.visualViewport?window.visualViewport.offsetLeft:0},get offsetTop(){return window.visualViewport?window.visualViewport.offsetTop:0}};function Mi(e,t,o,i,n,r){t=Math.max(0,Math.min(t,ki.width-i.width));let s=-1,a=-1;const l=o-i.height>=0,c=t+i.width<=ki.width;return!(!l&&!n)&&(l?o-=i.height:r?(a=o,o=0):o=i.height-o,c||(r?s=ki.width:t=ki.width-i.width),e.style.top=o+"px",e.style.left=t+"px",e.style.width=-1!==s?s+"px":"",e.style.height=-1!==a?a+"px":"",!0)}function Ii(e,t,o,i,n,r){o+=ki.offsetTop,t+=ki.offsetLeft,t=Math.max(0,Math.min(t,ki.width-i.width));let s=-1,a=-1;const l=o+i.height<=ki.height,c=t+i.width<=ki.width;return!(!l&&!n)&&(l||(r?a=ki.height-o:o=ki.height-i.height),c||(r?s=ki.width:t=ki.width-i.width),e.style.top=o+"px",e.style.left=t+"px",e.style.width=-1!==s?s+"px":"",e.style.height=-1!==a?a+"px":"",!0)}function Ri(e,t,o,i,n,r){o=Math.max(0,Math.min(o,ki.height-i.height));let s=-1,a=-1;const l=t-i.width>=0,c=o+i.height<=ki.height;return!(!l&&!n)&&(l?t-=i.width:r?(s=t,t=0):t=0,c||(r?a=ki.height:o=ki.height-i.height),e.style.top=o+"px",e.style.left=t+"px",e.style.width=-1!==s?s+"px":"",e.style.height=-1!==a?a+"px":"",!0)}function Ti(e,t,o,i,n,r){o=Math.max(0,Math.min(o,ki.height-i.height));let s=-1,a=-1;const l=t+i.width<=ki.width,c=o+i.height<=ki.height;return!(!l&&!n)&&(l||(r?s=ki.width-t:t=ki.width-i.width),c||(r?a=ki.height:o=ki.height-i.height),e.style.top=o+"px",e.style.left=t+"px",e.style.width=-1!==s?s+"px":"",e.style.height=-1!==a?a+"px":"",!0)}function $i(e,t,o,i){const n=e.getBoundingClientRect(),r=t.getBoundingClientRect(),s=r.left,a=r.top,l=r.right,c=r.bottom,h=ki.height-c,d=ki.width-l,p=n.left,u=n.top;switch(o){case"none":Ti(e,p,u,n,!1,i)||Ri(e,p,u,n,!1,i)||Ti(e,p,u,n,d>s,i)||Ri(e,s,a,n,d<=s,i);break;case"up":Mi(e,s,a,n,!1,i)||Ii(e,s,c,n,!1,i)||Mi(e,s,a,n,a>h,i)||Ii(e,s,c,n,a<=h,i);break;case"left":Ri(e,s,a,n,!1,i)||Ti(e,l,a,n,!1,i)||Ri(e,s,a,n,s>d,i)||Ti(e,l,a,n,s<=d,i);break;case"down":Ii(e,s,c,n,!1,i)||Mi(e,s,a,n,!1,i)||Ii(e,s,c,n,h>a,i)||Mi(e,s,a,n,h<=a,i);break;case"right":Ti(e,l,a,n,!1,i)||Ri(e,s,a,n,!1,i)||Ti(e,l,a,n,d>s,i)||Ri(e,s,a,n,d<=s,i);break;default:Ti(e,s,a,n,!1,i)||Ri(e,l,a,n,!1,i)||Ti(e,s,a,n,d>s,i)||Ri(e,l,a,n,d<=s,i)}}const Di="MIT";export{t as Binding,o as ChangeQueue,Oe as Color,Ce as DARK_THEME,s as EventDispatcher,tt as HTML_ELEMENTS,G as IoElement,et as IoGl,Oi as IoOverlaySingleton,Di as LICENSE,Le as LIGHT_THEME,Z as NODES,K as Node,a as NodeArray,u as Property,y as ProtoChain,f as ReactiveProperty,h as ReactivePropertyInstance,l as ReactiveProtoProperty,R as Register,be as Storage,ye as StorageNode,v as Style,Ne as Theme,ke as ThemeSingleton,it as a,nt as abbr,rt as acronym,st as address,at as applet,j as applyNativeElementProps,lt as area,ct as article,ht as aside,dt as audio,pt as b,ut as base,ft as basefont,gt as bdi,vt as bdo,yt as big,le as bind,bt as blockquote,mt as body,wt as br,Pt as button,_t as canvas,Et as caption,xt as center,St as cite,Ot as code,Lt as col,Ct as colgroup,A as constructElement,jt as data,At as datalist,Nt as dd,L as debounce,kt as del,Mt as details,It as dfn,Rt as dialog,Tt as dir,ne as dispatchQueue,he as dispose,N as disposeChildren,$t as div,Dt as dl,Wt as dt,Ft as em,Bt as embed,Ut as fieldset,zt as figcaption,Vt as figure,Ht as font,Jt as footer,Gt as form,Qt as frame,qt as frameset,Me as glsl,Kt as h1,eo as h2,to as h3,oo as h4,io as h5,no as h6,i as hardenListenerDefinition,Yt as head,Xt as header,Zt as hgroup,ro as hr,so as html,ao as i,lo as iframe,co as img,te as initProperties,ee as initReactiveProperties,ho as input,po as ins,Q as ioElement,uo as kbd,fo as keygen,go as label,vo as legend,yo as li,bo as link,r as listenerFromDefinition,mo as main,wo as map,Po as mark,_o as menu,Eo as menuitem,xo as meta,So as meter,Oo as nav,S as nextQueue,Lo as noframes,Co as noscript,$i as nudge,jo as object,ae as observeNodeProperty,se as observeObjectProperty,Ao as ol,re as onPropertyMutated,No as optgroup,ko as option,Mo as output,Io as p,Ro as param,To as picture,$o as pre,Do as progress,d as propertyDecorators,Wo as q,p as reactivePropertyDecorators,Fo as rp,Bo as rt,Uo as ruby,zo as s,Vo as samp,Ho as script,Jo as section,Go as select,oe as setProperties,ie as setProperty,Qo as small,qo as source,Yo as span,Xo as strike,Zo as strong,Ko as style,g as styleDecorators,ei as sub,ti as summary,oi as sup,ii as svg,ni as table,ri as tbody,si as td,ai as template,li as textarea,ci as tfoot,hi as th,di as thead,O as throttle,pi as time,ui as title,I as toVDOM,fi as tr,gi as track,vi as tt,yi as u,bi as ul,ce as unbind,mi as video,wi as wbr};
//# sourceMappingURL=index.js.map
