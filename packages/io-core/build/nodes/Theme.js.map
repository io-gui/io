{"version":3,"file":"Theme.js","sourceRoot":"","sources":["../../src/nodes/Theme.ts"],"names":[],"mappings":"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","sourcesContent":["import { Register } from '../decorators/Register.js';\nimport { ReactiveProperty } from '../decorators/Property.js';\nimport { ReactivePropertyDefinitions, Node, ReactivityType } from '../nodes/Node.js';\nimport { Storage as $ } from '../nodes/Storage.js';\n\nconst THEME_VERSION = 'v0.11';\nconst styleElement = document.createElement('style');\nstyleElement.setAttribute('id', 'io-theme-variables-' + THEME_VERSION);\ndocument.head.appendChild(styleElement);\n\nexport class Color {\n  r: number;\n  g: number;\n  b: number;\n  a: number;\n  constructor(r: number, g: number, b: number, a: number) {\n    this.r = r;\n    this.g = g;\n    this.b = b;\n    this.a = a;\n  }\n  toCss() {\n    const r = Math.floor(this.r * 255);\n    const g = Math.floor(this.g * 255);\n    const b = Math.floor(this.b * 255);\n    if (this.a !== undefined && this.a !== 1) {\n      return `rgba(${r}, ${g}, ${b}, ${this.a})`;\n    } else {\n      return `rgb(${r}, ${g}, ${b})`;\n    }\n  }\n}\n\nexport type ThemeVars = {\n  spacing: number;\n  spacing2: number;\n  spacing3: number;\n  spacing5: number;\n  spacing8: number;\n\n  fontSize: number;\n  lineHeight: number;\n  fieldHeight: number;\n\n  borderRadius: number;\n  borderWidth: number;\n  borderColor: Color;\n  borderColorLight: Color;\n  borderColorStrong: Color;\n  borderColorRed: Color;\n  borderColorBlue: Color;\n  borderColorGreen: Color;\n\n  bgColor: Color;\n  bgColorStrong: Color;\n  bgColorLight: Color;\n  bgColorRed: Color;\n  bgColorGreen: Color;\n  bgColorBlue: Color;\n  bgColorInput: Color;\n\n  color: Color;\n  colorStrong: Color;\n  colorLight: Color;\n  colorRed: Color;\n  colorGreen: Color;\n  colorBlue: Color;\n  colorWhite: Color;\n  colorInput: Color;\n\n  gradientColorStart: Color;\n  gradientColorEnd: Color;\n\n  shadowColor: Color;\n}\n\nexport const LIGHT_THEME: ThemeVars = {\n  spacing: 2,\n  spacing2: 0,\n  spacing3: 0,\n  spacing5: 0,\n  spacing8: 0,\n\n  lineHeight: 20,\n  fontSize: 14,\n  fieldHeight: 0,\n\n  borderRadius: 2,\n  borderWidth: 1,\n  borderColor: new Color(0.2, 0.2, 0.2, 1),\n  borderColorLight: new Color(0.3, 0.3, 0.3, 1),\n  borderColorStrong: new Color(0.6, 0.6, 0.6, 1),\n  borderColorRed: new Color(1, 0.35, 0.15, 1),\n  borderColorGreen: new Color(0.1, 0.7, 0.2, 1),\n  borderColorBlue: new Color(0.2, 0.4, 0.95, 1),\n\n  bgColor: new Color(0.85, 0.85, 0.85, 1),\n  bgColorStrong: new Color(0.9, 0.9, 0.9, 1),\n  bgColorLight: new Color(0.8, 0.8, 0.8, 1),\n  bgColorRed: new Color(1, 0.5, 0.3, 1),\n  bgColorGreen: new Color(0.2, 0.9, 0.3, 1),\n  bgColorBlue: new Color(0.2, 0.5, 0.9, 1),\n  bgColorInput: new Color(0.95, 0.96, 0.95, 1),\n\n  color: new Color(0.25, 0.25, 0.2, 1),\n  colorStrong: new Color(0, 0, 0, 1),\n  colorLight: new Color(0.6, 0.6, 0.6, 1),\n  colorRed: new Color(1, 0.2, 0.0, 1),\n  colorGreen: new Color(0, 0.6, 0.1, 1),\n  colorBlue: new Color(0.2, 0.3, 1, 1),\n  colorWhite: new Color(1, 1, 1, 1),\n  colorInput: new Color(0, 0.05, 0.02, 1),\n\n  gradientColorStart: new Color(0.9, 0.9, 0.9, 1),\n  gradientColorEnd: new Color(0.75, 0.75, 0.75, 1),\n\n  shadowColor: new Color(0, 0, 0, 0.2),\n};\n\nexport const DARK_THEME: ThemeVars = {\n  spacing: 2,\n  spacing2: 0,\n  spacing3: 0,\n  spacing5: 0,\n  spacing8: 0,\n\n  lineHeight: 20,\n  fontSize: 14,\n  fieldHeight: 0,\n\n  borderRadius: 2,\n  borderWidth: 1,\n  borderColor: new Color(0.5, 0.5, 0.5, 1),\n  borderColorLight: new Color(0.3, 0.3, 0.3, 1),\n  borderColorStrong: new Color(0, 0, 0, 1),\n  borderColorRed: new Color(1, 0.2, 0.0, 1),\n  borderColorBlue: new Color(0.4, 0.5, 0.9, 1),\n  borderColorGreen: new Color(0, 0.6, 0.1, 1),\n\n  bgColor: new Color(0.2, 0.2, 0.2, 1),\n  bgColorStrong: new Color(0.15, 0.15, 0.15, 1),\n  bgColorLight: new Color(0.25, 0.25, 0.25, 1),\n  bgColorRed: new Color(0.7, 0.2, 0.1, 1),\n  bgColorGreen: new Color(0.1, 0.5, 0.2, 1),\n  bgColorBlue: new Color(0.2, 0.4, 0.8, 1),\n  bgColorInput: new Color(0.02, 0.02, 0.02, 1),\n\n  color: new Color(0.6, 0.6, 0.6, 1),\n  colorStrong: new Color(0.86, 0.86, 0.86, 1),\n  colorLight: new Color(0.3, 0.3, 0.3, 1),\n  colorRed: new Color(1, 0.4, 0.4, 1),\n  colorGreen: new Color(0.4, 0.95, 0.3, 1),\n  colorBlue: new Color(0.6, 0.9, 1, 1),\n  colorWhite: new Color(1, 1, 1, 1),\n  colorInput: new Color(0.65, 0.7, 0.68, 1),\n\n  gradientColorStart: new Color(0.45, 0.45, 0.45, 1),\n  gradientColorEnd: new Color(0.2, 0.2, 0.2, 1),\n\n  shadowColor: new Color(0, 0, 0, 0.2),\n};\n\nconst $ThemeID = $({\n  value: window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light',\n  storage: 'local',\n  key: 'theme-' + THEME_VERSION\n});\n\nconst $Themes = $({\n  value: {},\n  storage: 'local',\n  key: 'io-themes-' + THEME_VERSION\n});\n\nconst compositeVariables = /* css */`\n  body {\n    --io_border: var(--io_borderWidth) solid var(--io_borderColor);\n    --io_borderColorInset: var(--io_borderColorStrong) var(--io_borderColorLight) var(--io_borderColorLight) var(--io_borderColorStrong);\n    --io_borderColorOutset: var(--io_borderColorLight) var(--io_borderColorStrong) var(--io_borderColorStrong) var(--io_borderColorLight);\n    --io_gradientOutset: linear-gradient(180deg, var(--io_gradientColorStart), var(--io_gradientColorEnd) 100%);\n    --io_gradientInset: linear-gradient(0deg, var(--io_gradientColorStart), var(--io_gradientColorEnd) 150%);\n    --io_shadow: 2px 2px 6px var(--io_shadowColor), 1px 1px 1px var(--io_shadowColor);\n    --io_shadowInset: 0.75px 0.75px 2px inset var(--io_shadowColor);\n    --io_shadowOutset: 1px 1px 2px var(--io_shadowColor);\n  }\n`;\n\n/**\n * `Theme` is designed to be used as `ThemeSingleton`. It holds top-level CSS variables for Io-Gui design system.\n * CSS Variables are grouped in different themes and can be collectively switched by changing `theme` property.\n *\n * ```javascript\n * ThemeSingleton.themeID = 'dark';\n * ```\n *\n * CSS color variables such as `'--io_color'` and `'--io_bgColor'` are mapped to numeric properties `io_color` and `io_bgColor`.\n */\n@Register\nexport class Theme extends Node {\n  static get ReactiveProperties(): ReactivePropertyDefinitions {\n    const props: ReactivePropertyDefinitions = {};\n    for (const p in LIGHT_THEME) {\n      const prop = LIGHT_THEME[p as keyof typeof LIGHT_THEME];\n      if (prop instanceof Object) {\n        props[p] = {value: prop, type: Color, init: null};\n      } else {\n        props[p] = prop;\n      }\n    }\n    return props;\n  }\n\n  declare spacing: number;\n  declare spacing2: number;\n  declare spacing3: number;\n  declare spacing5: number;\n  declare spacing8: number;\n  declare lineHeight: number;\n  declare fontSize: number;\n  declare fieldHeight: number;\n  declare borderRadius: number;\n  declare borderWidth: number;\n  declare borderColor: Color;\n  declare borderColorLight: Color;\n  declare borderColorStrong: Color;\n  declare borderColorRed: Color;\n  declare borderColorGreen: Color;\n  declare borderColorBlue: Color;\n  declare bgColor: Color;\n  declare bgColorStrong: Color;\n  declare bgColorLight: Color;\n  declare bgColorRed: Color;\n  declare bgColorGreen: Color;\n  declare bgColorBlue: Color;\n  declare bgColorInput: Color;\n  declare color: Color;\n  declare colorStrong: Color;\n  declare colorLight: Color;\n  declare colorRed: Color;\n  declare colorGreen: Color;\n  declare colorBlue: Color;\n  declare colorWhite: Color;\n  declare colorInput: Color;\n  declare gradientColorStart: Color;\n  declare gradientColorEnd: Color;\n  declare shadowColor: Color;\n\n  // Default theme values\n  @ReactiveProperty({type: Object, init: null})\n  declare themeDefaults: Record<string, ThemeVars>;\n\n  @ReactiveProperty({type: String, binding: $ThemeID})\n  declare themeID: string;\n\n  @ReactiveProperty('debounced')\n  declare reactivity: ReactivityType;\n\n  ready() {\n    this.registerTheme('light', LIGHT_THEME);\n    this.registerTheme('dark', DARK_THEME);\n    this.themeIDChanged();\n  }\n  registerTheme(themeID: string, theme: ThemeVars) {\n    // Save default theme\n    this.themeDefaults[themeID] = theme;\n    this.setProperty('themeDefaults', JSON.parse(JSON.stringify(this.themeDefaults)), true);\n    // Save persistant theme\n    $Themes.value[themeID] = $Themes.value[themeID] || theme;\n    $Themes.value = JSON.parse(JSON.stringify($Themes.value));\n  }\n  reset() {\n    // Load persistant themes from default themes\n    $Themes.value = JSON.parse(JSON.stringify(this.themeDefaults));\n    this.themeIDChanged();\n  }\n  themeIDChanged() {\n    const values = $Themes.value[this.themeID];\n    for (const p in values) {\n      if (values[p] instanceof Object && JSON.stringify(Object.keys(values[p])) === '[\"r\",\"g\",\"b\",\"a\"]') {\n         values[p] = new Color(values[p].r, values[p].g, values[p].b, values[p].a);\n      }\n    }\n    this.setProperties(values);\n  }\n\n  onPropertyMutated(event: CustomEvent) {\n    // TODO: Add properties to mutation handler.\n    const mutated = super.onPropertyMutated(event);\n    if (mutated) {\n      this.changed();\n      this.dispatchMutation();\n      return true;\n    }\n    return false;\n  }\n  fontSizeChanged() {\n    this.lineHeight = Math.max(this.fontSize, this.lineHeight);\n  }\n  lineHeightChanged() {\n    this.fontSize = Math.min(this.lineHeight, this.fontSize);\n  }\n  changed() {\n    this.fieldHeight = this.lineHeight + 2 * (this.spacing + this.borderWidth);\n\n    this.spacing2 = this.spacing * 2;\n    this.spacing3 = this.spacing * 3;\n    this.spacing5 = this.spacing * 5;\n    this.spacing8 = this.spacing * 8;\n\n    const propertyVariables = Array.from(Object.keys(LIGHT_THEME) as Array<keyof ThemeVars>).reduce(\n      (result, prop) => {\n        $Themes.value[this.themeID][prop] = this[prop];\n        if (typeof this[prop] === 'object') {\n          return `${result}--io_${prop}: ${this[prop].toCss()};\\n    `;\n        } else {\n          return `${result}--io_${prop}: ${this[prop]}px;\\n    `;\n        }\n      }, '');\n\n      styleElement.innerHTML = /* css */`body {\\n  ${propertyVariables}\\n}\\n${compositeVariables}`;\n      this.debounce(this.onSaveTheme, undefined, 60);\n  }\n  onSaveTheme() {\n    $Themes.value = JSON.parse(JSON.stringify($Themes.value));\n  }\n}\n\nconst ThemeSingleton = new Theme();\nexport { ThemeSingleton };"]}