import{NodeArray as e}from"io-gui";import{MenuOption as t}from"./index.js";const o={id:"root",options:[{id:"1",label:"one",options:[{id:"1.1",label:"one.1"},{id:"1.2",label:"one.2"}]},{id:"2",label:"two",options:[{id:"2.1",label:"two.1"},{id:"2.2",label:"two.2"}]}]};class MenuOptionTest{run(){describe("MenuOption",(()=>{it("Should initialize with correct default values",(()=>{const o=new t({id:"test"});expect(o.value).to.be.equal("test"),expect(o.id).to.be.equal("test"),expect(o.label).to.be.equal("test"),expect(o.icon).to.be.equal(""),expect(o.hint).to.be.equal(""),expect(o.disabled).to.be.equal(!1),expect(o.action).to.be.equal(void 0),expect(o.mode).to.be.equal("select"),expect(o.selected).to.be.equal(!1),expect(o.path).to.be.equal(""),expect(o.options).to.be.instanceof(e),expect(o.options.length).to.be.equal(0)})),it("Should initialize correctly from constructor arguments",(()=>{let o=new t({value:1,id:"one",label:"onelabel",icon:"icon:close",hint:"onehint",disabled:!0,action:()=>{},mode:"select",options:[{id:"two",value:2,label:"twolabel",selected:!0},{id:"three",value:3,label:"threelabel",mode:"toggle",selected:!0},{id:"four",value:4,label:"fourlabel",selected:!0}]});expect(o.value).to.be.equal(1),expect(o.id).to.be.equal("one"),expect(o.label).to.be.equal("onelabel"),expect(o.icon).to.be.equal("icon:close"),expect(o.hint).to.be.equal("onehint"),expect(o.disabled).to.be.equal(!0),expect(typeof o.action).to.be.equal("function"),expect(o.mode).to.be.equal("select"),expect(o.selected).to.be.equal(!0),expect(o.selectedIDImmediate).to.be.equal("two"),expect(o.path).to.be.equal("two"),expect(o.options).to.be.instanceof(e),expect(o.options.length).to.be.equal(3),expect(o.options.selected).to.be.equal("two"),expect(o.options[0].id).to.be.equal("two"),expect(o.options[0].value).to.be.equal(2),expect(o.options[0].label).to.be.equal("twolabel"),expect(o.options[0].selected).to.be.equal(!0),expect(o.options[1].id).to.be.equal("three"),expect(o.options[1].value).to.be.equal(3),expect(o.options[1].label).to.be.equal("threelabel"),expect(o.options[1].selected).to.be.equal(!0),expect(o.options[1].mode).to.be.equal("toggle"),expect(o.options[2].id).to.be.equal("four"),expect(o.options[2].value).to.be.equal(4),expect(o.options[2].label).to.be.equal("fourlabel"),expect(o.options[2].selected).to.be.equal(!1),expect(o.options[2].mode).to.be.equal("select")})),it("Should initialize suboptions from constructor arguments",(()=>{let l=new t(o);expect(l.options).to.be.instanceof(e),expect(l.options.length).to.be.equal(2),expect(l.options[0].options).to.be.instanceof(e),expect(l.options[0].options.length).to.be.equal(2),expect(l.options[1].options).to.be.instanceof(e),expect(l.options[1].options.length).to.be.equal(2)})),it("Should select default branch when `selectDefault` is called",(()=>{let e=new t(o);e.selectDefault(),expect(e.selected).to.be.equal(!0),expect(e.options[0].selected).to.be.equal(!0),expect(e.options[1].selected).to.be.equal(!1),expect(e.options[0].options[0].selected).to.be.equal(!0),expect(e.options[0].options[1].selected).to.be.equal(!1),expect(e.options[1].options[0].selected).to.be.equal(!1),expect(e.options[1].options[1].selected).to.be.equal(!1)})),it("Should update path when selected",(async()=>{let e=new t(o);e.selectDefault(),expect(e.path).to.be.equal("1,1.1"),expect(e.options[0].path).to.be.equal("1.1"),expect(e.options[1].path).to.be.equal(""),expect(e.options[0].options[0].path).to.be.equal(""),expect(e.options[0].options[1].path).to.be.equal(""),expect(e.options[1].options[0].path).to.be.equal(""),expect(e.options[1].options[1].path).to.be.equal(""),e.options[1].options[1].selected=!0,expect(e.path).to.be.equal("2,2.2"),expect(e.options[0].path).to.be.equal(""),expect(e.options[1].path).to.be.equal("2.2"),expect(e.options[0].options[0].path).to.be.equal(""),expect(e.options[0].options[1].path).to.be.equal(""),expect(e.options[1].options[0].path).to.be.equal("")})),it("Should update selectedID andselectedIDImmediate when selected",(async()=>{let e=new t(o);e.selectDefault(),expect(e.selectedIDImmediate).to.be.equal("1"),expect(e.options[0].selectedIDImmediate).to.be.equal("1.1"),expect(e.options[1].selectedIDImmediate).to.be.equal(""),expect(e.selectedID).to.be.equal("1.1"),e.options[1].options[1].selected=!0,expect(e.selectedIDImmediate).to.be.equal("2"),expect(e.selectedID).to.be.equal("2.2"),expect(e.options[0].selectedIDImmediate).to.be.equal(""),expect(e.options[1].selectedIDImmediate).to.be.equal("2.2")})),it("Should update selected when selectedID and selectedIDImmediate changes",(async()=>{let e=new t(o);e.selectedIDImmediate="1",expect(e.selected).to.be.equal(!0),expect(e.options[0].selected).to.be.equal(!0),e.selectedID="2.1",expect(e.options[0].selected).to.be.equal(!1),expect(e.options[0].selectedID).to.be.equal(""),expect(e.options[0].selectedIDImmediate).to.be.equal(""),expect(e.options[1].selected).to.be.equal(!0),expect(e.options[1].selectedID).to.be.equal("2.1"),expect(e.options[1].selectedIDImmediate).to.be.equal("2.1")})),it("Should update paths in menu option tree on option selection",(async()=>{const e=new t({id:"optionsview",options:[{id:"home"},{id:"food",options:[{id:"fruits",options:[{id:"apples",selected:!0},{id:"mangos"},{id:"bannanas"}]}]},{id:"mixed",options:[{id:"togglables",mode:"none",options:[{id:"toggle1",mode:"toggle"},{id:"toggle2",mode:"toggle"},{id:"toggle3",mode:"toggle"},{id:"toggle4",mode:"toggle"}]},{id:"selectables",options:[{id:"toggle",mode:"toggle"},{id:"selectable"}]}]}]});expect(e.selected).to.be.equal(!0),expect(e.options[1].selected).to.be.equal(!0),expect(e.options[1].options[0].selected).to.be.equal(!0),expect(e.options[1].options[0].options[0].selected).to.be.equal(!0),expect(e.selectedID).to.be.equal("apples"),expect(e.selectedIDImmediate).to.be.equal("food"),expect(e.path).to.be.equal("food,fruits,apples"),expect(e.options[1].selectedID).to.be.equal("apples"),expect(e.options[1].selectedIDImmediate).to.be.equal("fruits"),expect(e.options[1].path).to.be.equal("fruits,apples"),expect(e.options[1].options[0].selectedID).to.be.equal("apples"),expect(e.options[1].options[0].selectedIDImmediate).to.be.equal("apples"),expect(e.options[1].options[0].path).to.be.equal("apples"),e.options[1].options[0].options[0].selected=!1,expect(e.options[1].options[0].selectedID).to.be.equal(""),expect(e.options[1].options[0].selectedIDImmediate).to.be.equal(""),expect(e.options[1].options[0].path).to.be.equal(""),expect(e.selectedID).to.be.equal("fruits"),expect(e.selectedIDImmediate).to.be.equal("food"),expect(e.path).to.be.equal("food,fruits"),expect(e.options[1].selectedID).to.be.equal("fruits"),expect(e.options[1].selectedIDImmediate).to.be.equal("fruits"),expect(e.options[1].path).to.be.equal("fruits"),e.options[0].selected=!0,expect(e.selected).to.be.equal(!0),expect(e.options[1].selected).to.be.equal(!1),expect(e.options[1].options[0].selected).to.be.equal(!1),expect(e.options[1].options[0].options[0].selected).to.be.equal(!1),expect(e.selectedID).to.be.equal("home"),expect(e.selectedIDImmediate).to.be.equal("home"),expect(e.path).to.be.equal("home"),expect(e.selectedID).to.be.equal("home"),expect(e.selectedIDImmediate).to.be.equal("home"),expect(e.path).to.be.equal("home"),expect(e.options[1].selectedID).to.be.equal(""),expect(e.options[1].selectedIDImmediate).to.be.equal(""),expect(e.options[1].path).to.be.equal(""),expect(e.options[1].options[0].selectedID).to.be.equal(""),expect(e.options[1].options[0].selectedIDImmediate).to.be.equal(""),expect(e.options[1].options[0].path).to.be.equal("")}))}))}}class index_test{run(){(new MenuOptionTest).run()}}export{index_test as default};
