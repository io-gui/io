{"version":3,"file":"IoOptionSelect.js","sourceRoot":"","sources":["../../src/elements/IoOptionSelect.ts"],"names":[],"mappings":"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","sourcesContent":["import { Register, IoElement, Change, ReactiveProperty, IoElementProps, WithBinding, Property } from 'io-core';\nimport { MenuOption } from '../nodes/MenuOption.js';\nimport { ioMenuItem } from './IoMenuItem.js';\n\nexport type SelectBy = 'value' | 'id';\n\nexport type IoOptionSelectProps = IoElementProps & {\n  option: MenuOption,\n  value?: WithBinding<any>,\n  label?: string,\n  icon?: string,\n  selectBy?: SelectBy,\n};\n\n/**\n * Option select element. Similar to `IoMenuItem`, except it is displayed as a button and uses `options` property instead of ~~`option.options`~~  and it is `selectable` by default. It displays selected `value` or `label` followed by the `â–¾` character.\n * When clicked or activated by space/enter key, it expands a menu with selectable options.\n **/\n@Register\nexport class IoOptionSelect extends IoElement {\n  static get Style() {\n    return /* css */`\n    :host {\n      display: inline-block;\n      text-align: center;\n      border-radius: var(--io_borderRadius);\n      border: var(--io_border);\n      border-color: var(--io_borderColorOutset);\n      background-color: var(--io_bgColorLight);\n      background-image: var(--io_gradientOutset);\n      text-align: left;\n    }\n    :host > io-menu-item {\n      margin: calc(-1 * var(--io_borderWidth));\n      background-color: transparent !important;\n      border-color: transparent !important;\n    }\n    `;\n  }\n\n  @ReactiveProperty({value: undefined})\n  declare value: any;\n\n  @ReactiveProperty('')\n  declare label: string;\n\n  @ReactiveProperty('')\n  declare icon: string;\n\n  // TODO: consider deprecating\n  @ReactiveProperty('value')\n  declare selectBy: SelectBy;\n\n  @ReactiveProperty({type: MenuOption})\n  declare option: MenuOption;\n\n  @Property('button')\n  declare role: string;\n\n  constructor(args: IoOptionSelectProps) {\n    super(args);\n  }\n\n  // TODO: Consider triggering inputValue() only by user-input!\n  onOptionSelected(event: CustomEvent) {\n    if (this._disposed) return;\n    if (this.selectBy === 'value') {\n      this.inputValue(event.detail.option.value);\n    } else if (this.selectBy === 'id') {\n      this.inputValue(event.detail.option.id);\n    }\n  }\n  inputValue(value: any) {\n    if (this.value !== value || typeof this.value === 'object') {\n      const oldValue = this.value;\n      this.setProperty('value', value);\n      this.dispatch('value-input', {value: value, oldValue: oldValue}, false);\n    }\n  }\n  optionChanged(change: Change) {\n    if (change.oldValue) {\n      change.oldValue.removeEventListener('option-selected', this.onOptionSelected);\n    }\n    if (change.value) {\n      change.value.addEventListener('option-selected', this.onOptionSelected);\n    }\n  }\n  changed() {\n    let selectedItem;\n    if (this.selectBy === 'value') {\n      selectedItem = this.option.findItemByValue(this.value);\n    } else if (this.selectBy === 'id') {\n      selectedItem = this.option.findItemById(this.value);\n    }\n    const label = selectedItem ? selectedItem.label : this.label || String(this.value);\n    this.render([ioMenuItem({option: this.option, label: label, icon: this.icon, direction: 'down'})]);\n  }\n}\nexport const ioOptionSelect = function(arg0: IoOptionSelectProps) {\n  return IoOptionSelect.vConstructor(arg0);\n};"]}