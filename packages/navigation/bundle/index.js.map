{"version":3,"file":"index.js","sources":["../src/elements/IoCollapsible.ts","../src/elements/IoSelector.ts","../src/elements/IoNavigator.ts"],"sourcesContent":["import { IoElement, VDOMElement, Register, ReactiveProperty, div, IoElementProps, WithBinding, Property } from '@io-gui/core'\nimport { ioBoolean } from '@io-gui/inputs'\n\nexport type IoCollapsibleProps = IoElementProps & {\n  elements?: VDOMElement[]\n  label?: string\n  direction?: 'column' | 'row'\n  icon?: string\n  expanded?: WithBinding<boolean>\n}\n/**\n * An element with collapsible content.\n * When clicked or activated by space/enter key, it toggles the visibility of the child elements defined as `elements` property.\n **/\n\n@Register\nexport class IoCollapsible extends IoElement {\n  static get Style() {\n    return /* css */`\n    :host {\n      display: flex;\n      flex-direction: column;\n      flex-shrink: 0;\n      align-self: stretch;\n      box-sizing: content-box;\n      align-items: stretch;\n      align-self: stretch;\n      border: var(--io_border);\n      border-radius: calc(var(--io_borderRadius) - var(--io_spacing));\n      border-color: var(--io_borderColorOutset);\n      min-height: var(--io_fieldHeight);\n      background-color: var(--io_bgColorLight);\n    }\n    :host > io-boolean {\n      flex: 0 0 auto;\n      padding-left: 0;\n      margin: var(--io_spacing) var(--io_spacing2);\n      border-radius: 0;\n      background-color: transparent;\n    }\n    :host > io-boolean:before {\n      text-align: center;\n      width: var(--io_lineHeight);\n      margin-right: var(--io_spacing2);\n      content: \"▸\"\n    }\n    :host > io-boolean[value]:before {\n      content: \"▾\"\n    }\n    :host > div.io-collapsible-content {\n      position: relative;\n      display: flex;\n      align-items: flex-start;\n      flex-direction: column;\n      overflow: auto;\n      background-color: var(--io_bgColorStrong);\n    }\n    :host[direction=row] > div.io-collapsible-content {\n      flex-direction: row;\n    }\n    :host > div.io-collapsible-content:not(:empty) {\n      margin: var(--io_spacing);\n      margin-top: 0;\n      padding: var(--io_spacing);\n      border-radius: var(--io_borderRadius);\n    }\n    `\n  }\n\n  @ReactiveProperty(Array)\n  declare elements: VDOMElement[]\n\n  @ReactiveProperty('')\n  declare label: string\n\n  @ReactiveProperty({value: 'column', reflect: true})\n  declare direction: 'column' | 'row'\n\n  @ReactiveProperty('')\n  declare icon: string\n\n  @ReactiveProperty({value: false, reflect: true})\n  declare expanded: boolean\n\n  @Property('region')\n  declare role: string\n\n  changed() {\n    this.render([\n      // TODO: consider implementing caching\n      ioBoolean({icon: this.icon, true: this.label, false: this.label, value: this.bind('expanded')}),\n      div({class: 'io-collapsible-content'}, this.expanded ? this.elements : []),\n    ])\n  }\n}\nexport const ioCollapsible = function(arg0?: IoCollapsibleProps) {\n  return IoCollapsible.vConstructor(arg0)\n}","import { Register, IoElement, VDOMElement, IoElementProps, disposeChildren, ReactiveProperty, WithBinding, Property, span } from '@io-gui/core'\n\nconst dummyElement = document.createElement('div')\n/**\n * Element selector. Displays one of the virtual elements assigned in the `elements` property as its child if the name of the element matches the `value` property.\n * If `cache` property is set to `true`, a reference to the element will be kept fo later use.\n **/\n\n// TODO: consider moving io-selectior to core elements\n\nconst IMPORTED_PATHS: Record<string, any> = {}\nfunction importModule(path: string) {\n  const importPath = new URL(path, String(window.location)).pathname\n  return new Promise(resolve => {\n    if (!path || IMPORTED_PATHS[importPath]) {\n      resolve(importPath)\n    } else {\n      void import(/* @vite-ignore */ importPath)\n      .then(() => {\n        IMPORTED_PATHS[importPath] = true\n        resolve(importPath)\n      })\n    }\n  })\n};\n\nexport type CachingType = 'proactive' | 'reactive' | 'none'\n\nexport type IoSelectorProps = IoElementProps & {\n  elements?: VDOMElement[]\n  selected?: WithBinding<string>\n  anchor?: WithBinding<string>\n  caching?: CachingType\n  loading?: WithBinding<boolean>\n  import?: string // TODO: move to core?\n}\n\n@Register\nexport class IoSelector extends IoElement {\n\n  static get Style() {\n    return /* css */`\n      :host {\n        display: flex;\n        flex-direction: column;\n        position: relative;\n        overflow-y: auto !important;\n        flex: 1 1 auto;\n        justify-content: stretch;\n      }\n      @keyframes io-loading-spinner {\n        to {\n          transform: rotate(360deg);\n        }\n      }\n      :host[loading]:after {\n        content: '';\n        box-sizing: border-box;\n        position: absolute;\n        top: 50%;\n        left: 50%;\n        width: 4em;\n        height: 4em;\n        margin-top: calc(-1 * var(--io_fieldHeight));\n        margin-left: calc(-1 * var(--io_fieldHeight));\n        border-radius: 50%;\n        border: var(--io_border);\n        border-color: var(--io_borderColorStrong);\n        border-top-color: var(--io_colorBlue);\n        animation: io-loading-spinner .6s linear infinite;\n      }\n    `\n  }\n\n  @ReactiveProperty(Array)\n  declare elements: VDOMElement[]\n\n  @ReactiveProperty({value: '', type: String})\n  declare selected: string\n\n  // TODO: Setting anchor offscreen will not update once it is in the dom.\n  @ReactiveProperty({value: '', type: String})\n  declare anchor: string\n\n  @ReactiveProperty({value: 'reactive', type: String})\n  declare caching: CachingType\n\n  @ReactiveProperty({value: false, type: Boolean, reflect: true})\n  declare loading: boolean\n\n  @Property(Object)\n  declare private _caches: Record<string, IoElement | HTMLElement>\n\n  @Property(false)\n  declare private _preaching: boolean\n\n  @Property(false)\n  declare private scrollToSuspended: boolean\n\n  @Property(false)\n  declare private onScrollSuspended: boolean\n\n  static get Listeners() {\n    return {\n      scroll: 'onScrollChanged',\n    }\n  }\n  constructor(args: IoSelectorProps = {}) { super(args) }\n  init() {\n    this.preacheNext = this.preacheNext.bind(this)\n    this.startPreache = this.startPreache.bind(this)\n    this.renderDebounced = this.renderDebounced.bind(this)\n    this.anchorChangedDebounced = this.anchorChangedDebounced.bind(this)\n    this.scrollToUnsuspend = this.scrollToUnsuspend.bind(this)\n    this.onScrollUnsuspend = this.onScrollUnsuspend.bind(this)\n  }\n  anchorChanged() {\n    if (!this.scrollToSuspended) {\n      this.onScrollSuspended = true\n      this.debounce(this.onScrollUnsuspend, undefined, 120)\n    }\n    this.debounce(this.anchorChangedDebounced, undefined, 3)\n  }\n  anchorChangedDebounced() {\n    const anchor = this.anchor.split('#')[1] || this.anchor\n    if (!anchor || this.scrollToSuspended) return\n    const heading = this.querySelector(`[data-heading=\"${anchor}\"]`)\n    if (heading) {\n      const style = window.getComputedStyle(heading)\n      const top = (heading as HTMLElement).offsetTop - parseInt(style.marginTop)\n      this.scrollTo({top: top, behavior: 'smooth'})\n    } else {\n      this.scrollTo(0, 0)\n    }\n  }\n  scrollToUnsuspend() {\n    this.scrollToSuspended = false\n  }\n  onScrollUnsuspend() {\n    this.onScrollSuspended = false\n  }\n  onScrollChanged() {\n    if (this.onScrollSuspended) return\n    const anchor = this.anchor.split('#')[1] || this.anchor\n    const headings = this.querySelectorAll('[data-heading]') as NodeListOf<HTMLElement>\n    const closestHeading = Array.from(headings).reduce((prev, curr) => {\n      return (Math.abs(curr.offsetTop - this.scrollTop) < Math.abs(prev.offsetTop - this.scrollTop) ? curr : prev)\n    }, headings[0])\n    if (closestHeading) {\n      const current = closestHeading.getAttribute('data-heading')\n      if (current && current !== anchor) {\n        this.scrollToSuspended = true\n        if (this.anchor.split('#').length === 2) {\n          // TODO: triggers missing id warning if menuoptions dont include id when you scroll dcs to the top\n          this.anchor = this.anchor.split('#')[0] + '#' + current\n        } else {\n          this.anchor = current\n        }\n        this.debounce(this.scrollToUnsuspend, undefined, 120)\n      }\n    }\n  }\n  elementsChanged() {\n    // TODO: make sure all elements have props and id if selectable!\n    // TODO: fix and test edge case where reusing element in templete() might return cache from the previous element if keys collide!\n    this.startPreache()\n  }\n  selectedChanged() {\n    if (!this.selected) {\n      this.render([], this, true)\n    } else if (this.selected === '*') {\n      this.render(this.elements)\n    } else {\n      this.renderSelectedId(this.selected)\n    }\n    this.debounce(this.anchorChangedDebounced, undefined, 2)\n  }\n\n  renderSelectedId(id: string) {\n    const cache = this.caching === 'proactive' || this.caching === 'reactive'\n\n    if (!id) {\n      this.render([], this, cache)\n      this.scrollTo(0, 0)\n      return\n    }\n\n    id = id.split('#')[0]\n    // TODO: what if <io-selector> is reused in template() and ID collides?\n    if (id === (this.childNodes[0] as IoElement)?.id) return\n\n    this.render([], this, cache)\n    this.scrollTo(0, 0)\n\n    const vElement = this.elements.find((element: VDOMElement) => { return element.props?.id === id })\n\n    if (!vElement) {\n      console.warn(`IoSelector: Could not find elements with id: \"${id}\"!`)\n      this.render([span(`Could not find elements with id: \"${id}\"!`)], this, cache)\n      return\n    }\n\n    const importPath = vElement.props?.import\n\n    if (!importPath) {\n      this.debounce(this.renderDebounced, vElement)\n    } else {\n      this.loading = true\n      this._preaching = false\n      void importModule(importPath).then(() => {\n        this.loading = false\n        this.debounce(this.renderDebounced, vElement)\n        this.debounce(this.startPreache)\n      })\n    }\n  }\n  renderDebounced(vElement: VDOMElement) {\n    const cache = this.caching === 'proactive' || this.caching === 'reactive'\n    const id = vElement.props?.id\n    const cachedElement = this._caches[id]\n    if (cache && cachedElement) {\n      if ((cachedElement.parentElement as IoElement) !== this) {\n        if (this.firstChild) this.removeChild(this.firstChild)\n        this.appendChild(cachedElement as Node)\n      }\n    } else {\n      this.render([vElement], this, cache)\n      if (cache) {\n        this._caches[id] = this.childNodes[0] as IoElement\n      }\n    }\n  }\n  startPreache() {\n    if (this.caching === 'proactive' && !this._preaching) {\n      this._preaching = true\n      this.debounce(this.preacheNext)\n    }\n  }\n  preacheNext() {\n    // TODO: Test this!\n    if (!this._preaching) return\n    for (let i = 0; i < this.elements.length; i++) {\n      const vElement = this.elements[i]\n      const props = vElement.props!\n      const id = props.id\n      if (id && this._caches[id] === undefined) {\n        if (!props.import) {\n          this.render([vElement], dummyElement, true)\n          this._caches[id] = dummyElement.childNodes[0] as HTMLElement\n          dummyElement.removeChild(dummyElement.childNodes[0])\n          this.debounce(this.preacheNext)\n          return\n        } else {\n          void importModule(props.import).then(() => {\n            if (!this._preaching) return\n            this.render([vElement], dummyElement, true)\n            this._caches[id] = dummyElement.childNodes[0] as HTMLElement\n            dummyElement.removeChild(dummyElement.childNodes[0])\n            this.debounce(this.preacheNext)\n            delete props.import\n          })\n          return\n        }\n      }\n    }\n    this._preaching = false\n  }\n  dispose() {\n    for (const key in this._caches) {\n      // Dispose cached elements not in the DOM.\n      if (!this._caches[key].parentElement) {\n        disposeChildren(this._caches[key] as IoElement)\n      }\n      delete this._caches[key]\n    }\n    super.dispose()\n  }\n}\nexport const ioSelector = function(arg0?: IoSelectorProps) {\n  return IoSelector.vConstructor(arg0)\n}","import { IoElement, VDOMElement, ReactiveProperty, IoElementProps, WithBinding, Register } from '@io-gui/core'\nimport { MenuOption, ioMenuOptions, ioMenuTree } from '@io-gui/menus'\nimport { CachingType, ioSelector } from './IoSelector.js'\n\nexport type MenuPositionType = 'top' | 'left' | 'right'\nexport type SelectType = 'shallow' | 'deep' | 'all' | 'none'\n\nexport type IoNavigatorProps = IoElementProps & {\n  option?: MenuOption\n  elements?: VDOMElement[]\n  widget?: VDOMElement\n  menu?: MenuPositionType\n  depth?: number\n  select?: SelectType\n  caching?: CachingType\n  anchor?: WithBinding<string>\n}\n\n@Register\nexport class IoNavigator extends IoElement {\n  static get Style() {\n    return /* css */`\n      :host {\n        display: flex;\n        flex-direction: column;\n        flex: 1 1 auto;\n      }\n      :host[menu=left],\n      :host[menu=right] {\n        flex-direction: row;\n      }\n      :host > io-menu-tree {\n        align-self: stretch;\n        flex: 0 0 auto;\n        min-width: 10em;\n        border: var(--io_border);\n        overflow-y: auto;\n        border-radius: 0;\n      }\n      :host[menu=left] > io-menu-tree {\n        border-width: 0 var(--io_borderWidth) 0 0;\n      }\n      :host[menu=left] > io-menu-tree {\n        border-width: 0 var(--io_borderWidth) 0 0;\n      }\n      :host > io-menu-options {\n        border: none;\n        border-bottom: var(--io_border);\n        border-radius: 0;\n      }\n    `\n  }\n\n  @ReactiveProperty(Array)\n  declare elements: VDOMElement[]\n\n  @ReactiveProperty({type: MenuOption})\n  declare option: MenuOption\n\n  @ReactiveProperty(null)\n  declare widget: VDOMElement | null\n\n  @ReactiveProperty({value: 'left', type: String, reflect: true})\n  declare menu: MenuPositionType\n\n  @ReactiveProperty({value: Infinity, type: Number})\n  declare depth: number\n\n  @ReactiveProperty({value: 'shallow', type: String})\n  declare select: SelectType\n\n  @ReactiveProperty({value: 'none', type: String})\n  declare caching: CachingType\n\n  @ReactiveProperty({value: '', type: String})\n  declare anchor: string\n\n  optionMutated() {\n    this.changed()\n  }\n\n  changed() {\n    const sharedMenuConfig = {\n      option: this.option,\n      widget: this.widget,\n      depth: this.depth\n    }\n\n    // TODO: add widget and test collapse!!\n    let selected = ''\n    if (this.select === 'shallow') selected = this.option.selectedIDImmediate\n    if (this.select === 'deep') selected = this.option.selectedID\n    if (this.select === 'all') selected = '*'\n    if (this.select === 'none') selected = ''\n\n    if (this.menu === 'top') {\n      this.render([\n        ioMenuOptions({horizontal: true, ...sharedMenuConfig}),\n        ioSelector({selected: selected, anchor: this.bind('anchor'), caching: this.caching, elements: this.elements}),\n      ])\n    } else if (this.menu === 'left') {\n      this.render([\n        ioMenuTree({...sharedMenuConfig}),\n        ioSelector({selected: selected, anchor: this.bind('anchor'), caching: this.caching, elements: this.elements}),\n      ])\n    } else if (this.menu === 'right') {\n      this.render([\n        ioSelector({selected: selected, anchor: this.bind('anchor'), caching: this.caching,elements: this.elements}),\n        ioMenuTree({...sharedMenuConfig}),\n      ])\n    }\n  }\n}\n\nexport const ioNavigator = function(arg0?: IoNavigatorProps) {\n  return IoNavigator.vConstructor(arg0)\n}"],"names":["IoCollapsible","IoElement","ioBoolean","div","__decorateClass","ReactiveProperty","Property","Register","ioCollapsible","arg0","dummyElement","IMPORTED_PATHS","importModule","path","importPath","resolve","IoSelector","args","anchor","heading","style","top","headings","closestHeading","prev","curr","current","id","cache","vElement","element","span","cachedElement","i","props","key","disposeChildren","ioSelector","IoNavigator","sharedMenuConfig","selected","ioMenuOptions","ioMenuTree","MenuOption","ioNavigator"],"mappings":"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"}