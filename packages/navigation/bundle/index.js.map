{"version":3,"file":"index.js","sources":["../src/elements/IoCollapsible.ts","../src/elements/IoSelector.ts","../src/elements/IoNavigator.ts"],"sourcesContent":["import { IoElement, VDOMElement, Register, ReactiveProperty, div, IoElementProps, WithBinding, Property } from '@io-gui/core'\nimport { ioBoolean } from '@io-gui/inputs'\n\nexport type IoCollapsibleProps = IoElementProps & {\n  elements?: VDOMElement[]\n  label?: string\n  direction?: 'column' | 'row'\n  icon?: string\n  expanded?: WithBinding<boolean>\n}\n/**\n * An element with collapsible content.\n * When clicked or activated by space/enter key, it toggles the visibility of the child elements defined as `elements` property.\n **/\n\n@Register\nexport class IoCollapsible extends IoElement {\n  static get Style() {\n    return /* css */`\n    :host {\n      display: flex;\n      flex-direction: column;\n      flex-shrink: 0;\n      align-self: stretch;\n      box-sizing: content-box;\n      align-items: stretch;\n      align-self: stretch;\n      border: var(--io_border);\n      border-radius: calc(var(--io_borderRadius) - var(--io_spacing));\n      border-color: var(--io_borderColorOutset);\n      min-height: var(--io_fieldHeight);\n      background-color: var(--io_bgColorLight);\n    }\n    :host > io-boolean {\n      flex: 0 0 auto;\n      padding-left: 0;\n      margin: var(--io_spacing) var(--io_spacing2);\n      border-radius: 0;\n      background-color: transparent;\n    }\n    :host > io-boolean:before {\n      text-align: center;\n      width: var(--io_lineHeight);\n      margin-right: var(--io_spacing2);\n      content: \"▸\"\n    }\n    :host > io-boolean[value]:before {\n      content: \"▾\"\n    }\n    :host > div.io-collapsible-content {\n      position: relative;\n      display: flex;\n      align-items: flex-start;\n      flex-direction: column;\n      overflow: auto;\n      background-color: var(--io_bgColorStrong);\n    }\n    :host[direction=row] > div.io-collapsible-content {\n      flex-direction: row;\n    }\n    :host > div.io-collapsible-content:not(:empty) {\n      margin: var(--io_spacing);\n      margin-top: 0;\n      padding: var(--io_spacing);\n      border-radius: var(--io_borderRadius);\n    }\n    `\n  }\n\n  @ReactiveProperty(Array)\n  declare elements: VDOMElement[]\n\n  @ReactiveProperty('')\n  declare label: string\n\n  @ReactiveProperty({value: 'column', reflect: true})\n  declare direction: 'column' | 'row'\n\n  @ReactiveProperty('')\n  declare icon: string\n\n  @ReactiveProperty({value: false, reflect: true})\n  declare expanded: boolean\n\n  @Property('region')\n  declare role: string\n\n  changed() {\n    this.render([\n      // TODO: consider implementing caching\n      ioBoolean({icon: this.icon, true: this.label, false: this.label, value: this.bind('expanded')}),\n      div({class: 'io-collapsible-content'}, this.expanded ? this.elements : []),\n    ])\n  }\n}\nexport const ioCollapsible = function(arg0?: IoCollapsibleProps) {\n  return IoCollapsible.vConstructor(arg0)\n}","import { Register, IoElement, VDOMElement, IoElementProps, disposeChildren, ReactiveProperty, WithBinding, Property, span } from '@io-gui/core'\n\nconst dummyElement = document.createElement('div')\n/**\n * Element selector. Displays one of the virtual elements assigned in the `elements` property as its child if the name of the element matches the `value` property.\n * If `cache` property is set to `true`, a reference to the element will be kept fo later use.\n **/\n\n// TODO: consider moving io-selectior to core elements\n\nconst IMPORTED_PATHS: Record<string, any> = {}\nfunction importModule(path: string) {\n  const importPath = new URL(path, String(window.location)).pathname\n  return new Promise(resolve => {\n    if (!path || IMPORTED_PATHS[importPath]) {\n      resolve(importPath)\n    } else {\n      void import(/* @vite-ignore */ importPath)\n      .then(() => {\n        IMPORTED_PATHS[importPath] = true\n        resolve(importPath)\n      })\n    }\n  })\n};\n\nexport type CachingType = 'proactive' | 'reactive' | 'none'\n\nexport type IoSelectorProps = IoElementProps & {\n  elements?: VDOMElement[]\n  selected?: WithBinding<string>\n  anchor?: WithBinding<string>\n  caching?: CachingType\n  loading?: WithBinding<boolean>\n  import?: string // TODO: move to core?\n}\n\n@Register\nexport class IoSelector extends IoElement {\n\n  static get Style() {\n    return /* css */`\n      :host {\n        display: flex;\n        flex-direction: column;\n        position: relative;\n        overflow-y: auto !important;\n        flex: 1 1 auto;\n        justify-content: stretch;\n      }\n      @keyframes io-loading-spinner {\n        to {\n          transform: rotate(360deg);\n        }\n      }\n      :host[loading]:after {\n        content: '';\n        box-sizing: border-box;\n        position: absolute;\n        top: 50%;\n        left: 50%;\n        width: 4em;\n        height: 4em;\n        margin-top: calc(-1 * var(--io_fieldHeight));\n        margin-left: calc(-1 * var(--io_fieldHeight));\n        border-radius: 50%;\n        border: var(--io_border);\n        border-color: var(--io_borderColorStrong);\n        border-top-color: var(--io_colorBlue);\n        animation: io-loading-spinner .6s linear infinite;\n      }\n    `\n  }\n\n  @ReactiveProperty(Array)\n  declare elements: VDOMElement[]\n\n  @ReactiveProperty({value: '', type: String})\n  declare selected: string\n\n  // TODO: Setting anchor offscreen will not update once it is in the dom.\n  @ReactiveProperty({value: '', type: String})\n  declare anchor: string\n\n  @ReactiveProperty({value: 'reactive', type: String})\n  declare caching: CachingType\n\n  @ReactiveProperty({value: false, type: Boolean, reflect: true})\n  declare loading: boolean\n\n  @Property(Object)\n  declare private _caches: Record<string, IoElement | HTMLElement>\n\n  @Property(false)\n  declare private _preaching: boolean\n\n  @Property(false)\n  declare private scrollToSuspended: boolean\n\n  @Property(false)\n  declare private onScrollSuspended: boolean\n\n  static get Listeners() {\n    return {\n      scroll: 'onScrollChanged',\n    }\n  }\n  constructor(args: IoSelectorProps = {}) { super(args) }\n  init() {\n    this.preacheNext = this.preacheNext.bind(this)\n    this.startPreache = this.startPreache.bind(this)\n    this.renderDebounced = this.renderDebounced.bind(this)\n    this.anchorChangedDebounced = this.anchorChangedDebounced.bind(this)\n    this.scrollToUnsuspend = this.scrollToUnsuspend.bind(this)\n    this.onScrollUnsuspend = this.onScrollUnsuspend.bind(this)\n  }\n  anchorChanged() {\n    if (!this.scrollToSuspended) {\n      this.onScrollSuspended = true\n      this.debounce(this.onScrollUnsuspend, undefined, 120)\n    }\n    this.debounce(this.anchorChangedDebounced, undefined, 3)\n  }\n  anchorChangedDebounced() {\n    const anchor = this.anchor.split('#')[1] || this.anchor\n    if (!anchor || this.scrollToSuspended) return\n    const heading = this.querySelector(`[data-heading=\"${anchor}\"]`)\n    if (heading) {\n      const style = window.getComputedStyle(heading)\n      const top = (heading as HTMLElement).offsetTop - parseInt(style.marginTop)\n      this.scrollTo({top: top, behavior: 'smooth'})\n    } else {\n      this.scrollTo(0, 0)\n    }\n  }\n  scrollToUnsuspend() {\n    this.scrollToSuspended = false\n  }\n  onScrollUnsuspend() {\n    this.onScrollSuspended = false\n  }\n  onScrollChanged() {\n    if (this.onScrollSuspended) return\n    const anchor = this.anchor.split('#')[1] || this.anchor\n    const headings = this.querySelectorAll('[data-heading]') as NodeListOf<HTMLElement>\n    const closestHeading = Array.from(headings).reduce((prev, curr) => {\n      return (Math.abs(curr.offsetTop - this.scrollTop) < Math.abs(prev.offsetTop - this.scrollTop) ? curr : prev)\n    }, headings[0])\n    if (closestHeading) {\n      const current = closestHeading.getAttribute('data-heading')\n      if (current && current !== anchor) {\n        this.scrollToSuspended = true\n        if (this.anchor.split('#').length === 2) {\n          // TODO: triggers missing id warning if menuoptions dont include id when you scroll dcs to the top\n          this.anchor = this.anchor.split('#')[0] + '#' + current\n        } else {\n          this.anchor = current\n        }\n        this.debounce(this.scrollToUnsuspend, undefined, 120)\n      }\n    }\n  }\n  elementsChanged() {\n    // TODO: make sure all elements have props and id if selectable!\n    // TODO: fix and test edge case where reusing element in templete() might return cache from the previous element if keys collide!\n    this.startPreache()\n  }\n  selectedChanged() {\n    if (!this.selected) {\n      this.render([], this, true)\n    } else if (this.selected === '*') {\n      this.render(this.elements)\n    } else {\n      this.renderSelectedId(this.selected)\n    }\n    this.debounce(this.anchorChangedDebounced, undefined, 2)\n  }\n\n  renderSelectedId(id: string) {\n    const cache = this.caching === 'proactive' || this.caching === 'reactive'\n\n    if (!id) {\n      this.render([], this, cache)\n      this.scrollTo(0, 0)\n      return\n    }\n\n    id = id.split('#')[0]\n    // TODO: what if <io-selector> is reused in template() and ID collides?\n    if (id === (this.childNodes[0] as IoElement)?.id) return\n\n    this.render([], this, cache)\n    this.scrollTo(0, 0)\n\n    const vElement = this.elements.find((element: VDOMElement) => { return element.props?.id === id })\n\n    if (!vElement) {\n      console.warn(`IoSelector: Could not find elements with id: \"${id}\"!`)\n      this.render([span(`Could not find elements with id: \"${id}\"!`)], this, cache)\n      return\n    }\n\n    const importPath = vElement.props?.import\n\n    if (!importPath) {\n      this.debounce(this.renderDebounced, vElement)\n    } else {\n      this.loading = true\n      this._preaching = false\n      void importModule(importPath).then(() => {\n        this.loading = false\n        this.debounce(this.renderDebounced, vElement)\n        this.debounce(this.startPreache)\n      })\n    }\n  }\n  renderDebounced(vElement: VDOMElement) {\n    const cache = this.caching === 'proactive' || this.caching === 'reactive'\n    const id = vElement.props?.id\n    const cachedElement = this._caches[id]\n    if (cache && cachedElement) {\n      if ((cachedElement.parentElement as IoElement) !== this) {\n        if (this.firstChild) this.removeChild(this.firstChild)\n        this.appendChild(cachedElement as Node)\n      }\n    } else {\n      this.render([vElement], this, cache)\n      if (cache) {\n        this._caches[id] = this.childNodes[0] as IoElement\n      }\n    }\n  }\n  startPreache() {\n    if (this.caching === 'proactive' && !this._preaching) {\n      this._preaching = true\n      this.debounce(this.preacheNext)\n    }\n  }\n  preacheNext() {\n    // TODO: Test this!\n    if (!this._preaching) return\n    for (let i = 0; i < this.elements.length; i++) {\n      const vElement = this.elements[i]\n      const props = vElement.props!\n      const id = props.id\n      if (id && this._caches[id] === undefined) {\n        if (!props.import) {\n          this.render([vElement], dummyElement, true)\n          this._caches[id] = dummyElement.childNodes[0] as HTMLElement\n          dummyElement.removeChild(dummyElement.childNodes[0])\n          this.debounce(this.preacheNext)\n          return\n        } else {\n          void importModule(props.import).then(() => {\n            if (!this._preaching) return\n            this.render([vElement], dummyElement, true)\n            this._caches[id] = dummyElement.childNodes[0] as HTMLElement\n            dummyElement.removeChild(dummyElement.childNodes[0])\n            this.debounce(this.preacheNext)\n            delete props.import\n          })\n          return\n        }\n      }\n    }\n    this._preaching = false\n  }\n  dispose() {\n    for (const key in this._caches) {\n      // Dispose cached elements not in the DOM.\n      if (!this._caches[key].parentElement) {\n        disposeChildren(this._caches[key] as IoElement)\n      }\n      delete this._caches[key]\n    }\n    super.dispose()\n  }\n}\nexport const ioSelector = function(arg0?: IoSelectorProps) {\n  return IoSelector.vConstructor(arg0)\n}","import { IoElement, VDOMElement, ReactiveProperty, IoElementProps, WithBinding, Register } from '@io-gui/core'\nimport { MenuOption, ioMenuOptions, ioMenuTree } from '@io-gui/menus'\nimport { CachingType, ioSelector } from './IoSelector.js'\n\nexport type MenuPositionType = 'top' | 'left' | 'right'\nexport type SelectType = 'shallow' | 'deep' | 'all' | 'none'\n\nexport type IoNavigatorProps = IoElementProps & {\n  option?: MenuOption\n  elements?: VDOMElement[]\n  widget?: VDOMElement\n  menu?: MenuPositionType\n  depth?: number\n  select?: SelectType\n  caching?: CachingType\n  anchor?: WithBinding<string>\n}\n\n@Register\nexport class IoNavigator extends IoElement {\n  static get Style() {\n    return /* css */`\n      :host {\n        display: flex;\n        flex-direction: column;\n        flex: 1 1 auto;\n      }\n      :host[menu=left],\n      :host[menu=right] {\n        flex-direction: row;\n      }\n      :host > io-menu-tree {\n        align-self: stretch;\n        flex: 0 0 auto;\n        min-width: 10em;\n        border: var(--io_border);\n        overflow-y: auto;\n        border-radius: 0;\n      }\n      :host[menu=left] > io-menu-tree {\n        border-width: 0 var(--io_borderWidth) 0 0;\n      }\n      :host[menu=left] > io-menu-tree {\n        border-width: 0 var(--io_borderWidth) 0 0;\n      }\n      :host > io-menu-options {\n        border: none;\n        border-bottom: var(--io_border);\n        border-radius: 0;\n      }\n    `\n  }\n\n  @ReactiveProperty(Array)\n  declare elements: VDOMElement[]\n\n  @ReactiveProperty({type: MenuOption})\n  declare option: MenuOption\n\n  @ReactiveProperty(null)\n  declare widget: VDOMElement | null\n\n  @ReactiveProperty({value: 'left', type: String, reflect: true})\n  declare menu: MenuPositionType\n\n  @ReactiveProperty({value: Infinity, type: Number})\n  declare depth: number\n\n  @ReactiveProperty({value: 'shallow', type: String})\n  declare select: SelectType\n\n  @ReactiveProperty({value: 'none', type: String})\n  declare caching: CachingType\n\n  @ReactiveProperty({value: '', type: String})\n  declare anchor: string\n\n  optionMutated() {\n    this.changed()\n  }\n\n  changed() {\n    const sharedMenuConfig = {\n      option: this.option,\n      widget: this.widget,\n      depth: this.depth\n    }\n\n    // TODO: add widget and test collapse!!\n    let selected = ''\n    if (this.select === 'shallow') selected = this.option.selectedIDImmediate\n    if (this.select === 'deep') selected = this.option.selectedID\n    if (this.select === 'all') selected = '*'\n    if (this.select === 'none') selected = ''\n\n    if (this.menu === 'top') {\n      this.render([\n        ioMenuOptions({horizontal: true, ...sharedMenuConfig}),\n        ioSelector({selected: selected, anchor: this.bind('anchor'), caching: this.caching, elements: this.elements}),\n      ])\n    } else if (this.menu === 'left') {\n      this.render([\n        ioMenuTree({...sharedMenuConfig}),\n        ioSelector({selected: selected, anchor: this.bind('anchor'), caching: this.caching, elements: this.elements}),\n      ])\n    } else if (this.menu === 'right') {\n      this.render([\n        ioSelector({selected: selected, anchor: this.bind('anchor'), caching: this.caching,elements: this.elements}),\n        ioMenuTree({...sharedMenuConfig}),\n      ])\n    }\n  }\n}\n\nexport const ioNavigator = function(arg0?: IoNavigatorProps) {\n  return IoNavigator.vConstructor(arg0)\n}"],"names":["IoCollapsible","IoElement","Style","changed","this","render","ioBoolean","icon","true","label","false","value","bind","div","class","expanded","elements","__decorateClass","ReactiveProperty","Array","prototype","reflect","Property","Register","ioCollapsible","arg0","vConstructor","dummyElement","document","createElement","IMPORTED_PATHS","importModule","path","importPath","URL","String","window","location","pathname","Promise","resolve","import","then","IoSelector","Listeners","scroll","constructor","args","super","init","preacheNext","startPreache","renderDebounced","anchorChangedDebounced","scrollToUnsuspend","onScrollUnsuspend","anchorChanged","scrollToSuspended","onScrollSuspended","debounce","anchor","split","heading","querySelector","style","getComputedStyle","top","offsetTop","parseInt","marginTop","scrollTo","behavior","onScrollChanged","headings","querySelectorAll","closestHeading","from","reduce","prev","curr","Math","abs","scrollTop","current","getAttribute","length","elementsChanged","selectedChanged","selected","renderSelectedId","id","cache","caching","childNodes","vElement","find","element","props","console","warn","span","loading","_preaching","cachedElement","_caches","parentElement","firstChild","removeChild","appendChild","i","dispose","key","disposeChildren","type","Boolean","Object","ioSelector","IoNavigator","optionMutated","sharedMenuConfig","option","widget","depth","select","selectedIDImmediate","selectedID","menu","ioMenuOptions","horizontal","ioMenuTree","MenuOption","Infinity","Number","ioNavigator"],"mappings":"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"}