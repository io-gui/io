{"version":3,"file":"IoNavigatorDrawer.js","sourceRoot":"","sources":["../../src/elements/IoNavigatorDrawer.ts"],"names":[],"mappings":"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","sourcesContent":["import { Register, ReactiveProperty, IoElement, IoElementProps, VDOMElement, div, ThemeSingleton } from '@io-gui/core'\nimport { ioIcon } from '@io-gui/icons'\n\nexport type DrawerDirection = 'left' | 'right'\n\nexport type IoNavigatorDrawerProps = IoElementProps & {\n  direction: DrawerDirection\n  expanded?: boolean\n  menuContent: VDOMElement\n}\n\n@Register\nexport class IoNavigatorDrawer extends IoElement {\n  static get Style() {\n    return /* css */`\n      :host {\n        pointer-events: auto;\n        position: relative;\n        top: 0;\n        bottom: 0;\n        width: var(--io_fieldHeight) !important;\n      }\n\n      :host > .io-drawer-content {\n        position: relative;\n        display: flex;\n        overflow: hidden;\n        transition: transform 0.125s ease-out;\n        height: 100%;\n        width: var(--io-drawer-size);\n        border: var(--io_border);\n        border-color: var(--io_borderColorStrong);\n        border-top: 0 !important;\n        border-bottom: 0 !important;\n        justify-content: flex-end;\n        background-color: var(--io_bgColorStrong);\n      }\n\n      :host[direction=\"left\"] > .io-drawer-content {\n        transform: translateX(calc(var(--io-drawer-size) * -1 + var(--io_fieldHeight)));\n        flex-direction: row;\n      }\n      :host[direction=\"left\"][expanded] > .io-drawer-content {\n        transform: translateX(0);\n      }\n      \n      :host[direction=\"right\"] > .io-drawer-content {\n        transform: translateX(0);\n        flex-direction: row-reverse;\n      }\n      :host[direction=\"right\"][expanded] > .io-drawer-content {\n        transform: translateX(calc(var(--io-drawer-size) * -1 + var(--io_fieldHeight)));\n      }\n\n      :host > .io-drawer-content > .io-drawer-handle {\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        justify-content: center;\n        background-color: var(--io_bgColorLight);\n        cursor: pointer;\n        flex: 0 0 auto;\n        width: var(--io_fieldHeight);\n        @apply --unselectable;\n      }\n      :host[direction=\"left\"][expanded] > .io-drawer-content > .io-drawer-handle {\n        border-left: var(--io_border);\n        border-color: var(--io_borderColorStrong);\n      }\n      :host[direction=\"right\"][expanded] > .io-drawer-content > .io-drawer-handle {\n        border-right: var(--io_border );\n        border-color: var(--io_borderColorStrong);\n      }\n\n      :host[expanded] > .io-drawer-content > .io-drawer-handle > io-icon:first-of-type {\n        opacity: 0;\n      }\n      :host > .io-drawer-content > .io-drawer-handle > io-icon:first-of-type {\n        margin: var(--io_spacing2) auto;\n      }\n      :host > .io-drawer-content > .io-drawer-handle > io-icon:last-of-type {\n        margin: auto;\n      }\n\n      :host > .io-drawer-content > .io-navigator-drawer-menu {\n        display: flex;\n        flex: 0 0 auto;\n        overflow-y: auto;\n        flex-direction: column;\n      }\n      :host > .io-drawer-content > .io-navigator-drawer-menu > io-menu-tree {\n        flex: 1 1 auto;\n        border: none;\n        border-radius: 0;\n      }\n    `\n  }\n\n  @ReactiveProperty({type: String, value: 'left', reflect: true})\n  declare direction: DrawerDirection\n\n  @ReactiveProperty({type: Boolean, value: false, reflect: true})\n  declare expanded: boolean\n\n  @ReactiveProperty({type: Object})\n  declare menuContent: VDOMElement\n\n  constructor(args: IoNavigatorDrawerProps) {\n    super(args)\n  }\n\n  static get Listeners() {\n    return {\n      'io-menu-option-clicked': 'onMenuOptionClicked',\n      'io-menu-tree-resized': 'onMenuTreeResized',\n    }\n  }\n\n  onMenuOptionClicked() {\n    this.expanded = false\n  }\n\n  onMenuTreeResized() {\n    this.throttle(this.updateDrawerSizeThrottled)\n  }\n\n  onClick(event: MouseEvent) {\n    event.preventDefault()\n    event.stopPropagation()\n    this.expanded = !this.expanded\n  }\n\n  expandedChanged() {\n    this.dispatch('io-drawer-expanded-changed', {element: this}, true)\n  }\n\n  changed() {\n    const icon = {\n      left: this.expanded ? 'io:triangle_left' : 'io:triangle_right',\n      right: this.expanded ? 'io:triangle_right' : 'io:triangle_left',\n    }[this.direction]\n\n    // TODO: create menu vDOM from model. Dont pass vDOM as arg.\n\n    this.render([\n      div({class: 'io-drawer-content'}, [\n        div({class: 'io-navigator-drawer-menu'}, [\n          this.menuContent,\n        ]),\n        div({class: 'io-drawer-handle', '@click': this.onClick}, [\n          ioIcon({value: 'io:hamburger', size: 'small'}),\n          ioIcon({value: icon, size: 'small'})\n        ]),\n      ])\n    ])\n\n    this.throttle(this.updateDrawerSizeThrottled)\n  }\n\n  updateDrawerSizeThrottled() {\n    const menuEl = this.querySelector('.io-navigator-drawer-menu')\n    if (menuEl) {\n      const contentSize = menuEl.scrollWidth + ThemeSingleton.lineHeight\n      const contentEl = this.querySelector('.io-drawer-content') as HTMLElement\n      if (contentEl) {\n        contentEl.style.setProperty('--io-drawer-size', `${contentSize}px`)\n      }\n    }\n  }\n}\n\nexport const ioNavigatorDrawer = function(args: IoNavigatorDrawerProps) {\n  return IoNavigatorDrawer.vConstructor(args)\n}\n"]}