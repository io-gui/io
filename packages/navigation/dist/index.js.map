{"version":3,"file":"index.js","sources":["../src/elements/IoCollapsible.ts","../src/elements/IoSelector.ts","../src/elements/IoNavigatorDrawer.ts","../src/elements/IoNavigator.ts"],"sourcesContent":["import { IoElement, VDOMElement, Register, ReactiveProperty, div, IoElementProps, WithBinding, Property, clearFocusBacktrack } from '@io-gui/core'\nimport { ioBoolean } from '@io-gui/inputs'\n\nexport type IoCollapsibleProps = IoElementProps & {\n  elements?: VDOMElement[]\n  label?: string\n  direction?: 'column' | 'row'\n  icon?: string\n  expanded?: WithBinding<boolean>\n}\n/**\n * An element with collapsible content.\n * When clicked or activated by space/enter key, it toggles the visibility of the child elements defined as `elements` property.\n **/\n\n@Register\nexport class IoCollapsible extends IoElement {\n  static get Style() {\n    return /* css */`\n    :host {\n      display: flex;\n      flex-direction: column;\n      flex-shrink: 0;\n      align-self: stretch;\n      box-sizing: content-box;\n      align-items: stretch;\n      align-self: stretch;\n      border: var(--io_border);\n      border-radius: calc(var(--io_borderRadius) - var(--io_spacing));\n      border-color: var(--io_borderColorOutset);\n      min-height: var(--io_fieldHeight);\n      background-color: var(--io_bgColorLight);\n    }\n    :host > io-boolean {\n      flex: 0 0 auto;\n      padding-left: 0;\n      margin: var(--io_spacing) var(--io_spacing2);\n      border-radius: 0;\n      background-color: transparent;\n    }\n    :host > io-boolean:before {\n      text-align: center;\n      width: var(--io_lineHeight);\n      margin-right: var(--io_spacing2);\n      content: \"▸\"\n    }\n    :host > io-boolean[value]:before {\n      content: \"▾\"\n    }\n    :host > div.io-collapsible-content {\n      position: relative;\n      display: flex;\n      align-items: flex-start;\n      flex-direction: column;\n      overflow: auto;\n      background-color: var(--io_bgColorStrong);\n    }\n    :host[direction=row] > div.io-collapsible-content {\n      flex-direction: row;\n    }\n    :host > div.io-collapsible-content:not(:empty) {\n      margin: var(--io_spacing);\n      margin-top: 0;\n      padding: var(--io_spacing);\n      border-radius: var(--io_borderRadius);\n    }\n    `\n  }\n\n  @ReactiveProperty({type: Array, init: null})\n  declare elements: VDOMElement[]\n\n  @ReactiveProperty({value: '', type: String})\n  declare label: string\n\n  @ReactiveProperty({value: 'column', reflect: true})\n  declare direction: 'column' | 'row'\n\n  @ReactiveProperty({value: '', type: String})\n  declare icon: string\n\n  @ReactiveProperty({value: false, reflect: true})\n  declare expanded: boolean\n\n  @Property('region')\n  declare role: string\n\n  expandedChanged() {\n    clearFocusBacktrack()\n  }\n\n  changed() {\n    this.render([\n      // TODO: consider implementing caching\n      ioBoolean({icon: this.icon, true: this.label, false: this.label, value: this.bind('expanded')}),\n      div({class: 'io-collapsible-content'}, this.expanded ? this.elements : []),\n    ])\n  }\n}\nexport const ioCollapsible = function(arg0?: IoCollapsibleProps) {\n  return IoCollapsible.vConstructor(arg0)\n}","import { Register, IoElement, VDOMElement, IoElementProps, disposeChildren, ReactiveProperty, WithBinding, Property, span } from '@io-gui/core'\n\nconst dummyElement = document.createElement('div')\n/**\n * Element selector. Displays one of the virtual elements assigned in the `elements` property as its child if the name of the element matches the `value` property.\n * If `cache` property is set to `true`, a reference to the element will be kept fo later use.\n **/\n\n// TODO: consider moving io-selectior to core elements\n\nconst IMPORTED_PATHS: Record<string, any> = {}\nfunction importModule(path: string) {\n  const importPath = new URL(path, String(window.location)).pathname\n  return new Promise(resolve => {\n    if (!path || IMPORTED_PATHS[importPath]) {\n      resolve(importPath)\n    } else {\n      void import(/* @vite-ignore */ importPath)\n      .then(() => {\n        IMPORTED_PATHS[importPath] = true\n        resolve(importPath)\n      })\n    }\n  })\n};\n\nexport type CachingType = 'proactive' | 'reactive' | 'none'\n\nexport type IoSelectorProps = IoElementProps & {\n  elements?: VDOMElement[]\n  selected?: WithBinding<string>\n  anchor?: WithBinding<string>\n  caching?: CachingType\n  loading?: WithBinding<boolean>\n  import?: string // TODO: move to core?\n}\n\n@Register\nexport class IoSelector extends IoElement {\n\n  static get Style() {\n    return /* css */`\n      :host {\n        display: flex;\n        flex-direction: column;\n        position: relative;\n        overflow-y: auto !important;\n        flex: 1 1 auto;\n        justify-content: stretch;\n      }\n      @keyframes io-loading-spinner {\n        to {\n          transform: rotate(360deg);\n        }\n      }\n      :host[loading]:after {\n        content: '';\n        box-sizing: border-box;\n        position: absolute;\n        top: 50%;\n        left: 50%;\n        width: 4em;\n        height: 4em;\n        margin-top: calc(-1 * var(--io_fieldHeight));\n        margin-left: calc(-1 * var(--io_fieldHeight));\n        border-radius: 50%;\n        border: var(--io_border);\n        border-color: var(--io_borderColorStrong);\n        border-top-color: var(--io_colorBlue);\n        animation: io-loading-spinner .6s linear infinite;\n      }\n    `\n  }\n\n  @ReactiveProperty({type: Array, init: null})\n  declare elements: VDOMElement[]\n\n  @ReactiveProperty({value: '', type: String})\n  declare selected: string\n\n  // TODO: Setting anchor offscreen will not update once it is in the dom.\n  @ReactiveProperty({value: '', type: String})\n  declare anchor: string\n\n  @ReactiveProperty({value: 'reactive', type: String})\n  declare caching: CachingType\n\n  @ReactiveProperty({value: false, type: Boolean, reflect: true})\n  declare loading: boolean\n\n  @Property(Object)\n  declare private _caches: Record<string, IoElement | HTMLElement>\n\n  @Property(false)\n  declare private _preaching: boolean\n\n  @Property(false)\n  declare private scrollToSuspended: boolean\n\n  @Property(false)\n  declare private onScrollSuspended: boolean\n\n  static get Listeners() {\n    return {\n      scroll: 'onScrollChanged',\n    }\n  }\n  constructor(args: IoSelectorProps = {}) { super(args) }\n  init() {\n    this.preacheNext = this.preacheNext.bind(this)\n    this.startPreache = this.startPreache.bind(this)\n    this.scrollToUnsuspend = this.scrollToUnsuspend.bind(this)\n    this.onScrollUnsuspend = this.onScrollUnsuspend.bind(this)\n  }\n  anchorChanged() {\n    if (!this.scrollToSuspended) {\n      this.onScrollSuspended = true\n      this.debounce(this.onScrollUnsuspend, undefined, 120)\n    }\n    this.debounce(this.anchorChangedDebounced, undefined, 3)\n  }\n  anchorChangedDebounced() {\n    const anchor = this.anchor.split('#')[1] || this.anchor\n    if (!anchor || this.scrollToSuspended) return\n    const heading = this.querySelector(`[data-heading=\"${anchor}\"]`)\n    if (heading) {\n      const style = window.getComputedStyle(heading)\n      const top = (heading as HTMLElement).offsetTop - parseInt(style.marginTop)\n      this.scrollTo({top: top, behavior: 'smooth'})\n    } else {\n      this.scrollTo(0, 0)\n    }\n  }\n  scrollToUnsuspend() {\n    this.scrollToSuspended = false\n  }\n  onScrollUnsuspend() {\n    this.onScrollSuspended = false\n  }\n  onScrollChanged() {\n    if (this.onScrollSuspended) return\n    const anchor = this.anchor.split('#')[1] || this.anchor\n    const headings = this.querySelectorAll('[data-heading]') as NodeListOf<HTMLElement>\n    const closestHeading = Array.from(headings).reduce((prev, curr) => {\n      return (Math.abs(curr.offsetTop - this.scrollTop) < Math.abs(prev.offsetTop - this.scrollTop) ? curr : prev)\n    }, headings[0])\n    if (closestHeading) {\n      const current = closestHeading.getAttribute('data-heading')\n      if (current && current !== anchor) {\n        this.scrollToSuspended = true\n        if (this.anchor.split('#').length === 2) {\n          // TODO: triggers missing id warning if menuoptions dont include id when you scroll dcs to the top\n          this.anchor = this.anchor.split('#')[0] + '#' + current\n        } else {\n          this.anchor = current\n        }\n        this.debounce(this.scrollToUnsuspend, undefined, 120)\n      }\n    }\n  }\n  elementsChanged() {\n    // TODO: make sure all elements have props and id if selectable!\n    // TODO: fix and test edge case where reusing element in templete() might return cache from the previous element if keys collide!\n    this.selectedChanged()\n    this.startPreache()\n  }\n  selectedChanged() {\n    if (!this.selected) {\n      this.render([], this, true)\n    } else if (this.selected === '*') {\n      this.render(this.elements)\n    } else {\n      this.renderSelectedId(this.selected)\n    }\n    this.debounce(this.anchorChangedDebounced, undefined, 2)\n  }\n\n  renderSelectedId(id: string) {\n    const cache = this.caching === 'proactive' || this.caching === 'reactive'\n\n    if (!id) {\n      this.render([], this, cache)\n      this.scrollTo(0, 0)\n      return\n    }\n\n    id = id.split('#')[0]\n\n    this.render([], this, cache)\n    this.scrollTo(0, 0)\n\n    const vElement = this.elements.find((element: VDOMElement) => { return element.props?.id === id })\n\n    if (!vElement) {\n      console.warn(`IoSelector: Could not find elements with id: \"${id}\"!`)\n      this.render([span(`Could not find elements with id: \"${id}\"!`)], this, cache)\n      return\n    }\n\n    const importPath = vElement.props?.import\n\n    if (!importPath) {\n      this.debounce(this.renderDebounced, vElement)\n    } else {\n      this.loading = true\n      this._preaching = false\n      void importModule(importPath).then(() => {\n        this.loading = false\n        this.debounce(this.renderDebounced, vElement)\n        this.debounce(this.startPreache)\n      })\n    }\n  }\n  renderDebounced(vElement: VDOMElement) {\n    const cache = this.caching === 'proactive' || this.caching === 'reactive'\n    const id = vElement.props?.id\n    const cachedElement = this._caches[id]\n    if (cache && cachedElement) {\n      if ((cachedElement.parentElement as IoElement) !== this) {\n        if (this.firstChild) this.removeChild(this.firstChild)\n        this.appendChild(cachedElement as Node)\n      }\n    } else {\n      this.render([vElement], this, cache)\n      if (cache) {\n        this._caches[id] = this.childNodes[0] as IoElement\n      }\n    }\n  }\n  startPreache() {\n    if (this.caching === 'proactive' && !this._preaching) {\n      this._preaching = true\n      this.debounce(this.preacheNext)\n    }\n  }\n  preacheNext() {\n    // TODO: Test this!\n    if (!this._preaching) return\n    for (let i = 0; i < this.elements.length; i++) {\n      const vElement = this.elements[i]\n      const props = vElement.props!\n      const id = props.id\n      if (id && this._caches[id] === undefined) {\n        if (!props.import) {\n          this.render([vElement], dummyElement, true)\n          this._caches[id] = dummyElement.childNodes[0] as HTMLElement\n          dummyElement.removeChild(dummyElement.childNodes[0])\n          this.debounce(this.preacheNext)\n          return\n        } else {\n          void importModule(props.import).then(() => {\n            if (!this._preaching) return\n            this.render([vElement], dummyElement, true)\n            this._caches[id] = dummyElement.childNodes[0] as HTMLElement\n            dummyElement.removeChild(dummyElement.childNodes[0])\n            this.debounce(this.preacheNext)\n            delete props.import\n          })\n          return\n        }\n      }\n    }\n    this._preaching = false\n  }\n  dispose() {\n    for (const key in this._caches) {\n      // Dispose cached elements not in the DOM.\n      if (!this._caches[key].parentElement) {\n        disposeChildren(this._caches[key] as IoElement)\n      }\n      delete this._caches[key]\n    }\n    super.dispose()\n  }\n}\nexport const ioSelector = function(arg0?: IoSelectorProps) {\n  return IoSelector.vConstructor(arg0)\n}","import { Register, ReactiveProperty, IoElement, IoElementProps, VDOMElement, div, ThemeSingleton } from '@io-gui/core'\nimport { ioIcon } from '@io-gui/icons'\n\nexport type DrawerDirection = 'left' | 'right'\n\nexport type IoNavigatorDrawerProps = IoElementProps & {\n  direction: DrawerDirection\n  expanded?: boolean\n  menuContent: VDOMElement\n}\n\n@Register\nexport class IoNavigatorDrawer extends IoElement {\n  static get Style() {\n    return /* css */`\n      :host {\n        pointer-events: auto;\n        position: relative;\n        top: 0;\n        bottom: 0;\n        width: var(--io_fieldHeight) !important;\n      }\n\n      :host > .io-drawer-content {\n        position: relative;\n        display: flex;\n        overflow: hidden;\n        transition: transform 0.125s ease-out;\n        height: 100%;\n        width: var(--io-drawer-size);\n        border: var(--io_border);\n        border-color: var(--io_borderColorStrong);\n        border-top: 0 !important;\n        border-bottom: 0 !important;\n        justify-content: flex-end;\n        background-color: var(--io_bgColorStrong);\n      }\n\n      :host[direction=\"left\"] > .io-drawer-content {\n        transform: translateX(calc(var(--io-drawer-size) * -1 + var(--io_fieldHeight)));\n        flex-direction: row;\n      }\n      :host[direction=\"left\"][expanded] > .io-drawer-content {\n        transform: translateX(0);\n      }\n      \n      :host[direction=\"right\"] > .io-drawer-content {\n        transform: translateX(0);\n        flex-direction: row-reverse;\n      }\n      :host[direction=\"right\"][expanded] > .io-drawer-content {\n        transform: translateX(calc(var(--io-drawer-size) * -1 + var(--io_fieldHeight)));\n      }\n\n      :host > .io-drawer-content > .io-drawer-handle {\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        justify-content: center;\n        background-color: var(--io_bgColorLight);\n        cursor: pointer;\n        flex: 0 0 auto;\n        width: var(--io_fieldHeight);\n        @apply --unselectable;\n      }\n      :host[direction=\"left\"][expanded] > .io-drawer-content > .io-drawer-handle {\n        border-left: var(--io_border);\n        border-color: var(--io_borderColorStrong);\n      }\n      :host[direction=\"right\"][expanded] > .io-drawer-content > .io-drawer-handle {\n        border-right: var(--io_border );\n        border-color: var(--io_borderColorStrong);\n      }\n\n      :host[expanded] > .io-drawer-content > .io-drawer-handle > io-icon:first-of-type {\n        opacity: 0;\n      }\n      :host > .io-drawer-content > .io-drawer-handle > io-icon:first-of-type {\n        margin: var(--io_spacing2) auto;\n      }\n      :host > .io-drawer-content > .io-drawer-handle > io-icon:last-of-type {\n        margin: auto;\n      }\n\n      :host > .io-drawer-content > .io-navigator-drawer-menu {\n        display: flex;\n        flex: 0 0 auto;\n        overflow-y: auto;\n        flex-direction: column;\n      }\n      :host > .io-drawer-content > .io-navigator-drawer-menu > io-menu-tree {\n        flex: 1 1 auto;\n        border: none;\n        border-radius: 0;\n      }\n    `\n  }\n\n  @ReactiveProperty({type: String, value: 'left', reflect: true})\n  declare direction: DrawerDirection\n\n  @ReactiveProperty({type: Boolean, value: false, reflect: true})\n  declare expanded: boolean\n\n  @ReactiveProperty({type: Object})\n  declare menuContent: VDOMElement\n\n  constructor(args: IoNavigatorDrawerProps) {\n    super(args)\n  }\n\n  onClick(event: MouseEvent) {\n    event.preventDefault()\n    event.stopPropagation()\n    this.expanded = !this.expanded\n  }\n\n  expandedChanged() {\n    this.dispatch('io-drawer-expanded-changed', {element: this}, true)\n  }\n\n  changed() {\n    const icon = {\n      left: this.expanded ? 'io:triangle_left' : 'io:triangle_right',\n      right: this.expanded ? 'io:triangle_right' : 'io:triangle_left',\n    }[this.direction]\n\n    // TODO: create menu vDOM from model. Dont pass vDOM as arg.\n\n    this.render([\n      div({class: 'io-drawer-content'}, [\n        div({class: 'io-navigator-drawer-menu'}, [\n          this.menuContent,\n        ]),\n        div({class: 'io-drawer-handle', '@click': this.onClick}, [\n          ioIcon({value: 'io:hamburger', size: 'small'}),\n          ioIcon({value: icon, size: 'small'})\n        ]),\n      ])\n    ])\n\n    this.throttle(this.updateDrawerSizeThrottled)\n  }\n\n  updateDrawerSizeThrottled() {\n    const menuEl = this.querySelector('.io-navigator-drawer-menu')\n    if (menuEl) {\n      const contentSize = menuEl.scrollWidth + ThemeSingleton.lineHeight\n      const contentEl = this.querySelector('.io-drawer-content') as HTMLElement\n      if (contentEl) {\n        contentEl.style.setProperty('--io-drawer-size', `${contentSize}px`)\n      }\n    }\n  }\n}\n\nexport const ioNavigatorDrawer = function(args: IoNavigatorDrawerProps) {\n  return IoNavigatorDrawer.vConstructor(args)\n}\n","import { IoElement, VDOMElement, ReactiveProperty, IoElementProps, WithBinding, Register, div } from '@io-gui/core'\nimport { MenuOption, ioMenuOptions, ioMenuTree } from '@io-gui/menus'\nimport { CachingType, ioSelector } from './IoSelector.js'\nimport { ioNavigatorDrawer, IoNavigatorDrawer } from './IoNavigatorDrawer.js'\n\nexport type SelectType = 'shallow' | 'deep' | 'all' | 'none'\n\nexport type MenuPosition = 'top' | 'left'\n\nexport type IoNavigatorProps = IoElementProps & {\n  option?: MenuOption\n  elements?: VDOMElement[]\n  widget?: VDOMElement\n  menu?: MenuPosition\n  depth?: number\n  select?: SelectType\n  caching?: CachingType\n  anchor?: WithBinding<string>\n  minWidth?: number\n}\n\n@Register\nexport class IoNavigator extends IoElement {\n  static get Style() {\n    return /* css */`\n      :host {\n        display: flex;\n        flex: 1 1 100%;\n        max-width: 100%;\n        max-height: 100%;\n        position: relative;\n        overflow: hidden;\n        flex-direction: row-reverse;\n      }\n      :host[menu='top'] {\n        flex-direction: column-reverse;\n      }\n      :host > io-menu-tree {\n        align-self: stretch;\n        flex: 0 0 auto;\n        min-width: 10em;\n        border: var(--io_border);\n        overflow-y: auto;\n        border-radius: 0;\n      }\n      :host > io-menu-tree {\n        border-width: 0 var(--io_borderWidth) 0 0;\n      }\n      :host > io-menu-options {\n        border: none;\n        border-bottom: var(--io_border);\n        border-radius: 0;\n      }\n      :host > .io-veil {\n        position: absolute;\n        opacity: 0;\n        transition: opacity 0.125s ease-out;\n        background-color: rgba(0, 0, 0, 1);\n        pointer-events: none;\n        inset: 0;\n      }\n      :host[showveil] > .io-veil {\n        display: block;\n        opacity: 0.5;\n        pointer-events: auto;\n        cursor: pointer;\n      }\n    `\n  }\n\n  @ReactiveProperty({type: Array, init: null})\n  declare elements: VDOMElement[]\n\n  @ReactiveProperty({type: MenuOption})\n  declare option: MenuOption\n\n  @ReactiveProperty(null)\n  declare widget: VDOMElement | null\n\n  @ReactiveProperty({value: 'left', type: String, reflect: true})\n  declare menu: MenuPosition\n\n  @ReactiveProperty({value: Infinity, type: Number})\n  declare depth: number\n\n  @ReactiveProperty({value: 'shallow', type: String})\n  declare select: SelectType\n\n  @ReactiveProperty({value: 'none', type: String})\n  declare caching: CachingType\n\n  @ReactiveProperty({value: 570, type: Number})\n  declare minWidth: number\n\n  @ReactiveProperty({value: '', type: String})\n  declare anchor: string\n\n  @ReactiveProperty({value: false, type: Boolean, reflect: true})\n  declare collapsed: boolean\n\n  @ReactiveProperty({value: false, type: Boolean, reflect: true})\n  declare showVeil: boolean\n\n  static get Listeners() {\n    return {\n      'io-drawer-expanded-changed': 'onDrawerExpandedChanged',\n    }\n  }\n\n  onResized() {\n    this.debounce(this.calculateCollapsedDebounced)\n  }\n\n  calculateCollapsedDebounced() {\n    this.calculateCollapsed()\n  }\n\n  calculateCollapsed() {\n    if (this.menu === 'top') {\n      this.collapsed = false\n      return\n    }\n\n    const rect = this.getBoundingClientRect()\n    if (rect.width === 0 && rect.height === 0) return\n\n    this.collapsed = rect.width < this.minWidth\n  }\n\n  onDrawerExpandedChanged(event: CustomEvent) {\n    event.stopPropagation()\n    const srcDrawer = event.detail.element as IoNavigatorDrawer\n    this.showVeil = srcDrawer.expanded\n  }\n\n  collapseDrawer() {\n    const drawer = this.querySelector('io-navigator-drawer') as IoNavigatorDrawer\n    if (drawer) drawer.expanded = false\n  }\n\n  onVeilClick(event: MouseEvent) {\n    event.stopPropagation()\n    this.collapseDrawer()\n  }\n\n  collapsedChanged() {\n    this.collapseDrawer()\n  }\n\n  menuChanged() {\n    this.calculateCollapsed()\n  }\n\n  optionMutated() {\n    this.changed()\n  }\n\n  changed() {\n    const sharedMenuConfig = {\n      option: this.option,\n      widget: this.widget,\n      depth: this.depth\n    }\n\n    let selected = ''\n    if (this.select === 'shallow') selected = this.option.selectedIDImmediate\n    if (this.select === 'deep') selected = this.option.selectedID\n    if (this.select === 'all') selected = '*'\n    if (this.select === 'none') selected = ''\n\n    const selectorElement = ioSelector({selected: selected, anchor: this.bind('anchor'), caching: this.caching, elements: this.elements})\n    const veil = div({class: 'io-veil', '@click': this.onVeilClick})\n\n    if (this.menu === 'top') {\n      this.render([\n        selectorElement,\n        ioMenuOptions({horizontal: true, ...sharedMenuConfig}),\n      ])\n    } else if (this.menu === 'left') {\n      if (this.collapsed) {\n        this.render([\n          selectorElement,\n          veil,\n          ioNavigatorDrawer({\n            direction: 'left',\n            menuContent: ioMenuTree({...sharedMenuConfig}),\n          }),\n        ])\n      } else {\n        this.render([\n          selectorElement,\n          ioMenuTree({...sharedMenuConfig}),\n        ])\n      }\n    }\n  }\n}\n\nexport const ioNavigator = function(arg0?: IoNavigatorProps) {\n  return IoNavigator.vConstructor(arg0)\n}"],"names":["IoCollapsible","IoElement","Style","expandedChanged","clearFocusBacktrack","changed","this","render","ioBoolean","icon","true","label","false","value","bind","div","class","expanded","elements","__decorateClass","ReactiveProperty","type","Array","init","prototype","String","reflect","Property","Register","ioCollapsible","arg0","vConstructor","dummyElement","document","createElement","IMPORTED_PATHS","importModule","path","importPath","URL","window","location","pathname","Promise","resolve","import","then","IoSelector","Listeners","scroll","constructor","args","super","preacheNext","startPreache","scrollToUnsuspend","onScrollUnsuspend","anchorChanged","scrollToSuspended","onScrollSuspended","debounce","anchorChangedDebounced","anchor","split","heading","querySelector","style","getComputedStyle","top","offsetTop","parseInt","marginTop","scrollTo","behavior","onScrollChanged","headings","querySelectorAll","closestHeading","from","reduce","prev","curr","Math","abs","scrollTop","current","getAttribute","length","elementsChanged","selectedChanged","selected","renderSelectedId","id","cache","caching","vElement","find","element","props","console","warn","span","loading","_preaching","renderDebounced","cachedElement","_caches","parentElement","firstChild","removeChild","appendChild","childNodes","i","dispose","key","disposeChildren","Boolean","Object","ioSelector","IoNavigatorDrawer","onClick","event","preventDefault","stopPropagation","dispatch","left","right","direction","menuContent","ioIcon","size","throttle","updateDrawerSizeThrottled","menuEl","contentSize","scrollWidth","ThemeSingleton","lineHeight","contentEl","setProperty","ioNavigatorDrawer","IoNavigator","onResized","calculateCollapsedDebounced","calculateCollapsed","menu","collapsed","rect","getBoundingClientRect","width","height","minWidth","onDrawerExpandedChanged","srcDrawer","detail","showVeil","collapseDrawer","drawer","onVeilClick","collapsedChanged","menuChanged","optionMutated","sharedMenuConfig","option","widget","depth","select","selectedIDImmediate","selectedID","selectorElement","veil","ioMenuOptions","horizontal","ioMenuTree","MenuOption","Infinity","Number","ioNavigator"],"mappings":"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"}