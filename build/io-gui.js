class ChangeQueue{hasChanged=!1;dispatching=!1;constructor(e){this.changes=[],this.node=e,this.dispatch=this.dispatch.bind(this)}queue(e,t,o){const i=this.changes.findIndex((t=>t.property===e));-1===i?this.changes.push({property:e,value:t,oldValue:o}):t===this.changes[i].oldValue?this.changes.splice(i,1):this.changes[i].value=t}dispatch(){if(!0!==this.dispatching){for(this.dispatching=!0,this.hasChanged=!1;this.changes.length;){const e=this.changes[0];this.changes.splice(0,1);const t=e.property;e.value!==e.oldValue&&(this.hasChanged=!0,this.node[t+"Changed"]&&this.node[t+"Changed"](e),this.node.dispatchEvent(t+"-changed",e))}this.hasChanged&&(this.node.changed(),this.node.dispatchEvent("object-mutated",{object:this.node})),this.dispatching=!1}}dispose(){this.changes.length=0,delete this.node,delete this.changes}}const hardenListenerDefinition=e=>Array.isArray(e)?e:[e],listenerFromDefinition=(e,t)=>{const o=t[0],i=t[1],n="string"==typeof o?e[o]:o;return i?[n,i]:[n]};class EventDispatcher{node;isEventTarget;protoListeners={};propListeners={};addedListeners={};constructor(e){this.node=e,this.isEventTarget=e instanceof EventTarget,this.setProtoListeners(e)}setProtoListeners(e){for(const t in e._protochain?.listeners){for(let o=0;o<e._protochain.listeners[t].length;o++){const i=listenerFromDefinition(e,e._protochain.listeners[t][o]);this.protoListeners[t]=[i]}if(this.isEventTarget&&this.protoListeners[t]){const e=this.protoListeners[t][0];EventTarget.prototype.addEventListener.call(this.node,t,e[0],e[1])}}}applyPropListeners(e){const t={};for(const o in e){if(!o.startsWith("@"))continue;const i=o.slice(1),n=hardenListenerDefinition(e[o]),r=listenerFromDefinition(this.node,n);t[i]=[r]}const o=this.propListeners;for(const e in o)if(!t[e]){if(this.isEventTarget){const t=o[e][0];EventTarget.prototype.removeEventListener.call(this.node,e,t[0],t[1])}delete o[e]}for(const e in t){if(this.isEventTarget){const i=t[e][0];if(o[e]){const t=o[e][0];(t!==i||i[1]&&JSON.stringify(t[1])!==JSON.stringify(i[1]))&&EventTarget.prototype.removeEventListener.call(this.node,e,t[0],t[1])}EventTarget.prototype.addEventListener.call(this.node,e,i[0],i[1])}o[e]=t[e]}}addEventListener(e,t,o){this.addedListeners[e]||(this.addedListeners[e]=[]);if(-1!==this.addedListeners[e].findIndex((e=>e[0]===t)))return;const i=o?[t,o]:[t];this.addedListeners[e].push(i),this.isEventTarget&&EventTarget.prototype.addEventListener.call(this.node,e,t,o)}removeEventListener(e,t,o){if(this.addedListeners[e]){if(t){const i=this.addedListeners[e].findIndex((e=>e[0]===t));-1!==i&&(this.addedListeners[e].splice(i,1),this.isEventTarget&&EventTarget.prototype.removeEventListener.call(this.node,e,t,o))}else{for(let t=0;t<this.addedListeners[e].length;t++)if(this.isEventTarget){const o=this.addedListeners[e][t];EventTarget.prototype.removeEventListener.call(this.node,e,o[0],o[1])}this.addedListeners[e].length=0}0===this.addedListeners[e].length&&delete this.addedListeners[e]}}dispatchEvent(e,t,o=!0,i=this.node){if(i instanceof EventTarget)EventTarget.prototype.dispatchEvent.call(i,new CustomEvent(e,{detail:t,bubbles:o,composed:!0,cancelable:!0}));else{const o={detail:t,target:i,path:[i]};if(this.protoListeners[e])for(let t=0;t<this.protoListeners[e].length;t++){this.protoListeners[e][t][0].call(i,o)}if(this.propListeners[e]){this.propListeners[e][0][0].call(i,o)}if(this.addedListeners[e])for(let t=0;t<this.addedListeners[e].length;t++){this.addedListeners[e][t][0].call(i,o)}}}dispose(){for(const e in this.protoListeners){if(this.isEventTarget)for(let t=0;t<this.protoListeners[e].length;t++){const o=this.protoListeners[e][t];EventTarget.prototype.removeEventListener.call(this.node,e,o[0],o[1])}this.protoListeners[e].length=0,delete this.protoListeners[e]}for(const e in this.propListeners){if(this.isEventTarget){const t=this.propListeners[e][0];EventTarget.prototype.removeEventListener.call(this.node,e,t[0],t[1])}this.propListeners[e].length=0,delete this.propListeners[e]}for(const e in this.addedListeners){if(this.isEventTarget)for(let t=this.addedListeners[e].length;t--;){const o=this.addedListeners[e][t];EventTarget.prototype.removeEventListener.call(this.node,e,o[0],o[1])}this.addedListeners[e].length=0,delete this.addedListeners[e]}delete this.node,delete this.protoListeners,delete this.propListeners,delete this.addedListeners}}const bothAreNaNs=function(e,t){return"number"==typeof e&&isNaN(e)&&"number"==typeof t&&isNaN(t)};class Binding{node;property="";targets=[];targetProperties=new WeakMap;constructor(e,t){this.node=e,this.property=t,this.onSourceChanged=this.onSourceChanged.bind(this),this.onTargetChanged=this.onTargetChanged.bind(this),this.node.addEventListener(`${this.property}-changed`,this.onSourceChanged)}set value(e){this.node[this.property]=e}get value(){return this.node[this.property]}toJSON(){const e={};for(let t=0;t<this.targets.length;t++){const o=this.targets[t],i=this.getTargetProperties(o);e[o.constructor.name]=i}return{node:this.node.constructor.name,property:this.property,targets:this.targets.map((e=>e.constructor.name)),targetProperties:e}}getTargetProperties(e){return this.targetProperties.has(e)||this.targetProperties.set(e,[]),this.targetProperties.get(e)}addTarget(e,t){-1===this.targets.indexOf(e)&&this.targets.push(e);const o=this.getTargetProperties(e);if(-1===o.indexOf(t)){o.push(t);const i=e._properties.get(t);i.binding&&i.binding!==this&&i.binding.removeTarget(e,t),i.binding=this,e.addEventListener(`${t}-changed`,this.onTargetChanged),e.setProperty(t,this.node[this.property],!0)}}removeTarget(e,t){const o=this.getTargetProperties(e);if(t){const i=o.indexOf(t);o.splice(i,1);e._properties.get(t).binding=void 0,e.removeEventListener(`${t}-changed`,this.onTargetChanged)}else{for(let t=o.length;t--;){const i=o[t];e._properties.get(i).binding=void 0,e.removeEventListener(`${i}-changed`,this.onTargetChanged)}o.length=0}0===o.length&&this.targets.splice(this.targets.indexOf(e),1)}onTargetChanged(e){const t=this.node[this.property],o=e.detail.value;if(t!==o){if(bothAreNaNs(o,t))return;this.node.setProperty(this.property,o)}}onSourceChanged(e){const t=e.detail.value;for(let e=this.targets.length;e--;){const o=this.targets[e],i=this.getTargetProperties(o);for(let e=i.length;e--;){const n=i[e],r=o[n];if(r!==t){if(bothAreNaNs(t,r))continue;o.setProperty(n,t)}}}}dispose(){this.node.removeEventListener(`${this.property}-changed`,this.onSourceChanged);for(let e=this.targets.length;e--;)this.removeTarget(this.targets[e]);this.targets.length=0,delete this.node,delete this.property,delete this.targets,delete this.targetProperties}}class ProtoProperty{value;type;binding;reflect;init;constructor(e){if(null==e)this.value=e;else if("function"==typeof e)this.type=e;else if(e instanceof Binding)this.value=e.value,this.binding=e;else if(e&&e.constructor===Object){const t=e;this.value=void 0!==t.value?t.value:void 0,this.type=void 0!==t.type?t.type:void 0,t.binding instanceof Binding&&(this.binding=t.binding,this.value=this.binding.value),void 0!==t.reflect&&(this.reflect=t.reflect),void 0!==t.init&&(this.init=t.init)}else e&&e.constructor===Object||(this.value=e)}assign(e){void 0!==e.value&&(this.value=e.value),void 0!==e.type&&(this.type=e.type),void 0!==e.reflect&&(this.reflect=e.reflect),void 0!==e.init&&(this.init=e.init),void 0!==e.binding&&(this.binding=e.binding)}toJSON(){const e={value:this.value,type:this.type,reflect:this.reflect,init:this.init,binding:this.binding};return e.value&&"object"==typeof e.value&&(e.value=e.value.constructor.name),e.type&&"function"==typeof e.type&&(e.type=e.type.name),e}}function decodeInitArgument(e,t){if("this"===e)return t;if("string"!=typeof e||!e.startsWith("this."))return e;{const o=e.split(".");let i=t;for(let e=1;e<o.length;e++)i=i[o[e]];if(i)return i}}class PropertyInstance{value=void 0;type;binding;reflect=!1;init=void 0;constructor(e,t){if(this.value=t.value,this.type=t.type,this.binding=t.binding,void 0!==t.reflect&&(this.reflect=t.reflect),void 0!==t.init&&(this.init=t.init),this.binding instanceof Binding)this.value=this.binding.value;else if((void 0===this.value||null===this.value)&&null!==this.init)if(this.type===Boolean)this.value=!1;else if(this.type===String)this.value="";else if(this.type===Number)this.value=0;else if("function"==typeof this.type)if(void 0!==this.init)if(this.init instanceof Array){const t=this.init.map((t=>decodeInitArgument(t,e)));this.value=new this.type(...t)}else if(this.init instanceof Object){const t={};Object.keys(this.init).forEach((o=>{t[o]=decodeInitArgument(this.init[o],e)})),this.value=new this.type(t)}else{const t=decodeInitArgument(this.init,e);this.value=new this.type(t)}else this.value=new this.type}}const e=new WeakMap,t=[String,Number,Boolean,Date,RegExp,Map,Set,WeakMap,WeakSet];function isNonIoNodeConstructor(e){if("function"!=typeof e)return!1;let o=e.prototype;for(;o;){if(t.includes(e))return!1;if("IoNodeMixinConstructor"===o.constructor.name)return!1;if(o===Object.prototype)return!0;o=Object.getPrototypeOf(o)}return!1}function isNonIoNodeObject(e){return"object"==typeof e&&null!==e&&!e._isIoNode}function isIoNodeObjectConstructor(e){if("function"!=typeof e)return!1;let t=e.prototype;for(;t;){if("IoNodeMixinConstructor"===t.constructor.name)return!0;t=Object.getPrototypeOf(t)}return!1}class ProtoChain{constructors=[];properties={};listeners={};styles="";handlers=[];observedObjectProperties=[];observedIoNodeProperties=[];constructor(e){let t=e.prototype;for(;t&&e!==HTMLElement&&e!==Object&&e!==Array;)this.constructors.push(e),this.addHandlers(t),this.addStyles(e.Style),t=Object.getPrototypeOf(t),e=t.constructor;let o="";for(let t=this.constructors.length;t--;)e=this.constructors[t],this.addPropertiesFromDecorators(e),o=this.addStaticProperties(e.Properties,o),this.addListeners(e.Listeners);this.observedObjectProperties=this.getObservedObjectProperties(),this.observedIoNodeProperties=this.getObservedIoNodeProperties()}addPropertiesFromDecorators(t){const o=e.get(t);if(o)for(const e in o){const t=new ProtoProperty(o[e]);this.properties[e]||(this.properties[e]=t),this.properties[e].assign(t)}}addStaticProperties(e={},t=""){const o={};for(const t in e)o[t]=new ProtoProperty(e[t]);const i=JSON.stringify(o);if(i!==t)for(const n in e)this.properties[n]?this.properties[n].assign(o[n]):this.properties[n]=o[n],t=i;return t}addListeners(e){for(const t in e)if(e[t]){const o=hardenListenerDefinition(e[t]),i=this.listeners[t]=this.listeners[t]||[],n=i.findIndex((e=>e[0]===o[0]));-1!==n?i[n][1]?i[n][1]=Object.assign(i[n][1],o[1]):o[1]&&(i[n][1]=o[1]):i.push(o)}}addStyles(e){e&&-1===this.styles.indexOf(e)&&(this.styles=e+"\n"+this.styles)}addHandlers(e){const t=Object.getOwnPropertyNames(e);for(let o=0;o<t.length;o++){const i=t[o];if(/^on[A-Z]/.test(i)||/^_on[A-Z]/.test(i)||i.endsWith("Changed")||i.endsWith("Mutated")){const t=Object.getOwnPropertyDescriptor(e,i);if(void 0===t||t.get||t.set)continue;"function"==typeof e[i]&&-1===this.handlers.indexOf(i)&&this.handlers.push(i)}}}getObservedObjectProperties(){const e=[];for(const t in this.properties){const o=this.properties[t].value,i=this.properties[t].type;(isNonIoNodeObject(o)||isNonIoNodeConstructor(i))&&e.push(t)}return e}getObservedIoNodeProperties(){const e=[];for(const t in this.properties){const o=this.properties[t].value,i=this.properties[t].type;(o?._isIoNode||isIoNodeObjectConstructor(i))&&e.push(t)}return e}validateProperties(){for(const e in this.properties){const t=this.properties[e];if(-1!==[String,Number,Boolean].indexOf(t.type))(t.type===Boolean&&"boolean"!=typeof t.value||t.type===Number&&"number"!=typeof t.value||t.type===String&&"string"!=typeof t.value)&&console.warn(`Property "${e}" in ProtoChain: Incorrect value type for ${t.type} property!`);else{const o=null===t.value,i=void 0===t.value;"function"!=typeof t.type||t.value instanceof t.type||o||i||console.warn(`Property "${e}" in ProtoChain: Incorrect value type for ${t.type} property!`)}}}autobindHandlers(e){for(let t=this.handlers.length;t--;)Object.defineProperty(e,this.handlers[t],{value:e[this.handlers[t]].bind(e),writable:!0,configurable:!0})}}const Autobind=function(e,t,o){const i=o.value;return{configurable:!0,enumerable:!1,get(){if(this===e.prototype||Object.prototype.hasOwnProperty.call(this,t))return i;const o=i.bind(this);return Object.defineProperty(this,t,{configurable:!0,writable:!0,enumerable:!1,value:o}),o},set(e){Object.defineProperty(this,t,{configurable:!0,writable:!0,enumerable:!0,value:e})}}};function Register(e){e.prototype.Register(e)}const Property=function(t){return(o,i)=>{const n=o.constructor,r=e.get(n)||{};e.set(n,r),r[i]=t}},o={saturate:"\n  #ifndef saturate\n    #define saturate(v) clamp(v, 0., 1.)\n  #endif\n",translate:"\n  vec2 translate(vec2 samplePosition, vec2 xy){\n    return samplePosition - vec2(xy.x, xy.y);\n  }\n  vec2 translate(vec2 samplePosition, float x, float y){\n    return samplePosition - vec2(x, y);\n  }\n",circle:"\n  float circle(vec2 samplePosition, float radius){\n    return saturate((length(samplePosition) - radius) * uPxRatio);\n  }\n",rectangle:"\n  float rectangle(vec2 samplePosition, vec2 halfSize){\n    vec2 edgeDistance = abs(samplePosition) - halfSize;\n    float outside = length(max(edgeDistance, 0.));\n    float inside = min(max(edgeDistance.x, edgeDistance.y), 0.);\n    return 1.0 - saturate((outside + inside) * 1000000.0);\n  }\n",paintDerivativeGrid2D:"\n  float paintDerivativeGrid2D(vec2 samplePosition, vec2 gridWidth, float lineWidth) {\n    vec2 sp = samplePosition / gridWidth;\n    float fractx = abs(fract(sp.x - 0.5) - 0.5) * 2.0;\n    float fracty = abs(fract(sp.y - 0.5) - 0.5) * 2.0;\n\n    float sx = ((sp.x - 0.5) - 0.5) * 2.0;\n    float sy = ((sp.y - 0.5) - 0.5) * 2.0;\n    \n    float absx = abs(max(dFdx(sx), dFdy(sx)));\n    float absy = abs(max(dFdy(sy), dFdx(sy)));\n\n    float fadeX = 1.0 - dFdx(sx);\n    float fadeY = 1.0 - dFdy(sx);\n    if (fadeX <= 0.0 || fadeY <= 0.0) return 1.0;\n\n    float linex = fractx / absx - (0.5 * max(uPxRatio, 2.0) * lineWidth - 1.0) - 0.5;\n    float liney = fracty / absy - (0.5 * max(uPxRatio, 2.0) * lineWidth - 1.0) - 0.5;\n\n    return (1.0 - saturate(min(linex, liney)));\n  }\n",lineVertical:"\n  float lineVertical(vec2 samplePosition, float lineWidth) {\n    return (abs(samplePosition.x) * 2.0 > lineWidth) ? 0.0 : 1.0;\n  }\n",lineHorizontal:"\n  float lineHorizontal(vec2 samplePosition, float lineWidth) {\n    return (abs(samplePosition.y) * 2.0 > lineWidth) ? 0.0 : 1.0;\n  }\n",lineCross2d:"\n  float lineCross2d(vec2 samplePosition, float lineWidth) {\n    return (min(abs(samplePosition.x), abs(samplePosition.y)) * 2.0 > lineWidth) ? 0.0 : 1.0;\n  }\n",checker:"\n  float checker(vec2 samplePosition, float size) {\n    vec2 checkerPos = floor(samplePosition / size);\n    float checkerMask = mod(checkerPos.x + mod(checkerPos.y, 2.0), 2.0);\n    return checkerMask;\n  }\n",checkerX:"\n  float checkerX(vec2 samplePosition, float size) {\n    vec2 checkerPos = floor(samplePosition / size);\n    float checkerMask = mod(checkerPos.x, 2.0);\n    return checkerMask;\n  }\n",checkerY:"\n  float checkerY(vec2 samplePosition, float size) {\n    vec2 checkerPos = floor(samplePosition / size);\n    float checkerMask = mod(checkerPos.y, 2.0);\n    return checkerMask;\n  }\n",compose:"\n  vec3 compose(vec3 dst, vec4 src) {\n    return mix(dst, src.rgb, src.a);\n  }\n",paintHorizontalLine:"\n  vec3 paintHorizontalLine(vec3 dstCol, vec2 p, vec3 color) {\n    float lineShape = lineHorizontal(p, io_borderWidth);\n    return compose(dstCol, vec4(color, lineShape));\n  }\n",hue2rgb:"\n  vec3 hue2rgb(float hue) {\n    hue = fract(hue);\n    float R = abs(hue * 6. - 3.) - 1.;\n    float G = 2. - abs(hue * 6. - 2.);\n    float B = 2. - abs(hue * 6. - 4.);\n    return saturate(vec3(R,G,B));\n  }\n",hsv2rgb:"\n  vec3 hsv2rgb(vec3 hsv) {\n    vec3 rgb = hue2rgb(hsv.r);\n    return ((rgb - 1.) * hsv.g + 1.) * hsv.b;\n  }\n",hsl2rgb:"\n  vec3 hsl2rgb(vec3 hsl) {\n    vec3 rgb = hue2rgb(hsl.x);\n    float C = (1. - abs(2. * hsl.z - 1.)) * hsl.y;\n    return (rgb - 0.5) * C + hsl.z;\n  }\n"};var __decorate$G=function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};function IoNodeMixin(e){return class IoNodeMixinConstructor extends e{static get Properties(){return{reactivity:{value:"immediate",type:String}}}constructor(e={},...t){super(...t),this._protochain.autobindHandlers(this),Object.defineProperty(this,"_changeQueue",{enumerable:!1,configurable:!0,value:new ChangeQueue(this)}),Object.defineProperty(this,"_properties",{enumerable:!1,configurable:!0,value:new Map}),Object.defineProperty(this,"_bindings",{enumerable:!1,configurable:!0,value:new Map}),Object.defineProperty(this,"_eventDispatcher",{enumerable:!1,configurable:!0,value:new EventDispatcher(this)});for(const e in this._protochain.properties)Object.defineProperty(this,e,{get:function(){return this._properties.get(e).value},set:function(t){this.setProperty(e,t)},configurable:!0,enumerable:!0});for(const e in this._protochain.properties){const t=new PropertyInstance(this,this._protochain.properties[e]);this._properties.set(e,t),t.binding&&t.binding.addTarget(this,e),t.value?._isIoNode&&t.value.addEventListener("object-mutated",this.onPropertyMutated)}this.applyProperties(e),this._protochain.observedObjectProperties.length&&window.addEventListener("object-mutated",this.onPropertyMutated),this.init()}applyProperties(e){for(const t in e)this._properties.has(t)&&this.setProperty(t,e[t],!0);this._eventDispatcher.applyPropListeners(e),this.dispatchQueue()}setProperties(e){for(const t in e)this._properties.has(t)&&this.setProperty(t,e[t],!0);this.dispatchQueue()}setProperty(e,t,o=!1){const i=this._properties.get(e),n=i.value;if(t!==n){const r=t instanceof Binding?t:null;if(r){const t=i.binding;return r!==t?(t&&t.removeTarget(this,e),void r.addTarget(this,e)):void 0}i.value=t,t!==n&&(t?._isIoNode&&t.addEventListener("object-mutated",this.onPropertyMutated),n?._isIoNode&&n.removeEventListener("object-mutated",this.onPropertyMutated)),n!==t&&(this.queue(e,t,n),this.dispatchQueue(o))}}inputValue(e){if(this.value!==e||"object"==typeof this.value){const t=this.value;this.setProperty("value",e),this.dispatchEvent("value-input",{value:e,oldValue:t},!1)}}changed(){}init(){}queue(e,t,o){"none"!==this.reactivity&&this._changeQueue.queue(e,t,o)}dispatchQueue(e=!1){"debounced"===this.reactivity||e||this._changeQueue.dispatching?this.debounce(this._changeQueue.dispatch):"immediate"===this.reactivity&&this._changeQueue.dispatch()}throttle(e,t=void 0){throttle(this,e,t,0)}debounce(e,t=void 0,o=1){throttle(this,e,t,o)}onPropertyMutated(e){const t=e.detail.object,o=e.target===window?this._protochain.observedObjectProperties:this._protochain.observedIoNodeProperties;for(let e=0;e<o.length;e++){const i=o[e];if(this._properties.get(i).value===t)return void("function"==typeof this[i+"Mutated"]&&this.throttle(this[i+"Mutated"]))}}bind(e){return this._bindings.has(e)||this._bindings.set(e,new Binding(this,e)),this._bindings.get(e)}unbind(e){const t=this._bindings.get(e);t&&(t.dispose(),this._bindings.delete(e));const o=this._properties.get(e);o?.binding?.removeTarget(this,e)}addEventListener(e,t,o){this._eventDispatcher.addEventListener(e,t,o)}removeEventListener(e,t,o){this._eventDispatcher.removeEventListener(e,t,o)}dispatchEvent(e,t=void 0,o=!1,i){this._eventDispatcher.dispatchEvent(e,t,o,i)}dispose(){this._disposed||(this._bindings.forEach(((e,t)=>{e.dispose(),this._bindings.delete(t)})),delete this._bindings,this._protochain.observedObjectProperties.length&&window.removeEventListener("object-mutated",this.onPropertyMutated),delete this._protochain,this._changeQueue.dispose(),delete this._changeQueue,this._properties.forEach(((e,t)=>{e.binding?.removeTarget(this,t),e.value?._isIoNode&&e.value.removeEventListener("object-mutated",this.onPropertyMutated)})),this._eventDispatcher.dispose(),delete this._eventDispatcher,delete this._properties,Object.defineProperty(this,"_disposed",{value:!0}))}Register(e){Object.defineProperty(e,"_isIoNode",{enumerable:!1,value:!0}),Object.defineProperty(e.prototype,"_isIoNode",{enumerable:!1,value:!0}),Object.defineProperty(e.prototype,"_protochain",{value:new ProtoChain(e)})}}}let i=class IoNode extends(IoNodeMixin(Object)){};i=__decorate$G([Register],i);const n=[],r=[],s=[],a=new WeakMap,l=new WeakMap;let h=r,c=a;async function nextQueue(){return new Promise((e=>{h.push(e),c.set(e,{arg:void 0,timeout:Date.now()+1,node:void 0})}))}function throttle(e,t,o=void 0,i=1){if(0===i){if(-1===n.indexOf(t)){n.push(t);try{t(o)}catch(e){console.error(e)}return}i=1}-1===h.indexOf(t)&&h.push(t),c.has(t)?c.get(t).arg=o:c.set(t,{node:e,arg:o,timeout:Date.now()+i})}requestAnimationFrame((function animate(){n.length=0;const e=h,t=c;h=h===r?s:r,c=c===a?l:a;const o=Date.now();for(let i=0;i<e.length;i++){const n=e[i],r=t.get(n);if(t.delete(n),void 0===r&&console.warn(n),r.timeout>o)-1===h.indexOf(n)&&h.push(n),c.set(n,r);else if(!r.node?._disposed)try{void 0!==r.arg?n(r.arg):n()}catch(e){console.error(e)}}e.length=0,requestAnimationFrame(animate)}));var __decorate$F=function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};const d={},p=new RegExp("(( --[\\s\\S]*?): {([\\s\\S]*?)})","gi"),u=new RegExp("(@apply\\s.*?;)","gi"),v=new ResizeObserver((e=>{for(const t of e)t.target.onResized()})),g=Array.isArray,clense=(e,t)=>t?"string"==typeof t[0]?[...e,t]:[...e,...t]:e,buildTree=()=>e=>{return"object"!=typeof(t=e[1])||g(t)?buildTree()([e[0],{},e[1]]):{name:e[0],props:e[1],children:g(e[2])?e[2].reduce(clense,[]).map(buildTree()):e[2]};var t},constructElement=function(e){const t=window.customElements?window.customElements.get(e.name):null;if(t&&t._isIoElement)return new t(e.props);const o=document.createElement(e.name);return applyNativeElementProps(o,e.props),o},disposeElementDeep=function(e){requestAnimationFrame((()=>{const t=[...e.querySelectorAll("*"),e];for(let e=t.length;e--;)"function"==typeof t[e].dispose?t[e].dispose():t[e]._eventDispatcher&&(t[e]._eventDispatcher.dispose(),delete t[e]._eventDispatcher)}))},f=document.createElement;document.createElement=function(e,t){if(e.startsWith("io-")){const o=customElements.get(e);return o?new o:f.apply(this,[e,t])}return f.apply(this,[e,t])};const applyNativeElementProps=function(e,t){for(const o in t){const i=t[o];if("style"===o)for(const t in i)e.style.setProperty(t,i[t]);else"class"===o?e.className=i:e[o]=i;"name"===o&&e.setAttribute("name",i),"src"===o&&e.setAttribute("src",i)}e._eventDispatcher||Object.defineProperty(e,"_eventDispatcher",{enumerable:!1,configurable:!0,value:new EventDispatcher(e)}),e._eventDispatcher.applyPropListeners(t)};let b=class IoElement extends(IoNodeMixin(HTMLElement)){static get Style(){return"\n      :host {\n        box-sizing: border-box;\n        display: block;\n      }\n      :host[hidden] {\n        display: none;\n      }\n      :host[disabled] {\n        pointer-events: none;\n        opacity: 0.5;\n      }\n      :host:focus {\n        border-color: var(--io_colorBlue);\n        outline: 1px auto var(--io_colorBlue);\n        outline: 1px auto -webkit-focus-ring-color;\n      }\n      :host[aria-invalid] {\n        border: var(--io_borderFail);\n      }\n    "}constructor(...e){super(...e);for(const e in this._protochain.properties){const t=this._properties.get(e),o=t.value;null!=o&&t.reflect&&this.setAttribute(e,o)}}connectedCallback(){"function"==typeof this.onResized&&v.observe(this)}disconnectedCallback(){"function"==typeof this.onResized&&v.unobserve(this)}setProperty(e,t,o=!1){super.setProperty(e,t,o);this._properties.get(e).reflect&&this._isIoElement&&this.setAttribute(e,t)}template(e,t,o){const i=buildTree()(["first",e]).children;(t=t||this)===this&&(this.$={}),this.traverse(i,t,o)}traverse(e,t,o){const i=t.children;for(;i.length>e.length;){const e=i[i.length-1];t.removeChild(e),o||disposeElementDeep(e)}for(let n=0;n<i.length;n++){const r=i[n];if(r.localName!==e[n].name||o){const i=r,s=constructElement(e[n]);t.insertBefore(s,i),t.removeChild(i),o||disposeElementDeep(i)}else r.removeAttribute("className"),r._isIoElement?r.applyProperties(e[n].props):applyNativeElementProps(r,e[n].props)}if(i.length<e.length){const o=document.createDocumentFragment();for(let t=i.length;t<e.length;t++){const i=constructElement(e[t]);o.appendChild(i)}t.appendChild(o)}for(let t=0;t<e.length;t++){const n=i[t];e[t].props.$&&(this.$[e[t].props.$]=n),void 0!==e[t].children&&("string"==typeof e[t].children?(this._flattenTextNode(n),n._textNode.nodeValue=String(e[t].children)):"object"==typeof e[t].children&&this.traverse(e[t].children,n,o))}}Register(e){super.Register(e);const t=e.name.replace(/([a-z])([A-Z,0-9])/g,"$1-$2").toLowerCase();Object.defineProperty(e,"localName",{value:t}),Object.defineProperty(e.prototype,"localName",{value:t}),Object.defineProperty(e,"_isIoElement",{enumerable:!1,value:!0}),Object.defineProperty(e.prototype,"_isIoElement",{enumerable:!1,value:!0}),Object.defineProperty(window,e.name,{value:e}),window.customElements.define(t,e);let o="";const i=e.prototype._protochain.styles.match(p);if(i)for(let e=0;e<i.length;e++){const t=i[e].split(": {"),n=t[0].replace(" --","--"),r=t[1].replace(/}/g,"").trim().replace(/^ +/gm,"");d[n]=r,o+=i[e].replace(" --",".").replace(": {"," {")}let n=e.prototype._protochain.styles.replace(p,"");const r=n.match(u);if(r)for(let e=0;e<r.length;e++){const t=r[e].split("@apply ")[1].replace(";","");d[t]?n=n.replace(r[e],d[t]):console.warn("IoElement: cound not find mixin:",t)}n=o+n.replace(new RegExp(":host","g"),t);const s=document.createElement("style");s.innerHTML=n,s.setAttribute("id","io-style-"+t.replace("io-","")),document.head.appendChild(s)}_flattenTextNode(e){if(0===e.childNodes.length&&e.appendChild(document.createTextNode("")),"#text"!==e.childNodes[0].nodeName&&(e.innerHTML="",e.appendChild(document.createTextNode(""))),e._textNode=e.childNodes[0],e.childNodes.length>1){const t=e.textContent;for(let t=e.childNodes.length;t--;)0!==t&&e.removeChild(e.childNodes[t]);e._textNode.nodeValue=t}}get textNode(){return this._flattenTextNode(this),this._textNode.nodeValue}set textNode(e){this._flattenTextNode(this),this._textNode.nodeValue=String(e)}applyProperties(e){if(super.applyProperties(e),e.style)for(const t in e.style)this.style[t]=e.style[t]}setAttribute(e,t){!0===t?HTMLElement.prototype.setAttribute.call(this,e,""):!1===t||""===t?this.removeAttribute(e):"string"!=typeof t&&"number"!=typeof t||this.getAttribute(e)!==String(t)&&HTMLElement.prototype.setAttribute.call(this,e,String(t))}labelChanged(){this.label?this.setAttribute("aria-label",this.label):this.removeAttribute("aria-label")}disabledChanged(){this.disabled?this.setAttribute("aria-disabled",this.disabled):this.removeAttribute("aria-disabled")}};__decorate$F([Property({value:"",type:String,reflect:!0})],b.prototype,"tabindex",void 0),__decorate$F([Property({value:!1,type:Boolean,reflect:!0})],b.prototype,"contenteditable",void 0),__decorate$F([Property({value:"",type:String,reflect:!0})],b.prototype,"class",void 0),__decorate$F([Property({value:"",type:String,reflect:!0})],b.prototype,"role",void 0),__decorate$F([Property({value:"",type:String,reflect:!0})],b.prototype,"label",void 0),__decorate$F([Property({value:"",type:String,reflect:!0})],b.prototype,"name",void 0),__decorate$F([Property({value:"",type:String,reflect:!0})],b.prototype,"title",void 0),__decorate$F([Property({value:"",type:String,reflect:!0})],b.prototype,"id",void 0),__decorate$F([Property({value:!1,type:Boolean,reflect:!0})],b.prototype,"hidden",void 0),__decorate$F([Property({value:!1,type:Boolean,reflect:!0})],b.prototype,"disabled",void 0),b=__decorate$F([Register],b);var __decorate$E=function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};const m=new class EmulatedLocalStorage{constructor(){Object.defineProperty(this,"store",{value:new Map}),Object.defineProperty(this,"warned",{value:!1,writable:!0})}get permitted(){try{return"true"===self.localStorage.getItem("IoStorage:user-permitted")}catch(e){console.warn("IoStorage: Cannot access localStorage. Check browser privacy settings!")}return!1}set permitted(e){try{e?(console.log("IoStorage: localStorage permission granted."),this.store.set("IoStorage:user-permitted",String(e)),this.store.forEach(((e,t)=>{self.localStorage.setItem(t,String(e)),this.store.delete(t)}))):(console.log("IoStorage: localStorage permission revoked."),self.localStorage.setItem("IoStorage:user-permitted",String(e)),new Map(Object.entries(self.localStorage)).forEach(((e,t)=>{this.store.set(t,e)})),self.localStorage.clear())}catch(e){console.warn("IoStorage: Cannot access localStorage. Check browser privacy settings!")}}setItem(e,t){const o="object"==typeof t?JSON.stringify(t):String(t);"IoStorage:user-permitted"!==e?this.permitted?self.localStorage.setItem(e,o):(this.store.set(e,o),this.warned||this.permitted||(console.warn("IoStorage: localStorage permission not set."),this.warned=!0)):this.permitted="true"===t}getItem(e){return this.permitted?self.localStorage.getItem(e):this.store.has(e)?this.store.get(e):null}removeItem(e){if(this.permitted)return self.localStorage.removeItem(e);this.store.delete(e)}clear(){if(this.permitted)return self.localStorage.clear();this.store.clear()}},y={local:new Map,hash:new Map,none:new Map};let _={};function genObjectStorageID(e){const t=JSON.stringify(e);let o=0;for(let e=0;e<t.length;e++)o=Math.imul(31,o)+t.charCodeAt(e)|0;return"io-local-state-"+String(o)}let x=class IoStorageNode extends i{constructor(e){const t=e.storage||"none";if(y[t].has(e.key))return y[t].get(e.key);{const o=e.default||e.value;switch(e.storage){case"hash":{const t=function getValueFromHash(e){if(_=parseHash(self.location.hash),_[e])try{return JSON.parse(_[e])}catch(t){return _[e]}}(e.key);if(void 0!==t)try{e.value=JSON.parse(t)}catch(o){e.value=t}break}case"local":{const t=m.getItem("IoStorage:"+e.key);t&&(e.value=JSON.parse(t));break}}return void 0===e.value&&(e.value=o),super(Object.assign({default:o},e)),"__proto__"!==e.key&&y[t].set(e.key,this),this.binding=this.bind("value"),this.binding.dispose=()=>{this._clearStorage()},this}}dispose(){this._clearStorage(),super.dispose()}_clearStorage(){switch(this.storage){case"hash":this.removeValueToHash();break;case"local":m.removeItem("IoStorage:"+this.key)}const e=this.storage;y[e].delete(this.key)}valueChanged(){switch(this.storage){case"hash":this.saveValueToHash();break;case"local":null===this.value||void 0===this.value||this.value===this.default?m.removeItem("IoStorage:"+this.key):m.setItem("IoStorage:"+this.key,JSON.stringify(this.value))}}removeValueToHash(){_=parseHash(self.location.hash),delete _[this.key];let e="";for(const t in _)e+=t+"="+_[t]+"&";e?(e=e.slice(0,-1),self.location.hash=e):history.replaceState("",document.title,self.location.pathname+self.location.search)}saveValueToHash(){_=parseHash(self.location.hash);const e=this.value;void 0!==e&&""!==e&&e!==this.default?"string"==typeof e?isNaN(e)?_[this.key]=e:_[this.key]='"'+e+'"':_[this.key]=JSON.stringify(e):delete _[this.key];let t="";for(const e in _)t+=e+"="+_[e]+"&";t?(t=t.slice(0,-1),self.location.hash=t):history.replaceState("",document.title,self.location.pathname+self.location.search)}};__decorate$E([Property({value:"",type:String})],x.prototype,"key",void 0),__decorate$E([Property({value:void 0})],x.prototype,"value",void 0),__decorate$E([Property({value:void 0})],x.prototype,"default",void 0),__decorate$E([Property({value:"none",type:String})],x.prototype,"storage",void 0),x=__decorate$E([Register],x);const C=Object.assign((e=>new x(e).binding),{permit(){m.permitted=!0},unpermit(){m.permitted=!1}});function parseHash(e){return e.substring(1).split("&").reduce((function(e,t){const o=t.split("=");return o[0]&&o[1]&&(e[o[0]]=o[1].replace(/%22/g,'"').replace(/%20/g," ")),e}),{})}function updateAllFromHash(){_=parseHash(self.location.hash);for(const e in _)if(y.hash.has(e)){const t=y.hash.get(e);try{t.value=JSON.parse(_[e])}catch(o){t.value=_[e]}}}self.addEventListener("hashchange",updateAllFromHash,!1),updateAllFromHash();var __decorate$D=function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};const w="v0.10",P=document.createElement("style");P.setAttribute("id","io-theme-variables-"+w),document.head.appendChild(P);class Color{r;g;b;a;constructor(e,t,o,i){this.r=e,this.g=t,this.b=o,this.a=i}toCss(){const e=Math.floor(255*this.r),t=Math.floor(255*this.g),o=Math.floor(255*this.b);return void 0!==this.a&&1!==this.a?`rgba(${e}, ${t}, ${o}, ${this.a})`:`rgb(${e}, ${t}, ${o})`}}const S={spacing:2,spacing2:0,spacing3:0,spacing5:0,spacing8:0,lineHeight:20,fontSize:14,fieldHeight:0,fieldHeight2:0,fieldHeight3:0,fieldHeight4:0,fieldHeight5:0,fieldHeight6:0,fieldHeight7:0,fieldHeight8:0,fieldHeight9:0,fieldHeight10:0,fieldHeight11:0,fieldHeight12:0,borderRadius:2,borderRadius2:0,borderWidth:1,borderColor:new Color(0,0,0,.2),borderColorLight:new Color(1,1,1,.8),borderColorDark:new Color(0,0,0,.4),bgColor:new Color(.85,.85,.85,1),bgColorStrong:new Color(.9,.9,.9,1),bgColorDimmed:new Color(.8,.8,.8,1),bgColorRed:new Color(1,.5,.3,1),bgColorGreen:new Color(.2,.9,.3,1),bgColorBlue:new Color(.2,.5,.9,1),bgColorField:new Color(.95,.96,.95,1),color:new Color(.25,.25,.2,1),colorStrong:new Color(0,0,0,1),colorDimmed:new Color(.6,.6,.6,1),colorRed:new Color(1,.2,0,1),colorGreen:new Color(0,.6,.1,1),colorBlue:new Color(.2,.3,1,1),colorWhite:new Color(1,1,1,1),colorField:new Color(0,.05,.02,1),gradientColorStart:new Color(.9,.9,.9,1),gradientColorEnd:new Color(.75,.75,.75,1),shadowColor:new Color(0,0,0,.2)},O={spacing:2,spacing2:0,spacing3:0,spacing5:0,spacing8:0,lineHeight:20,fontSize:14,fieldHeight:0,fieldHeight2:0,fieldHeight3:0,fieldHeight4:0,fieldHeight5:0,fieldHeight6:0,fieldHeight7:0,fieldHeight8:0,fieldHeight9:0,fieldHeight10:0,fieldHeight11:0,fieldHeight12:0,borderRadius:2,borderRadius2:0,borderWidth:1,borderColor:new Color(1,1,1,.5),borderColorLight:new Color(1,1,1,.3),borderColorDark:new Color(0,0,0,1),bgColor:new Color(.2,.2,.2,1),bgColorStrong:new Color(.15,.15,.15,1),bgColorDimmed:new Color(.25,.25,.25,1),bgColorRed:new Color(.7,.2,.1,1),bgColorGreen:new Color(.1,.5,.2,1),bgColorBlue:new Color(0,.3,.65,1),bgColorField:new Color(.02,.02,.02,1),color:new Color(.6,.6,.6,1),colorStrong:new Color(.86,.86,.86,1),colorDimmed:new Color(.3,.3,.3,1),colorRed:new Color(1,.4,.4,1),colorGreen:new Color(.4,.95,.3,1),colorBlue:new Color(.6,.9,1,1),colorWhite:new Color(1,1,1,1),colorField:new Color(.65,.7,.68,1),gradientColorStart:new Color(.45,.45,.45,1),gradientColorEnd:new Color(.2,.2,.2,1),shadowColor:new Color(0,0,0,.2)},R=C({value:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",storage:"local",key:"theme-"+w}),k=C({value:{},storage:"local",key:"io-themes-"+w});let E=class IoTheme extends i{static get Properties(){const e={};for(const t in S){const o=S[t];e[t]=o instanceof Object?{value:o,type:Color}:o}return e}init(){this.registerTheme("light",S),this.registerTheme("dark",O),this.saveTheme=this.saveTheme.bind(this),this.themeIDChanged()}registerTheme(e,t){this.themeDefaults[e]=t,this.setProperty("themeDefaults",JSON.parse(JSON.stringify(this.themeDefaults)),!0),k.value[e]=k.value[e]||t,k.value=JSON.parse(JSON.stringify(k.value))}reset(){k.value=JSON.parse(JSON.stringify(this.themeDefaults)),this.themeIDChanged()}themeIDChanged(){const e=k.value[this.themeID];for(const t in e)e[t]instanceof Object&&'["r","g","b","a"]'===JSON.stringify(Object.keys(e[t]))&&(e[t]=new Color(e[t].r,e[t].g,e[t].b,e[t].a));this.setProperties(e)}onPropertyMutated(e){super.onPropertyMutated(e),this.changed(),this.dispatchEvent("object-mutated",{object:this})}changed(){this.fieldHeight=this.lineHeight+2*(this.spacing+this.borderWidth),this.fieldHeight2=2*this.fieldHeight,this.fieldHeight3=3*this.fieldHeight,this.fieldHeight4=4*this.fieldHeight,this.fieldHeight5=5*this.fieldHeight,this.fieldHeight6=6*this.fieldHeight,this.fieldHeight7=7*this.fieldHeight,this.fieldHeight8=8*this.fieldHeight,this.fieldHeight9=9*this.fieldHeight,this.fieldHeight10=10*this.fieldHeight,this.fieldHeight11=11*this.fieldHeight,this.fieldHeight12=12*this.fieldHeight,this.spacing2=2*this.spacing,this.spacing3=3*this.spacing,this.spacing5=5*this.spacing,this.spacing8=8*this.spacing,this.borderRadius2=this.borderRadius+this.spacing;const e=Array.from(Object.keys(S)).reduce(((e,t)=>(k.value[this.themeID][t]=this[t],"object"==typeof this[t]?`${e}--io_${t}: ${this[t].toCss()};\n    `:`${e}--io_${t}: ${this[t]}px;\n    `)),"");P.innerHTML=`body {\n  ${e}\n}\n\n  body {\n    --io_border: var(--io_borderWidth) solid var(--io_borderColor);\n    --io_borderColorInset: var(--io_borderColorDark) var(--io_borderColorLight) var(--io_borderColorLight) var(--io_borderColorDark);\n    --io_borderColorOutset: var(--io_borderColorLight) var(--io_borderColorDark) var(--io_borderColorDark) var(--io_borderColorLight);\n    --io_gradientOutset: linear-gradient(180deg, var(--io_gradientColorStart), var(--io_gradientColorEnd) 100%);\n    --io_gradientInset: linear-gradient(0deg, var(--io_gradientColorStart), var(--io_gradientColorEnd) 150%);\n    --io_shadow: 2px 2px 6px var(--io_shadowColor), 1px 1px 1px var(--io_shadowColor);\n    --io_shadowInset: 1px 1px 1px inset var(--io_shadowColor);\n    --io_shadowOutset: 1px 1px 2px var(--io_shadowColor);\n  }\n`,this.debounce(this.saveTheme,void 0,100)}saveTheme(){k.value=JSON.parse(JSON.stringify(k.value))}};__decorate$D([Property({type:Object})],E.prototype,"themeDefaults",void 0),__decorate$D([Property({type:String,binding:R})],E.prototype,"themeID",void 0),__decorate$D([Property("debounced")],E.prototype,"reactivity",void 0),E=__decorate$D([Register],E);const I=new E;var __decorate$C=function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};const j=document.createElement("canvas"),M=j.getContext("webgl",{antialias:!1,premultipliedAlpha:!1});M.getExtension("OES_standard_derivatives"),M.enable(M.BLEND),M.blendFunc(M.SRC_ALPHA,M.ONE_MINUS_SRC_ALPHA),M.disable(M.DEPTH_TEST);const L=M.createBuffer();M.bindBuffer(M.ARRAY_BUFFER,L),M.bufferData(M.ARRAY_BUFFER,new Float32Array([-1,1,0,-1,-1,0,1,-1,0,1,1,0]),M.STATIC_DRAW),M.bindBuffer(M.ARRAY_BUFFER,null);const N=M.createBuffer();M.bindBuffer(M.ARRAY_BUFFER,N),M.bufferData(M.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),M.STATIC_DRAW),M.bindBuffer(M.ARRAY_BUFFER,null);const A=M.createBuffer();M.bindBuffer(M.ELEMENT_ARRAY_BUFFER,A),M.bufferData(M.ELEMENT_ARRAY_BUFFER,new Uint16Array([3,2,1,3,1,0]),M.STATIC_DRAW),M.bindBuffer(M.ELEMENT_ARRAY_BUFFER,null),M.bindBuffer(M.ELEMENT_ARRAY_BUFFER,A);const D=new WeakMap;let H,T=class IoGl extends b{static get Style(){return"\n      :host {\n        position: relative;\n        overflow: hidden !important;\n        user-select: none;\n      }\n      :host > canvas {\n        position: absolute;\n        pointer-events: none;\n        image-rendering: pixelated;\n      }\n    "}needsResize=!1;canvas;ctx;static get Vert(){return"\n      attribute vec3 position;\n      attribute vec2 uv;\n      varying vec2 vUv;\n\n      void main(void) {\n        vUv = uv;\n        gl_Position = vec4(position, 1.0);\n      }\n\n"}static get GlUtils(){return`\n      ${o.saturate}\n      ${o.translate}\n      ${o.circle}\n      ${o.rectangle}\n      ${o.paintDerivativeGrid2D}\n      ${o.lineVertical}\n      ${o.lineHorizontal}\n      ${o.lineCross2d}\n      ${o.checker}\n      ${o.checkerX}\n      ${o.checkerY}\n      ${o.compose}\n      ${o.paintHorizontalLine}\n    `}static get Frag(){return"\n      void main(void) {\n        gl_FragColor = uColor;\n      }\n\n"}initPropertyUniform(e,t){switch(t.value.constructor){case Boolean:return"uniform int "+e+";\n";case Number:return"uniform float "+e+";\n";case Array:return this._vecLengths[e]=t.value.length,"uniform vec"+t.value.length+" "+e+";\n";case Color:return this._vecLengths[e]=4,"uniform vec4 "+e+";\n"}return""}initShader(){let e="\n    #extension GL_OES_standard_derivatives : enable\n    precision highp float;\n";this.theme._properties.forEach(((t,o)=>{e+=this.initPropertyUniform("io_"+o,t)})),e+="\n",this._properties.forEach(((t,o)=>{const i="u"+o.charAt(0).toUpperCase()+o.slice(1);e+=this.initPropertyUniform(i,t)})),e+=this.constructor.prototype._glUtils;const t=M.createShader(M.VERTEX_SHADER);if(M.shaderSource(t,this.constructor.Vert),M.compileShader(t),!M.getShaderParameter(t,M.COMPILE_STATUS)){const e=M.getShaderInfoLog(t);console.error("IoGl [Vertex Shader] "+this.localName+" error:"),console.warn(e)}const o=M.createShader(M.FRAGMENT_SHADER);if(M.shaderSource(o,e+this.constructor.Frag),M.compileShader(o),!M.getShaderParameter(o,M.COMPILE_STATUS)){const e=M.getShaderInfoLog(o);console.error("IoGl [Frament Shader] "+this.localName+" error:"),console.warn(e)}const i=M.createProgram();return M.attachShader(i,t),M.attachShader(i,o),i}constructor(e={}){super(e),this.canvas=document.createElement("canvas"),this.appendChild(this.canvas),this.ctx=this.canvas.getContext("2d",{alpha:!0}),this._vecLengths={},this.theme._properties.forEach(((e,t)=>{e.type===Color&&(this._vecLengths["io_"+t]=4)})),this._properties.forEach(((e,t)=>{const o="u"+t.charAt(0).toUpperCase()+t.slice(1);e.type===Array&&(this._vecLengths[o]=e.value.length)})),D.has(this.constructor)?this._shader=D.get(this.constructor):(this._shader=this.initShader(),D.set(this.constructor,this._shader)),M.linkProgram(this._shader);const t=M.getAttribLocation(this._shader,"position");M.bindBuffer(M.ARRAY_BUFFER,L),M.vertexAttribPointer(t,3,M.FLOAT,!1,0,0),M.enableVertexAttribArray(t);const o=M.getAttribLocation(this._shader,"uv");M.bindBuffer(M.ARRAY_BUFFER,N),M.vertexAttribPointer(o,2,M.FLOAT,!1,0,0),M.enableVertexAttribArray(o),this.updateThemeUniforms()}onResized(){const e=window.devicePixelRatio,t=this.getBoundingClientRect(),o=window.getComputedStyle(this),i=parseInt(o.borderRightWidth)+parseInt(o.borderLeftWidth),n=parseInt(o.borderTopWidth)+parseInt(o.borderBottomWidth),r=Math.max(0,Math.floor(t.width-i)),s=Math.max(0,Math.floor(t.height-n));(r!==this.size[0]||s!==this.size[1]||e!==this.pxRatio)&&(this.canvas.style.width=Math.floor(r)+"px",this.canvas.style.height=Math.floor(s)+"px",this.needsResize=!0,this.setProperties({size:[r,s],pxRatio:e}))}themeMutated(){this.updateThemeUniforms(),this.throttle(this._onRender)}changed(){this.throttle(this._onRender)}_onRender(){const e=Math.floor(this.size[0]*this.pxRatio),t=Math.floor(this.size[1]*this.pxRatio);e&&t&&(this.setShaderProgram(),this._properties.forEach(((e,t)=>{const o="u"+t.charAt(0).toUpperCase()+t.slice(1);this.updatePropertyUniform(o,e)})),this.needsResize&&(this.canvas.width=e,this.canvas.height=t,this.needsResize=!1),j.width=e,j.height=t,M.viewport(0,0,e,t),this.transparent&&(M.clearColor(0,0,0,0),M.clear(M.COLOR_BUFFER_BIT),this.ctx.clearRect(0,0,e,t)),M.drawElements(M.TRIANGLES,6,M.UNSIGNED_SHORT,0),this.ctx.drawImage(j,0,0))}setShaderProgram(){H!==this._shader&&(H=this._shader,M.useProgram(this._shader))}updatePropertyUniform(e,t){this.setShaderProgram(),this.setUniform(e,t.value)}updateThemeUniforms(){this.theme._properties.forEach(((e,t)=>{this.updatePropertyUniform("io_"+t,e)}))}setUniform(e,t){const o=M.getUniformLocation(this._shader,e);if(null===o)return;let i,n=typeof t;switch(t instanceof Array&&(n="array"),n){case"boolean":M.uniform1i(o,t?1:0);break;case"number":M.uniform1f(o,t??1);break;case"object":case"array":switch(i=[0,1,2,3],"object"==typeof t&&(void 0!==t.x?i=["x","y","z","w"]:void 0!==t.r?i=["r","g","b","a"]:void 0!==t.h?i=["h","s","v","a"]:void 0!==t.c&&(i=["c","m","y","k"])),this._vecLengths[e]){case 2:if(void 0===t){M.uniform2f(o,0,0);break}M.uniform2f(o,t[i[0]]??1,t[i[1]]??1);break;case 3:if(void 0===t){M.uniform3f(o,0,0,0);break}M.uniform3f(o,t[i[0]]??1,t[i[1]]??1,t[i[2]]??1);break;case 4:if(void 0===t){M.uniform4f(o,0,0,0,0);break}M.uniform4f(o,t[i[0]]??1,t[i[1]]??1,t[i[2]]??1,t[i[3]]??1)}}}Register(e){super.Register(e);let t="";const o=e.prototype._protochain.constructors;for(let e=o.length;e--;){const i=o[e],n=Object.getOwnPropertyDescriptor(i,"GlUtils");n&&n.get&&(t+=i.GlUtils)}Object.defineProperty(e.prototype,"_glUtils",{enumerable:!1,value:t})}};__decorate$C([Property({type:Boolean,value:!1})],T.prototype,"transparent",void 0),__decorate$C([Property({type:Array,init:[0,0]})],T.prototype,"size",void 0),__decorate$C([Property({type:Array,init:[1,1,1,1]})],T.prototype,"color",void 0),__decorate$C([Property({type:Number,value:1})],T.prototype,"pxRatio",void 0),__decorate$C([Property({type:i,value:I})],T.prototype,"theme",void 0),__decorate$C([Property("debounced")],T.prototype,"reactivity",void 0),T=__decorate$C([Register],T);var __decorate$B=function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};let z=null;window.addEventListener("focusin",(()=>{z=document.activeElement}),{capture:!1}),window.addEventListener("blur",(()=>{setTimeout((()=>{document.activeElement===document.body&&(z=null)}))}),{capture:!0});let B=class IoOverlay extends b{static get Style(){return"\n      :host {\n        display: block;\n        position: fixed;\n        top: 0;\n        left: 0;\n        bottom: 0;\n        right: 0;\n        z-index: 100000;\n        user-select: none;\n        overflow: hidden;\n        pointer-events: none;\n        touch-action: none;\n        background: transparent;\n      }\n      :host[expanded] {\n        pointer-events: all;\n      }\n      :host > * {\n        position: absolute !important;\n        touch-action: none;\n        box-shadow: var(--io_shadow);\n      }\n    "}static get Listeners(){return{pointerdown:["stopPropagation",{passive:!1}],pointermove:["stopPropagation",{passive:!1}],pointerup:"_onPointerup",contextmenu:"_onContextmenu",focusin:"_onFocusIn",scroll:"_onScroll",wheel:["_onScroll",{passive:!1}],mousedown:["stopPropagation",{passive:!1}],mousemove:["stopPropagation",{passive:!1}],mouseup:["stopPropagation",{passive:!1}],touchstart:["stopPropagation",{passive:!1}],touchmove:["stopPropagation",{passive:!1}],touchend:["stopPropagation",{passive:!1}],keydown:["stopPropagation",{passive:!1}],keyup:["stopPropagation",{passive:!1}]}}constructor(e={}){super(e),Object.defineProperty(this,"x",{value:0,writable:!0}),Object.defineProperty(this,"y",{value:0,writable:!0})}stopPropagation(e){e.stopPropagation()}onResized(){this.expanded=!1}_onPointerup(e){e.composedPath()[0]===this&&this.throttle(this._onCollapse)}_onCollapse(){this.expanded=!1}_onContextmenu(e){e.preventDefault()}_onFocusIn(e){e.stopPropagation()}_onScroll(e){e.composedPath()[0]===this&&this.throttle(this._onCollapse)}nudgeDown(e,t,o,i,n){t=Math.max(0,Math.min(t,window.innerWidth-i.width));const r=o+i.height<window.innerHeight;return!(!r&&!n)&&(r||(o=window.innerHeight-i.height),e.style.left=t+"px",e.style.top=o+"px",!0)}nudgeUp(e,t,o,i,n){t=Math.max(0,Math.min(t,window.innerWidth-i.width));const r=o-i.height>0;return!(!r&&!n)&&(r||(o=0),e.style.left=t+"px",e.style.top=o-i.height+"px",!0)}nudgeRight(e,t,o,i,n){const r=t+i.width<window.innerWidth;return!(!r&&!n)&&(r||(t=window.innerWidth-i.width),e.style.left=t+"px",e.style.top=Math.min(o,window.innerHeight-i.height)+"px",!0)}nudgeLeft(e,t,o,i,n){const r=t-i.width>0;return!(!r&&!n)&&(r||(t=0),e.style.left=t-i.width+"px",e.style.top=Math.min(o,window.innerHeight-i.height)+"px",!0)}nudgePointer(e,t,o,i){return e.style.left=Math.max(0,Math.min(t,window.innerWidth-i.width))+"px",e.style.top=Math.max(0,Math.min(o,window.innerHeight-i.height))+"px",!0}setElementPosition(e,t,o){const i=e.getBoundingClientRect(),n=o.left,r=o.top,s=o.right,a=o.bottom,l=window.innerHeight-a,h=window.innerWidth-s;switch(t){case"pointer":this.nudgePointer(e,this.x+5,this.y+5,i);break;case"up":this.nudgeUp(e,n,r,i)||this.nudgeDown(e,n,a,i)||this.nudgeUp(e,n,r,i,r>l)||this.nudgeDown(e,n,a,i,r<=l);break;case"left":this.nudgeLeft(e,n,r,i)||this.nudgeRight(e,s,r,i)||this.nudgeLeft(e,n,r,i,n>h)||this.nudgeRight(e,s,r,i,n<=h);break;case"down":this.nudgeDown(e,n,a,i)||this.nudgeUp(e,n,r,i)||this.nudgeDown(e,n,a,i,l>r)||this.nudgeUp(e,n,r,i,l<=r);break;default:this.nudgeRight(e,s,r,i)||this.nudgeLeft(e,n,r,i)||this.nudgeRight(e,s,r,i,h>n)||this.nudgeLeft(e,n,r,i,h<=n)}}appendChild(e){super.appendChild(e),e.addEventListener("expanded-changed",this.onChildExpanded),this.onChildExpanded()}removeChild(e){super.removeChild(e),e.removeEventListener("expanded-changed",this.onChildExpanded),this.onChildExpanded()}onChildExpanded(){this.throttle(this.onChildExpandedDelayed)}onChildExpandedDelayed(){for(let e=this.children.length;e--;)if(this.children[e].expanded)return void(this.expanded=!0);this.throttle(this._onCollapse)}expandedChanged(){if(!this.expanded){for(let e=this.children.length;e--;)this.children[e].expanded=!1;z&&z.focus()}}};__decorate$B([Property({value:!1,type:Boolean,reflect:!0})],B.prototype,"expanded",void 0),B=__decorate$B([Register],B);const F=new B;document.body.appendChild(F);var __decorate$A=function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};let $=class IoLabel extends b{static get Style(){return"\n      --ioLabel: {\n        display: inline-block;\n        height: var(--io_lineHeight);\n        line-height: var(--io_lineHeight);\n        font-size: var(--io_fontSize);\n        padding: 0 var(--io_spacing);\n      }\n      :host {\n        @apply --ioLabel;\n      }\n      :host:not([label]) {\n        display: none;\n      }\n    "}labelChanged(){super.labelChanged(),this.textNode=this.label}};$=__decorate$A([Register],$);var __decorate$z=function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};let V=class IoField extends b{static get Style(){return"\n      --ioField: {\n        display: flex;\n\n        cursor: pointer;\n        user-select: none;\n        -webkit-touch-callout: none;\n\n        overflow: hidden;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n\n        height: var(--io_fieldHeight);\n        line-height: var(--io_lineHeight);\n\n        font-size: var(--io_fontSize);\n        border: var(--io_border);\n        border-radius: var(--io_borderRadius);\n        border-color: transparent;\n        color: var(--io_colorField);\n        background-color: var(--io_bgColorField);\n        padding-top: var(--io_spacing);\n        padding-bottom: var(--io_spacing);\n        padding-left: var(--io_spacing);\n        padding-right: var(--io_spacing);\n        transition: background-color 0.25s;\n      }\n      :host {\n        @apply --ioField;\n      }\n      :host[appearance=neutral] {\n        color: var(--io_color);\n        background-color: transparent;\n      }\n      :host[appearance=inset] {\n        border-color: var(--io_borderColorInset);\n        padding-top: calc(var(--io_spacing) + 0.05em);\n        padding-bottom: calc(var(--io_spacing) - 0.05em);\n      }\n      :host[appearance=outset] {\n        border-color: var(--io_borderColorOutset);\n        background-image: var(--io_gradientOutset);\n      }\n      :host.red,\n      :host[invalid] {\n        color: var(--io_colorWhite);\n        background-color: var(--io_bgColorRed);\n        border-color: var(--io_colorRed);\n      }\n      :host.green {\n        color: var(--io_colorWhite);\n        background-color: var(--io_bgColorGreen);\n        border-color: var(--io_colorGreen);\n      }\n\n      :host.blue,\n      :host[selected] {\n        color: var(--io_colorWhite);\n        background-color: var(--io_bgColorBlue);\n        border-color: var(--io_colorBlue);\n      }\n      :host:focus {\n        text-overflow: inherit;\n      }\n      :host[placeholder]:empty:before {\n        content: attr(placeholder);\n        visibility: visible;\n        color: var(--io_colorField);\n        padding: 0 calc(var(--io_spacing) + var(--io_borderWidth));\n        opacity: 0.5;\n      }\n      :host[appearance=inset] io-icon {\n        margin-top: -0.05em;\n        margin-bottom: 0.05em;\n      }\n    "}static get Listeners(){return{"focus-to":"_onFocusTo",focus:"_onFocus",pointerdown:"_onPointerdown",click:"_onClick"}}_onFocus(e){this.addEventListener("blur",this._onBlur),this.addEventListener("keydown",this._onKeydown),this.addEventListener("keyup",this._onKeyup)}_onBlur(e){this.removeEventListener("blur",this._onBlur),this.removeEventListener("keydown",this._onKeydown),this.removeEventListener("keyup",this._onKeyup)}_onPointerdown(e){this.addEventListener("pointermove",this._onPointermove),this.addEventListener("pointerleave",this._onPointerleave),this.addEventListener("pointerup",this._onPointerup)}_onPointermove(e){}_onPointerleave(e){this.removeEventListener("pointermove",this._onPointermove),this.removeEventListener("pointerleave",this._onPointerleave),this.removeEventListener("pointerup",this._onPointerup)}_onPointerup(e){this.removeEventListener("pointermove",this._onPointermove),this.removeEventListener("pointerleave",this._onPointerleave),this.removeEventListener("pointerup",this._onPointerup),this.focus()}_onClick(){this.dispatchEvent("io-field-clicked",{value:this.value},!0)}_onKeydown(e){"Enter"===e.key||" "===e.key?(e.preventDefault(),this._onClick()):"ArrowLeft"===e.key?(e.preventDefault(),this.focusTo("left")):"ArrowUp"===e.key?(e.preventDefault(),this.focusTo("up")):"ArrowRight"===e.key?(e.preventDefault(),this.focusTo("right")):"ArrowDown"===e.key&&(e.preventDefault(),this.focusTo("down"))}_onKeyup(e){}_onFocusTo(e){const t=e.composedPath()[0],o=e.detail.dir,i=e.detail.rect;if(i.center={x:i.x+i.width/2,y:i.y+i.height/2},t!==this){let n=t,r=Infinity,s=Infinity;const a=this.querySelectorAll('[tabindex="0"]:not([disabled])');for(let e=a.length;e--;){if(!a[e].offsetParent)continue;if("visible"!==window.getComputedStyle(a[e]).visibility)continue;const t=a[e].getBoundingClientRect();switch(t.center={x:t.x+t.width/2,y:t.y+t.height/2},o){case"right":if(t.left>=i.right-1){const o=Math.abs(t.left-i.right),l=Math.abs(t.center.y-i.center.y);o<r||l<s/3?(n=a[e],r=o,s=l):o===r&&l<s&&(n=a[e],s=l)}break;case"left":if(t.right<=i.left+1){const o=Math.abs(t.right-i.left),l=Math.abs(t.center.y-i.center.y);o<r||l<s/3?(n=a[e],r=o,s=l):o===r&&l<s&&(n=a[e],s=l)}break;case"down":if(t.top>=i.bottom-1){const o=Math.abs(t.center.x-i.center.x),l=Math.abs(t.top-i.bottom);l<s||o<r/3?(n=a[e],r=o,s=l):l===s&&o<r&&(n=a[e],r=o)}break;case"up":if(t.bottom<=i.top+1){const o=Math.abs(t.center.x-i.center.x),l=Math.abs(t.bottom-i.top);l<s||o<r/3?(n=a[e],r=o,s=l):l===s&&o<r&&(n=a[e],r=o)}}}n!==t&&(n.focus(),e.stopPropagation())}}focusTo(e){const t=this.getBoundingClientRect();this.dispatchEvent("focus-to",{dir:e,rect:t},!0)}getCaretPosition(){let e=0;const t=window.getSelection();if(t&&t.rangeCount){const o=t.getRangeAt(0),i=o.toString().length,n=o.cloneRange();n.selectNodeContents(this),n.setEnd(o.endContainer,o.endOffset),e=n.toString().length-i}return e}setCaretPosition(e){if(!e)return;const t=window.getSelection();if(t){const o=document.createRange();o.setStart(this.firstChild,e),o.collapse(!0),t.removeAllRanges(),t.addRange(o)}}changed(){let e="";this.label?e=this.label:this.value&&"object"==typeof this.value?e=`${this.value.constructor.name}`+(this.value instanceof Array?`(${this.value.length})`:""):void 0!==this.value&&(e=String(this.value)),this.template([this.icon?["io-icon",{icon:this.icon,stroke:this.stroke}]:null,["io-label",{label:e}]])}};__decorate$z([Property("0")],V.prototype,"tabindex",void 0),__decorate$z([Property(void 0)],V.prototype,"value",void 0),__decorate$z([Property({value:"",reflect:!0})],V.prototype,"icon",void 0),__decorate$z([Property({value:"flush",reflect:!0})],V.prototype,"appearance",void 0),__decorate$z([Property({value:!1,type:Boolean,reflect:!0})],V.prototype,"stroke",void 0),__decorate$z([Property({value:!1,type:Boolean,reflect:!0})],V.prototype,"selected",void 0),__decorate$z([Property({value:!1,type:Boolean,reflect:!0})],V.prototype,"invalid",void 0),__decorate$z([Property({value:"",type:String,reflect:!0})],V.prototype,"placeholder",void 0),V=__decorate$z([Register],V);var __decorate$y=function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};let W=class IoButton extends V{static get Style(){return"\n      :host {\n        text-align: center;\n        padding-left: calc(2 * var(--io_spacing));\n        padding-right: calc(2 * var(--io_spacing));\n        color: var(--io_colorStrong);\n      }\n      :host[pressed] {\n        border-color: var(--io_borderColorInset);\n      }\n    "}_onPointerdown(e){super._onPointerdown(e),this.pressed=!0}_onPointerleave(e){super._onPointerleave(e),this.pressed=!1}_onPointerup(e){super._onPointerup(e),this.pressed=!1}_onKeydown(e){super._onKeydown(e),"Enter"!==e.key&&" "!==e.key||(this.pressed=!0)}_onKeyup(e){super._onKeyup(e),this.pressed=!1}_onClick(){"function"==typeof this.action&&this.action(this.value),this.dispatchEvent("io-button-clicked",{value:this.value},!0)}init(){this.changed()}changed(){this.setAttribute("aria-pressed",String(this.pressed)),this.template([this.icon?["io-icon",{icon:this.icon}]:null,this.label?["io-label",{label:this.label}]:null])}};__decorate$y([Property(void 0)],W.prototype,"action",void 0),__decorate$y([Property(void 0)],W.prototype,"value",void 0),__decorate$y([Property({value:"outset",type:String,reflect:!0})],W.prototype,"appearance",void 0),__decorate$y([Property({value:!1,type:Boolean,reflect:!0})],W.prototype,"pressed",void 0),__decorate$y([Property("button")],W.prototype,"role",void 0),W=__decorate$y([Register],W);var __decorate$x=function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};let U=class IoBoolean extends V{static get Style(){return"\n      :host {\n        background-color: transparent;\n        padding: var(--io_spacing) var(--io_spacing);\n      }\n    "}_onClick(){this.toggle(),this.dispatchEvent("io-boolean-clicked",{value:this.value},!0)}toggle(){this.inputValue(!this.value)}init(){this.changed()}changed(){this.setAttribute("value",Boolean(this.value)),this.setAttribute("aria-checked",String(!!this.value)),this.setAttribute("aria-invalid","boolean"!=typeof this.value&&"true");const e=this.value?this.true:this.false;this.template([this.icon?["io-icon",{icon:this.icon,stroke:this.stroke}]:null,e?["io-label",{label:e}]:null])}};__decorate$x([Property({value:!1,type:Boolean,reflect:!0})],U.prototype,"value",void 0),__decorate$x([Property({value:"true",type:String})],U.prototype,"true",void 0),__decorate$x([Property({value:"false",type:String})],U.prototype,"false",void 0),__decorate$x([Property({value:"switch",type:String})],U.prototype,"role",void 0),U=__decorate$x([Register],U);var __decorate$w=function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};let G=class IoBoolicon extends U{changed(){this.setAttribute("value",Boolean(this.value)),this.setAttribute("aria-checked",String(!!this.value)),this.setAttribute("aria-invalid","boolean"!=typeof this.value&&"true");const e=this.value?this.true:this.false;this.template([this.icon?["io-icon",{icon:this.icon,stroke:this.stroke}]:null,["io-icon",{icon:e,stroke:this.stroke}]])}};G=__decorate$w([Register],G);var __decorate$v=function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};let K=class IoSwitch extends U{static get Style(){return"\n      :host {\n        position: relative;\n        width: calc(1.5 * var(--io_fieldHeight));\n        overflow: visible;\n      }\n      :host:before {\n        content: '';\n        box-sizing: border-box;\n        position: absolute;\n        visibility: visible;\n        top: var(--io_spacing);\n        left: 0;\n        width: 100%;\n        height: var(--io_lineHeight);\n        border-radius: var(--io_lineHeight);\n        border: var(--io_border);\n        border-color: var(--io_borderColorInset);\n        background-color: var(--io_bgColorField);\n        box-shadow: var(--io_shadowInset);\n        transition: background-color 0.4s;\n      }\n      :host:after {\n        content: '';\n        box-sizing: border-box;\n        position: absolute;\n        visibility: visible;\n        top: calc(var(--io_borderWidth) + var(--io_spacing));\n        left: var(--io_borderWidth);\n        height: calc(var(--io_lineHeight) - calc(2 * var(--io_borderWidth)));\n        width: calc(var(--io_lineHeight) - calc(2 * var(--io_borderWidth)));\n        background-color: var(--io_bgColorDimmed);\n        box-shadow: var(--io_shadowOutset);\n        border: var(--io_border);\n        border-color: var(--io_borderColorOutset);\n        border-radius: var(--io_lineHeight);\n        transition-timing-function: ease-in-out;\n        transition: left 0.25s;\n      }\n      :host[value]:after {\n        background-color: var(--io_bgColorBlue);\n        left: calc(100% - calc(var(--io_lineHeight) - var(--io_borderWidth)));\n      }\n      :host:focus:before {\n        border-color: var(--io_colorBlue);\n        outline: 1px auto var(--io_colorBlue);\n        outline: 1px auto -webkit-focus-ring-color;\n      }\n      :host:focus {\n        outline: 0;\n        border-color: transparent;\n      }\n    "}init(){this.setAttribute("aria-checked",String(!!this.value))}changed(){this.title=this.label}valueChanged(){this.setAttribute("aria-checked",String(!!this.value)),"boolean"!=typeof this.value?this.setAttribute("aria-invalid","true"):this.removeAttribute("aria-invalid")}};K=__decorate$v([Register],K);var __decorate$u=function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};let Y=class IoString extends V{static get Style(){return"\n      :host {\n        cursor: text;\n        user-select: text;\n        -webkit-user-select: text;\n        -webkit-touch-callout: default;\n        padding-left: var(--io_spacing3);\n        padding-right: var(--io_spacing3);\n      }\n    "}_setFromTextNode(){const e=this.textNode;"string"==typeof this.value&&e!==String(this.value)&&this.inputValue(e)}_tryParseFromTextNode(){const e=this.textNode;try{const t=JSON.parse(e.replace(/[\t\n\r ]+/g," "));this.inputValue(t)}catch(t){console.warn("IoString: Cannot parse value",e),console.error(t),this._setFromTextNode()}}_onBlur(e){super._onBlur(e),this._setFromTextNode(),this.scrollTop=0,this.scrollLeft=0}_onPointerdown(e){this.addEventListener("pointermove",this._onPointermove),this.addEventListener("pointerup",this._onPointerup)}_onPointermove(e){}_onPointerup(e){this.removeEventListener("pointermove",this._onPointermove),this.removeEventListener("pointerup",this._onPointerup),document.activeElement!==this&&(this.focus(),this.setCaretPosition(this.textNode.length))}_onKeydown(e){const t=window.getSelection().getRangeAt(0),o=t.startOffset,i=t.endOffset,n=this.childNodes[0]?this.childNodes[0].length:0,r=t.startContainer===t.endContainer&&(t.startContainer===this.childNodes[0]||t.startContainer===this);"Enter"===e.key?(e.preventDefault(),e.shiftKey?this._tryParseFromTextNode():this._setFromTextNode()):"ArrowLeft"===e.key?(e.ctrlKey||r&&o===i&&0===o)&&(e.preventDefault(),this.focusTo("left")):"ArrowUp"===e.key?(e.ctrlKey||r&&o===i&&0===o)&&(e.preventDefault(),this.focusTo("up")):"ArrowRight"===e.key?(e.ctrlKey||r&&o===i&&o===n)&&(e.preventDefault(),this.focusTo("right")):"ArrowDown"===e.key&&(e.ctrlKey||r&&o===i&&o===n)&&(e.preventDefault(),this.focusTo("down"))}_onKeyup(e){if(super._onKeyup(e),this.live){const e=this.getCaretPosition();this._setFromTextNode(),this.setCaretPosition(e)}}changed(){this.title=this.label,this.textNode=String(this.value).replace(new RegExp(" ","g"),"")}valueChanged(){"string"!=typeof this.value?this.setAttribute("aria-invalid","true"):this.removeAttribute("aria-invalid")}};__decorate$u([Property(!1)],Y.prototype,"live",void 0),__decorate$u([Property("")],Y.prototype,"value",void 0),__decorate$u([Property(!0)],Y.prototype,"contenteditable",void 0),__decorate$u([Property("textbox")],Y.prototype,"role",void 0),__decorate$u([Property({value:"inset",reflect:!0})],Y.prototype,"appearance",void 0),Y=__decorate$u([Register],Y);var __decorate$t=function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};let J=class IoNumber extends V{static get Style(){return"\n      :host {\n        cursor: text;\n        user-select: text;\n        -webkit-user-select: text;\n        -webkit-touch-callout: default;\n        font-family: monospace;\n        padding-left: var(--io_spacing3);\n        padding-right: var(--io_spacing3);\n      }\n    "}_pointer="";_onBlur(e){super._onBlur(e),this._setFromTextNode(),this.scrollTop=0,this.scrollLeft=0,setTimeout((()=>{document.activeElement.parentElement!==Z&&(Z.expanded=!1)}))}_onPointerdown(e){"touch"===this._pointer&&e.preventDefault(),this.addEventListener("pointermove",this._onPointermove),this.addEventListener("pointerup",this._onPointerup),document.activeElement===this&&0===e.button||(this._pointer=e.pointerType)}_onPointerup(e){this.removeEventListener("pointermove",this._onPointermove),this.removeEventListener("pointerup",this._onPointerup),this.ladder||1===e.button?("touch"===this._pointer?(e.preventDefault(),document.activeElement.blur()):document.activeElement!==this&&(this.focus(),this.setCaretPosition(this.textNode.length)),this._expandLadder()):document.activeElement!==this&&(this.focus(),this.setCaretPosition(this.textNode.length))}_onFocus(e){super._onFocus(e),"touch"===this._pointer&&(Z.expanded=!1)}_expandLadder(){Z.src=this,Z.expanded=!0}_onKeydown(e){const t=window.getSelection().getRangeAt(0),o=t.startOffset,i=t.endOffset,n=this.childNodes[0]?this.childNodes[0].length:0,r=t.startContainer===t.endContainer&&(t.startContainer===this.childNodes[0]||t.startContainer===this);if(27===e.which||13===e.which||32===e.which)e.preventDefault(),this._setFromTextNode();else if(36===e.which)this.textNode=this.min,this._setFromTextNode();else if(35===e.which)this.textNode=this.max,this._setFromTextNode();else if(33===e.which){const e=Number(this.textNode);!isNaN(e)&&Math.abs(e)<Infinity?this.textNode=Number(this.textNode)+this.step:this.textNode=this.step,this._setFromTextNode()}else if(34===e.which){const e=Number(this.textNode);!isNaN(e)&&Math.abs(e)<Infinity?this.textNode=Number(this.textNode)-this.step:this.textNode=-this.step,this._setFromTextNode()}else if(37===e.which)(e.ctrlKey||r&&o===i&&0===o)&&(e.preventDefault(),this.focusTo("left"));else if(38===e.which)if(Z.expanded){const e=Z.querySelector(".io-up1");e&&e.focus()}else(e.ctrlKey||r&&o===i&&0===o)&&(e.preventDefault(),this.focusTo("up"));else if(39===e.which)(e.ctrlKey||r&&o===i&&o===n)&&(e.preventDefault(),this.focusTo("right"));else if(40===e.which)if(Z.expanded){const e=Z.querySelector(".io-down1");e&&e.focus()}else(e.ctrlKey||r&&o===i&&o===n)&&(e.preventDefault(),this.focusTo("down"))}_onKeyup(e){17===e.which?this._expandLadder():27!==e.which&&13!==e.which&&32!==e.which||(F.expanded=!1)}_setFromTextNode(){const e=this.textNode;let t=Number(e)/this.conversion;t=Math.min(this.max,Math.max(this.min,t)),t=Math.round(t/this.step)*this.step;const o=Math.max(0,Math.min(100,-Math.floor(Math.log(this.step)/Math.LN10)));t=Number(t.toFixed(o)),isNaN(t)?this.textNode="NaN":this.inputValue(t)}init(){this.changed()}changed(){this.setAttribute("value",this.value),this.setAttribute("aria-valuenow",this.value),this.setAttribute("aria-valuemin",this.min),this.setAttribute("aria-valuemax",this.max),this.setAttribute("aria-valuestep",this.step),"number"!=typeof this.value||isNaN(this.value)?this.setAttribute("aria-invalid","true"):this.removeAttribute("aria-invalid");let e,t=this.value;if("number"!=typeof t||isNaN(t))e="NaN";else{t*=this.conversion;let o=-Math.floor(Math.log(this.step*this.conversion)/Math.LN10);o=Math.max(0,Math.min(100,o)),t=Number(t.toFixed(o)),e=String(t)}this.setAttribute("value",e),this.setAttribute("positive",this.value>=0),this.textNode=e}};__decorate$t([Property("textbox")],J.prototype,"role",void 0),__decorate$t([Property({value:0,type:Number})],J.prototype,"value",void 0),__decorate$t([Property({value:1,type:Number})],J.prototype,"conversion",void 0),__decorate$t([Property({value:1e-4,type:Number})],J.prototype,"step",void 0),__decorate$t([Property({value:-Infinity,type:Number})],J.prototype,"min",void 0),__decorate$t([Property({value:Infinity,type:Number})],J.prototype,"max",void 0),__decorate$t([Property({value:!1,type:Boolean})],J.prototype,"ladder",void 0),__decorate$t([Property({value:!0,type:Boolean})],J.prototype,"contenteditable",void 0),__decorate$t([Property({value:"number",type:String,reflect:!0})],J.prototype,"type",void 0),__decorate$t([Property({value:'pattern="[0-9]*"',type:String,reflect:!0})],J.prototype,"pattern",void 0),__decorate$t([Property({value:"numeric",type:String,reflect:!0})],J.prototype,"inputmode",void 0),__decorate$t([Property({value:"false",type:String,reflect:!0})],J.prototype,"spellcheck",void 0),__decorate$t([Property({value:"inset",type:String,reflect:!0})],J.prototype,"appearance",void 0),J=__decorate$t([Register],J);let X=null;window.addEventListener("focusin",(()=>{X=document.activeElement}),{capture:!1}),window.addEventListener("blur",(()=>{setTimeout((()=>{document.activeElement===document.body&&(X=null)}))}),{capture:!0});let q=class IoNumberLadderStep extends V{static get Style(){return"\n      :host {\n        pointer-events: all;\n        display: inline-block;\n        cursor: ew-resize;\n        text-align: center;\n        background-color: var(--io_bgColorStrong);\n        color: var(--io_color);\n        align-self: stretch;\n        touch-action: none;\n        width: 6em;\n      }\n      :host:before {\n        float: left;\n        content: '<';\n        opacity: 0.25;\n      }\n      :host:after {\n        float: right;\n        content: '>';\n        opacity: 0.25;\n      }\n    "}_onKeydown(e){let t=0;"Escape"===e.key||" "===e.key?this.dispatchEvent("ladder-step-collapse",{},!0):"ArrowLeft"===e.key||"Backspace"===e.key?(e.preventDefault(),t=-1*this.value):"ArrowUp"===e.key?(e.preventDefault(),this.focusTo("up")):"ArrowRight"===e.key||"Enter"===e.key?(e.preventDefault(),t=1*this.value):"ArrowDown"===e.key&&(e.preventDefault(),this.focusTo("down")),0!==t&&this.dispatchEvent("ladder-step-change",{step:Number(t.toFixed(5)),round:e.shiftKey},!0)}_onPointerdown(e){this.setPointerCapture(e.pointerId),this.addEventListener("pointermove",this._onPointermove),this.addEventListener("pointerup",this._onPointerup),this._startX=e.clientX}_onPointermove(e){const t=e.clientX-this._startX;if(Math.abs(t)>5){const o=Math.pow(t/5,2)*t<0?-1:1,i=t>0?Math.floor(o):Math.ceil(o),n=this.value*i;this._startX=e.clientX,this.dispatchEvent("ladder-step-change",{step:Number(n.toFixed(5)),round:e.shiftKey},!0)}}_onPointerup(e){this.releasePointerCapture(e.pointerId),this.removeEventListener("pointermove",this._onPointermove),this.removeEventListener("pointerup",this._onPointerup),this.dispatchEvent("ladder-step-collapse",{},!0)}init(){this.changed()}changed(){super.changed(),this.setAttribute("aria-valuestep",this.value)}};__decorate$t([Property({value:1,type:Number})],q.prototype,"value",void 0),__decorate$t([Property({value:"number",type:String,reflect:!0})],q.prototype,"type",void 0),__decorate$t([Property({value:"spinbutton",type:String})],q.prototype,"role",void 0),q=__decorate$t([Register],q);let Q=class IoNumberLadder extends b{static get Style(){return"\n      :host {\n        display: flex;\n        flex-direction: column;\n        position: absolute;\n        pointer-events: none;\n        user-select: none;\n        -webkit-tap-highlight-color: transparent;\n        -webkit-user-select: none;\n        -webkit-touch-callout: none;\n      }\n      :host:not([expanded]) {\n        visibility: hidden;\n      }\n      :host:not([expanded]) > io-number-ladder-step {\n        opacity: 0.5;\n      }\n      :host > io-number-ladder-step:nth-child(-n+5) {\n        box-shadow: 0 -1px 4px rgba(0,0,0,0.2);\n      }\n      :host > io-number-ladder-step:nth-child(n+6) {\n        box-shadow: 0 1px 4px rgba(0,0,0,0.2);\n      }\n      :host > .io-up1,\n      :host > .io-down1{\n        z-index: 4;\n        transition: opacity 0.1s, transform 0.1s;\n      }\n      :host > .io-up2,\n      :host > .io-down2 {\n        z-index: 3;\n        opacity: 0.8;\n        transition: opacity 0.2s, transform 0.2s;\n      }\n      :host:not([expanded]) > .io-up4 {\n        transform: translateY(calc(3 * var(--io_fieldHeight)));\n      }\n      :host:not([expanded]) > .io-up3 {\n        transform: translateY(calc(2 * var(--io_fieldHeight)));\n      }\n      :host:not([expanded]) > .io-up2 {\n        transform: translateY(calc(1 * var(--io_fieldHeight)));\n      }\n      :host:not([expanded]) > .io-down2 {\n        transform: translateY(calc(-1 * var(--io_fieldHeight)));\n      }\n      :host:not([expanded]) > .io-down3 {\n        transform: translateY(calc(-2 * var(--io_fieldHeight)));\n      }\n      :host:not([expanded]) > .io-down4 {\n        transform: translateY(calc(-3 * var(--io_fieldHeight)));\n      }\n      :host > .io-up3,\n      :host > .io-down3 {\n        z-index: 2;\n        opacity: 0.6;\n        transition: opacity 0.4s, transform 0.4s;\n      }\n      :host > .io-up4,\n      :host > .io-down4 {\n        z-index: 1;\n        opacity: 0.4;\n        transition: opacity 0.8s, transform 0.8s;\n      }\n      :host > io-number-ladder-step:hover,\n      :host > io-number-ladder-step:focus {\n        background-color: var(--io_bgColorStrong);\n        border-color: var(--io_colorBlue);\n        transition: opacity 0.2s;\n        opacity: 1;\n      }\n      :host > .io-number-ladder-empty {\n        height: var(--io_fieldHeight);\n      }\n      :host > .io-number-ladder-center {\n        height: calc(1.5 * var(--io_fieldHeight));\n      }\n    "}static get Listeners(){return{"ladder-step-change":"_onLadderStepChange","ladder-step-collapse":"_onLadderStepCollapse",focusin:"_onFocusIn"}}get value(){return this.src?this.src.value:0}get min(){return this.src?this.src.min:-Infinity}get max(){return this.src?this.src.max:Infinity}get step(){return this.src?this.src.step:1e-4}get conversion(){return this.src?this.src.conversion:1}_onFocusIn(e){e.stopPropagation()}_onFocusTo(e){e.stopPropagation();const t=e.composedPath()[0],o=this.src,i=e.detail.dir;if(o&&(t===this.querySelector(".io-up1")&&"down"===i||t===this.querySelector(".io-down1")&&"up"===i))return o.focus(),void(o.selectionStart=o.selectionEnd=o.textNode.length);super._onFocusTo(e)}_onLadderStepChange(e){const t=this.src;if(t){const o=e.detail.step,i=e.detail.round?Math.round(this.value/o)*o:this.value;let n=Math.min(this.max,Math.max(this.min,i+o));n=Number(n.toFixed(5)),t.inputValue(n)}}_onLadderStepCollapse(){this.setProperty("expanded",!1)}expandedChanged(){const e=this.src;if(this.expanded)if(e){const t=e.getBoundingClientRect(),o=this.getBoundingClientRect(),i=F.getBoundingClientRect();this.style.top=t.bottom-i.top+"px",this.style.left=t.left-i.left+"px",this.style.marginTop=-(o.height/2+I.lineHeight/2+I.spacing)+"px"}else this.removeAttribute("style");else e&&"touch"!==e._pointerType?e.focus():X&&X.focus();this.dispatchEvent("expanded",{value:this.expanded},!0)}changed(){const e=this.max-this.min,t=["span",{class:"io-number-ladder-empty"}];let o=this.step/1e4;for(;o<.1;)o*=10;const i=1e4*o,n=1e3*o,r=100*o,s=10*o,a=1*o,l=.1*o,h=.01*o,c=.001*o,d=Number((i*this.conversion).toFixed(6)),p=Number((n*this.conversion).toFixed(6)),u=Number((r*this.conversion).toFixed(6)),v=Number((s*this.conversion).toFixed(6)),g=Number((a*this.conversion).toFixed(6)),f=Number((l*this.conversion).toFixed(6)),b=Number((h*this.conversion).toFixed(6)),m=Number((c*this.conversion).toFixed(6));this.template([e>=i?["io-number-ladder-step",{class:"io-up4",value:i,label:String(d)}]:t,e>=n?["io-number-ladder-step",{class:"io-up3",value:n,label:String(p)}]:t,e>=r?["io-number-ladder-step",{class:"io-up2",value:r,label:String(u)}]:t,e>=s?["io-number-ladder-step",{class:"io-up1",value:s,label:String(v)}]:t,["span",{class:"io-number-ladder-center"}],this.step<=a?["io-number-ladder-step",{class:"io-down1",value:a,label:String(g)}]:t,this.step<=l?["io-number-ladder-step",{class:"io-down2",value:l,label:String(f)}]:t,this.step<=h?["io-number-ladder-step",{class:"io-down3",value:h,label:String(b)}]:t,this.step<=c?["io-number-ladder-step",{class:"io-down4",value:c,label:String(m)}]:t]),this.setAttribute("aria-valuemin",this.min),this.setAttribute("aria-valuemax",this.max),this.setAttribute("aria-valuenow",this.value),this.setAttribute("aria-valuestep",this.step),this.setAttribute("aria-invalid",!("number"==typeof this.value&&!isNaN(this.value))&&"true");const y=this.querySelectorAll("io-number-ladder-step");for(let e=y.length;e--;)y[e].setAttribute("aria-valuemin",this.min),y[e].setAttribute("aria-valuemax",this.max),y[e].setAttribute("aria-valuenow",this.value),y[e].changed()}};__decorate$t([Property({value:"list",type:String})],Q.prototype,"role",void 0),__decorate$t([Property({value:void 0,type:J})],Q.prototype,"src",void 0),__decorate$t([Property({value:!1,type:Boolean,reflect:!0})],Q.prototype,"expanded",void 0),Q=__decorate$t([Register],Q);const Z=new Q;F.appendChild(Z);var __decorate$s=function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};const ee={};let te=class IoIconset extends i{registerIcons(e,t){const o=document.createElement("div");o.innerHTML=t,o.querySelectorAll("[id]").forEach((t=>{ee[e]=ee[e]||{},ee[e][t.id]=t.outerHTML}))}getIcon(e){const t=ee[e.split(":")[0]];if(t){const o=e.split(":")[1];if(t[o]){return`<svg viewBox="0 0 24 24" preserveAspectRatio="xMidYMid meet">${t[o].replace(' id="',' class="icon-id-')}</svg>`}}return'<svg viewBox="0 0 24 24" preserveAspectRatio="xMidYMid meet"></svg>'}};te=__decorate$s([Register],te);const oe=new te;oe.registerIcons("icons",'\n<svg>\n<g id="io">\n  <ellipse fill="#83A61E" cx="5.4" cy="12.1" rx="3.4" ry="3.4"/>\n  <path fill="#646464" d="M16.3,17.7c-3.1,0-5.6-2.6-5.6-5.6s2.6-5.6,5.6-5.6s5.6,2.6,5.6,5.6S19.3,17.7,16.3,17.7z M16.3,8.8\n    c-1.8,0-3.3,1.5-3.3,3.2s1.5,3.2,3.3,3.2s3.3-1.5,3.3-3.2S18.1,8.8,16.3,8.8z"/>\n</g>\n<g id="io_logo">\n  <path fill="#646464" d="M19.5,12.7c0.3-0.3,0.3-0.9,0-1.2l-0.7-0.7l-2.6-2.6c-0.3-0.3-0.3-0.9,0-1.2c0.3-0.3,0.9-0.3,1.2,0l3.8,3.8\n    c0.7,0.7,0.7,1.8,0,2.6l-3.8,3.8c-0.3,0.3-0.9,0.3-1.2,0c-0.3-0.3-0.3-0.9,0-1.2"/>\n  <path fill="#646464" d="M4.3,12.7c-0.3-0.3-0.3-0.9,0-1.2L5,10.8l2.6-2.6c0.3-0.3,0.3-0.9,0-1.2C7.3,6.7,6.7,6.7,6.4,7l-3.8,3.8\n    c-0.7,0.7-0.7,1.8,0,2.6l3.8,3.8c0.3,0.3,0.9,0.3,1.2,0s0.3-0.9,0-1.2"/>\n  <ellipse fill="#83A61E" cx="8.4" cy="12.1" rx="1.7" ry="1.7"/>\n  <path fill="#646464" d="M13.9,14.9c-1.6,0-2.8-1.2-2.8-2.8s1.2-2.8,2.8-2.8s2.8,1.2,2.8,2.8S15.4,14.9,13.9,14.9z M13.9,10.4\n    c-0.9,0-1.7,0.7-1.7,1.7c0,0.9,0.7,1.7,1.7,1.7c0.9,0,1.7-0.7,1.7-1.7C15.5,11.2,14.8,10.4,13.9,10.4z"/>\n</g>\n</svg>');var __decorate$r=function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};let ie=class IoIcon extends b{static get Style(){return"\n      --ioIcon: {\n        display: inline-block;\n        width: var(--io_lineHeight);\n        height: var(--io_lineHeight);\n        min-width: var(--io_lineHeight);\n        line-height: var(--io_lineHeight);\n        font-size: var(--io_fontSize);\n        text-align: center;\n        fill: var(--io_color);\n      }\n      :host {\n        @apply --ioIcon;\n      }\n      :host:not([icon]) {\n        display: none;\n      }\n      :host[stroke] {\n        stroke: var(--io_colorStrong);\n        stroke-width: var(--io_borderWidth);\n      }\n      :host > svg {\n        height: 100%;\n      }\n      :host > svg > g {\n        transform-origin: 0px 0px;\n      }\n    "}iconChanged(){-1!==this.icon.search(":")?this.innerHTML=oe.getIcon(this.icon):this.textNode=this.icon}};__decorate$r([Property({value:"",type:String,reflect:!0})],ie.prototype,"icon",void 0),__decorate$r([Property({value:!1,type:Boolean,reflect:!0})],ie.prototype,"stroke",void 0),ie=__decorate$r([Register],ie);
/**@License
 * Copyright (c) 2011-2016 Heather Arthur <fayearthur@gmail.com>
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 */
const ne={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(const e of Object.keys(ne)){if(!("channels"in ne[e]))throw new Error("missing channels property: "+e);if(!("labels"in ne[e]))throw new Error("missing channel labels property: "+e);if(ne[e].labels.length!==ne[e].channels)throw new Error("channel and label counts mismatch: "+e);const{channels:t,labels:o}=ne[e];delete ne[e].channels,delete ne[e].labels,Object.defineProperty(ne[e],"channels",{value:t}),Object.defineProperty(ne[e],"labels",{value:o})}ne.rgb.hsl=function(e){const t=e[0]/255,o=e[1]/255,i=e[2]/255,n=Math.min(t,o,i),r=Math.max(t,o,i),s=r-n;let a,l=0;r===n?l=0:t===r?l=(o-i)/s:o===r?l=2+(i-t)/s:i===r&&(l=4+(t-o)/s),l=Math.min(60*l,360),l<0&&(l+=360);const h=(n+r)/2;return a=r===n?0:h<=.5?s/(r+n):s/(2-r-n),[l,100*a,100*h]},ne.rgb.hsv=function(e){let t,o,i,n,r=0;const s=e[0]/255,a=e[1]/255,l=e[2]/255,h=Math.max(s,a,l),c=h-Math.min(s,a,l),diffc=function(e){return(h-e)/6/c+.5};return 0===c?(r=0,n=0):(n=c/h,t=diffc(s),o=diffc(a),i=diffc(l),s===h?r=i-o:a===h?r=1/3+t-i:l===h&&(r=2/3+o-t),r<0?r+=1:r>1&&(r-=1)),[360*r,100*n,100*h]},ne.rgb.hwb=function(e){const t=e[0],o=e[1];let i=e[2];const n=ne.rgb.hsl(e)[0],r=1/255*Math.min(t,Math.min(o,i));return i=1-1/255*Math.max(t,Math.max(o,i)),[n,100*r,100*i]},ne.rgb.xyz=function(e){let t=e[0]/255,o=e[1]/255,i=e[2]/255;t=t>.04045?((t+.055)/1.055)**2.4:t/12.92,o=o>.04045?((o+.055)/1.055)**2.4:o/12.92,i=i>.04045?((i+.055)/1.055)**2.4:i/12.92;return[100*(.4124*t+.3576*o+.1805*i),100*(.2126*t+.7152*o+.0722*i),100*(.0193*t+.1192*o+.9505*i)]},ne.rgb.lab=function(e){const t=ne.rgb.xyz(e);let o=t[0],i=t[1],n=t[2];o/=95.047,i/=100,n/=108.883,o=o>.008856?o**(1/3):7.787*o+16/116,i=i>.008856?i**(1/3):7.787*i+16/116,n=n>.008856?n**(1/3):7.787*n+16/116;return[116*i-16,500*(o-i),200*(i-n)]},ne.hsl.rgb=function(e){const t=e[0]/360,o=e[1]/100,i=e[2]/100;let n,r,s;if(0===o)return s=255*i,[s,s,s];n=i<.5?i*(1+o):i+o-i*o;const a=2*i-n,l=[0,0,0];for(let e=0;e<3;e++)r=t+1/3*-(e-1),r<0&&r++,r>1&&r--,s=6*r<1?a+6*(n-a)*r:2*r<1?n:3*r<2?a+(n-a)*(2/3-r)*6:a,l[e]=255*s;return l},ne.hsl.hsv=function(e){const t=e[0];let o=e[1]/100,i=e[2]/100,n=o;const r=Math.max(i,.01);i*=2,o*=i<=1?i:2-i,n*=r<=1?r:2-r;return[t,100*(0===i?2*n/(r+n):2*o/(i+o)),100*((i+o)/2)]},ne.hsv.rgb=function(e){const t=e[0]/60,o=e[1]/100;let i=e[2]/100;const n=Math.floor(t)%6,r=t-Math.floor(t),s=255*i*(1-o),a=255*i*(1-o*r),l=255*i*(1-o*(1-r));switch(i*=255,n){case 0:return[i,l,s];case 1:return[a,i,s];case 2:return[s,i,l];case 3:return[s,a,i];case 4:return[l,s,i];default:return[i,s,a]}},ne.hsv.hsl=function(e){const t=e[0],o=e[1]/100,i=e[2]/100,n=Math.max(i,.01);let r,s;s=(2-o)*i;const a=(2-o)*n;return r=o*n,r/=a<=1?a:2-a,r=r||0,s/=2,[t,100*r,100*s]},ne.hwb.rgb=function(e){const t=e[0]/360;let o=e[1]/100,i=e[2]/100;const n=o+i;let r;n>1&&(o/=n,i/=n);const s=Math.floor(6*t),a=1-i;r=6*t-s,1&s&&(r=1-r);const l=o+r*(a-o);let h,c,d;switch(s){default:case 6:case 0:h=a,c=l,d=o;break;case 1:h=l,c=a,d=o;break;case 2:h=o,c=a,d=l;break;case 3:h=o,c=l,d=a;break;case 4:h=l,c=o,d=a;break;case 5:h=a,c=o,d=l}return[255*h,255*c,255*d]},ne.xyz.rgb=function(e){const t=e[0]/100,o=e[1]/100,i=e[2]/100;let n,r,s;return n=3.2406*t+-1.5372*o+-.4986*i,r=-.9689*t+1.8758*o+.0415*i,s=.0557*t+-.204*o+1.057*i,n=n>.0031308?1.055*n**(1/2.4)-.055:12.92*n,r=r>.0031308?1.055*r**(1/2.4)-.055:12.92*r,s=s>.0031308?1.055*s**(1/2.4)-.055:12.92*s,n=Math.min(Math.max(0,n),1),r=Math.min(Math.max(0,r),1),s=Math.min(Math.max(0,s),1),[255*n,255*r,255*s]},ne.xyz.lab=function(e){let t=e[0],o=e[1],i=e[2];t/=95.047,o/=100,i/=108.883,t=t>.008856?t**(1/3):7.787*t+16/116,o=o>.008856?o**(1/3):7.787*o+16/116,i=i>.008856?i**(1/3):7.787*i+16/116;return[116*o-16,500*(t-o),200*(o-i)]},ne.lab.xyz=function(e){let t,o,i;o=(e[0]+16)/116,t=e[1]/500+o,i=o-e[2]/200;const n=o**3,r=t**3,s=i**3;return o=n>.008856?n:(o-16/116)/7.787,t=r>.008856?r:(t-16/116)/7.787,i=s>.008856?s:(i-16/116)/7.787,t*=95.047,o*=100,i*=108.883,[t,o,i]},ne.lab.lch=function(e){const t=e[0],o=e[1],i=e[2];let n;n=360*Math.atan2(i,o)/2/Math.PI,n<0&&(n+=360);return[t,Math.sqrt(o*o+i*i),n]},ne.lch.lab=function(e){const t=e[0],o=e[1],i=e[2]/360*2*Math.PI;return[t,o*Math.cos(i),o*Math.sin(i)]},ne.rgb.ansi16=function(e,t=null){const[o,i,n]=e;let r=null===t?ne.rgb.hsv(e)[2]:t;if(r=Math.round(r/50),0===r)return 30;let s=30+(Math.round(n/255)<<2|Math.round(i/255)<<1|Math.round(o/255));return 2===r&&(s+=60),s},ne.hsv.ansi16=function(e){return ne.rgb.ansi16(ne.hsv.rgb(e),e[2])},ne.rgb.ansi256=function(e){const t=e[0],o=e[1],i=e[2];if(t===o&&o===i)return t<8?16:t>248?231:Math.round((t-8)/247*24)+232;return 16+36*Math.round(t/255*5)+6*Math.round(o/255*5)+Math.round(i/255*5)},ne.ansi16.rgb=function(e){let t=e%10;if(0===t||7===t)return e>50&&(t+=3.5),t=t/10.5*255,[t,t,t];const o=.5*(1+~~(e>50));return[(1&t)*o*255,(t>>1&1)*o*255,(t>>2&1)*o*255]},ne.ansi256.rgb=function(e){if(e>=232){const t=10*(e-232)+8;return[t,t,t]}let t;e-=16;return[Math.floor(e/36)/5*255,Math.floor((t=e%36)/6)/5*255,t%6/5*255]},ne.rgb.hex=function(e){const t=(((255&Math.round(e[0]))<<16)+((255&Math.round(e[1]))<<8)+(255&Math.round(e[2]))).toString(16).toUpperCase();return"000000".substring(t.length)+t},ne.hex.rgb=function(e){const t=e.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!t)return[0,0,0];let o=t[0];3===t[0].length&&(o=o.split("").map((e=>e+e)).join(""));const i=parseInt(o,16);return[i>>16&255,i>>8&255,255&i]},ne.rgb.hcg=function(e){const t=e[0]/255,o=e[1]/255,i=e[2]/255,n=Math.max(Math.max(t,o),i),r=Math.min(Math.min(t,o),i),s=n-r;let a,l;return a=s<1?r/(1-s):0,l=s<=0?0:n===t?(o-i)/s%6:n===o?2+(i-t)/s:4+(t-o)/s+4,l/=6,l%=1,[360*l,100*s,100*a]},ne.hsl.hcg=function(e){const t=e[1]/100,o=e[2]/100,i=o<.5?2*t*o:2*t*(1-o);let n=0;return i<1&&(n=(o-.5*i)/(1-i)),[e[0],100*i,100*n]},ne.hsv.hcg=function(e){const t=e[1]/100,o=e[2]/100,i=t*o;let n=0;return i<1&&(n=(o-i)/(1-i)),[e[0],100*i,100*n]},ne.hcg.rgb=function(e){const t=e[0]/360,o=e[1]/100,i=e[2]/100;if(0===o)return[255*i,255*i,255*i];const n=[0,0,0],r=t%1*6,s=r%1,a=1-s;let l=0;switch(Math.floor(r)){case 0:n[0]=1,n[1]=s,n[2]=0;break;case 1:n[0]=a,n[1]=1,n[2]=0;break;case 2:n[0]=0,n[1]=1,n[2]=s;break;case 3:n[0]=0,n[1]=a,n[2]=1;break;case 4:n[0]=s,n[1]=0,n[2]=1;break;default:n[0]=1,n[1]=0,n[2]=a}return l=(1-o)*i,[255*(o*n[0]+l),255*(o*n[1]+l),255*(o*n[2]+l)]},ne.hcg.hsv=function(e){const t=e[1]/100,o=t+e[2]/100*(1-t);let i=0;return o>0&&(i=t/o),[e[0],100*i,100*o]},ne.hcg.hsl=function(e){const t=e[1]/100,o=e[2]/100*(1-t)+.5*t;let i=0;return o>0&&o<.5?i=t/(2*o):o>=.5&&o<1&&(i=t/(2*(1-o))),[e[0],100*i,100*o]},ne.hcg.hwb=function(e){const t=e[1]/100,o=t+e[2]/100*(1-t);return[e[0],100*(o-t),100*(1-o)]},ne.hwb.hcg=function(e){const t=e[1]/100,o=1-e[2]/100,i=o-t;let n=0;return i<1&&(n=(o-i)/(1-i)),[e[0],100*i,100*n]},ne.apple.rgb=function(e){return[e[0]/65535*255,e[1]/65535*255,e[2]/65535*255]},ne.rgb.apple=function(e){return[e[0]/255*65535,e[1]/255*65535,e[2]/255*65535]},ne.gray.rgb=function(e){return[e[0]/100*255,e[0]/100*255,e[0]/100*255]},ne.gray.hsl=function(e){return[0,0,e[0]]},ne.gray.hsv=ne.gray.hsl,ne.gray.hwb=function(e){return[0,100,e[0]]},ne.gray.lab=function(e){return[e[0],0,0]},ne.gray.hex=function(e){const t=255&Math.round(e[0]/100*255),o=((t<<16)+(t<<8)+t).toString(16).toUpperCase();return"000000".substring(o.length)+o},ne.rgb.gray=function(e){return[(e[0]+e[1]+e[2])/3/255*100]};var __decorate$q=function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};class IoColorBase extends b{init(){this.valueChanged()}valueMutated(){this.valueChanged()}rgbFromHsv(){const e=ne.hsv.rgb([360*this.hsv[0],100*this.hsv[1],100*this.hsv[2]]);this.rgba[0]=e[0]/255,this.rgba[1]=e[1]/255,this.rgba[2]=e[2]/255}rgbFromHsl(){const e=ne.hsl.rgb([360*this.hsl[0],100*this.hsl[1],100*this.hsl[2]]);this.rgba[0]=e[0]/255,this.rgba[1]=e[1]/255,this.rgba[2]=e[2]/255}valueFromRgb(){this.value.r=this.rgba[0],this.value.g=this.rgba[1],this.value.b=this.rgba[2]}valueChanged(){const e=[255*this.value.r,255*this.value.g,255*this.value.b],t=ne.rgb.hsv(e),o=ne.rgb.hsl(e);0!==t[0]&&360!==t[0]||(t[0]=360*this.hsv[0]),0!==o[1]&&0!==o[1]||(o[0]=360*this.hsl[0]),0===t[1]&&(t[0]=360*this.hsv[0]),0===o[1]&&(o[0]=360*this.hsl[0]),0===t[2]&&(t[1]=100*this.hsv[1]),0!==o[2]&&100!==o[2]||(o[0]=360*this.hsl[0],o[1]=100*this.hsl[1]),this.setProperties({rgba:[e[0]/255,e[1]/255,e[2]/255,this.value.a??1],hsv:[t[0]/360,t[1]/100,t[2]/100],hsl:[o[0]/360,o[1]/100,o[2]/100]})}}__decorate$q([Property({type:Object,init:{r:1,g:1,b:1,a:1}})],IoColorBase.prototype,"value",void 0),__decorate$q([Property({type:Array,init:[1,1,1,1]})],IoColorBase.prototype,"rgba",void 0),__decorate$q([Property({type:Array,init:[1,1,1]})],IoColorBase.prototype,"hsv",void 0),__decorate$q([Property({type:Array,init:[1,1,1]})],IoColorBase.prototype,"hsl",void 0);var __decorate$p=function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};const clamp=(e,t,o)=>o>t?Math.min(Math.max(e,t),o):Math.min(Math.max(e,o),t);class IoSliderBase extends T{static get Style(){return"\n      :host {\n        display: flex;\n        cursor: ew-resize;\n        border: var(--io_border);\n        border-radius: var(--io_borderRadius);\n        border-color: var(--io_borderColorInset);\n        min-height: var(--io_fieldHeight);\n        min-width: var(--io_fieldHeight);\n      }\n      :host:not([vertical]) {\n        width: var(--io_fieldHeight10);\n      }\n      :host[vertical] {\n        cursor: ns-resize;\n        height: var(--io_fieldHeight5);\n        min-height: var(--io_fieldHeight5);\n        flex-basis: var(--io_fieldHeight);\n        flex-grow: 0;\n      }\n    "}_startX=0;_startY=0;_active=-1;_rect=null;get _min(){return"number"==typeof this.min?[this.min,this.min]:this.min instanceof Array?[...this.min]:"object"==typeof this.min?[this.min.x,this.min.y]:[-Infinity,-Infinity]}get _max(){return"number"==typeof this.max?[this.max,this.max]:this.max instanceof Array?[...this.max]:"object"==typeof this.max?[this.max.x,this.max.y]:[Infinity,Infinity]}get _step(){return"number"==typeof this.step?[this.step,this.step]:this.step instanceof Array?[...this.step]:"object"==typeof this.step?[this.step.x,this.step.y]:[.01,.01]}get _value(){return"number"==typeof this.value?[this.value,this.value]:this.value instanceof Array?[...this.value]:"object"==typeof this.value?[this.value.x,this.value.y]:[NaN,NaN]}static get Listeners(){return{focus:"_onFocus",contextmenu:"_onContextmenu",pointerdown:"_onPointerdown",touchstart:["_onTouchstart",{passive:!1}]}}_onFocus(){this.addEventListener("blur",this._onBlur),this.addEventListener("keydown",this._onKeydown)}_onBlur(){this.removeEventListener("blur",this._onBlur),this.removeEventListener("keydown",this._onKeydown)}_onContextmenu(e){e.preventDefault()}_onTouchstart(e){this._rect=this.getBoundingClientRect(),this.addEventListener("touchmove",this._onTouchmove,{passive:!1}),this.addEventListener("touchend",this._onTouchend),this._startX=e.changedTouches[0].clientX,this._startY=e.changedTouches[0].clientY,this._active=this.noscroll?1:-1}_onTouchmove(e){const t=Math.abs(this._startX-e.changedTouches[0].clientX),o=Math.abs(this._startY-e.changedTouches[0].clientY);-1===this._active&&(this.vertical?o>5&&o>t&&(this._active=o>t&&t<5?1:0):t>5&&t>o&&(this._active=t>o&&o<5?1:0)),1===this._active&&e.cancelable&&e.preventDefault()}_onTouchend(){this.removeEventListener("touchmove",this._onTouchmove),this.removeEventListener("touchend",this._onTouchend)}_onPointerdown(e){this._rect=this.getBoundingClientRect(),this.setPointerCapture(e.pointerId),this.addEventListener("pointermove",this._onPointermove),this.addEventListener("pointerup",this._onPointerup),this.addEventListener("pointercancel",this._onPointerup)}_onPointermove(e){"touch"!==e.pointerType&&(this._active=1),this.throttle(this._onPointermoveThrottled,e)}_onPointerup(e){this.releasePointerCapture(e.pointerId),this.removeEventListener("pointermove",this._onPointermove),this.removeEventListener("pointerup",this._onPointerup),this.removeEventListener("pointercancel",this._onPointerup),this._active=-1}_getPointerCoord(e){const t=this._rect||this.getBoundingClientRect();let o=Math.max(0,Math.min(1,(e.clientX-t.x)/t.width)),i=Math.max(0,Math.min(1,1-(e.clientY-t.y)/t.height));return o=Math.pow(o,this.exponent),i=Math.pow(i,this.exponent),this.vertical?[i,o]:[o,i]}_getValueFromCoord(e){const t=[0,0],o=this._min,i=this._max;return t[0]=o[0]*(1-e[0])+i[0]*e[0],t[1]=o[1]*(1-e[1])+i[1]*e[1],t}_onPointermoveThrottled(e){if(1===this._active){document.activeElement!==this&&this.focus();const t=this._getPointerCoord(e),o=this._getValueFromCoord(t);this._inputValue(o)}}_inputValue(e){const t=this._min,o=this._max,i=this._step;if(e[0]=clamp(e[0],o[0],t[0]),e[1]=clamp(e[1],o[1],t[1]),e[0]=Math.round(e[0]/i[0])*i[0],e[1]=Math.round(e[1]/i[1])*i[1],e[0]=Number(e[0].toFixed(5)),e[1]=Number(e[1].toFixed(5)),"number"==typeof this.value)this.inputValue(e[0]);else if(this.value instanceof Array)this.value[0]=e[0],this.value[1]=e[1],this.inputValue(this.value),this.dispatchEvent("object-mutated",{object:this.value},!1,window);else if("object"==typeof this.value){const t=this.value;t.x=e[0],t.y=e[1],this.inputValue(this.value),this.dispatchEvent("object-mutated",{object:this.value},!1,window)}}_onKeydown(e){const t="number"==typeof this.value;switch(e.key){case"ArrowLeft":e.preventDefault(),e.shiftKey?t?this._setDecrease():this._setLeft():this.focusTo("left");break;case"ArrowUp":e.preventDefault(),e.shiftKey?t?this._setIncrease():this._setUp():this.focusTo("up");break;case"ArrowRight":e.preventDefault(),e.shiftKey?t?this._setIncrease():this._setRight():this.focusTo("right");break;case"ArrowDown":e.preventDefault(),e.shiftKey?t?this._setDecrease():this._setDown():this.focusTo("down")}}_setIncrease(){const e=this._value,t=this._step;e[0]=e[0]+t[0],e[1]=e[1]+t[1],this._inputValue(e)}_setDecrease(){const e=this._value,t=this._step;e[0]=e[0]-t[0],e[1]=e[1]-t[1],this._inputValue(e)}_setMin(){const e=this._min;this._inputValue(e)}_setMax(){const e=this._max;this._inputValue(e)}_setUp(){const e=this._value,t=this._step;e[0]=e[0]+t[0],this._inputValue(e)}_setDown(){const e=this._value,t=this._step;e[0]=e[0]-t[0],this._inputValue(e)}_setLeft(){const e=this._value,t=this._step;e[1]=e[1]-t[1],this._inputValue(e)}_setRight(){const e=this._value,t=this._step;e[1]=e[1]+t[1],this._inputValue(e)}init(){this.changed()}changed(){super.changed(),this.setAttribute("aria-valuemin",JSON.stringify(this.min)),this.setAttribute("aria-valuemax",JSON.stringify(this.max)),this.setAttribute("aria-valuestep",JSON.stringify(this.step));const e=this._value;"number"!=typeof e[0]||isNaN(e[0])?this.setAttribute("aria-invalid","true"):this.removeAttribute("aria-invalid"),this.setAttribute("aria-valuenow",JSON.stringify(this.value))}}__decorate$p([Property({value:0})],IoSliderBase.prototype,"value",void 0),__decorate$p([Property(.01)],IoSliderBase.prototype,"step",void 0),__decorate$p([Property(0)],IoSliderBase.prototype,"min",void 0),__decorate$p([Property(1)],IoSliderBase.prototype,"max",void 0),__decorate$p([Property(1)],IoSliderBase.prototype,"exponent",void 0),__decorate$p([Property({value:!1,reflect:!0})],IoSliderBase.prototype,"vertical",void 0),__decorate$p([Property(!1)],IoSliderBase.prototype,"noscroll",void 0),__decorate$p([Property("slider")],IoSliderBase.prototype,"role",void 0),__decorate$p([Property("0")],IoSliderBase.prototype,"tabindex",void 0);var __decorate$o=function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};let re=class IoSlider extends IoSliderBase{static get Frag(){return"\n    varying vec2 vUv;\n\n    void main(void) {\n      // Dimensions\n      vec2 size = uVertical == 1 ? uSize.yx : uSize;\n      vec2 uv = uVertical == 1 ? vUv.yx : vUv;\n      vec2 position = size * vec2(uv.x, uv.y - 0.5);\n      vec2 expPosition = size * vec2(pow(uv.x, uExponent), uv.y - 0.5);\n      float valueInRange = (uValue - uMin) / (uMax - uMin);\n      float valueSign = sign(valueInRange);\n      float expValueInRange = pow(abs(valueInRange), 1./uExponent) * valueSign;\n\n      // Colors\n      vec3 finalCol = io_bgColorField.rgb;\n      vec3 gridCol = io_bgColorDimmed.rgb;\n      vec3 sliderCol = io_bgColorBlue.rgb;\n      vec3 lineCol1 = io_color.rgb;\n      vec3 lineCol2 = io_bgColor.rgb;\n\n      // Grid\n      float gridSize = size.x / abs((uMax - uMin) / uStep);\n      float gridOffset = mod(uStep - uMin, uStep) / (uMax - uMin) * size.x;\n      float gridShape = paintDerivativeGrid2D(translate(expPosition, gridOffset, 0.0), vec2(gridSize, 0.0), io_borderWidth);\n      finalCol = compose(finalCol, vec4(gridCol, gridShape * 0.5));\n\n      // Slider\n      float sliderShape = rectangle(expPosition, vec2(size.x * valueInRange, size.y));\n      finalCol = compose(finalCol, vec4(sliderCol, sliderShape));\n      finalCol = compose(finalCol, vec4(io_bgColorField.rgb, gridShape * sliderShape * 0.125));\n\n      // Lines\n      float lineShape1 = lineVertical(translate(position, expValueInRange * size.x, 0.0), io_borderWidth);\n      finalCol = compose(finalCol, vec4(lineCol1, lineShape1));\n      float lineShape2 = lineVertical(translate(position, expValueInRange * size.x - io_borderWidth, 0.0), io_borderWidth);\n      finalCol = compose(finalCol, vec4(lineCol2, lineShape2));\n\n      gl_FragColor = vec4(finalCol, 1.0);\n    }"}};__decorate$o([Property(0)],re.prototype,"value",void 0),__decorate$o([Property(.01)],re.prototype,"step",void 0),__decorate$o([Property(0)],re.prototype,"min",void 0),__decorate$o([Property(1)],re.prototype,"max",void 0),re=__decorate$o([Register],re);var __decorate$n=function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};let se=class IoSlider2d extends IoSliderBase{static get Style(){return"\n      :host {\n        cursor: crosshair;\n        border: var(--io_border);\n        border-radius: var(--io_borderRadius);\n        border-color: var(--io_borderColorInset);\n        flex-grow: 0;\n      }\n      :host:not([vertical]),\n      :host[vertical] {\n        width: var(--io_fieldHeight5);\n        height: var(--io_fieldHeight5);\n        min-width: var(--io_fieldHeight5);\n        min-height: var(--io_fieldHeight5);\n        cursor: crosshair;\n      }\n    "}static get GlUtils(){return"\n      vec3 paintKnob(vec3 dstCol, vec2 p, vec2 center, vec3 color) {\n        vec4 finalCol = vec4(0.0);\n        vec2 pCenter = translate(p, center);\n        float radius = io_fieldHeight * 0.25;\n        float stroke = io_borderWidth;\n        float strokeShape = circle(pCenter, radius + stroke + stroke);\n        float fillShape   = circle(pCenter, radius + stroke);\n        float colorShape  = circle(pCenter, radius);\n        finalCol = mix(io_colorStrong, finalCol, strokeShape);\n        finalCol = mix(vec4(io_bgColor.rgb, 1.0), finalCol, fillShape);\n        finalCol = mix(vec4(color, 1.0), finalCol, colorShape);\n        return compose(dstCol, finalCol);\n      }\n    "}static get Frag(){return"\n    varying vec2 vUv;\n\n    void main(void) {\n      // Dimensions\n      vec2 size = uVertical == 1 ? uSize.yx : uSize;\n      vec2 uv = uVertical == 1 ? vUv.yx : vUv;\n      vec2 position = size * (uv - vec2(0.5));\n\n      // Colors\n      vec3 finalCol = io_bgColorField.rgb;\n      vec3 gridCol = io_bgColorDimmed.rgb;\n      vec3 sliderCol = io_bgColorBlue.rgb;\n      vec3 lineCol1 = io_color.rgb;\n      vec3 lineCol2 = io_bgColor.rgb;\n\n      // Grid\n      vec2 gridSize = size / abs((uMax - uMin) / uStep);\n      vec2 gridOffset = (uMax + uMin) / (uMax - uMin) * size / 2.;\n      vec2 gridPosition = translate(position, -gridOffset);\n      float gridShape = paintDerivativeGrid2D(gridPosition, gridSize, io_borderWidth);\n      finalCol = compose(finalCol, vec4(gridCol, gridShape * 0.5));\n\n      // Axis\n      float axisShape = lineCross2d(gridPosition, io_borderWidth);\n      finalCol = compose(finalCol, vec4(gridCol, axisShape));\n\n      // Knob\n      vec2 knobPos = uValue / (uMax - uMin) * size;\n      finalCol = paintKnob(finalCol, gridPosition, knobPos, sliderCol);\n\n      gl_FragColor = vec4(finalCol, 1.0);\n    }"}};__decorate$n([Property({value:null,type:Array,init:[0,0]})],se.prototype,"value",void 0),__decorate$n([Property({value:null,type:Array,init:[.01,.01]})],se.prototype,"step",void 0),__decorate$n([Property({value:null,type:Array,init:[-1,-1]})],se.prototype,"min",void 0),__decorate$n([Property({value:null,type:Array,init:[1,1]})],se.prototype,"max",void 0),__decorate$n([Property(!0)],se.prototype,"noscroll",void 0),se=__decorate$n([Register],se);var __decorate$m=function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};let ae=class IoColorSlider extends IoColorBase{static get Style(){return"\n      :host {\n        display: flex;\n      }\n    "}_onValueInput(e){const t=e.detail.value;switch(this.channel){case"r":this.value.r=t;break;case"g":this.value.g=t;break;case"b":this.value.b=t;break;case"a":this.value.a=t;break;case"h":this.hsv[0]=t,this.rgbFromHsv(),this.valueFromRgb();break;case"s":this.hsv[1]=t,this.rgbFromHsv(),this.valueFromRgb();break;case"v":this.hsv[2]=t,this.rgbFromHsv(),this.valueFromRgb();break;case"l":this.hsl[2]=t,this.rgbFromHsl(),this.valueFromRgb();break;case"hs":this.hsv[0]=t[0],this.hsv[1]=t[1],this.rgbFromHsv(),this.valueFromRgb();break;case"sv":this.hsv[1]=t[0],this.hsv[2]=t[1],this.rgbFromHsv(),this.valueFromRgb();break;case"sl":this.hsl[1]=t[0],this.hsl[2]=t[1],this.rgbFromHsl(),this.valueFromRgb()}this.dispatchEvent("object-mutated",{object:this.value},!1,window),this.dispatchEvent("value-input",{property:"value",value:this.value},!1)}changed(){const e=this.channel,t=`io-color-slider-${e}`;let o=0,i=[0,0,0,0],n=0,r=1,s=this.step;switch(this.channel){case"r":o=this.value.r,i=[...this.rgba];break;case"g":o=this.value.g,i=[...this.rgba];break;case"b":o=this.value.b,i=[...this.rgba];break;case"a":o=this.value.a||0,i=[...this.rgba];break;case"h":o=this.hsv[0],i=[...this.hsv,1];break;case"s":o=this.hsv[1],i=[...this.hsv,1];break;case"v":o=this.hsv[2],i=[...this.hsv,1];break;case"l":o=this.hsl[2],i=[...this.hsl,1];break;case"hs":o=[this.hsv[0],this.hsv[1]],i=[...this.hsv,1],n=[n,n],r=[r,r],s=[s,s];break;case"sv":o=[this.hsv[1],this.hsv[2]],i=[...this.hsv,1],n=[n,n],r=[r,r],s=[s,s];break;case"sl":o=[this.hsl[1],this.hsl[2]],i=[...this.hsl,1],n=[n,n],r=[r,r],s=[s,s]}this.template([[t,{id:e,value:o,min:n,max:r,step:s,vertical:this.vertical,color:i,"@value-input":this._onValueInput}]])}};__decorate$m([Property({type:Array,init:[0,0,0,0]})],ae.prototype,"color",void 0),__decorate$m([Property(.01)],ae.prototype,"step",void 0),__decorate$m([Property("")],ae.prototype,"channel",void 0),__decorate$m([Property({value:!1,reflect:!0})],ae.prototype,"vertical",void 0),ae=__decorate$m([Register],ae);class IoColorSliderBase extends re{static get GlUtils(){return`\n      // Note: Implement in subclass!\n      // TODO: Allow GlUtils to rewrite inherited functions!\n      // vec3 getStartColor(vec2 uv) {}\n      // vec3 getEndColor(vec2 uv) {}\n      ${o.hue2rgb}\n      ${o.hsv2rgb}\n      ${o.hsl2rgb}\n    `}static get Frag(){return"\n    varying vec2 vUv;\n\n    void main(void) {\n      // Dimensions\n      vec2 size = uVertical == 1 ? uSize.yx : uSize;\n      vec2 uv = uVertical == 1 ? vUv.yx : vUv;\n      vec2 position = size * vec2(uv.x, uv.y - 0.5);\n      float valueInRange = (uValue - uMin) / (uMax - uMin);\n\n      // Colors\n      vec3 finalCol = io_bgColorField.rgb;\n      vec3 startCol = getStartColor(uv);\n      vec3 gridCol = io_bgColorDimmed.rgb;\n      vec3 endCol = getEndColor(uv);\n      vec3 sliderCol = mix(startCol, endCol, uv.x);\n\n      vec2 linePos = translate(size * uv, 0.0, size.y / 2.);\n      finalCol = paintHorizontalLine(finalCol, linePos, sliderCol);\n\n      // Grid\n      float gridSize = size.x / abs((uMax - uMin) / uStep);\n      float gridOffset = mod(uStep - uMin, uStep) / (uMax - uMin) * size.x;\n      float gridShape = paintDerivativeGrid2D(translate(position, gridOffset, 0.0), vec2(gridSize, 0.0), io_borderWidth);\n      if (size.x * uStep < 4.0) gridShape = 0.0;\n      finalCol = compose(finalCol, vec4(sliderCol, gridShape * 0.25));\n\n      // Slider\n      float sliderShape = rectangle(position, vec2(size.x * valueInRange, size.y));\n      finalCol = compose(finalCol, vec4(sliderCol, sliderShape));\n      finalCol = compose(finalCol, vec4(io_bgColorField.rgb, gridShape * sliderShape * 0.125));\n\n      gl_FragColor = vec4(finalCol, 1.0);\n    }"}}class IoColorSlider2dBase extends se{static get GlUtils(){return`\n      // Note: Implement in subclass!\n      // TODO: Allow GlUtils to rewrite inherited functions!\n      // vec3 getColor(vec2 uv) {}\n      ${o.hue2rgb}\n      ${o.hsv2rgb}\n      ${o.hsl2rgb}\n    `}static get Frag(){return"\n    varying vec2 vUv;\n\n    void main(void) {\n      // Dimensions\n      vec2 size = uVertical == 1 ? uSize.yx : uSize;\n      vec2 uv = uVertical == 1 ? vUv.yx : vUv;\n      vec2 position = size * (uv - vec2(0.5));\n\n      // Colors\n      vec3 finalCol = geio_color(uv);\n      vec3 gridCol = io_bgColorDimmed.rgb;\n      vec3 sliderCol = geio_color(uValue);\n\n      // Grid\n      vec2 gridSize = size / abs((uMax - uMin) / uStep);\n      vec2 gridOffset = (uMax + uMin) / (uMax - uMin) * size / 2.;\n      vec2 gridPosition = translate(position, -gridOffset);\n      float gridShape = paintDerivativeGrid2D(gridPosition, gridSize, io_borderWidth);\n      if (min(size.x * uStep.x, size.y * uStep.y) < 2.0) gridShape = 0.0;\n      finalCol = compose(finalCol, vec4(gridCol, gridShape * 0.5));\n\n      vec2 knobPos = uValue / (uMax - uMin) * size;\n      finalCol = paintKnob(finalCol, gridPosition, knobPos, sliderCol);\n\n      gl_FragColor = vec4(finalCol, 1.0);\n    }"}}let le=class IoColorSliderR extends IoColorSliderBase{static get GlUtils(){return"\n      vec3 getStartColor(vec2 uv) {\n        return vec3(uv.x, uColor[1], uColor[2]);\n      }\n      vec3 getEndColor(vec2 uv) {\n        return vec3(uv.x, uColor[1], uColor[2]);\n      }\n    "}};le=__decorate$m([Register],le);let he=class IoColorSliderG extends IoColorSliderBase{static get GlUtils(){return"\n      vec3 getStartColor(vec2 uv) {\n        return vec3(uColor[0], uv.x, uColor[2]);\n      }\n      vec3 getEndColor(vec2 uv) {\n        return vec3(uColor[0], uv.x, uColor[2]);\n      }\n    "}};he=__decorate$m([Register],he);let ce=class IoColorSliderB extends IoColorSliderBase{static get GlUtils(){return"\n      vec3 getStartColor(vec2 uv) {\n        return vec3(uColor[0], uColor[1], uv.x);\n      }\n      vec3 getEndColor(vec2 uv) {\n        return vec3(uColor[0], uColor[1], uv.x);\n      }\n    "}};ce=__decorate$m([Register],ce);let de=class IoColorSliderA extends IoColorSliderBase{static get GlUtils(){return"\n      vec3 getStartColor(vec2 uv) {\n        vec2 size = uVertical == 1 ? uSize.yx : uSize;\n        vec2 position = size * (uv - vec2(0.0, 0.5));\n        return mix(vec3(0.5), vec3(1.0), checkerX(position, io_fieldHeight / 4.0));\n      }\n      vec3 getEndColor(vec2 uv) {\n        vec2 size = uVertical == 1 ? uSize.yx : uSize;\n        vec2 position = size * (uv - vec2(0.0, 0.5));\n        vec3 chkCol = mix(vec3(0.5), vec3(1.0), checkerX(position, io_fieldHeight / 4.0));\n        return mix(chkCol, uColor.rgb, 1.0);\n      }\n    "}};de=__decorate$m([Register],de);let pe=class IoColorSliderH extends IoColorSliderBase{static get GlUtils(){return"\n      vec3 getStartColor(vec2 uv) {\n        return hsv2rgb(vec3(uv.x, uColor[1], uColor[2]));\n      }\n      vec3 getEndColor(vec2 uv) {\n        return hsv2rgb(vec3(uv.x, uColor[1], uColor[2]));\n      }\n    "}};pe=__decorate$m([Register],pe);let ue=class IoColorSliderS extends IoColorSliderBase{static get GlUtils(){return"\n      vec3 getStartColor(vec2 uv) {\n        return hsv2rgb(vec3(uColor[0], uv.x, uColor[2]));\n      }\n      vec3 getEndColor(vec2 uv) {\n        return hsv2rgb(vec3(uColor[0], uv.x, uColor[2]));\n      }\n    "}};ue=__decorate$m([Register],ue);let ve=class IoColorSliderV extends IoColorSliderBase{static get GlUtils(){return"\n      vec3 getStartColor(vec2 uv) {\n        return hsv2rgb(vec3(uColor[0], uColor[1], uv.x));\n      }\n      vec3 getEndColor(vec2 uv) {\n        return hsv2rgb(vec3(uColor[0], uColor[1], uv.x));\n      }\n    "}};ve=__decorate$m([Register],ve);let ge=class IoColorSliderL extends IoColorSliderBase{static get GlUtils(){return"\n      vec3 getStartColor(vec2 uv) {\n        return hsl2rgb(vec3(uColor[0], uColor[1], uv.x));\n      }\n      vec3 getEndColor(vec2 uv) {\n        return hsl2rgb(vec3(uColor[0], uColor[1], uv.x));\n      }\n    "}};ge=__decorate$m([Register],ge);let fe=class IoColorSliderHs extends IoColorSlider2dBase{static get GlUtils(){return"\n      vec3 geio_color(vec2 uv) {\n        return hsv2rgb(vec3(uv, uColor[2]));\n      }\n    "}};fe=__decorate$m([Register],fe);let be=class IoColorSliderSv extends IoColorSlider2dBase{static get GlUtils(){return"\n      vec3 geio_color(vec2 uv) {\n        return hsv2rgb(vec3(uColor[0], uv));\n      }\n    "}};be=__decorate$m([Register],be);let me=class IoColorSliderSL extends IoColorSlider2dBase{static get GlUtils(){return"\n      vec3 geio_color(vec2 uv) {\n        return hsl2rgb(vec3(uColor[0], uv));\n      }\n    "}};me=__decorate$m([Register],me);var __decorate$l=function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};let ye=class IoColorPanel extends IoColorBase{static get Style(){return"\n    :host {\n      display: flex;\n      /* Panel */\n      flex: 1 1 auto;\n      flex-direction: column;\n      flex-wrap: nowrap;\n      align-self: stretch;\n      align-items: stretch;\n      justify-self: stretch;\n      border-radius: var(--io_borderRadius);\n      border: var(--io_border);\n      border-color: var(--io_borderColorOutset);\n      color: var(--io_colorField);\n      background-color: var(--io_bgColorDimmed);\n      padding: var(--io_spacing);\n      /*  */\n      cursor: move;\n      align-items: stretch;\n      flex-grow: 0;\n      min-width: var(--io_lineHeight);\n      min-height: calc(var(--io_lineHeight) * 5.5);\n      flex-direction: row;\n    }\n    :host:not([expanded]) {\n      display: none;\n    }\n    :host[vertical] {\n      flex-direction: column;\n    }\n    :host > * {\n      border-radius: calc(var(--io_borderRadius) - var(--io_borderWidth));\n    }\n    :host > :first-child {\n      flex: 1 0 auto;\n    }\n    :host > *:not(:first-child) {\n      flex: 0 0 auto;\n    }\n    :host > *:not(:last-child) {\n      margin: 0 0 var(--io_spacing) 0;\n    }\n    :host:not([vertical]) > * {\n      margin: 0 var(--io_spacing) 0 0;\n    }\n    "}static get Listeners(){return{keydown:"_onKeydown"}}_onKeydown(e){"Escape"!==e.key&&"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),this.expanded=!1)}onValueSet(){this.dispatchEvent("value-input",{property:"value",value:this.value},!0)}changed(){this.template([["io-color-slider",{value:this.value,channel:"sv",vertical:this.vertical,"@value-input":this.onValueSet}],["io-color-slider",{value:this.value,channel:"h",vertical:!this.vertical,"@value-input":this.onValueSet}],void 0!==this.value.a?["io-color-slider",{value:this.value,channel:"a","@value-input":this.onValueSet,vertical:!this.vertical}]:null])}};__decorate$l([Property({value:!1,reflect:!0})],ye.prototype,"expanded",void 0),__decorate$l([Property({value:!1,reflect:!0})],ye.prototype,"vertical",void 0),__decorate$l([Property({value:!1,reflect:!0})],ye.prototype,"inlayer",void 0),ye=__decorate$l([Register],ye);const _e=new ye({inlayer:!0});F.appendChild(_e);var __decorate$k=function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};let xe=class IoColorSwatch extends IoColorBase{static get Style(){return"\n      :host {\n        display: inline-block;\n        min-width: var(--io_fieldHeight);\n        height: var(--io_fieldHeight);\n        background-color: white;\n        background-image: linear-gradient(45deg, #808080 25%, transparent 25%), linear-gradient(-45deg, #808080 25%, transparent 25%), linear-gradient(45deg, transparent 75%, #808080 75%), linear-gradient(-45deg, transparent 75%, #808080 75%);\n        background-size: 12px 12px;\n        background-position: 0 0, 0 6px, 6px -6px, -6px 0px;\n        overflow: visible;\n      }\n      :host > div { \n        width: 100%;\n        height: 100%;\n      }\n    "}valueChanged(){super.valueChanged(),this.template([["div",{style:{"background-color":`rgba(${255*this.rgba[0]},${255*this.rgba[1]}, ${255*this.rgba[2]}, ${this.rgba[3]})`}}]])}};xe=__decorate$k([Register],xe);var __decorate$j=function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};let Ce=class IoColorPicker extends b{static get Style(){return"\n      :host {\n        height: var(--io_fieldHeight);\n        border: var(--io_border);\n        border-color: var(--io_borderColorInset);\n        border-radius: var(--io_borderRadius);\n        overflow: hidden;\n      }\n    "}static get Listeners(){return{click:"_onClick",keydown:"_onKeydown"}}_onClick(e){this.toggle()}get expanded(){return _e.expanded&&_e.value===this.value}_onKeydown(e){const t=this.getBoundingClientRect(),o=_e.getBoundingClientRect();"Enter"===e.key||" "===e.key?(e.preventDefault(),this.toggle(),this.expanded&&_e.firstChild.focus()):this.expanded&&o.top>=t.bottom&&"ArrowDown"===e.key||this.expanded&&o.bottom<=t.top&&"ArrowUp"===e.key?(e.preventDefault(),_e.firstChild.focus()):(this.collapse(),super._onKeydown(e))}_onValueSet(){this.dispatchEvent("value-input",{property:"value",value:this.value},!0)}toggle(){this.expanded?this.collapse():this.expand()}expand(){_e.value=this.value,_e.expanded=!0,F.setElementPosition(_e,"down",this.getBoundingClientRect()),_e.addEventListener("value-input",this._onValueSet),_e._targetValueSetHandler=this._onValueSet}collapse(){_e.removeEventListener("value-input",_e._targetValueSetHandler),_e.expanded=!1}changed(){this.template([["io-color-swatch",{$:"swatch",value:this.value}]])}};__decorate$j([Property({value:{r:1,g:1,b:1,a:1}})],Ce.prototype,"value",void 0),__decorate$j([Property("0")],Ce.prototype,"tabindex",void 0),Ce=__decorate$j([Register],Ce);var __decorate$i=function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};let we=class IoColorRgba extends IoColorBase{static get Style(){return"\n      :host {\n        display: flex;\n        flex: 0 1 auto;\n        min-width: var(--io_fieldHeight5);\n        width: var(--io_fieldHeight10);\n      }\n      :host > io-number {\n        flex: 1 0 0;\n      }\n      :host > io-number#r {\n        border-bottom-color: var(--io_bgColorRed);\n      }\n      :host > io-number#g {\n        border-bottom-color: var(--io_bgColorGreen);\n      }\n      :host > io-number#b {\n        border-bottom-color: var(--io_bgColorBlue);\n      }\n      :host > io-number#a {\n        border-bottom-color: var(--io_color);\n      }\n      :host > io-color-picker {\n        flex-shrink: 0;\n      }\n      :host > *:not(:last-child) {\n        margin-right: var(--io_spacing);\n      }\n    "}_onNumberValueInput(e){const t=e.composedPath()[0].id,o=e.detail.value,i=e.detail.oldValue,n=this.value;n[t]=o;const r={object:this.value,property:t,value:n,oldValue:i};this.dispatchEvent("object-mutated",r,!1,window)}changed(){this.template([["io-number",{$:"r",id:"r",value:this.value.r,min:0,max:1,step:.001,ladder:!0,"@value-input":this._onNumberValueInput}],["io-number",{$:"g",id:"g",value:this.value.g,min:0,max:1,step:.001,ladder:!0,"@value-input":this._onNumberValueInput}],["io-number",{$:"b",id:"b",value:this.value.b,min:0,max:1,step:.001,ladder:!0,"@value-input":this._onNumberValueInput}],void 0!==this.value.a?["io-number",{$:"a",id:"a",value:this.value.a,min:0,max:1,step:1e-4,ladder:!0,"@value-input":this._onNumberValueInput}]:null,["io-color-picker",{$:"swatch",value:this.value}]])}};we=__decorate$i([Register],we);var __decorate$h=function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};let Pe=class IoVector extends b{static get Style(){return"\n      :host {\n        display: flex;\n        flex: 0 1 auto;\n        min-width: var(--io_fieldHeight5);\n        width: var(--io_fieldHeight8);\n      }\n      :host > io-number {\n        flex: 1 1 100%;\n      }\n      :host > *:not(:last-child) {\n        margin-right: var(--io_spacing);\n      }\n      :host > io-boolicon {\n        flex-shrink: 0;\n        padding: var(--io_spacing);\n      }\n    "}_ratios={};_onNumberPointerDown(e){const t=e.composedPath()[0].id;if(this._ratios={},this.linked&&0!==this.value[t])for(const e of this.keys)this._ratios[e]=this.value[e]/this.value[t]}_onNumberValueInput(e){const t=e.composedPath()[0].id,o=e.detail.value,i=e.detail.oldValue,n=this.value;if(n[t]=o,this.linked)for(const e of this.keys)e!==t&&this._ratios[e]&&(n[e]=n[t]*this._ratios[e]);const r=this.linked?{object:this.value}:{object:this.value,property:t,value:n,oldValue:i};this.dispatchEvent("object-mutated",r,!1,window)}valueChanged(){this.keys=Object.keys(this.value).filter((e=>"number"==typeof this.value[e]))}changed(){const e=[];for(const t of this.keys)void 0!==this.value[t]&&e.push(["io-number",{id:t,value:this.value[t],conversion:this.conversion,step:this.step,min:this.min,max:this.max,ladder:this.ladder,"@pointerdown":this._onNumberPointerDown,"@value-input":this._onNumberValueInput}]);e.push(this.getSlotted()),this.template(e)}getSlotted(){return this.linkable?["io-boolicon",{value:this.bind("linked"),true:"vectors:link",false:"vectors:unlink"}]:null}};__decorate$h([Property({})],Pe.prototype,"value",void 0),__decorate$h([Property(1)],Pe.prototype,"conversion",void 0),__decorate$h([Property(.001)],Pe.prototype,"step",void 0),__decorate$h([Property(-Infinity)],Pe.prototype,"min",void 0),__decorate$h([Property(Infinity)],Pe.prototype,"max",void 0),__decorate$h([Property(!1)],Pe.prototype,"linkable",void 0),__decorate$h([Property(!1)],Pe.prototype,"linked",void 0),__decorate$h([Property(!0)],Pe.prototype,"ladder",void 0),__decorate$h([Property({})],Pe.prototype,"keys",void 0),Pe=__decorate$h([Register],Pe);var __decorate$g=function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};let Se=class IoMatrix extends Pe{static get Style(){return'\n      :host {\n        display: grid;\n        align-self: stretch;\n        justify-self: stretch;\n        grid-gap: var(--io_spacing);\n      }\n      :host > *:not(:last-child) {\n        margin-right: 0;\n      }\n      :host[columns="4"] {\n        grid-template-columns: repeat(4, 1fr);\n      }\n      :host[columns="3"] {\n        grid-template-columns: repeat(3, 1fr);\n      }\n      :host[columns="2"] {\n        grid-template-columns: repeat(2, 1fr);\n      }\n    '}_onNumberValueInput(e){const t=e.composedPath()[0].id,o=e.detail.value,i=e.detail.oldValue;this.value[t]=o;const n={object:this.value,property:t,value:o,oldValue:i};this.dispatchEvent("object-mutated",n,!1,window)}valueChanged(){4===this.value.length&&this.setProperties({keys:["0","1","2","3"],columns:2}),9===this.value.length&&this.setProperties({keys:["0","1","2","3","4","5","6","7","8"],columns:3}),16===this.value.length&&this.setProperties({keys:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15"],columns:4})}};__decorate$g([Property({type:Array,init:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]})],Se.prototype,"value",void 0),__decorate$g([Property({value:4,reflect:!0})],Se.prototype,"columns",void 0),Se=__decorate$g([Register],Se);oe.registerIcons("vectors",'\n<svg>\n  <g id="unlink">\n    <path d="M3.9,12c0-1.7,1.4-3.2,3.2-3.2h4V7H7c-2.7,0-5,2.2-5,5s2.2,5,5,5h4v-1.9H7C5.2,15.1,3.9,13.7,3.9,12z M17,7h-4.1v1.9H17\n      c1.7,0,3.2,1.4,3.2,3.2s-1.4,3.2-3.2,3.2h-4.1v1.9H17c2.7,0,5-2.2,5-5S19.8,7,17,7z"/>\n  </g>\n  <g id="link">\n    <path d="M3.9,12c0-1.7,1.4-3.2,3.2-3.2h4V7H7c-2.7,0-5,2.2-5,5s2.2,5,5,5h4v-1.9H7C5.2,15.1,3.9,13.7,3.9,12z M8,13h8.1v-2H8V13z\n      M17,7h-4.1v1.9H17c1.7,0,3.2,1.4,3.2,3.2s-1.4,3.2-3.2,3.2h-4.1v1.9H17c2.7,0,5-2.2,5-5S19.8,7,17,7z"/>\n  </g>\n</svg>');var __decorate$f=function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};function _isNaN(e){return"number"==typeof e&&isNaN(e)}function _isSelectable(e){return"select"===e||"scroll"===e}let Oe=class MenuOptions extends(IoNodeMixin(Array)){push(...e){for(let t=0;t<e.length;t++){const o=e[t];o instanceof Re&&(o.addEventListener("selected-changed",this._onItemSelectedChanged),o.addEventListener("path-changed",this._onSubOptionsPathChanged),super.push(o))}}getItem(e,t=!1){for(let o=0;o<this.length;o++){if(this[o].value===e)return this[o];if(t&&this[o].options){const i=this[o].options.getItem(e,t);if(i)return i}}return null}constructor(e=[],t={}){const o=[];for(let t=0;t<e.length;t++)e[t]instanceof Re?o.push(e[t]):o.push(new Re(e[t]));super(t,...o),""!==this.path&&this.pathChanged(),void 0!==this.first&&this.firstChanged();for(let e=0;e<this.length;e++){const t=this[e];t.addEventListener("selected-changed",this._onItemSelectedChanged),t.addEventListener("path-changed",this._onSubOptionsPathChanged),t.selected&&"select"===t.mode&&this.updatePaths(t)}}addItems(e){for(let t=0;t<e.length;t++){let o;o=e[t]instanceof Re?e[t]:new Re(e[t]),this.push(o),o.addEventListener("selected-changed",this._onItemSelectedChanged),o.addEventListener("path-changed",this._onSubOptionsPathChanged)}}pathChanged(){const e=this.path?[...this.path.split(this.delimiter)]:[];if(this.length&&e.length){const t=e.shift(),o=this.find((e=>e.label===t));if(o)_isSelectable(o.mode)&&(o.options&&(o.options.path=e.join(this.delimiter)),o.selected=!0);else for(let e=0;e<this.length;e++)_isSelectable(this[e].mode)&&(this[e].selected=!1)}else for(let e=0;e<this.length;e++)_isSelectable(this[e].mode)&&(this[e].selected=!1)}firstChanged(){if(void 0!==this.first){const e=this.find((e=>e.value===this.first&&"select"===e.mode||_isNaN(e.value)&&_isNaN(this.first)));e&&(e.selected=!0)}else for(let e=0;e<this.length;e++)"select"===this[e].mode&&(this[e].selected=!1)}lastChanged(){}updatePaths(e){const t=[];let o="select"===e?.mode||"scroll"===e?.mode?e:void 0,i="select"===e?.mode?e:void 0,n="scroll"===e?.mode?e:void 0;const r=this.find((e=>"select"===e.mode&&e.selected)),s=this.find((e=>"scroll"===e.mode&&e.selected));if(o||!r&&!s){for(;o;)t.push(o.label),"select"===o.mode&&(i=o),"scroll"===o.mode&&(n=o),o=o.options?.find((e=>("select"===e.mode||"scroll"===e.mode)&&e.selected));this.setProperties({path:t.join(this.delimiter),first:"select"===e?.mode?e.value:void 0,last:void 0!==i?i.value:void 0,scroll:void 0!==n?n.value:void 0})}}_onItemSelectedChanged(e){const t=e.target;if(_isSelectable(t.mode))if(t.selected){for(let e=0;e<this.length;e++)this[e]!==t&&_isSelectable(this[e].mode)&&(this[e].selected=!1);this.updatePaths(t),this.dispatchEvent("item-selected",{item:t})}else this.updatePaths()}_onSubOptionsPathChanged(e){const t=e.target;t.selected?this.updatePaths(t):this.updatePaths()}selectDefault(){for(let e=0;e<this.length;e++)if(_isSelectable(this[e].mode)){if(!this[e].hasmore)return this[e].selected=!0,!0;if(this[e].options.selectDefault())return!0}return!1}bind(e){return super.bind(e)}dispose(){for(let e=0;e<this.length;e++)this[e].removeEventListener("selected-changed",this._onItemSelectedChanged),this[e].removeEventListener("path-changed",this._onSubOptionsPathChanged);super.dispose()}};__decorate$f([Property(void 0)],Oe.prototype,"first",void 0),__decorate$f([Property(void 0)],Oe.prototype,"last",void 0),__decorate$f([Property(void 0)],Oe.prototype,"scroll",void 0),__decorate$f([Property("")],Oe.prototype,"path",void 0),__decorate$f([Property(",")],Oe.prototype,"delimiter",void 0),Oe=__decorate$f([Register],Oe);var __decorate$e=function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};let Re=class MenuItem extends i{get hasmore(){return!!this.options?.length}getSubitem(e){return this.options?.getItem(e)}constructor(e){const t={value:"",label:""};"object"!=typeof e||null===e?(t.value=e,t.label=String(e)):(t.value=e.value,void 0===e.label?"object"==typeof t.value?null===t.value?t.label="null":t.label=`${t.value.constructor.name}`+(t.value instanceof Array?`(${t.value.length})`:""):t.label=String(t.value):t.label=e.label,void 0!==e.icon&&(t.icon=e.icon),void 0!==e.hint&&(t.hint=e.hint),void 0!==e.hidden&&(t.hidden=e.hidden),void 0!==e.disabled&&(t.disabled=e.disabled),void 0!==e.action&&(t.action=e.action),void 0!==e.mode&&(t.mode=e.mode),void 0!==e.selected&&(t.selected=e.selected),void 0!==e.options&&(e.options instanceof Oe?t.options=e.options:t.options=new Oe(e.options)),void 0!==t.selected||"select"!==e.mode&&void 0!==e.mode||!t.options||(t.selected=!!t.options.find((e=>e.selected&&"select"===e.mode)))),super(t),this.options&&(this.options.addEventListener("item-selected",this._onSubItemSelected),this.options.addEventListener("path-changed",this._onOptionsPathChanged))}toJSON(){const e={value:this.value,label:this.label,icon:this.icon,hint:this.hint,hidden:this.hidden,disabled:this.disabled};return this.options&&(e.options=this.options),e}_onSubItemSelected(){this.selected=!0}_onOptionsPathChanged(e){this.dispatchEvent("path-changed",e.detail)}optionsChanged(){void 0===this.options?.first&&void 0===this.options?.scroll||"select"!==this.mode||(this.selected=!0)}selectedChanged(){if("select"===this.mode&&!1===this.selected&&this.options){for(let e=0;e<this.options.length;e++)"select"!==this.options[e].mode&&"scroll"!==this.options[e].mode||(this.options[e].selected=!1);this.options.updatePaths()}}dispose(){this.options&&(this.options.removeEventListener("item-selected",this._onSubItemSelected),this.options.removeEventListener("path-changed",this._onOptionsPathChanged)),super.dispose()}};__decorate$e([Property(void 0)],Re.prototype,"value",void 0),__decorate$e([Property("")],Re.prototype,"label",void 0),__decorate$e([Property("")],Re.prototype,"icon",void 0),__decorate$e([Property("")],Re.prototype,"hint",void 0),__decorate$e([Property(!1)],Re.prototype,"hidden",void 0),__decorate$e([Property(!1)],Re.prototype,"disabled",void 0),__decorate$e([Property(void 0)],Re.prototype,"action",void 0),__decorate$e([Property("select")],Re.prototype,"mode",void 0),__decorate$e([Property(!1)],Re.prototype,"selected",void 0),__decorate$e([Property(void 0)],Re.prototype,"options",void 0),Re=__decorate$e([Register],Re);var __decorate$d=function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};function addMenuOptions(e,t,o=0){const i=[];if(o<=t)for(let n=0;n<e.length;n++){const r=e[n];if(r.options?.length){const e=C({value:r.selected,storage:"local",key:genObjectStorageID(r)});!0===r.selected&&(e.value=!0),i.push(["io-collapsable",{label:r.label,icon:r.icon,expanded:e,elements:[...addMenuOptions(r.options,t,o+1)]}])}else i.push(["io-menu-item",{item:r,depth:o}])}return i}function matchItem(e,t){return void 0!==e.value&&-1!==String(e.value).toLowerCase().indexOf(t)||(!(!e.label||-1===e.label.toLowerCase().indexOf(t))||!(!e.hint||-1===e.hint.toLowerCase().indexOf(t)))}function filterOptions(e,t,o=5,i=[],n=0){if(t=t.toLowerCase(),n<=o)for(let r=0;r<e.length;r++)matchItem(e[r],t)&&i.push(["io-menu-item",{item:e[r],depth:0}]),e[r].options&&filterOptions(e[r].options,t,o,i,n+1)}let ke=class IoMenuTree extends b{static get Style(){return'\n    :host {\n      display: flex;\n      flex: 0 0 auto;\n      flex-direction: column;\n      flex-wrap: nowrap;\n      align-self: stretch;\n      align-items: stretch;\n      justify-self: stretch;\n      border-radius: var(--io_borderRadius);\n      border: var(--io_border);\n      border-color: var(--io_borderColorOutset);\n      color: var(--io_colorField);\n      background-color: var(--io_bgColorDimmed);\n      padding: var(--io_spacing) 0;\n      align-self: flex-start;\n      user-select: none;\n      transition: opacity 0.25s;\n      overflow: auto;\n    }\n\n    :host io-collapsable {\n      flex: 0 0 auto;\n      border-color: transparent;\n      border: 0;\n      overflow: visible;\n    }\n    :host io-collapsable > div.io-collapsable-content {\n      background-color: transparent;\n      flex: 0 0 auto;\n      border-radius: 0 !important;\n      margin: 0 !important;\n      padding: 0 !important;\n      background: var(--io_bgColorDimmed);\n    }\n    \n    :host io-menu-item:first-of-type {\n      margin-top: var(--io_borderWidth);\n    }\n    :host io-menu-item {\n      background-color: var(--io_bgColorDimmed);\n      flex: 0 0 auto;\n      align-self: stretch;\n      border-radius: 0;\n      margin-left: var(--io_borderWidth);\n      margin-right: var(--io_borderWidth);\n    }\n    :host io-menu-item[depth="1"] {\n      padding-left: calc(var(--io_lineHeight) * 1);\n    }\n    :host io-menu-item[depth="2"] {\n      padding-left: calc(var(--io_lineHeight) * 2);\n    }\n    :host io-menu-item[depth="3"] {\n      padding-left: calc(var(--io_lineHeight) * 3);\n    }\n    :host io-menu-item[depth="4"] {\n      padding-left: calc(var(--io_lineHeight) * 4);\n    }\n    :host io-menu-item[depth="5"] {\n      padding-left: calc(var(--io_lineHeight) * 5);\n    }\n    :host io-menu-item[depth="6"] {\n      padding-left: calc(var(--io_lineHeight) * 6);\n    }\n    /* Item spacing */\n    :host io-menu-item {\n      margin-bottom: var(--io_borderWidth);\n    }\n    :host io-menu-item:first-of-type {\n      /* margin-top: var(--io_spacing); */\n    }\n\n    /* Item dividers */\n    :host io-collapsable > io-boolean {\n      margin: 0;\n      margin-left: var(--io_borderWidth);\n      margin-right: var(--io_borderWidth);\n      z-index: 1;\n      overflow: visible;\n    }\n\n    /* Search field */\n    :host > .search {\n      border-radius: 0;\n      flex: 0 0 auto;\n    }\n    '}static get Listeners(){return{"item-clicked":"_onItemClicked"}}_onItemClicked(e){const t=e.composedPath()[0],o=e.detail;t!==this&&(e.stopImmediatePropagation(),this.dispatchEvent("item-clicked",o,!0),this.throttle(this._onCollapse))}_onCollapse(){const e=this.searchable&&this.search;this.search="",e&&this.$.search.focus()}changed(){const e=[...this.slotted];if(this.searchable&&e.push(["io-string",{$:"search",role:"search",class:"search",value:this.bind("search"),placeholder:"Search",live:!0}]),this.search){const t=e.length;filterOptions(this.options,this.search,this.depth,e),t===e.length&&e.push(["io-menu-item",{item:new Re({label:"No matches",mode:"none"})}])}else e.push(...addMenuOptions(this.options,this.depth));this.template(e)}};__decorate$d([Property({type:Oe,reflect:!0})],ke.prototype,"options",void 0),__decorate$d([Property(!1)],ke.prototype,"searchable",void 0),__decorate$d([Property("")],ke.prototype,"search",void 0),__decorate$d([Property(Infinity)],ke.prototype,"depth",void 0),__decorate$d([Property({type:Array})],ke.prototype,"slotted",void 0),__decorate$d([Property("listbox")],ke.prototype,"role",void 0),__decorate$d([Property(void 0)],ke.prototype,"$parent",void 0),ke=__decorate$d([Register],ke);var __decorate$c=function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};const Ee=new WeakMap;let Ie=class IoMenuOptions extends b{static get Style(){return'\n    :host {\n      display: flex;\n      border-radius: var(--io_borderRadius);\n      background-color: var(--io_bgColorDimmed);\n      position: relative;\n    }\n    :host[horizontal] {\n      flex-direction: row;\n      align-self: stretch;\n      padding: 0 var(--io_spacing);\n    }\n    :host:not([horizontal]) {\n      flex-direction: column;\n      padding: var(--io_spacing) 0;\n    }\n    :host[inlayer] {\n      min-width: 8em;\n    }\n    :host[inlayer]:not([expanded]) {\n      visibility: hidden;\n      opacity: 0;\n    }\n\n    /* Menu Items */\n    :host > io-menu-item {\n      background-color: transparent;\n      border-radius: 0;\n    }\n    :host[horizontal] > io-menu-item {\n      height: calc(var(--io_fieldHeight) + var(--io_spacing2));\n      border-left: none;\n      border-right: none;\n      border-width: calc(var(--io_spacing) + var(--io_borderWidth)) var(--io_borderWidth);\n    }\n    :host:not([horizontal]) > io-menu-item {\n      border-top: none;\n      border-bottom: none;\n      border-width: var(--io_borderWidth) var(--io_spacing);\n    }\n    :host > io-menu-item[selected][direction="up"] {\n      border-color: var(--io_colorBlue) transparent transparent transparent;\n    }\n    :host > io-menu-item[selected][direction="down"] {\n      border-color: transparent transparent var(--io_colorBlue) transparent;\n    }\n    :host > io-menu-item[selected][direction="right"] {\n      border-color: transparent var(--io_colorBlue) transparent transparent;\n    }\n    :host > io-menu-item[selected][direction="left"] {\n      border-color: transparent transparent transparent var(--io_colorBlue);\n    }\n\n    /* Item divider */\n    :host > [hidden] ~ span.divider {\n      border-color: red;\n      display: none;\n    }\n    :host > span.divider {\n      flex: 0 0 0;\n      border: var(--io_border);\n      border-color: var(--io_borderColorInset);\n      margin: var(--io_spacing);\n      opacity: 0.5;\n    }\n\n    /* Remove hints from horizontal menu */\n    :host[horizontal] > io-menu-item > .hint {\n      display: none;\n    }\n\n    /* Search field */\n    :host:not([horizontal]) > .search {\n      margin: var(--io_spacing);\n      margin-top: 0;\n    }\n    :host[horizontal] > .search {\n      margin-right: var(--io_borderWidth);\n      flex: 0 0 10em;\n    }\n\n    /* Hamburger menu for overflow items */\n    :host > io-menu-hamburger {\n      border-color: transparent !important;\n      background-color: transparent !important;\n    }\n    :host[horizontal] > io-menu-hamburger {\n      position: absolute;\n      right: var(--io_spacing);\n      padding: var(--io_spacing);\n    }\n    '}static get Listeners(){return{"item-clicked":"_onItemClicked",touchstart:["_stopPropagation",{passive:!1}]}}_onItemClicked(e){const t=e.composedPath()[0],o=e.detail;"io-string"!==t.localName?t!==this&&(e.stopImmediatePropagation(),this.dispatchEvent("item-clicked",o,!0),this.throttle(this._onCollapse)):e.stopImmediatePropagation()}_stopPropagation(e){e.stopPropagation()}init(){this.throttle(this._onSetOverflow)}onResized(){this.throttle(this._onSetOverflow)}_onSetOverflow(){if(this._disposed)return;const e=this.querySelectorAll(".item");if(this._overflownItems.length=0,this.horizontal){const t=this.querySelector("io-menu-hamburger"),o=t?.getBoundingClientRect().width||0,i=this.getBoundingClientRect().right-(I.borderWidth+I.spacing);let n=Infinity,r=!1;for(let t=e.length;t--;){const s=e[t].getBoundingClientRect(),a=Ee.get(e[t].item)||{right:0,width:0};0!==s.right&&0!==s.width&&(a.right=s.right,a.width=s.width,Ee.set(e[t].item,a)),n=Math.min(n,a.right),this.noPartialCollapse&&r?(e[t].hidden=!0,this._overflownItems.unshift(e[t].item)):t===e.length-1&&n<i||n<i-1.5*o?e[t].hidden=!1:(r=!0,e[t].hidden=!0,this._overflownItems.unshift(e[t].item))}this._overflownItems.length?this.overflow=JSON.stringify(this._overflownItems.map((e=>e.label))):this.overflow=""}else this.overflow=""}_onCollapse(){const e=this.selectable&&!!this.search&&!this.inlayer;this.setProperties({search:"",expanded:!1}),e&&this.$.search.focus()}expandedChanged(){this.expanded?this.inlayer&&this.throttle(this._onExpandInOverlay):(this.style.top=null,this.style.height=null,this.style.touchAction=null,this.scrollTop=0,this.search="")}searchChanged(){this.inlayer&&this.$parent&&this.throttle(this._onClipHeight),this.throttle(this._onSetOverflow)}_onExpandInOverlay(){if(this.$parent){const e=this.$parent.getBoundingClientRect();F.setElementPosition(this,this.direction,e),this._onClipHeight()}}_onClipHeight(){if(this.scrollTop=0,!this.firstChild)return;const e=this.firstChild.getBoundingClientRect().top,t=this.lastChild.getBoundingClientRect().bottom,o=t-e;e<0?(this.style.top="0px",this.style.height=o+e+"px",this.style.touchAction="pan-y"):t>window.innerHeight?(this.style.height=window.innerHeight-e+"px",this.style.touchAction="pan-y"):(this.style.height=null,this.style.touchAction=null)}changed(){const e=[...this.slotted];if(this.searchable&&e.push(["io-string",{$:"search",role:"search",class:"search",value:this.bind("search"),placeholder:"Search",live:!0}]),this.search){const t=e.length;filterOptions(this.options,this.search,this.depth,e),t===e.length&&e.push(["io-menu-item",{item:new Re({label:"No matches",mode:"none"})}])}else{let t=this.horizontal?"down":"right";this.horizontal&&"up"===this.direction&&(t="up");for(let o=0;o<this.options.length;o++)e.push(["io-menu-item",{class:"item",item:this.options[o],direction:t,depth:this.depth}]),o<this.options.length-1&&e.push(["span",{class:"divider"}])}this.overflow&&e.push(["io-menu-hamburger",{depth:this.depth+1,role:"navigation",direction:"down",item:new Re({options:new Oe(this._overflownItems)})}]),this.template(e)}};__decorate$c([Property({type:Oe})],Ie.prototype,"options",void 0),__decorate$c([Property({value:!1,reflect:!0})],Ie.prototype,"expanded",void 0),__decorate$c([Property({value:!1,reflect:!0})],Ie.prototype,"horizontal",void 0),__decorate$c([Property(!1)],Ie.prototype,"searchable",void 0),__decorate$c([Property("")],Ie.prototype,"search",void 0),__decorate$c([Property({value:"none",reflect:!0})],Ie.prototype,"direction",void 0),__decorate$c([Property(100)],Ie.prototype,"depth",void 0),__decorate$c([Property(!1)],Ie.prototype,"noPartialCollapse",void 0),__decorate$c([Property({value:"",reflect:!0})],Ie.prototype,"overflow",void 0),__decorate$c([Property({value:!1,reflect:!0})],Ie.prototype,"inlayer",void 0),__decorate$c([Property({type:Array})],Ie.prototype,"slotted",void 0),__decorate$c([Property("listbox")],Ie.prototype,"role",void 0),__decorate$c([Property(void 0)],Ie.prototype,"$parent",void 0),__decorate$c([Property({type:Array})],Ie.prototype,"_overflownItems",void 0),Ie=__decorate$c([Register],Ie);var __decorate$b=function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};const je=["io-menu-item","io-menu-hamburger","io-option-menu"],Me=je.join(", ");let Le,Ne,Ae=class IoMenuItem extends V{static get Style(){return"\n      :host {\n        display: flex;\n        user-select: none;\n      }\n      :host > * {\n        pointer-events: none;\n        text-overflow: ellipsis;\n      }\n      :host > .label {\n        flex: 1 1 auto;\n        padding: 0 var(--io_spacing2);\n      }\n      :host > .hint {\n        flex: 0 1 auto;\n        opacity: 0.25;\n        padding: 0 var(--io_spacing2);\n      }\n      :host > .hasmore {\n        opacity: 0.5;\n      }\n    "}static get Listeners(){return{click:"preventDefault"}}preventDefault(e){e.stopPropagation(),e.preventDefault()}get hasmore(){return this.item.hasmore&&this.depth>0}get inlayer(){return!!this.$parent&&!!this.$parent.inlayer}get $parent(){return this.parentElement}connectedCallback(){super.connectedCallback(),F.addEventListener("pointermove",this._onOverlayPointermove),F.addEventListener("pointerup",this._onOverlayPointerup),this.$options&&F.appendChild(this.$options)}disconnectedCallback(){super.disconnectedCallback(),F.removeEventListener("pointermove",this._onOverlayPointermove),F.removeEventListener("pointerup",this._onOverlayPointerup),this.$options&&this.$options.inlayer&&F.removeChild(this.$options)}_onOverlayPointermove(e){!this.inlayer&&this.expanded&&this._onPointermove(e)}_onOverlayPointerup(e){!this.inlayer&&this.expanded&&this._onPointerupAction(e)}_onClick(){const e=this.item;this.hasmore?this.expanded||(this.expanded=!0):"toggle"===e.mode?e.selected=!e.selected:(e.action&&e.action.apply(null,[e.value]),"select"===e.mode?e.hasmore&&e.options&&this.depth<=0?e.options.selectDefault():e.selected=!0:"scroll"===e.mode?e.selected=!0:"link"===e.mode&&window.open(e.value,"_blank"),this.dispatchEvent("item-clicked",e,!0),this.throttle(this._onCollapse))}_onItemClicked(e){e.composedPath()[0]!==this&&(e.stopImmediatePropagation(),this.dispatchEvent("item-clicked",e.detail,!0)),this.expanded&&this.throttle(this._onCollapse)}_onPointerdown(e){e.stopPropagation(),e.preventDefault(),this.setPointerCapture(e.pointerId),this.addEventListener("pointermove",this._onPointermove),this.addEventListener("pointerup",this._onPointerup),this._onPointerdownAction(e)}_onPointerdownAction(e){(this.expanded||"mouse"===e.pointerType||this.inlayer)&&(this.focus(),this.item.options&&(this.expanded=!0)),this._x=e.clientX,this._y=e.clientY}_onPointermove(e){e.stopPropagation(),this._onPointermoveAction(e)}_onPointermoveAction(e){if(!this.expanded&&"touch"===e.pointerType&&!this.inlayer)return;const t=!!this.$parent&&!!this.$parent.style.height;if("touch"===e.pointerType&&t)return;const o=e.clientX-this._x,i=e.clientY-this._y;if(this._x=e.clientX,this._y=e.clientY,F.x=e.clientX,F.y=e.clientY,clearTimeout(this._timeoutOpen),Le=this._gethovered(e),Le){const e=Math.abs(i)-Math.abs(o),t=Le.parentElement.horizontal;Ne?.parentElement!==Le.parentElement||(t?e<-.25:e>.25)?this._expandHovered():this._timeoutOpen=setTimeout((()=>{this._expandHovered()}),100),Ne=Le}}_onPointerup(e){e.stopPropagation(),this.removeEventListener("pointermove",this._onPointermove),this.removeEventListener("pointerup",this._onPointerup),this._onPointerupAction(e)}_onPointerupAction(e,t=!1){const o=this._gethovered(e);o?(o.focus(),o._onClick(e)):t||this.throttle(this._onCollapseRoot),Le=void 0,Ne=void 0}_gethovered(e){const t=getMenuDescendants(getMenuRoot(this)),o=[];for(let i=t.length;i--;)isPointerAboveIoMenuItem(e,t[i])&&o.push(t[i]);if(o.length)return o.sort(((e,t)=>e.depth<t.depth?1:e.depth>t.depth?-1:0)),o[o.length-1]}_expandHovered(){if(Le){if(Le.focus(),Le.hasmore){if(Le.$options){const e=getMenuDescendants(Le.$options);for(let t=e.length;t--;)e[t].expanded=!1}Le.expanded=!0}if(Le.$parent){const e=Le.$parent.querySelectorAll(Me);for(let t=e.length;t--;)e[t]!==Le&&(e[t].expanded=!1)}}}_onKeydown(e){if("Enter"===e.key||" "===e.key)return e.preventDefault(),void this._onClick();if("Escape"===e.key)return e.preventDefault(),void this.throttle(this._onCollapseRoot);let t="";"left"===this.direction||"right"===this.direction?("ArrowUp"===e.key&&(t="prev"),"ArrowRight"===e.key&&(t="in"),"ArrowDown"===e.key&&(t="next"),"ArrowLeft"===e.key&&(t="out")):("ArrowUp"===e.key&&(t="out"),"ArrowRight"===e.key&&(t="next"),"ArrowDown"===e.key&&(t="in"),"ArrowLeft"===e.key&&(t="prev")),this.inlayer&&"Tab"===e.key&&(t="next");const o=this.$parent?[...this.$parent.children]:[],i=o.indexOf(this);if(t)switch(e.preventDefault(),t){case"prev":{const e=o[(i+o.length-1)%o.length];this.expanded=!1,e&&(e.hasmore&&(e.expanded=!0),e.focus());break}case"next":{const e=o[(i+1)%o.length];this.expanded=!1,e&&(e.hasmore&&(e.expanded=!0),e.focus());break}case"in":this.$options&&this.$options.children.length&&this.$options.children[0].focus();break;case"out":this.expanded=!1,this.$parent&&this.$parent.$parent&&this.$parent.$parent.focus()}else super._onKeydown(e)}_onCollapse(){this.expanded=!1}_onCollapseRoot(){getMenuRoot(this).expanded=!1}expandedChanged(){if(this.expanded&&this.depth>0){this.item.options&&void 0===this.$options&&(this.$options=new Ie({expanded:this.bind("expanded"),inlayer:!0,depth:this.depth-1,options:this.item.options,direction:this.direction,$parent:this}));const e=getMenuDescendants(getMenuRoot(this)),t=getMenuAncestors(this),o=getMenuDescendants(this);for(let i=e.length;i--;)e[i]!==this&&-1===t.indexOf(e[i])&&-1===o.indexOf(e[i])&&(e[i].expanded=!1)}if(this.$options){this.expanded?(this.$options.parentElement!==F&&F.appendChild(this.$options),this.$options.addEventListener("item-clicked",this._onItemClicked)):this.$options.removeEventListener("item-clicked",this._onItemClicked);const e=getMenuDescendants(this.$options);for(let t=e.length;t--;)e[t].expanded=!1}}itemChanged(){this.setProperties({selected:this.item.bind("selected"),disabled:this.item.bind("disabled")})}changed(){void 0!==this.$options&&this.item.options&&(this.$options.options=this.item.options);const e=this.icon||this.item.icon;this.setAttribute("hidden",this.item.hidden),this.setAttribute("hasmore",this.hasmore),this.template([this.hasmore&&"left"===this.direction?["io-icon",{class:"hasmore",icon:"menu:triangle_left"}]:null,this.hasmore&&"up"===this.direction?["io-icon",{class:"hasmore",icon:"menu:triangle_up"}]:null,e?["io-icon",{icon:e}]:null,this.item.label?["span",{class:"label"},this.item.label]:null,this.item.hint?["span",{class:"hint"},this.item.hint]:null,this.hasmore&&"right"===this.direction?["io-icon",{class:"hasmore",icon:"menu:triangle_right"}]:null,this.hasmore&&"down"===this.direction?["io-icon",{class:"hasmore",icon:"menu:triangle_down"}]:null])}};function getMenuDescendants(e){const t=[];if(e.$options){if(e.expanded){t.push(e.$options);const o=e.$options.querySelectorAll(Me);for(let e=o.length;e--;)t.push(o[e]),o[e].expanded&&t.push(...getMenuDescendants(o[e]))}}else{const o=e.querySelectorAll(Me);for(let e=o.length;e--;)t.push(o[e]),o[e].expanded&&t.push(...getMenuDescendants(o[e]))}return t}function getMenuAncestors(e){const t=[];let o=e;for(;o&&o.$parent;)o=o.$parent,o&&t.push(o);return t}function getMenuRoot(e){let t=e;for(;t&&t.$parent;)t=t.$parent;return t}function isPointerAboveIoMenuItem(e,t){if(-1!==je.indexOf(t.localName)&&!t.disabled&&!t.hidden&&(!t.inlayer||t.parentElement.expanded&&F.expanded)){const o=1,i=t.getBoundingClientRect(),n=e.clientX,r=e.clientY;return i.top<=r+o&&i.bottom>=r-o&&i.left<=n+o&&i.right>=n-o}return null}__decorate$b([Property({type:Re})],Ae.prototype,"item",void 0),__decorate$b([Property({value:!1,reflect:!0})],Ae.prototype,"expanded",void 0),__decorate$b([Property({value:"right",reflect:!0})],Ae.prototype,"direction",void 0),__decorate$b([Property({value:1e3,reflect:!0})],Ae.prototype,"depth",void 0),Ae=__decorate$b([Register],Ae);var __decorate$a=function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};let De=class IoMenuHamburger extends Ae{static get Style(){return"\n      :host {\n        display: flex;\n        user-select: none;\n      }\n      :host > * {\n        pointer-events: none;\n        text-overflow: ellipsis;\n      }\n    "}changed(){void 0!==this.$options&&this.item.options&&(this.$options.options=this.item.options),this.setAttribute("selected",this.item.selected),this.setAttribute("hidden",this.item.hidden),this.disabled=this.item.disabled,this.template([["io-icon",{icon:"menu:hamburger"}]])}};De=__decorate$a([Register],De);var __decorate$9=function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};const He=new Oe;let Te=class IoOptionMenu extends b{static get Style(){return"\n    :host {\n      display: inline-block;\n      text-align: center;\n      border-radius: var(--io_borderRadius);\n      border: var(--io_border);\n      border-color: var(--io_borderColorOutset);\n      background-color: var(--io_bgColorDimmed);\n      background-image: var(--io_gradientOutset);\n      /* padding-left: calc(2 * var(--io_spacing)); */\n      /* padding-right: calc(2 * var(--io_spacing)); */\n      text-align: left;\n    }\n    :host > io-menu-item {\n      margin: calc(-1 * var(--io_borderWidth));\n      background-color: transparent !important;\n      border-color: transparent !important;\n    }\n    :host > io-menu-item[selected] {\n      color: var(--io_colorStrong);\n    }\n    "}_item;_onLeafChanged(e){this.inputValue(e.detail.value)}optionsChanged(e){e.oldValue&&e.oldValue!==He&&e.oldValue.removeEventListener("last-changed",this._onLeafChanged),e.value&&e.value.addEventListener("last-changed",this._onLeafChanged);const t=this.options.getItem(this.value);t&&(t.selected=!0)}changed(){const e=this.options.getItem(this.value);this._item=this._item||new Re({}),this._item.label=e?.label||String(this.value),this._item.options=this.options,this._item.icon=this.icon||"",this.template([["io-menu-item",{item:this._item,direction:"down"}]])}};__decorate$9([Property({value:void 0,reflect:!0})],Te.prototype,"value",void 0),__decorate$9([Property({value:He,type:Oe,reflect:!0})],Te.prototype,"options",void 0),__decorate$9([Property("button")],Te.prototype,"role",void 0),Te=__decorate$9([Register],Te);var __decorate$8=function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};let ze=class IoContextMenu extends b{static get Properties(){return{$options:null}}connectedCallback(){super.connectedCallback(),F.addEventListener("pointermove",this._onOverlayPointermove),this._parent=this.parentElement,this._parent.addEventListener("pointerdown",this._onPointerdown),this._parent.addEventListener("click",this._onClick),this._parent.addEventListener("contextmenu",this._onContextmenu)}disconnectedCallback(){super.disconnectedCallback(),this.$options&&this.$options.parentElement&&F.removeChild(this.$options),F.removeEventListener("pointermove",this._onOverlayPointermove),this._parent.removeEventListener("pointerdown",this._onPointerdown),this._parent.removeEventListener("contextmenu",this._onContextmenu),this._parent.removeEventListener("pointermove",this._onPointermove),this._parent.removeEventListener("pointerup",this._onPointerup),this._parent.removeEventListener("click",this._onClick),delete this._parent}getBoundingClientRect(){return this._parent.getBoundingClientRect()}_onItemClicked(e){const t=e.composedPath()[0],o=e.detail;t!==this&&(e.stopImmediatePropagation(),this.dispatchEvent("item-clicked",o,!0),this.throttle(this._onCollapse))}_onContextmenu(e){2===this.button&&e.preventDefault()}_onPointerdown(e){F.x=e.clientX,F.y=e.clientY,this._parent.addEventListener("pointermove",this._onPointermove),this._parent.addEventListener("pointerup",this._onPointerup),clearTimeout(this._contextTimeout),"touch"!==e.pointerType?e.button===this.button&&(this.setPointerCapture(e.pointerId),this.expanded=!0):(e.preventDefault(),this._contextTimeout=setTimeout((()=>{this.setPointerCapture(e.pointerId),this.expanded=!0}),150))}_onPointermove(e){clearTimeout(this._contextTimeout),this.expanded&&this.$options?.querySelector("io-menu-item")?._onPointermoveAction(e)}_onPointerup(e){clearTimeout(this._contextTimeout),this.releasePointerCapture(e.pointerId),this.expanded&&this.$options?.querySelector("io-menu-item")?._onPointerupAction(e,!0),this._parent.removeEventListener("pointermove",this._onPointermove),this._parent.removeEventListener("pointerup",this._onPointerup)}_onOverlayPointermove(e){this.expanded&&this._onPointermove(e)}_onClick(e){e.button===this.button&&2!==e.button&&(this.expanded=!0)}_onCollapse(){this.expanded=!1}optionsChanged(){this.$options&&(F.removeChild(this.$options),this.$options.template([]),this.$options.dispose()),this.$options=new Ie({expanded:this.bind("expanded"),inlayer:!0,options:this.options,direction:"pointer",$parent:this,"@item-clicked":this._onItemClicked}),F.appendChild(this.$options)}};__decorate$8([Property({type:Oe})],ze.prototype,"options",void 0),__decorate$8([Property({value:!1,reflect:!0})],ze.prototype,"expanded",void 0),__decorate$8([Property(0)],ze.prototype,"button",void 0),ze=__decorate$8([Register],ze);oe.registerIcons("menu",'\n<svg>\n  <g id="hamburger">\n    <path d="M20.9,9.1H3.2c-0.6,0-1.1,0.3-1.1,0.7V14c0,0.4,0.5,0.8,1.1,0.8h17.9c0.6,0,1.1-0.3,1.1-0.7V9.9C22,9.4,21.5,9.1,20.9,9.1z\n      M20.9,2.1H3.2c-0.6,0-1.1,0.3-1.1,0.7V7c0,0.4,0.5,0.7,1.1,0.7h17.9c0.6,0,1.1-0.3,1.1-0.7V2.8C22,2.4,21.5,2.1,20.9,2.1z\n      M20.9,16.5H3.2c-0.6,0-1.1,0.3-1.1,0.7v4.2c0,0.4,0.5,0.7,1.1,0.7h17.9c0.6,0,1.1-0.3,1.1-0.7v-4.2C22,16.8,21.5,16.5,20.9,16.5z"\n      />\n  </g>\n  <g id="triangle_right">\n    <polygon points="9.1,16.5 14.9,12 9.1,7.5   "/>\n  </g>\n  <g id="triangle_down">\n    <polygon points="7.6,9 11.9,15 16.5,9   "/>\n  </g>\n  <g id="triangle_left">\n    <polygon points="14.9,7.5 9.1,12 14.9,16.5   "/>\n  </g>\n  <g id="triangle_up">\n    <polygon points="16.5,15 11.9,9 7.6,15   "/>\n  </g>\n</svg>');var __decorate$7=function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};let Be=class IoNotify extends b{static get Style(){return"\n    :host {\n      display: flex;\n      position: fixed;\n      top: 0;\n      left: 0;\n      box-sizing: border-box;\n      background-color: var(--io_bgColorDimmed);\n      border: var(--io_border);\n      border-color: var(--io_colorRed);\n      width: 100%;\n      opacity: 1;\n      font-weight: bold;\n      align-items: center;\n      justify-content: center;\n      padding: 0 var(--io_spacing);\n    }\n    :host > span {\n      cursor: default;\n      box-sizing: border-box;\n      line-height: var(--io_lineHeight);\n      font-size: var(--io_fontSize);\n      color: var(--io_color);\n      padding: 0 var(--io_spacing);\n    }\n    :host > :nth-child(n+2) {\n      flex-shrink: 0;\n      align-self: center;\n      white-space: nowrap;\n    }\n    @keyframes io-notification-fade {\n      to {\n        opacity: 0;\n      }\n    }\n    :host:not([expanded]) {\n      animation: io-notification-fade .6s linear forwards;\n      pointer-events: none;\n    }\n    "}static get Properties(){return{expanded:{value:!0,reflect:!0}}}static get Listeners(){return{}}constructor(e){super(e),this.template([["span","This app uses cookies for user interface customization."],["span","Agree"],["io-boolean",{"@value-input":this._onAgree}],["span","Disagree"],["io-boolean",{"@value-input":this._onDisgree}]])}_onAgree(e){e.detail.value?C.permitted=!0:C.permitted=!1,this.expanded=!1}_onDisgree(){C.permitted=!1,this.expanded=!1}};Be=__decorate$7([Register],Be),null===C.permitted&&document.body.appendChild(new Be);class ObjectConfig{constructor(e){for(let t=0;t<e.length;t++)this.registerObjectConfig(e[t].ObjectConfig||{})}registerObjectConfig(e){for(const t in e){const o=this;o[t]=o[t]||[],o[t]=[e[t][0]||o[t][0],Object.assign(o[t][1]||{},e[t][1]||{})]}}getObjectConfig(e,t){const o=Object.keys(e),i=[];let n=e.__proto__;for(;n;)i.push(n.constructor.name),o.push(...Object.keys(n)),n=n.__proto__;const r={};for(const e in this){const t=e.split("|");1===t.length&&t.splice(0,0,"Object"),-1!==i.indexOf(t[0])&&(r[t[1]]=this[e])}for(const e in t){const o=e.split("|");1===o.length&&o.splice(0,0,"Object"),-1!==i.indexOf(o[0])&&(r[o[1]]=t[e])}const s={};for(let t=0;t<o.length;t++){const i=o[t],n=e[i]instanceof Binding?e[i].value:e[i],a=null===n?"null":typeof n,l=null!=n&&n.constructor?n.constructor.name:"null";if("function"===a)continue;const h="type:"+a,c="constructor:"+l,d=i.replace("type:","").replace("constructor:","");s[i]=null,r[h]&&(s[i]=r[h]),r[c]&&(s[i]=r[c]),r[d]&&(s[i]=r[d])}return s}}class ObjectGroups{constructor(e){for(let t=0;t<e.length;t++)this.registerObjectGroups(e[t].ObjectGroups||{})}registerObjectGroups(e){for(const t in e){const o=this;o[t]=o[t]||[],o[t]=[...o[t],...e[t]]}}getObjectGroups(e,t,o){const i=[];let n=e.__proto__;for(;n;)i.push(n.constructor.name),n=n.__proto__;const r={},s=this;for(const t in s){const n=t.split("|");if(1===n.length&&n.splice(0,0,"Object"),n[1]=n[1].split(":"),-1!==i.indexOf(n[0])){if(!("properties"===n[1][1])){r[n[1][0]]=r[n[1][0]]||[];for(let i=0;i<s[t].length;i++){const a=s[t][i];if("string"==typeof a&&a.startsWith("constructor:")){const t=a.replace("constructor:","");for(let i=0;i<o.length;i++)e[o[i]]&&e[o[i]].name===t&&r[n[1][0]].push(o[i])}else if("string"==typeof a&&a.startsWith("type:")){const t=a.replace("type:","");for(let i=0;i<o.length;i++)e[o[i]]&&typeof e[o[i]]===t&&r[n[1][0]].push(o[i])}else r[n[1][0]].push(a)}}}}for(const e in t){const o=e.split("|");if(1===o.length&&o.splice(0,0,"Object"),o[1]=o[1].split(":"),-1!==i.indexOf(o[0])){"properties"===o[1][1]||(r[o[1][0]]=r[o[1][0]]||[],r[o[1][0]].push(...t[e]))}}const a={},l=[];for(const e in r){a[e]=a[e]||[];for(const t in r[e]){const i=r[e][t],n=new RegExp(i);for(let t=0;t<o.length;t++){const r=o[t];"string"==typeof i?r===i&&-1===l.indexOf(r)&&(a[e].push(r),l.push(r)):"object"==typeof i&&n.exec(r)&&-1===l.indexOf(r)&&(a[e].push(r),l.push(r))}}}if(0===l.length)a.properties=o;else{a.properties=a.properties||[];for(let e=0;e<o.length;e++)-1===l.indexOf(o[e])&&a.properties.push(o[e])}for(const e in a)0===a[e].length&&delete a[e];return delete a.hidden,a}}class ObjectWidgets{constructor(e){for(let t=0;t<e.length;t++)this.registerObjectWidgets(e[t].ObjectWidgets||{})}registerObjectWidgets(e){for(const t in e){const o=this;o[t]=o[t]||[],o[t]=[...o[t],...e[t]]}}getObjectWidgets(e){const t=[];let o=e.__proto__;for(;o;)t.push(o.constructor.name),o=o.__proto__;let i=null;const n={};for(const o in this){const r=o.split("|"),s=r[0],a=r[1];if(-1!==t.indexOf(s)){const t=this[o];t[1]=t[1]||{},t[1].$value?t[1].value=e[t[1].$value]:t[1].value=e,a?n[a]=t:i=t}}return{main:i,groups:n}}}var __decorate$6=function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};let Fe=class IoBreadcrumbs extends b{static get Style(){return"\n    :host {\n      display: flex;\n      flex: 0 0 auto;\n      flex-direction: row;\n      align-self: stretch;\n      justify-self: stretch;\n      border-radius: var(--io_borderRadius);\n      border: var(--io_border);\n      border-color: var(--io_borderColorInset);\n      padding: var(--io_spacing);\n      background-color: var(--io_bgColorField);\n      overflow-x: hidden;\n    }\n    :host > io-field {\n      padding-left: var(--io_spacing);\n      padding-right: var(--io_spacing);\n      color: var(--io_colorBlue);\n    }\n    :host > io-field:hover {\n      text-decoration: underline;\n    }\n    :host > io-field:first-of-type {\n      overflow: visible;\n      text-overflow: clip;\n      margin-left: var(--io_spacing);\n    }\n    :host > io-field:last-of-type {\n      overflow: visible;\n      text-overflow: clip;\n      margin-right: var(--io_spacing);\n    }\n    :host > io-field:not(:first-of-type):before {\n      content: '>';\n      margin: 0 var(--io_spacing);\n      padding: 0 var(--io_spacing) 0 0;\n      opacity: 0.25;\n    }\n    "}static get Properties(){return{value:Object,selected:null,options:{type:Array}}}_onClick(e){this.setProperty("selected",this.options[e.detail.value])}valueChanged(){this.options.length=0,this.options.push(this.value)}selectedChanged(){const e=this.options.indexOf(this.selected);-1!==e?this.options.length=e+1:this.options.push(this.selected)}changed(){const e=[];for(let t=0;t<this.options.length;t++)e.push(["io-field",{class:"select",value:this.options[t],label:getLabel(this.options[t]),"@item-clicked":this._onClick}]);this.template(e)}};function getLabel(e){return String(e instanceof Array?`${e.constructor.name} (${e.length})`:"object"==typeof e?`${e.constructor.name}`:e)}Fe=__decorate$6([Register],Fe);var __decorate$5=function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};class ProtoObjectConfig extends Map{constructor(e){super();for(let t=0;t<e.length;t++){const o=e[t].Config;if(o)for(let e=0;e<o.length;e++){const t=o[e],i=t[0],n=t[1];let r;this.has(i)?r=this.get(i):(r=new Map,this.set(i,r));for(let e=0;e<n.length;e++){const t=n[e][0],o=[...n[e][1]];r.set(t,o)}}}}getObjectConfig(e){if(!(e instanceof Object))return;const t=new Map;for(const[o,i]of this)if(e instanceof o)for(const[e,o]of i)t.set(e,o);const o={};for(const[i,n]of Object.entries(e)){const e=n instanceof Binding?n.value:n;for(const[n,r]of t){let t;("function"==typeof n&&e instanceof n||"function"==typeof n&&e.constructor===n||"string"==typeof n&&i===n||null===n&&null===e||void 0===n&&void 0===e)&&(t=r),t&&(o[i]=t)}}return o}}let $e=class IoProperties extends b{static get Style(){return"\n    :host {\n      display: flex;\n      flex-direction: column;\n      color: var(--io_colorField);\n      background-color: var(--io_bgColor);\n    }\n    :host > .io-row {\n      display: flex;\n      flex-direction: row;\n    }\n    :host > .io-row > io-label {\n      margin-top: calc(var(--io_spacing) + var(--io_borderWidth));\n    }\n    :host > .io-row > io-label:after {\n      display: inline-block;\n      content: ':';\n    }\n    :host io-object > io-properties {\n      padding-left: var(--io_lineHeight);\n    }\n    "}static get Config(){return[[Object,[[null,["io-string",{appearance:"neutral"}]],[void 0,["io-string",{appearance:"neutral"}]],[String,["io-string",{appearance:"neutral"}]],[Number,["io-number",{appearance:"neutral",step:1e-4}]],[Boolean,["io-boolean"]],[Object,["io-object"]]]],[Array,[[Number,["io-number",{appearance:"neutral",step:1e-4}]]]]]}_onValueInput(e){if(e.detail.object)return;const t=e.composedPath()[0];if(t===this)return;e.stopImmediatePropagation(),this.dispatchEvent("property-set",e.detail,!1);const o=t.id;if(null!==o){const t=e.detail.value,i=e.detail.oldValue;this.value[o]=t;const n={object:this.value,property:o,value:t,oldValue:i};this.dispatchEvent("object-mutated",n,!1,window)}}valueMutated(){this._changedThrottled()}changed(){this._changedThrottled()}_changedThrottled(){this.throttle(this._onChange,void 0)}_onChange(){const e=this.__proto__._protoConfig.getObjectConfig(this.value);Object.assign(e,this.config);const t=[],o=this.properties.length?this.properties:Object.keys(this.value);this.widget.length?t.push(this.widget):t.push(["widget-dummy"]);for(let i=0;i<o.length;i++){const n=o[i],r=this.value[n],s=e[n][0],a=e[n][1]||{},l=a.label||n,h={title:l,id:n,config:e,value:r,"@value-input":this._onValueInput};Object.assign(h,a),"io-object"===s?(h.label=l+": "+r.constructor.name,t.push([s,h])):t.push(["div",{class:"io-row"},[this.labeled?["io-label",{label:l}]:null,[s,h]]])}this.template(t)}Register(e){super.Register(e),Object.defineProperty(e.prototype,"_protoConfig",{writable:!0,value:new ProtoObjectConfig(e.prototype._protochain.constructors)})}};__decorate$5([Property({type:Object})],$e.prototype,"value",void 0),__decorate$5([Property({type:Array})],$e.prototype,"properties",void 0),__decorate$5([Property({type:Object})],$e.prototype,"config",void 0),__decorate$5([Property({type:Array})],$e.prototype,"widget",void 0),__decorate$5([Property(!0)],$e.prototype,"labeled",void 0),$e=__decorate$5([Register],$e);var __decorate$4=function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};let Ve=class IoInspector extends b{static get Style(){return"\n    :host {\n      display: flex;\n      flex: 1 1 auto;\n      flex-direction: column;\n      flex-wrap: nowrap;\n      align-self: stretch;\n      align-items: stretch;\n      justify-self: stretch;\n      flex: 0 1 calc(var(--io_lineHeight) * 17.5);\n    }\n    :host > * {\n      flex-shrink: 0;\n    }\n    :host > .inspector-header {\n      display: flex;\n      flex-direction: row;\n      margin-bottom: var(--io_spacing);\n      flex-grow: 0;\n    }\n    :host > .inspector-header > io-breadcrumbs {\n      flex: 1 1;\n    }\n    :host > .inspector-header > io-boolean {\n      width: calc(var(--io_spacing) + var(--io_lineHeight));\n      align-self: stretch;\n      height: auto;\n    }\n    :host > .inspector-header > io-boolean:not([value]) {\n      opacity: 0.25;\n    }\n    :host > .inspector-header > io-string {\n      margin: 0 var(--io_spacing);\n      padding: calc(2 * var(--io_spacing));\n      align-self: stretch;\n      height: auto;\n    }\n    :host > .inspector-header > io-string:focus {\n      width: 6em;\n    }\n    :host > .inspector-header > io-string:empty:before {\n      content: ' ';\n      white-space: pre;\n      visibility: visible;\n      opacity: 0.33;\n    }\n    :host > io-collapsable > io-boolean,\n    :host > io-object > io-boolean {\n      text-transform: capitalize;\n    }\n    :host > io-object {\n      flex-basis: auto !important;\n    }\n    :host > io-object > io-properties {\n      border-radius: var(--io_borderRadius);\n      background-color: var(--io_bgColor) !important;\n      border: var(--io_border);\n      border-color: var(--io_borderColorInset);\n      padding: var(--io_spacing);\n      overflow: hidden;\n    }\n    :host > io-object > io-properties:not([horizontal])[labeled] {\n      grid-template-columns: minmax(6em, min-content) minmax(12em, 1fr);\n    }\n    :host > io-object > io-properties:not([horizontal])[labeled] > span.io-field {\n      text-align: right;\n    }\n    :host io-properties io-field.select {\n      color: var(--io_colorBlue) !important;\n    }\n    :host io-properties io-field.select:hover {\n      text-decoration: underline;\n    }\n    "}static get Listeners(){return{"io-field-clicked":"_onItemClicked"}}_onItemClicked(e){e.stopPropagation();const t=e.detail.value,o=e.composedPath()[0];t&&"object"==typeof t&&o.classList.contains("select")&&this.setProperty("selected",t)}valueChanged(){this.selected=this.value}advancedChanged(){delete this._currentCfgLen}selectedMutated(){clearTimeout(this._cfgTimeout),this._cfgTimeout=setTimeout((()=>{this._onChange()}),100)}changed(){this._onChangedThrottled()}_onChangedThrottled(){this.throttle(this._onChange)}_onChange(){const e=this.__proto__._protoConfig.getObjectConfig(this.selected);Object.assign(e,this.config),this._groups=this.__proto__._groups.getObjectGroups(this.selected,this.groups,Object.getOwnPropertyNames(e)),this._widgets=this.__proto__._widgets.getObjectWidgets(this.selected,this.widgets);const t=this.uuid||function genUUID(e){let t="io-object-collapse-state-"+e.constructor.name;t+="-"+(e.guid||e.uuid||e.id||"");const o=JSON.stringify(Object.keys(e));let i=0;for(let e=0;e<o.length;e++)i=(i<<5)-i+o.charCodeAt(e),i|=0;return i=(-i).toString(16),t+="-"+i,t}(this.selected),o=[["div",{class:"inspector-header"},[["io-breadcrumbs",{value:this.value,selected:this.bind("selected")}]]],this._widgets.main?this._widgets.main:null];for(const e in this._widgets.groups)this._groups[e]||o.push(["io-collapsable",{label:e,expanded:C({value:!0,storage:"local",key:t+"-"+e}),elements:[this._widgets.groups[e]]}]);for(const t in this._groups)o.push(["io-object",{label:t,expanded:C({value:!0,storage:"local",key:this.uuid+"-"+t}),value:this.selected,properties:this._groups[t],config:e,widget:this._widgets.groups[t]||[]}]);this.template(o)}static get Config(){return[[Object,[[null,["io-field",{appearance:"neutral",class:"select"}]],[void 0,["io-string",{appearance:"neutral"}]],[String,["io-string",{appearance:"neutral"}]],[Number,["io-number",{appearance:"neutral",step:1e-4}]],[Boolean,["io-boolean"]],[Object,["io-field",{appearance:"neutral",class:"select"}]]]]]}static get ObjectGroups(){return{"Object|hidden":[/^_/],"Array|main":[/^[0-9]+$/],"HTMLElement|main":["localName","tagName","nodeName",/class/i,/attribute/i],"HTMLElement|hidden":[/^on/,/^[A-Z0-9_]*$/,"childElementCount"],"HTMLElement|content":[/content/i,/inner/i,/outer/i],"HTMLElement|display":[/width/i,/height/i,/top/i,/left/i,/scroll/i,/style/i],"HTMLElement|hierarchy":[/parent/i,/child/i,/element/i,/root/i,/slot/i,/sibling/i,/document/i]}}static get ObjectWidgets(){return{}}Register(e){super.Register(e),Object.defineProperty(e.prototype,"_protoConfig",{writable:!0,value:new ProtoObjectConfig(e.prototype._protochain.constructors)}),Object.defineProperty(e.prototype,"_groups",{writable:!0,value:new ObjectGroups(e.prototype._protochain.constructors)}),Object.defineProperty(e.prototype,"_widgets",{writable:!0,value:new ObjectWidgets(e.prototype._protochain.constructors)})}};__decorate$4([Property({})],Ve.prototype,"value",void 0),__decorate$4([Property({})],Ve.prototype,"selected",void 0),__decorate$4([Property({type:Object})],Ve.prototype,"config",void 0),__decorate$4([Property("")],Ve.prototype,"uuid",void 0),__decorate$4([Property("")],Ve.prototype,"search",void 0),__decorate$4([Property({type:Object})],Ve.prototype,"groups",void 0),__decorate$4([Property({type:Object})],Ve.prototype,"widgets",void 0),Ve=__decorate$4([Register],Ve);var __decorate$3=function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};let We=class IoObject extends b{static get Style(){return'\n    :host {\n      /* Panel */\n      display: flex;\n      flex-direction: column; */\n      padding-left: var(--io_spacing);\n      padding-right: var(--io_spacing);\n      color: var(--io_colorField);\n      background-color: var(--io_bgColor);\n    }\n    :host > io-boolean {\n      padding-left: 0;\n      padding-right: 0;\n      align-self: stretch;\n    }\n    :host > io-boolean:before {\n      display: inline-block;\n      width: 0.75em;\n      content: ""\n    }\n    :host > io-boolean[value]:before {\n      content: "";\n    }\n    '}changed(){const e=this.label||this.value.constructor.name,t=[];t.push(["io-boolean",{appearance:"neutral",true:e,false:e,value:this.bind("expanded")}]),this.expanded&&t.push(["io-properties",{value:this.value,properties:this.properties,config:this.config,labeled:this.labeled,widget:this.widget}]),this.template(t),this.setAttribute("aria-expanded",String(this.expanded))}};__decorate$3([Property({})],We.prototype,"value",void 0),__decorate$3([Property({type:Array})],We.prototype,"properties",void 0),__decorate$3([Property({type:Object})],We.prototype,"config",void 0),__decorate$3([Property({type:Array})],We.prototype,"widget",void 0),__decorate$3([Property(!0)],We.prototype,"labeled",void 0),__decorate$3([Property("")],We.prototype,"label",void 0),__decorate$3([Property({value:!1,reflect:!0})],We.prototype,"expanded",void 0),__decorate$3([Property("region")],We.prototype,"role",void 0),We=__decorate$3([Register],We);var __decorate$2=function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};let Ue=class IoSliderRange extends IoSliderBase{_index=0;_getCoordFromValue(e){const t=[0,0],o=this._min,i=this._max;return t[0]=(e[0]-o[0])/(i[0]-o[0]),t[1]=(e[1]-o[1])/(i[1]-o[1]),t}_onPointerdown(e){super._onPointerdown(e);const t=this._value,o=this._getPointerCoord(e),i=this._getCoordFromValue(t);this._index=Math.abs(i[0]-o[0])<Math.abs(i[1]-o[0])?0:1}_onPointermoveThrottled(e){if(1===this._active){document.activeElement!==this&&this.focus();const t=this._value,o=this._getPointerCoord(e),i=this._getValueFromCoord(o);0===this._index?this._inputValue([i[0],t[1]]):1===this._index&&this._inputValue([t[0],i[0]])}}static get Frag(){return"\n    varying vec2 vUv;\n\n    void main(void) {\n      // Dimensions\n      vec2 size = uVertical == 1 ? uSize.yx : uSize;\n      vec2 uv = uVertical == 1 ? vUv.yx : vUv;\n      vec2 position = size * vec2(uv.x, uv.y - 0.5);\n      vec2 expPosition = size * vec2(pow(uv.x, uExponent), uv.y - 0.5);\n\n      vec2 valueInRange = (uValue - vec2(uMin)) / (vec2(uMax) - vec2(uMin));\n\n      vec2 valueSign = sign(valueInRange);\n      vec2 expValueInRange = pow(abs(valueInRange), vec2(1./uExponent)) * valueSign;\n      float valueInRangeWidth = valueInRange[1] - valueInRange[0];\n      float valueInRangeCenter = (valueInRange[1] + valueInRange[0]) / 2.0;\n      float signRange = sign(valueInRangeWidth);\n\n      // Colors\n      vec3 finalCol = io_bgColorField.rgb;\n      vec3 gridCol = io_bgColorDimmed.rgb;\n      vec3 sliderCol = signRange > 0.0 ? io_bgColorBlue.rgb : io_bgColorRed.rgb;\n      vec3 lineCol1 = io_color.rgb;\n      vec3 lineCol2 = io_bgColor.rgb;\n\n      // Grid\n      float gridSize = size.x / abs((uMax - uMin) / uStep);\n      float gridOffset = mod(uStep - uMin, uStep) / (uMax - uMin) * size.x;\n      float gridShape = paintDerivativeGrid2D(translate(expPosition, gridOffset, 0.0), vec2(gridSize, 0.0), io_borderWidth);\n      finalCol = compose(finalCol, vec4(gridCol, gridShape * 0.5));\n\n      // Slider\n      float sliderShape = rectangle(translate(expPosition, size.x * valueInRangeCenter, 0.0), vec2(size.x * abs(valueInRangeWidth) * 0.5, size.y));\n      finalCol = compose(finalCol, vec4(sliderCol, sliderShape));\n      finalCol = compose(finalCol, vec4(io_bgColorField.rgb, gridShape * sliderShape * 0.125));\n\n      // Lines\n      float maxPos = expValueInRange[0];\n      float minPos = expValueInRange[1];\n\n      float lineMinShape1 = lineVertical(translate(position, maxPos * size.x, 0.0), io_borderWidth);\n      finalCol = compose(finalCol, vec4(lineCol1, lineMinShape1));\n      float lineMinShape2 = lineVertical(translate(position, maxPos * size.x + io_borderWidth * signRange, 0.0), io_borderWidth);\n      finalCol = compose(finalCol, vec4(lineCol2, lineMinShape2));\n      \n      float lineMaxShape1 = lineVertical(translate(position, minPos * size.x, 0.0), io_borderWidth);\n      finalCol = compose(finalCol, vec4(lineCol1, lineMaxShape1));\n      float lineMaxShape2 = lineVertical(translate(position, minPos * size.x - io_borderWidth * signRange, 0.0), io_borderWidth);\n      finalCol = compose(finalCol, vec4(lineCol2, lineMaxShape2));\n\n      gl_FragColor = vec4(finalCol, 1.0);\n    }\n    "}};__decorate$2([Property({value:null,type:Array,init:[0,0]})],Ue.prototype,"value",void 0),__decorate$2([Property(.01)],Ue.prototype,"step",void 0),__decorate$2([Property(0)],Ue.prototype,"min",void 0),__decorate$2([Property(1)],Ue.prototype,"max",void 0),Ue=__decorate$2([Register],Ue);var __decorate$1=function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};let Ge=class IoNumberSliderRange extends b{static get Style(){return"\n    :host {\n      display: flex;\n      min-width: var(--io_fieldHeight5);\n      width: var(--io_fieldHeight10);\n    }\n    :host > io-number {\n      flex: 0 0 3.25em;\n    }\n    :host > io-slider-range {\n      margin-left: var(--io_spacing);\n      margin-right: var(--io_spacing);\n      flex: 1 1 3.25em;\n      min-width: 3.25em;\n    }\n    "}_onNumberSet(e){const t=e.composedPath()[0];t===this.$.number0&&(this.value[0]=e.detail.value),t===this.$.number1&&(this.value[1]=e.detail.value),e.detail.value=this.value,this.dispatchEvent("object-mutated",{object:this.value},!1,window),this.dispatchEvent("value-input",e.detail,!1)}_onSliderSet(e){this.value=e.detail.value,this.dispatchEvent("object-mutated",{object:this.value},!1,window),this.dispatchEvent("value-input",e.detail,!1)}init(){this.changed()}changed(){this.template([["io-number",{$:"number0",value:this.value[0],step:this.step,conversion:this.conversion,label:this.label,"@value-input":this._onNumberSet}],["io-slider-range",{$:"slider",value:this.value,step:this.step,min:this.min,max:this.max,exponent:this.exponent,label:this.label,"@value-input":this._onSliderSet}],["io-number",{$:"number1",value:this.value[1],step:this.step,conversion:this.conversion,label:this.label,"@value-input":this._onNumberSet}]])}};__decorate$1([Property({type:Array,init:[0,0]})],Ge.prototype,"value",void 0),__decorate$1([Property(.01)],Ge.prototype,"step",void 0),__decorate$1([Property(0)],Ge.prototype,"min",void 0),__decorate$1([Property(1)],Ge.prototype,"max",void 0),__decorate$1([Property(1)],Ge.prototype,"exponent",void 0),__decorate$1([Property(1)],Ge.prototype,"conversion",void 0),Ge=__decorate$1([Register],Ge);var __decorate=function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};let Ke=class IoNumberSlider extends b{static get Style(){return"\n    :host {\n      display: flex;\n      min-width: var(--io_fieldHeight5);\n      width: var(--io_fieldHeight10);\n    }\n    :host > io-number {\n      flex: 0 0 3.25em;\n      margin-right: var(--io_spacing);\n    }\n    :host > io-slider {\n      flex: 1 1 3em;\n      min-width: 3em;\n    }\n    "}_onNumberSet(e){this.value=e.detail.value,this.dispatchEvent("value-input",e.detail,!1)}_onSliderSet(e){e.detail.value=e.detail.value/this.conversion,this.value=e.detail.value,this.dispatchEvent("value-input",e.detail,!1)}init(){this.changed()}changed(){this.template([["io-number",{$:"number",value:this.value,step:this.step,conversion:this.conversion,label:this.label,"@value-input":this._onNumberSet}],["io-slider",{$:"slider",value:this.value*this.conversion,step:this.step*this.conversion,min:this.min*this.conversion,max:this.max*this.conversion,exponent:this.exponent,label:this.label,"@value-input":this._onSliderSet}]])}};__decorate([Property({value:0})],Ke.prototype,"value",void 0),__decorate([Property(.01)],Ke.prototype,"step",void 0),__decorate([Property(0)],Ke.prototype,"min",void 0),__decorate([Property(1)],Ke.prototype,"max",void 0),__decorate([Property(1)],Ke.prototype,"exponent",void 0),__decorate([Property(1)],Ke.prototype,"conversion",void 0),Ke=__decorate([Register],Ke);
/** @License
 * Copyright 2025 Aleksandar (Aki) Rodic
 *
 * The MIT License
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */
const Ye="MIT";export{Autobind,Binding,ChangeQueue,Color,O as DARK_THEME,EventDispatcher,U as IoBoolean,G as IoBoolicon,Fe as IoBreadcrumbs,W as IoButton,IoColorBase,ye as IoColorPanel,_e as IoColorPanelSingleton,Ce as IoColorPicker,we as IoColorRgba,ae as IoColorSlider,IoColorSlider2dBase,de as IoColorSliderA,ce as IoColorSliderB,IoColorSliderBase,he as IoColorSliderG,pe as IoColorSliderH,fe as IoColorSliderHs,ge as IoColorSliderL,le as IoColorSliderR,ue as IoColorSliderS,me as IoColorSliderSL,be as IoColorSliderSv,ve as IoColorSliderV,xe as IoColorSwatch,ze as IoContextMenu,b as IoElement,V as IoField,T as IoGl,ie as IoIcon,te as IoIconset,ee as IoIconsetDB,oe as IoIconsetSingleton,Ve as IoInspector,$ as IoLabel,Se as IoMatrix,De as IoMenuHamburger,Ae as IoMenuItem,Ie as IoMenuOptions,ke as IoMenuTree,i as IoNode,IoNodeMixin,Be as IoNotify,J as IoNumber,Q as IoNumberLadder,Z as IoNumberLadderSingleton,q as IoNumberLadderStep,Ke as IoNumberSlider,Ge as IoNumberSliderRange,We as IoObject,Te as IoOptionMenu,B as IoOverlay,F as IoOverlaySingleton,$e as IoProperties,re as IoSlider,se as IoSlider2d,IoSliderBase,Ue as IoSliderRange,C as IoStorage,x as IoStorageNode,Y as IoString,K as IoSwitch,I as IoThemeSingleton,Pe as IoVector,Ye as LICENSE,S as LIGHT_THEME,Re as MenuItem,Oe as MenuOptions,ObjectConfig,ObjectGroups,ObjectWidgets,Property,PropertyInstance,ProtoChain,ProtoObjectConfig,ProtoProperty,Register,addMenuOptions,applyNativeElementProps,buildTree,disposeElementDeep,filterOptions,genObjectStorageID,getMenuAncestors,getMenuDescendants,getMenuRoot,o as glsl,hardenListenerDefinition,listenerFromDefinition,nextQueue,e as propertyDecorators};
