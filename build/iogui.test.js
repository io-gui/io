import{Binding as e,IoNode as t,Register as o,ChangeQueue as n,EventDispatcher as i,ProtoProperty as s,PropertyInstance as r,Property as a,PropertyDecorators as l,ProtoChain as c,IoElement as p,IoNodeMixin as u,IoThemeSingleton as d,IoGl as h,IoOverlaySingleton as b,IoStorageNode as v,IoStorage as g,IoIconsetSingleton as f,IoBoolean as x,IoButton as y,IoField as m,IoIcon as q,IoLabel as w,IoSwitch as A,IoString as C,IoNumber as E,IoNumberLadder as S,IoNumberLadderStep as P,IoColorPanel as T,IoColorPicker as O,IoColorRgba as N,IoColorSlider as _,IoColorSwatch as I,IoNumberSliderRange as j,IoNumberSlider as L,IoSliderRange as M,IoSlider as k}from"./iogui.js";var __decorate$8=function(e,t,o,n){var i,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(r=(s<3?i(r):s>3?i(t,o,r):i(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r};let z=class TestIoNode extends t{static get Properties(){return{prop1:0,prop2:0}}};z=__decorate$8([o],z);class BindingTest{run(){describe("Binding",(()=>{it("Should initialize with correct default values",(()=>{const t=new z,o=new e(t,"prop1");chai.expect(o.node).to.be.equal(t),chai.expect(o.property).to.be.equal("prop1"),chai.expect(o.targets instanceof Array).to.be.equal(!0),chai.expect(o.targets.length).to.be.equal(0),chai.expect(o.targetProperties instanceof WeakMap).to.be.equal(!0)})),it("Should get and set property value on source node with `value` getter/setter",(()=>{const t=new z,o=new e(t,"prop1");t.prop1=1,chai.expect(o.value).to.be.equal(1),t.prop1=2,chai.expect(o.value).to.be.equal(2),o.value=3,chai.expect(t.prop1).to.be.equal(3)})),it("Should add/remove target nodes and properties with `.addTarget()` and `removeTarget()`",(()=>{const t=new z,o=new e(t,"prop1"),n=new e(t,"prop2"),i=new z,s=new z;o.addTarget(i,"prop1"),n.addTarget(i,"prop2"),n.addTarget(s,"prop1"),n.addTarget(s,"prop2"),chai.expect(t._eventDispatcher.addedListeners).to.be.eql({"prop1-changed":[[o.onSourceChanged]],"prop2-changed":[[n.onSourceChanged]]}),chai.expect(i._eventDispatcher.addedListeners).to.be.eql({"prop1-changed":[[o.onTargetChanged]],"prop2-changed":[[n.onTargetChanged]]}),chai.expect(s._eventDispatcher.addedListeners).to.be.eql({"prop1-changed":[[n.onTargetChanged]],"prop2-changed":[[n.onTargetChanged]]}),chai.expect(o.targets[0]).to.be.equal(i),chai.expect(o.targets[1]).to.be.equal(void 0),chai.expect(n.targets[0]).to.be.equal(i),chai.expect(n.targets[1]).to.be.equal(s),chai.expect(n.targets[2]).to.be.equal(void 0),chai.expect(i._properties.get("prop1").binding).to.be.equal(o),chai.expect(i._properties.get("prop2").binding).to.be.equal(n),chai.expect(s._properties.get("prop1").binding).to.be.equal(n),chai.expect(s._properties.get("prop2").binding).to.be.equal(n);const r=o.getTargetProperties(i),a=o.getTargetProperties(s);chai.expect(r[0]).to.be.equal("prop1"),chai.expect(r.length).to.be.equal(1),chai.expect(a.length).to.be.equal(0);const l=n.getTargetProperties(i),c=n.getTargetProperties(s);chai.expect(l[0]).to.be.equal("prop2"),chai.expect(l.length).to.be.equal(1),chai.expect(c[0]).to.be.equal("prop1"),chai.expect(c[1]).to.be.equal("prop2"),chai.expect(c.length).to.be.equal(2),n.removeTarget(s,"prop1"),chai.expect(c[0]).to.be.equal("prop2"),chai.expect(c.length).to.be.equal(1),chai.expect(s._properties.get("prop1").binding).to.be.equal(void 0),chai.expect(s._eventDispatcher.addedListeners).to.be.eql({"prop2-changed":[[n.onTargetChanged]]}),n.addTarget(s,"prop1"),chai.expect(c.length).to.be.equal(2),chai.expect(s._properties.get("prop1").binding).to.be.equal(n),n.removeTarget(s),chai.expect(c.length).to.be.equal(0),chai.expect(s._properties.get("prop1").binding).to.be.equal(void 0),chai.expect(s._properties.get("prop2").binding).to.be.equal(void 0),chai.expect(s._eventDispatcher.addedListeners).to.be.eql({})})),it("Should dispose correctly",(()=>{const t=new z,o=new z,n=new e(t,"prop1");n.addTarget(o,"prop1"),chai.expect(t._eventDispatcher.addedListeners).to.be.eql({"prop1-changed":[[n.onSourceChanged]]}),chai.expect(o._eventDispatcher.addedListeners).to.be.eql({"prop1-changed":[[n.onTargetChanged]]}),n.dispose(),chai.expect(n.node).to.be.equal(void 0),chai.expect(n.property).to.be.equal(void 0),chai.expect(n.targets).to.be.equal(void 0),chai.expect(n.targetProperties).to.be.equal(void 0),chai.expect(o._properties.get("prop1").binding).to.be.equal(void 0),chai.expect(t._eventDispatcher.addedListeners).to.be.eql({}),chai.expect(o._eventDispatcher.addedListeners).to.be.eql({})}))}))}}var D,B,F=Object.defineProperty,R=Object.getOwnPropertyNames,__name=(e,t)=>F(e,"name",{value:t,configurable:!0}),__export=(e,t)=>{for(var o in t)F(e,o,{get:t[o],enumerable:!0})},V=(D={"(disabled):util"(){}},function __require(){return B||(0,D[R(D)[0]])((B={exports:{}}).exports,B),B.exports}),H={};__export(H,{addChainableMethod:()=>addChainableMethod,addLengthGuard:()=>addLengthGuard,addMethod:()=>addMethod,addProperty:()=>addProperty,checkError:()=>G,compareByInspect:()=>compareByInspect,eql:()=>ge,expectTypes:()=>expectTypes,flag:()=>flag,getActual:()=>getActual,getMessage:()=>getMessage2,getName:()=>getName,getOperator:()=>getOperator,getOwnEnumerableProperties:()=>getOwnEnumerableProperties,getOwnEnumerablePropertySymbols:()=>getOwnEnumerablePropertySymbols,getPathInfo:()=>getPathInfo,hasProperty:()=>hasProperty,inspect:()=>inspect2,isNaN:()=>Ce,isProxyEnabled:()=>isProxyEnabled,isRegExp:()=>isRegExp2,objDisplay:()=>objDisplay,overwriteChainableMethod:()=>overwriteChainableMethod,overwriteMethod:()=>overwriteMethod,overwriteProperty:()=>overwriteProperty,proxify:()=>proxify,test:()=>test,transferFlags:()=>transferFlags,type:()=>type});var G={};function isErrorInstance(e){return e instanceof Error||"[object Error]"===Object.prototype.toString.call(e)}function isRegExp(e){return"[object RegExp]"===Object.prototype.toString.call(e)}function compatibleInstance(e,t){return isErrorInstance(t)&&e===t}function compatibleConstructor(e,t){return isErrorInstance(t)?e.constructor===t.constructor||e instanceof t.constructor:!("object"!=typeof t&&"function"!=typeof t||!t.prototype)&&(e.constructor===t||e instanceof t)}function compatibleMessage(e,t){const o="string"==typeof e?e:e.message;return isRegExp(t)?t.test(o):"string"==typeof t&&-1!==o.indexOf(t)}function getConstructorName(e){let t=e;if(isErrorInstance(e))t=e.constructor.name;else if("function"==typeof e&&(t=e.name,""===t)){t=(new e).name||t}return t}function getMessage(e){let t="";return e&&e.message?t=e.message:"string"==typeof e&&(t=e),t}function flag(e,t,o){var n=e.__flags||(e.__flags=Object.create(null));if(3!==arguments.length)return n[t];n[t]=o}function test(e,t){var o=flag(e,"negate"),n=t[0];return o?!n:n}function type(e){if(void 0===e)return"undefined";if(null===e)return"null";const t=e[Symbol.toStringTag];if("string"==typeof t)return t;return Object.prototype.toString.call(e).slice(8,-1)}__export(G,{compatibleConstructor:()=>compatibleConstructor,compatibleInstance:()=>compatibleInstance,compatibleMessage:()=>compatibleMessage,getConstructorName:()=>getConstructorName,getMessage:()=>getMessage}),__name(isErrorInstance,"isErrorInstance"),__name(isRegExp,"isRegExp"),__name(compatibleInstance,"compatibleInstance"),__name(compatibleConstructor,"compatibleConstructor"),__name(compatibleMessage,"compatibleMessage"),__name(getConstructorName,"getConstructorName"),__name(getMessage,"getMessage"),__name(flag,"flag"),__name(test,"test"),__name(type,"type");var K="captureStackTrace"in Error,W=class _AssertionError extends Error{static{__name(this,"AssertionError")}message;get name(){return"AssertionError"}get ok(){return!1}constructor(e="Unspecified AssertionError",t,o){super(e),this.message=e,K&&Error.captureStackTrace(this,o||_AssertionError);for(const e in t)e in this||(this[e]=t[e])}toJSON(e){return{...this,name:this.name,message:this.message,ok:!1,stack:!1!==e?this.stack:void 0}}};function expectTypes(e,t){var o=flag(e,"message"),n=flag(e,"ssfi");o=o?o+": ":"",e=flag(e,"object"),(t=t.map((function(e){return e.toLowerCase()}))).sort();var i=t.map((function(e,o){var n=~["a","e","i","o","u"].indexOf(e.charAt(0))?"an":"a";return(t.length>1&&o===t.length-1?"or ":"")+n+" "+e})).join(", "),s=type(e).toLowerCase();if(!t.some((function(e){return s===e})))throw new W(o+"object tested must be "+i+", but "+s+" given",void 0,n)}function getActual(e,t){return t.length>4?t[4]:e._obj}__name(expectTypes,"expectTypes"),__name(getActual,"getActual");var U={bold:["1","22"],dim:["2","22"],italic:["3","23"],underline:["4","24"],inverse:["7","27"],hidden:["8","28"],strike:["9","29"],black:["30","39"],red:["31","39"],green:["32","39"],yellow:["33","39"],blue:["34","39"],magenta:["35","39"],cyan:["36","39"],white:["37","39"],brightblack:["30;1","39"],brightred:["31;1","39"],brightgreen:["32;1","39"],brightyellow:["33;1","39"],brightblue:["34;1","39"],brightmagenta:["35;1","39"],brightcyan:["36;1","39"],brightwhite:["37;1","39"],grey:["90","39"]},Q={special:"cyan",number:"yellow",bigint:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",symbol:"green",date:"magenta",regexp:"red"},J="â€¦";function colorise(e,t){const o=U[Q[t]]||U[t]||"";return o?`[${o[0]}m${String(e)}[${o[1]}m`:String(e)}function normaliseOptions({showHidden:e=!1,depth:t=2,colors:o=!1,customInspect:n=!0,showProxy:i=!1,maxArrayLength:s=1/0,breakLength:r=1/0,seen:a=[],truncate:l=1/0,stylize:c=String}={},p){const u={showHidden:Boolean(e),depth:Number(t),colors:Boolean(o),customInspect:Boolean(n),showProxy:Boolean(i),maxArrayLength:Number(s),breakLength:Number(r),truncate:Number(l),seen:a,inspect:p,stylize:c};return u.colors&&(u.stylize=colorise),u}function truncate(e,t,o=J){e=String(e);const n=o.length,i=e.length;return n>t&&i>n?o:i>t&&i>n?`${e.slice(0,t-n)}${o}`:e}function inspectList(e,t,o,n=", "){o=o||t.inspect;const i=e.length;if(0===i)return"";const s=t.truncate;let r="",a="",l="";for(let c=0;c<i;c+=1){const i=c+1===e.length,p=c+2===e.length;l=`${J}(${e.length-c})`;const u=e[c];t.truncate=s-r.length-(i?0:n.length);const d=a||o(u,t)+(i?"":n),h=r.length+d.length,b=h+l.length;if(i&&h>s&&r.length+l.length<=s)break;if(!i&&!p&&b>s)break;if(a=i?"":o(e[c+1],t)+(p?"":n),!i&&p&&b>s&&h+a.length>s)break;if(r+=d,!i&&!p&&h+a.length>=s){l=`${J}(${e.length-c-1})`;break}l=""}return`${r}${l}`}function quoteComplexKey(e){return e.match(/^[a-zA-Z_][a-zA-Z_0-9]*$/)?e:JSON.stringify(e).replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'")}function inspectProperty([e,t],o){return o.truncate-=2,"string"==typeof e?e=quoteComplexKey(e):"number"!=typeof e&&(e=`[${o.inspect(e,o)}]`),o.truncate-=e.length,`${e}: ${t=o.inspect(t,o)}`}function inspectArray(e,t){const o=Object.keys(e).slice(e.length);if(!e.length&&!o.length)return"[]";t.truncate-=4;const n=inspectList(e,t);t.truncate-=n.length;let i="";return o.length&&(i=inspectList(o.map((t=>[t,e[t]])),t,inspectProperty)),`[ ${n}${i?`, ${i}`:""} ]`}__name(colorise,"colorise"),__name(normaliseOptions,"normaliseOptions"),__name(truncate,"truncate"),__name(inspectList,"inspectList"),__name(quoteComplexKey,"quoteComplexKey"),__name(inspectProperty,"inspectProperty"),__name(inspectArray,"inspectArray");var Z=__name((e=>"function"==typeof Buffer&&e instanceof Buffer?"Buffer":e[Symbol.toStringTag]?e[Symbol.toStringTag]:e.constructor.name),"getArrayName");function inspectTypedArray(e,t){const o=Z(e);t.truncate-=o.length+4;const n=Object.keys(e).slice(e.length);if(!e.length&&!n.length)return`${o}[]`;let i="";for(let o=0;o<e.length;o++){const n=`${t.stylize(truncate(e[o],t.truncate),"number")}${o===e.length-1?"":", "}`;if(t.truncate-=n.length,e[o]!==e.length&&t.truncate<=3){i+=`${J}(${e.length-e[o]+1})`;break}i+=n}let s="";return n.length&&(s=inspectList(n.map((t=>[t,e[t]])),t,inspectProperty)),`${o}[ ${i}${s?`, ${s}`:""} ]`}function inspectDate(e,t){const o=e.toJSON();if(null===o)return"Invalid Date";const n=o.split("T"),i=n[0];return t.stylize(`${i}T${truncate(n[1],t.truncate-i.length-1)}`,"date")}function inspectFunction(e,t){const o=e[Symbol.toStringTag]||"Function",n=e.name;return n?t.stylize(`[${o} ${truncate(n,t.truncate-11)}]`,"special"):t.stylize(`[${o}]`,"special")}function inspectMapEntry([e,t],o){return o.truncate-=4,e=o.inspect(e,o),o.truncate-=e.length,`${e} => ${t=o.inspect(t,o)}`}function mapToEntries(e){const t=[];return e.forEach(((e,o)=>{t.push([o,e])})),t}function inspectMap(e,t){return e.size-1<=0?"Map{}":(t.truncate-=7,`Map{ ${inspectList(mapToEntries(e),t,inspectMapEntry)} }`)}__name(inspectTypedArray,"inspectTypedArray"),__name(inspectDate,"inspectDate"),__name(inspectFunction,"inspectFunction"),__name(inspectMapEntry,"inspectMapEntry"),__name(mapToEntries,"mapToEntries"),__name(inspectMap,"inspectMap");var Y=Number.isNaN||(e=>e!=e);function inspectNumber(e,t){return Y(e)?t.stylize("NaN","number"):e===1/0?t.stylize("Infinity","number"):e===-1/0?t.stylize("-Infinity","number"):0===e?t.stylize(1/e==1/0?"+0":"-0","number"):t.stylize(truncate(String(e),t.truncate),"number")}function inspectBigInt(e,t){let o=truncate(e.toString(),t.truncate-1);return o!==J&&(o+="n"),t.stylize(o,"bigint")}function inspectRegExp(e,t){const o=e.toString().split("/")[2],n=t.truncate-(2+o.length),i=e.source;return t.stylize(`/${truncate(i,n)}/${o}`,"regexp")}function arrayFromSet(e){const t=[];return e.forEach((e=>{t.push(e)})),t}function inspectSet(e,t){return 0===e.size?"Set{}":(t.truncate-=7,`Set{ ${inspectList(arrayFromSet(e),t)} }`)}__name(inspectNumber,"inspectNumber"),__name(inspectBigInt,"inspectBigInt"),__name(inspectRegExp,"inspectRegExp"),__name(arrayFromSet,"arrayFromSet"),__name(inspectSet,"inspectSet");var X=new RegExp("['\\u0000-\\u001f\\u007f-\\u009f\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]","g"),ee={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","'":"\\'","\\":"\\\\"},te=16,oe=4;function escape(e){return ee[e]||`\\u${`0000${e.charCodeAt(0).toString(te)}`.slice(-oe)}`}function inspectString(e,t){return X.test(e)&&(e=e.replace(X,escape)),t.stylize(`'${truncate(e,t.truncate-2)}'`,"string")}function inspectSymbol(e){return"description"in Symbol.prototype?e.description?`Symbol(${e.description})`:"Symbol()":e.toString()}__name(escape,"escape"),__name(inspectString,"inspectString"),__name(inspectSymbol,"inspectSymbol");var ne=__name((()=>"Promise{â€¦}"),"getPromiseValue");try{const{getPromiseDetails:e,kPending:t,kRejected:o}=process.binding("util");Array.isArray(e(Promise.resolve()))&&(ne=__name(((n,i)=>{const[s,r]=e(n);return s===t?"Promise{<pending>}":`Promise${s===o?"!":""}{${i.inspect(r,i)}}`}),"getPromiseValue"))}catch(e){}var ie=ne;function inspectObject(e,t){const o=Object.getOwnPropertyNames(e),n=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e):[];if(0===o.length&&0===n.length)return"{}";if(t.truncate-=4,t.seen=t.seen||[],t.seen.indexOf(e)>=0)return"[Circular]";t.seen.push(e);const i=inspectList(o.map((t=>[t,e[t]])),t,inspectProperty),s=inspectList(n.map((t=>[t,e[t]])),t,inspectProperty);t.seen.pop();let r="";return i&&s&&(r=", "),`{ ${i}${r}${s} }`}__name(inspectObject,"inspectObject");var se=!("undefined"==typeof Symbol||!Symbol.toStringTag)&&Symbol.toStringTag;function inspectClass(e,t){let o="";return se&&se in e&&(o=e[se]),o=o||e.constructor.name,o&&"_class"!==o||(o="<Anonymous Class>"),t.truncate-=o.length,`${o}${inspectObject(e,t)}`}function inspectArguments(e,t){return 0===e.length?"Arguments[]":(t.truncate-=13,`Arguments[ ${inspectList(e,t)} ]`)}__name(inspectClass,"inspectClass"),__name(inspectArguments,"inspectArguments");var re=["stack","line","column","name","message","fileName","lineNumber","columnNumber","number","description"];function inspectObject2(e,t){const o=Object.getOwnPropertyNames(e).filter((e=>-1===re.indexOf(e))),n=e.name;t.truncate-=n.length;let i="";"string"==typeof e.message?i=truncate(e.message,t.truncate):o.unshift("message"),i=i?`: ${i}`:"",t.truncate-=i.length+5;const s=inspectList(o.map((t=>[t,e[t]])),t,inspectProperty);return`${n}${i}${s?` { ${s} }`:""}`}function inspectAttribute([e,t],o){return o.truncate-=3,t?`${o.stylize(String(e),"yellow")}=${o.stylize(`"${t}"`,"string")}`:`${o.stylize(String(e),"yellow")}`}function inspectHTMLCollection(e,t){return inspectList(e,t,inspectHTML,"\n")}function inspectHTML(e,t){const o=e.getAttributeNames(),n=e.tagName.toLowerCase(),i=t.stylize(`<${n}`,"special"),s=t.stylize(">","special"),r=t.stylize(`</${n}>`,"special");t.truncate-=2*n.length+5;let a="";o.length>0&&(a+=" ",a+=inspectList(o.map((t=>[t,e.getAttribute(t)])),t,inspectAttribute," ")),t.truncate-=a.length;const l=t.truncate;let c=inspectHTMLCollection(e.children,t);return c&&c.length>l&&(c=`${J}(${e.children.length})`),`${i}${a}${s}${c}${r}`}__name(inspectObject2,"inspectObject"),__name(inspectAttribute,"inspectAttribute"),__name(inspectHTMLCollection,"inspectHTMLCollection"),__name(inspectHTML,"inspectHTML");var ae="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("chai/inspect"):"@@chai/inspect",le=!1;try{const e=V();le=!!e.inspect&&e.inspect.custom}catch(e){le=!1}var ce=new WeakMap,pe={},ue={undefined:(e,t)=>t.stylize("undefined","undefined"),null:(e,t)=>t.stylize("null","null"),boolean:(e,t)=>t.stylize(String(e),"boolean"),Boolean:(e,t)=>t.stylize(String(e),"boolean"),number:inspectNumber,Number:inspectNumber,bigint:inspectBigInt,BigInt:inspectBigInt,string:inspectString,String:inspectString,function:inspectFunction,Function:inspectFunction,symbol:inspectSymbol,Symbol:inspectSymbol,Array:inspectArray,Date:inspectDate,Map:inspectMap,Set:inspectSet,RegExp:inspectRegExp,Promise:ie,WeakSet:(e,t)=>t.stylize("WeakSet{â€¦}","special"),WeakMap:(e,t)=>t.stylize("WeakMap{â€¦}","special"),Arguments:inspectArguments,Int8Array:inspectTypedArray,Uint8Array:inspectTypedArray,Uint8ClampedArray:inspectTypedArray,Int16Array:inspectTypedArray,Uint16Array:inspectTypedArray,Int32Array:inspectTypedArray,Uint32Array:inspectTypedArray,Float32Array:inspectTypedArray,Float64Array:inspectTypedArray,Generator:()=>"",DataView:()=>"",ArrayBuffer:()=>"",Error:inspectObject2,HTMLCollection:inspectHTMLCollection,NodeList:inspectHTMLCollection},de=__name(((e,t,o)=>ae in e&&"function"==typeof e[ae]?e[ae](t):le&&le in e&&"function"==typeof e[le]?e[le](t.depth,t):"inspect"in e&&"function"==typeof e.inspect?e.inspect(t.depth,t):"constructor"in e&&ce.has(e.constructor)?ce.get(e.constructor)(e,t):pe[o]?pe[o](e,t):""),"inspectCustom"),he=Object.prototype.toString;function inspect(e,t={}){const o=normaliseOptions(t,inspect),{customInspect:n}=o;let i=null===e?"null":typeof e;if("object"===i&&(i=he.call(e).slice(8,-1)),i in ue)return ue[i](e,o);if(n&&e){const t=de(e,o,i);if(t)return"string"==typeof t?t:inspect(t,o)}const s=!!e&&Object.getPrototypeOf(e);return s===Object.prototype||null===s?inspectObject(e,o):e&&"function"==typeof HTMLElement&&e instanceof HTMLElement?inspectHTML(e,o):"constructor"in e?e.constructor!==Object?inspectClass(e,o):inspectObject(e,o):e===Object(e)?inspectObject(e,o):o.stylize(String(e),i)}__name(inspect,"inspect");var be={includeStack:!1,showDiff:!0,truncateThreshold:40,useProxy:!0,proxyExcludedKeys:["then","catch","inspect","toJSON"],deepEqual:null};function inspect2(e,t,o,n){return inspect(e,{colors:n,depth:void 0===o?2:o,showHidden:t,truncate:be.truncateThreshold?be.truncateThreshold:1/0})}function objDisplay(e){var t=inspect2(e),o=Object.prototype.toString.call(e);if(be.truncateThreshold&&t.length>=be.truncateThreshold){if("[object Function]"===o)return e.name&&""!==e.name?"[Function: "+e.name+"]":"[Function]";if("[object Array]"===o)return"[ Array("+e.length+") ]";if("[object Object]"===o){var n=Object.keys(e);return"{ Object ("+(n.length>2?n.splice(0,2).join(", ")+", ...":n.join(", "))+") }"}return t}return t}function getMessage2(e,t){var o=flag(e,"negate"),n=flag(e,"object"),i=t[3],s=getActual(e,t),r=o?t[2]:t[1],a=flag(e,"message");return"function"==typeof r&&(r=r()),r=(r=r||"").replace(/#\{this\}/g,(function(){return objDisplay(n)})).replace(/#\{act\}/g,(function(){return objDisplay(s)})).replace(/#\{exp\}/g,(function(){return objDisplay(i)})),a?a+": "+r:r}function transferFlags(e,t,o){var n=e.__flags||(e.__flags=Object.create(null));for(var i in t.__flags||(t.__flags=Object.create(null)),o=3!==arguments.length||o,n)(o||"object"!==i&&"ssfi"!==i&&"lockSsfi"!==i&&"message"!=i)&&(t.__flags[i]=n[i])}function type2(e){if(void 0===e)return"undefined";if(null===e)return"null";const t=e[Symbol.toStringTag];if("string"==typeof t)return t;return Object.prototype.toString.call(e).slice(8,-1)}function FakeMap(){this._key="chai/deep-eql__"+Math.random()+Date.now()}__name(inspect2,"inspect"),__name(objDisplay,"objDisplay"),__name(getMessage2,"getMessage"),__name(transferFlags,"transferFlags"),__name(type2,"type"),__name(FakeMap,"FakeMap"),FakeMap.prototype={get:__name((function get(e){return e[this._key]}),"get"),set:__name((function set(e,t){Object.isExtensible(e)&&Object.defineProperty(e,this._key,{value:t,configurable:!0})}),"set")};var ve="function"==typeof WeakMap?WeakMap:FakeMap;function memoizeCompare(e,t,o){if(!o||isPrimitive(e)||isPrimitive(t))return null;var n=o.get(e);if(n){var i=n.get(t);if("boolean"==typeof i)return i}return null}function memoizeSet(e,t,o,n){if(o&&!isPrimitive(e)&&!isPrimitive(t)){var i=o.get(e);i?i.set(t,n):((i=new ve).set(t,n),o.set(e,i))}}__name(memoizeCompare,"memoizeCompare"),__name(memoizeSet,"memoizeSet");var ge=deepEqual;function deepEqual(e,t,o){if(o&&o.comparator)return extensiveDeepEqual(e,t,o);var n=simpleEqual(e,t);return null!==n?n:extensiveDeepEqual(e,t,o)}function simpleEqual(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t||!isPrimitive(e)&&!isPrimitive(t)&&null}function extensiveDeepEqual(e,t,o){(o=o||{}).memoize=!1!==o.memoize&&(o.memoize||new ve);var n=o&&o.comparator,i=memoizeCompare(e,t,o.memoize);if(null!==i)return i;var s=memoizeCompare(t,e,o.memoize);if(null!==s)return s;if(n){var r=n(e,t);if(!1===r||!0===r)return memoizeSet(e,t,o.memoize,r),r;var a=simpleEqual(e,t);if(null!==a)return a}var l=type2(e);if(l!==type2(t))return memoizeSet(e,t,o.memoize,!1),!1;memoizeSet(e,t,o.memoize,!0);var c=extensiveDeepEqualByType(e,t,l,o);return memoizeSet(e,t,o.memoize,c),c}function extensiveDeepEqualByType(e,t,o,n){switch(o){case"String":case"Number":case"Boolean":case"Date":return deepEqual(e.valueOf(),t.valueOf());case"Promise":case"Symbol":case"function":case"WeakMap":case"WeakSet":return e===t;case"Error":return keysEqual(e,t,["name","message","code"],n);case"Arguments":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"Array":return iterableEqual(e,t,n);case"RegExp":return regexpEqual(e,t);case"Generator":return generatorEqual(e,t,n);case"DataView":return iterableEqual(new Uint8Array(e.buffer),new Uint8Array(t.buffer),n);case"ArrayBuffer":return iterableEqual(new Uint8Array(e),new Uint8Array(t),n);case"Set":case"Map":return entriesEqual(e,t,n);case"Temporal.PlainDate":case"Temporal.PlainTime":case"Temporal.PlainDateTime":case"Temporal.Instant":case"Temporal.ZonedDateTime":case"Temporal.PlainYearMonth":case"Temporal.PlainMonthDay":return e.equals(t);case"Temporal.Duration":return e.total("nanoseconds")===t.total("nanoseconds");case"Temporal.TimeZone":case"Temporal.Calendar":return e.toString()===t.toString();default:return objectEqual(e,t,n)}}function regexpEqual(e,t){return e.toString()===t.toString()}function entriesEqual(e,t,o){if(e.size!==t.size)return!1;if(0===e.size)return!0;var n=[],i=[];return e.forEach(__name((function gatherEntries(e,t){n.push([e,t])}),"gatherEntries")),t.forEach(__name((function gatherEntries(e,t){i.push([e,t])}),"gatherEntries")),iterableEqual(n.sort(),i.sort(),o)}function iterableEqual(e,t,o){var n=e.length;if(n!==t.length)return!1;if(0===n)return!0;for(var i=-1;++i<n;)if(!1===deepEqual(e[i],t[i],o))return!1;return!0}function generatorEqual(e,t,o){return iterableEqual(getGeneratorEntries(e),getGeneratorEntries(t),o)}function hasIteratorFunction(e){return"undefined"!=typeof Symbol&&"object"==typeof e&&void 0!==Symbol.iterator&&"function"==typeof e[Symbol.iterator]}function getIteratorEntries(e){if(hasIteratorFunction(e))try{return getGeneratorEntries(e[Symbol.iterator]())}catch(e){return[]}return[]}function getGeneratorEntries(e){for(var t=e.next(),o=[t.value];!1===t.done;)t=e.next(),o.push(t.value);return o}function getEnumerableKeys(e){var t=[];for(var o in e)t.push(o);return t}function getEnumerableSymbols(e){for(var t=[],o=Object.getOwnPropertySymbols(e),n=0;n<o.length;n+=1){var i=o[n];Object.getOwnPropertyDescriptor(e,i).enumerable&&t.push(i)}return t}function keysEqual(e,t,o,n){var i=o.length;if(0===i)return!0;for(var s=0;s<i;s+=1)if(!1===deepEqual(e[o[s]],t[o[s]],n))return!1;return!0}function objectEqual(e,t,o){var n=getEnumerableKeys(e),i=getEnumerableKeys(t),s=getEnumerableSymbols(e),r=getEnumerableSymbols(t);if(n=n.concat(s),i=i.concat(r),n.length&&n.length===i.length)return!1!==iterableEqual(mapSymbols(n).sort(),mapSymbols(i).sort())&&keysEqual(e,t,n,o);var a=getIteratorEntries(e),l=getIteratorEntries(t);return a.length&&a.length===l.length?(a.sort(),l.sort(),iterableEqual(a,l,o)):0===n.length&&0===a.length&&0===i.length&&0===l.length}function isPrimitive(e){return null===e||"object"!=typeof e}function mapSymbols(e){return e.map(__name((function mapSymbol(e){return"symbol"==typeof e?e.toString():e}),"mapSymbol"))}function hasProperty(e,t){return null!=e&&t in Object(e)}function parsePath(e){return e.replace(/([^\\])\[/g,"$1.[").match(/(\\\.|[^.]+?)+/g).map((e=>{if("constructor"===e||"__proto__"===e||"prototype"===e)return{};const t=/^\[(\d+)\]$/.exec(e);let o=null;return o=t?{i:parseFloat(t[1])}:{p:e.replace(/\\([.[\]])/g,"$1")},o}))}function internalGetPathValue(e,t,o){let n=e,i=null;o=void 0===o?t.length:o;for(let e=0;e<o;e++){const s=t[e];n&&(n=void 0===s.p?n[s.i]:n[s.p],e===o-1&&(i=n))}return i}function getPathInfo(e,t){const o=parsePath(t),n=o[o.length-1],i={parent:o.length>1?internalGetPathValue(e,o,o.length-1):e,name:n.p||n.i,value:internalGetPathValue(e,o)};return i.exists=hasProperty(i.parent,i.name),i}function Assertion(e,t,o,n){return flag(this,"ssfi",o||Assertion),flag(this,"lockSsfi",n),flag(this,"object",e),flag(this,"message",t),flag(this,"eql",be.deepEqual||ge),proxify(this)}function isProxyEnabled(){return be.useProxy&&"undefined"!=typeof Proxy&&"undefined"!=typeof Reflect}function addProperty(e,t,o){o=void 0===o?function(){}:o,Object.defineProperty(e,t,{get:__name((function propertyGetter(){isProxyEnabled()||flag(this,"lockSsfi")||flag(this,"ssfi",propertyGetter);var e=o.call(this);if(void 0!==e)return e;var t=new Assertion;return transferFlags(this,t),t}),"propertyGetter"),configurable:!0})}__name(deepEqual,"deepEqual"),__name(simpleEqual,"simpleEqual"),__name(extensiveDeepEqual,"extensiveDeepEqual"),__name(extensiveDeepEqualByType,"extensiveDeepEqualByType"),__name(regexpEqual,"regexpEqual"),__name(entriesEqual,"entriesEqual"),__name(iterableEqual,"iterableEqual"),__name(generatorEqual,"generatorEqual"),__name(hasIteratorFunction,"hasIteratorFunction"),__name(getIteratorEntries,"getIteratorEntries"),__name(getGeneratorEntries,"getGeneratorEntries"),__name(getEnumerableKeys,"getEnumerableKeys"),__name(getEnumerableSymbols,"getEnumerableSymbols"),__name(keysEqual,"keysEqual"),__name(objectEqual,"objectEqual"),__name(isPrimitive,"isPrimitive"),__name(mapSymbols,"mapSymbols"),__name(hasProperty,"hasProperty"),__name(parsePath,"parsePath"),__name(internalGetPathValue,"internalGetPathValue"),__name(getPathInfo,"getPathInfo"),__name(Assertion,"Assertion"),Object.defineProperty(Assertion,"includeStack",{get:function(){return console.warn("Assertion.includeStack is deprecated, use chai.config.includeStack instead."),be.includeStack},set:function(e){console.warn("Assertion.includeStack is deprecated, use chai.config.includeStack instead."),be.includeStack=e}}),Object.defineProperty(Assertion,"showDiff",{get:function(){return console.warn("Assertion.showDiff is deprecated, use chai.config.showDiff instead."),be.showDiff},set:function(e){console.warn("Assertion.showDiff is deprecated, use chai.config.showDiff instead."),be.showDiff=e}}),Assertion.addProperty=function(e,t){addProperty(this.prototype,e,t)},Assertion.addMethod=function(e,t){addMethod(this.prototype,e,t)},Assertion.addChainableMethod=function(e,t,o){addChainableMethod(this.prototype,e,t,o)},Assertion.overwriteProperty=function(e,t){overwriteProperty(this.prototype,e,t)},Assertion.overwriteMethod=function(e,t){overwriteMethod(this.prototype,e,t)},Assertion.overwriteChainableMethod=function(e,t,o){overwriteChainableMethod(this.prototype,e,t,o)},Assertion.prototype.assert=function(e,t,o,n,i,s){var r=test(this,arguments);if(!1!==s&&(s=!0),void 0===n&&void 0===i&&(s=!1),!0!==be.showDiff&&(s=!1),!r){t=getMessage2(this,arguments);var a={actual:getActual(this,arguments),expected:n,showDiff:s},l=getOperator(this,arguments);throw l&&(a.operator=l),new W(t,a,be.includeStack?this.assert:flag(this,"ssfi"))}},Object.defineProperty(Assertion.prototype,"_obj",{get:function(){return flag(this,"object")},set:function(e){flag(this,"object",e)}}),__name(isProxyEnabled,"isProxyEnabled"),__name(addProperty,"addProperty");var fe=Object.getOwnPropertyDescriptor((function(){}),"length");function addLengthGuard(e,t,o){return fe.configurable?(Object.defineProperty(e,"length",{get:function(){if(o)throw Error("Invalid Chai property: "+t+'.length. Due to a compatibility issue, "length" cannot directly follow "'+t+'". Use "'+t+'.lengthOf" instead.');throw Error("Invalid Chai property: "+t+'.length. See docs for proper usage of "'+t+'".')}}),e):e}function getProperties(e){var t=Object.getOwnPropertyNames(e);function addProperty2(e){-1===t.indexOf(e)&&t.push(e)}__name(addProperty2,"addProperty");for(var o=Object.getPrototypeOf(e);null!==o;)Object.getOwnPropertyNames(o).forEach(addProperty2),o=Object.getPrototypeOf(o);return t}__name(addLengthGuard,"addLengthGuard"),__name(getProperties,"getProperties");var xe=["__flags","__methods","_obj","assert"];function proxify(e,t){return isProxyEnabled()?new Proxy(e,{get:__name((function proxyGetter(e,o){if("string"==typeof o&&-1===be.proxyExcludedKeys.indexOf(o)&&!Reflect.has(e,o)){if(t)throw Error("Invalid Chai property: "+t+"."+o+'. See docs for proper usage of "'+t+'".');var n=null,i=4;throw getProperties(e).forEach((function(e){if(!Object.prototype.hasOwnProperty(e)&&-1===xe.indexOf(e)){var t=stringDistanceCapped(o,e,i);t<i&&(n=e,i=t)}})),null!==n?Error("Invalid Chai property: "+o+'. Did you mean "'+n+'"?'):Error("Invalid Chai property: "+o)}return-1!==xe.indexOf(o)||flag(e,"lockSsfi")||flag(e,"ssfi",proxyGetter),Reflect.get(e,o)}),"proxyGetter")}):e}function stringDistanceCapped(e,t,o){if(Math.abs(e.length-t.length)>=o)return o;for(var n=[],i=0;i<=e.length;i++)n[i]=Array(t.length+1).fill(0),n[i][0]=i;for(var s=0;s<t.length;s++)n[0][s]=s;for(i=1;i<=e.length;i++){var r=e.charCodeAt(i-1);for(s=1;s<=t.length;s++)Math.abs(i-s)>=o?n[i][s]=o:n[i][s]=Math.min(n[i-1][s]+1,n[i][s-1]+1,n[i-1][s-1]+(r===t.charCodeAt(s-1)?0:1))}return n[e.length][t.length]}function addMethod(e,t,o){var n=__name((function(){flag(this,"lockSsfi")||flag(this,"ssfi",n);var e=o.apply(this,arguments);if(void 0!==e)return e;var t=new Assertion;return transferFlags(this,t),t}),"methodWrapper");addLengthGuard(n,t,!1),e[t]=proxify(n,t)}function overwriteProperty(e,t,o){var n=Object.getOwnPropertyDescriptor(e,t),i=__name((function(){}),"_super");n&&"function"==typeof n.get&&(i=n.get),Object.defineProperty(e,t,{get:__name((function overwritingPropertyGetter(){isProxyEnabled()||flag(this,"lockSsfi")||flag(this,"ssfi",overwritingPropertyGetter);var e=flag(this,"lockSsfi");flag(this,"lockSsfi",!0);var t=o(i).call(this);if(flag(this,"lockSsfi",e),void 0!==t)return t;var n=new Assertion;return transferFlags(this,n),n}),"overwritingPropertyGetter"),configurable:!0})}function overwriteMethod(e,t,o){var n=e[t],i=__name((function(){throw new Error(t+" is not a function")}),"_super");n&&"function"==typeof n&&(i=n);var s=__name((function(){flag(this,"lockSsfi")||flag(this,"ssfi",s);var e=flag(this,"lockSsfi");flag(this,"lockSsfi",!0);var t=o(i).apply(this,arguments);if(flag(this,"lockSsfi",e),void 0!==t)return t;var n=new Assertion;return transferFlags(this,n),n}),"overwritingMethodWrapper");addLengthGuard(s,t,!1),e[t]=proxify(s,t)}__name(proxify,"proxify"),__name(stringDistanceCapped,"stringDistanceCapped"),__name(addMethod,"addMethod"),__name(overwriteProperty,"overwriteProperty"),__name(overwriteMethod,"overwriteMethod");var ye="function"==typeof Object.setPrototypeOf,me=__name((function(){}),"testFn"),qe=Object.getOwnPropertyNames(me).filter((function(e){var t=Object.getOwnPropertyDescriptor(me,e);return"object"!=typeof t||!t.configurable})),we=Function.prototype.call,Ae=Function.prototype.apply;function addChainableMethod(e,t,o,n){"function"!=typeof n&&(n=__name((function(){}),"chainingBehavior"));var i={method:o,chainingBehavior:n};e.__methods||(e.__methods={}),e.__methods[t]=i,Object.defineProperty(e,t,{get:__name((function chainableMethodGetter(){i.chainingBehavior.call(this);var o=__name((function(){flag(this,"lockSsfi")||flag(this,"ssfi",o);var e=i.method.apply(this,arguments);if(void 0!==e)return e;var t=new Assertion;return transferFlags(this,t),t}),"chainableMethodWrapper");if(addLengthGuard(o,t,!0),ye){var n=Object.create(this);n.call=we,n.apply=Ae,Object.setPrototypeOf(o,n)}else{Object.getOwnPropertyNames(e).forEach((function(t){if(-1===qe.indexOf(t)){var n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(o,t,n)}}))}return transferFlags(this,o),proxify(o)}),"chainableMethodGetter"),configurable:!0})}function overwriteChainableMethod(e,t,o,n){var i=e.__methods[t],s=i.chainingBehavior;i.chainingBehavior=__name((function overwritingChainableMethodGetter(){var e=n(s).call(this);if(void 0!==e)return e;var t=new Assertion;return transferFlags(this,t),t}),"overwritingChainableMethodGetter");var r=i.method;i.method=__name((function overwritingChainableMethodWrapper(){var e=o(r).apply(this,arguments);if(void 0!==e)return e;var t=new Assertion;return transferFlags(this,t),t}),"overwritingChainableMethodWrapper")}function compareByInspect(e,t){return inspect2(e)<inspect2(t)?-1:1}function getOwnEnumerablePropertySymbols(e){return"function"!=typeof Object.getOwnPropertySymbols?[]:Object.getOwnPropertySymbols(e).filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))}function getOwnEnumerableProperties(e){return Object.keys(e).concat(getOwnEnumerablePropertySymbols(e))}function _isNaN$1(e){return e!=e}__name(addChainableMethod,"addChainableMethod"),__name(overwriteChainableMethod,"overwriteChainableMethod"),__name(compareByInspect,"compareByInspect"),__name(getOwnEnumerablePropertySymbols,"getOwnEnumerablePropertySymbols"),__name(getOwnEnumerableProperties,"getOwnEnumerableProperties"),__name(_isNaN$1,"_isNaN");var Ce=Number.isNaN||_isNaN$1;function isObjectType(e){var t=type(e);return-1!==["Array","Object","Function"].indexOf(t)}function getOperator(e,t){var o=flag(e,"operator"),n=flag(e,"negate"),i=t[3],s=n?t[2]:t[1];if(o)return o;if("function"==typeof s&&(s=s()),(s=s||"")&&!/\shave\s/.test(s)){var r=isObjectType(i);return/\snot\s/.test(s)?r?"notDeepStrictEqual":"notStrictEqual":r?"deepStrictEqual":"strictEqual"}}function getName(e){return e.name}function isRegExp2(e){return"[object RegExp]"===Object.prototype.toString.call(e)}__name(isObjectType,"isObjectType"),__name(getOperator,"getOperator"),__name(getName,"getName"),__name(isRegExp2,"isRegExp");var{flag:Ee}=H;["to","be","been","is","and","has","have","with","that","which","at","of","same","but","does","still","also"].forEach((function(e){Assertion.addProperty(e)})),Assertion.addProperty("not",(function(){Ee(this,"negate",!0)})),Assertion.addProperty("deep",(function(){Ee(this,"deep",!0)})),Assertion.addProperty("nested",(function(){Ee(this,"nested",!0)})),Assertion.addProperty("own",(function(){Ee(this,"own",!0)})),Assertion.addProperty("ordered",(function(){Ee(this,"ordered",!0)})),Assertion.addProperty("any",(function(){Ee(this,"any",!0),Ee(this,"all",!1)})),Assertion.addProperty("all",(function(){Ee(this,"all",!0),Ee(this,"any",!1)}));var Se={function:["function","asyncfunction","generatorfunction","asyncgeneratorfunction"],asyncfunction:["asyncfunction","asyncgeneratorfunction"],generatorfunction:["generatorfunction","asyncgeneratorfunction"],asyncgeneratorfunction:["asyncgeneratorfunction"]};function an(e,t){t&&Ee(this,"message",t),e=e.toLowerCase();var o=Ee(this,"object"),n=~["a","e","i","o","u"].indexOf(e.charAt(0))?"an ":"a ";const i=type(o).toLowerCase();Se.function.includes(e)?this.assert(Se[e].includes(i),"expected #{this} to be "+n+e,"expected #{this} not to be "+n+e):this.assert(e===i,"expected #{this} to be "+n+e,"expected #{this} not to be "+n+e)}function SameValueZero(e,t){return Ce(e)&&Ce(t)||e===t}function includeChainingBehavior(){Ee(this,"contains",!0)}function include(e,t){t&&Ee(this,"message",t);var o=Ee(this,"object"),n=type(o).toLowerCase(),i=Ee(this,"message"),s=Ee(this,"negate"),r=Ee(this,"ssfi"),a=Ee(this,"deep"),l=a?"deep ":"",c=a?Ee(this,"eql"):SameValueZero;i=i?i+": ":"";var p=!1;switch(n){case"string":p=-1!==o.indexOf(e);break;case"weakset":if(a)throw new W(i+"unable to use .deep.include with WeakSet",void 0,r);p=o.has(e);break;case"map":o.forEach((function(t){p=p||c(t,e)}));break;case"set":a?o.forEach((function(t){p=p||c(t,e)})):p=o.has(e);break;case"array":p=a?o.some((function(t){return c(t,e)})):-1!==o.indexOf(e);break;default:if(e!==Object(e))throw new W(i+"the given combination of arguments ("+n+" and "+type(e).toLowerCase()+") is invalid for this assertion. You can use an array, a map, an object, a set, a string, or a weakset instead of a "+type(e).toLowerCase(),void 0,r);var u=Object.keys(e),d=null,h=0;if(u.forEach((function(t){var n=new Assertion(o);if(transferFlags(this,n,!0),Ee(n,"lockSsfi",!0),s&&1!==u.length)try{n.property(t,e[t])}catch(e){if(!G.compatibleConstructor(e,W))throw e;null===d&&(d=e),h++}else n.property(t,e[t])}),this),s&&u.length>1&&h===u.length)throw d;return}this.assert(p,"expected #{this} to "+l+"include "+inspect2(e),"expected #{this} to not "+l+"include "+inspect2(e))}function assertExist(){var e=Ee(this,"object");this.assert(null!=e,"expected #{this} to exist","expected #{this} to not exist")}function checkArguments(){var e=type(Ee(this,"object"));this.assert("Arguments"===e,"expected #{this} to be arguments but got "+e,"expected #{this} to not be arguments")}function assertEqual(e,t){t&&Ee(this,"message",t);var o=Ee(this,"object");if(Ee(this,"deep")){var n=Ee(this,"lockSsfi");Ee(this,"lockSsfi",!0),this.eql(e),Ee(this,"lockSsfi",n)}else this.assert(e===o,"expected #{this} to equal #{exp}","expected #{this} to not equal #{exp}",e,this._obj,!0)}function assertEql(e,t){t&&Ee(this,"message",t);var o=Ee(this,"eql");this.assert(o(e,Ee(this,"object")),"expected #{this} to deeply equal #{exp}","expected #{this} to not deeply equal #{exp}",e,this._obj,!0)}function assertAbove(e,t){t&&Ee(this,"message",t);var o,n=Ee(this,"object"),i=Ee(this,"doLength"),s=Ee(this,"message"),r=s?s+": ":"",a=Ee(this,"ssfi"),l=type(n).toLowerCase(),c=type(e).toLowerCase(),p=!0;if(i&&"map"!==l&&"set"!==l&&new Assertion(n,s,a,!0).to.have.property("length"),i||"date"!==l||"date"===c)if("number"===c||!i&&"number"!==l)if(i||"date"===l||"number"===l)p=!1;else{o=r+"expected "+("string"===l?"'"+n+"'":n)+" to be a number or a date"}else o=r+"the argument to above must be a number";else o=r+"the argument to above must be a date";if(p)throw new W(o,void 0,a);if(i){var u,d="length";"map"===l||"set"===l?(d="size",u=n.size):u=n.length,this.assert(u>e,"expected #{this} to have a "+d+" above #{exp} but got #{act}","expected #{this} to not have a "+d+" above #{exp}",e,u)}else this.assert(n>e,"expected #{this} to be above #{exp}","expected #{this} to be at most #{exp}",e)}function assertLeast(e,t){t&&Ee(this,"message",t);var o,n=Ee(this,"object"),i=Ee(this,"doLength"),s=Ee(this,"message"),r=s?s+": ":"",a=Ee(this,"ssfi"),l=type(n).toLowerCase(),c=type(e).toLowerCase(),p=!0;if(i&&"map"!==l&&"set"!==l&&new Assertion(n,s,a,!0).to.have.property("length"),i||"date"!==l||"date"===c)if("number"===c||!i&&"number"!==l)if(i||"date"===l||"number"===l)p=!1;else{o=r+"expected "+("string"===l?"'"+n+"'":n)+" to be a number or a date"}else o=r+"the argument to least must be a number";else o=r+"the argument to least must be a date";if(p)throw new W(o,void 0,a);if(i){var u,d="length";"map"===l||"set"===l?(d="size",u=n.size):u=n.length,this.assert(u>=e,"expected #{this} to have a "+d+" at least #{exp} but got #{act}","expected #{this} to have a "+d+" below #{exp}",e,u)}else this.assert(n>=e,"expected #{this} to be at least #{exp}","expected #{this} to be below #{exp}",e)}function assertBelow(e,t){t&&Ee(this,"message",t);var o,n=Ee(this,"object"),i=Ee(this,"doLength"),s=Ee(this,"message"),r=s?s+": ":"",a=Ee(this,"ssfi"),l=type(n).toLowerCase(),c=type(e).toLowerCase(),p=!0;if(i&&"map"!==l&&"set"!==l&&new Assertion(n,s,a,!0).to.have.property("length"),i||"date"!==l||"date"===c)if("number"===c||!i&&"number"!==l)if(i||"date"===l||"number"===l)p=!1;else{o=r+"expected "+("string"===l?"'"+n+"'":n)+" to be a number or a date"}else o=r+"the argument to below must be a number";else o=r+"the argument to below must be a date";if(p)throw new W(o,void 0,a);if(i){var u,d="length";"map"===l||"set"===l?(d="size",u=n.size):u=n.length,this.assert(u<e,"expected #{this} to have a "+d+" below #{exp} but got #{act}","expected #{this} to not have a "+d+" below #{exp}",e,u)}else this.assert(n<e,"expected #{this} to be below #{exp}","expected #{this} to be at least #{exp}",e)}function assertMost(e,t){t&&Ee(this,"message",t);var o,n=Ee(this,"object"),i=Ee(this,"doLength"),s=Ee(this,"message"),r=s?s+": ":"",a=Ee(this,"ssfi"),l=type(n).toLowerCase(),c=type(e).toLowerCase(),p=!0;if(i&&"map"!==l&&"set"!==l&&new Assertion(n,s,a,!0).to.have.property("length"),i||"date"!==l||"date"===c)if("number"===c||!i&&"number"!==l)if(i||"date"===l||"number"===l)p=!1;else{o=r+"expected "+("string"===l?"'"+n+"'":n)+" to be a number or a date"}else o=r+"the argument to most must be a number";else o=r+"the argument to most must be a date";if(p)throw new W(o,void 0,a);if(i){var u,d="length";"map"===l||"set"===l?(d="size",u=n.size):u=n.length,this.assert(u<=e,"expected #{this} to have a "+d+" at most #{exp} but got #{act}","expected #{this} to have a "+d+" above #{exp}",e,u)}else this.assert(n<=e,"expected #{this} to be at most #{exp}","expected #{this} to be above #{exp}",e)}function assertInstanceOf(e,t){t&&Ee(this,"message",t);var o=Ee(this,"object"),n=Ee(this,"ssfi"),i=Ee(this,"message");try{var s=o instanceof e}catch(t){if(t instanceof TypeError)throw new W((i=i?i+": ":"")+"The instanceof assertion needs a constructor but "+type(e)+" was given.",void 0,n);throw t}var r=getName(e);null==r&&(r="an unnamed constructor"),this.assert(s,"expected #{this} to be an instance of "+r,"expected #{this} to not be an instance of "+r)}function assertProperty(e,t,o){o&&Ee(this,"message",o);var n=Ee(this,"nested"),i=Ee(this,"own"),s=Ee(this,"message"),r=Ee(this,"object"),a=Ee(this,"ssfi"),l=typeof e;if(s=s?s+": ":"",n){if("string"!==l)throw new W(s+"the argument to property must be a string when using nested syntax",void 0,a)}else if("string"!==l&&"number"!==l&&"symbol"!==l)throw new W(s+"the argument to property must be a string, number, or symbol",void 0,a);if(n&&i)throw new W(s+'The "nested" and "own" flags cannot be combined.',void 0,a);if(null==r)throw new W(s+"Target cannot be null or undefined.",void 0,a);var c,p=Ee(this,"deep"),u=Ee(this,"negate"),d=n?getPathInfo(r,e):null,h=n?d.value:r[e],b=p?Ee(this,"eql"):(e,t)=>e===t,v="";p&&(v+="deep "),i&&(v+="own "),n&&(v+="nested "),v+="property ",c=i?Object.prototype.hasOwnProperty.call(r,e):n?d.exists:hasProperty(r,e),u&&1!==arguments.length||this.assert(c,"expected #{this} to have "+v+inspect2(e),"expected #{this} to not have "+v+inspect2(e)),arguments.length>1&&this.assert(c&&b(t,h),"expected #{this} to have "+v+inspect2(e)+" of #{exp}, but got #{act}","expected #{this} to not have "+v+inspect2(e)+" of #{act}",t,h),Ee(this,"object",h)}function assertOwnProperty(e,t,o){Ee(this,"own",!0),assertProperty.apply(this,arguments)}function assertOwnPropertyDescriptor(e,t,o){"string"==typeof t&&(o=t,t=null),o&&Ee(this,"message",o);var n=Ee(this,"object"),i=Object.getOwnPropertyDescriptor(Object(n),e),s=Ee(this,"eql");i&&t?this.assert(s(t,i),"expected the own property descriptor for "+inspect2(e)+" on #{this} to match "+inspect2(t)+", got "+inspect2(i),"expected the own property descriptor for "+inspect2(e)+" on #{this} to not match "+inspect2(t),t,i,!0):this.assert(i,"expected #{this} to have an own property descriptor for "+inspect2(e),"expected #{this} to not have an own property descriptor for "+inspect2(e)),Ee(this,"object",i)}function assertLengthChain(){Ee(this,"doLength",!0)}function assertLength(e,t){t&&Ee(this,"message",t);var o,n=Ee(this,"object"),i=type(n).toLowerCase(),s=Ee(this,"message"),r=Ee(this,"ssfi"),a="length";switch(i){case"map":case"set":a="size",o=n.size;break;default:new Assertion(n,s,r,!0).to.have.property("length"),o=n.length}this.assert(o==e,"expected #{this} to have a "+a+" of #{exp} but got #{act}","expected #{this} to not have a "+a+" of #{act}",e,o)}function assertMatch(e,t){t&&Ee(this,"message",t);var o=Ee(this,"object");this.assert(e.exec(o),"expected #{this} to match "+e,"expected #{this} not to match "+e)}function assertKeys(e){var t,o,n=Ee(this,"object"),i=type(n),s=type(e),r=Ee(this,"ssfi"),a=Ee(this,"deep"),l="",c=!0,p=Ee(this,"message"),u=(p=p?p+": ":"")+"when testing keys against an object or an array you must give a single Array|Object|String argument or multiple String arguments";if("Map"===i||"Set"===i)l=a?"deeply ":"",o=[],n.forEach((function(e,t){o.push(t)})),"Array"!==s&&(e=Array.prototype.slice.call(arguments));else{switch(o=getOwnEnumerableProperties(n),s){case"Array":if(arguments.length>1)throw new W(u,void 0,r);break;case"Object":if(arguments.length>1)throw new W(u,void 0,r);e=Object.keys(e);break;default:e=Array.prototype.slice.call(arguments)}e=e.map((function(e){return"symbol"==typeof e?e:String(e)}))}if(!e.length)throw new W(p+"keys required",void 0,r);var d=e.length,h=Ee(this,"any"),b=Ee(this,"all"),v=e,g=a?Ee(this,"eql"):(e,t)=>e===t;if(h||b||(b=!0),h&&(c=v.some((function(e){return o.some((function(t){return g(e,t)}))}))),b&&(c=v.every((function(e){return o.some((function(t){return g(e,t)}))})),Ee(this,"contains")||(c=c&&e.length==o.length)),d>1){var f=(e=e.map((function(e){return inspect2(e)}))).pop();b&&(t=e.join(", ")+", and "+f),h&&(t=e.join(", ")+", or "+f)}else t=inspect2(e[0]);t=(d>1?"keys ":"key ")+t,t=(Ee(this,"contains")?"contain ":"have ")+t,this.assert(c,"expected #{this} to "+l+t,"expected #{this} to not "+l+t,v.slice(0).sort(compareByInspect),o.sort(compareByInspect),!0)}function assertThrows(e,t,o){o&&Ee(this,"message",o);var n=Ee(this,"object"),i=Ee(this,"ssfi"),s=Ee(this,"message"),r=Ee(this,"negate")||!1;let a;new Assertion(n,s,i,!0).is.a("function"),(isRegExp2(e)||"string"==typeof e)&&(t=e,e=null);let l=!1;try{n()}catch(e){l=!0,a=e}var c=void 0===e&&void 0===t,p=Boolean(e&&t),u=!1,d=!1;if(c||!c&&!r){var h="an error";e instanceof Error?h="#{exp}":e&&(h=G.getConstructorName(e));let t=a;if(a instanceof Error)t=a.toString();else if("string"==typeof a)t=a;else if(a&&("object"==typeof a||"function"==typeof a))try{t=G.getConstructorName(a)}catch(e){}this.assert(l,"expected #{this} to throw "+h,"expected #{this} to not throw an error but #{act} was thrown",e&&e.toString(),t)}if(e&&a){if(e instanceof Error)G.compatibleInstance(a,e)===r&&(p&&r?u=!0:this.assert(r,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(a&&!r?" but #{act} was thrown":""),e.toString(),a.toString()));G.compatibleConstructor(a,e)===r&&(p&&r?u=!0:this.assert(r,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(a?" but #{act} was thrown":""),e instanceof Error?e.toString():e&&G.getConstructorName(e),a instanceof Error?a.toString():a&&G.getConstructorName(a)))}if(a&&null!=t){var b="including";isRegExp2(t)&&(b="matching"),G.compatibleMessage(a,t)===r&&(p&&r?d=!0:this.assert(r,"expected #{this} to throw error "+b+" #{exp} but got #{act}","expected #{this} to throw error not "+b+" #{exp}",t,G.getMessage(a)))}u&&d&&this.assert(r,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(a?" but #{act} was thrown":""),e instanceof Error?e.toString():e&&G.getConstructorName(e),a instanceof Error?a.toString():a&&G.getConstructorName(a)),Ee(this,"object",a)}function respondTo(e,t){t&&Ee(this,"message",t);var o=Ee(this,"object"),n=Ee(this,"itself"),i="function"!=typeof o||n?o[e]:o.prototype[e];this.assert("function"==typeof i,"expected #{this} to respond to "+inspect2(e),"expected #{this} to not respond to "+inspect2(e))}function satisfy(e,t){t&&Ee(this,"message",t);var o=e(Ee(this,"object"));this.assert(o,"expected #{this} to satisfy "+objDisplay(e),"expected #{this} to not satisfy"+objDisplay(e),!Ee(this,"negate"),o)}function closeTo(e,t,o){o&&Ee(this,"message",o);var n=Ee(this,"object"),i=Ee(this,"message"),s=Ee(this,"ssfi");if(new Assertion(n,i,s,!0).is.a("number"),"number"!=typeof e||"number"!=typeof t)throw new W((i=i?i+": ":"")+"the arguments to closeTo or approximately must be numbers"+(void 0===t?", and a delta is required":""),void 0,s);this.assert(Math.abs(n-e)<=t,"expected #{this} to be close to "+e+" +/- "+t,"expected #{this} not to be close to "+e+" +/- "+t)}function isSubsetOf(e,t,o,n,i){let s=Array.from(t),r=Array.from(e);if(!n){if(r.length!==s.length)return!1;s=s.slice()}return r.every((function(e,t){if(i)return o?o(e,s[t]):e===s[t];if(!o){var r=s.indexOf(e);return-1!==r&&(n||s.splice(r,1),!0)}return s.some((function(t,i){return!!o(e,t)&&(n||s.splice(i,1),!0)}))}))}function oneOf(e,t){t&&Ee(this,"message",t);var o=Ee(this,"object"),n=Ee(this,"message"),i=Ee(this,"ssfi"),s=Ee(this,"contains"),r=Ee(this,"deep"),a=Ee(this,"eql");new Assertion(e,n,i,!0).to.be.an("array"),s?this.assert(e.some((function(e){return o.indexOf(e)>-1})),"expected #{this} to contain one of #{exp}","expected #{this} to not contain one of #{exp}",e,o):r?this.assert(e.some((function(e){return a(o,e)})),"expected #{this} to deeply equal one of #{exp}","expected #{this} to deeply equal one of #{exp}",e,o):this.assert(e.indexOf(o)>-1,"expected #{this} to be one of #{exp}","expected #{this} to not be one of #{exp}",e,o)}function assertChanges(e,t,o){o&&Ee(this,"message",o);var n,i=Ee(this,"object"),s=Ee(this,"message"),r=Ee(this,"ssfi");new Assertion(i,s,r,!0).is.a("function"),t?(new Assertion(e,s,r,!0).to.have.property(t),n=e[t]):(new Assertion(e,s,r,!0).is.a("function"),n=e()),i();var a=null==t?e():e[t],l=null==t?n:"."+t;Ee(this,"deltaMsgObj",l),Ee(this,"initialDeltaValue",n),Ee(this,"finalDeltaValue",a),Ee(this,"deltaBehavior","change"),Ee(this,"realDelta",a!==n),this.assert(n!==a,"expected "+l+" to change","expected "+l+" to not change")}function assertIncreases(e,t,o){o&&Ee(this,"message",o);var n,i=Ee(this,"object"),s=Ee(this,"message"),r=Ee(this,"ssfi");new Assertion(i,s,r,!0).is.a("function"),t?(new Assertion(e,s,r,!0).to.have.property(t),n=e[t]):(new Assertion(e,s,r,!0).is.a("function"),n=e()),new Assertion(n,s,r,!0).is.a("number"),i();var a=null==t?e():e[t],l=null==t?n:"."+t;Ee(this,"deltaMsgObj",l),Ee(this,"initialDeltaValue",n),Ee(this,"finalDeltaValue",a),Ee(this,"deltaBehavior","increase"),Ee(this,"realDelta",a-n),this.assert(a-n>0,"expected "+l+" to increase","expected "+l+" to not increase")}function assertDecreases(e,t,o){o&&Ee(this,"message",o);var n,i=Ee(this,"object"),s=Ee(this,"message"),r=Ee(this,"ssfi");new Assertion(i,s,r,!0).is.a("function"),t?(new Assertion(e,s,r,!0).to.have.property(t),n=e[t]):(new Assertion(e,s,r,!0).is.a("function"),n=e()),new Assertion(n,s,r,!0).is.a("number"),i();var a=null==t?e():e[t],l=null==t?n:"."+t;Ee(this,"deltaMsgObj",l),Ee(this,"initialDeltaValue",n),Ee(this,"finalDeltaValue",a),Ee(this,"deltaBehavior","decrease"),Ee(this,"realDelta",n-a),this.assert(a-n<0,"expected "+l+" to decrease","expected "+l+" to not decrease")}function assertDelta(e,t){t&&Ee(this,"message",t);var o,n=Ee(this,"deltaMsgObj"),i=Ee(this,"initialDeltaValue"),s=Ee(this,"finalDeltaValue"),r=Ee(this,"deltaBehavior"),a=Ee(this,"realDelta");o="change"===r?Math.abs(s-i)===Math.abs(e):a===Math.abs(e),this.assert(o,"expected "+n+" to "+r+" by "+e,"expected "+n+" to not "+r+" by "+e)}function expect(e,t){return new Assertion(e,t)}__name(an,"an"),Assertion.addChainableMethod("an",an),Assertion.addChainableMethod("a",an),__name(SameValueZero,"SameValueZero"),__name(includeChainingBehavior,"includeChainingBehavior"),__name(include,"include"),Assertion.addChainableMethod("include",include,includeChainingBehavior),Assertion.addChainableMethod("contain",include,includeChainingBehavior),Assertion.addChainableMethod("contains",include,includeChainingBehavior),Assertion.addChainableMethod("includes",include,includeChainingBehavior),Assertion.addProperty("ok",(function(){this.assert(Ee(this,"object"),"expected #{this} to be truthy","expected #{this} to be falsy")})),Assertion.addProperty("true",(function(){this.assert(!0===Ee(this,"object"),"expected #{this} to be true","expected #{this} to be false",!Ee(this,"negate"))})),Assertion.addProperty("callable",(function(){const e=Ee(this,"object"),t=Ee(this,"ssfi"),o=Ee(this,"message"),n=o?`${o}: `:"",i=Ee(this,"negate"),s=i?`${n}expected ${inspect2(e)} not to be a callable function`:`${n}expected ${inspect2(e)} to be a callable function`,r=["Function","AsyncFunction","GeneratorFunction","AsyncGeneratorFunction"].includes(type(e));if(r&&i||!r&&!i)throw new W(s,void 0,t)})),Assertion.addProperty("false",(function(){this.assert(!1===Ee(this,"object"),"expected #{this} to be false","expected #{this} to be true",!!Ee(this,"negate"))})),Assertion.addProperty("null",(function(){this.assert(null===Ee(this,"object"),"expected #{this} to be null","expected #{this} not to be null")})),Assertion.addProperty("undefined",(function(){this.assert(void 0===Ee(this,"object"),"expected #{this} to be undefined","expected #{this} not to be undefined")})),Assertion.addProperty("NaN",(function(){this.assert(Ce(Ee(this,"object")),"expected #{this} to be NaN","expected #{this} not to be NaN")})),__name(assertExist,"assertExist"),Assertion.addProperty("exist",assertExist),Assertion.addProperty("exists",assertExist),Assertion.addProperty("empty",(function(){var e,t=Ee(this,"object"),o=Ee(this,"ssfi"),n=Ee(this,"message");switch(n=n?n+": ":"",type(t).toLowerCase()){case"array":case"string":e=t.length;break;case"map":case"set":e=t.size;break;case"weakmap":case"weakset":throw new W(n+".empty was passed a weak collection",void 0,o);case"function":var i=n+".empty was passed a function "+getName(t);throw new W(i.trim(),void 0,o);default:if(t!==Object(t))throw new W(n+".empty was passed non-string primitive "+inspect2(t),void 0,o);e=Object.keys(t).length}this.assert(0===e,"expected #{this} to be empty","expected #{this} not to be empty")})),__name(checkArguments,"checkArguments"),Assertion.addProperty("arguments",checkArguments),Assertion.addProperty("Arguments",checkArguments),__name(assertEqual,"assertEqual"),Assertion.addMethod("equal",assertEqual),Assertion.addMethod("equals",assertEqual),Assertion.addMethod("eq",assertEqual),__name(assertEql,"assertEql"),Assertion.addMethod("eql",assertEql),Assertion.addMethod("eqls",assertEql),__name(assertAbove,"assertAbove"),Assertion.addMethod("above",assertAbove),Assertion.addMethod("gt",assertAbove),Assertion.addMethod("greaterThan",assertAbove),__name(assertLeast,"assertLeast"),Assertion.addMethod("least",assertLeast),Assertion.addMethod("gte",assertLeast),Assertion.addMethod("greaterThanOrEqual",assertLeast),__name(assertBelow,"assertBelow"),Assertion.addMethod("below",assertBelow),Assertion.addMethod("lt",assertBelow),Assertion.addMethod("lessThan",assertBelow),__name(assertMost,"assertMost"),Assertion.addMethod("most",assertMost),Assertion.addMethod("lte",assertMost),Assertion.addMethod("lessThanOrEqual",assertMost),Assertion.addMethod("within",(function(e,t,o){o&&Ee(this,"message",o);var n,i=Ee(this,"object"),s=Ee(this,"doLength"),r=Ee(this,"message"),a=r?r+": ":"",l=Ee(this,"ssfi"),c=type(i).toLowerCase(),p=type(e).toLowerCase(),u=type(t).toLowerCase(),d=!0,h="date"===p&&"date"===u?e.toISOString()+".."+t.toISOString():e+".."+t;if(s&&"map"!==c&&"set"!==c&&new Assertion(i,r,l,!0).to.have.property("length"),s||"date"!==c||"date"===p&&"date"===u)if("number"===p&&"number"===u||!s&&"number"!==c)if(s||"date"===c||"number"===c)d=!1;else{n=a+"expected "+("string"===c?"'"+i+"'":i)+" to be a number or a date"}else n=a+"the arguments to within must be numbers";else n=a+"the arguments to within must be dates";if(d)throw new W(n,void 0,l);if(s){var b,v="length";"map"===c||"set"===c?(v="size",b=i.size):b=i.length,this.assert(b>=e&&b<=t,"expected #{this} to have a "+v+" within "+h,"expected #{this} to not have a "+v+" within "+h)}else this.assert(i>=e&&i<=t,"expected #{this} to be within "+h,"expected #{this} to not be within "+h)})),__name(assertInstanceOf,"assertInstanceOf"),Assertion.addMethod("instanceof",assertInstanceOf),Assertion.addMethod("instanceOf",assertInstanceOf),__name(assertProperty,"assertProperty"),Assertion.addMethod("property",assertProperty),__name(assertOwnProperty,"assertOwnProperty"),Assertion.addMethod("ownProperty",assertOwnProperty),Assertion.addMethod("haveOwnProperty",assertOwnProperty),__name(assertOwnPropertyDescriptor,"assertOwnPropertyDescriptor"),Assertion.addMethod("ownPropertyDescriptor",assertOwnPropertyDescriptor),Assertion.addMethod("haveOwnPropertyDescriptor",assertOwnPropertyDescriptor),__name(assertLengthChain,"assertLengthChain"),__name(assertLength,"assertLength"),Assertion.addChainableMethod("length",assertLength,assertLengthChain),Assertion.addChainableMethod("lengthOf",assertLength,assertLengthChain),__name(assertMatch,"assertMatch"),Assertion.addMethod("match",assertMatch),Assertion.addMethod("matches",assertMatch),Assertion.addMethod("string",(function(e,t){t&&Ee(this,"message",t);var o=Ee(this,"object");new Assertion(o,Ee(this,"message"),Ee(this,"ssfi"),!0).is.a("string"),this.assert(~o.indexOf(e),"expected #{this} to contain "+inspect2(e),"expected #{this} to not contain "+inspect2(e))})),__name(assertKeys,"assertKeys"),Assertion.addMethod("keys",assertKeys),Assertion.addMethod("key",assertKeys),__name(assertThrows,"assertThrows"),Assertion.addMethod("throw",assertThrows),Assertion.addMethod("throws",assertThrows),Assertion.addMethod("Throw",assertThrows),__name(respondTo,"respondTo"),Assertion.addMethod("respondTo",respondTo),Assertion.addMethod("respondsTo",respondTo),Assertion.addProperty("itself",(function(){Ee(this,"itself",!0)})),__name(satisfy,"satisfy"),Assertion.addMethod("satisfy",satisfy),Assertion.addMethod("satisfies",satisfy),__name(closeTo,"closeTo"),Assertion.addMethod("closeTo",closeTo),Assertion.addMethod("approximately",closeTo),__name(isSubsetOf,"isSubsetOf"),Assertion.addMethod("members",(function(e,t){t&&Ee(this,"message",t);var o=Ee(this,"object"),n=Ee(this,"message"),i=Ee(this,"ssfi");new Assertion(o,n,i,!0).to.be.iterable,new Assertion(e,n,i,!0).to.be.iterable;var s,r,a,l=Ee(this,"contains"),c=Ee(this,"ordered");l?(r="expected #{this} to be "+(s=c?"an ordered superset":"a superset")+" of #{exp}",a="expected #{this} to not be "+s+" of #{exp}"):(r="expected #{this} to have the same "+(s=c?"ordered members":"members")+" as #{exp}",a="expected #{this} to not have the same "+s+" as #{exp}");var p=Ee(this,"deep")?Ee(this,"eql"):void 0;this.assert(isSubsetOf(e,o,p,l,c),r,a,e,o,!0)})),Assertion.addProperty("iterable",(function(e){e&&Ee(this,"message",e);var t=Ee(this,"object");this.assert(null!=t&&t[Symbol.iterator],"expected #{this} to be an iterable","expected #{this} to not be an iterable",t)})),__name(oneOf,"oneOf"),Assertion.addMethod("oneOf",oneOf),__name(assertChanges,"assertChanges"),Assertion.addMethod("change",assertChanges),Assertion.addMethod("changes",assertChanges),__name(assertIncreases,"assertIncreases"),Assertion.addMethod("increase",assertIncreases),Assertion.addMethod("increases",assertIncreases),__name(assertDecreases,"assertDecreases"),Assertion.addMethod("decrease",assertDecreases),Assertion.addMethod("decreases",assertDecreases),__name(assertDelta,"assertDelta"),Assertion.addMethod("by",assertDelta),Assertion.addProperty("extensible",(function(){var e=Ee(this,"object"),t=e===Object(e)&&Object.isExtensible(e);this.assert(t,"expected #{this} to be extensible","expected #{this} to not be extensible")})),Assertion.addProperty("sealed",(function(){var e=Ee(this,"object"),t=e!==Object(e)||Object.isSealed(e);this.assert(t,"expected #{this} to be sealed","expected #{this} to not be sealed")})),Assertion.addProperty("frozen",(function(){var e=Ee(this,"object"),t=e!==Object(e)||Object.isFrozen(e);this.assert(t,"expected #{this} to be frozen","expected #{this} to not be frozen")})),Assertion.addProperty("finite",(function(e){var t=Ee(this,"object");this.assert("number"==typeof t&&isFinite(t),"expected #{this} to be a finite number","expected #{this} to not be a finite number")})),__name(expect,"expect"),expect.fail=function(e,t,o,n){throw arguments.length<2&&(o=e,e=void 0),new W(o=o||"expect.fail()",{actual:e,expected:t,operator:n},expect.fail)};var Pe={};function loadShould(){function shouldGetter(){return this instanceof String||this instanceof Number||this instanceof Boolean||"function"==typeof Symbol&&this instanceof Symbol||"function"==typeof BigInt&&this instanceof BigInt?new Assertion(this.valueOf(),null,shouldGetter):new Assertion(this,null,shouldGetter)}function shouldSetter(e){Object.defineProperty(this,"should",{value:e,enumerable:!0,configurable:!0,writable:!0})}__name(shouldGetter,"shouldGetter"),__name(shouldSetter,"shouldSetter"),Object.defineProperty(Object.prototype,"should",{set:shouldSetter,get:shouldGetter,configurable:!0});var e={fail:function(t,o,n,i){throw arguments.length<2&&(n=t,t=void 0),new W(n=n||"should.fail()",{actual:t,expected:o,operator:i},e.fail)},equal:function(e,t,o){new Assertion(e,o).to.equal(t)},Throw:function(e,t,o,n){new Assertion(e,n).to.Throw(t,o)},exist:function(e,t){new Assertion(e,t).to.exist},not:{}};return e.not.equal=function(e,t,o){new Assertion(e,o).to.not.equal(t)},e.not.Throw=function(e,t,o,n){new Assertion(e,n).to.not.Throw(t,o)},e.not.exist=function(e,t){new Assertion(e,t).to.not.exist},e.throw=e.Throw,e.not.throw=e.not.Throw,e}__export(Pe,{Should:()=>Oe,should:()=>Te}),__name(loadShould,"loadShould");var Te=loadShould,Oe=loadShould;function assert(e,t){new Assertion(null,null,assert,!0).assert(e,t,"[ negation message unavailable ]")}__name(assert,"assert"),assert.fail=function(e,t,o,n){throw arguments.length<2&&(o=e,e=void 0),new W(o=o||"assert.fail()",{actual:e,expected:t,operator:n},assert.fail)},assert.isOk=function(e,t){new Assertion(e,t,assert.isOk,!0).is.ok},assert.isNotOk=function(e,t){new Assertion(e,t,assert.isNotOk,!0).is.not.ok},assert.equal=function(e,t,o){var n=new Assertion(e,o,assert.equal,!0);n.assert(t==flag(n,"object"),"expected #{this} to equal #{exp}","expected #{this} to not equal #{act}",t,e,!0)},assert.notEqual=function(e,t,o){var n=new Assertion(e,o,assert.notEqual,!0);n.assert(t!=flag(n,"object"),"expected #{this} to not equal #{exp}","expected #{this} to equal #{act}",t,e,!0)},assert.strictEqual=function(e,t,o){new Assertion(e,o,assert.strictEqual,!0).to.equal(t)},assert.notStrictEqual=function(e,t,o){new Assertion(e,o,assert.notStrictEqual,!0).to.not.equal(t)},assert.deepEqual=assert.deepStrictEqual=function(e,t,o){new Assertion(e,o,assert.deepEqual,!0).to.eql(t)},assert.notDeepEqual=function(e,t,o){new Assertion(e,o,assert.notDeepEqual,!0).to.not.eql(t)},assert.isAbove=function(e,t,o){new Assertion(e,o,assert.isAbove,!0).to.be.above(t)},assert.isAtLeast=function(e,t,o){new Assertion(e,o,assert.isAtLeast,!0).to.be.least(t)},assert.isBelow=function(e,t,o){new Assertion(e,o,assert.isBelow,!0).to.be.below(t)},assert.isAtMost=function(e,t,o){new Assertion(e,o,assert.isAtMost,!0).to.be.most(t)},assert.isTrue=function(e,t){new Assertion(e,t,assert.isTrue,!0).is.true},assert.isNotTrue=function(e,t){new Assertion(e,t,assert.isNotTrue,!0).to.not.equal(!0)},assert.isFalse=function(e,t){new Assertion(e,t,assert.isFalse,!0).is.false},assert.isNotFalse=function(e,t){new Assertion(e,t,assert.isNotFalse,!0).to.not.equal(!1)},assert.isNull=function(e,t){new Assertion(e,t,assert.isNull,!0).to.equal(null)},assert.isNotNull=function(e,t){new Assertion(e,t,assert.isNotNull,!0).to.not.equal(null)},assert.isNaN=function(e,t){new Assertion(e,t,assert.isNaN,!0).to.be.NaN},assert.isNotNaN=function(e,t){new Assertion(e,t,assert.isNotNaN,!0).not.to.be.NaN},assert.exists=function(e,t){new Assertion(e,t,assert.exists,!0).to.exist},assert.notExists=function(e,t){new Assertion(e,t,assert.notExists,!0).to.not.exist},assert.isUndefined=function(e,t){new Assertion(e,t,assert.isUndefined,!0).to.equal(void 0)},assert.isDefined=function(e,t){new Assertion(e,t,assert.isDefined,!0).to.not.equal(void 0)},assert.isCallable=function(e,t){new Assertion(e,t,assert.isCallable,!0).is.callable},assert.isNotCallable=function(e,t){new Assertion(e,t,assert.isNotCallable,!0).is.not.callable},assert.isObject=function(e,t){new Assertion(e,t,assert.isObject,!0).to.be.a("object")},assert.isNotObject=function(e,t){new Assertion(e,t,assert.isNotObject,!0).to.not.be.a("object")},assert.isArray=function(e,t){new Assertion(e,t,assert.isArray,!0).to.be.an("array")},assert.isNotArray=function(e,t){new Assertion(e,t,assert.isNotArray,!0).to.not.be.an("array")},assert.isString=function(e,t){new Assertion(e,t,assert.isString,!0).to.be.a("string")},assert.isNotString=function(e,t){new Assertion(e,t,assert.isNotString,!0).to.not.be.a("string")},assert.isNumber=function(e,t){new Assertion(e,t,assert.isNumber,!0).to.be.a("number")},assert.isNotNumber=function(e,t){new Assertion(e,t,assert.isNotNumber,!0).to.not.be.a("number")},assert.isFinite=function(e,t){new Assertion(e,t,assert.isFinite,!0).to.be.finite},assert.isBoolean=function(e,t){new Assertion(e,t,assert.isBoolean,!0).to.be.a("boolean")},assert.isNotBoolean=function(e,t){new Assertion(e,t,assert.isNotBoolean,!0).to.not.be.a("boolean")},assert.typeOf=function(e,t,o){new Assertion(e,o,assert.typeOf,!0).to.be.a(t)},assert.notTypeOf=function(e,t,o){new Assertion(e,o,assert.notTypeOf,!0).to.not.be.a(t)},assert.instanceOf=function(e,t,o){new Assertion(e,o,assert.instanceOf,!0).to.be.instanceOf(t)},assert.notInstanceOf=function(e,t,o){new Assertion(e,o,assert.notInstanceOf,!0).to.not.be.instanceOf(t)},assert.include=function(e,t,o){new Assertion(e,o,assert.include,!0).include(t)},assert.notInclude=function(e,t,o){new Assertion(e,o,assert.notInclude,!0).not.include(t)},assert.deepInclude=function(e,t,o){new Assertion(e,o,assert.deepInclude,!0).deep.include(t)},assert.notDeepInclude=function(e,t,o){new Assertion(e,o,assert.notDeepInclude,!0).not.deep.include(t)},assert.nestedInclude=function(e,t,o){new Assertion(e,o,assert.nestedInclude,!0).nested.include(t)},assert.notNestedInclude=function(e,t,o){new Assertion(e,o,assert.notNestedInclude,!0).not.nested.include(t)},assert.deepNestedInclude=function(e,t,o){new Assertion(e,o,assert.deepNestedInclude,!0).deep.nested.include(t)},assert.notDeepNestedInclude=function(e,t,o){new Assertion(e,o,assert.notDeepNestedInclude,!0).not.deep.nested.include(t)},assert.ownInclude=function(e,t,o){new Assertion(e,o,assert.ownInclude,!0).own.include(t)},assert.notOwnInclude=function(e,t,o){new Assertion(e,o,assert.notOwnInclude,!0).not.own.include(t)},assert.deepOwnInclude=function(e,t,o){new Assertion(e,o,assert.deepOwnInclude,!0).deep.own.include(t)},assert.notDeepOwnInclude=function(e,t,o){new Assertion(e,o,assert.notDeepOwnInclude,!0).not.deep.own.include(t)},assert.match=function(e,t,o){new Assertion(e,o,assert.match,!0).to.match(t)},assert.notMatch=function(e,t,o){new Assertion(e,o,assert.notMatch,!0).to.not.match(t)},assert.property=function(e,t,o){new Assertion(e,o,assert.property,!0).to.have.property(t)},assert.notProperty=function(e,t,o){new Assertion(e,o,assert.notProperty,!0).to.not.have.property(t)},assert.propertyVal=function(e,t,o,n){new Assertion(e,n,assert.propertyVal,!0).to.have.property(t,o)},assert.notPropertyVal=function(e,t,o,n){new Assertion(e,n,assert.notPropertyVal,!0).to.not.have.property(t,o)},assert.deepPropertyVal=function(e,t,o,n){new Assertion(e,n,assert.deepPropertyVal,!0).to.have.deep.property(t,o)},assert.notDeepPropertyVal=function(e,t,o,n){new Assertion(e,n,assert.notDeepPropertyVal,!0).to.not.have.deep.property(t,o)},assert.ownProperty=function(e,t,o){new Assertion(e,o,assert.ownProperty,!0).to.have.own.property(t)},assert.notOwnProperty=function(e,t,o){new Assertion(e,o,assert.notOwnProperty,!0).to.not.have.own.property(t)},assert.ownPropertyVal=function(e,t,o,n){new Assertion(e,n,assert.ownPropertyVal,!0).to.have.own.property(t,o)},assert.notOwnPropertyVal=function(e,t,o,n){new Assertion(e,n,assert.notOwnPropertyVal,!0).to.not.have.own.property(t,o)},assert.deepOwnPropertyVal=function(e,t,o,n){new Assertion(e,n,assert.deepOwnPropertyVal,!0).to.have.deep.own.property(t,o)},assert.notDeepOwnPropertyVal=function(e,t,o,n){new Assertion(e,n,assert.notDeepOwnPropertyVal,!0).to.not.have.deep.own.property(t,o)},assert.nestedProperty=function(e,t,o){new Assertion(e,o,assert.nestedProperty,!0).to.have.nested.property(t)},assert.notNestedProperty=function(e,t,o){new Assertion(e,o,assert.notNestedProperty,!0).to.not.have.nested.property(t)},assert.nestedPropertyVal=function(e,t,o,n){new Assertion(e,n,assert.nestedPropertyVal,!0).to.have.nested.property(t,o)},assert.notNestedPropertyVal=function(e,t,o,n){new Assertion(e,n,assert.notNestedPropertyVal,!0).to.not.have.nested.property(t,o)},assert.deepNestedPropertyVal=function(e,t,o,n){new Assertion(e,n,assert.deepNestedPropertyVal,!0).to.have.deep.nested.property(t,o)},assert.notDeepNestedPropertyVal=function(e,t,o,n){new Assertion(e,n,assert.notDeepNestedPropertyVal,!0).to.not.have.deep.nested.property(t,o)},assert.lengthOf=function(e,t,o){new Assertion(e,o,assert.lengthOf,!0).to.have.lengthOf(t)},assert.hasAnyKeys=function(e,t,o){new Assertion(e,o,assert.hasAnyKeys,!0).to.have.any.keys(t)},assert.hasAllKeys=function(e,t,o){new Assertion(e,o,assert.hasAllKeys,!0).to.have.all.keys(t)},assert.containsAllKeys=function(e,t,o){new Assertion(e,o,assert.containsAllKeys,!0).to.contain.all.keys(t)},assert.doesNotHaveAnyKeys=function(e,t,o){new Assertion(e,o,assert.doesNotHaveAnyKeys,!0).to.not.have.any.keys(t)},assert.doesNotHaveAllKeys=function(e,t,o){new Assertion(e,o,assert.doesNotHaveAllKeys,!0).to.not.have.all.keys(t)},assert.hasAnyDeepKeys=function(e,t,o){new Assertion(e,o,assert.hasAnyDeepKeys,!0).to.have.any.deep.keys(t)},assert.hasAllDeepKeys=function(e,t,o){new Assertion(e,o,assert.hasAllDeepKeys,!0).to.have.all.deep.keys(t)},assert.containsAllDeepKeys=function(e,t,o){new Assertion(e,o,assert.containsAllDeepKeys,!0).to.contain.all.deep.keys(t)},assert.doesNotHaveAnyDeepKeys=function(e,t,o){new Assertion(e,o,assert.doesNotHaveAnyDeepKeys,!0).to.not.have.any.deep.keys(t)},assert.doesNotHaveAllDeepKeys=function(e,t,o){new Assertion(e,o,assert.doesNotHaveAllDeepKeys,!0).to.not.have.all.deep.keys(t)},assert.throws=function(e,t,o,n){return("string"==typeof t||t instanceof RegExp)&&(o=t,t=null),flag(new Assertion(e,n,assert.throws,!0).to.throw(t,o),"object")},assert.doesNotThrow=function(e,t,o,n){("string"==typeof t||t instanceof RegExp)&&(o=t,t=null),new Assertion(e,n,assert.doesNotThrow,!0).to.not.throw(t,o)},assert.operator=function(e,t,o,n){var i;switch(t){case"==":i=e==o;break;case"===":i=e===o;break;case">":i=e>o;break;case">=":i=e>=o;break;case"<":i=e<o;break;case"<=":i=e<=o;break;case"!=":i=e!=o;break;case"!==":i=e!==o;break;default:throw new W((n=n?n+": ":n)+'Invalid operator "'+t+'"',void 0,assert.operator)}var s=new Assertion(i,n,assert.operator,!0);s.assert(!0===flag(s,"object"),"expected "+inspect2(e)+" to be "+t+" "+inspect2(o),"expected "+inspect2(e)+" to not be "+t+" "+inspect2(o))},assert.closeTo=function(e,t,o,n){new Assertion(e,n,assert.closeTo,!0).to.be.closeTo(t,o)},assert.approximately=function(e,t,o,n){new Assertion(e,n,assert.approximately,!0).to.be.approximately(t,o)},assert.sameMembers=function(e,t,o){new Assertion(e,o,assert.sameMembers,!0).to.have.same.members(t)},assert.notSameMembers=function(e,t,o){new Assertion(e,o,assert.notSameMembers,!0).to.not.have.same.members(t)},assert.sameDeepMembers=function(e,t,o){new Assertion(e,o,assert.sameDeepMembers,!0).to.have.same.deep.members(t)},assert.notSameDeepMembers=function(e,t,o){new Assertion(e,o,assert.notSameDeepMembers,!0).to.not.have.same.deep.members(t)},assert.sameOrderedMembers=function(e,t,o){new Assertion(e,o,assert.sameOrderedMembers,!0).to.have.same.ordered.members(t)},assert.notSameOrderedMembers=function(e,t,o){new Assertion(e,o,assert.notSameOrderedMembers,!0).to.not.have.same.ordered.members(t)},assert.sameDeepOrderedMembers=function(e,t,o){new Assertion(e,o,assert.sameDeepOrderedMembers,!0).to.have.same.deep.ordered.members(t)},assert.notSameDeepOrderedMembers=function(e,t,o){new Assertion(e,o,assert.notSameDeepOrderedMembers,!0).to.not.have.same.deep.ordered.members(t)},assert.includeMembers=function(e,t,o){new Assertion(e,o,assert.includeMembers,!0).to.include.members(t)},assert.notIncludeMembers=function(e,t,o){new Assertion(e,o,assert.notIncludeMembers,!0).to.not.include.members(t)},assert.includeDeepMembers=function(e,t,o){new Assertion(e,o,assert.includeDeepMembers,!0).to.include.deep.members(t)},assert.notIncludeDeepMembers=function(e,t,o){new Assertion(e,o,assert.notIncludeDeepMembers,!0).to.not.include.deep.members(t)},assert.includeOrderedMembers=function(e,t,o){new Assertion(e,o,assert.includeOrderedMembers,!0).to.include.ordered.members(t)},assert.notIncludeOrderedMembers=function(e,t,o){new Assertion(e,o,assert.notIncludeOrderedMembers,!0).to.not.include.ordered.members(t)},assert.includeDeepOrderedMembers=function(e,t,o){new Assertion(e,o,assert.includeDeepOrderedMembers,!0).to.include.deep.ordered.members(t)},assert.notIncludeDeepOrderedMembers=function(e,t,o){new Assertion(e,o,assert.notIncludeDeepOrderedMembers,!0).to.not.include.deep.ordered.members(t)},assert.oneOf=function(e,t,o){new Assertion(e,o,assert.oneOf,!0).to.be.oneOf(t)},assert.isIterable=function(e,t){if(null==e||!e[Symbol.iterator])throw t=t?`${t} expected ${inspect2(e)} to be an iterable`:`expected ${inspect2(e)} to be an iterable`,new W(t,void 0,assert.isIterable)},assert.changes=function(e,t,o,n){3===arguments.length&&"function"==typeof t&&(n=o,o=null),new Assertion(e,n,assert.changes,!0).to.change(t,o)},assert.changesBy=function(e,t,o,n,i){if(4===arguments.length&&"function"==typeof t){var s=n;n=o,i=s}else 3===arguments.length&&(n=o,o=null);new Assertion(e,i,assert.changesBy,!0).to.change(t,o).by(n)},assert.doesNotChange=function(e,t,o,n){return 3===arguments.length&&"function"==typeof t&&(n=o,o=null),new Assertion(e,n,assert.doesNotChange,!0).to.not.change(t,o)},assert.changesButNotBy=function(e,t,o,n,i){if(4===arguments.length&&"function"==typeof t){var s=n;n=o,i=s}else 3===arguments.length&&(n=o,o=null);new Assertion(e,i,assert.changesButNotBy,!0).to.change(t,o).but.not.by(n)},assert.increases=function(e,t,o,n){return 3===arguments.length&&"function"==typeof t&&(n=o,o=null),new Assertion(e,n,assert.increases,!0).to.increase(t,o)},assert.increasesBy=function(e,t,o,n,i){if(4===arguments.length&&"function"==typeof t){var s=n;n=o,i=s}else 3===arguments.length&&(n=o,o=null);new Assertion(e,i,assert.increasesBy,!0).to.increase(t,o).by(n)},assert.doesNotIncrease=function(e,t,o,n){return 3===arguments.length&&"function"==typeof t&&(n=o,o=null),new Assertion(e,n,assert.doesNotIncrease,!0).to.not.increase(t,o)},assert.increasesButNotBy=function(e,t,o,n,i){if(4===arguments.length&&"function"==typeof t){var s=n;n=o,i=s}else 3===arguments.length&&(n=o,o=null);new Assertion(e,i,assert.increasesButNotBy,!0).to.increase(t,o).but.not.by(n)},assert.decreases=function(e,t,o,n){return 3===arguments.length&&"function"==typeof t&&(n=o,o=null),new Assertion(e,n,assert.decreases,!0).to.decrease(t,o)},assert.decreasesBy=function(e,t,o,n,i){if(4===arguments.length&&"function"==typeof t){var s=n;n=o,i=s}else 3===arguments.length&&(n=o,o=null);new Assertion(e,i,assert.decreasesBy,!0).to.decrease(t,o).by(n)},assert.doesNotDecrease=function(e,t,o,n){return 3===arguments.length&&"function"==typeof t&&(n=o,o=null),new Assertion(e,n,assert.doesNotDecrease,!0).to.not.decrease(t,o)},assert.doesNotDecreaseBy=function(e,t,o,n,i){if(4===arguments.length&&"function"==typeof t){var s=n;n=o,i=s}else 3===arguments.length&&(n=o,o=null);return new Assertion(e,i,assert.doesNotDecreaseBy,!0).to.not.decrease(t,o).by(n)},assert.decreasesButNotBy=function(e,t,o,n,i){if(4===arguments.length&&"function"==typeof t){var s=n;n=o,i=s}else 3===arguments.length&&(n=o,o=null);new Assertion(e,i,assert.decreasesButNotBy,!0).to.decrease(t,o).but.not.by(n)},assert.ifError=function(e){if(e)throw e},assert.isExtensible=function(e,t){new Assertion(e,t,assert.isExtensible,!0).to.be.extensible},assert.isNotExtensible=function(e,t){new Assertion(e,t,assert.isNotExtensible,!0).to.not.be.extensible},assert.isSealed=function(e,t){new Assertion(e,t,assert.isSealed,!0).to.be.sealed},assert.isNotSealed=function(e,t){new Assertion(e,t,assert.isNotSealed,!0).to.not.be.sealed},assert.isFrozen=function(e,t){new Assertion(e,t,assert.isFrozen,!0).to.be.frozen},assert.isNotFrozen=function(e,t){new Assertion(e,t,assert.isNotFrozen,!0).to.not.be.frozen},assert.isEmpty=function(e,t){new Assertion(e,t,assert.isEmpty,!0).to.be.empty},assert.isNotEmpty=function(e,t){new Assertion(e,t,assert.isNotEmpty,!0).to.not.be.empty},__name((function alias(e,t){return assert[t]=assert[e],alias}),"alias")("isOk","ok")("isNotOk","notOk")("throws","throw")("throws","Throw")("isExtensible","extensible")("isNotExtensible","notExtensible")("isSealed","sealed")("isNotSealed","notSealed")("isFrozen","frozen")("isNotFrozen","notFrozen")("isEmpty","empty")("isNotEmpty","notEmpty")("isCallable","isFunction")("isNotCallable","isNotFunction");var Ne=[];__name((function use(e){const t={AssertionError:W,util:H,config:be,expect:expect,assert:assert,Assertion:Assertion,...Pe};return~Ne.indexOf(e)||(e(t,H),Ne.push(e)),t}),"use");
/*!
 * Chai - flag utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
/*!
 * Chai - test utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
/*!
 * Chai - expectTypes utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
/*!
 * Chai - getActual utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
/*!
 * Chai - message composition utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
/*!
 * Chai - transferFlags utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
/*!
 * chai
 * http://chaijs.com
 * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
/*!
 * Chai - isProxyEnabled helper
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
/*!
 * Chai - addProperty utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
/*!
 * Chai - addLengthGuard utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
/*!
 * Chai - getProperties utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
/*!
 * Chai - proxify utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
/*!
 * Chai - addMethod utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
/*!
 * Chai - overwriteProperty utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
/*!
 * Chai - overwriteMethod utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
/*!
 * Chai - addChainingMethod utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
/*!
 * Chai - overwriteChainableMethod utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
/*!
 * Chai - compareByInspect utility
 * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
/*!
 * Chai - getOwnEnumerablePropertySymbols utility
 * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
/*!
 * Chai - getOwnEnumerableProperties utility
 * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
/*!
 * Chai - isNaN utility
 * Copyright(c) 2012-2015 Sakthipriyan Vairamani <thechargingvolcano@gmail.com>
 * MIT Licensed
 */
/*!
 * chai
 * Copyright(c) 2011 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
/*!
 * chai
 * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
/*! Bundled license information:

deep-eql/index.js:
  (*!
   * deep-eql
   * Copyright(c) 2013 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Check to see if the MemoizeMap has recorded a result of the two operands
   *
   * @param {Mixed} leftHandOperand
   * @param {Mixed} rightHandOperand
   * @param {MemoizeMap} memoizeMap
   * @returns {Boolean|null} result
  *)
  (*!
   * Set the result of the equality into the MemoizeMap
   *
   * @param {Mixed} leftHandOperand
   * @param {Mixed} rightHandOperand
   * @param {MemoizeMap} memoizeMap
   * @param {Boolean} result
  *)
  (*!
   * Primary Export
   *)
  (*!
   * The main logic of the `deepEqual` function.
   *
   * @param {Mixed} leftHandOperand
   * @param {Mixed} rightHandOperand
   * @param {Object} [options] (optional) Additional options
   * @param {Array} [options.comparator] (optional) Override default algorithm, determining custom equality.
   * @param {Array} [options.memoize] (optional) Provide a custom memoization object which will cache the results of
      complex objects for a speed boost. By passing `false` you can disable memoization, but this will cause circular
      references to blow the stack.
   * @return {Boolean} equal match
  *)
  (*!
   * Compare two Regular Expressions for equality.
   *
   * @param {RegExp} leftHandOperand
   * @param {RegExp} rightHandOperand
   * @return {Boolean} result
   *)
  (*!
   * Compare two Sets/Maps for equality. Faster than other equality functions.
   *
   * @param {Set} leftHandOperand
   * @param {Set} rightHandOperand
   * @param {Object} [options] (Optional)
   * @return {Boolean} result
   *)
  (*!
   * Simple equality for flat iterable objects such as Arrays, TypedArrays or Node.js buffers.
   *
   * @param {Iterable} leftHandOperand
   * @param {Iterable} rightHandOperand
   * @param {Object} [options] (Optional)
   * @return {Boolean} result
   *)
  (*!
   * Simple equality for generator objects such as those returned by generator functions.
   *
   * @param {Iterable} leftHandOperand
   * @param {Iterable} rightHandOperand
   * @param {Object} [options] (Optional)
   * @return {Boolean} result
   *)
  (*!
   * Determine if the given object has an @@iterator function.
   *
   * @param {Object} target
   * @return {Boolean} `true` if the object has an @@iterator function.
   *)
  (*!
   * Gets all iterator entries from the given Object. If the Object has no @@iterator function, returns an empty array.
   * This will consume the iterator - which could have side effects depending on the @@iterator implementation.
   *
   * @param {Object} target
   * @returns {Array} an array of entries from the @@iterator function
   *)
  (*!
   * Gets all entries from a Generator. This will consume the generator - which could have side effects.
   *
   * @param {Generator} target
   * @returns {Array} an array of entries from the Generator.
   *)
  (*!
   * Gets all own and inherited enumerable keys from a target.
   *
   * @param {Object} target
   * @returns {Array} an array of own and inherited enumerable keys from the target.
   *)
  (*!
   * Determines if two objects have matching values, given a set of keys. Defers to deepEqual for the equality check of
   * each key. If any value of the given key is not equal, the function will return false (early).
   *
   * @param {Mixed} leftHandOperand
   * @param {Mixed} rightHandOperand
   * @param {Array} keys An array of keys to compare the values of leftHandOperand and rightHandOperand against
   * @param {Object} [options] (Optional)
   * @return {Boolean} result
   *)
  (*!
   * Recursively check the equality of two Objects. Once basic sameness has been established it will defer to `deepEqual`
   * for each enumerable key in the object.
   *
   * @param {Mixed} leftHandOperand
   * @param {Mixed} rightHandOperand
   * @param {Object} [options] (Optional)
   * @return {Boolean} result
   *)
  (*!
   * Returns true if the argument is a primitive.
   *
   * This intentionally returns true for all objects that can be compared by reference,
   * including functions and symbols.
   *
   * @param {Mixed} value
   * @return {Boolean} result
   *)
*/
class FakeIoNode{prop1ChangeCounter=0;prop1Change;prop2ChangeCounter=0;prop2Change;changeCounter=0;eventDispatchCounter=0;eventName;eventChange;eventRegister=[];changeRegister=[];prop1Changed(e){this.prop1Change=e,this.prop1ChangeCounter++,this.changeRegister.push("prop1Changed")}prop2Changed(e){this.prop2Change=e,this.prop2ChangeCounter++,this.changeRegister.push("prop2Changed")}dispatchEvent(e,t){this.eventDispatchCounter++,this.eventRegister.push(e),"changed"!==e&&(this.eventName=e,this.eventChange=t)}dispatchMutationEvent(){}changed(){this.changeCounter++}}class ChangeQueueTest{run(){describe("ChangeQueue",(()=>{it("Should initialize with correct default values",(()=>{const e=new FakeIoNode,t=new n(e);expect(t.node).to.be.equal(e),expect(JSON.stringify(t.changes)).to.be.equal("[]"),expect(t.changes.length).to.be.equal(0),expect(t.dispatching).to.be.equal(!1)})),it("Should dispatch change events with correct payloads",(()=>{const e=new FakeIoNode,t=new n(e);t.queue("test",1,0),t.queue("test",2,1),expect(t.changes.length).to.be.equal(1),t.dispatch(),expect(t.changes.length).to.be.equal(0),expect(e.eventName).to.be.equal("test-changed"),expect(e.eventChange?.property).to.be.equal("test"),expect(e.eventChange?.value).to.be.equal(2),expect(e.eventChange?.oldValue).to.be.equal(0),expect(e.eventDispatchCounter).to.be.equal(2),expect(e.changeCounter).to.be.equal(1),t.queue("test2",0,-1),t.queue("test3",2,1),expect(t.changes.length).to.be.equal(2),t.dispatch(),expect(t.changes.length).to.be.equal(0),expect(e.eventName).to.be.equal("test3-changed"),expect(e.eventChange?.property).to.be.equal("test3"),expect(e.eventChange?.value).to.be.equal(2),expect(e.eventChange?.oldValue).to.be.equal(1),expect(e.eventDispatchCounter).to.be.equal(5),expect(e.prop1ChangeCounter).to.be.equal(0),expect(e.changeCounter).to.be.equal(2)})),it("Should invoke handler functions with correct payloads",(()=>{const e=new FakeIoNode,t=new n(e);t.queue("prop1",1,0),t.queue("prop1",2,1),t.dispatch(),expect(e.prop1ChangeCounter).to.be.equal(1),expect(e.changeCounter).to.be.equal(1),expect(e.prop1Change?.property).to.be.equal("prop1"),expect(e.prop1Change?.value).to.be.equal(2),expect(e.prop1Change?.oldValue).to.be.equal(0)})),it("Should handle changes in first-in, first-out (FIFO) order",(()=>{const e=new FakeIoNode,t=new n(e);t.queue("prop1",1,0),t.queue("prop1",3,0),t.queue("prop2",2,0),t.dispatch(),expect(JSON.stringify(e.changeRegister)).to.be.equal('["prop1Changed","prop2Changed"]'),expect(JSON.stringify(e.eventRegister)).to.be.equal('["prop1-changed","prop2-changed","changed"]')})),it("Should skip dispatch if value is same as oldValue",(()=>{const e=new FakeIoNode,t=new n(e);t.queue("prop1",0,0),t.dispatch(),expect(e.prop1ChangeCounter).to.be.equal(0)})),it("Should dispose correctly",(()=>{const e=new FakeIoNode,t=new n(e);t.dispose(),expect(t.node).to.be.equal(void 0),expect(t.changes).to.be.equal(void 0)}))}))}}var __decorate$7=function(e,t,o,n){var i,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(r=(s<3?i(r):s>3?i(t,o,r):i(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r};const handlerFunction=()=>{};let _e=class IoNode1 extends t{handler1Count=0;handler1Detail;static get Listeners(){return{event1:"handler1"}}handler1(e){this.handler1Count++,this.handler1Detail=e.detail}};_e=__decorate$7([o],_e);let Ie=class IoNode2 extends _e{handler2Count=0;handler3Count=0;handler2Detail;handler3Detail;static get Listeners(){return{event2:["handler2",{capture:!0}]}}handler2(e){this.handler2Count++,this.handler2Detail=e.detail}handler3(e){this.handler3Count++,this.handler3Detail=e.detail}};Ie=__decorate$7([o],Ie);let je=class IoNode3 extends Ie{static get Listeners(){return{event1:"handler3",event2:[handlerFunction,{passive:!0}],event3:handlerFunction}}};je=__decorate$7([o],je);class TestDivEventDispatchElement extends HTMLElement{handler3Count=0;handler3Detail;handler3(e){this.handler3Count++,this.handler3Detail=e.detail}}window.customElements.define("test-div-event-dispatch",TestDivEventDispatchElement);class EventDispatcherTest{run(){describe("EventDispatcher",(()=>{it("Should initialize with correct values",(()=>{const e={};let t=new i(e);expect(t.node).to.be.equal(e),expect(t.protoListeners).to.be.eql({}),expect(t.propListeners).to.be.eql({}),expect(t.addedListeners).to.be.eql({}),expect(t.isEventTarget).to.be.eql(!1);const o=document.createElement("div");t=new i(o),expect(t.node).to.be.equal(o),expect(t.protoListeners).to.be.eql({}),expect(t.propListeners).to.be.eql({}),expect(t.addedListeners).to.be.eql({}),expect(t.isEventTarget).to.be.equal(!0)})),it("Should initialize listeners from ProtoChain",(()=>{let e=new _e,t=new i(e);expect(t.protoListeners).to.be.eql({event1:[[e.handler1]]}),e=new Ie,t=new i(e),expect(t.protoListeners).to.be.eql({event1:[[e.handler1]],event2:[[e.handler2,{capture:!0}]]}),e=new je,t=new i(e),expect(t.protoListeners).to.be.eql({event1:[[e.handler3]],event2:[[handlerFunction,{passive:!0}]],event3:[[handlerFunction]]})})),it("Should set property listeners correctly",(()=>{const e=new Ie,t=new i(e),handler4=()=>{},handler5=()=>{};t.applyPropListeners({"@event3":"handler3","@event4":handler4}),expect(t.propListeners).to.be.eql({event3:[[e.handler3]],event4:[[handler4]]}),t.applyPropListeners({"@event5":["handler3"],"@event6":[handler4]}),expect(t.propListeners).to.be.eql({event5:[[e.handler3]],event6:[[handler4]]}),t.applyPropListeners({"@event7":[e.handler3,{capture:!0}],"@event8":[handler5,{capture:!0}]}),expect(t.propListeners).to.be.eql({event7:[[e.handler3,{capture:!0}]],event8:[[handler5,{capture:!0}]]}),t.applyPropListeners({}),expect(t.propListeners).to.be.eql({})})),it("Should add/remove listeners correctly",(()=>{const e=new Ie,t=new i(e),listener1=()=>{},listener2=()=>{};t.addEventListener("event1",listener1),t.addEventListener("event1",listener2,{capture:!0}),expect(t.addedListeners).to.be.eql({event1:[[listener1],[listener2,{capture:!0}]]}),t.removeEventListener("event1",listener1),expect(t.addedListeners).to.be.eql({event1:[[listener2,{capture:!0}]]}),t.removeEventListener("event1"),expect(t.addedListeners).to.be.eql({})})),it("Should not add listeners if already added",(()=>{const e=new Ie,t=new i(e),listener1=()=>{},listener2=()=>{};t.addEventListener("event1",listener1),t.addEventListener("event1",listener1),t.addEventListener("event1",listener2,{capture:!0}),t.addEventListener("event1",listener2,{capture:!0}),expect(t.addedListeners).to.be.eql({event1:[[listener1],[listener2,{capture:!0}]]})})),it("Should remove correct listener",(()=>{const e=new Ie,t=new i(e),listener1=()=>{},listener2=()=>{};t.addEventListener("event1",listener1),t.addEventListener("event1",listener2,{capture:!0}),t.removeEventListener("event1",listener2),expect(t.addedListeners).to.be.eql({event1:[[listener1]]}),t.removeEventListener("event1",listener1),expect(t.addedListeners).to.be.eql({})})),it("Should dispatch added events",(()=>{const e=new Ie,t=new i(e);let o=0;const handler4=()=>{o++};let n=0;const handler5=()=>{n++};t.applyPropListeners({"@event3":"handler3","@event4":handler4}),t.addEventListener("event5",handler5),t.dispatchEvent("event1"),t.dispatchEvent("event2"),t.dispatchEvent("event3"),t.dispatchEvent("event4"),t.dispatchEvent("event5"),expect(e.handler1Count).to.be.equal(1),expect(e.handler2Count).to.be.equal(1),expect(e.handler3Count).to.be.equal(1),expect(o).to.be.equal(1),expect(n).to.be.equal(1),t.applyPropListeners({"@event4":handler4}),t.removeEventListener("event5",handler5),t.dispatchEvent("event1"),t.dispatchEvent("event2"),t.dispatchEvent("event3"),t.dispatchEvent("event4"),t.dispatchEvent("event5"),expect(e.handler1Count).to.be.equal(2),expect(e.handler2Count).to.be.equal(2),expect(e.handler3Count).to.be.equal(1),expect(o).to.be.equal(2),expect(n).to.be.equal(1)})),it("Should dispatch events with correct event detail",(()=>{const e=new Ie,t=new i(e);let o;let n;t.applyPropListeners({"@event3":"handler3","@event4":e=>{o=e.detail}}),t.addEventListener("event5",(e=>{n=e.detail})),t.dispatchEvent("event1","detail1"),t.dispatchEvent("event2","detail2"),t.dispatchEvent("event3","detail3"),t.dispatchEvent("event4","detail4"),t.dispatchEvent("event5","detail5"),expect(e.handler1Detail).to.be.equal("detail1"),expect(e.handler2Detail).to.be.equal("detail2"),expect(e.handler3Detail).to.be.equal("detail3"),expect(o).to.be.equal("detail4"),expect(n).to.be.equal("detail5")})),it("Should add/remove/dispatch events on HTML elements",(()=>{const e=document.createElement("test-div-event-dispatch"),t=new i(e);let o,n=0;let s,r=0;const handler5=e=>{r++,s=e.detail};t.applyPropListeners({"@event3":"handler3","@event4":e=>{n++,o=e.detail}}),t.addEventListener("event5",handler5),e.dispatchEvent(new CustomEvent("event3",{detail:"detail3"})),e.dispatchEvent(new CustomEvent("event4",{detail:"detail4"})),e.dispatchEvent(new CustomEvent("event5",{detail:"detail5"})),expect(e.handler3Count).to.be.equal(1),expect(n).to.be.equal(1),expect(r).to.be.equal(1),expect(e.handler3Detail).to.be.equal("detail3"),expect(o).to.be.equal("detail4"),expect(s).to.be.equal("detail5"),t.applyPropListeners({}),t.removeEventListener("event5",handler5),e.dispatchEvent(new CustomEvent("event3",{detail:"detail3i"})),e.dispatchEvent(new CustomEvent("event4",{detail:"detail4i"})),e.dispatchEvent(new CustomEvent("event5",{detail:"detail5i"})),expect(e.handler3Count).to.be.equal(1),expect(n).to.be.equal(1),expect(r).to.be.equal(1),expect(e.handler3Detail).to.be.equal("detail3"),expect(o).to.be.equal("detail4"),expect(s).to.be.equal("detail5")})),it("Should bubble events if specified",(()=>{const e=document.createElement("test-div-event-dispatch"),t=document.createElement("test-div-event-dispatch");t.appendChild(e);const o=new i(e);let n=0;t.addEventListener("event",(()=>{n++})),o.dispatchEvent("event",null,!1),expect(n).to.be.equal(0),o.dispatchEvent("event",null,!0),expect(n).to.be.equal(1),o.dispatchEvent("event"),expect(n).to.be.equal(2)})),it("Should emit event from specified target",(()=>{const e=document.createElement("div"),t=new i(e),o=document.createElement("test-div-event-dispatch"),n=new i(o);n.applyPropListeners({"@event3":"handler3"});let s=null,r=null;n.addEventListener("event3",(e=>{s=e.composedPath(),r=e.target})),t.dispatchEvent("event3","detail",!1,o),expect(o.handler3Detail).to.be.equal("detail"),expect(s).to.be.eql([o]),expect(r).to.be.eql(r)})),it("Should dispose correctly",(()=>{const e=new Ie,t=new i(e);t.dispose(),expect(t.node).to.be.equal(void 0),expect(t.protoListeners).to.be.equal(void 0),expect(t.propListeners).to.be.equal(void 0),expect(t.addedListeners).to.be.equal(void 0)}))}))}}var __decorate$6=function(e,t,o,n){var i,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(r=(s<3?i(r):s>3?i(t,o,r):i(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r};let Le=class Object1{constructor(e){void 0!==e&&(this.prop=e)}prop=!0},Me=class TestIoNode extends t{static get Properties(){return{label:"default"}}};Me=__decorate$6([o],Me);const ke=new Me;class PropertyTest{run(){describe("Property",(()=>{it("Should initialize correct property definitions and values from loosely typed property definitions",(()=>{let e,t;e=new s({}),t=new r(ke,e),expect(e).to.be.eql({value:void 0,type:void 0,binding:void 0,reflect:void 0,reactive:void 0,observe:void 0,init:void 0}),expect(t).to.be.eql({value:void 0,type:void 0,binding:void 0,reflect:!1,reactive:!0,observe:!1,init:void 0}),e=new s(null),t=new r(ke,e),expect(e).to.be.eql({value:null,type:void 0,binding:void 0,reflect:void 0,reactive:void 0,observe:void 0,init:void 0}),expect(t).to.be.eql({value:null,type:void 0,binding:void 0,reflect:!1,reactive:!0,observe:!1,init:void 0}),e=new s(void 0),t=new r(ke,e),expect(e).to.be.eql({value:void 0,type:void 0,binding:void 0,reflect:void 0,reactive:void 0,observe:void 0,init:void 0}),expect(t).to.be.eql({value:void 0,type:void 0,binding:void 0,reflect:!1,reactive:!0,observe:!1,init:void 0}),e=new s(Number),t=new r(ke,e),expect(e).to.be.eql({value:void 0,type:Number,binding:void 0,reflect:void 0,reactive:void 0,observe:void 0,init:void 0}),expect(t).to.be.eql({value:0,type:Number,binding:void 0,reflect:!1,reactive:!0,observe:!1,init:void 0}),e=new s({type:Number}),t=new r(ke,e),expect(e).to.be.eql({value:void 0,type:Number,binding:void 0,reflect:void 0,reactive:void 0,observe:void 0,init:void 0}),expect(t).to.be.eql({value:0,type:Number,binding:void 0,reflect:!1,reactive:!0,observe:!1,init:void 0}),e=new s(1),t=new r(ke,e),expect(e).to.be.eql({value:1,type:Number,binding:void 0,reflect:void 0,reactive:void 0,observe:void 0,init:void 0}),expect(t).to.be.eql({value:1,type:Number,binding:void 0,reflect:!1,reactive:!0,observe:!1,init:void 0}),e=new s({value:2}),t=new r(ke,e),expect(e).to.be.eql({value:2,type:Number,binding:void 0,reflect:void 0,reactive:void 0,observe:void 0,init:void 0}),expect(t).to.be.eql({value:2,type:Number,binding:void 0,reflect:!1,reactive:!0,observe:!1,init:void 0}),e=new s(String),t=new r(ke,e),expect(e).to.be.eql({value:void 0,type:String,binding:void 0,reflect:void 0,reactive:void 0,observe:void 0,init:void 0}),expect(t).to.be.eql({value:"",type:String,binding:void 0,reflect:!1,reactive:!0,observe:!1,init:void 0}),e=new s({type:String}),t=new r(ke,e),expect(e).to.be.eql({value:void 0,type:String,binding:void 0,reflect:void 0,reactive:void 0,observe:void 0,init:void 0}),expect(t).to.be.eql({value:"",type:String,binding:void 0,reflect:!1,reactive:!0,observe:!1,init:void 0}),e=new s("test"),t=new r(ke,e),expect(e).to.be.eql({value:"test",type:String,binding:void 0,reflect:void 0,reactive:void 0,observe:void 0,init:void 0}),expect(t).to.be.eql({value:"test",type:String,binding:void 0,reflect:!1,reactive:!0,observe:!1,init:void 0}),e=new s({value:"test"}),t=new r(ke,e),expect(e).to.be.eql({value:"test",type:String,binding:void 0,reflect:void 0,reactive:void 0,observe:void 0,init:void 0}),expect(t).to.be.eql({value:"test",type:String,binding:void 0,reflect:!1,reactive:!0,observe:!1,init:void 0}),e=new s(Boolean),t=new r(ke,e),expect(e).to.be.eql({value:void 0,type:Boolean,binding:void 0,reflect:void 0,reactive:void 0,observe:void 0,init:void 0}),expect(t).to.be.eql({value:!1,type:Boolean,binding:void 0,reflect:!1,reactive:!0,observe:!1,init:void 0}),e=new s({type:Boolean}),t=new r(ke,e),expect(e).to.be.eql({value:void 0,type:Boolean,binding:void 0,reflect:void 0,reactive:void 0,observe:void 0,init:void 0}),expect(t).to.be.eql({value:!1,type:Boolean,binding:void 0,reflect:!1,reactive:!0,observe:!1,init:void 0}),e=new s(!0),t=new r(ke,e),expect(e).to.be.eql({value:!0,type:Boolean,binding:void 0,reflect:void 0,reactive:void 0,observe:void 0,init:void 0}),expect(t).to.be.eql({value:!0,type:Boolean,binding:void 0,reflect:!1,reactive:!0,observe:!1,init:void 0}),e=new s({value:!0}),t=new r(ke,e),expect(e).to.be.eql({value:!0,type:Boolean,binding:void 0,reflect:void 0,reactive:void 0,observe:void 0,init:void 0}),expect(t).to.be.eql({value:!0,type:Boolean,binding:void 0,reflect:!1,reactive:!0,observe:!1,init:void 0}),e=new s(Object),t=new r(ke,e),expect(e).to.be.eql({value:void 0,type:Object,binding:void 0,reflect:void 0,reactive:void 0,observe:void 0,init:void 0}),expect(t).to.be.eql({value:{},type:Object,binding:void 0,reflect:!1,reactive:!0,observe:!1,init:void 0}),e=new s({type:Object}),t=new r(ke,e),expect(e).to.be.eql({value:void 0,type:Object,binding:void 0,reflect:void 0,reactive:void 0,observe:void 0,init:void 0}),expect(t).to.be.eql({value:{},type:Object,binding:void 0,reflect:!1,reactive:!0,observe:!1,init:void 0});const o={prop:!0};e=new s({value:o}),t=new r(ke,e),expect(e).to.be.eql({value:{prop:!0},type:Object,binding:void 0,reflect:void 0,reactive:void 0,observe:void 0,init:void 0}),expect(t).to.be.eql({value:{prop:!0},type:Object,binding:void 0,reflect:!1,reactive:!0,observe:!1,init:void 0}),expect(e.value).to.equal(o),expect(t.value).to.equal(o),e=new s(Array),t=new r(ke,e),expect(e).to.be.eql({value:void 0,type:Array,binding:void 0,reflect:void 0,reactive:void 0,observe:void 0,init:void 0}),expect(t).to.be.eql({value:[],type:Array,binding:void 0,reflect:!1,reactive:!0,observe:!1,init:void 0}),e=new s({type:Array}),t=new r(ke,e),expect(e).to.be.eql({value:void 0,type:Array,binding:void 0,reflect:void 0,reactive:void 0,observe:void 0,init:void 0}),expect(t).to.be.eql({value:[],type:Array,binding:void 0,reflect:!1,reactive:!0,observe:!1,init:void 0});const n=[1,2,3];e=new s({value:n}),t=new r(ke,e),expect(e).to.be.eql({value:[1,2,3],type:Array,binding:void 0,reflect:void 0,reactive:void 0,observe:void 0,init:void 0}),expect(t).to.be.eql({value:[1,2,3],type:Array,binding:void 0,reflect:!1,reactive:!0,observe:!1,init:void 0}),expect(e.value).to.equal(n),expect(t.value).to.equal(n),e=new s({type:Le,init:null}),t=new r(ke,e),expect(e).to.be.eql({value:void 0,type:Le,binding:void 0,reflect:void 0,reactive:void 0,observe:void 0,init:null}),expect(t).to.be.eql({value:void 0,type:Le,binding:void 0,reflect:!1,reactive:!0,observe:!1,init:null}),e=new s(Le),t=new r(ke,e),expect(e).to.be.eql({value:void 0,type:Le,binding:void 0,reflect:void 0,reactive:void 0,observe:void 0,init:void 0}),expect(t).to.be.eql({value:new Le,type:Le,binding:void 0,reflect:!1,reactive:!0,observe:!1,init:void 0}),e=new s({type:Le,init:"test"}),t=new r(ke,e),expect(e).to.be.eql({value:void 0,type:Le,binding:void 0,reflect:void 0,reactive:void 0,observe:void 0,init:"test"}),expect(t).to.be.eql({value:new Le("test"),type:Le,binding:void 0,reflect:!1,reactive:!0,observe:!1,init:"test"}),e=new s({type:Le,init:"this"}),t=new r(ke,e),expect(e).to.be.eql({value:void 0,type:Le,binding:void 0,reflect:void 0,reactive:void 0,observe:void 0,init:"this"}),expect(t).to.be.eql({value:new Le(ke),type:Le,binding:void 0,reflect:!1,reactive:!0,observe:!1,init:"this"}),e=new s({type:Le,init:"this.label"}),t=new r(ke,e),expect(e).to.be.eql({value:void 0,type:Le,binding:void 0,reflect:void 0,reactive:void 0,observe:void 0,init:"this.label"}),expect(t).to.be.eql({value:new Le(ke.label),type:Le,binding:void 0,reflect:!1,reactive:!0,observe:!1,init:"this.label"});const i=new Le;e=new s({value:i}),t=new r(ke,e),expect(e).to.be.eql({value:i,type:Le,binding:void 0,reflect:void 0,reactive:void 0,observe:void 0,init:void 0}),expect(e.value).to.be.equal(i),expect(t).to.be.eql({value:i,type:Le,binding:void 0,reflect:!1,reactive:!0,observe:!1,init:void 0}),expect(t.value).to.be.equal(i),expect(e.value).to.equal(i),expect(t.value).to.equal(i),e=new s({type:Le}),t=new r(ke,e),expect(e).to.be.eql({value:void 0,type:Le,binding:void 0,reflect:void 0,reactive:void 0,observe:void 0,init:void 0}),expect(t).to.be.eql({value:new Le,type:Le,binding:void 0,reflect:!1,reactive:!0,observe:!1,init:void 0}),e=new s({reflect:!0,reactive:!1,observe:!0,init:!0}),t=new r(ke,e),expect(e).to.be.eql(t).to.be.eql({value:void 0,type:void 0,binding:void 0,reflect:!0,reactive:!1,observe:!0,init:!0})})),it("Should register property declarations from decorators.",(()=>{class TestClass extends t{}__decorate$6([a("value1")],TestClass.prototype,"prop1",void 0),__decorate$6([a({value:"value2",type:String})],TestClass.prototype,"prop2",void 0),o(TestClass);expect(l.get(TestClass)).to.be.eql({prop1:"value1",prop2:{value:"value2",type:String}})})),it("Should initialize properties with binding correctly",(()=>{let t,o,n=new e(new Me({label:"lorem"}),"label");t=new s(n),o=new r(ke,t),expect(t).to.be.eql({value:"lorem",type:String,binding:n,reflect:void 0,reactive:void 0,observe:void 0,init:void 0}),expect(o).to.be.eql({value:"lorem",type:String,binding:n,reflect:!1,reactive:!0,observe:!1,init:void 0}),n=new e(new Me({label:"lorem"}),"label"),t=new s({binding:n,value:"ipsum"}),o=new r(ke,t),expect(t).to.be.eql({value:"lorem",type:String,binding:n,reflect:void 0,reactive:void 0,observe:void 0,init:void 0}),expect(o).to.be.eql({value:"lorem",type:String,binding:n,reflect:!1,reactive:!0,observe:!1,init:void 0})})),it("Should assign property definitions correctly",(()=>{const t=new e(new Me({label:"lorem"}),"label");let o=new s({}),n=new s({value:"lorem",type:String,binding:t,reflect:!0,reactive:!1,observe:!0,init:void 0});o.assign(n),expect(o).to.be.eql(n),o=new s({}),n=new s({value:"lorem",type:String,binding:t,reflect:!0,reactive:!1,observe:!0,init:!0}),n.assign(o),expect(o).to.be.eql({value:void 0,type:void 0,binding:void 0,reflect:void 0,reactive:void 0,observe:void 0,init:void 0}),expect(n).to.be.eql({value:"lorem",type:String,binding:t,reflect:!0,reactive:!1,observe:!0,init:!0}),o=new s({reflect:!0,reactive:!0,observe:!1,init:void 0}),n=new s({value:"lorem",type:String,reflect:!0}),n.assign(o),expect(n).to.be.eql({value:"lorem",binding:void 0,type:String,reflect:!0,reactive:!0,observe:!1,init:void 0})}))}))}}var __decorate$5=function(e,t,o,n){var i,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(r=(s<3?i(r):s>3?i(t,o,r):i(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r};class Array1 extends Array{}class Array2 extends Array1{}class Array3 extends Array2{}class Object1{}class Object2 extends Object1{}class Object3 extends Object2{}class HTMLElement1 extends HTMLElement{}class HTMLElement2 extends HTMLElement1{}class HTMLElement3 extends HTMLElement2{}let ze=class IoNode1 extends t{static get Properties(){return{prop1:{reactive:!1},prop2:{observe:!0}}}};__decorate$5([a({observe:!0})],ze.prototype,"prop2",void 0),ze=__decorate$5([o],ze);let De=class IoNode3 extends ze{static get Properties(){return{prop1:{reactive:!0,reflect:!0}}}};__decorate$5([a({reactive:!0,observe:!0,init:void 0})],De.prototype,"prop1",void 0),__decorate$5([a({value:"foo",reflect:!1})],De.prototype,"prop2",void 0),__decorate$5([a({reflect:!0})],De.prototype,"prop3",void 0),De=__decorate$5([o],De);let $e=class IoNode4 extends ze{};__decorate$5([a({reactive:!0})],$e.prototype,"prop1",void 0),__decorate$5([a({observe:!1})],$e.prototype,"prop2",void 0),$e=__decorate$5([o],$e);class IoElement1 extends p{}class IoNode2 extends(u(Object3)){}class FakeIoNode1{static get Properties(){return{prop1:{reactive:!1}}}static get Listeners(){return{listener1:"function1",listener2:"",listener3:["_onFunction1",{capture:!0}],listener4:()=>{}}}static get Style(){return"a"}function1(){}onFunction1(){}_onFunction1(){}}class FakeIoNode2 extends FakeIoNode1{function2(){}onFunction2(){}_onFunction2(){}static get Properties(){return{prop1:{observe:!0},prop2:{}}}static get Listeners(){return{listener1:"_onFunction2",listener2:["function2",{capture:!0,passive:!0}],listener3:["_onFunction1",{passive:!0}]}}static get Style(){return"b"}}class FakeIoNode3 extends FakeIoNode2{}class ProtoChainTest{run(){describe("ProtoChain",(()=>{it("Should include an array of inherited class constructors",(()=>{let e=new c(Array3).constructors;expect(e).to.be.eql([Array3,Array2,Array1]),e=new c(Object3).constructors,expect(e).to.be.eql([Object3,Object2,Object1]),e=new c(HTMLElement3).constructors,expect(e).to.be.eql([HTMLElement3,HTMLElement2,HTMLElement1]),e=new c(t).constructors,expect(e).to.be.eql([t,Object.getPrototypeOf(t)]),e=new c(ze).constructors,expect(e).to.be.eql([ze,t,Object.getPrototypeOf(t)]),e=new c(IoElement1).constructors,expect(e).to.be.eql([IoElement1,p,Object.getPrototypeOf(p)]),e=new c(IoNode2).constructors,expect(e).to.be.eql([IoNode2,Object.getPrototypeOf(IoNode2),Object3,Object2,Object1])})),it('Should include an array of function names that start with "on" or "_on" for auto-binding',(()=>{let e=new c(ze);expect(e.functions).to.be.eql([]),e=new c(FakeIoNode1),expect(e.functions).to.be.eql(["onFunction1","_onFunction1"]),e=new c(FakeIoNode2),expect(e.functions).to.be.eql(["onFunction2","_onFunction2","onFunction1","_onFunction1"])})),it("Should bind auto-binding functions with `.autobindFunctions(node)` function",(()=>{const e=new c(FakeIoNode2),t=new FakeIoNode2;e.autobindFunctions(t),expect(t.function1.name).to.be.equal("function1"),expect(t.onFunction1.name).to.be.equal("bound onFunction1"),expect(t._onFunction1.name).to.be.equal("bound _onFunction1"),expect(t.function2.name).to.be.equal("function2"),expect(t.onFunction2.name).to.be.equal("bound onFunction2"),expect(t._onFunction2.name).to.be.equal("bound _onFunction2")})),it("Should include all properties declared in `static get Properties()` return oject",(()=>{let e=new c(FakeIoNode1);expect(Object.keys(e.properties)).to.be.eql(["prop1"]),expect(e.properties).to.be.eql({prop1:{value:void 0,type:void 0,binding:void 0,reactive:!1,reflect:void 0,observe:void 0,init:void 0}}),e=new c(FakeIoNode2),expect(Object.keys(e.properties)).to.be.eql(["prop1","prop2"]),expect(e.properties).to.be.eql({prop1:{value:void 0,type:void 0,binding:void 0,reactive:!1,reflect:void 0,observe:!0,init:void 0},prop2:{value:void 0,type:void 0,binding:void 0,reactive:void 0,reflect:void 0,observe:void 0,init:void 0}})})),it("Should include all properties declared in Property decorator",(()=>{let e=new c(ze);expect(Object.keys(e.properties)).to.be.eql(["lazy","prop2","prop1"]),expect(e.properties).to.be.eql({lazy:{value:!1,type:Boolean,binding:void 0,reactive:!1,reflect:!0,observe:void 0,init:void 0},prop1:{value:void 0,type:void 0,binding:void 0,reactive:!1,reflect:void 0,observe:void 0,init:void 0},prop2:{value:void 0,type:void 0,binding:void 0,reactive:void 0,reflect:void 0,observe:!0,init:void 0}}),e=new c(De),expect(Object.keys(e.properties)).to.be.eql(["lazy","prop2","prop1","prop3"]),expect(e.properties).to.be.eql({lazy:{value:!1,type:Boolean,binding:void 0,reactive:!1,reflect:!0,observe:void 0,init:void 0},prop1:{value:void 0,type:void 0,binding:void 0,reactive:!0,reflect:!0,observe:!0,init:void 0},prop2:{value:"foo",type:String,binding:void 0,reactive:void 0,reflect:!1,observe:!0,init:void 0},prop3:{value:void 0,type:void 0,binding:void 0,reactive:void 0,reflect:!0,observe:void 0,init:void 0}})})),it("Should not override properties declared in Property decorator with inherited `static get Properties()` return oject",(()=>{const e=new c($e);expect(Object.keys(e.properties)).to.be.eql(["lazy","prop2","prop1"]),expect(e.properties).to.be.eql({lazy:{value:!1,type:Boolean,binding:void 0,reactive:!1,reflect:!0,observe:void 0,init:void 0},prop1:{value:void 0,type:void 0,binding:void 0,reactive:!0,reflect:void 0,observe:void 0,init:void 0},prop2:{value:void 0,type:void 0,binding:void 0,reactive:void 0,reflect:void 0,observe:!1,init:void 0}})})),it("Should include all listners declared in `static get Listeners()` return oject",(()=>{let e=new c(FakeIoNode1);expect(Object.keys(e.listeners)).to.be.eql(["listener1","listener3","listener4"]),expect(e.listeners.listener1).to.be.eql([["function1"]]),expect(e.listeners.listener3).to.be.eql([["_onFunction1",{capture:!0}]]),expect(String(e.listeners.listener4)).to.be.eql(String([[()=>{}]])),e=new c(FakeIoNode2),expect(Object.keys(e.listeners)).to.be.eql(["listener1","listener3","listener4","listener2"]),expect(e.listeners.listener1).to.be.eql([["function1"],["_onFunction2"]]),expect(e.listeners.listener2).to.be.eql([["function2",{capture:!0,passive:!0}]]),expect(e.listeners.listener3).to.be.eql([["_onFunction1",{capture:!0,passive:!0}]]),expect(String(e.listeners.listener4)).to.be.eql(String([[()=>{}]]))})),it("Should include all style strings declared in `static get Style()` return string",(()=>{let e=new c(FakeIoNode1);expect(e.style).to.be.equal("a\n"),e=new c(FakeIoNode2),expect(e.style).to.be.equal("a\nb\n"),e=new c(FakeIoNode3),expect(e.style).to.be.equal("a\nb\n")})),it("Should include all property names of observed object properties",(()=>{let e=new c(FakeIoNode1);expect(e.observedObjectProperties).to.be.eql([]),e=new c(FakeIoNode2),expect(e.observedObjectProperties).to.be.eql(["prop1"])}))}))}}class InternalsTest{run(){(new BindingTest).run(),(new ChangeQueueTest).run(),(new EventDispatcherTest).run(),(new PropertyTest).run(),(new ProtoChainTest).run()}}const Be=new p;Be.style.display="none",document.body.appendChild(Be);const Fe=[];class ElementTest{run(){describe("IoElement",(()=>{describe("Initialization",(()=>{it("Should have core API functions defined",(()=>{expect(Be.template).to.be.a("function"),expect(Be.traverse).to.be.a("function"),expect(Be.setAttribute).to.be.a("function")})),it("Should initialize property definitions correctly",(()=>{expect(Be.$).to.be.a("object"),expect(Be.tabindex).to.be.equal(""),expect(Be.contenteditable).to.be.equal(!1),expect(Be.class).to.be.equal(""),expect(Be.role).to.be.equal(""),expect(Be.label).to.be.equal(""),expect(Be.name).to.be.equal(""),expect(Be.title).to.be.equal(""),expect(Be.id).to.be.equal(""),expect(Be.hidden).to.be.equal(!1),expect(Be.disabled).to.be.equal(!1),expect(Be._properties.get("$")).to.eql({binding:void 0,reactive:!1,observe:!1,init:void 0,reflect:!1,type:Object,value:{}}),expect(Be._properties.get("tabindex")).to.eql({binding:void 0,reactive:!0,observe:!1,init:void 0,reflect:!0,type:String,value:""}),expect(Be._properties.get("contenteditable")).to.eql({binding:void 0,reactive:!0,observe:!1,init:void 0,reflect:!0,type:Boolean,value:!1}),expect(Be._properties.get("class")).to.eql({binding:void 0,reactive:!0,observe:!1,init:void 0,reflect:!0,type:String,value:""}),expect(Be._properties.get("role")).to.eql({binding:void 0,reactive:!0,observe:!1,init:void 0,reflect:!0,type:String,value:""}),expect(Be._properties.get("label")).to.eql({binding:void 0,reactive:!0,observe:!1,init:void 0,reflect:!0,type:String,value:""}),expect(Be._properties.get("name")).to.eql({binding:void 0,reactive:!0,observe:!1,init:void 0,reflect:!0,type:String,value:""}),expect(Be._properties.get("title")).to.eql({binding:void 0,reactive:!0,observe:!1,init:void 0,reflect:!0,type:String,value:""}),expect(Be._properties.get("id")).to.eql({binding:void 0,reactive:!0,observe:!1,init:void 0,reflect:!0,type:String,value:""}),expect(Be._properties.get("hidden")).to.eql({binding:void 0,reactive:!0,observe:!1,init:void 0,reflect:!0,type:Boolean,value:!1}),expect(Be._properties.get("disabled")).to.eql({binding:void 0,reactive:!0,observe:!1,init:void 0,reflect:!0,type:Boolean,value:!1})})),it("Has correct default attributes",(()=>{expect(Be.getAttribute("tabindex")).to.equal(null),expect(Be.getAttribute("contenteditable")).to.equal(null),expect(Be.getAttribute("class")).to.equal(null),expect(Be.getAttribute("role")).to.equal(null),expect(Be.getAttribute("label")).to.equal(null),expect(Be.getAttribute("name")).to.equal(null),expect(Be.getAttribute("title")).to.equal(null),expect(Be.getAttribute("id")).to.equal(null),expect(Be.getAttribute("hidden")).to.equal(null),expect(Be.getAttribute("disabled")).to.equal(null)}))})),describe("Reactivity",(()=>{it("Has reactive attributes",(()=>{Be.tabindex="1",expect(Be.getAttribute("tabindex")).to.equal("1"),Be.tabindex="",Be.contenteditable=!0,expect(Be.getAttribute("contenteditable")).to.equal(""),Be.contenteditable=!1,Be.class="foo",expect(Be.getAttribute("class")).to.equal("foo"),Be.class="",Be.role="button",expect(Be.getAttribute("role")).to.equal("button"),Be.role="",Be.label="text",expect(Be.getAttribute("label")).to.equal("text"),Be.label="",Be.name="name",expect(Be.getAttribute("name")).to.equal("name"),Be.name="",Be.title="title",expect(Be.getAttribute("title")).to.equal("title"),Be.title="",Be.id="one",expect(Be.getAttribute("id")).to.equal("one"),Be.id="",Be.hidden=!0,expect(Be.getAttribute("hidden")).to.equal(""),Be.hidden=!1,Be.disabled=!0,expect(Be.getAttribute("disabled")).to.equal(""),Be.disabled=!1})),it("Invokes change events and functions",(()=>{class TestNode extends t{static get Properties(){return{prop0:0,prop1:""}}prop0Changed(){Fe.push("TestNode: prop0Changed "+this.prop0)}prop1Changed(){Fe.push("TestNode: prop1Changed "+this.prop1)}changed(){Fe.push("TestNode: changed")}}o(TestNode);o(class TestSubelement extends p{static get Properties(){return{prop0:0,prop1:""}}});class TestElement1 extends p{static get Properties(){return{prop0:-1,prop1:{value:"default"},_counter:0,_prop0counter:0,_prop0Change:null,_prop1counter:0,_prop1Change:null}}constructor(...e){super(...e),this.template([["test-subelement",{$:"subelement",prop0:this.bind("prop0"),prop1:this.bind("prop1")}]]),this.subnode=new TestNode({prop0:this.bind("prop0"),prop1:this.bind("prop1")})}changed(){Fe.push("TestElement1: changed"),this._counter++}prop0Changed(e){Fe.push("TestElement1: prop0Changed "+this.prop0),this._prop0counter++,this._prop0Change=e}prop1Changed(e){Fe.push("TestElement1: prop1Changed "+this.prop1),this._prop1counter++,this._prop1Change=e}}o(TestElement1),Fe.length=0;const e=new TestElement1;expect(e.prop0).to.equal(-1),expect(e.subnode.prop0).to.equal(-1),expect(e.$.subelement.prop0).to.equal(-1),expect(e.$.subelement.prop1).to.equal("default"),expect(e.subnode.prop0).to.equal(-1),expect(e.subnode.prop1).to.equal("default"),expect(e._counter).to.equal(0),expect(e._prop0counter).to.equal(0),expect(e._prop0Change).to.equal(null),expect(e._prop1counter).to.equal(0),expect(e._prop1Change).to.equal(null),e.subnode.prop0=1,expect(e.prop0).to.equal(1),expect(e.subnode.prop0).to.equal(1),expect(e._counter).to.equal(1),expect(e._prop0counter).to.equal(1),expect(e._prop0Change).to.eql({property:"prop0",value:1,oldValue:-1}),expect(e._prop1counter).to.equal(0),expect(e._prop1Change).to.equal(null),e.setProperties({prop0:2,prop1:"foo"}),expect(e.prop0).to.equal(2),expect(e.subnode.prop0).to.equal(2),expect(e.$.subelement.prop0).to.equal(2),expect(e.prop1).to.equal("foo"),expect(e.subnode.prop1).to.equal("foo"),expect(e.$.subelement.prop1).to.equal("foo"),expect(e._counter).to.equal(2),expect(e._prop0counter).to.equal(2),expect(e._prop0Change).to.eql({property:"prop0",value:2,oldValue:1}),expect(e._prop1counter).to.equal(1),expect(e._prop1Change).to.eql({property:"prop1",value:"foo",oldValue:"default"}),e.subnode.setProperties({prop0:3,prop1:"buzz"}),expect(e.prop0).to.equal(3),expect(e.subnode.prop0).to.equal(3),expect(e.$.subelement.prop0).to.equal(3),expect(e.$.subelement.prop0).to.equal(3),expect(e.prop1).to.equal("buzz"),expect(e.subnode.prop1).to.equal("buzz"),expect(e.$.subelement.prop1).to.equal("buzz"),expect(e._counter).to.equal(4),expect(e._prop0counter).to.equal(3),expect(e._prop0Change).to.eql({property:"prop0",value:3,oldValue:2}),expect(e._prop1counter).to.equal(2),expect(e._prop1Change).to.eql({property:"prop1",value:"buzz",oldValue:"foo"}),expect(Fe).to.eql(["TestNode: prop0Changed -1","TestNode: prop1Changed default","TestNode: changed","TestNode: prop0Changed 1","TestElement1: prop0Changed 1","TestElement1: changed","TestNode: changed","TestElement1: prop0Changed 2","TestNode: prop0Changed 2","TestNode: changed","TestElement1: prop1Changed foo","TestNode: prop1Changed foo","TestNode: changed","TestElement1: changed","TestNode: prop0Changed 3","TestElement1: prop0Changed 3","TestElement1: changed","TestNode: prop1Changed buzz","TestElement1: prop1Changed buzz","TestElement1: changed","TestNode: changed"]),Fe.length=0;class TestElement2 extends p{static get Properties(){return{prop0:-1,prop1:{value:""}}}changed(){this.template([["test-subelement",{$:"subelement",prop0:this.bind("prop0"),prop1:this.bind("prop1")}]])}}o(TestElement2);const n=new TestElement2;n.prop0=1,n.prop1="default",expect(n.prop0).to.equal(1),expect(n.$.subelement.prop0).to.equal(1),expect(n.prop1).to.equal("default"),expect(n.$.subelement.prop1).to.equal("default"),n.setProperties({prop0:2,prop1:"foo"}),expect(n.prop0).to.equal(2),expect(n.$.subelement.prop0).to.equal(2),expect(n.prop1).to.equal("foo"),expect(n.$.subelement.prop1).to.equal("foo"),n.$.subelement.setProperties({prop0:3,prop1:"buzz"}),expect(n.prop0).to.equal(3),expect(n.$.subelement.prop0).to.equal(3),expect(n.prop1).to.equal("buzz"),expect(n.$.subelement.prop1).to.equal("buzz")}))})),describe("Accessibility",(()=>{it("Has a11y attributes",(()=>{expect(Be.getAttribute("aria-label")).to.equal(null),Be.label="label",expect(Be.getAttribute("aria-label")).to.equal("label"),Be.label="",expect(Be.getAttribute("aria-label")).to.equal(null),Be.disabled=!0,expect(Be.getAttribute("aria-disabled")).to.equal(""),Be.disabled=!1}))})),describe("Binding",(()=>{it("Should bind and unbind correctly",(()=>{const e=new p,t=new p;t.label=e.bind("label"),e.label="one",expect(e.label).to.equal("one"),expect(t.label).to.equal("one"),t.label="two",expect(e.label).to.equal("two"),expect(t.label).to.equal("two"),e.unbind("label"),e.label="three",expect(e.label).to.equal("three"),expect(t.label).to.equal("two"),t.label=e.bind("label"),expect(t.label).to.equal("three"),e.label="four",expect(e.label).to.equal("four"),expect(t.label).to.equal("four"),t.unbind("label"),e.label="five",expect(e.label).to.equal("five"),expect(t.label).to.equal("four")})),it("Should bind from constructor",(()=>{const e=new p,t=new p({label:e.bind("label")});e.label="one",expect(t.label).to.equal("one"),t.unbind("label"),e.label="two",expect(e.label).to.equal("two"),expect(t.label).to.equal("one")}))}))})),describe("Extended IoElement",(()=>{class TestIoNode1 extends t{static get Properties(){return{prop0:-1,prop1:{value:"default"}}}}o(TestIoNode1);class TestIoElement1 extends p{static get Properties(){return{prop0:-1,prop1:{value:"default"}}}}o(TestIoElement1);class TestIoElement2 extends p{static get Properties(){return{prop0:{value:0,reactive:!1,reflect:!0},prop1:0}}}o(TestIoElement2),describe("Initialization",(()=>{it("Should initialize property definitions correctly",(()=>{const e=new TestIoElement1,t=new TestIoElement2;expect(e.prop0).to.equal(-1),expect(e.prop1).to.equal("default"),expect(t.prop0).to.equal(0),expect(t.prop1).to.equal(0),expect(e._properties.get("prop0")).to.eql({binding:void 0,reactive:!0,observe:!1,init:void 0,reflect:!1,type:Number,value:-1}),expect(e._properties.get("prop1")).to.eql({binding:void 0,reactive:!0,observe:!1,init:void 0,reflect:!1,type:String,value:"default"}),expect(t._properties.get("prop0")).to.eql({binding:void 0,reactive:!1,observe:!1,init:void 0,reflect:!0,type:Number,value:0}),expect(t._properties.get("prop1")).to.eql({binding:void 0,reactive:!0,observe:!1,init:void 0,reflect:!1,type:Number,value:0})}))})),describe("Reactivity",(()=>{class TestIoElement3 extends TestIoElement1{_changedCounter=0;_prop0ChangedCounter=0;_prop0ChangedChange;_prop1ChangedCounter=0;_prop1ChangedChange;_prop1ChangeEventCounter=0;_prop1ChangeEvent=null;_customEventCounter=0;_customEvent=null;static get Listeners(){return{"prop1-changed":"onProp1ChangeEvent","custom-event":"onCustomEvent"}}changed(){this._changedCounter++}prop0Changed(e){this._prop0ChangedCounter++,this._prop0ChangedChange=e}prop1Changed(e){this._prop1ChangedCounter++,this._prop1ChangedChange=e}onProp1ChangeEvent(e){this._prop1ChangeEventCounter++,this._prop1ChangeEvent=e}onCustomEvent(e){this._customEventCounter++,this._customEvent=e}}o(TestIoElement3);let e=0;function onChange(){e++}it("Should corectly invoke handler functions on change",(()=>{const t=new TestIoElement3({"@prop0-changed":onChange});t.dispatchEvent("custom-event"),t.prop0=1,t.prop1="test",expect(e).to.equal(1),expect(t._changedCounter).to.equal(2),expect(t._prop0ChangedCounter).to.equal(1),expect(t._prop1ChangedCounter).to.equal(1),expect(t._prop1ChangeEventCounter).to.equal(1),expect(t._customEventCounter).to.equal(1)})),it("Should dispatch correct event payloads to handlers",(()=>{const e=new TestIoElement3;e.dispatchEvent("custom-event",{asd:""}),e.prop0=1,e.prop1="foo",expect(e._prop0ChangedChange).to.eql({oldValue:-1,property:"prop0",value:1}),expect(e._prop1ChangedChange).to.eql({oldValue:"default",property:"prop1",value:"foo"}),expect(e._prop1ChangedChange).to.eql({oldValue:"default",property:"prop1",value:"foo"}),expect(e._prop1ChangeEvent.detail).to.eql({property:"prop1",value:"foo",oldValue:"default"})}))})),describe("Binding",(()=>{const e=new TestIoElement1,t=new TestIoNode1;e.template([["test-io-element-1",{$:"subelement",prop0:e.bind("prop0")}]]),it("Should update bound values correctly",(()=>{e.prop0=1/0,expect(e.$.subelement.prop0).to.equal(1/0),e.$.subelement.prop0=-2,expect(e.prop0).to.equal(-2)})),it("Should bind to Node node",(()=>{t.prop1=e.bind("prop1"),t.prop1="a",expect(e.prop1).to.equal("a"),e.prop1="b",expect(e.prop1).to.equal("b")}))}))}))}}const Re=new h;Re.size=[0,0],Re.color=[0,0,0,0],Re.pxRatio=1,Re.style.visibility="hidden",Re.style.position="fixed",document.body.appendChild(Re);class GLTest{run(){describe("IoGl",(()=>{describe("Initialization",(()=>{it("Should have core API functions defined",(()=>{expect(Re.initShader).to.be.a("function"),expect(Re.onResized).to.be.a("function"),expect(Re.themeMutated).to.be.a("function"),expect(Re.setShaderProgram).to.be.a("function"),expect(Re.updatePropertyUniform).to.be.a("function"),expect(Re.updateThemeUniforms).to.be.a("function"),expect(Re.setUniform).to.be.a("function")})),it("Should initialize property definitions correctly",(()=>{Re.onResized(),expect(Re.size).to.be.eql([0,0]),expect(Re.color).to.be.eql([0,0,0,0]),expect(Re.pxRatio).to.be.equal(window.devicePixelRatio),expect(Re.theme).to.be.equal(d),expect(Re._properties.get("size")).to.eql({binding:void 0,reactive:!0,observe:!1,init:[0,0],reflect:!1,type:Array,value:[0,0]}),expect(Re._properties.get("color")).to.eql({binding:void 0,reactive:!0,observe:!0,init:[1,1,1,1],reflect:!1,type:Array,value:[0,0,0,0]}),expect(Re._properties.get("pxRatio")).to.eql({binding:void 0,reactive:!0,observe:!1,init:void 0,reflect:!1,type:Number,value:window.devicePixelRatio}),expect(Re._properties.get("theme")).to.eql({binding:void 0,reactive:!0,observe:!0,init:void 0,reflect:!1,type:p,value:d})})),it("has <canvas> element",(()=>{expect(Re.children[0].localName).to.equal("canvas"),expect(Re._canvas.localName).to.equal("canvas")}))})),describe("Reactivity",(()=>{it("has correct size and pxRatio",(()=>{Re.style.border="none",Re.style.width="32px",Re.style.height="32px",Re.onResized(),expect(Re.size[0]).to.equal(32),expect(Re.size[1]).to.equal(32),expect(Re.pxRatio).to.equal(window.devicePixelRatio)})),it("has correct color",(()=>{let e=Re._ctx.getImageData(0,0,1,1).data;expect(e).to.eql(new Uint8ClampedArray([0,0,0,0])),Re.color=[1,.5,.25,1],Re._onRender(),e=Re._ctx.getImageData(0,0,1,1).data,expect(e).to.eql(new Uint8ClampedArray([255,128,64,255]))}))}))}))}}class OverlayTest{run(){describe("IoOverlaySingleton",(()=>{describe("Initialization",(()=>{it("Should have core API functions defined",(()=>{expect(b.nudgeDown).to.be.a("function"),expect(b.nudgeUp).to.be.a("function"),expect(b.nudgeRight).to.be.a("function"),expect(b.nudgeLeft).to.be.a("function"),expect(b.nudgePointer).to.be.a("function"),expect(b.setElementPosition).to.be.a("function"),expect(b.onChildExpanded).to.be.a("function"),expect(b.onChildExpandedDelayed).to.be.a("function")})),it("Should initialize property definitions correctly",(()=>{expect(b.expanded).to.be.eql(!1),expect(b._properties.get("expanded")).to.eql({binding:void 0,reactive:!0,observe:!1,init:void 0,reflect:!0,type:Boolean,value:!1})}))}))}))}}var __decorate$4=function(e,t,o,n){var i,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(r=(s<3?i(r):s>3?i(t,o,r):i(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r};class NodeTest{run(){describe("IoNode",(()=>{describe("Initialization",(()=>{it("Should have core API functions defined",(()=>{const e=new t;expect(e.setProperty).to.be.a("function"),expect(e.applyProperties).to.be.a("function"),expect(e.setProperties).to.be.a("function"),expect(e.inputValue).to.be.a("function"),expect(e.changed).to.be.a("function"),expect(e.queue).to.be.a("function"),expect(e.dispatchQueue).to.be.a("function"),expect(e.dispatchQueueSync).to.be.a("function"),expect(e.throttle).to.be.a("function"),expect(e.onObjectMutated).to.be.a("function"),expect(e.objectMutated).to.be.a("function"),expect(e.bind).to.be.a("function"),expect(e.unbind).to.be.a("function"),expect(e.addEventListener).to.be.a("function"),expect(e.removeEventListener).to.be.a("function"),expect(e.dispatchEvent).to.be.a("function"),expect(e.dispose).to.be.a("function"),e.dispose()})),it("Should register property definitions correctly",(()=>{let e=class TestNode extends t{static get Properties(){return{prop0:{type:String},prop1:{value:!1},prop2:-1,prop3:Number,prop4:Object,prop5:[0,1,2]}}};e=__decorate$4([o],e);const n=new e;expect(n.prop0).to.be.equal(""),expect(n.prop1).to.be.equal(!1),expect(n.prop2).to.be.equal(-1),expect(n.prop3).to.be.equal(0),expect(n.prop4).to.be.deep.equal({}),expect(n.prop5).to.be.deep.equal([0,1,2]),n.dispose()})),it("Should aggregate property definitions from protochain",(()=>{let e=class Object1 extends t{static get Properties(){return{prop1:{value:0},prop2:null}}};e=__decorate$4([o],e);let n=class Object2 extends e{static get Properties(){return{prop1:{value:{},reactive:!1,observe:!0},prop2:{reactive:!0},prop3:""}}};n=__decorate$4([o],n);const i=new e,s=new n,r=i._protochain.properties,a=s._protochain.properties;expect(Array.from(i._properties.keys())).to.be.eql(["lazy","prop1","prop2"]),expect(Array.from(s._properties.keys())).to.be.eql(["lazy","prop1","prop2","prop3"]),expect(r.prop1.value).to.be.equal(0),expect(i._properties.get("prop1")).to.be.eql({value:0,type:Number,binding:void 0,reactive:!0,reflect:!1,observe:!1,init:void 0}),expect(a.prop1.value).to.be.eql({}),expect(s._properties.get("prop1")).to.be.eql({value:{},type:Object,binding:void 0,reactive:!1,reflect:!1,observe:!0,init:void 0}),expect(s._properties.get("prop2")).to.be.eql({value:null,type:void 0,binding:void 0,reactive:!0,reflect:!1,observe:!1,init:void 0})})),it("Should favor explicit property definitions over implicit",(()=>{class Object1{static get Properties(){return{prop1:{value:{},reactive:!1,reflect:!0,observe:!0}}}}const e=new c(class Object2 extends Object1{static get Properties(){return{prop1:[1,2,3]}}}).properties;expect(e.prop1.value).to.be.eql([1,2,3]),expect(e.prop1.type).to.be.equal(Array),expect(e.prop1.reactive).to.be.equal(!1),expect(e.prop1.reflect).to.be.equal(!0),expect(e.prop1.observe).to.be.equal(!0)})),it("Should correctly register properties with bindigs",(()=>{let n=class TestNode extends t{static get Properties(){return{label:""}}};n=__decorate$4([o],n);const i=new e(new n({label:"binding1"}),"label"),s=new e(new n({label:"binding2"}),"label"),r=new e(new n({label:"binding3"}),"label");let a=class Object1 extends t{static get Properties(){return{prop1:i}}};a=__decorate$4([o],a);let l=class Object2 extends a{static get Properties(){return{prop1:{binding:s},prop3:r}}};l=__decorate$4([o],l);const c=new a,p=new l;expect(c._properties.get("prop1").binding).to.be.equal(i),expect(p._properties.get("prop1").binding).to.be.equal(s),expect(p._properties.get("prop3").binding).to.be.equal(r),expect(i.targets[0]).to.be.equal(c),expect(s.targets[0]).to.be.equal(p),expect(r.targets[0]).to.be.equal(p),expect(c._properties.get("prop1").value).to.be.equal("binding1"),expect(p._properties.get("prop1").value).to.be.equal("binding2"),expect(p._properties.get("prop3").value).to.be.equal("binding3")}))})),describe("Construction",(()=>{})),describe("Properties",(()=>{it("Should correctly get/set properties",(()=>{let e=class TestNode extends t{static get Properties(){return{prop1:{value:1}}}};e=__decorate$4([o],e);const n=new e;expect(n._properties.get("prop1").value).to.be.equal(1),expect(n.prop1).to.be.equal(1),n.setProperty("prop1",0),expect(n._properties.get("prop1").value).to.be.equal(0),expect(n.prop1).to.be.equal(0)})),it("Should correctly get/set bound properties",(()=>{let n=class TestNode extends t{static get Properties(){return{label:""}}};n=__decorate$4([o],n);const i=new e(new n({label:"binding1"}),"label"),s=new e(new n({label:"binding2"}),"label");let r=class TestNode2 extends t{static get Properties(){return{prop1:i}}};r=__decorate$4([o],r);const a=new r;expect(a._properties.get("prop1").value).to.be.equal("binding1"),expect(a.prop1).to.be.equal("binding1"),expect(a._properties.get("prop1").binding).to.be.equal(i),expect(i.targets[0]).to.be.equal(a),i.removeTarget(a,"prop1");const l=a._properties.get("prop1");l&&(l.binding=void 0),a.setProperty("prop1",s),expect(a._properties.get("prop1").value).to.be.equal("binding2"),expect(a.prop1).to.be.equal("binding2"),expect(i.targets[0]).to.be.equal(void 0),expect(s.targets[0]).to.be.equal(a)})),it("Should execute attribute reflection on IoElement",(()=>{let e=class TestElementReflection extends p{static get Properties(){return{label:{value:"label1",reflect:!0}}}};e=__decorate$4([o],e);const t=new e;expect(t.getAttribute("label")).to.be.equal("label1"),t.label="label2",expect(t.getAttribute("label")).to.be.equal("label2"),t.setProperty("label","label3"),expect(t.getAttribute("label")).to.be.equal("label3")})),it("Should dipatch queue on object value initialization and value set",(()=>{let e=class TestNode extends t{static get Properties(){return{prop:Object}}};e=__decorate$4([o],e);const n=new e;n.addEventListener("prop-changed",(e=>{expect("This should not execute").to.be.eql(!0)})),n.removeEventListener("prop-changed"),n.addEventListener("prop-changed",(e=>{const t=e.detail.value,o=e.detail.oldValue;expect(t).to.be.eql({}),expect(o).to.be.eql({})})),n.prop={},n.addEventListener("prop-changed",(()=>{expect("This should never happen!").to.be.equal(!0)})),n.setProperty("prop",{},!0),n.removeEventListener("prop-changed"),n.prop={}})),it("Should connect/disconnect IoNode-property-values on construction and value set",(()=>{let e=class TestSubNode extends t{static get Properties(){return{prop:0,propChangeCounter:0}}propChanged(){this.propChangeCounter++}};e=__decorate$4([o],e);let n=class TestNode extends t{static get Properties(){return{prop:e}}};n=__decorate$4([o],n);const i=new n,s=i.prop;expect(s.propChangeCounter).to.be.equal(0),s.prop=1,s.prop=2,expect(s.propChangeCounter).to.be.equal(2),s.prop=3,expect(s.propChangeCounter).to.be.equal(3);const r=new e;i.prop=r,s.prop=4,expect(s.propChangeCounter).to.be.equal(4),expect(r.propChangeCounter).to.be.equal(0)}))})),describe("Reactivity",(()=>{it("Should corectly invoke handler functions on change",(()=>{let e=class TestNode extends t{_changedCounter=0;_prop1ChangedCounter=0;_prop1Change=null;_prop2ChangedCounter=0;_prop2Change=null;static get Properties(){return{prop1:String,prop2:String}}changed(){this._changedCounter++}prop1Changed(e){this._prop1ChangedCounter++,this._prop1Change=e}prop2Changed(e){this._prop2ChangedCounter++,this._prop2Change=e}};e=__decorate$4([o],e);const n=new e;expect(n._changedCounter).to.equal(0),expect(n._prop1ChangedCounter).to.equal(0),expect(n._prop2ChangedCounter).to.equal(0),expect(n._prop1Change?.property).to.equal(void 0),expect(n._prop1Change?.oldValue).to.equal(void 0),expect(n._prop1Change?.value).to.equal(void 0),expect(n._prop2ChangedCounter).to.equal(0),expect(n._prop2Change?.property).to.equal(void 0),expect(n._prop2Change?.oldValue).to.equal(void 0),expect(n._prop2Change?.value).to.equal(void 0),n.prop1="one",expect(n._changedCounter).to.equal(1),expect(n._prop1ChangedCounter).to.equal(1),expect(n._prop2ChangedCounter).to.equal(0),expect(n._prop1Change?.property).to.equal("prop1"),expect(n._prop1Change?.oldValue).to.equal(""),expect(n._prop1Change?.value).to.equal("one"),n.prop1="two",n.prop2="test",expect(n._changedCounter).to.equal(3),expect(n._prop1ChangedCounter).to.equal(2),expect(n._prop1Change?.property).to.equal("prop1"),expect(n._prop1Change?.oldValue).to.equal("one"),expect(n._prop1Change?.value).to.equal("two"),expect(n._prop2ChangedCounter).to.equal(1),expect(n._prop2Change?.property).to.equal("prop2"),expect(n._prop2Change?.oldValue).to.equal(""),expect(n._prop2Change?.value).to.equal("test"),n.setProperties({prop1:"three",prop2:""}),expect(n._changedCounter).to.equal(4),expect(n._prop1ChangedCounter).to.equal(3),expect(n._prop1Change?.property).to.equal("prop1"),expect(n._prop1Change?.oldValue).to.equal("two"),expect(n._prop1Change?.value).to.equal("three"),expect(n._prop2ChangedCounter).to.equal(2),expect(n._prop2Change?.property).to.equal("prop2"),expect(n._prop2Change?.oldValue).to.equal("test"),expect(n._prop2Change?.value).to.equal(""),n.dispose()})),it("should invoke property mutation handler functions on mutation event",(async()=>{let e=class TestNode extends t{_changedCounter=0;_obj1MutatedCounter=0;_obj2MutatedCounter=0;static get Properties(){return{obj1:{type:Object,observe:!0},obj2:{type:Object,observe:!0}}}changed(){this._changedCounter++}obj1Mutated(){this._obj1MutatedCounter++}obj2Mutated(){this._obj2MutatedCounter++}};e=__decorate$4([o],e);const n=new e;expect(n._changedCounter).to.equal(0),expect(n._obj1MutatedCounter).to.equal(0),n.dispatchEvent("object-mutated",{object:n.obj1},!1,window),await nextTick(),expect(n._changedCounter).to.equal(1),expect(n._obj1MutatedCounter).to.equal(1),expect(n._obj2MutatedCounter).to.equal(0),n.dispatchEvent("object-mutated",{object:n.obj2},!1,window),await nextTick(),n.dispose()})),it("should fire change events",(()=>{let e=class TestNode extends t{static get Properties(){return{prop1:String,_onProp1ChangedCounter:0,_onProp1Change:null,_onCustomEventCounter:0,_onCustomEven:null}}static get Listeners(){return{"prop1-changed":"onProp1Changed","custom-event":"onCustomEvent"}}onProp1Changed(e){this._onProp1ChangedCounter++,this._onProp1Change=e}onCustomEvent(e){this._onCustomEventCounter++,this._onCustomEven=e}};e=__decorate$4([o],e);const n=new e;n.prop1="one",expect(n._onProp1ChangedCounter).to.equal(1),expect(n._onProp1Change.detail.property).to.equal("prop1"),expect(n._onProp1Change.detail.oldValue).to.equal(""),expect(n._onProp1Change.detail.value).to.equal("one"),n.dispatchEvent("custom-event",{value:"hello"}),expect(n._onCustomEventCounter).to.equal(1),expect(n._onCustomEven.path[0]).to.equal(n),expect(n._onCustomEven.detail.value).to.equal("hello")}))})),describe("Binding",(()=>{it("should correctly bind properties",(()=>{let n=class TestNode extends t{static get Properties(){return{prop1:String,prop2:String}}};n=__decorate$4([o],n);const i=new n,s=i.bind("prop1");expect(s).to.be.instanceof(e),expect(s.node).to.be.equal(i),expect(s.property).to.be.equal("prop1");const r=new n({prop1:s}),a=new n({prop1:s});a.prop2=s,expect(s.targets[0]).to.be.equal(r),expect(s.targets[1]).to.be.equal(a),expect(s.targetProperties.get(r)[0]).to.be.equal("prop1"),expect(s.targetProperties.get(r)[1]).to.be.equal(void 0),expect(s.targetProperties.get(a)[0]).to.be.equal("prop1"),expect(s.targetProperties.get(a)[1]).to.be.equal("prop2"),i.prop1="one",expect(r.prop1).to.be.equal("one"),expect(r.prop2).to.be.equal(""),expect(a.prop1).to.be.equal("one"),expect(a.prop2).to.be.equal("one"),r.prop1="two",expect(i.prop1).to.be.equal("two"),expect(a.prop1).to.be.equal("two"),expect(s.targets.length).to.be.equal(2),r.dispose(),expect(s.targets.length).to.be.equal(1),a.dispose(),expect(s.targets.length).to.be.equal(0),i.dispose()})),it("Should add/remove targets and targetProperties when assigned to values",(()=>{let n=class TestNode extends t{static get Properties(){return{prop1:String,prop2:String}}};n=__decorate$4([o],n);const i=new n,s=new e(i,"prop1"),r=new e(i,"prop2"),a=new n;a.prop1=s,a.prop2=r;const l=new n({prop1:s}),c=new n({prop1:s,prop2:s});expect(s.targets[0]).to.be.equal(a),expect(s.targets[1]).to.be.equal(l),expect(s.targets[2]).to.be.equal(c),expect(s.targetProperties.get(a)).to.be.eql(["prop1"]),expect(s.targetProperties.get(l)).to.be.eql(["prop1"]),expect(s.targetProperties.get(c)).to.be.eql(["prop1","prop2"]),a.dispose(),l.unbind("prop1"),c.unbind("prop1"),expect(s.targetProperties.get(a)).to.be.eql([]),expect(s.targetProperties.get(l)).to.be.eql([]),expect(s.targetProperties.get(c)).to.be.eql(["prop2"]),l.prop2=s,l.prop1=s,c.prop1=s,expect(s.targetProperties.get(l)).to.be.eql(["prop2","prop1"]),expect(s.targetProperties.get(c)).to.be.eql(["prop2","prop1"])})),it('Should return existing binding or create a new on "bind()"',(()=>{let e=class TestNode extends t{static get Properties(){return{prop1:String,prop2:String}}};e=__decorate$4([o],e);const n=new e,i=n.bind("prop1");expect(i).to.be.equal(n._bindings.get("prop1")),expect(i).to.be.equal(n.bind("prop1"))})),it("Should dispose bindings correctly",(()=>{let e=class TestNode extends t{static get Properties(){return{prop1:String,prop2:String}}};e=__decorate$4([o],e);const n=new e,i=n.bind("prop1");n.unbind("prop1"),expect(n._bindings.get("prop1")).to.be.equal(void 0),expect(i.prop1).to.be.equal(void 0);const s=new e,r=s.bind("prop1");s.dispose(),expect(s._bindings).to.be.equal(void 0),expect(r.prop1).to.be.equal(void 0)}))}))}))}}localStorage.removeItem("IoStorage:test2"),localStorage.removeItem("IoStorage:test3"),localStorage.removeItem("IoStorage:test4"),localStorage.removeItem("IoStorage:test5");const Ve=localStorage.getItem("IoStorage:user-permitted");localStorage.setItem("IoStorage:user-permitted","true");class StorageTest{run(){describe("IoStorageNode",(()=>{describe("Initialization",(()=>{it("Should register property definitions correctly",(()=>{const e=new v({key:"test",value:"foo"});expect(e.key).to.be.equal("test"),expect(e.value).to.be.equal("foo"),expect(e.default).to.be.equal("foo"),expect(e.storage).to.be.equal("none"),expect(e._properties.get("key")).to.eql({binding:void 0,reactive:!0,observe:!1,reflect:!1,init:void 0,type:String,value:"test"}),expect(e._properties.get("value")).to.eql({binding:void 0,reactive:!0,observe:!1,reflect:!1,init:void 0,type:void 0,value:"foo"}),expect(e._properties.get("default")).to.eql({binding:void 0,reactive:!0,observe:!1,reflect:!1,init:void 0,type:void 0,value:"foo"}),expect(e._properties.get("storage")).to.eql({binding:void 0,reactive:!0,observe:!1,reflect:!1,init:void 0,type:String,value:"none"}),e.dispose()})),it("Should initialize property value from localStorage store if exists",(()=>{localStorage.setItem("IoStorage:test2",'"asd"');const e=new v({key:"test2",value:"buzz",storage:"local"});expect(e.key).to.be.equal("test2"),expect(e.value).to.be.equal("asd"),expect(e.default).to.be.equal("buzz"),expect(e.storage).to.be.equal("local"),e.dispose()})),it("Should initialize property value from location.hash store if exists",(async()=>{self.location.hash=self.location.hash+"&testhash=foo";const e=new v({key:"testhash",value:"buzz",storage:"hash"});expect(e.key).to.be.equal("testhash"),expect(e.value).to.be.equal("foo"),expect(e.default).to.be.equal("buzz"),expect(e.storage).to.be.equal("hash"),e.dispose()})),it("Should return a new instance only if key and store are unique",(()=>{const e=new v({key:"test3",storage:"local"}),t=new v({key:"test3",storage:"local"}),o=new v({key:"test3",storage:"hash"}),n=new v({key:"test4",storage:"local"});expect(e).to.be.equal(t),expect(e).to.not.be.equal(o),expect(e).to.not.be.equal(n),e.dispose(),o.dispose(),n.dispose()}))})),describe("Reactivity",(()=>{it("Should update localStorage store when value changes",(()=>{const e=new v({key:"test5",value:"one",storage:"local"});expect(localStorage.getItem("IoStorage:test5")).to.be.equal(null),e.value="two",expect(localStorage.getItem("IoStorage:test5")).to.be.equal('"two"'),e.value="2",expect(localStorage.getItem("IoStorage:test5")).to.be.equal('"2"'),e.value=2,expect(localStorage.getItem("IoStorage:test5")).to.be.equal("2"),e.value="one",expect(localStorage.getItem("IoStorage:test5")).to.be.equal(null),e.dispose()})),it("Should update location.hash store when value changes to non-default",(async()=>{const e=new v({key:"test6",value:"one",storage:"hash"});e.value="two",expect(self.location.hash).to.include("test6=two"),e.value="2",expect(self.location.hash).to.include("test6=%222%22"),e.value=!0,expect(self.location.hash).to.include("test6=true"),e.value=2,expect(self.location.hash).to.include("test6=2"),self.location.hash=self.location.hash.replace("test6=2","test6=3"),await afterHashChange(),expect(e.value).to.be.equal(3),self.location.hash=self.location.hash.replace("test6=3",'test6="3"'),await afterHashChange(),expect(e.value).to.be.equal("3"),self.location.hash=self.location.hash.replace("test6=%223%22","test6=false"),await afterHashChange(),expect(e.value).to.be.equal(!1),e.value=[0,1,2],expect(self.location.hash).to.include("test6=[0,1,2]"),e.value=[0,1,"2"],expect(self.location.hash).to.include("test6=[0,1,%222%22]"),e.value="2",expect(self.location.hash).to.include("test6=%222%22"),e.dispose(),Ve&&"false"!==Ve||localStorage.setItem("IoStorage:user-permitted","false")}))}))})),describe("IoStorage",(()=>{describe("Initialization",(()=>{it("Should return binding to IoStorageNode Node",(()=>{const t=g({key:"test",storage:"hash"});t.value="foo",expect(t).to.be.instanceOf(e),t.dispose(),expect(self.location.hash).to.not.include("test=foo")}))}))}))}}const He=d,Ge=He._properties.get("themeID").binding;class ThemeTest{run(){describe("IoThemeSingleton",(()=>{describe("Initialization",(()=>{it("Should register property definitions correctly",(()=>{expect(He._properties.get("themeID")).to.eql({binding:Ge,reactive:!0,observe:!1,init:void 0,reflect:!1,type:String,value:He.themeID})}))}))}))}}class CoreTests{run(){(new InternalsTest).run(),(new ElementTest).run(),(new GLTest).run(),(new OverlayTest).run(),(new NodeTest).run(),(new StorageTest).run(),(new ThemeTest).run()}}const Ke=new x;Ke.style.display="none",document.body.appendChild(Ke);class BooleanElementTest{run(){describe("IoBoolean",(()=>{describe("Initialization",(()=>{it("Should have core API functions defined",(()=>{expect(Ke.toggle).to.be.a("function")})),it("Should initialize property definitions correctly",(()=>{expect(Ke.value).to.equal(!1),expect(Ke.true).to.equal("true"),expect(Ke.false).to.equal("false"),expect(Ke.role).to.equal("switch"),expect(Ke._properties.get("value")).to.eql({binding:void 0,reactive:!0,observe:!1,init:void 0,reflect:!0,type:Boolean,value:!1}),expect(Ke._properties.get("true")).to.eql({binding:void 0,reactive:!0,observe:!1,init:void 0,reflect:!1,type:String,value:"true"}),expect(Ke._properties.get("false")).to.eql({binding:void 0,reactive:!0,observe:!1,init:void 0,reflect:!1,type:String,value:"false"})})),it("has correct default attributes",(()=>{expect(Ke.getAttribute("role")).to.equal("switch"),expect(Ke.getAttribute("value")).to.equal(null),expect(Ke.getAttribute("aria-checked")).to.equal("false")})),it("has correct default innerHTML",(()=>{expect(Ke.innerHTML).to.equal('<io-label label="false" aria-label="false">false</io-label>')}))})),describe("Reactivity",(()=>{it("should set innerText to match value property",(()=>{expect(Ke.innerText).to.equal(Ke.false),Ke.toggle(),expect(Ke.innerText).to.equal(Ke.true),Ke.true="yes",Ke.false="no",expect(Ke.innerText).to.equal("yes"),Ke.toggle(),expect(Ke.innerText).to.equal("no"),Ke.value=!1,Ke.true="true",Ke.false="false"})),it("should set icon to match icon property",(()=>{Ke.icon="icons:checkmark",expect(Ke.innerHTML).to.equal(`<io-icon icon="${Ke.icon}">${f.getIcon(Ke.icon)}</io-icon><io-label label="false" aria-label="false">${Ke.false}</io-label>`),Ke.icon="",expect(Ke.innerHTML).to.equal(`<io-label label="false" aria-label="false">${Ke.false}</io-label>`)})),it("should not render innerHTML if no value string is computed",(()=>{Ke.true="",Ke.false="",expect(Ke.innerHTML).to.equal(""),Ke.toggle(),expect(Ke.innerHTML).to.equal(""),Ke.toggle(),Ke.true="true",Ke.false="false"})),it("has reactive attributes",(()=>{Ke.value=!1,expect(Ke.getAttribute("value")).to.equal(null),Ke.value=!0,expect(Ke.getAttribute("value")).to.equal(""),Ke.value=!1}))})),describe("Accessibility",(()=>{it("has a11y attributes",(()=>{Ke.value=!1,expect(Ke.getAttribute("aria-checked")).to.equal("false"),Ke.value=!0,expect(Ke.getAttribute("aria-checked")).to.equal("true"),Ke.value=!1}))}))}))}}const We=new y;We.style.display="none",document.body.appendChild(We);class ButtonElementTest{run(){describe("IoButton",(()=>{describe("Initialization",(()=>{it("Should initialize property definitions correctly",(()=>{expect(We.action).to.equal(void 0),expect(We.value).to.equal(void 0),expect(We.pressed).to.equal(!1),expect(We.role).to.equal("button"),expect(We._properties.get("action")).to.eql({binding:void 0,reactive:!0,observe:!1,init:void 0,reflect:!1,type:void 0,value:void 0}),expect(We._properties.get("value")).to.eql({binding:void 0,reactive:!0,observe:!1,init:void 0,reflect:!1,type:void 0,value:void 0}),expect(We._properties.get("pressed")).to.eql({binding:void 0,reactive:!0,observe:!1,init:void 0,reflect:!0,type:Boolean,value:!1})})),it("has correct default attributes",(()=>{expect(We.getAttribute("role")).to.equal("button"),expect(We.getAttribute("pressed")).to.equal(null),expect(We.getAttribute("aria-pressed")).to.equal("false")})),it("has correct default innerHTML",(()=>{expect(We.innerHTML).to.equal("")}))})),describe("Reactivity",(()=>{it("should set innerText to match label property",(()=>{expect(We.innerText).to.equal(""),We.label="click me",expect(We.innerText).to.equal("click me"),We.label=""})),it("should set icon to match icon property",(()=>{We.icon="icons:checkmark",expect(We.innerHTML).to.equal(`<io-icon icon="${We.icon}">${f.getIcon(We.icon)}</io-icon>`),We.icon="",expect(We.innerHTML).to.equal("")})),it("has reactive attributes",(()=>{We.pressed=!1,expect(We.getAttribute("aria-pressed")).to.equal("false"),We.pressed=!0,expect(We.getAttribute("aria-pressed")).to.equal("true"),We.pressed=!1}))}))}))}}const Ue=new m;Ue.style.display="none",document.body.appendChild(Ue);class FieldElementTest{run(){describe("IoField",(()=>{describe("Initialization",(()=>{it("Should have core API functions defined",(()=>{expect(Ue.getCaretPosition).to.be.a("function"),expect(Ue.setCaretPosition).to.be.a("function")})),it("Should initialize property definitions correctly",(()=>{expect(Ue.tabindex).to.equal("0"),expect(Ue.value).to.equal(void 0),expect(Ue.icon).to.equal(""),expect(Ue.stroke).to.equal(!1),expect(Ue.selected).to.equal(!1),expect(Ue._properties.get("value")).to.eql({binding:void 0,reactive:!0,observe:!1,init:void 0,reflect:!1,type:void 0,value:void 0}),expect(Ue._properties.get("stroke")).to.eql({binding:void 0,reactive:!0,observe:!1,init:void 0,reflect:!0,type:Boolean,value:!1}),expect(Ue._properties.get("selected")).to.eql({binding:void 0,reactive:!0,observe:!1,init:void 0,reflect:!0,type:Boolean,value:!1})})),it("has correct default attributes",(()=>{expect(Ue.getAttribute("tabindex")).to.equal("0"),expect(Ue.getAttribute("icon")).to.equal(null),expect(Ue.getAttribute("stroke")).to.equal(null),expect(Ue.getAttribute("value")).to.equal(null),expect(Ue.getAttribute("selected")).to.equal(null)})),it("has correct default innerHTML",(()=>{expect(Ue.innerHTML).to.equal("")}))})),describe("Reactivity",(()=>{it("should set innerText to match value and/or label property",(()=>{expect(Ue.innerText).to.equal(""),Ue.value=!1,expect(Ue.innerText).to.equal("false"),Ue.value={},expect(Ue.innerText).to.equal("Object"),Ue.value=[0,1,2,3],expect(Ue.innerText).to.equal("Array(4)"),Ue.label="label",expect(Ue.innerText).to.equal("label"),Ue.value=void 0,expect(Ue.innerText).to.equal("label"),Ue.label="",expect(Ue.innerText).to.equal("undefined")})),it("should set icon to match icon property",(()=>{Ue.icon="icons:checkmark",expect(Ue.innerHTML).to.equal(`<io-icon icon="${Ue.icon}">${f.getIcon(Ue.icon)}</io-icon><io-label label="${Ue.value}" aria-label="${Ue.value}">${Ue.value}</io-label>`),Ue.icon="",expect(Ue.innerHTML).to.equal(`<io-label label="${Ue.value}" aria-label="${Ue.value}">${Ue.value}</io-label>`)})),it("has reactive attributes",(()=>{expect(Ue.getAttribute("selected")).to.equal(null),Ue.selected=!0,expect(Ue.getAttribute("selected")).to.equal(""),Ue.selected=!1}))}))}))}}const Qe=new q;Qe.style.display="none",document.body.appendChild(Qe);class IconElementTest{run(){describe("IoIcon",(()=>{describe("Initialization",(()=>{it("Should initialize property definitions correctly",(()=>{expect(Qe.icon).to.equal(""),expect(Qe.stroke).to.equal(!1),expect(Qe._properties.get("icon")).to.eql({binding:void 0,reactive:!0,observe:!1,init:void 0,reflect:!0,type:String,value:""}),expect(Qe._properties.get("stroke")).to.eql({binding:void 0,reactive:!0,observe:!1,init:void 0,reflect:!0,type:Boolean,value:!1})})),it("has correct default attributes",(()=>{expect(Qe.getAttribute("icon")).to.equal(null),expect(Qe.getAttribute("stroke")).to.equal(null)})),it("has correct default innerHTML",(()=>{expect(Qe.innerHTML).to.equal("")}))})),describe("Reactivity",(()=>{it("should set innerHTML to match icon property",(()=>{Qe.icon="icon:check",expect(Qe.innerHTML).to.equal(f.getIcon("icon:check")),Qe.icon="iconcheck",expect(Qe.innerHTML).to.equal("iconcheck"),Qe.icon=""})),it("has reactive attributes",(()=>{Qe.icon="text",expect(Qe.getAttribute("icon")).to.equal("text"),Qe.icon="",Qe.stroke=!0,expect(Qe.getAttribute("stroke")).to.equal(""),Qe.stroke=!1}))}))}))}}class IconsetElementTest{run(){describe("IoIconsetSingleton",(()=>{it("Should have core API functions defined",(()=>{expect(f.registerIcons).to.be.a("function"),expect(f.getIcon).to.be.a("function")})),it("registers icons",(()=>{f.registerIcons("test-please-ignore",'<svg><g id="dummy"><path></path></g></svg>'),expect(f.getIcon("test-please-ignore:dummy")).to.equal('<svg viewBox="0 0 24 24" preserveAspectRatio="xMidYMid meet"><g class="icon-id-dummy"><path></path></g></svg>')}))}))}}const Je=new w;Je.style.display="none",document.body.appendChild(Je);class LabelElementTest{run(){describe("IoLabel",(()=>{describe("Initialization",(()=>{it("Should initialize property definitions correctly",(()=>{expect(Je.label).to.equal(""),expect(Je._properties.get("label")).to.eql({binding:void 0,reactive:!0,observe:!1,init:void 0,reflect:!0,type:String,value:""})})),it("has correct default attributes",(()=>{expect(Je.getAttribute("label")).to.equal(null)}))})),describe("Reactivity",(()=>{it("should set innerText to match label property",(()=>{Je.label="label",expect(Je.innerText).to.equal("label"),Je.label="",expect(Je.innerText).to.equal("")})),it("has reactive attributes",(()=>{Je.label="text",expect(Je.getAttribute("label")).to.equal("text"),Je.label=""}))})),describe("Accessibility",(()=>{it("has a11y attributes",(()=>{expect(Je.getAttribute("aria-label")).to.equal(null),Je.label="label",expect(Je.getAttribute("aria-label")).to.equal("label"),Je.label="",expect(Je.getAttribute("aria-label")).to.equal(null)}))}))}))}}class SwitchElementTest{element=new A;constructor(){this.element.style.display="none",document.body.appendChild(this.element)}run(){describe("IoSwitch",(()=>{describe("default values",(()=>{it("has default values",(()=>{expect(this.element.value).to.equal(!1)}))})),describe("attributes",(()=>{it("has tabindex attribute",(()=>{expect(this.element.getAttribute("tabindex")).to.equal("0")})),it("has a11y attributes",(()=>{expect(this.element.getAttribute("role")).to.equal("switch"),expect(this.element.getAttribute("aria-label")).to.equal(null),this.element.label="click here",expect(this.element.getAttribute("aria-label")).to.equal("click here")})),it("has value attribute when value is true",(()=>{this.element.value=!1,expect(this.element.hasAttribute("value")).to.equal(!1),expect(this.element.getAttribute("value")).to.equal(null),expect(this.element.getAttribute("aria-checked")).to.equal("false"),this.element.value=!0,expect(this.element.hasAttribute("value")).to.equal(!0),expect(this.element.getAttribute("value")).to.equal(""),expect(this.element.getAttribute("aria-checked")).to.equal("true")})),it("has title attribute",(()=>{this.element.label="click here",expect(this.element.getAttribute("title")).to.equal("click here"),this.element.label="Button"}))}))}))}}class StringElementTest{element=new C;constructor(){this.element.style.display="none",document.body.appendChild(this.element)}run(){describe("IoString",(()=>{describe("default values",(()=>{it("has default values",(()=>{expect(this.element.value).to.equal("")}))})),describe("innerText",(()=>{it("matches values",(()=>{this.element.value="hello",expect(this.element.textContent).to.equal("hello"),this.element.value=!1,expect(this.element.textContent).to.equal("false"),this.element.value=null,expect(this.element.textContent).to.equal("null"),this.element.value=void 0,expect(this.element.textContent).to.equal("undefined"),this.element.value=NaN,expect(this.element.textContent).to.equal("NaN"),this.element.value=123,expect(this.element.textContent).to.equal("123"),this.element.value=""}))})),describe("attributes",(()=>{it("has tabindex attribute",(()=>{expect(this.element.getAttribute("tabindex")).to.equal("0")})),it("has contenteditable attribute",(()=>{expect(this.element.getAttribute("contenteditable")).to.equal("")})),it("has a11y attributes",(()=>{expect(this.element.getAttribute("role")).to.equal("textbox"),this.element.value=0,expect(this.element.getAttribute("aria-invalid")).to.equal("true"),this.element.value="",expect(this.element.getAttribute("aria-invalid")).to.equal(null)})),it("has title attribute",(()=>{this.element.label="Enter text",expect(this.element.getAttribute("title")).to.equal("Enter text"),this.element.label=""}))}))}))}}const Ze=new E;Ze.style.display="none",document.body.appendChild(Ze);const Ye=new S;Ye.style.display="none",Ye.src=Ze,document.body.appendChild(Ye);const Xe=new P;Xe.style.display="none",document.body.appendChild(Xe);class NumberElementTest{run(){describe("IoNumber",(()=>{describe("Initialization",(()=>{it("Should initialize property definitions correctly",(()=>{expect(Ze.role).to.equal("textbox"),expect(Ze.value).to.equal(0),expect(Ze.conversion).to.equal(1),expect(Ze.step).to.equal(1e-4),expect(Ze.min).to.equal(-1/0),expect(Ze.max).to.equal(1/0),expect(Ze.ladder).to.equal(!1),expect(Ze.type).to.equal("number"),expect(Ze.pattern).to.equal('pattern="[0-9]*"'),expect(Ze.inputmode).to.equal("numeric"),expect(Ze.spellcheck).to.equal("false"),expect(Ze._properties.get("conversion")).to.eql({binding:void 0,reactive:!0,observe:!1,init:void 0,reflect:!1,type:Number,value:1}),expect(Ze._properties.get("step")).to.eql({binding:void 0,reactive:!0,observe:!1,init:void 0,reflect:!1,type:Number,value:1e-4}),expect(Ze._properties.get("min")).to.eql({binding:void 0,reactive:!0,observe:!1,init:void 0,reflect:!1,type:Number,value:-1/0}),expect(Ze._properties.get("max")).to.eql({binding:void 0,reactive:!0,observe:!1,init:void 0,reflect:!1,type:Number,value:1/0}),expect(Ze._properties.get("type")).to.eql({binding:void 0,reactive:!0,observe:!1,init:void 0,reflect:!0,type:String,value:"number"}),expect(Ze._properties.get("pattern")).to.eql({binding:void 0,reactive:!0,observe:!1,init:void 0,reflect:!0,type:String,value:'pattern="[0-9]*"'}),expect(Ze._properties.get("inputmode")).to.eql({binding:void 0,reactive:!0,observe:!1,init:void 0,reflect:!0,type:String,value:"numeric"}),expect(Ze._properties.get("spellcheck")).to.eql({binding:void 0,reactive:!0,observe:!1,init:void 0,reflect:!0,type:String,value:"false"})})),it("has correct default attributes",(()=>{expect(Ze.getAttribute("value")).to.equal("0"),expect(Ze.getAttribute("role")).to.equal("textbox"),expect(Ze.getAttribute("type")).to.equal("number"),expect(Ze.getAttribute("pattern")).to.equal('pattern="[0-9]*"'),expect(Ze.getAttribute("inputmode")).to.equal("numeric"),expect(Ze.getAttribute("spellcheck")).to.equal("false"),expect(Ze.getAttribute("positive")).to.equal(""),expect(Ze.getAttribute("aria-valuenow")).to.equal("0"),expect(Ze.getAttribute("aria-valuemin")).to.equal("-Infinity"),expect(Ze.getAttribute("aria-valuemax")).to.equal("Infinity"),expect(Ze.getAttribute("aria-valuestep")).to.equal("0.0001"),expect(Ze.getAttribute("aria-invalid")).to.equal(null)})),it("has correct default innerHTML",(()=>{expect(Ze.innerHTML).to.equal("0")}))})),describe("Reactivity",(()=>{it("should set innerText to match value property",(()=>{Ze.value=0,Ze.step=1,expect(Ze.innerText).to.equal("0"),Ze.step=.1,expect(Ze.innerText).to.equal("0"),Ze.value="hello",expect(Ze.innerText).to.equal("NaN"),Ze.value=!1,expect(Ze.innerText).to.equal("NaN"),Ze.value=null,expect(Ze.innerText).to.equal("NaN"),Ze.value=void 0,expect(Ze.innerText).to.equal("NaN"),Ze.value=NaN,expect(Ze.innerText).to.equal("NaN"),Ze.value=123,expect(Ze.innerText).to.equal("123"),Ze.step=1e-4,Ze.value=0})),it("should set innerText to match value with custom step settings",(()=>{Ze.step=1e-9,Ze.value=.012345678,expect(Ze.innerText).to.equal("0.012345678"),Ze.step=1e-6,expect(Ze.innerText).to.equal("0.012346"),Ze.step=.01,expect(Ze.innerText).to.equal("0.01"),Ze.step=1e-4,Ze.value=0})),it("should set innerText to match value with custom min/max settings",(()=>{Ze.step=1,Ze.min=2,Ze.max=5,Ze.textNode=10,Ze._setFromTextNode(),expect(Ze.value).to.equal(5),Ze.textNode=0,Ze._setFromTextNode(),expect(Ze.value).to.equal(2),Ze.step=1e-4,Ze.value=0,Ze.min=-1/0,Ze.max=1/0})),it("should set innerText to match value with conversion factor",(()=>{Ze.conversion=.1,Ze.value=1,expect(Ze.innerText).to.equal("0.1"),Ze.conversion=.01,expect(Ze.innerText).to.equal("0.01"),Ze.textNode=10,Ze._setFromTextNode(),expect(Ze.value).to.equal(1e3),Ze.value=0,Ze.conversion=1})),it("has reactive attributes",(()=>{Ze.value=1,expect(Ze.getAttribute("value")).to.equal("1"),expect(Ze.getAttribute("positive")).to.equal(""),Ze.value=-2,expect(Ze.getAttribute("value")).to.equal("-2"),expect(Ze.getAttribute("positive")).to.equal(null),Ze.value=0,expect(Ze.getAttribute("value")).to.equal("0"),expect(Ze.getAttribute("positive")).to.equal("")}))})),describe("Accessibility",(()=>{it("has a11y attributes",(()=>{Ze.value="",expect(Ze.getAttribute("aria-invalid")).to.equal("true"),Ze.value=0,expect(Ze.getAttribute("aria-invalid")).to.equal(null),Ze.value=12,Ze.min=0,Ze.max=24,Ze.step=2,expect(Ze.getAttribute("aria-valuenow")).to.equal("12"),expect(Ze.getAttribute("aria-valuemin")).to.equal("0"),expect(Ze.getAttribute("aria-valuemax")).to.equal("24"),expect(Ze.getAttribute("aria-valuestep")).to.equal("2"),Ze.value=0,Ze.min=-1/0,Ze.max=1/0,Ze.step=1e-4}))}))})),describe("IoNumberLadderStep",(()=>{describe("Initialization",(()=>{it("Should initialize property definitions correctly",(()=>{expect(Xe.value).to.equal(1),expect(Xe.role).to.equal("spinbutton"),expect(Xe.type).to.equal("number"),expect(Xe._properties.get("type")).to.eql({binding:void 0,reactive:!0,observe:!1,init:void 0,reflect:!0,type:String,value:"number"})})),it("has correct default attributes",(()=>{expect(Xe.getAttribute("value")).to.equal(null),expect(Xe.getAttribute("role")).to.equal("spinbutton"),expect(Xe.getAttribute("type")).to.equal("number")})),it("has correct default innerHTML",(()=>{expect(Xe.innerHTML).to.equal('<io-label label="1" aria-label="1">1</io-label>')}))})),describe("Reactivity",(()=>{it("should set innerText to match value property",(()=>{Xe.value=0,expect(Xe.textContent).to.equal("0"),Xe.value=1})),it("has no reactive attributes",(()=>{Xe.value=2,expect(Xe.getAttribute("value")).to.equal(null),Xe.value=1}))}))})),describe("IoNumberLadder",(()=>{describe("Initialization",(()=>{it("Should initialize property definitions correctly",(()=>{expect(Ye.role).to.equal("list"),expect(Ye.src).to.equal(Ze),expect(Ye.conversion).to.equal(1),expect(Ye.expanded).to.equal(!1),expect(Ye.min).to.equal(-1/0),expect(Ye.max).to.equal(1/0),expect(Ye.step).to.equal(1e-4),expect(Ye.value).to.equal(0),expect(Ye.conversion).to.equal(1),expect(Ye._properties.get("src")).to.eql({binding:void 0,reactive:!0,observe:!1,init:void 0,reflect:!1,type:void 0,value:Ze}),expect(Ye._properties.get("expanded")).to.eql({binding:void 0,reactive:!0,observe:!1,init:void 0,reflect:!0,type:Boolean,value:!1})})),it("has correct default attributes",(()=>{expect(Ye.getAttribute("role")).to.equal("list"),expect(Ye.getAttribute("expanded")).to.equal(null)})),it("has correct default innerHTML",(()=>{expect(Ye.innerHTML).to.equal('<io-number-ladder-step tabindex="0" role="spinbutton" appearance="flush" type="number" class="io-up4" label="1000" aria-label="1000" aria-valuestep="1000" aria-valuemin="-Infinity" aria-valuemax="Infinity" aria-valuenow="0"><io-label label="1000" aria-label="1000">1000</io-label></io-number-ladder-step><io-number-ladder-step tabindex="0" role="spinbutton" appearance="flush" type="number" class="io-up3" label="100" aria-label="100" aria-valuestep="100" aria-valuemin="-Infinity" aria-valuemax="Infinity" aria-valuenow="0"><io-label label="100" aria-label="100">100</io-label></io-number-ladder-step><io-number-ladder-step tabindex="0" role="spinbutton" appearance="flush" type="number" class="io-up2" label="10" aria-label="10" aria-valuestep="10" aria-valuemin="-Infinity" aria-valuemax="Infinity" aria-valuenow="0"><io-label label="10" aria-label="10">10</io-label></io-number-ladder-step><io-number-ladder-step tabindex="0" role="spinbutton" appearance="flush" type="number" class="io-up1" label="1" aria-label="1" aria-valuestep="1" aria-valuemin="-Infinity" aria-valuemax="Infinity" aria-valuenow="0"><io-label label="1" aria-label="1">1</io-label></io-number-ladder-step><span class="io-number-ladder-center"></span><io-number-ladder-step tabindex="0" role="spinbutton" appearance="flush" type="number" class="io-down1" label="0.1" aria-label="0.1" aria-valuestep="0.1" aria-valuemin="-Infinity" aria-valuemax="Infinity" aria-valuenow="0"><io-label label="0.1" aria-label="0.1">0.1</io-label></io-number-ladder-step><io-number-ladder-step tabindex="0" role="spinbutton" appearance="flush" type="number" class="io-down2" label="0.01" aria-label="0.01" aria-valuestep="0.010000000000000002" aria-valuemin="-Infinity" aria-valuemax="Infinity" aria-valuenow="0"><io-label label="0.01" aria-label="0.01">0.01</io-label></io-number-ladder-step><io-number-ladder-step tabindex="0" role="spinbutton" appearance="flush" type="number" class="io-down3" label="0.001" aria-label="0.001" aria-valuestep="0.001" aria-valuemin="-Infinity" aria-valuemax="Infinity" aria-valuenow="0"><io-label label="0.001" aria-label="0.001">0.001</io-label></io-number-ladder-step><io-number-ladder-step tabindex="0" role="spinbutton" appearance="flush" type="number" class="io-down4" label="0.0001" aria-label="0.0001" aria-valuestep="0.0001" aria-valuemin="-Infinity" aria-valuemax="Infinity" aria-valuenow="0"><io-label label="0.0001" aria-label="0.0001">0.0001</io-label></io-number-ladder-step>')}))})),describe("Reactivity",(()=>{const $=e=>Ye.querySelector(e);it("should set innerText to match value property",(()=>{expect($(".io-up1").value).to.equal(1),expect($(".io-up1").textContent).to.equal("1"),expect($(".io-up2").textContent).to.equal("10"),expect($(".io-up3").textContent).to.equal("100"),expect($(".io-up4").textContent).to.equal("1000"),expect($(".io-down1").value).to.equal(.1),expect($(".io-down1").textContent).to.equal("0.1"),expect($(".io-down2").textContent).to.equal("0.01"),expect($(".io-down3").textContent).to.equal("0.001"),expect($(".io-down4").textContent).to.equal("0.0001")})),it("should set innerText to match value with custom step settings",(()=>{Ze.step=.2,Ye.changed(),expect($(".io-up1").value).to.equal(2),expect($(".io-up1").textContent).to.equal("2"),expect($(".io-up2").textContent).to.equal("20"),expect($(".io-up3").textContent).to.equal("200"),expect($(".io-up4").textContent).to.equal("2000"),expect($(".io-down1").value).to.equal(.2),expect($(".io-down1").textContent).to.equal("0.2"),expect($(".io-down2")).to.equal(null),expect($(".io-down3")).to.equal(null),expect($(".io-down4")).to.equal(null),Ze.step=.02,Ye.changed(),expect($(".io-down1").textContent).to.equal("0.2"),expect($(".io-down2").textContent).to.equal("0.02"),expect($(".io-down3")).to.equal(null),Ze.step=1e-4,Ye.changed()})),it("should set innerText to match value with custom min/max settings",(()=>{Ze.min=0,Ze.max=100,Ye.changed(),expect($(".io-up1").value).to.equal(1),expect($(".io-up1").innerText).to.equal("1"),expect($(".io-up2").innerText).to.equal("10"),expect($(".io-up3").innerText).to.equal("100"),expect($(".io-up4")).to.equal(null),Ze.max=1e3,Ye.changed(),expect($(".io-up4").innerText).to.equal("1000"),Ze.min=-1/0,Ze.max=1/0,Ye.changed()})),it("should set innerText to match value with conversion factor",(()=>{Ze.conversion=20,Ye.changed(),expect($(".io-up2").value).to.equal(10),expect($(".io-up2").innerText).to.equal("200"),Ze.step=.2,Ye.changed(),expect($(".io-up2").value).to.equal(20),expect($(".io-up2").innerText).to.equal("400"),Ze.conversion=1,Ze.step=1e-4,Ye.changed()})),it("has reactive attributes",(()=>{const $=e=>Ye.querySelector(e);it("steps have tabindex attribute",(()=>{expect($(".io-up1").getAttribute("tabindex")).to.equal("0"),expect($(".io-down1").getAttribute("tabindex")).to.equal("0")})),it("has a11y attributes",(()=>{expect(Ye.getAttribute("role")).to.equal("list")})),it("steps have a11y attributes",(()=>{expect($(".io-up1").getAttribute("role")).to.equal("spinbutton"),expect($(".io-up1").getAttribute("type")).to.equal("number"),expect($(".io-up1").getAttribute("aria-label")).to.equal("1"),expect($(".io-up1").getAttribute("aria-valuemax")).to.equal("Infinity"),expect($(".io-up1").getAttribute("aria-valuemin")).to.equal("-Infinity"),expect($(".io-up1").getAttribute("aria-valuenow")).to.equal("0"),Ze.value=3,Ye.changed(),expect($(".io-up1").getAttribute("aria-valuenow")).to.equal("3"),Ze.step=.5,Ye.changed(),expect($(".io-up1").getAttribute("aria-label")).to.equal("5"),Ze.value=0,Ze.step=1e-4,Ye.changed()}))}))})),describe("Accessibility",(()=>{it("TODO",(()=>{expect(Ye.getAttribute("aria-valuemin")).to.equal("-Infinity"),expect(Ye.getAttribute("aria-valuemax")).to.equal("Infinity"),expect(Ye.getAttribute("aria-valuenow")).to.equal("0")})),it("has a11y attributes",(()=>{expect(Ye.getAttribute("aria-invalid")).to.equal(null),Ze.value=NaN,Ye.changed(),expect(Ye.getAttribute("aria-invalid")).to.equal("true"),Ze.value=12,Ye.changed(),Ze.min=0,Ze.max=24,Ze.step=2,Ye.changed(),expect(Ye.getAttribute("aria-valuenow")).to.equal("12"),expect(Ye.getAttribute("aria-valuemin")).to.equal("0"),expect(Ye.getAttribute("aria-valuemax")).to.equal("24"),expect(Ye.getAttribute("aria-valuestep")).to.equal("2"),Ze.min=-1/0,Ze.max=1/0,Ze.step=1e-4,Ye.changed()}))}))}))}}class BasicElementTest{run(){(new BooleanElementTest).run(),(new ButtonElementTest).run(),(new FieldElementTest).run(),(new IconElementTest).run(),(new IconsetElementTest).run(),(new LabelElementTest).run(),(new NumberElementTest).run(),(new StringElementTest).run(),(new SwitchElementTest).run()}}class ColorConvertTest{run(){describe("IoColorConvert",(()=>{describe("Initialization",(()=>{it("Should have core API functions defined",(()=>{})),it("Should initialize property definitions correctly",(()=>{})),it("has correct default attributes",(()=>{})),it("has correct default innerHTML",(()=>{}))})),describe("Reactivity",(()=>{it("should set innerText to match value property",(()=>{})),it("has reactive attributes",(()=>{}))})),describe("Accessibility",(()=>{it("has a11y attributes",(()=>{}))}))}))}}class ColorBaseTest{run(){describe("IoColor",(()=>{describe("Initialization",(()=>{})),describe("Reactivity",(()=>{})),describe("Accessibility",(()=>{}))}))}}const et=new T;et.style.display="none",document.body.appendChild(et);class ColorPanelTest{run(){describe("IoColorPanel",(()=>{describe("Initialization",(()=>{})),describe("Reactivity",(()=>{})),describe("Accessibility",(()=>{}))}))}}const tt=new O;tt.style.display="none",document.body.appendChild(tt);class ColorPickerTest{run(){describe("IoColorPicker",(()=>{describe("Initialization",(()=>{})),describe("Reactivity",(()=>{})),describe("Accessibility",(()=>{}))}))}}const ot=new N;ot.style.display="none",document.body.appendChild(ot);class ColorRgbaTest{run(){describe("IoColorPicker",(()=>{describe("Initialization",(()=>{})),describe("Reactivity",(()=>{})),describe("Accessibility",(()=>{}))}))}}const nt=new _;nt.style.display="none",document.body.appendChild(nt);class ColorSlidersTest{run(){describe("IoColorSlider",(()=>{describe("Initialization",(()=>{})),describe("Reactivity",(()=>{})),describe("Accessibility",(()=>{}))}))}}const st=new I;st.style.display="none",document.body.appendChild(st);class ColorSwatchTest{run(){describe("IoColorSwatch",(()=>{describe("Initialization",(()=>{})),describe("Reactivity",(()=>{})),describe("Accessibility",(()=>{}))}))}}class ColorElementTest{run(){(new ColorConvertTest).run(),(new ColorBaseTest).run(),(new ColorPanelTest).run(),(new ColorPickerTest).run(),(new ColorRgbaTest).run(),(new ColorSlidersTest).run(),(new ColorSwatchTest).run()}}class Binding{node;property="";targets=[];targetProperties=new WeakMap;constructor(e,t){this.node=e,this.property=t,this.node.addEventListener(`${this.property}-changed`,this.onSourceChanged)}set value(e){this.node[this.property]=e}get value(){return this.node[this.property]}toJSON(){return JSON.stringify({property:this.property,targetProperties:this.targetProperties})}addTarget(e,t){const o=e._properties.get(t);o.binding&&o.binding!==this&&console.warn("Binding target alredy has a binding!"),o.binding=this,e.setProperty(t,this.node[this.property],!0);const n=e;-1===this.targets.indexOf(n)&&this.targets.push(n);const i=this.getTargetProperties(n);-1===i.indexOf(t)?(i.push(t),n.addEventListener(`${t}-changed`,this.onTargetChanged)):console.warn("Binding target alredy added!")}removeTarget(e,t){const o=this.getTargetProperties(e);if(t){const n=o.indexOf(t);-1!==n&&o.splice(n,1),e.removeEventListener(`${t}-changed`,this.onTargetChanged),e._properties.get(t).binding=void 0}else{for(let t=o.length;t--;)e.removeEventListener(`${o[t]}-changed`,this.onTargetChanged),e._properties.get(o[t]).binding=void 0;o.length=0}0===o.length&&this.targets.splice(this.targets.indexOf(e),1)}getTargetProperties(e){let t=this.targetProperties.get(e);return t||(t=[],this.targetProperties.set(e,t),t)}onTargetChanged=e=>{if(-1===this.targets.indexOf(e.target))return void console.error("onTargetChanged() should never fire when target is removed from binding. Please file an issue at https://github.com/arodic/iogui/issues.");const t=this.node[this.property],o=e.detail.value;if(t!==o){if("number"==typeof o&&isNaN(o)&&"number"==typeof t&&isNaN(t))return;this.node.setProperty(this.property,o)}};onSourceChanged=e=>{if(e.target!==this.node)return void console.error("onSourceChanged() should always originate form source node. Please file an issue at https://github.com/arodic/iogui/issues.");const t=e.detail.value;for(let e=this.targets.length;e--;){const o=this.targets[e],n=this.getTargetProperties(o);for(let e=n.length;e--;){const i=n[e],s=o[i];if(s!==t){if("number"==typeof t&&isNaN(t)&&"number"==typeof s&&isNaN(s))continue;o.setProperty(i,t)}}}};dispose(){this.node.removeEventListener(`${this.property}-changed`,this.onSourceChanged);for(let e=this.targets.length;e--;)this.removeTarget(this.targets[e]);this.targets.length=0,delete this.node,delete this.property,delete this.targets,delete this.targetProperties}}class ProtoProperty{value;type;binding;reflect;reactive;observe;init;constructor(e){if(null==e)this.value=e;else if("function"==typeof e)this.type=e;else if(e instanceof Binding)this.value=e.value,this.type=void 0!==e.value&&null!==e.value?e.value.constructor:void 0,this.binding=e;else if(e&&e.constructor===Object){const t=e;this.value=void 0!==t.value?t.value:void 0,this.type=void 0!==t.type?t.type:void 0!==t.value&&null!==t.value?t.value.constructor:void 0,t.binding instanceof Binding&&(this.binding=t.binding,this.value=this.binding.value),void 0!==t.reflect&&(this.reflect=t.reflect),void 0!==t.reactive&&(this.reactive=t.reactive),void 0!==t.observe&&(this.observe=t.observe),void 0!==t.init&&(this.init=t.init)}else e&&e.constructor===Object||(this.value=e,this.type=e.constructor)}assign(e){void 0!==e.value&&(this.value=e.value),void 0!==e.type&&(this.type=e.type),void 0!==e.reflect&&(this.reflect=e.reflect),void 0!==e.reactive&&(this.reactive=e.reactive),void 0!==e.observe&&(this.observe=e.observe),void 0!==e.init&&(this.init=e.init),void 0!==e.binding&&(this.binding=e.binding)}}function decodeInitArgument(e,t){if("this"===e)return t;if("string"!=typeof e||!e.startsWith("this."))return e;{const o=e.split(".");let n=t;for(let e=1;e<o.length;e++)n=n[o[e]];if(n)return n;console.warn(`PropertyInstance: Invalid path ${e}`)}}class PropertyInstance{value=void 0;type;binding;reflect=!1;reactive=!0;observe=!1;init=void 0;constructor(e,t){if(Object.keys(t).forEach((e=>{-1===["value","type","reflect","reactive","observe","init","binding"].indexOf(e)&&console.warn(`ProtoProperty: Invalid field ${e}`)})),void 0!==t.type&&"function"!=typeof t.type&&console.warn('Incorrect type for "type" field'),void 0!==t.binding&&t.binding.constructor!==Binding&&console.warn('Incorrect type for "binding" field'),void 0!==t.reflect&&"boolean"!=typeof t.reflect&&console.error(`Invalid reflect field ${t.reflect}!`),void 0!==t.reactive&&"boolean"!=typeof t.reactive&&console.warn('Incorrect type for "reactive" field'),void 0!==t.observe&&"boolean"!=typeof t.observe&&console.warn('Incorrect type for "observe" field'),this.value=t.value,this.type=t.type,this.binding=t.binding,void 0!==t.reflect&&(this.reflect=t.reflect),void 0!==t.reactive&&(this.reactive=t.reactive),void 0!==t.observe&&(this.observe=t.observe),void 0!==t.init&&(this.init=t.init),this.binding instanceof Binding)this.value=this.binding.value;else if((void 0===this.value||null===this.value)&&null!==this.init)if(this.type===Boolean)this.value=!1;else if(this.type===String)this.value="";else if(this.type===Number)this.value=0;else if("function"==typeof this.type)if(void 0!==this.init)if(this.init instanceof Array){const t=this.init.map((t=>decodeInitArgument(t,e)));this.value=new this.type(...t)}else if(this.init instanceof Object){const t={};Object.keys(this.init).forEach((o=>{t[o]=decodeInitArgument(this.init[o],e)})),this.value=new this.type(t)}else{const t=decodeInitArgument(this.init,e);this.value=new this.type(t)}else this.value=new this.type;void 0!==this.value&&null!==this.value&&(-1!==[String,Number,Boolean].indexOf(this.type)?(this.type===Boolean&&"boolean"!=typeof this.value||this.type===Number&&"number"!=typeof this.value||this.type===String&&"string"!=typeof this.value)&&console.warn(`Property: Incorrect value ${this.value} type for property ${name}!`):"function"!=typeof this.type||this.value instanceof this.type||console.warn(`Property: Incorrect value ${this.value} type for property ${name}!`))}}const rt=new WeakMap,Property=function(e){return(t,o)=>{const n=t.constructor,i=rt.get(n)||{};rt.set(n,i),i[o]=e}},hardenListenerDeclaration=e=>e instanceof Array?e:[e],assignListenerDeclaration=(e,t)=>{const o=e.findIndex((e=>e[0]===t[0]));-1!==o?e[o][1]?e[o][1]=Object.assign(e[o][1],t[1]):t[1]&&(e[o][1]=t[1]):e.push(t)},at=["capture","passive"],listenerFromDefinition=(e,t)=>{"string"!=typeof t[0]&&"function"!=typeof t[0]&&console.warn("listenerFromDefinition: Invalid listener type"),t[1]&&("object"!=typeof t[1]||Object.keys(t[1]).some((e=>!at.includes(e))))&&console.warn("listenerFromDefinition: Invalid listener options type");const o=["string"==typeof t[0]?e[t[0]]:t[0]];return t[1]&&o.push(t[1]),o};class EventDispatcher{node;isEventTarget;protoListeners={};propListeners={};addedListeners={};constructor(e){this.node=e,this.isEventTarget=e instanceof EventTarget,this.setProtoListeners(e)}setProtoListeners(e){for(const t in e._protochain?.listeners){this.protoListeners[t]=[];for(let o=0;o<e._protochain.listeners[t].length;o++){const n=listenerFromDefinition(e,e._protochain.listeners[t][o]);this.protoListeners[t]=[n]}if(this.isEventTarget&&this.protoListeners[t].length){const e=this.protoListeners[t][0];EventTarget.prototype.addEventListener.call(this.node,t,e[0],e[1])}}}applyPropListeners(e){const t={};for(const o in e)if(o.startsWith("@")){const n=o.slice(1,o.length),i=hardenListenerDeclaration(e[o]),s=listenerFromDefinition(this.node,i);t[n]=[s]}const o=this.propListeners;for(const e in o)if(!t[e]){if(this.isEventTarget){const t=hardenListenerDeclaration(o[e][0]),n=listenerFromDefinition(this.node,t);EventTarget.prototype.removeEventListener.call(this.node,e,n[0],n[1])}delete o[e]}for(const e in t){if(this.isEventTarget){const n=hardenListenerDeclaration(t[e][0]),i=listenerFromDefinition(this.node,n);if(o[e]){const t=hardenListenerDeclaration(o[e][0]),n=listenerFromDefinition(this.node,t);(n!==i||i[1]&&JSON.stringify(n[1])!==JSON.stringify(i[1]))&&(EventTarget.prototype.removeEventListener.call(this.node,e,n[0],n[1]),EventTarget.prototype.addEventListener.call(this.node,e,i[0],i[1]))}else EventTarget.prototype.addEventListener.call(this.node,e,i[0],i[1])}o[e]=t[e]}}addEventListener(e,t,o){this.addedListeners[e]=this.addedListeners[e]||[];const n=this.addedListeners[e].findIndex((e=>e[0]===t));-1!==n&&console.warn(`EventDispatcher.addEventListener: Listener ${e} already added!`),"function"!=typeof t&&console.warn("EventDispatcher.addEventListener: Invalid listener type!"),o&&("object"!=typeof o||Object.keys(o).some((e=>!at.includes(e))))&&console.warn("EventDispatcher.addEventListener: Invalid listener options type"),-1===n&&(this.addedListeners[e].push(o?[t,o]:[t]),this.isEventTarget&&EventTarget.prototype.addEventListener.call(this.node,e,t,o))}removeEventListener(e,t,o){if(this.addedListeners[e]||console.warn(`EventDispatcher.removeEventListener: Listener ${e} not found!`),t&&"function"!=typeof t&&console.warn("EventDispatcher.removeEventListener: Invalid listener type!"),o&&("object"!=typeof o||Object.keys(o).some((e=>!at.includes(e))))&&console.warn("EventDispatcher.removeEventListener: Invalid listener options type"),this.addedListeners[e]){if(t){const n=this.addedListeners[e].findIndex((e=>e[0]===t));-1===n&&console.warn(`EventDispatcher.removeEventListener: Listener ${e} not found!`),-1!==n&&(this.addedListeners[e].splice(n,1),this.isEventTarget&&EventTarget.prototype.removeEventListener.call(this.node,e,t,o))}else{for(let t=0;t<this.addedListeners[e].length;t++)if(this.isEventTarget){const o=this.addedListeners[e][t];EventTarget.prototype.removeEventListener.call(this.node,e,o[0],o[1])}this.addedListeners[e].length=0}0===this.addedListeners[e].length&&delete this.addedListeners[e]}}dispatchEvent(e,t,o=!0,n=this.node){const i={detail:t,target:n,path:[n]};if(n instanceof EventTarget)EventTarget.prototype.dispatchEvent.call(n,new CustomEvent(e,{detail:t,bubbles:o,composed:!0,cancelable:!0}));else{if(this.protoListeners[e])for(let t=0;t<this.protoListeners[e].length;t++)this.protoListeners[e][t][0].call(n,i);if(this.propListeners[e]&&(this.propListeners[e].length>1&&console.warn(`EventDispatcher.dispathEvent: PropListeners[${e}] array too long!`),this.propListeners[e][0][0].call(n,i)),this.addedListeners[e])for(let t=0;t<this.addedListeners[e].length;t++)this.addedListeners[e][t][0].call(n,i)}}dispose(){for(const e in this.protoListeners){if(this.isEventTarget)for(let t=0;t<this.protoListeners[e].length;t++){const o=this.protoListeners[e][t];EventTarget.prototype.removeEventListener.call(this.node,e,o[0],o[1])}this.protoListeners[e].length=0,delete this.protoListeners[e]}for(const e in this.propListeners){if(this.isEventTarget){const t=this.propListeners[e][0];EventTarget.prototype.removeEventListener.call(this.node,e,t[0],t[1])}this.propListeners[e].length=0,delete this.propListeners[e]}for(const e in this.addedListeners){if(this.isEventTarget)for(let t=this.addedListeners[e].length;t--;){const o=this.addedListeners[e][t];EventTarget.prototype.removeEventListener.call(this.node,e,o[0],o[1])}this.addedListeners[e].length=0,delete this.addedListeners[e]}delete this.node,delete this.protoListeners,delete this.propListeners,delete this.addedListeners}}class ProtoChain{constructors=[];functions=[];properties={};listeners={};style="";observedObjectProperties=[];constructor(e){let t=e.prototype;for(;t&&e!==HTMLElement&&e!==Object&&e!==Array;){this.constructors.push(e);const o=Object.getOwnPropertyNames(t);for(let e=0;e<o.length;e++){const n=o[e];if(n.startsWith("_")||n.startsWith("on")){const e=Object.getOwnPropertyDescriptor(t,n);if(void 0===e||e.get||e.set)continue;"function"==typeof t[n]&&-1===this.functions.indexOf(n)&&this.functions.push(n)}}e.Style&&-1===this.style.indexOf(e.Style)&&(this.style=e.Style+"\n"+this.style),t=Object.getPrototypeOf(t),e=t.constructor}let o="";for(let e=this.constructors.length;e--;){let t;if(t=rt.get(this.constructors[e]),t)for(const e in t){const o=new ProtoProperty(t[e]);this.properties[e]||(this.properties[e]=o),this.properties[e].assign(o)}t=this.constructors[e].Properties;const n=JSON.stringify(t);if(n!==o)for(const e in t){const i=new ProtoProperty(t[e]);this.properties[e]||(this.properties[e]=i),this.properties[e].assign(i),o=n}const i=this.constructors[e].Listeners;for(const e in i)i[e]&&(this.listeners[e]=this.listeners[e]||[],assignListenerDeclaration(this.listeners[e],hardenListenerDeclaration(i[e])))}for(const e in this.properties){this.properties[e].observe&&(-1!==[String,Number,Boolean].indexOf(this.properties[e].type)&&console.warn(`Property "${e}" in ProtoChain: "observe" is only intended for property definitions with Object data type!`),this.observedObjectProperties.push(e));{const t=this.properties[e];if(-1!==[String,Number,Boolean].indexOf(this.properties[e].type))(t.type===Boolean&&"boolean"!=typeof t.value||t.type===Number&&"number"!=typeof t.value||t.type===String&&"string"!=typeof t.value)&&console.warn(`Property "${e}" in ProtoChain: Incorrect value type for Boolean property!`);else{const o=null===this.properties[e].value,n=void 0===this.properties[e].value;"function"!=typeof t.type||t.value instanceof t.type||o||n||console.warn(`Property "${e}" in ProtoChain: Incorrect value type for Boolean property!`)}}}}autobindFunctions(e){e.constructor!==this.constructors[0]&&console.warn("`autobindFunctions` should be used on",this.constructors[0].name,"instance");for(let t=this.functions.length;t--;)Object.defineProperty(e,this.functions[t],{value:e[this.functions[t]].bind(e),writable:!0,configurable:!0})}}class ChangeQueue{hasChanged=!1;dispatching=!1;constructor(e){this.changes=[],this.node=e}queue(e,t,o){t===o&&console.warn("ChangeQueue: queuing change with same value and oldValue!");const n=this.changes.findIndex((t=>t.property===e));-1===n?this.changes.push({property:e,value:t,oldValue:o}):this.changes[n].value=t}dispatch(){if(!0!==this.dispatching){for(this.dispatching=!0,this.hasChanged=!1;this.changes.length;){const e=this.changes[0];this.changes.splice(0,1);const t=e.property;e.value!==e.oldValue&&(this.hasChanged=!0,this.node[t+"Changed"]&&this.node[t+"Changed"](e),this.node.dispatchEvent(t+"-changed",e))}this.hasChanged&&(this.node.changed(),this.node.dispatchEvent("changed"),this.node.dispatchMutationEvent(this.node)),this.dispatching=!1}}dispose(){this.changes.length=0,delete this.node,delete this.changes}}var __decorate$3=function(e,t,o,n){var i,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(r=(s<3?i(r):s>3?i(t,o,r):i(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r};function IoNodeMixin(e){return class extends e{static get Properties(){return{lazy:{value:!1,reactive:!1,reflect:!0}}}constructor(e={},...t){super(...t);{const e=Object.getPrototypeOf(this).constructor;this._protochain.constructors[0]!==e&&console.error(`${e.name} not registered! Call "Register([ClassName])" of @Register decorator before using ${e.name} class!`)}this._protochain.autobindFunctions(this),Object.defineProperty(this,"_changeQueue",{enumerable:!1,configurable:!0,value:new ChangeQueue(this)}),Object.defineProperty(this,"_properties",{enumerable:!1,configurable:!0,value:new Map}),Object.defineProperty(this,"_bindings",{enumerable:!1,configurable:!0,value:new Map}),Object.defineProperty(this,"_eventDispatcher",{enumerable:!1,configurable:!0,value:new EventDispatcher(this)});for(const e in this._protochain.properties)Object.defineProperty(this,e,{get:function(){return this._properties.get(e).value},set:function(t){this.setProperty(e,t)},configurable:!0});for(const e in this._protochain.properties){const t=new PropertyInstance(this,this._protochain.properties[e]);this._properties.set(e,t);const o=t.value;null!=o&&t.reflect&&this._isIoElement&&this.setAttribute(e,o),t.binding&&t.binding.addTarget(this,e)}this.applyProperties(e),this._protochain.observedObjectProperties.length&&window.addEventListener("object-mutated",this.onObjectMutated),this.init()}setProperty(e,t,o){const n=this._properties.get(e),i=n.value;if(t!==i){const s=t instanceof Binding?t:null;if(s){const o=n.binding;if(s!==o)return o&&o.removeTarget(this,e),void s.addTarget(this,e);s.value=t=n.value,n.reactive||console.warn(`IoNode: property "${e}" is bound but has reactive flag set to false!`)}n.value=t,t instanceof Binding&&console.log(t instanceof Binding),n.type===String?"string"!=typeof t&&console.warn(`Wrong type of property "${e}". Value: "${t}". Expected type: ${n.type.name}`,this):n.type===Number?"number"!=typeof t&&console.warn(`Wrong type of property "${e}". Value: "${t}". Expected type: ${n.type.name}`,this):n.type===Boolean?"boolean"!=typeof t&&console.warn(`Wrong type of property "${e}". Value: "${t}". Expected type: ${n.type.name}`,this):n.type===Array?t instanceof Array||console.warn(`Wrong type of property "${e}". Value: "${t}". Expected type: ${n.type.name}`,this):n.type===Object?t instanceof Array&&console.warn(`Wrong type of property "${e}". Value: "${JSON.stringify(t)}". Expected type: ${n.type.name}`,this):"function"==typeof n.type&&(t instanceof n.type||console.warn(`Wrong type of property "${e}". Value: "${t}". Expected type: ${n.type.name}`,this)),n.reactive&&i!==t&&(this.queue(e,t,i),o||this.dispatchQueue()),n.reflect&&this._isIoElement&&this.setAttribute(e,t)}}applyProperties(e){for(const t in e)this._properties.has(t)?this.setProperty(t,e[t],!0):t.startsWith("@")||"style"===t||"config"===t||"$"===t||console.warn(`Property "${t}" is not defined`,this);this._eventDispatcher.applyPropListeners(e),this.dispatchQueue()}setProperties(e){for(const t in e)this._properties.has(t)?this.setProperty(t,e[t],!0):console.warn(`Property "${t}" is not defined`,this);this.dispatchQueue()}inputValue(e){if(this.value!==e||"object"==typeof this.value){const t=this.value;this.setProperty("value",e),this.dispatchEvent("value-input",{value:e,oldValue:t},!1)}}changed(){}init(){}queue(e,t,o){this._changeQueue.queue(e,t,o)}dispatchQueue(){this.lazy?this.throttle(this.dispatchQueueSync):this.dispatchQueueSync()}dispatchQueueSync=()=>{this._changeQueue.dispatch()};throttle(e,t=void 0,o=1){!function throttle(e,t,o,n=1){if(0===n&&-1===ct.indexOf(t)){ct.push(t);try{t(o)}catch(e){console.error(e)}return}-1===pt.indexOf(t)&&pt.push(t);if(ut.has(t)){ut.get(t).arg=o}else ut.set(t,{node:e,arg:o,timeout:Date.now()+n})}(this,e,t,o)}onObjectMutated=e=>{for(let t=0;t<this._protochain.observedObjectProperties.length;t++){const o=this._protochain.observedObjectProperties[t];if(this._properties.get(o).value===e.detail.object)return void this.throttle(this.objectMutated,o,0);if(e.detail.objects)return void console.error("Deprecation warning! `objects` property no longer supported. Use `object` property instead.")}};objectMutated=e=>{this[e+"Mutated"]&&this[e+"Mutated"](),this.changed(),this.dispatchEvent("changed"),this.dispatchMutationEvent(this)};bind(e){return this._properties.has(e)?!1===this._properties.get(e).reactive&&console.warn(`IoGUI Node: cannot bind to ${e} property. It has reactive flag set to false!`):console.warn(`IoGUI Node: cannot bind to ${e} property. Does not exist!`),this._bindings.has(e)||this._bindings.set(e,new Binding(this,e)),this._bindings.get(e)}unbind(e){const t=this._bindings.get(e);t&&(t.dispose(),this._bindings.delete(e));const o=this._properties.get(e);o?.binding?.removeTarget(this,e)}addEventListener(e,t,o){"function"==typeof t?this._eventDispatcher.addEventListener(e,t,o):console.warn(`${this.constructor.name}incorrect listener type.`,this)}removeEventListener(e,t,o){this._eventDispatcher.removeEventListener(e,t,o)}dispatchEvent(e,t={},o=!1,n){this._eventDispatcher.dispatchEvent(e,t,o,n)}dispatchMutationEvent(e){this.dispatchEvent("object-mutated",{object:e},!0,window)}dispose(){this._disposed,this._disposed||(this._bindings.forEach(((e,t)=>{e.dispose(),this._bindings.delete(t)})),delete this._bindings,this._protochain.observedObjectProperties.length&&window.removeEventListener("object-mutated",this.onObjectMutated),delete this._protochain,this._changeQueue.dispose(),delete this._changeQueue,this._properties.forEach(((e,t)=>{e.binding?.removeTarget(this,t)})),this._eventDispatcher.dispose(),delete this._eventDispatcher,delete this._properties,Object.defineProperty(this,"_disposed",{value:!0}))}Register(e){Object.defineProperty(e.prototype,"_protochain",{value:new ProtoChain(e)})}}}function Register(e){e.prototype.Register(e)}let lt=class IoNode extends(IoNodeMixin(Object)){};lt=__decorate$3([Register],lt);const ct=[],pt=[],ut=new WeakMap;requestAnimationFrame((function animate(){requestAnimationFrame(animate),ct.length=0;for(let e=pt.length;e--;){const t=pt[e],o=ut.get(t);if(!(o.timeout>Date.now())){pt.splice(pt.indexOf(t),1),ut.delete(t);try{o.node._disposed||(void 0!==o.arg?t(o.arg):t())}catch(e){console.error(e)}}}}));var __decorate$2=function(e,t,o,n){var i,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(r=(s<3?i(r):s>3?i(t,o,r):i(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r};function _isNaN(e){return"number"==typeof e&&isNaN(e)}function _isSelectable(e){return"select"===e||"scroll"===e}let dt=class MenuOptions extends(IoNodeMixin(Array)){push(...e){for(let t=0;t<e.length;t++){const o=e[t];o instanceof ht||console.warn("MenuOptions.push: item is not a MenuItem!"),o instanceof ht&&(this.find((e=>e.label===o.label))&&console.warn(`MenuOptions.addItems: duplicate label "${o.label}"`),o.addEventListener("selected-changed",this._onItemSelectedChanged),o.addEventListener("path-changed",this._onSubOptionsPathChanged),super.push(o))}}getItem(e,t=!1){for(let o=0;o<this.length;o++){if(this[o].value===e)return this[o];if(t&&this[o].options){const n=this[o].options.getItem(e,t);if(n)return n}}return null}constructor(e=[],t={}){const o=[];for(let t=0;t<e.length;t++)e[t]instanceof ht?o.push(e[t]):o.push(new ht(e[t]));super(t,...o),""!==this.path&&this.pathChanged(),void 0!==this.first&&this.firstChanged();for(let e=0;e<this.length;e++){const t=this[e];t instanceof ht||console.warn("MenuOptions.constructor: item is not a MenuItem!"),this.find((e=>e!==t&&e.label===t.label))&&console.warn(`MenuOptions.addItems: duplicate label "${t.label}"`),t.addEventListener("selected-changed",this._onItemSelectedChanged),t.addEventListener("path-changed",this._onSubOptionsPathChanged),t.selected&&"select"===t.mode&&this.updatePaths(t)}}addItems(e){for(let t=0;t<e.length;t++){let o;o=e[t]instanceof ht?e[t]:new ht(e[t]),this.find((e=>e.label===o.label))&&console.warn(`MenuOptions.addItems: duplicate label "${o.label}"`),this.push(o),o.addEventListener("selected-changed",this._onItemSelectedChanged),o.addEventListener("path-changed",this._onSubOptionsPathChanged)}}pathChanged(){const e=this.path?[...this.path.split(this.delimiter)]:[];if(this.length&&e.length){const t=e.shift(),o=this.find((e=>e.label===t));if(o)_isSelectable(o.mode)||console.warn("MenuOptions.pathChanged: Path set to non-selectable MenuItem!"),_isSelectable(o.mode)&&(o.options&&(o.options.path=e.join(this.delimiter)),o.selected=!0);else{console.warn(`MenuOptions.pathChanged: cannot find item for specified path "${this.path}"!`);for(let e=0;e<this.length;e++)_isSelectable(this[e].mode)&&(this[e].selected=!1)}}else for(let e=0;e<this.length;e++)_isSelectable(this[e].mode)&&(this[e].selected=!1)}firstChanged(){if(void 0!==this.first){const e=this.find((e=>e.value===this.first&&"select"===e.mode||_isNaN(e.value)&&_isNaN(this.first)));e&&(e.selected=!0),void 0===e&&console.warn(`MenuOptions.firstChanged: cannot find pickable item for specified first value "${this.first}"!`)}else for(let e=0;e<this.length;e++)"select"===this[e].mode&&(this[e].selected=!1)}lastChanged(){if(void 0!==this.last){const e=this.path?[...this.path.split(this.delimiter)]:[];if(e.length){let t=e.shift(),o=this.find((e=>!0===e.selected&&e.label===t&&("select"===e.mode||"scroll"===e.mode))),n=o?.options||void 0;for(;e.length&&n;)t=e.shift(),o=n.find((e=>!0===e.selected&&e.label===t&&("select"===e.mode||"scroll"===e.mode))),n=o?.options||void 0;void 0===o?console.warn(`MenuOptions.lastChanged: cannot find item for specified last value "${this.last}"!`):o.value===this.last||_isNaN(o.value)&&_isNaN(this.last)||o.value===this.scroll||_isNaN(o.value)&&_isNaN(this.scroll)||(console.warn(`MenuOptions.lastChanged: last property value "${this.last}" diverged from item specified by path!`),console.log(this.path,this.last))}else console.warn(`MenuOptions.lastChanged: last property value set "${this.last}" but path is empty!`)}}updatePaths(e){const t=[];let o="select"===e?.mode||"scroll"===e?.mode?e:void 0,n="select"===e?.mode?e:void 0,i="scroll"===e?.mode?e:void 0;const s=this.find((e=>"select"===e.mode&&e.selected)),r=this.find((e=>"scroll"===e.mode&&e.selected));if(o||!s&&!r){for(;o;)t.push(o.label),"select"===o.mode&&(n=o),"scroll"===o.mode&&(i=o),o=o.options?.find((e=>("select"===e.mode||"scroll"===e.mode)&&e.selected));this.setProperties({path:t.join(this.delimiter),first:"select"===e?.mode?e.value:void 0,last:void 0!==n?n.value:void 0,scroll:void 0!==i?i.value:void 0})}}_onItemSelectedChanged(e){const t=e.target;if(_isSelectable(t.mode))if(t.selected){for(let e=0;e<this.length;e++)this[e]!==t&&_isSelectable(this[e].mode)&&(this[e].selected=!1);this.updatePaths(t),this.dispatchEvent("item-selected",{item:t})}else this.updatePaths()}_onSubOptionsPathChanged(e){const t=e.target;t.selected?this.updatePaths(t):this.updatePaths()}selectDefault(){for(let e=0;e<this.length;e++)if(_isSelectable(this[e].mode)){if(!this[e].hasmore)return this[e].selected=!0,!0;if(this[e].options.selectDefault())return!0}return!1}bind(e){return"last"!==e&&"scroll"!==e||console.warn("MenuPath: Binding to `last` or `scroll` property is not recommended!"),super.bind(e)}dispose(){for(let e=0;e<this.length;e++)this[e].removeEventListener("selected-changed",this._onItemSelectedChanged),this[e].removeEventListener("path-changed",this._onSubOptionsPathChanged);super.dispose()}changed(){this.dispatchEvent("object-mutated",{object:this},!1,window)}};__decorate$2([Property(void 0)],dt.prototype,"first",void 0),__decorate$2([Property(void 0)],dt.prototype,"last",void 0),__decorate$2([Property(void 0)],dt.prototype,"scroll",void 0),__decorate$2([Property("")],dt.prototype,"path",void 0),__decorate$2([Property(",")],dt.prototype,"delimiter",void 0),dt=__decorate$2([Register],dt);var __decorate$1=function(e,t,o,n){var i,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(r=(s<3?i(r):s>3?i(t,o,r):i(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r};let ht=class MenuItem extends lt{get hasmore(){return!!this.options?.length}getSubitem(e){return this.options?.getItem(e)}constructor(e){const t={value:"",label:""};"object"!=typeof e||null===e?(t.value=e,t.label=String(e)):(t.value=e.value,void 0===e.label?"object"==typeof t.value?null===t.value?t.label="null":t.label=`${t.value.constructor.name}`+(t.value instanceof Array?`(${t.value.length})`:""):t.label=String(t.value):t.label=e.label,void 0!==e.icon&&(t.icon=e.icon),void 0!==e.hint&&(t.hint=e.hint),void 0!==e.hidden&&(t.hidden=e.hidden),void 0!==e.disabled&&(t.disabled=e.disabled),void 0!==e.action&&(t.action=e.action),void 0!==e.mode&&(t.mode=e.mode),void 0!==e.selected&&(t.selected=e.selected),void 0!==e.options&&(e.options instanceof dt?t.options=e.options:t.options=new dt(e.options)),void 0!==t.selected||"select"!==e.mode&&void 0!==e.mode||!t.options||(t.selected=!!t.options.find((e=>e.selected&&"select"===e.mode)))),t.mode&&"toggle"===t.mode&&t.options&&console.warn('MenuItem: cannot have suboptions when `mode === "toggle"`'),t.mode&&"scroll"===t.mode&&t.options&&console.warn('MenuItem: cannot have suboptions when `mode === "scroll"`'),t.mode&&-1===["select","toggle","scroll","link","none"].indexOf(t.mode)&&console.warn("MenuItem: unknown `mode` property!",t.mode),t.action&&"function"!=typeof t.action&&console.warn("MenuItem: invalid type of `action` property!",typeof t.action),super(t),this.options&&(this.options.addEventListener("item-selected",this._onSubItemSelected),this.options.addEventListener("path-changed",this._onOptionsPathChanged))}toJSON(){const e={value:this.value,label:this.label,icon:this.icon,hint:this.hint,hidden:this.hidden,disabled:this.disabled};return this.options&&(e.options=this.options),e}_onSubItemSelected(){this.selected=!0}_onOptionsPathChanged(e){this.dispatchEvent("path-changed",e.detail)}optionsChanged(){void 0===this.options?.first&&void 0===this.options?.scroll||"select"!==this.mode||(this.selected=!0)}selectedChanged(){if("select"===this.mode&&!1===this.selected&&this.options){for(let e=0;e<this.options.length;e++)"select"!==this.options[e].mode&&"scroll"!==this.options[e].mode||(this.options[e].selected=!1);this.options.updatePaths()}}changed(){this.dispatchEvent("object-mutated",{object:this},!1,window)}dispose(){this.options&&(this.options.removeEventListener("item-selected",this._onSubItemSelected),this.options.removeEventListener("path-changed",this._onOptionsPathChanged)),super.dispose()}};__decorate$1([Property(void 0)],ht.prototype,"value",void 0),__decorate$1([Property("")],ht.prototype,"label",void 0),__decorate$1([Property("")],ht.prototype,"icon",void 0),__decorate$1([Property("")],ht.prototype,"hint",void 0),__decorate$1([Property(!1)],ht.prototype,"hidden",void 0),__decorate$1([Property(!1)],ht.prototype,"disabled",void 0),__decorate$1([Property(void 0)],ht.prototype,"action",void 0),__decorate$1([Property("select")],ht.prototype,"mode",void 0),__decorate$1([Property(!1)],ht.prototype,"selected",void 0),__decorate$1([Property(void 0)],ht.prototype,"options",void 0),ht=__decorate$1([Register],ht);class MenuItemTest{run(){describe("MenuItem",(()=>{it("Should initialize with correct default values",(()=>{const e=new ht;expect(e.value).to.be.equal(void 0),expect(e.label).to.be.equal("undefined"),expect(e.icon).to.be.equal(""),expect(e.hint).to.be.equal(""),expect(e.disabled).to.be.equal(!1),expect(e.action).to.be.equal(void 0),expect(e.mode).to.be.equal("select"),expect(e.selected).to.be.equal(!1),expect(e.options).to.be.eql(void 0)})),it("Should initialize correctly from constructor arguments",(()=>{let e=new ht(1);expect(e.value).to.be.equal(1),expect(e.label).to.be.equal("1"),expect(e.icon).to.be.equal(""),expect(e.hint).to.be.equal(""),expect(e.disabled).to.be.equal(!1),expect(e.action).to.be.equal(void 0),expect(e.mode).to.be.equal("select"),expect(e.selected).to.be.equal(!1),expect(e.options).to.be.eql(void 0),e=new ht("foo"),expect(e.value).to.be.equal("foo"),expect(e.label).to.be.equal("foo"),e=new ht(null),expect(e.value).to.be.equal(null),expect(e.label).to.be.equal("null"),e=new ht({value:null}),expect(e.value).to.be.equal(null),expect(e.label).to.be.equal("null"),e=new ht({}),expect(e.value).to.be.equal(void 0),expect(e.label).to.be.equal("undefined"),e=new ht({value:"foo",label:"bar",icon:"icon:close",hint:"buzz",disabled:!0,action:()=>{},mode:"toggle",selected:!0}),expect(e.value).to.be.equal("foo"),expect(e.label).to.be.equal("bar"),expect(e.icon).to.be.equal("icon:close"),expect(e.hint).to.be.equal("buzz"),expect(e.disabled).to.be.equal(!0),expect(typeof e.action).to.be.equal("function"),expect(e.mode).to.be.equal("toggle"),expect(e.selected).to.be.equal(!0),expect(e.options).to.be.eql(void 0)})),it("Should initialize suboptions from constructor arguments",(()=>{let e=new ht({options:[]});expect(e.hasmore).to.be.equal(!1),expect(e.options).to.be.eql([]),expect(e.options?.length).to.be.equal(0),e=new ht({options:[1,"2",null]}),expect(e.hasmore).to.be.equal(!0),expect(e.options[0].value).to.be.equal(1),expect(e.options[0].label).to.be.equal("1"),expect(e.options[1].value).to.be.equal("2"),expect(e.options[1].label).to.be.equal("2"),expect(e.options[2].value).to.be.equal(null),expect(e.options[2].label).to.be.equal("null"),e=new ht({options:[1,{value:"2",label:"two"},void 0]}),expect(e.options[0].value).to.be.equal(1),expect(e.options[0].label).to.be.equal("1"),expect(e.options[1].value).to.be.equal("2"),expect(e.options[1].label).to.be.equal("two"),expect(e.options[2].value).to.be.equal(void 0),expect(e.options[2].label).to.be.equal("undefined"),e=new ht({options:[1]}),expect(e.options[0].value).to.be.equal(1),expect(e.options[0].label).to.be.equal("1")})),it("Should return `options.path` from path getter",(()=>{let e=new ht;expect(e.options).to.be.equal(void 0),e=new ht({options:[]}),expect(e.options?.path).to.be.eql("")})),it("Should return subitem with specified value using `.getSubitem([value])`",(()=>{const e=new ht(1),t=new ht(2),o=new ht({options:[e,t]});expect(o.getSubitem(1)).to.be.equal(e),expect(o.getSubitem(2)).to.be.equal(t)}))}))}}const bt=[{value:1,options:[{value:"foo",options:[null,void 0,NaN]},{value:"bar",options:[null,void 0,NaN]},{value:"buzz",options:[null,void 0,NaN]}]},{value:2,options:[{value:"foo",options:[null,void 0,NaN]},{value:"bar",options:[null,void 0,NaN]},{value:"buzz",options:[null,void 0,NaN]}]},{value:3,options:[{value:"foo",options:[null,void 0,NaN]},{value:"bar",options:[null,void 0,NaN]},{value:"buzz",options:[null,void 0,NaN]}]},{value:"scrolls",options:[{value:"scroll1",mode:"scroll"},{value:"scroll2",mode:"scroll"},{value:"scroll3",mode:"scroll"}]}],vt=[];class MenuOptionsTest{run(){describe("MenuOptions",(()=>{it("Should initialize with correct default values",(()=>{const e=new dt;expect(e.path).to.be.eql(""),expect(e.first).to.be.equal(void 0),expect(e.last).to.be.equal(void 0),expect(e.delimiter).to.be.equal(","),expect(e.length).to.be.equal(0)})),it("Should initialize correctly from constructor arguments",(()=>{let e=new dt([1,"2",null]);expect(e.path).to.be.eql(""),expect(e.first).to.be.equal(void 0),expect(e.last).to.be.equal(void 0),expect(e.delimiter).to.be.equal(","),expect(e.length).to.be.equal(3),expect(e[0].value).to.be.equal(1),expect(e[0].label).to.be.equal("1"),expect(e[1].value).to.be.equal("2"),expect(e[1].label).to.be.equal("2"),expect(e[2].value).to.be.equal(null),expect(e[2].label).to.be.equal("null"),e=new dt([{value:"2",label:"two"}]),expect(e.length).to.be.equal(1),expect(e[0].value).to.be.equal("2"),expect(e[0].label).to.be.equal("two"),e=new dt([1,{value:"2",label:"two"}]),expect(e.length).to.be.equal(2),expect(e[0].value).to.be.equal(1),expect(e[0].label).to.be.equal("1"),expect(e[1].value).to.be.equal("2"),expect(e[1].label).to.be.equal("two")})),it("Should initialize correctly from constructor arguments including first, or path propetty",(()=>{let e=new dt([1,"2",null],{first:"2"});expect(e.path).to.be.equal("2"),expect(e.last).to.be.equal("2"),expect(e[1].selected).to.be.eql(!0),e=new dt([1,"2",null],{path:"1"}),expect(e.first).to.be.equal(1),expect(e.last).to.be.equal(1),expect(e[0].selected).to.be.eql(!0)})),it("Should initialize suboptions from constructor arguments",(()=>{const e=new dt([{options:[1,"2",null]}]);expect(e.length).to.be.equal(1),expect(e[0].hasmore).to.be.equal(!0),expect(e[0].options.length).to.be.equal(3),expect(e[0].options[0].value).to.be.equal(1),expect(e[0].options[1].value).to.be.equal("2"),expect(e[0].options[2].value).to.be.equal(null)})),it("Should return item with specified value using `.getItem([value])`",(()=>{const e=new ht(1),t=new ht(2),o=new dt([e,t]);expect(o.getItem(1)).to.be.equal(e),expect(o.getItem(2)).to.be.equal(t)})),it("Should update `path`, `first` and `last` properties when items are selected",(()=>{const e=new dt([1,2,3]);e[0].selected=!0,expect(e.path).to.be.equal("1"),expect(e.first).to.be.equal(1),expect(e.last).to.be.equal(1),e[1].selected=!0,expect(e.path).to.be.equal("2"),expect(e[0].selected).to.be.equal(!1),expect(e.first).to.be.equal(2),expect(e.last).to.be.equal(2),e[2].selected=!0,expect(e.path).to.be.equal("3"),expect(e[0].selected).to.be.equal(!1),expect(e[1].selected).to.be.equal(!1),expect(e.first).to.be.equal(3),expect(e.last).to.be.equal(3)})),it("Should update `first`, `last` and items' `selected` properties when `path` property is set",(()=>{const e=new dt([1,{value:2,label:"two"},3]);e.path="1",expect(e[0].selected).to.be.equal(!0),expect(e.first).to.be.equal(1),expect(e.last).to.be.equal(1),e.path="two",expect(e[0].selected).to.be.equal(!1),expect(e[1].selected).to.be.equal(!0),expect(e.first).to.be.equal(2),expect(e.last).to.be.equal(2),e.path="3",expect(e[0].selected).to.be.equal(!1),expect(e[1].selected).to.be.equal(!1),expect(e[2].selected).to.be.equal(!0),expect(e.first).to.be.equal(3),expect(e.last).to.be.equal(3)})),it("Should update `last`, `path` and items' `selected` properties when `first` property is set",(()=>{const e=new dt([1,{value:2,label:"two"},3]);e.first=1,expect(e.path).to.be.equal("1"),expect(e[0].selected).to.be.equal(!0),expect(e.first).to.be.equal(1),expect(e.last).to.be.equal(1),e.first=2,expect(e.path).to.be.equal("two"),expect(e[0].selected).to.be.equal(!1),expect(e[1].selected).to.be.equal(!0),expect(e.first).to.be.equal(2),expect(e.last).to.be.equal(2),e.first=3,expect(e.path).to.be.equal("3"),expect(e[0].selected).to.be.equal(!1),expect(e[1].selected).to.be.equal(!1),expect(e[2].selected).to.be.equal(!0),expect(e.first).to.be.equal(3),expect(e.last).to.be.equal(3)})),it('Should update `first`, `last`, `path` properties only when items with `mode="pick"` are selected',(()=>{const e=new dt([1,{value:2,mode:"toggle"},3]);e[0].selected=!0,expect(e.path).to.be.equal("1"),expect(e.first).to.be.equal(1),expect(e.last).to.be.equal(1),e[1].selected=!0,expect(e[0].selected).to.be.equal(!0),expect(e.path).to.be.equal("1"),expect(e.first).to.be.equal(1),expect(e.last).to.be.equal(1),e[2].selected=!0,expect(e[0].selected).to.be.equal(!1),expect(e[1].selected).to.be.equal(!0),expect(e[2].selected).to.be.equal(!0),expect(e.path).to.be.equal("3"),e[1].selected=!1,expect(e.path).to.be.equal("3"),expect(e[2].selected).to.be.equal(!0),expect(e.first).to.be.equal(3),expect(e.last).to.be.equal(3),e.first=2,expect(e.path).to.be.equal("3"),expect(e[2].selected).to.be.equal(!0),expect(e.first).to.be.equal(2),expect(e.last).to.be.equal(3),e[0].selected=!0,expect(e.path).to.be.equal("1"),expect(e.first).to.be.equal(1),expect(e.last).to.be.equal(1),e.path="2",expect(e[0].selected).to.be.equal(!0),expect(e[1].selected).to.be.equal(!1),expect(e.first).to.be.equal(1),expect(e.last).to.be.equal(1)})),it("Should update deep `first`, `last`, `scroll` and `path` string when items are selected",(()=>{const e=new dt(bt);e[0].selected=!0,expect(e.path).to.be.equal("1"),expect(e.first).to.be.equal(1),expect(e.last).to.be.equal(1),e[1].options[1].selected=!0,expect(e.path).to.be.equal("2,bar"),expect(e[1].options.path).to.be.equal("bar"),expect(e[0].selected).to.be.equal(!1),expect(e.first).to.be.equal(2),expect(e.last).to.be.equal("bar"),expect(e[1].options.first).to.be.equal("bar"),expect(e[1].options.last).to.be.equal("bar"),e[1].options[0].selected=!0,expect(e.path).to.be.equal("2,foo"),expect(e[1].options.path).to.be.equal("foo"),expect(e[1].options[1].selected).to.be.equal(!1),expect(e.first).to.be.equal(2),expect(e.last).to.be.equal("foo"),expect(e[1].options.first).to.be.equal("foo"),expect(e[1].options.last).to.be.equal("foo"),e[2].options[2].options[2].selected=!0,expect(e.path).to.be.equal("3,buzz,NaN"),expect(e[2].options.path).to.be.equal("buzz,NaN"),expect(e[2].options[2].options.path).to.be.equal("NaN"),expect(e[2].selected).to.be.equal(!0),expect(e[2].options[2].selected).to.be.equal(!0),expect(e[0].selected).to.be.equal(!1),expect(e[1].selected).to.be.equal(!1),expect(e[1].options[1].selected).to.be.equal(!1),expect(e.first).to.be.equal(3),expect(e.last).to.be.NaN,expect(e[2].options.first).to.be.equal("buzz"),expect(e[2].options.last).to.be.NaN,expect(e[2].options[2].options.first).to.be.NaN,expect(e[2].options[2].options.last).to.be.NaN,e[2].selected=!1,expect(e[2].options[2].selected).to.be.equal(!1),expect(e[2].options[2].options[2].selected).to.be.equal(!1),expect(e.path).to.be.equal(""),expect(e[2].options.path).to.be.equal(""),expect(e[2].options[2].options.path).to.be.equal(""),expect(e.first).to.be.equal(void 0),expect(e.last).to.be.equal(void 0),expect(e[2].options.first).to.be.equal(void 0),expect(e[2].options.last).to.be.equal(void 0),expect(e[2].options[2].options.first).to.be.equal(void 0),expect(e[2].options[2].options.last).to.be.equal(void 0),e[0].selected=!0,expect(e[1].selected).to.be.equal(!1),expect(e[2].selected).to.be.equal(!1),expect(e[1].options[1].selected).to.be.equal(!1),expect(e[2].options[2].selected).to.be.equal(!1),expect(e[2].options[2].options[2].selected).to.be.equal(!1),expect(e.path).to.be.equal("1"),expect(e[1].options.path).to.be.equal(""),expect(e[2].options.path).to.be.equal(""),expect(e[2].options[2].options.path).to.be.equal(""),expect(e.first).to.be.equal(1),expect(e.last).to.be.equal(1),e[3].options[1].selected=!0,expect(e[0].selected).to.be.equal(!1),expect(e[3].selected).to.be.equal(!0),expect(e.path).to.be.equal("scrolls,scroll2"),expect(e.first).to.be.equal("scrolls"),expect(e.last).to.be.equal("scrolls"),expect(e.scroll).to.be.equal("scroll2"),expect(e[3].options.path).to.be.equal("scroll2"),expect(e[3].options.first).to.be.equal(void 0),expect(e[3].options.last).to.be.equal(void 0),expect(e[3].options.scroll).to.be.equal("scroll2")})),it("Should update deep `first`, `last`, `scroll` and items' `selected` properties when `path` property is set",(()=>{const e=new dt(bt);e.path="1",expect(e[0].selected).to.be.equal(!0),expect(e.first).to.be.equal(1),expect(e.last).to.be.equal(1),e.path="2,bar",expect(e[1].options.path).to.be.equal("bar"),expect(e[0].selected).to.be.equal(!1),expect(e[1].selected).to.be.equal(!0),expect(e[1].options[1].selected).to.be.equal(!0),expect(e.first).to.be.equal(2),expect(e.last).to.be.equal("bar"),expect(e[1].options.first).to.be.equal("bar"),expect(e[1].options.last).to.be.equal("bar"),e.path="1,foo",expect(e[1].options.path).to.be.equal(""),expect(e[0].options.path).to.be.equal("foo"),expect(e[0].selected).to.be.equal(!0),expect(e[1].selected).to.be.equal(!1),expect(e[1].options[1].selected).to.be.equal(!1),expect(e[0].options[0].selected).to.be.equal(!0),expect(e.first).to.be.equal(1),expect(e.last).to.be.equal("foo"),expect(e[1].options.first).to.be.equal(void 0),expect(e[1].options.last).to.be.equal(void 0),expect(e[0].options.first).to.be.equal("foo"),expect(e[0].options.last).to.be.equal("foo"),e.path="1,buzz",expect(e[1].options.path).to.be.equal(""),expect(e[0].options.path).to.be.equal("buzz"),expect(e[0].selected).to.be.equal(!0),expect(e[2].selected).to.be.equal(!1),expect(e[1].options[1].selected).to.be.equal(!1),expect(e[0].options[2].selected).to.be.equal(!0),expect(e.first).to.be.equal(1),expect(e.last).to.be.equal("buzz"),expect(e[0].options.first).to.be.equal("buzz"),expect(e[0].options.last).to.be.equal("buzz"),e.path="",expect(e[0].options.path).to.be.equal(""),expect(e[0].selected).to.be.equal(!1),expect(e[0].options[0].selected).to.be.equal(!1),expect(e.first).to.be.equal(void 0),expect(e.last).to.be.equal(void 0),expect(e[0].options.first).to.be.equal(void 0),expect(e[0].options.last).to.be.equal(void 0),e.path="3,buzz,NaN",expect(e[1].options.path).to.be.equal(""),expect(e[2].options.path).to.be.equal("buzz,NaN"),expect(e[2].options[2].options.path).to.be.equal("NaN"),expect(e[0].selected).to.be.equal(!1),expect(e[1].selected).to.be.equal(!1),expect(e[1].options[1].selected).to.be.equal(!1),expect(e[2].selected).to.be.equal(!0),expect(e[2].options[2].selected).to.be.equal(!0),expect(e[2].options[2].options[2].selected).to.be.equal(!0),expect(e.first).to.be.equal(3),expect(e.last).to.be.NaN,expect(e[1].options.first).to.be.equal(void 0),expect(e[1].options.last).to.be.equal(void 0),expect(e[2].options.first).to.be.equal("buzz"),expect(e[2].options.last).to.be.NaN,expect(e[2].options[2].options.first).to.be.NaN,expect(e[2].options[2].options.last).to.be.NaN,e.path="3,buzz,null",expect(e[1].options.path).to.be.equal(""),expect(e[2].options.path).to.be.equal("buzz,null"),expect(e[2].options[2].options.path).to.be.equal("null"),expect(e[0].selected).to.be.equal(!1),expect(e[1].selected).to.be.equal(!1),expect(e[1].options[1].selected).to.be.equal(!1),expect(e[2].selected).to.be.equal(!0),expect(e[2].options[2].selected).to.be.equal(!0),expect(e[2].options[2].options[0].selected).to.be.equal(!0),expect(e.first).to.be.equal(3),expect(e.last).to.be.equal(null),expect(e[1].options.first).to.be.equal(void 0),expect(e[1].options.last).to.be.equal(void 0),expect(e[2].options.first).to.be.equal("buzz"),expect(e[2].options.last).to.be.equal(null),expect(e[2].options[2].options.first).to.be.equal(null),expect(e[2].options[2].options.last).to.be.equal(null),e.path="scrolls,scroll1",expect(e[2].options.path).to.be.equal(""),expect(e[2].selected).to.be.equal(!1),expect(e[3].options.path).to.be.equal("scroll1"),expect(e[3].options.first).to.be.equal(void 0),expect(e[3].options.last).to.be.equal(void 0),expect(e[3].options.scroll).to.be.equal("scroll1"),expect(e[3].options[0].selected).to.be.equal(!0),expect(e.first).to.be.equal("scrolls"),expect(e.last).to.be.equal("scrolls"),expect(e.scroll).to.be.equal("scroll1"),e.path="scrolls",expect(e.first).to.be.equal("scrolls"),expect(e.last).to.be.equal("scrolls"),expect(e.scroll).to.be.equal(void 0)})),it("Should update deep `last`, `path` and items' `selected` properties when `first` property is set",(()=>{const e=new dt(bt);e.first=1,expect(e[0].selected).to.be.equal(!0),expect(e.first).to.be.equal(1),expect(e.last).to.be.equal(1),e[1].options.first="bar",expect(e[1].options.path).to.be.equal("bar"),expect(e[0].selected).to.be.equal(!1),expect(e[1].selected).to.be.equal(!0),expect(e[1].options[1].selected).to.be.equal(!0),expect(e[2].selected).to.be.equal(!1),expect(e.first).to.be.equal(2),expect(e.last).to.be.equal("bar"),expect(e[1].options.first).to.be.equal("bar"),expect(e[1].options.last).to.be.equal("bar"),e.first=void 0,expect(e[1].options.path).to.be.equal(""),expect(e[1].selected).to.be.equal(!1),expect(e[1].options[1].selected).to.be.equal(!1),expect(e.first).to.be.equal(void 0),expect(e.last).to.be.equal(void 0),expect(e[1].options.first).to.be.equal(void 0),expect(e[1].options.last).to.be.equal(void 0),e[2].options[2].options.first=null,expect(e[1].options.path).to.be.equal(""),expect(e[2].options.path).to.be.equal("buzz,null"),expect(e[2].options[2].options.path).to.be.equal("null"),expect(e[0].selected).to.be.equal(!1),expect(e[1].selected).to.be.equal(!1),expect(e[1].options[1].selected).to.be.equal(!1),expect(e[2].selected).to.be.equal(!0),expect(e[2].options[2].selected).to.be.equal(!0),expect(e[2].options[2].options[0].selected).to.be.equal(!0),expect(e.first).to.be.equal(3),expect(e.last).to.be.equal(null),expect(e[1].options.first).to.be.equal(void 0),expect(e[1].options.last).to.be.equal(void 0),expect(e[2].options.first).to.be.equal("buzz"),expect(e[2].options.last).to.be.equal(null),expect(e[2].options[2].options.first).to.be.equal(null),expect(e[2].options[2].options.last).to.be.equal(null)})),it("Should update `path`, `first` and `last` on initialization when selected items are provided.",(()=>{const e=JSON.parse(JSON.stringify(bt));e[1].options[2].options[0]={value:null,selected:!0};const t=new dt(e);expect(t[1].selected).to.be.equal(!0),expect(t.path).to.be.equal("2,buzz,null"),expect(t.first).to.be.equal(2),expect(t.last).to.be.equal(null),expect(t[1].options[2].selected).to.be.equal(!0),expect(t[1].options.path).to.be.equal("buzz,null"),expect(t[1].options.first).to.be.equal("buzz"),expect(t[1].options.last).to.be.equal(null),expect(t[1].options[2].options[0].selected).to.be.equal(!0),expect(t[1].options[2].options.path).to.be.equal("null"),expect(t[1].options[2].options.first).to.be.equal(null),expect(t[1].options[2].options.last).to.be.equal(null)})),it("Should update `path`, `first` and `last` properties in correct order and only when necessary.",(()=>{const e=new dt(bt);e.addEventListener("changed",(()=>{vt.push("change")})),e.addEventListener("path-changed",(()=>{vt.push("path changed: "+e.path)})),e.addEventListener("first-changed",(()=>{vt.push("firstChanged: "+e.first)})),e.addEventListener("last-changed",(()=>{vt.push("lastChanged: "+e.last)})),vt.length=0,e[0].selected=!0,expect(vt).to.be.eql(["path changed: 1","firstChanged: 1","lastChanged: 1","change"]),vt.length=0,e[1].options[1].selected=!0,expect(vt).to.be.eql(["path changed: 2,bar","firstChanged: 2","lastChanged: bar","change"]),vt.length=0,e[2].options[2].options[2].selected=!0,expect(vt).to.be.eql(["path changed: 3,buzz,NaN","firstChanged: 3","lastChanged: NaN","change"]),vt.length=0,e[2].selected=!1,expect(vt).to.be.eql(["path changed: ","firstChanged: undefined","lastChanged: undefined","change"]),vt.length=0,e[2].selected=!0,expect(vt).to.be.eql(["path changed: 3","firstChanged: 3","lastChanged: 3","change"])}))}))}}class MenuElementTest{run(){(new MenuItemTest).run(),(new MenuOptionsTest).run()}}class NumberSliderRangeElementTest{element=new j;constructor(){this.element.style.display="none",document.body.appendChild(this.element)}reset(){this.element.value=[0,1],this.element.step=.01,this.element.min=0,this.element.max=1}run(){describe("IoNumberSliderRange",(()=>{describe("default values",(()=>{it("has default values",(()=>{this.reset(),expect(this.element.value[0]).to.equal(0),expect(this.element.value[1]).to.equal(1),expect(this.element.step).to.equal(.01),expect(this.element.min).to.equal(0),expect(this.element.max).to.equal(1)}))})),describe("innerText",(()=>{it("matches values",(()=>{this.reset(),this.element.value=[0,1],expect(this.element.$.number0.innerText).to.equal("0"),this.element.value=[1,1],expect(this.element.$.number0.innerText).to.equal("1"),expect(this.element.$.number1.innerText).to.equal("1"),this.element.value=[0,.1],expect(this.element.$.number1.innerText).to.equal("0.1"),this.element.value=[0,.001],expect(this.element.$.number1.innerText).to.equal("0")}))})),describe("attributes",(()=>{it("has tabindex attribute",(()=>{this.reset(),expect(this.element.$.number0.getAttribute("tabindex")).to.equal("0"),expect(this.element.$.slider.getAttribute("tabindex")).to.equal("0")})),it("has contenteditable attribute on number field",(()=>{this.reset(),expect(this.element.getAttribute("contenteditable")).to.equal(null),expect(this.element.$.number0.getAttribute("contenteditable")).to.equal(""),expect(this.element.$.number1.getAttribute("contenteditable")).to.equal(""),expect(this.element.$.slider.getAttribute("contenteditable")).to.equal(null)})),it("has a11y attributes",(()=>{this.reset(),expect(this.element.$.slider.getAttribute("role")).to.equal("slider"),this.element.min=0,expect(this.element.$.slider.getAttribute("aria-valuemin")).to.equal("0"),this.element.max=1,expect(this.element.$.slider.getAttribute("aria-valuemax")).to.equal("1"),this.reset()}))}))}))}}class NumberSliderElementTest{element=new L;constructor(){this.element.style.display="none",document.body.appendChild(this.element),this.element.$.slider.lazy=!1}reset(){this.element.value=0,this.element.step=.001,this.element.min=0,this.element.max=1}run(){describe("IoNumberSlider",(()=>{describe("default values",(()=>{it("has default values",(()=>{expect(this.element.value).to.equal(0),expect(this.element.step).to.equal(.01),expect(this.element.min).to.equal(0),expect(this.element.max).to.equal(1)}))})),describe("innerText",(()=>{it("matches values",(()=>{this.element.value=0,expect(this.element.$.number.innerText).to.equal("0"),this.element.value=1,expect(this.element.$.number.innerText).to.equal("1"),this.element.value=.1,expect(this.element.$.number.innerText).to.equal("0.1"),this.element.value=.01,expect(this.element.$.number.innerText).to.equal("0.01"),this.element.value=.001,expect(this.element.$.number.innerText).to.equal("0")}))})),describe("attributes",(()=>{it("has tabindex attribute",(()=>{expect(this.element.$.number.getAttribute("tabindex")).to.equal("0"),expect(this.element.$.slider.getAttribute("tabindex")).to.equal("0")})),it("has contenteditable attribute on number field",(()=>{expect(this.element.getAttribute("contenteditable")).to.equal(null),expect(this.element.$.number.getAttribute("contenteditable")).to.equal(""),expect(this.element.$.slider.getAttribute("contenteditable")).to.equal(null)})),it("has a11y attributes",(()=>{expect(this.element.$.slider.getAttribute("role")).to.equal("slider"),this.element.value=.1,expect(this.element.$.slider.getAttribute("aria-valuenow")).to.equal("0.1"),this.element.min=0,expect(this.element.$.slider.getAttribute("aria-valuemin")).to.equal("0"),this.element.max=1,expect(this.element.$.slider.getAttribute("aria-valuemax")).to.equal("1"),this.reset()}))}))}))}}class SliderRangeElementTest{element=new M({value:[0,0]});constructor(){this.element.style.display="none",document.body.appendChild(this.element),this.element.lazy=!1}reset(){this.element.value=[0,1],this.element.step=.01,this.element.min=0,this.element.max=1}run(){describe("IoSliderRange",(()=>{describe("default values",(()=>{it("has default values",(()=>{this.reset(),expect(this.element.value[0]).to.equal(0),expect(this.element.value[1]).to.equal(1),expect(this.element.step).to.equal(.01),expect(this.element.min).to.equal(0),expect(this.element.max).to.equal(1)}))})),describe("attributes",(()=>{it("has tabindex attribute",(()=>{expect(this.element.getAttribute("tabindex")).to.equal("0")})),it("has contenteditable attribute on number field",(()=>{expect(this.element.getAttribute("contenteditable")).to.equal(null)})),it("has a11y attributes",(()=>{this.reset(),expect(this.element.getAttribute("role")).to.equal("slider"),this.element.min=0,expect(this.element.getAttribute("aria-valuemin")).to.equal("0"),this.element.max=1,expect(this.element.getAttribute("aria-valuemax")).to.equal("1")}))}))}))}}const gt=new k;gt.lazy=!1;class SliderElementTest{run(){describe("IoSlider",(()=>{describe("Initialization",(()=>{it("Should initialize property definitions correctly",(()=>{expect(gt.value).to.equal(0),expect(gt.step).to.equal(.01),expect(gt.min).to.equal(0),expect(gt.max).to.equal(1)})),it("has correct default attributes",(()=>{expect(gt.getAttribute("tabindex")).to.equal("0"),expect(gt.getAttribute("contenteditable")).to.equal(null)})),it("has correct default innerHTML",(()=>{}))})),describe("Reactivity",(()=>{it("should render innerHTML",(()=>{})),it("should change...",(()=>{})),it("has reactive attributes",(()=>{}))})),describe("Accessibility",(()=>{it("has a11y attributes",(()=>{expect(gt.getAttribute("role")).to.equal("slider"),gt.value=.1,expect(gt.getAttribute("aria-valuenow")).to.equal("0.1"),gt.min=0,expect(gt.getAttribute("aria-valuemin")).to.equal("0"),gt.max=1,expect(gt.getAttribute("aria-valuemax")).to.equal("1")}))}))}))}}class SlidersElementTest{run(){(new NumberSliderRangeElementTest).run(),(new NumberSliderElementTest).run(),(new SliderRangeElementTest).run(),(new SliderElementTest).run()}}class ElementsTests{run(){(new BasicElementTest).run(),(new ColorElementTest).run(),(new MenuElementTest).run(),(new SlidersElementTest).run()}}var __decorate=function(e,t,o,n){var i,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(r=(s<3?i(r):s>3?i(t,o,r):i(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r};mocha.setup("bdd");const ft=document.createElement("div");ft.setAttribute("id","mocha"),document.body.appendChild(ft),ft.style.display="none";let xt=!1;async function nextTick(){return new Promise((e=>{setTimeout((()=>{e()}))}))}async function afterHashChange(){return new Promise((e=>{self.addEventListener("hashchange",(()=>{e()}),{once:!0})}))}let yt=class IoGuiTestPage extends p{static get Style(){return"\n      :host {\n        background: var(--iotBackgroundColor);\n        color: var(--iotColor);\n      }\n      :host #mocha {\n        margin: 0 var(--iotLineHeight);\n        position: relative;\n      }\n      :host #mocha-report {\n        margin: 2em 1em;\n      }\n      :host #mocha-stats {\n        position: absolute;\n        top: -2em;\n        left: var(--iotSpacing2);\n        font-size: 12px;\n        margin: 0;\n      }\n      :host #mocha-stats em {\n        color: var(--iotColor);\n      }\n      :host #mocha-stats li {\n        padding: 0;\n      }\n      :host #mocha-stats .progress {\n        display: none;\n      }\n      :host #mocha-stats .passes {\n        color: #0c0;\n      }\n      :host #mocha-stats .failures {\n        color: #f00;\n        font-weight: bold;\n      }\n      :host h2 {\n        padding-right: 2em;\n      }\n      :host .replay {\n        display: none !important;\n      }\n    "}connectedCallback(){super.connectedCallback(),this.appendChild(ft),ft.style.display="block",function runTests(){xt||((new CoreTests).run(),(new ElementsTests).run(),mocha.checkLeaks(),mocha.run(),xt=!0)}()}disconnectedCallback(){super.disconnectedCallback(),document.body.appendChild(ft),ft.style.display="none"}};yt=__decorate([o],yt);export{yt as IoGuiTestPage,afterHashChange,nextTick};
