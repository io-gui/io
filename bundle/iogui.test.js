import{IoNodeMixin as e,ProtoChain as t,IoNode as n,IoElement as i,RegisterIoNode as a,ProtoProperty as o,Property as c,Binding as l,assignProtoProperty as r,EventDispatcher as s,ChangeQueue as p,RegisterIoElement as d}from"./iogui.js";class h extends Array{}class u extends h{}class b extends u{}class v{}class q extends v{}class x extends q{}class g extends HTMLElement{}class w extends g{}class y extends w{}class f extends n{}class m extends i{}class C extends(e(x)){}class E{static get Properties(){return{prop1:{notify:!1}}}static get Listeners(){return{listener1:"function1",listener2:"",listener3:["_function1",{capture:!0}],listener4:()=>{}}}static get Style(){return"a"}function1(){}onFunction1(){}_function1(){}}class S extends E{function2(){}onFunction2(){}_function2(){}static get Properties(){return{prop1:{observe:!0},prop2:{}}}static get Listeners(){return{listener1:"_function2",listener2:["function2",{capture:!0,passive:!0}],listener3:["_function1",{passive:!0}]}}static get Style(){return"b"}}class L extends S{}class P{run(){describe("ProtoChain",(()=>{it("Should include an array of inherited class constructors",(()=>{let e=new t(b).constructors;chai.expect(e).to.be.eql([b,u,h]),e=new t(x).constructors,chai.expect(e).to.be.eql([x,q,v]),e=new t(y).constructors,chai.expect(e).to.be.eql([y,w,g]),e=new t(f).constructors,chai.expect(e).to.be.eql([f,n]),e=new t(m).constructors,chai.expect(e).to.be.eql([m,i]),e=new t(C).constructors,chai.expect(e).to.be.eql([C])})),it('Should include an array of function names that start with "on" or "_" for auto-binding',(()=>{let e=new t(f);chai.expect(e.functions).to.be.eql([]),e=new t(E),chai.expect(e.functions).to.be.eql(["onFunction1","_function1"]),e=new t(S),chai.expect(e.functions).to.be.eql(["onFunction2","_function2","onFunction1","_function1"])})),it("Should bind all auto-binding functions from the `.functions` array with `.bindFunctions(node)` function",(()=>{const e=new t(S),n=new S;e.bindFunctions(n),chai.expect(n.function1.name).to.be.equal("function1"),chai.expect(n.onFunction1.name).to.be.equal("bound onFunction1"),chai.expect(n._function1.name).to.be.equal("bound _function1"),chai.expect(n.function2.name).to.be.equal("function2"),chai.expect(n.onFunction2.name).to.be.equal("bound onFunction2"),chai.expect(n._function2.name).to.be.equal("bound _function2")})),it("Should include all property definitions declared in `static get Properties()` return oject",(()=>{let e=new t(E);chai.expect(Object.keys(e.properties)).to.be.eql(["prop1"]),chai.expect(e.properties).to.be.eql({prop1:{value:void 0,type:void 0,binding:void 0,notify:!1,reflect:0,observe:!1}}),e=new t(S),chai.expect(Object.keys(e.properties)).to.be.eql(["prop1","prop2"]),chai.expect(e.properties).to.be.eql({prop1:{value:void 0,type:void 0,binding:void 0,notify:!1,reflect:0,observe:!0},prop2:{value:void 0,type:void 0,binding:void 0,notify:!0,reflect:0,observe:!1}})})),it("Should include all listner definitions declared in `static get Listeners()` return oject",(()=>{let e=new t(E);chai.expect(Object.keys(e.listeners)).to.be.eql(["listener1","listener3","listener4"]),chai.expect(e.listeners.listener1).to.be.eql([["function1"]]),chai.expect(e.listeners.listener3).to.be.eql([["_function1",{capture:!0}]]),chai.expect(String(e.listeners.listener4)).to.be.eql(String([[()=>{}]])),e=new t(S),chai.expect(Object.keys(e.listeners)).to.be.eql(["listener1","listener3","listener4","listener2"]),chai.expect(e.listeners.listener1).to.be.eql([["function1"],["_function2"]]),chai.expect(e.listeners.listener2).to.be.eql([["function2",{capture:!0,passive:!0}]]),chai.expect(e.listeners.listener3).to.be.eql([["_function1",{capture:!0,passive:!0}]]),chai.expect(String(e.listeners.listener4)).to.be.eql(String([[()=>{}]]))})),it("Should include all style strings declared in `static get Style()` return string",(()=>{let e=new t(E);chai.expect(e.style).to.be.equal("a\n"),e=new t(S),chai.expect(e.style).to.be.equal("a\nb\n"),e=new t(L),chai.expect(e.style).to.be.equal("a\nb\n")})),it("Should include all property names of observed object properties",(()=>{let e=new t(E);chai.expect(e.observedObjects).to.be.eql([]),e=new t(S),chai.expect(e.observedObjects).to.be.eql(["prop1"])}))}))}}class D{prop=!0}class T extends n{static get Properties(){return{label:""}}}a(T);class _{run(){describe("Property",(()=>{it("Should initialize correct property definitions and values from weakly typed property definitions",(()=>{let e,t;e=new o({}),t=new c(e),chai.expect(e).to.be.eql(t).to.be.eql({value:void 0,type:void 0,binding:void 0,reflect:0,notify:!0,observe:!1}),e=new o(null),t=new c(e),chai.expect(e).to.be.eql(t).to.be.eql({value:null,type:void 0,binding:void 0,reflect:0,notify:!0,observe:!1}),e=new o(void 0),t=new c(e),chai.expect(e).to.be.eql(t).to.be.eql({value:void 0,type:void 0,binding:void 0,reflect:0,notify:!0,observe:!1}),e=new o(Number),t=new c(e),chai.expect(t).to.be.eql(e).to.be.eql({value:0,type:Number,binding:void 0,reflect:0,notify:!0,observe:!1}),e=new o({type:Number}),t=new c(e),chai.expect(t).to.be.eql(e).to.be.eql({value:0,type:Number,binding:void 0,reflect:0,notify:!0,observe:!1}),e=new o(1),t=new c(e),chai.expect(t).to.be.eql(e).to.be.eql({value:1,type:Number,binding:void 0,reflect:0,notify:!0,observe:!1}),e=new o({value:2}),t=new c(e),chai.expect(t).to.be.eql(e).to.be.eql({value:2,type:Number,binding:void 0,reflect:0,notify:!0,observe:!1}),e=new o(String),t=new c(e),chai.expect(t).to.be.eql(e).to.be.eql({value:"",type:String,binding:void 0,reflect:0,notify:!0,observe:!1}),e=new o({type:String}),t=new c(e),chai.expect(t).to.be.eql(e).to.be.eql({value:"",type:String,binding:void 0,reflect:0,notify:!0,observe:!1}),e=new o("test"),t=new c(e),chai.expect(t).to.be.eql(e).to.be.eql({value:"test",type:String,binding:void 0,reflect:0,notify:!0,observe:!1}),e=new o({value:"test"}),t=new c(e),chai.expect(t).to.be.eql(e).to.be.eql({value:"test",type:String,binding:void 0,reflect:0,notify:!0,observe:!1}),e=new o(Boolean),t=new c(e),chai.expect(t).to.be.eql(e).to.be.eql({value:!1,type:Boolean,binding:void 0,reflect:0,notify:!0,observe:!1}),e=new o({type:Boolean}),t=new c(e),chai.expect(t).to.be.eql(e).to.be.eql({value:!1,type:Boolean,binding:void 0,reflect:0,notify:!0,observe:!1}),e=new o(!0),t=new c(e),chai.expect(t).to.be.eql(e).to.be.eql({value:!0,type:Boolean,binding:void 0,reflect:0,notify:!0,observe:!1}),e=new o({value:!0}),t=new c(e),chai.expect(t).to.be.eql(e).to.be.eql({value:!0,type:Boolean,binding:void 0,reflect:0,notify:!0,observe:!1}),e=new o(Object),t=new c(e),chai.expect(t).to.be.eql(e).to.be.eql({value:{},type:Object,binding:void 0,reflect:0,notify:!0,observe:!1}),e=new o({type:Object}),t=new c(e),chai.expect(t).to.be.eql(e).to.be.eql({value:{},type:Object,binding:void 0,reflect:0,notify:!0,observe:!1});const n={prop:!0};e=new o({value:n}),t=new c(e),chai.expect(t).to.be.eql(e).to.be.eql({value:{prop:!0},type:Object,binding:void 0,reflect:0,notify:!0,observe:!1}),chai.expect(e.value).to.equal(n),chai.expect(t.value).not.to.equal(n),e=new o(Array),t=new c(e),chai.expect(t).to.be.eql(e).to.be.eql({value:[],type:Array,binding:void 0,reflect:0,notify:!0,observe:!1}),e=new o({type:Array}),t=new c(e),chai.expect(t).to.be.eql(e).to.be.eql({value:[],type:Array,binding:void 0,reflect:0,notify:!0,observe:!1}),e=new o(D),t=new c(e),chai.expect(t).to.be.eql(e).to.be.eql({value:new D,type:D,binding:void 0,reflect:0,notify:!0,observe:!1});const i=[1,2,3];e=new o({value:i}),t=new c(e),chai.expect(t).to.be.eql(e).to.be.eql({value:[1,2,3],type:Array,binding:void 0,reflect:0,notify:!0,observe:!1}),chai.expect(e.value).to.equal(i),chai.expect(t.value).not.to.equal(i);const a=new D;e=new o({value:a}),t=new c(e),chai.expect(t).to.be.eql(e).to.be.eql({value:new D,type:D,binding:void 0,reflect:0,notify:!0,observe:!1}),chai.expect(e.value).to.equal(a),chai.expect(t.value).not.to.equal(a),e=new o({type:D}),t=new c(e),chai.expect(t).to.be.eql(e).to.be.eql({value:{prop:!0},type:D,binding:void 0,reflect:0,notify:!0,observe:!1}),e=new o({reflect:-1,notify:!1,observe:!0}),t=new c(e),chai.expect(e).to.be.eql(t).to.be.eql({value:void 0,type:void 0,binding:void 0,reflect:-1,notify:!1,observe:!0})})),it("Should initialize properties with binding correctly",(()=>{let e,t,n=new l(new T({label:"lorem"}),"label");e=new o(n),t=new c(e),chai.expect(e).to.be.eql(t).to.be.eql({value:"lorem",type:String,binding:n,reflect:0,notify:!0,observe:!1}),n=new l(new T({label:"lorem"}),"label"),e=new o({binding:n,value:"ipsum"}),t=new c(e),chai.expect(e).to.be.eql(t).to.be.eql({value:"lorem",type:String,binding:n,reflect:0,notify:!0,observe:!1})})),it("Should assign property definitions correctly",(()=>{const e=new l(new T({label:"lorem"}),"label");let t=new o({}),n=new o({value:"lorem",type:String,binding:e,reflect:2,notify:!1,observe:!0});r(t,n),chai.expect(t).to.be.eql(n),t=new o({}),n=new o({value:"lorem",type:String,binding:e,reflect:2,notify:!1,observe:!0}),r(n,t),chai.expect(t).to.be.eql({value:void 0,type:void 0,binding:void 0,reflect:0,notify:!0,observe:!1}),chai.expect(n).to.be.eql({value:"lorem",type:String,binding:e,reflect:2,notify:!1,observe:!0})}))}))}}class j extends n{static get Properties(){return{prop1:0,prop2:0}}}a(j);class k{run(){describe("Binding",(()=>{it("Should initialize with correct default values",(()=>{const e=new j,t=new l(e,"prop1");chai.expect(t.node).to.be.equal(e),chai.expect(t.property).to.be.equal("prop1"),chai.expect(t.targets instanceof Array).to.be.equal(!0),chai.expect(t.targets.length).to.be.equal(0),chai.expect(t.targetProperties instanceof WeakMap).to.be.equal(!0)})),it("Should get and set property value on source node with `value` getter/setter",(()=>{const e=new j,t=new l(e,"prop1");e.prop1=1,chai.expect(t.value).to.be.equal(1),e.prop1=2,chai.expect(t.value).to.be.equal(2),t.value=3,chai.expect(e.prop1).to.be.equal(3)})),it("Should add/remove target nodes and properties with `.addTarget()` and `removeTarget()`",(()=>{const e=new j,t=new l(e,"prop1"),n=new l(e,"prop2"),i=new j,a=new j;t.addTarget(i,"prop1"),n.addTarget(i,"prop2"),n.addTarget(a,"prop1"),n.addTarget(a,"prop2"),chai.expect(t.targets[0]).to.be.equal(i),chai.expect(t.targets[1]).to.be.equal(void 0),chai.expect(n.targets[0]).to.be.equal(i),chai.expect(n.targets[1]).to.be.equal(a),chai.expect(n.targets[2]).to.be.equal(void 0);const o=t.getTargetProperties(i),c=t.getTargetProperties(a);chai.expect(o[0]).to.be.equal("prop1"),chai.expect(o.length).to.be.equal(1),chai.expect(c.length).to.be.equal(0);const r=n.getTargetProperties(i),s=n.getTargetProperties(a);chai.expect(r[0]).to.be.equal("prop2"),chai.expect(r.length).to.be.equal(1),chai.expect(s[0]).to.be.equal("prop1"),chai.expect(s[1]).to.be.equal("prop2"),chai.expect(s.length).to.be.equal(2),n.removeTarget(a,"prop1"),chai.expect(s[0]).to.be.equal("prop2"),chai.expect(s.length).to.be.equal(1),n.addTarget(a,"prop1"),n.removeTarget(a),chai.expect(s.length).to.be.equal(0)})),it("Should dispose correctly",(()=>{const e=new j,t=new l(e,"prop1");t.dispose(),chai.expect(t.node).to.be.equal(void 0),chai.expect(t.property).to.be.equal(void 0),chai.expect(t.targets).to.be.equal(void 0),chai.expect(t.targetProperties).to.be.equal(void 0)}))}))}}const O=()=>{};class F extends n{handler1Count=0;handler1Detail;static get Listeners(){return{event1:"handler1"}}handler1(e){this.handler1Count++,this.handler1Detail=e.detail}}a(F);class N extends F{handler2Count=0;handler3Count=0;handler2Detail;handler3Detail;static get Listeners(){return{event2:["handler2",{capture:!0}]}}handler2(e){this.handler2Count++,this.handler2Detail=e.detail}handler3(e){this.handler3Count++,this.handler3Detail=e.detail}}a(N);class A extends N{static get Listeners(){return{event1:"handler3",event2:[O,{passive:!0}],event3:O}}}a(A);class B extends HTMLElement{handler3Count=0;handler3Detail;handler3(e){this.handler3Count++,this.handler3Detail=e.detail}}window.customElements.define("test-div-event-dispatch",B);class z{run(){describe("EventDispatcher",(()=>{it("Should initialize with correct values",(()=>{const e={};let t=new s(e);chai.expect(t.node).to.be.equal(e),chai.expect(t.protoListeners).to.be.eql({}),chai.expect(t.propListeners).to.be.eql({}),chai.expect(t.addedListeners).to.be.eql({}),chai.expect(t.isEventTarget).to.be.eql(!1);const n=document.createElement("div");t=new s(n),chai.expect(t.node).to.be.equal(n),chai.expect(t.protoListeners).to.be.eql({}),chai.expect(t.propListeners).to.be.eql({}),chai.expect(t.addedListeners).to.be.eql({}),chai.expect(t.isEventTarget).to.be.equal(!0)})),it("Should initialize listeners from ProtoChain",(()=>{let e=new F,t=new s(e);chai.expect(t.protoListeners).to.be.eql({event1:[[e.handler1]]}),e=new N,t=new s(e),chai.expect(t.protoListeners).to.be.eql({event1:[[e.handler1]],event2:[[e.handler2,{capture:!0}]]}),e=new A,t=new s(e),chai.expect(t.protoListeners).to.be.eql({event1:[[e.handler3]],event2:[[O,{passive:!0}]],event3:[[O]]})})),it("Should set property listeners correctly",(()=>{const e=new N,t=new s(e),n=()=>{},i=()=>{};t.applyPropListeners({"on-event3":"handler3","on-event4":n}),chai.expect(t.propListeners).to.be.eql({event3:[[e.handler3]],event4:[[n]]}),t.applyPropListeners({"on-event5":["handler3"],"on-event6":[n]}),chai.expect(t.propListeners).to.be.eql({event5:[[e.handler3]],event6:[[n]]}),t.applyPropListeners({"on-event7":[e.handler3,{capture:!0}],"on-event8":[i,{capture:!0}]}),chai.expect(t.propListeners).to.be.eql({event7:[[e.handler3,{capture:!0}]],event8:[[i,{capture:!0}]]}),t.applyPropListeners({}),chai.expect(t.propListeners).to.be.eql({})})),it("Should add/remove listeners correctly",(()=>{const e=new N,t=new s(e),n=()=>{},i=()=>{};t.addEventListener("event1",n),t.addEventListener("event1",i,{capture:!0}),chai.expect(t.addedListeners).to.be.eql({event1:[[n],[i,{capture:!0}]]}),t.removeEventListener("event1",n),chai.expect(t.addedListeners).to.be.eql({event1:[[i,{capture:!0}]]}),t.removeEventListener("event1"),chai.expect(t.addedListeners).to.be.eql({})})),it("Should dispatch added events",(()=>{const e=new N,t=new s(e);let n=0;const i=()=>{n++};let a=0;const o=()=>{a++};t.applyPropListeners({"on-event3":"handler3","on-event4":i}),t.addEventListener("event5",o),t.dispatchEvent("event1"),t.dispatchEvent("event2"),t.dispatchEvent("event3"),t.dispatchEvent("event4"),t.dispatchEvent("event5"),chai.expect(e.handler1Count).to.be.equal(1),chai.expect(e.handler2Count).to.be.equal(1),chai.expect(e.handler3Count).to.be.equal(1),chai.expect(n).to.be.equal(1),chai.expect(a).to.be.equal(1),t.applyPropListeners({"on-event4":i}),t.removeEventListener("event5",o),t.dispatchEvent("event1"),t.dispatchEvent("event2"),t.dispatchEvent("event3"),t.dispatchEvent("event4"),t.dispatchEvent("event5"),chai.expect(e.handler1Count).to.be.equal(2),chai.expect(e.handler2Count).to.be.equal(2),chai.expect(e.handler3Count).to.be.equal(1),chai.expect(n).to.be.equal(2),chai.expect(a).to.be.equal(1)})),it("Should dispatch events with correct event detail",(()=>{const e=new N,t=new s(e);let n;let i;t.applyPropListeners({"on-event3":"handler3","on-event4":e=>{n=e.detail}}),t.addEventListener("event5",(e=>{i=e.detail})),t.dispatchEvent("event1","detail1"),t.dispatchEvent("event2","detail2"),t.dispatchEvent("event3","detail3"),t.dispatchEvent("event4","detail4"),t.dispatchEvent("event5","detail5"),chai.expect(e.handler1Detail).to.be.equal("detail1"),chai.expect(e.handler2Detail).to.be.equal("detail2"),chai.expect(e.handler3Detail).to.be.equal("detail3"),chai.expect(n).to.be.equal("detail4"),chai.expect(i).to.be.equal("detail5")})),it("Should add/remove/dispatch events on HTML elements",(()=>{const e=document.createElement("test-div-event-dispatch"),t=new s(e);let n,i=0;let a,o=0;const c=e=>{o++,a=e.detail};t.applyPropListeners({"on-event3":"handler3","on-event4":e=>{i++,n=e.detail}}),t.addEventListener("event5",c),e.dispatchEvent(new CustomEvent("event3",{detail:"detail3"})),e.dispatchEvent(new CustomEvent("event4",{detail:"detail4"})),e.dispatchEvent(new CustomEvent("event5",{detail:"detail5"})),chai.expect(e.handler3Count).to.be.equal(1),chai.expect(i).to.be.equal(1),chai.expect(o).to.be.equal(1),chai.expect(e.handler3Detail).to.be.equal("detail3"),chai.expect(n).to.be.equal("detail4"),chai.expect(a).to.be.equal("detail5"),t.applyPropListeners({}),t.removeEventListener("event5",c),e.dispatchEvent(new CustomEvent("event3",{detail:"detail3i"})),e.dispatchEvent(new CustomEvent("event4",{detail:"detail4i"})),e.dispatchEvent(new CustomEvent("event5",{detail:"detail5i"})),chai.expect(e.handler3Count).to.be.equal(1),chai.expect(i).to.be.equal(1),chai.expect(o).to.be.equal(1),chai.expect(e.handler3Detail).to.be.equal("detail3"),chai.expect(n).to.be.equal("detail4"),chai.expect(a).to.be.equal("detail5")})),it("Should bubble events if specified",(()=>{const e=document.createElement("test-div-event-dispatch"),t=document.createElement("test-div-event-dispatch");t.appendChild(e);const n=new s(e);let i=0;t.addEventListener("event",(()=>{i++})),n.dispatchEvent("event",null,!1),chai.expect(i).to.be.equal(0),n.dispatchEvent("event",null,!0),chai.expect(i).to.be.equal(1),n.dispatchEvent("event"),chai.expect(i).to.be.equal(2)})),it("Should emit event from specified target",(()=>{const e=document.createElement("div"),t=new s(e),n=document.createElement("test-div-event-dispatch"),i=new s(n);i.applyPropListeners({"on-event3":"handler3"});let a=null,o=null;i.addEventListener("event3",(e=>{a=e.path,o=e.target})),t.dispatchEvent("event3","detail",!1,n),chai.expect(n.handler3Detail).to.be.equal("detail"),chai.expect(a).to.be.eql([n]),chai.expect(o).to.be.eql(o)})),it("Should dispose correctly",(()=>{const e=new N,t=new s(e);t.dispose(),chai.expect(t.node).to.be.equal(void 0),chai.expect(t.protoListeners).to.be.equal(void 0),chai.expect(t.propListeners).to.be.equal(void 0),chai.expect(t.addedListeners).to.be.equal(void 0)}))}))}}class R{connected=!0;prop1ChangeCounter=0;prop1Change;prop2ChangeCounter=0;prop2Change;changeCounter=0;applyComposeCounter=0;eventDispatchCounter=0;eventName;eventChange;eventRegister=[];changeRegister=[];prop1Changed(e){this.prop1Change=e,this.prop1ChangeCounter++,this.changeRegister.push("prop1Changed")}prop2Changed(e){this.prop2Change=e,this.prop2ChangeCounter++,this.changeRegister.push("prop2Changed")}dispatchEvent(e,t){this.eventDispatchCounter++,this.eventName=e,this.eventChange=t,this.eventRegister.push(e)}changed(){this.changeCounter++}applyCompose(){this.applyComposeCounter++}}class M{run(){describe("ChangeQueue",(()=>{it("Should initialize with correct default values",(()=>{const e=new R,t=new p(e);chai.expect(t.node).to.be.equal(e),chai.expect(JSON.stringify(t.changes)).to.be.equal("[]"),chai.expect(t.changes.length).to.be.equal(0),chai.expect(t.dispatching).to.be.equal(!1)})),it("Should dispatch change events with correct payloads",(()=>{const e=new R,t=new p(e);t.queue("test",1,0),t.queue("test",2,1),chai.expect(t.changes.length).to.be.equal(1),t.dispatch(),chai.expect(t.changes.length).to.be.equal(0),chai.expect(e.eventName).to.be.equal("test-changed"),chai.expect(e.eventChange?.property).to.be.equal("test"),chai.expect(e.eventChange?.value).to.be.equal(2),chai.expect(e.eventChange?.oldValue).to.be.equal(0),chai.expect(e.eventDispatchCounter).to.be.equal(1),chai.expect(e.changeCounter).to.be.equal(1),chai.expect(e.applyComposeCounter).to.be.equal(1),t.queue("test2",0,-1),t.queue("test3",2,1),chai.expect(t.changes.length).to.be.equal(2),t.dispatch(),chai.expect(t.changes.length).to.be.equal(0),chai.expect(e.eventName).to.be.equal("test3-changed"),chai.expect(e.eventChange?.property).to.be.equal("test3"),chai.expect(e.eventChange?.value).to.be.equal(2),chai.expect(e.eventChange?.oldValue).to.be.equal(1),chai.expect(e.eventDispatchCounter).to.be.equal(3),chai.expect(e.prop1ChangeCounter).to.be.equal(0),chai.expect(e.changeCounter).to.be.equal(2),chai.expect(e.applyComposeCounter).to.be.equal(2)})),it("Should invoke handler functions with correct payloads",(()=>{const e=new R,t=new p(e);t.queue("prop1",1,0),t.queue("prop1",2,1),t.dispatch(),chai.expect(e.prop1ChangeCounter).to.be.equal(1),chai.expect(e.changeCounter).to.be.equal(1),chai.expect(e.applyComposeCounter).to.be.equal(1),chai.expect(e.prop1Change?.property).to.be.equal("prop1"),chai.expect(e.prop1Change?.value).to.be.equal(2),chai.expect(e.prop1Change?.oldValue).to.be.equal(0)})),it("Should handle changes in first-in, first-out (FIFO) order",(()=>{const e=new R,t=new p(e);t.queue("prop1",1,0),t.queue("prop1",3,0),t.queue("prop2",2,0),t.dispatch(),chai.expect(JSON.stringify(e.changeRegister)).to.be.equal('["prop1Changed","prop2Changed"]'),chai.expect(JSON.stringify(e.eventRegister)).to.be.equal('["prop1-changed","prop2-changed"]')})),it("Should skip dispatch if value is same as oldValue",(()=>{const e=new R,t=new p(e);t.queue("prop1",0,0),t.dispatch(),chai.expect(e.prop1ChangeCounter).to.be.equal(0)})),it("Should dispose correctly",(()=>{const e=new R,t=new p(e);t.dispose(),chai.expect(t.node).to.be.equal(void 0),chai.expect(t.changes).to.be.equal(void 0)}))}))}}mocha.setup("bdd");const V=document.createElement("div");V.setAttribute("id","mocha"),document.body.appendChild(V),V.style.display="none";let H=!1;class J extends i{static get Style(){return":host #mocha {margin: 0;position: relative;}:host #mocha-report {margin: 2em 1em;}:host #mocha-stats {position: absolute;top: -2em;right: 2em;font-size: 12px;margin: 0;}:host #mocha-stats em {color: var(--io-color);}:host #mocha-stats li {padding: 0;}:host #mocha-stats .progress {display: none;}:host #mocha-stats .passes {color: #0c0;}:host #mocha-stats .failures {color: #f00;font-weight: bold;}:host h2 {padding-right: 2em;}:host .replay {display: none !important;}"}connectedCallback(){super.connectedCallback(),H||((new P).run(),(new _).run(),(new k).run(),(new z).run(),(new M).run(),mocha.checkLeaks(),mocha.run(),H=!0),this.appendChild(V),V.style.display="block"}disconnectedCallback(){super.disconnectedCallback(),document.body.appendChild(V),V.style.display="none"}}d(J);export{J as IoTest};
