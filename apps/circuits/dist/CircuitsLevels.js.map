{"version":3,"file":"CircuitsLevels.js","sourceRoot":"","sources":["../src/CircuitsLevels.ts"],"names":[],"mappings":";;;;;;AAAA,OAAO,EAAE,SAAS,EAAE,QAAQ,EAAE,gBAAgB,EAAE,MAAM,cAAc,CAAA;AACpE,OAAO,EAAE,UAAU,EAAE,UAAU,EAAE,MAAM,eAAe,CAAA;AAG/C,IAAM,cAAc,GAApB,MAAM,cAAe,SAAQ,SAAS;IAC3C,MAAM,KAAK,KAAK;QACd,OAAO,SAAS,CAAC;;;;;;;;KAQhB,CAAA;IACH,CAAC;IAKO,OAAO,GAAG,IAAI,UAAU,CAAC,EAAE,EAAE,EAAE,QAAQ,EAAE,OAAO,EAAE,EAAE,EAAE,CAAC,CAAA;IACvD,SAAS,GAAa,EAAE,CAAA;IAEhC,KAAK,CAAC,KAAK;QACT,MAAM,IAAI,CAAC,WAAW,EAAE,CAAA;QACxB,IAAI,CAAC,OAAO,EAAE,CAAA;IAChB,CAAC;IAEO,kBAAkB,CAAC,QAAkB,EAAE,YAAsB;QACnE,OAAO,QAAQ,CAAC,GAAG,CACjB,CAAC,EAAE,EAAE,EAAE,CACL,IAAI,UAAU,CAAC;YACb,EAAE;YACF,KAAK,EAAE,EAAE;YACT,QAAQ,EAAE,YAAY,CAAC,QAAQ,CAAC,EAAE,CAAC;YACnC,MAAM,EAAE,GAAG,EAAE,CAAC,IAAI,CAAC,QAAQ,CAAC,cAAc,EAAE,EAAE,KAAK,EAAE,EAAE,EAAE,EAAE,IAAI,CAAC;SACjE,CAAC,CACL,CAAA;IACH,CAAC;IAEO,KAAK,CAAC,WAAW;QACvB,MAAM,QAAQ,GAAG,MAAM,KAAK,CAAC,4BAA4B,CAAC,CAAA;QAC1D,IAAI,CAAC,SAAS,GAAG,MAAM,QAAQ,CAAC,IAAI,EAAE,CAAA;QACtC,MAAM,SAAS,GAAG,IAAI,CAAC,eAAe,IAAI,EAAE,CAAA;QAC5C,IAAI,CAAC,OAAO,GAAG,IAAI,UAAU,CAAC;YAC5B,EAAE,EAAE,QAAQ;YACZ,OAAO,EAAE,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,SAAS,EAAE,SAAS,CAAC;SAC5D,CAAC,CAAA;IACJ,CAAC;IAED,gBAAgB,CAAC,YAAsB;QACrC,IAAI,CAAC,eAAe,GAAG,YAAY,CAAA;QACnC,IAAI,CAAC,OAAO,GAAG,IAAI,UAAU,CAAC;YAC5B,EAAE,EAAE,QAAQ;YACZ,OAAO,EAAE,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,SAAS,EAAE,YAAY,CAAC;SAC/D,CAAC,CAAA;QACF,IAAI,CAAC,OAAO,EAAE,CAAA;IAChB,CAAC;IAED,OAAO;QACL,IAAI,CAAC,MAAM,CAAC,CAAC,UAAU,CAAC,EAAE,MAAM,EAAE,IAAI,CAAC,OAAO,EAAE,CAAC,CAAC,CAAC,CAAA;IACrD,CAAC;CACF,CAAA;AA5CS;IADP,gBAAgB,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,EAAE,EAAE,EAAE,CAAC;uDACZ;AAdtB,cAAc;IAD1B,QAAQ;GACI,cAAc,CA0D1B;;AAED,MAAM,CAAC,MAAM,cAAc,GAAG,cAAc,CAAC,YAAY,CAAA","sourcesContent":["import { IoElement, Register, ReactiveProperty } from '@io-gui/core'\nimport { MenuOption, ioMenuTree } from '@io-gui/menus'\n\n@Register\nexport class CircuitsLevels extends IoElement {\n  static get Style() {\n    return /* css */ `\n      :host > .app-title {\n        margin-left: 1rem;\n        font-size: 2rem;\n        font-weight: bold;\n        letter-spacing: 2px;\n        text-transform: uppercase;\n      }\n    `\n  }\n\n  @ReactiveProperty({ type: Array, value: [] })\n  declare completedLevels: string[]\n\n  private _option = new MenuOption({ id: 'levels', options: [] })\n  private _levelIds: string[] = []\n\n  async ready() {\n    await this._loadLevels()\n    this.changed()\n  }\n\n  private _buildLevelOptions(levelIds: string[], completedIds: string[]) {\n    return levelIds.map(\n      (id) =>\n        new MenuOption({\n          id,\n          label: id,\n          disabled: completedIds.includes(id),\n          action: () => this.dispatch('level-select', { level: id }, true),\n        }),\n    )\n  }\n\n  private async _loadLevels() {\n    const response = await fetch('./public/levels/index.json')\n    this._levelIds = await response.json()\n    const completed = this.completedLevels ?? []\n    this._option = new MenuOption({\n      id: 'levels',\n      options: this._buildLevelOptions(this._levelIds, completed),\n    })\n  }\n\n  refreshCompleted(completedIds: string[]) {\n    this.completedLevels = completedIds\n    this._option = new MenuOption({\n      id: 'levels',\n      options: this._buildLevelOptions(this._levelIds, completedIds),\n    })\n    this.changed()\n  }\n\n  changed() {\n    this.render([ioMenuTree({ option: this._option })])\n  }\n}\n\nexport const circuitsLevels = CircuitsLevels.vConstructor\n"]}